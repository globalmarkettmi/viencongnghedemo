(function(L,Et){"object"==typeof exports&&typeof module<"u"?module.exports=Et():"function"==typeof define&&define.amd?define(Et):(L=typeof globalThis<"u"?globalThis:L||self).ApexCharts=Et()})(this,function(){"use strict";function L(V,r){var a=Object.keys(V);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(V);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(V,d).enumerable})),a.push.apply(a,h)}return a}function Et(V){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?L(Object(a),!0).forEach(function(h){as(V,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach(function(h){Object.defineProperty(V,h,Object.getOwnPropertyDescriptor(a,h))})}return V}function be(V){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(V)}function zt(V,r){if(!(V instanceof r))throw new TypeError("Cannot call a class as a function")}function hu(V,r){for(var a=0;a<r.length;a++){var h=r[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(V,h.key,h)}}function Dt(V,r,a){return r&&hu(V.prototype,r),a&&hu(V,a),V}function as(V,r,a){return r in V?Object.defineProperty(V,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):V[r]=a,V}function Rr(V,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(r&&r.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),r&&wa(V,r)}function Yr(V){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(V)}function wa(V,r){return(wa=Object.setPrototypeOf||function(a,h){return a.__proto__=h,a})(V,r)}function Vt(V){if(void 0===V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function Tt(V){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,h=Yr(V);if(r){var d=Yr(this).constructor;a=Reflect.construct(h,arguments,d)}else a=h.apply(this,arguments);return function(f,g){if(g&&("object"==typeof g||"function"==typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return Vt(f)}(this,a)}}function uu(V,r){return function(a){if(Array.isArray(a))return a}(V)||function(a,h){var d=null==a?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(null!=d){var f,g,y=[],x=!0,S=!1;try{for(d=d.call(a);!(x=(f=d.next()).done)&&(y.push(f.value),!h||y.length!==h);x=!0);}catch(M){S=!0,g=M}finally{try{x||null==d.return||d.return()}finally{if(S)throw g}}return y}}(V,r)||ba(V,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(V){return function(r){if(Array.isArray(r))return St(r)}(V)||function(r){if(typeof Symbol<"u"&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(V)||ba(V)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(V,r){if(V){if("string"==typeof V)return St(V,r);var a=Object.prototype.toString.call(V).slice(8,-1);return"Object"===a&&V.constructor&&(a=V.constructor.name),"Map"===a||"Set"===a?Array.from(V):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?St(V,r):void 0}}function St(V,r){(null==r||r>V.length)&&(r=V.length);for(var a=0,h=new Array(r);a<r;a++)h[a]=V[a];return h}function dr(V,r){var a=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!a){if(Array.isArray(V)||(a=ba(V))||r&&V&&"number"==typeof V.length){a&&(V=a);var h=0,d=function(){};return{s:d,n:function(){return h>=V.length?{done:!0}:{done:!1,value:V[h++]}},e:function(x){throw x},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,y=!1;return{s:function(){a=a.call(V)},n:function(){var x=a.next();return g=x.done,x},e:function(x){y=!0,f=x},f:function(){try{g||null==a.return||a.return()}finally{if(y)throw f}}}}var at=function(){function V(){zt(this,V)}return Dt(V,[{key:"shadeRGBColor",value:function(r,a){var h=a.split(","),d=r<0?0:255,f=r<0?-1*r:r,g=parseInt(h[0].slice(4),10),y=parseInt(h[1],10),x=parseInt(h[2],10);return"rgb("+(Math.round((d-g)*f)+g)+","+(Math.round((d-y)*f)+y)+","+(Math.round((d-x)*f)+x)+")"}},{key:"shadeHexColor",value:function(r,a){var h=parseInt(a.slice(1),16),d=r<0?0:255,f=r<0?-1*r:r,g=h>>16,y=h>>8&255,x=255&h;return"#"+(16777216+65536*(Math.round((d-g)*f)+g)+256*(Math.round((d-y)*f)+y)+(Math.round((d-x)*f)+x)).toString(16).slice(1)}},{key:"shadeColor",value:function(r,a){return V.isColorHex(a)?this.shadeHexColor(r,a):this.shadeRGBColor(r,a)}}],[{key:"bind",value:function(r,a){return function(){return r.apply(a,arguments)}}},{key:"isObject",value:function(r){return r&&"object"===be(r)&&!Array.isArray(r)&&null!=r}},{key:"is",value:function(r,a){return Object.prototype.toString.call(a)==="[object "+r+"]"}},{key:"listToArray",value:function(r){var a,h=[];for(a=0;a<r.length;a++)h[a]=r[a];return h}},{key:"extend",value:function(r,a){var h=this;"function"!=typeof Object.assign&&(Object.assign=function(f){if(null==f)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(f),y=1;y<arguments.length;y++){var x=arguments[y];if(null!=x)for(var S in x)x.hasOwnProperty(S)&&(g[S]=x[S])}return g});var d=Object.assign({},r);return this.isObject(r)&&this.isObject(a)&&Object.keys(a).forEach(function(f){h.isObject(a[f])&&f in r?d[f]=h.extend(r[f],a[f]):Object.assign(d,as({},f,a[f]))}),d}},{key:"extendArray",value:function(r,a){var h=[];return r.map(function(d){h.push(V.extend(a,d))}),h}},{key:"monthMod",value:function(r){return r%12}},{key:"clone",value:function(r){if(V.is("Array",r)){for(var a=[],h=0;h<r.length;h++)a[h]=this.clone(r[h]);return a}if(V.is("Null",r))return null;if(V.is("Date",r))return r;if("object"===be(r)){var d={};for(var f in r)r.hasOwnProperty(f)&&(d[f]=this.clone(r[f]));return d}return r}},{key:"log10",value:function(r){return Math.log(r)/Math.LN10}},{key:"roundToBase10",value:function(r){return Math.pow(10,Math.floor(Math.log10(r)))}},{key:"roundToBase",value:function(r,a){return Math.pow(a,Math.floor(Math.log(r)/Math.log(a)))}},{key:"parseNumber",value:function(r){return null===r?r:parseFloat(r)}},{key:"stripNumber",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(r)?r:parseFloat(r.toPrecision(a))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(r){var a=String(r).split(/[eE]/);if(1===a.length)return a[0];var h="",d=r<0?"-":"",f=a[0].replace(".",""),g=Number(a[1])+1;if(g<0){for(h=d+"0.";g++;)h+="0";return h+f.replace(/^-/,"")}for(g-=f.length;g--;)h+="0";return f+h}},{key:"getDimensions",value:function(r){var a=getComputedStyle(r,null),h=r.clientHeight,d=r.clientWidth;return h-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),[d-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),h]}},{key:"getBoundingClientRect",value:function(r){var a=r.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:r.clientWidth,height:r.clientHeight,x:a.left,y:a.top}}},{key:"getLargestStringFromArr",value:function(r){return r.reduce(function(a,h){return Array.isArray(h)&&(h=h.reduce(function(d,f){return d.length>f.length?d:f})),a.length>h.length?a:h},0)}},{key:"hexToRgba",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==r.substring(0,1)&&(r="#999999");var h=r.replace("#","");h=h.match(new RegExp("(.{"+h.length/3+"})","g"));for(var d=0;d<h.length;d++)h[d]=parseInt(1===h[d].length?h[d]+h[d]:h[d],16);return void 0!==a&&h.push(a),"rgba("+h.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(r){return parseFloat(r.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(r){return(r=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===r.length?"#"+("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(r)}},{key:"getPolygonPos",value:function(r,a){for(var h=[],d=2*Math.PI/a,f=0;f<a;f++){var g={};g.x=r*Math.sin(f*d),g.y=-r*Math.cos(f*d),h.push(g)}return h}},{key:"polarToCartesian",value:function(r,a,h,d){var f=(d-90)*Math.PI/180;return{x:r+h*Math.cos(f),y:a+h*Math.sin(f)}}},{key:"escapeString",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return r.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,a)}},{key:"negToZero",value:function(r){return r<0?0:r}},{key:"moveIndexInArray",value:function(r,a,h){if(h>=r.length)for(var d=h-r.length+1;d--;)r.push(void 0);return r.splice(h,0,r.splice(a,1)[0]),r}},{key:"extractNumber",value:function(r){return parseFloat(r.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(r,a){for(;(r=r.parentElement)&&!r.classList.contains(a););return r}},{key:"setELstyles",value:function(r,a){for(var h in a)a.hasOwnProperty(h)&&(r.style.key=a[h])}},{key:"isNumber",value:function(r){return!isNaN(r)&&parseFloat(Number(r))===r&&!isNaN(parseInt(r,10))}},{key:"isFloat",value:function(r){return Number(r)===r&&r%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var r=window.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var h=r.indexOf("rv:");return parseInt(r.substring(h+3,r.indexOf(".",h)),10)}var d=r.indexOf("Edge/");return d>0&&parseInt(r.substring(d+5,r.indexOf(".",d)),10)}},{key:"getGCD",value:function(r,a){var d=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(r,a))));for(r=Math.round(Math.abs(r)*d),a=Math.round(Math.abs(a)*d);a;){var f=a;a=r%a,r=f}return r/d}},{key:"getPrimeFactors",value:function(r){for(var a=[],h=2;r>=2;)r%h==0?(a.push(h),r/=h):h++;return a}},{key:"mod",value:function(r,a){var d=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(r,a))));return(r=Math.round(Math.abs(r)*d))%(a=Math.round(Math.abs(a)*d))/d}}]),V}(),On=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.setEasingFunctions()}return Dt(V,[{key:"setEasingFunctions",value:function(){var r;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":r="-";break;case"easein":r="<";break;case"easeout":r=">";break;case"easeinout":default:r="<>";break;case"swing":r=function(a){var h=1.70158;return(a-=1)*a*((h+1)*a+h)+1};break;case"bounce":r=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};break;case"elastic":r=function(a){return a===!!a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=r}}},{key:"animateLine",value:function(r,a,h,d){r.attr(a).animate(d).attr(h)}},{key:"animateMarker",value:function(r,a,h,d,f,g){a||(a=0),r.attr({r:a,width:a,height:a}).animate(d,f).attr({r:h,width:h.width,height:h.height}).afterAll(function(){g()})}},{key:"animateCircle",value:function(r,a,h,d,f){r.attr({r:a.r,cx:a.cx,cy:a.cy}).animate(d,f).attr({r:h.r,cx:h.cx,cy:h.cy})}},{key:"animateRect",value:function(r,a,h,d,f){r.attr(a).animate(d).attr(h).afterAll(function(){return f()})}},{key:"animatePathsGradually",value:function(r){var M=this.w,C=0;M.config.chart.animations.animateGradually.enabled&&(C=M.config.chart.animations.animateGradually.delay),M.config.chart.animations.dynamicAnimation.enabled&&M.globals.dataChanged&&"bar"!==M.config.chart.type&&(C=0),this.morphSVG(r.el,r.realIndex,r.j,"line"!==M.config.chart.type||M.globals.comboCharts?r.fill:"stroke",r.pathFrom,r.pathTo,r.speed,r.delay*C)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(r){var a=r.el;a.classList.remove("apexcharts-element-hidden"),a.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(r){var a=this.w;a.globals.animationEnded||(a.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof a.config.chart.events.animationEnd&&a.config.chart.events.animationEnd(this.ctx,{el:r,w:a}))}},{key:"morphSVG",value:function(r,a,h,d,f,g,y,x){var S=this,M=this.w;f||(f=r.attr("pathFrom")),g||(g=r.attr("pathTo"));var C=function(P){return"radar"===M.config.chart.type&&(y=1),"M 0 ".concat(M.globals.gridHeight)};(!f||f.indexOf("undefined")>-1||f.indexOf("NaN")>-1)&&(f=C()),(!g||g.indexOf("undefined")>-1||g.indexOf("NaN")>-1)&&(g=C()),M.globals.shouldAnimate||(y=1),r.plot(f).animate(1,M.globals.easing,x).plot(f).animate(y,M.globals.easing,x).plot(g).afterAll(function(){at.isNumber(h)?h===M.globals.series[M.globals.maxValsInArrayIndex].length-2&&M.globals.shouldAnimate&&S.animationCompleted(r):"none"!==d&&M.globals.shouldAnimate&&(!M.globals.comboCharts&&a===M.globals.series.length-1||M.globals.comboCharts)&&S.animationCompleted(r),S.showDelayedElements()})}}]),V}(),Ve=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"getDefaultFilter",value:function(r,a){var h=this.w;r.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==h.config.states.normal.filter?this.applyFilter(r,a,h.config.states.normal.filter.type,h.config.states.normal.filter.value):h.config.chart.dropShadow.enabled&&this.dropShadow(r,h.config.chart.dropShadow,a)}},{key:"addNormalFilter",value:function(r,a){var h=this.w;h.config.chart.dropShadow.enabled&&!r.node.classList.contains("apexcharts-marker")&&this.dropShadow(r,h.config.chart.dropShadow,a)}},{key:"addLightenFilter",value:function(r,a,h){var d=this,f=this.w,g=h.intensity;r.unfilter(!0),new window.SVG.Filter,r.filter(function(y){var x=f.config.chart.dropShadow;(x.enabled?d.addShadow(y,a,x):y).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:g}})}),r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)}},{key:"addDarkenFilter",value:function(r,a,h){var d=this,f=this.w,g=h.intensity;r.unfilter(!0),new window.SVG.Filter,r.filter(function(y){var x=f.config.chart.dropShadow;(x.enabled?d.addShadow(y,a,x):y).componentTransfer({rgb:{type:"linear",slope:g}})}),r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)}},{key:"applyFilter",value:function(r,a,h){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(h){case"none":this.addNormalFilter(r,a);break;case"lighten":this.addLightenFilter(r,a,{intensity:d});break;case"darken":this.addDarkenFilter(r,a,{intensity:d})}}},{key:"addShadow",value:function(r,a,h){var d,f=this.w,g=h.blur,y=h.top,x=h.left,S=h.color,M=h.opacity;if((null===(d=f.config.chart.dropShadow.enabledOnSeries)||void 0===d?void 0:d.length)>0&&-1===f.config.chart.dropShadow.enabledOnSeries.indexOf(a))return r;var C=r.flood(Array.isArray(S)?S[a]:S,M).composite(r.sourceAlpha,"in").offset(x,y).gaussianBlur(g).merge(r.source);return r.blend(r.source,C)}},{key:"dropShadow",value:function(r,a){var h,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=a.top,y=a.left,x=a.blur,S=a.color,M=a.opacity,C=a.noUserSpaceOnUse,P=this.w;return r.unfilter(!0),at.isIE()&&"radialBar"===P.config.chart.type||(null===(h=P.config.chart.dropShadow.enabledOnSeries)||void 0===h?void 0:h.length)>0&&-1===(null===(d=P.config.chart.dropShadow.enabledOnSeries)||void 0===d?void 0:d.indexOf(f))||(S=Array.isArray(S)?S[f]:S,r.filter(function(F){var O;O=at.isSafari()||at.isFirefox()||at.isIE()?F.flood(S,M).composite(F.sourceAlpha,"in").offset(y,g).gaussianBlur(x):F.flood(S,M).composite(F.sourceAlpha,"in").offset(y,g).gaussianBlur(x).merge(F.source),F.blend(F.source,O)}),C||r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)),r}},{key:"setSelectionFilter",value:function(r,a,h){var d=this.w;if(void 0!==d.globals.selectedDataPoints[a]&&d.globals.selectedDataPoints[a].indexOf(h)>-1){r.node.setAttribute("selected",!0);var f=d.config.states.active.filter;"none"!==f&&this.applyFilter(r,a,f.type,f.value)}}},{key:"_scaleFilterSize",value:function(r){!function(a){for(var h in a)a.hasOwnProperty(h)&&r.setAttribute(h,a[h])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),V}(),Q=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"roundPathCorners",value:function(r,a){function h(Z,et,it){var pt=et.x-Z.x,wt=et.y-Z.y,xt=Math.sqrt(pt*pt+wt*wt);return d(Z,et,Math.min(1,it/xt))}function d(Z,et,it){return{x:Z.x+(et.x-Z.x)*it,y:Z.y+(et.y-Z.y)*it}}function f(Z,et){Z.length>2&&(Z[Z.length-2]=et.x,Z[Z.length-1]=et.y)}function g(Z){return{x:parseFloat(Z[Z.length-2]),y:parseFloat(Z[Z.length-1])}}r.indexOf("NaN")>-1&&(r="");var y=r.split(/[,\s]/).reduce(function(Z,et){var it=et.match("([a-zA-Z])(.+)");return it?(Z.push(it[1]),Z.push(it[2])):Z.push(et),Z},[]).reduce(function(Z,et){return parseFloat(et)==et&&Z.length?Z[Z.length-1].push(et):Z.push([et]),Z},[]),x=[];if(y.length>1){var S=g(y[0]),M=null;"Z"==y[y.length-1][0]&&y[0].length>2&&(y[y.length-1]=M=["L",S.x,S.y]),x.push(y[0]);for(var C=1;C<y.length;C++){var P=x[x.length-1],F=y[C],O=F==M?y[1]:y[C+1];if(O&&P&&P.length>2&&"L"==F[0]&&O.length>2&&"L"==O[0]){var D,Y,G=g(P),U=g(F),b=g(O);D=h(U,G,a),Y=h(U,b,a),f(F,D),F.origPoint=U,x.push(F);var N=d(D,U,.5),E=d(U,Y,.5),X=["C",N.x,N.y,E.x,E.y,Y.x,Y.y];X.origPoint=U,x.push(X)}else x.push(F)}if(M){var W=g(x[x.length-1]);x.push(["Z"]),f(x[0],W)}}else x=y;return x.reduce(function(Z,et){return Z+et.join(" ")+" "},"")}},{key:"drawLine",value:function(r,a,h,d){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,x=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:r,y1:a,x2:h,y2:d,stroke:f,"stroke-dasharray":g,"stroke-width":y,"stroke-linecap":x})}},{key:"drawRect",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,x=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,S=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,M=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,C=this.w.globals.dom.Paper.rect();return C.attr({x:r,y:a,width:h>0?h:0,height:d>0?d:0,rx:f,ry:f,opacity:y,"stroke-width":null!==x?x:0,stroke:null!==S?S:"none","stroke-dasharray":M}),C.node.setAttribute("fill",g),C}},{key:"drawPolygon",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(r).attr({fill:d,stroke:a,"stroke-width":h})}},{key:"drawCircle",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r<0&&(r=0);var h=this.w.globals.dom.Paper.circle(2*r);return null!==a&&h.attr(a),h}},{key:"drawPath",value:function(r){var a=r.d,h=void 0===a?"":a,d=r.stroke,f=void 0===d?"#a8a8a8":d,g=r.strokeWidth,y=void 0===g?1:g,x=r.fill,S=r.fillOpacity,M=void 0===S?1:S,C=r.strokeOpacity,P=void 0===C?1:C,F=r.classes,O=r.strokeLinecap,D=void 0===O?null:O,Y=r.strokeDashArray,G=void 0===Y?0:Y,U=this.w;return null===D&&(D=U.config.stroke.lineCap),(h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h="M 0 ".concat(U.globals.gridHeight)),U.globals.dom.Paper.path(h).attr({fill:x,"fill-opacity":M,stroke:f,"stroke-opacity":P,"stroke-linecap":D,"stroke-width":y,"stroke-dasharray":G,class:F})}},{key:"group",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.w.globals.dom.Paper.group();return null!==r&&a.attr(r),a}},{key:"move",value:function(r,a){return["M",r,a].join(" ")}},{key:"line",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=null;return null===h?d=[" L",r,a].join(" "):"H"===h?d=[" H",r].join(" "):"V"===h&&(d=[" V",a].join(" ")),d}},{key:"curve",value:function(r,a,h,d,f,g){return["C",r,a,h,d,f,g].join(" ")}},{key:"quadraticCurve",value:function(r,a,h,d){return["Q",r,a,h,d].join(" ")}},{key:"arc",value:function(r,a,h,d,f,g,y){var x="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(x="a"),[x,r,a,h,d,f,g,y].join(" ")}},{key:"renderPaths",value:function(r){var a,h=r.j,d=r.realIndex,f=r.pathFrom,g=r.pathTo,y=r.stroke,x=r.strokeWidth,S=r.strokeLinecap,M=r.fill,C=r.animationDelay,P=r.initialSpeed,F=r.dataChangeSpeed,O=r.className,D=r.shouldClipToGrid,Y=void 0===D||D,G=r.bindEventsOnPaths,U=void 0===G||G,b=r.drawShadow,N=void 0===b||b,E=this.w,X=new Ve(this.ctx),W=new On(this.ctx),Z=this.w.config.chart.animations.enabled,et=Z&&this.w.config.chart.animations.dynamicAnimation.enabled,it=!!(Z&&!E.globals.resized||et&&E.globals.dataChanged&&E.globals.shouldAnimate);it?a=f:(a=g,E.globals.animationEnded=!0);var wt,pt=E.config.stroke.dashArray;wt=Array.isArray(pt)?pt[d]:E.config.stroke.dashArray;var xt=this.drawPath({d:a,stroke:y,strokeWidth:x,fill:M,fillOpacity:1,classes:O,strokeLinecap:S,strokeDashArray:wt});xt.attr("index",d),Y&&xt.attr({"clip-path":"url(#gridRectMask".concat(E.globals.cuid,")")}),"none"!==E.config.states.normal.filter.type?X.getDefaultFilter(xt,d):E.config.chart.dropShadow.enabled&&N&&X.dropShadow(xt,E.config.chart.dropShadow,d),U&&(xt.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,xt)),xt.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,xt)),xt.node.addEventListener("mousedown",this.pathMouseDown.bind(this,xt))),xt.attr({pathTo:g,pathFrom:f});var Nt={el:xt,j:h,realIndex:d,pathFrom:f,pathTo:g,fill:M,strokeWidth:x,delay:C};return!Z||E.globals.resized||E.globals.dataChanged?!E.globals.resized&&E.globals.dataChanged||W.showDelayedElements():W.animatePathsGradually(Et(Et({},Nt),{},{speed:P})),E.globals.dataChanged&&et&&it&&W.animatePathsGradually(Et(Et({},Nt),{},{speed:F})),xt}},{key:"drawPattern",value:function(r,a,h){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(a,h,function(g){"horizontalLines"===r?g.line(0,0,h,0).stroke({color:d,width:f+1}):"verticalLines"===r?g.line(0,0,0,a).stroke({color:d,width:f+1}):"slantedLines"===r?g.line(0,0,a,h).stroke({color:d,width:f}):"squares"===r?g.rect(a,h).fill("none").stroke({color:d,width:f}):"circles"===r&&g.circle(a).fill("none").stroke({color:d,width:f})})}},{key:"drawGradient",value:function(r,a,h,d,f){var g,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,x=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,S=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,M=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,C=this.w;a.length<9&&0===a.indexOf("#")&&(a=at.hexToRgba(a,d)),h.length<9&&0===h.indexOf("#")&&(h=at.hexToRgba(h,f));var P=0,F=1,O=1,D=null;null!==x&&(P=void 0!==x[0]?x[0]/100:0,F=void 0!==x[1]?x[1]/100:1,O=void 0!==x[2]?x[2]/100:1,D=void 0!==x[3]?x[3]/100:null);var Y=!("donut"!==C.config.chart.type&&"pie"!==C.config.chart.type&&"polarArea"!==C.config.chart.type&&"bubble"!==C.config.chart.type);return g=C.globals.dom.Paper.gradient(Y?"radial":"linear",null===S||0===S.length?function(b){b.at(P,a,d),b.at(F,h,f),b.at(O,h,f),null!==D&&b.at(D,a,d)}:function(b){(Array.isArray(S[M])?S[M]:S).forEach(function(N){b.at(N.offset/100,N.color,N.opacity)})}),Y?g.attr("bubble"!==C.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:C.globals.gridWidth/2,cy:C.globals.gridHeight/2,r:y}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===r?g.from(0,0).to(0,1):"diagonal"===r?g.from(0,0).to(1,1):"horizontal"===r?g.from(0,1).to(1,1):"diagonal2"===r&&g.from(1,0).to(0,1),g}},{key:"getTextBasedOnMaxWidth",value:function(r){var a=r.text,h=r.maxWidth,g=this.getTextRects(a,r.fontSize,r.fontFamily),x=Math.floor(h/(g.width/a.length));return h<g.width?a.slice(0,x-3)+"...":a}},{key:"drawText",value:function(r){var a=this,h=r.x,d=r.y,f=r.text,g=r.textAnchor,y=r.fontSize,x=r.fontFamily,S=r.fontWeight,M=r.foreColor,C=r.opacity,P=r.maxWidth,F=r.cssClass,O=void 0===F?"":F,D=r.isPlainText,Y=void 0===D||D,G=r.dominantBaseline,U=void 0===G?"auto":G,b=this.w;void 0===f&&(f="");var N=f;g||(g="start"),M&&M.length||(M=b.config.chart.foreColor),S=S||"regular";var E,X={maxWidth:P,fontSize:y=y||"11px",fontFamily:x=x||b.config.chart.fontFamily};return Array.isArray(f)?E=b.globals.dom.Paper.text(function(W){for(var Z=0;Z<f.length;Z++)N=f[Z],P&&(N=a.getTextBasedOnMaxWidth(Et({text:f[Z]},X))),0===Z?W.tspan(N):W.tspan(N).newLine()}):(P&&(N=this.getTextBasedOnMaxWidth(Et({text:f},X))),E=Y?b.globals.dom.Paper.plain(f):b.globals.dom.Paper.text(function(W){return W.tspan(N)})),E.attr({x:h,y:d,"text-anchor":g,"dominant-baseline":U,"font-size":y,"font-family":x,"font-weight":S,fill:M,class:"apexcharts-text "+O}),E.node.style.fontFamily=x,E.node.style.opacity=C,E}},{key:"createGroupWithAttributes",value:function(r,a,h,d){var f=this.group();return h.forEach(function(g){return f.add(g)}),f.attr({class:d.class?d.class:"",cy:a,cx:r}),f}},{key:"drawPlus",value:function(r,a,h,d){var f=h/2,g=this.drawLine(r,a-f,r,a+f,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap),y=this.drawLine(r-f,a,r+f,a,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap);return this.createGroupWithAttributes(r,a,[g,y],d)}},{key:"drawX",value:function(r,a,h,d){var f=h/2,g=this.drawLine(r-f,a-f,r+f,a+f,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap),y=this.drawLine(r-f,a+f,r+f,a-f,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap);return this.createGroupWithAttributes(r,a,[g,y],d)}},{key:"drawMarker",value:function(r,a,h){r=r||0;var d=h.pSize||0,f=null;if("X"===h?.shape||"x"===h?.shape)f=this.drawX(r,a,d,h);else if("plus"===h?.shape||"+"===h?.shape)f=this.drawPlus(r,a,d,h);else if("square"===h.shape||"rect"===h.shape){var g=void 0===h.pRadius?d/2:h.pRadius;null!==a&&d||(d=0,g=0);var y=1.2*d+g,x=this.drawRect(y,y,y,y,g);x.attr({x:r-y/2,y:a-y/2,cx:r,cy:a,class:h.class?h.class:"",fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,stroke:h.pointStrokeColor,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}),f=x}else"circle"!==h.shape&&h.shape||(at.isNumber(a)||(d=0,a=0),f=this.drawCircle(d,{cx:r,cy:a,class:h.class?h.class:"",stroke:h.pointStrokeColor,fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}));return f}},{key:"pathMouseEnter",value:function(r,a){var h=this.w,d=new Ve(this.ctx),f=parseInt(r.node.getAttribute("index"),10),g=parseInt(r.node.getAttribute("j"),10);if("function"==typeof h.config.chart.events.dataPointMouseEnter&&h.config.chart.events.dataPointMouseEnter(a,this.ctx,{seriesIndex:f,dataPointIndex:g,w:h}),this.ctx.events.fireEvent("dataPointMouseEnter",[a,this.ctx,{seriesIndex:f,dataPointIndex:g,w:h}]),("none"===h.config.states.active.filter.type||"true"!==r.node.getAttribute("selected"))&&"none"!==h.config.states.hover.filter.type&&!h.globals.isTouchDevice){var y=h.config.states.hover.filter;d.applyFilter(r,f,y.type,y.value)}}},{key:"pathMouseLeave",value:function(r,a){var h=this.w,d=new Ve(this.ctx),f=parseInt(r.node.getAttribute("index"),10),g=parseInt(r.node.getAttribute("j"),10);"function"==typeof h.config.chart.events.dataPointMouseLeave&&h.config.chart.events.dataPointMouseLeave(a,this.ctx,{seriesIndex:f,dataPointIndex:g,w:h}),this.ctx.events.fireEvent("dataPointMouseLeave",[a,this.ctx,{seriesIndex:f,dataPointIndex:g,w:h}]),"none"!==h.config.states.active.filter.type&&"true"===r.node.getAttribute("selected")||"none"!==h.config.states.hover.filter.type&&d.getDefaultFilter(r,f)}},{key:"pathMouseDown",value:function(r,a){var h=this.w,d=new Ve(this.ctx),f=parseInt(r.node.getAttribute("index"),10),g=parseInt(r.node.getAttribute("j"),10),y="false";if("true"===r.node.getAttribute("selected")){if(r.node.setAttribute("selected","false"),h.globals.selectedDataPoints[f].indexOf(g)>-1){var x=h.globals.selectedDataPoints[f].indexOf(g);h.globals.selectedDataPoints[f].splice(x,1)}}else{if(!h.config.states.active.allowMultipleDataPointsSelection&&h.globals.selectedDataPoints.length>0){h.globals.selectedDataPoints=[];var S=h.globals.dom.Paper.select(".apexcharts-series path").members,M=h.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,C=function(O){Array.prototype.forEach.call(O,function(D){D.node.setAttribute("selected","false"),d.getDefaultFilter(D,f)})};C(S),C(M)}r.node.setAttribute("selected","true"),y="true",void 0===h.globals.selectedDataPoints[f]&&(h.globals.selectedDataPoints[f]=[]),h.globals.selectedDataPoints[f].push(g)}if("true"===y){var P=h.config.states.active.filter;if("none"!==P)d.applyFilter(r,f,P.type,P.value);else if("none"!==h.config.states.hover.filter&&!h.globals.isTouchDevice){var F=h.config.states.hover.filter;d.applyFilter(r,f,F.type,F.value)}}else"none"!==h.config.states.active.filter.type&&("none"===h.config.states.hover.filter.type||h.globals.isTouchDevice?d.getDefaultFilter(r,f):d.applyFilter(r,f,(F=h.config.states.hover.filter).type,F.value));"function"==typeof h.config.chart.events.dataPointSelection&&h.config.chart.events.dataPointSelection(a,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:f,dataPointIndex:g,w:h}),a&&this.ctx.events.fireEvent("dataPointSelection",[a,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:f,dataPointIndex:g,w:h}])}},{key:"rotateAroundCenter",value:function(r){var a={};return r&&"function"==typeof r.getBBox&&(a=r.getBBox()),{x:a.x+a.width/2,y:a.y+a.height/2}}},{key:"getTextRects",value:function(r,a,h,d){var f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],g=this.w,y=this.drawText({x:-200,y:-200,text:r,textAnchor:"start",fontSize:a,fontFamily:h,foreColor:"#fff",opacity:0});d&&y.attr("transform",d),g.globals.dom.Paper.add(y);var x=y.bbox();return f||(x=y.node.getBoundingClientRect()),y.remove(),{width:x.width,height:x.height}}},{key:"placeTextWithEllipsis",value:function(r,a,h){if("function"==typeof r.getComputedTextLength&&(r.textContent=a,a.length>0&&r.getComputedTextLength()>=h/1.1)){for(var d=a.length-3;d>0;d-=3)if(r.getSubStringLength(0,d)<=h/1.1)return void(r.textContent=a.substring(0,d)+"...");r.textContent="."}}}],[{key:"setAttrs",value:function(r,a){for(var h in a)a.hasOwnProperty(h)&&r.setAttribute(h,a[h])}}]),V}(),Lt=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"getStackedSeriesTotals",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.w,h=[];if(0===a.globals.series.length)return h;for(var d=0;d<a.globals.series[a.globals.maxValsInArrayIndex].length;d++){for(var f=0,g=0;g<a.globals.series.length;g++)void 0!==a.globals.series[g][d]&&-1===r.indexOf(g)&&(f+=a.globals.series[g][d]);h.push(f)}return h}},{key:"getSeriesTotalByIndex",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===r?this.w.config.series.reduce(function(a,h){return a+h},0):this.w.globals.series[r].reduce(function(a,h){return a+h},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var r=this,a=this.w,h=[];return a.globals.seriesGroups.forEach(function(d){var f=[];a.config.series.forEach(function(y,x){d.indexOf(y.name)>-1&&f.push(x)});var g=a.globals.series.map(function(y,x){return-1===f.indexOf(x)?x:-1}).filter(function(y){return-1!==y});h.push(r.getStackedSeriesTotals(g))}),h}},{key:"isSeriesNull",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===r?this.w.config.series.filter(function(a){return null!==a}):this.w.config.series[r].data.filter(function(a){return null!==a})).length}},{key:"seriesHaveSameValues",value:function(r){return this.w.globals.series[r].every(function(a,h,d){return a===d[0]})}},{key:"getCategoryLabels",value:function(r){var a=this.w,h=r.slice();return a.config.xaxis.convertedCatToNumeric&&(h=r.map(function(d,f){return a.config.xaxis.labels.formatter(d-a.globals.minX+1)})),h}},{key:"getLargestSeries",value:function(){var r=this.w;r.globals.maxValsInArrayIndex=r.globals.series.map(function(a){return a.length}).indexOf(Math.max.apply(Math,r.globals.series.map(function(a){return a.length})))}},{key:"getLargestMarkerSize",value:function(){var r=this.w,a=0;return r.globals.markers.size.forEach(function(h){a=Math.max(a,h)}),r.config.markers.discrete&&r.config.markers.discrete.length&&r.config.markers.discrete.forEach(function(h){a=Math.max(a,h.size)}),a>0&&(a+=r.config.markers.hover.sizeOffset+1),r.globals.markers.largestSize=a,a}},{key:"getSeriesTotals",value:function(){var r=this.w;r.globals.seriesTotals=r.globals.series.map(function(a,h){var d=0;if(Array.isArray(a))for(var f=0;f<a.length;f++)d+=a[f];else d+=a;return d})}},{key:"getSeriesTotalsXRange",value:function(r,a){var h=this.w;return h.globals.series.map(function(d,f){for(var g=0,y=0;y<d.length;y++)h.globals.seriesX[f][y]>r&&h.globals.seriesX[f][y]<a&&(g+=d[y]);return g})}},{key:"getPercentSeries",value:function(){var r=this.w;r.globals.seriesPercent=r.globals.series.map(function(a,h){var d=[];if(Array.isArray(a))for(var f=0;f<a.length;f++){var g=r.globals.stackedSeriesTotals[f],y=0;g&&(y=100*a[f]/g),d.push(y)}else{var x=100*a/r.globals.seriesTotals.reduce(function(S,M){return S+M},0);d.push(x)}return d})}},{key:"getCalculatedRatios",value:function(){var r,a,h,d=this.w.globals,f=[],g=0,y=[],x=.1,S=0;if(d.yRange=[],d.isMultipleYAxis)for(var M=0;M<d.minYArr.length;M++)d.yRange.push(Math.abs(d.minYArr[M]-d.maxYArr[M])),y.push(0);else d.yRange.push(Math.abs(d.minY-d.maxY));d.xRange=Math.abs(d.maxX-d.minX),d.zRange=Math.abs(d.maxZ-d.minZ);for(var C=0;C<d.yRange.length;C++)f.push(d.yRange[C]/d.gridHeight);if(a=d.xRange/d.gridWidth,r=d.yRange/d.gridWidth,h=d.xRange/d.gridHeight,(g=d.zRange/d.gridHeight*16)||(g=1),d.minY!==Number.MIN_VALUE&&0!==Math.abs(d.minY)&&(d.hasNegs=!0),d.isMultipleYAxis){y=[];for(var P=0;P<f.length;P++)y.push(-d.minYArr[P]/f[P])}else y.push(-d.minY/f[0]),d.minY!==Number.MIN_VALUE&&0!==Math.abs(d.minY)&&(x=-d.minY/r,S=d.minX/a);return{yRatio:f,invertedYRatio:r,zRatio:g,xRatio:a,invertedXRatio:h,baseLineInvertedY:x,baseLineY:y,baseLineX:S}}},{key:"getLogSeries",value:function(r){var a=this,h=this.w;return h.globals.seriesLog=r.map(function(d,f){return h.config.yaxis[f]&&h.config.yaxis[f].logarithmic?d.map(function(g){return null===g?null:a.getLogVal(h.config.yaxis[f].logBase,g,f)}):d}),h.globals.invalidLogScale?r:h.globals.seriesLog}},{key:"getBaseLog",value:function(r,a){return Math.log(a)/Math.log(r)}},{key:"getLogVal",value:function(r,a,h){if(0===a)return 0;var d=this.w,f=0===d.globals.minYArr[h]?-1:this.getBaseLog(r,d.globals.minYArr[h]),g=(0===d.globals.maxYArr[h]?0:this.getBaseLog(r,d.globals.maxYArr[h]))-f;return a<1?a/g:(this.getBaseLog(r,a)-f)/g}},{key:"getLogYRatios",value:function(r){var a=this,h=this.w,d=this.w.globals;return d.yLogRatio=r.slice(),d.logYRange=d.yRange.map(function(f,g){if(h.config.yaxis[g]&&a.w.config.yaxis[g].logarithmic){var y,x=-Number.MAX_VALUE,S=Number.MIN_VALUE;return d.seriesLog.forEach(function(M,C){M.forEach(function(P){h.config.yaxis[C]&&h.config.yaxis[C].logarithmic&&(x=Math.max(P,x),S=Math.min(P,S))})}),y=Math.pow(d.yRange[g],Math.abs(S-x)/d.yRange[g]),d.yLogRatio[g]=y/d.gridHeight,y}}),d.invalidLogScale?r.slice():d.yLogRatio}}],[{key:"checkComboSeries",value:function(r){var a=!1,h=0,d=0;return r.length&&void 0!==r[0].type&&r.forEach(function(f){"bar"!==f.type&&"column"!==f.type&&"candlestick"!==f.type&&"boxPlot"!==f.type||h++,void 0!==f.type&&d++}),d>0&&(a=!0),{comboBarCount:h,comboCharts:a}}},{key:"extendArrayProps",value:function(r,a,h){var d,f,g,y,x,S;return null!==(d=a)&&void 0!==d&&d.yaxis&&(a=r.extendYAxis(a,h)),null!==(f=a)&&void 0!==f&&f.annotations&&(a.annotations.yaxis&&(a=r.extendYAxisAnnotations(a)),null!==(g=a)&&void 0!==g&&null!==(y=g.annotations)&&void 0!==y&&y.xaxis&&(a=r.extendXAxisAnnotations(a)),null!==(x=a)&&void 0!==x&&null!==(S=x.annotations)&&void 0!==S&&S.points&&(a=r.extendPointAnnotations(a))),a}}]),V}(),ie=function(){function V(r){zt(this,V),this.w=r.w,this.annoCtx=r}return Dt(V,[{key:"setOrientations",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===r.label.orientation){var f=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==a?a:0,"']"));if(null!==f){var g=f.getBoundingClientRect();f.setAttribute("x",parseFloat(f.getAttribute("x"))-g.height+4),f.setAttribute("y","top"===r.label.position?parseFloat(f.getAttribute("y"))+g.width:parseFloat(f.getAttribute("y"))-g.width);var y=this.annoCtx.graphics.rotateAroundCenter(f),S=y.y;f.setAttribute("transform","rotate(-90 ".concat(y.x," ").concat(S,")"))}}}},{key:"addBackgroundToAnno",value:function(r,a){var h=this.w;if(!r||void 0===a.label.text||void 0!==a.label.text&&!String(a.label.text).trim())return null;var d=h.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),f=r.getBoundingClientRect(),g=a.label.style.padding.left,y=a.label.style.padding.right,x=a.label.style.padding.top,S=a.label.style.padding.bottom;"vertical"===a.label.orientation&&(x=a.label.style.padding.left,S=a.label.style.padding.right,g=a.label.style.padding.top,y=a.label.style.padding.bottom);var P=this.annoCtx.graphics.drawRect(f.left-d.left-g-h.globals.barPadForNumericAxis,f.top-d.top-x,f.width+g+y,f.height+x+S,a.label.borderRadius,a.label.style.background,1,a.label.borderWidth,a.label.borderColor,0);return a.id&&P.node.classList.add(a.id),P}},{key:"annotationsBackground",value:function(){var r=this,a=this.w,h=function(d,f,g){var y=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(g,"-annotations .apexcharts-").concat(g,"-annotation-label[rel='").concat(f,"']"));if(y){var x=y.parentNode,S=r.addBackgroundToAnno(y,d);S&&(x.insertBefore(S.node,y),d.label.mouseEnter&&S.node.addEventListener("mouseenter",d.label.mouseEnter.bind(r,d)),d.label.mouseLeave&&S.node.addEventListener("mouseleave",d.label.mouseLeave.bind(r,d)),d.label.click&&S.node.addEventListener("click",d.label.click.bind(r,d)))}};a.config.annotations.xaxis.map(function(d,f){h(d,f,"xaxis")}),a.config.annotations.yaxis.map(function(d,f){h(d,f,"yaxis")}),a.config.annotations.points.map(function(d,f){h(d,f,"point")})}},{key:"getY1Y2",value:function(r,a){var h,d="y1"===r?a.y:a.y2,f=this.w;if(this.annoCtx.invertAxis){var g=f.globals.labels;f.config.xaxis.convertedCatToNumeric&&(g=f.globals.categoryLabels);var y=g.indexOf(d),x=f.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(y+1)+")");h=x?parseFloat(x.getAttribute("y")):(f.globals.gridHeight/g.length-1)*(y+1)-f.globals.barHeight,void 0!==a.seriesIndex&&f.globals.barHeight&&(h=h-f.globals.barHeight/2*(f.globals.series.length-1)+f.globals.barHeight*a.seriesIndex)}else{var S;S=f.config.yaxis[a.yAxisIndex].logarithmic?(d=new Lt(this.annoCtx.ctx).getLogVal(d,a.yAxisIndex))/f.globals.yLogRatio[a.yAxisIndex]:(d-f.globals.minYArr[a.yAxisIndex])/(f.globals.yRange[a.yAxisIndex]/f.globals.gridHeight),h=f.globals.gridHeight-S,!a.marker||null!=a.y||(h=0),f.config.yaxis[a.yAxisIndex]&&f.config.yaxis[a.yAxisIndex].reversed&&(h=S)}return"string"==typeof d&&d.indexOf("px")>-1&&(h=parseFloat(d)),h}},{key:"getX1X2",value:function(r,a){var h=this.w,d=this.annoCtx.invertAxis?h.globals.minY:h.globals.minX,f=this.annoCtx.invertAxis?h.globals.maxY:h.globals.maxX,g=this.annoCtx.invertAxis?h.globals.yRange[0]:h.globals.xRange,y=(a.x-d)/(g/h.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(y=(f-a.x)/(g/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(y=this.getStringX(a.x));var x=(a.x2-d)/(g/h.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(x=(f-a.x2)/(g/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(x=this.getStringX(a.x2)),null!=a.x||!a.marker||(y=h.globals.gridWidth),"x1"===r&&"string"==typeof a.x&&a.x.indexOf("px")>-1&&(y=parseFloat(a.x)),"x2"===r&&"string"==typeof a.x2&&a.x2.indexOf("px")>-1&&(x=parseFloat(a.x2)),void 0!==a.seriesIndex&&h.globals.barWidth&&!this.annoCtx.invertAxis&&(y=y-h.globals.barWidth/2*(h.globals.series.length-1)+h.globals.barWidth*a.seriesIndex),"x1"===r?y:x}},{key:"getStringX",value:function(r){var a=this.w,h=r;a.config.xaxis.convertedCatToNumeric&&a.globals.categoryLabels.length&&(r=a.globals.categoryLabels.indexOf(r)+1);var d=a.globals.labels.indexOf(r),f=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(d+1)+")");return f&&(h=parseFloat(f.getAttribute("x"))),h}}]),V}(),Fi=function(){function V(r){zt(this,V),this.w=r.w,this.annoCtx=r,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new ie(this.annoCtx)}return Dt(V,[{key:"addXaxisAnnotation",value:function(r,a,h){var d,f=this.w,g=this.helpers.getX1X2("x1",r),y=r.label.text,x=r.strokeDashArray;if(at.isNumber(g)){if(null==r.x2){var S=this.annoCtx.graphics.drawLine(g+r.offsetX,0+r.offsetY,g+r.offsetX,f.globals.gridHeight+r.offsetY,r.borderColor,x,r.borderWidth);a.appendChild(S.node),r.id&&S.node.classList.add(r.id)}else{if((d=this.helpers.getX1X2("x2",r))<g){var M=g;g=d,d=M}var C=this.annoCtx.graphics.drawRect(g+r.offsetX,0+r.offsetY,d-g,f.globals.gridHeight+r.offsetY,0,r.fillColor,r.opacity,1,r.borderColor,x);C.node.classList.add("apexcharts-annotation-rect"),C.attr("clip-path","url(#gridRectMask".concat(f.globals.cuid,")")),a.appendChild(C.node),r.id&&C.node.classList.add(r.id)}var P=this.annoCtx.graphics.getTextRects(y,parseFloat(r.label.style.fontSize)),O=this.annoCtx.graphics.drawText({x:g+r.label.offsetX,y:("top"===r.label.position?4:"center"===r.label.position?f.globals.gridHeight/2+("vertical"===r.label.orientation?P.width/2:0):f.globals.gridHeight)+r.label.offsetY-("vertical"===r.label.orientation?"top"===r.label.position?P.width/2-12:-P.width/2:0),text:y,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});O.attr({rel:h}),a.appendChild(O.node),this.annoCtx.helpers.setOrientations(r,h)}}},{key:"drawXAxisAnnotations",value:function(){var r=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return a.config.annotations.xaxis.map(function(d,f){r.addXaxisAnnotation(d,h.node,f)}),h}}]),V}(),le=function(){function V(r){zt(this,V),this.w=r.w,this.annoCtx=r,this.helpers=new ie(this.annoCtx)}return Dt(V,[{key:"addYaxisAnnotation",value:function(r,a,h){var d,f=this.w,g=r.strokeDashArray,y=this.helpers.getY1Y2("y1",r),x=r.label.text;if(null==r.y2){var S=this.annoCtx.graphics.drawLine(0+r.offsetX,y+r.offsetY,this._getYAxisAnnotationWidth(r),y+r.offsetY,r.borderColor,g,r.borderWidth);a.appendChild(S.node),r.id&&S.node.classList.add(r.id)}else{if((d=this.helpers.getY1Y2("y2",r))>y){var M=y;y=d,d=M}var C=this.annoCtx.graphics.drawRect(0+r.offsetX,d+r.offsetY,this._getYAxisAnnotationWidth(r),y-d,0,r.fillColor,r.opacity,1,r.borderColor,g);C.node.classList.add("apexcharts-annotation-rect"),C.attr("clip-path","url(#gridRectMask".concat(f.globals.cuid,")")),a.appendChild(C.node),r.id&&C.node.classList.add(r.id)}var F=this.annoCtx.graphics.drawText({x:("right"===r.label.position?f.globals.gridWidth:"center"===r.label.position?f.globals.gridWidth/2:0)+r.label.offsetX,y:(d??y)+r.label.offsetY-3,text:x,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});F.attr({rel:h}),a.appendChild(F.node)}},{key:"_getYAxisAnnotationWidth",value:function(r){var a=this.w;return(r.width.indexOf("%")>-1?a.globals.gridWidth*parseInt(r.width,10)/100:parseInt(r.width,10))+r.offsetX}},{key:"drawYAxisAnnotations",value:function(){var r=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return a.config.annotations.yaxis.map(function(d,f){r.addYaxisAnnotation(d,h.node,f)}),h}}]),V}(),Ge=function(){function V(r){zt(this,V),this.w=r.w,this.annoCtx=r,this.helpers=new ie(this.annoCtx)}return Dt(V,[{key:"addPointAnnotation",value:function(r,a,h){var d=this.helpers.getX1X2("x1",r),f=this.helpers.getY1Y2("y1",r);if(at.isNumber(d)){var g={pSize:r.marker.size,pointStrokeWidth:r.marker.strokeWidth,pointFillColor:r.marker.fillColor,pointStrokeColor:r.marker.strokeColor,shape:r.marker.shape,pRadius:r.marker.radius,class:"apexcharts-point-annotation-marker ".concat(r.marker.cssClass," ").concat(r.id?r.id:"")},y=this.annoCtx.graphics.drawMarker(d+r.marker.offsetX,f+r.marker.offsetY,g);a.appendChild(y.node);var x=r.label.text?r.label.text:"",S=this.annoCtx.graphics.drawText({x:d+r.label.offsetX,y:f+r.label.offsetY-r.marker.size-parseFloat(r.label.style.fontSize)/1.6,text:x,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});if(S.attr({rel:h}),a.appendChild(S.node),r.customSVG.SVG){var M=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+r.customSVG.cssClass});M.attr({transform:"translate(".concat(d+r.customSVG.offsetX,", ").concat(f+r.customSVG.offsetY,")")}),M.node.innerHTML=r.customSVG.SVG,a.appendChild(M.node)}if(r.image.path){var C=r.image.width?r.image.width:20,P=r.image.height?r.image.height:20;y=this.annoCtx.addImage({x:d+r.image.offsetX-C/2,y:f+r.image.offsetY-P/2,width:C,height:P,path:r.image.path,appendTo:".apexcharts-point-annotations"})}r.mouseEnter&&y.node.addEventListener("mouseenter",r.mouseEnter.bind(this,r)),r.mouseLeave&&y.node.addEventListener("mouseleave",r.mouseLeave.bind(this,r)),r.click&&y.node.addEventListener("click",r.click.bind(this,r))}}},{key:"drawPointAnnotations",value:function(){var r=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return a.config.annotations.points.map(function(d,f){r.addPointAnnotation(d,h.node,f)}),h}}]),V}(),Ro={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Un=function(){function V(){zt(this,V),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Dt(V,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ro],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(r){return new Date(r).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(r){return r}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(r){return r+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(r){return r.globals.seriesTotals.reduce(function(a,h){return a+h},0)/r.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(r){return r},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(r){return r}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(r){return r}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(r){return r.globals.seriesTotals.reduce(function(a,h){return a+h},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(r){return null!==r?r:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(r){return r?r+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),V}(),Yo=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.graphics=new Q(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new ie(this),this.xAxisAnnotations=new Fi(this),this.yAxisAnnotations=new le(this),this.pointsAnnotations=new Ge(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Dt(V,[{key:"drawAxesAnnotations",value:function(){var r=this.w;if(r.globals.axisCharts){for(var a=this.yAxisAnnotations.drawYAxisAnnotations(),h=this.xAxisAnnotations.drawXAxisAnnotations(),d=this.pointsAnnotations.drawPointAnnotations(),f=r.config.chart.animations.enabled,g=[a,h,d],y=[h.node,a.node,d.node],x=0;x<3;x++)r.globals.dom.elGraphical.add(g[x]),!f||r.globals.resized||r.globals.dataChanged||"scatter"!==r.config.chart.type&&"bubble"!==r.config.chart.type&&r.globals.dataPoints>1&&y[x].classList.add("apexcharts-element-hidden"),r.globals.delayedElements.push({el:y[x],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var r=this;this.w.config.annotations.images.map(function(a,h){r.addImage(a,h)})}},{key:"drawTextAnnos",value:function(){var r=this;this.w.config.annotations.texts.map(function(a,h){r.addText(a,h)})}},{key:"addXaxisAnnotation",value:function(r,a,h){this.xAxisAnnotations.addXaxisAnnotation(r,a,h)}},{key:"addYaxisAnnotation",value:function(r,a,h){this.yAxisAnnotations.addYaxisAnnotation(r,a,h)}},{key:"addPointAnnotation",value:function(r,a,h){this.pointsAnnotations.addPointAnnotation(r,a,h)}},{key:"addText",value:function(r,a){var f=r.text,P=r.backgroundColor,F=r.borderWidth,O=r.strokeDashArray,D=r.borderRadius,Y=r.borderColor,G=r.appendTo,U=void 0===G?".apexcharts-svg":G,b=r.paddingLeft,N=void 0===b?4:b,E=r.paddingRight,X=void 0===E?4:E,W=r.paddingBottom,Z=void 0===W?2:W,et=r.paddingTop,it=void 0===et?2:et,pt=this.w,wt=this.graphics.drawText({x:r.x,y:r.y,text:f,textAnchor:r.textAnchor||"start",fontSize:r.fontSize||"12px",fontWeight:r.fontWeight||"regular",fontFamily:r.fontFamily||pt.config.chart.fontFamily,foreColor:r.foreColor||pt.config.chart.foreColor,cssClass:r.cssClass}),xt=pt.globals.dom.baseEl.querySelector(U);xt&&xt.appendChild(wt.node);var Ft=wt.bbox();if(f){var Nt=this.graphics.drawRect(Ft.x-N,Ft.y-it,Ft.width+N+X,Ft.height+Z+it,D,P||"transparent",1,F,Y,O);xt.insertBefore(Nt.node,wt.node)}}},{key:"addImage",value:function(r,a){var h=this.w,f=r.x,g=void 0===f?0:f,y=r.y,x=void 0===y?0:y,S=r.width,M=void 0===S?20:S,C=r.height,P=void 0===C?20:C,F=r.appendTo,O=void 0===F?".apexcharts-svg":F,D=h.globals.dom.Paper.image(r.path);D.size(M,P).move(g,x);var Y=h.globals.dom.baseEl.querySelector(O);return Y&&Y.appendChild(D.node),D}},{key:"addXaxisAnnotationExternal",value:function(r,a,h){return this.addAnnotationExternal({params:r,pushToMemory:a,context:h,type:"xaxis",contextMethod:h.addXaxisAnnotation}),h}},{key:"addYaxisAnnotationExternal",value:function(r,a,h){return this.addAnnotationExternal({params:r,pushToMemory:a,context:h,type:"yaxis",contextMethod:h.addYaxisAnnotation}),h}},{key:"addPointAnnotationExternal",value:function(r,a,h){return void 0===this.invertAxis&&(this.invertAxis=h.w.globals.isBarHorizontal),this.addAnnotationExternal({params:r,pushToMemory:a,context:h,type:"point",contextMethod:h.addPointAnnotation}),h}},{key:"addAnnotationExternal",value:function(r){var a=r.params,h=r.pushToMemory,d=r.context,f=r.type,g=r.contextMethod,y=d,x=y.w,S=x.globals.dom.baseEl.querySelector(".apexcharts-".concat(f,"-annotations")),M=S.childNodes.length+1,C=new Un,P=Object.assign({},"xaxis"===f?C.xAxisAnnotation:"yaxis"===f?C.yAxisAnnotation:C.pointAnnotation),F=at.extend(P,a);switch(f){case"xaxis":this.addXaxisAnnotation(F,S,M);break;case"yaxis":this.addYaxisAnnotation(F,S,M);break;case"point":this.addPointAnnotation(F,S,M)}var O=x.globals.dom.baseEl.querySelector(".apexcharts-".concat(f,"-annotations .apexcharts-").concat(f,"-annotation-label[rel='").concat(M,"']")),D=this.helpers.addBackgroundToAnno(O,F);return D&&S.insertBefore(D.node,O),h&&x.globals.memory.methodsToExec.push({context:y,id:F.id?F.id:at.randomId(),method:g,label:"addAnnotation",params:a}),d}},{key:"clearAnnotations",value:function(r){var a=r.w,h=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");a.globals.memory.methodsToExec.map(function(d,f){"addText"!==d.label&&"addAnnotation"!==d.label||a.globals.memory.methodsToExec.splice(f,1)}),h=at.listToArray(h),Array.prototype.forEach.call(h,function(d){for(;d.firstChild;)d.removeChild(d.firstChild)})}},{key:"removeAnnotation",value:function(r,a){var h=r.w,d=h.globals.dom.baseEl.querySelectorAll(".".concat(a));d&&(h.globals.memory.methodsToExec.map(function(f,g){f.id===a&&h.globals.memory.methodsToExec.splice(g,1)}),Array.prototype.forEach.call(d,function(f){f.parentElement.removeChild(f)}))}}]),V}(),Xt=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Dt(V,[{key:"isValidDate",value:function(r){return"number"!=typeof r&&!isNaN(this.parseDate(r))}},{key:"getTimeStamp",value:function(r){return Date.parse(r)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(r).toISOString().substr(0,25)).getTime():new Date(r).getTime():r}},{key:"getDate",value:function(r){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(r).toUTCString()):new Date(r)}},{key:"parseDate",value:function(r){var a=Date.parse(r);if(!isNaN(a))return this.getTimeStamp(r);var h=Date.parse(r.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(h)}},{key:"parseDateWithTimezone",value:function(r){return Date.parse(r.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(r,a){var h=this.w.globals.locale,d=this.w.config.xaxis.labels.datetimeUTC,f=["\0"].concat(hn(h.months)),g=["\x01"].concat(hn(h.shortMonths)),y=["\x02"].concat(hn(h.days)),x=["\x03"].concat(hn(h.shortDays));function S(Z,et){var it=Z+"";for(et=et||2;it.length<et;)it="0"+it;return it}var M=d?r.getUTCFullYear():r.getFullYear();a=(a=(a=a.replace(/(^|[^\\])yyyy+/g,"$1"+M)).replace(/(^|[^\\])yy/g,"$1"+M.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+M);var C=(d?r.getUTCMonth():r.getMonth())+1;a=(a=(a=(a=a.replace(/(^|[^\\])MMMM+/g,"$1"+f[0])).replace(/(^|[^\\])MMM/g,"$1"+g[0])).replace(/(^|[^\\])MM/g,"$1"+S(C))).replace(/(^|[^\\])M/g,"$1"+C);var P=d?r.getUTCDate():r.getDate();a=(a=(a=(a=a.replace(/(^|[^\\])dddd+/g,"$1"+y[0])).replace(/(^|[^\\])ddd/g,"$1"+x[0])).replace(/(^|[^\\])dd/g,"$1"+S(P))).replace(/(^|[^\\])d/g,"$1"+P);var F=d?r.getUTCHours():r.getHours(),O=F>12?F-12:0===F?12:F;a=(a=(a=(a=a.replace(/(^|[^\\])HH+/g,"$1"+S(F))).replace(/(^|[^\\])H/g,"$1"+F)).replace(/(^|[^\\])hh+/g,"$1"+S(O))).replace(/(^|[^\\])h/g,"$1"+O);var D=d?r.getUTCMinutes():r.getMinutes();a=(a=a.replace(/(^|[^\\])mm+/g,"$1"+S(D))).replace(/(^|[^\\])m/g,"$1"+D);var Y=d?r.getUTCSeconds():r.getSeconds();a=(a=a.replace(/(^|[^\\])ss+/g,"$1"+S(Y))).replace(/(^|[^\\])s/g,"$1"+Y);var G=d?r.getUTCMilliseconds():r.getMilliseconds();a=a.replace(/(^|[^\\])fff+/g,"$1"+S(G,3)),G=Math.round(G/10),a=a.replace(/(^|[^\\])ff/g,"$1"+S(G)),G=Math.round(G/10);var U=F<12?"AM":"PM";a=(a=(a=a.replace(/(^|[^\\])f/g,"$1"+G)).replace(/(^|[^\\])TT+/g,"$1"+U)).replace(/(^|[^\\])T/g,"$1"+U.charAt(0));var b=U.toLowerCase();a=(a=a.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var N=-r.getTimezoneOffset(),E=d||!N?"Z":N>0?"+":"-";if(!d){var X=(N=Math.abs(N))%60;E+=S(Math.floor(N/60))+":"+S(X)}a=a.replace(/(^|[^\\])K/g,"$1"+E);var W=(d?r.getUTCDay():r.getDay())+1;return(a=(a=(a=(a=a.replace(new RegExp(y[0],"g"),y[W])).replace(new RegExp(x[0],"g"),x[W])).replace(new RegExp(f[0],"g"),f[C])).replace(new RegExp(g[0],"g"),g[C])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(r,a,h){var d=this.w;void 0!==d.config.xaxis.min&&(r=d.config.xaxis.min),void 0!==d.config.xaxis.max&&(a=d.config.xaxis.max);var f=this.getDate(r),g=this.getDate(a),y=this.formatDate(f,"yyyy MM dd HH mm ss fff").split(" "),x=this.formatDate(g,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(y[6],10),maxMillisecond:parseInt(x[6],10),minSecond:parseInt(y[5],10),maxSecond:parseInt(x[5],10),minMinute:parseInt(y[4],10),maxMinute:parseInt(x[4],10),minHour:parseInt(y[3],10),maxHour:parseInt(x[3],10),minDate:parseInt(y[2],10),maxDate:parseInt(x[2],10),minMonth:parseInt(y[1],10)-1,maxMonth:parseInt(x[1],10)-1,minYear:parseInt(y[0],10),maxYear:parseInt(x[0],10)}}},{key:"isLeapYear",value:function(r){return r%4==0&&r%100!=0||r%400==0}},{key:"calculcateLastDaysOfMonth",value:function(r,a,h){return this.determineDaysOfMonths(r,a)-h}},{key:"determineDaysOfYear",value:function(r){var a=365;return this.isLeapYear(r)&&(a=366),a}},{key:"determineRemainingDaysOfYear",value:function(r,a,h){var d=this.daysCntOfYear[a]+h;return a>1&&this.isLeapYear()&&d++,d}},{key:"determineDaysOfMonths",value:function(r,a){var h=30;switch(r=at.monthMod(r),!0){case this.months30.indexOf(r)>-1:2===r&&(h=this.isLeapYear(a)?29:28);break;case this.months31.indexOf(r)>-1:default:h=31}return h}}]),V}(),Zt=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.tooltipKeyFormat="dd MMM"}return Dt(V,[{key:"xLabelFormat",value:function(r,a,h,d){var f=this.w;if("datetime"===f.config.xaxis.type&&void 0===f.config.xaxis.labels.formatter&&void 0===f.config.tooltip.x.formatter){var g=new Xt(this.ctx);return g.formatDate(g.getDate(a),f.config.tooltip.x.format)}return r(a,h,d)}},{key:"defaultGeneralFormatter",value:function(r){return Array.isArray(r)?r.map(function(a){return a}):r}},{key:"defaultYFormatter",value:function(r,a,h){var d=this.w;return at.isNumber(r)&&(r=r.toFixed(0!==d.globals.yValueDecimal?void 0!==a.decimalsInFloat?a.decimalsInFloat:d.globals.yValueDecimal:d.globals.maxYArr[h]-d.globals.minYArr[h]<5?1:0)),r}},{key:"setLabelFormatters",value:function(){var r=this,a=this.w;return a.globals.xaxisTooltipFormatter=function(h){return r.defaultGeneralFormatter(h)},a.globals.ttKeyFormatter=function(h){return r.defaultGeneralFormatter(h)},a.globals.ttZFormatter=function(h){return h},a.globals.legendFormatter=function(h){return r.defaultGeneralFormatter(h)},a.globals.xLabelFormatter=void 0!==a.config.xaxis.labels.formatter?a.config.xaxis.labels.formatter:function(h){if(at.isNumber(h)){if(!a.config.xaxis.convertedCatToNumeric&&"numeric"===a.config.xaxis.type){if(at.isNumber(a.config.xaxis.decimalsInFloat))return h.toFixed(a.config.xaxis.decimalsInFloat);var d=a.globals.maxX-a.globals.minX;return h.toFixed(d>0&&d<100?1:0)}return h.toFixed(a.globals.isBarHorizontal&&a.globals.maxY-a.globals.minYArr<4?1:0)}return h},a.globals.ttKeyFormatter="function"==typeof a.config.tooltip.x.formatter?a.config.tooltip.x.formatter:a.globals.xLabelFormatter,"function"==typeof a.config.xaxis.tooltip.formatter&&(a.globals.xaxisTooltipFormatter=a.config.xaxis.tooltip.formatter),(Array.isArray(a.config.tooltip.y)||void 0!==a.config.tooltip.y.formatter)&&(a.globals.ttVal=a.config.tooltip.y),void 0!==a.config.tooltip.z.formatter&&(a.globals.ttZFormatter=a.config.tooltip.z.formatter),void 0!==a.config.legend.formatter&&(a.globals.legendFormatter=a.config.legend.formatter),a.config.yaxis.forEach(function(h,d){a.globals.yLabelFormatters[d]=void 0!==h.labels.formatter?h.labels.formatter:function(f){return a.globals.xyCharts?Array.isArray(f)?f.map(function(g){return r.defaultYFormatter(g,h,d)}):r.defaultYFormatter(f,h,d):f}}),a.globals}},{key:"heatmapLabelFormatters",value:function(){var r=this.w;if("heatmap"===r.config.chart.type){r.globals.yAxisScale[0].result=r.globals.seriesNames.slice();var a=r.globals.seriesNames.reduce(function(h,d){return h.length>d.length?h:d},0);r.globals.yAxisScale[0].niceMax=a,r.globals.yAxisScale[0].niceMin=a}}}]),V}(),ws=function(V){var r,a=V.isTimeline,h=V.ctx,d=V.seriesIndex,f=V.dataPointIndex,g=V.y1,y=V.y2,x=V.w,S=x.globals.seriesRangeStart[d][f],M=x.globals.seriesRangeEnd[d][f],C=x.globals.labels[f],P=x.config.series[d].name?x.config.series[d].name:"",F=x.globals.ttKeyFormatter,O=x.config.tooltip.y.title.formatter,D={w:x,seriesIndex:d,dataPointIndex:f,start:S,end:M};"function"==typeof O&&(P=O(P,D)),null!==(r=x.config.series[d].data[f])&&void 0!==r&&r.x&&(C=x.config.series[d].data[f].x),a||"datetime"===x.config.xaxis.type&&(C=new Zt(h).xLabelFormat(x.globals.ttKeyFormatter,C,C,{i:void 0,dateFormatter:new Xt(h).formatDate,w:x})),"function"==typeof F&&(C=F(C,D)),Number.isFinite(g)&&Number.isFinite(y)&&(S=g,M=y);var Y="",G="",U=x.globals.colors[d];if(void 0===x.config.tooltip.x.formatter)if("datetime"===x.config.xaxis.type){var b=new Xt(h);Y=b.formatDate(b.getDate(S),x.config.tooltip.x.format),G=b.formatDate(b.getDate(M),x.config.tooltip.x.format)}else Y=S,G=M;else Y=x.config.tooltip.x.formatter(S),G=x.config.tooltip.x.formatter(M);return{start:S,end:M,startVal:Y,endVal:G,ylabel:C,color:U,seriesName:P}},Vi=function(V){var r=V.color,a=V.seriesName,h=V.ylabel,d=V.start,f=V.end,g=V.seriesIndex,y=V.dataPointIndex,x=V.ctx.tooltip.tooltipLabels.getFormatters(g);d=x.yLbFormatter(d),f=x.yLbFormatter(f);var S=x.yLbFormatter(V.w.globals.series[g][y]),M='<span class="value start-value">\n  '.concat(d,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(f,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+r+'">'+(a||"")+'</span></div><div> <span class="category">'+h+": </span> "+(V.w.globals.comboCharts?"rangeArea"===V.w.config.series[g].type||"rangeBar"===V.w.config.series[g].type?M:"<span>".concat(S,"</span>"):M)+" </div></div>"},fr=function(){function V(r){zt(this,V),this.opts=r}return Dt(V,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(r){return this.hideYAxis(),at.extend(r,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Et(Et({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var r=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){return r._getBoxTooltip(a.w,a.seriesIndex,a.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var r=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){return r._getBoxTooltip(a.w,a.seriesIndex,a.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(r,a){var h=a.seriesIndex,d=a.dataPointIndex,f=a.w,g=function(){return f.globals.seriesRangeEnd[h][d]-f.globals.seriesRangeStart[h][d]};return f.globals.comboCharts?"rangeBar"===f.config.series[h].type||"rangeArea"===f.config.series[h].type?g():r:g()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(r){return r.w.config.plotOptions&&r.w.config.plotOptions.bar&&r.w.config.plotOptions.bar.horizontal?(d=(h=ws(Et(Et({},a=r),{},{isTimeline:!0}))).color,f=h.seriesName,g=h.ylabel,y=h.startVal,x=h.endVal,Vi(Et(Et({},a),{},{color:d,seriesName:f,ylabel:g,start:y,end:x}))):function(a){var h=ws(a),d=h.color,f=h.seriesName,g=h.ylabel,y=h.start,x=h.end;return Vi(Et(Et({},a),{},{color:d,seriesName:f,ylabel:g,start:y,end:x}))}(r);var a,h,d,f,g,y,x}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(r){var a,h;return null!==(a=r.plotOptions.bar)&&void 0!==a&&a.barHeight||(r.plotOptions.bar.barHeight=2),null!==(h=r.plotOptions.bar)&&void 0!==h&&h.columnWidth||(r.plotOptions.bar.columnWidth=2),r}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(r){return d=(h=ws(a=r)).color,f=h.seriesName,g=h.ylabel,y=h.start,x=h.end,Vi(Et(Et({},a),{},{color:d,seriesName:f,ylabel:g,start:y,end:x}));var a,h,d,f,g,y,x}}}}},{key:"brush",value:function(r){return at.extend(r,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(r){r.dataLabels=r.dataLabels||{},r.dataLabels.formatter=r.dataLabels.formatter||void 0;var a=r.dataLabels.formatter;return r.yaxis.forEach(function(h,d){r.yaxis[d].min=0,r.yaxis[d].max=100}),"bar"===r.chart.type&&(r.dataLabels.formatter=a||function(h){return"number"==typeof h&&h?h.toFixed(0)+"%":h}),r}},{key:"stackedBars",value:function(){var r=this.bar();return Et(Et({},r),{},{plotOptions:Et(Et({},r.plotOptions),{},{bar:Et(Et({},r.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(r){return r.xaxis.convertedCatToNumeric=!0,r}},{key:"convertCatToNumericXaxis",value:function(r,a,h){r.xaxis.type="numeric",r.xaxis.labels=r.xaxis.labels||{},r.xaxis.labels.formatter=r.xaxis.labels.formatter||function(g){return at.isNumber(g)?Math.floor(g):g};var d=r.xaxis.labels.formatter,f=r.xaxis.categories&&r.xaxis.categories.length?r.xaxis.categories:r.labels;return h&&h.length&&(f=h.map(function(g){return Array.isArray(g)?g:String(g)})),f&&f.length&&(r.xaxis.labels.formatter=function(g){return at.isNumber(g)?d(f[Math.floor(g)-1]):d(g)}),r.xaxis.categories=[],r.labels=[],r.xaxis.tickAmount=r.xaxis.tickAmount||"dataPoints",r}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(r){return r},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(r,a,h,d,f){var g=r.globals.seriesCandleO[a][h],y=r.globals.seriesCandleH[a][h],x=r.globals.seriesCandleM[a][h],S=r.globals.seriesCandleL[a][h],M=r.globals.seriesCandleC[a][h];return r.config.series[a].type&&r.config.series[a].type!==f?'<div class="apexcharts-custom-tooltip">\n          '.concat(r.config.series[a].name?r.config.series[a].name:"series-"+(a+1),": <strong>").concat(r.globals.series[a][h],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(r.config.chart.type,'">')+"<div>".concat(d[0],': <span class="value">')+g+"</span></div>"+"<div>".concat(d[1],': <span class="value">')+y+"</span></div>"+(x?"<div>".concat(d[2],': <span class="value">')+x+"</span></div>":"")+"<div>".concat(d[3],': <span class="value">')+S+"</span></div>"+"<div>".concat(d[4],': <span class="value">')+M+"</span></div></div>"}}]),V}(),Gi=function(){function V(r){zt(this,V),this.opts=r}return Dt(V,[{key:"init",value:function(r){var a=r.responsiveOverride,h=this.opts,d=new Un,f=new fr(h);this.chartType=h.chart.type,h=this.extendYAxis(h),h=this.extendAnnotations(h);var g=d.init(),y={};if(h&&"object"===be(h)){var x,S,M,C,P,F,O,D,Y={};Y=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(h.chart.type)?f[h.chart.type]():f.line(),null!==(x=h.plotOptions)&&void 0!==x&&null!==(S=x.bar)&&void 0!==S&&S.isFunnel&&(Y=f.funnel()),h.chart.stacked&&"bar"===h.chart.type&&(Y=f.stackedBars()),null!==(M=h.chart.brush)&&void 0!==M&&M.enabled&&(Y=f.brush(Y)),h.chart.stacked&&"100%"===h.chart.stackType&&(h=f.stacked100(h)),null!==(C=h.plotOptions)&&void 0!==C&&null!==(P=C.bar)&&void 0!==P&&P.isDumbbell&&(h=f.dumbbell(h)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(h),h.xaxis=h.xaxis||window.Apex.xaxis||{},a||(h.xaxis.convertedCatToNumeric=!1),(null!==(F=(h=this.checkForCatToNumericXAxis(this.chartType,Y,h)).chart.sparkline)&&void 0!==F&&F.enabled||null!==(O=window.Apex.chart)&&void 0!==O&&null!==(D=O.sparkline)&&void 0!==D&&D.enabled)&&(Y=f.sparkline(Y)),y=at.extend(g,Y)}var G=at.extend(y,window.Apex);return g=at.extend(G,h),this.handleUserInputErrors(g)}},{key:"checkForCatToNumericXAxis",value:function(r,a,h){var d,f,g=new fr(h);return("bar"===r||"boxPlot"===r)&&(null===(d=h.plotOptions)||void 0===d||null===(f=d.bar)||void 0===f?void 0:f.horizontal)||"pie"===r||"polarArea"===r||"donut"===r||"radar"===r||"radialBar"===r||"heatmap"===r||!("datetime"!==h.xaxis.type&&"numeric"!==h.xaxis.type)||"between"===(h.xaxis.tickPlacement?h.xaxis.tickPlacement:a.xaxis&&a.xaxis.tickPlacement)||(h=g.convertCatToNumeric(h)),h}},{key:"extendYAxis",value:function(r,a){var h=new Un;(void 0===r.yaxis||!r.yaxis||Array.isArray(r.yaxis)&&0===r.yaxis.length)&&(r.yaxis={}),r.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(r.yaxis=at.extend(r.yaxis,window.Apex.yaxis)),r.yaxis=r.yaxis.constructor!==Array?[at.extend(h.yAxis,r.yaxis)]:at.extendArray(r.yaxis,h.yAxis);var d=!1;r.yaxis.forEach(function(g){g.logarithmic&&(d=!0)});var f=r.series;return a&&!f&&(f=a.config.series),d&&f.length!==r.yaxis.length&&f.length&&(r.yaxis=f.map(function(g,y){if(g.name||(f[y].name="series-".concat(y+1)),r.yaxis[y])return r.yaxis[y].seriesName=f[y].name,r.yaxis[y];var x=at.extend(h.yAxis,r.yaxis[0]);return x.show=!1,x})),d&&f.length>1&&f.length!==r.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),r}},{key:"extendAnnotations",value:function(r){return void 0===r.annotations&&(r.annotations={},r.annotations.yaxis=[],r.annotations.xaxis=[],r.annotations.points=[]),r=this.extendYAxisAnnotations(r),r=this.extendXAxisAnnotations(r),this.extendPointAnnotations(r)}},{key:"extendYAxisAnnotations",value:function(r){var a=new Un;return r.annotations.yaxis=at.extendArray(void 0!==r.annotations.yaxis?r.annotations.yaxis:[],a.yAxisAnnotation),r}},{key:"extendXAxisAnnotations",value:function(r){var a=new Un;return r.annotations.xaxis=at.extendArray(void 0!==r.annotations.xaxis?r.annotations.xaxis:[],a.xAxisAnnotation),r}},{key:"extendPointAnnotations",value:function(r){var a=new Un;return r.annotations.points=at.extendArray(void 0!==r.annotations.points?r.annotations.points:[],a.pointAnnotation),r}},{key:"checkForDarkTheme",value:function(r){r.theme&&"dark"===r.theme.mode&&(r.tooltip||(r.tooltip={}),"light"!==r.tooltip.theme&&(r.tooltip.theme="dark"),r.chart.foreColor||(r.chart.foreColor="#f6f7f8"),r.chart.background||(r.chart.background="#424242"),r.theme.palette||(r.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(r){var a=r;if(a.tooltip.shared&&a.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===a.chart.type&&a.plotOptions.bar.horizontal){if(a.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");a.yaxis[0].reversed&&(a.yaxis[0].opposite=!0),a.xaxis.tooltip.enabled=!1,a.yaxis[0].tooltip.enabled=!1,a.chart.zoom.enabled=!1}return"bar"!==a.chart.type&&"rangeBar"!==a.chart.type||a.tooltip.shared&&"barWidth"===a.xaxis.crosshairs.width&&a.series.length>1&&(a.xaxis.crosshairs.width="tickWidth"),"candlestick"!==a.chart.type&&"boxPlot"!==a.chart.type||a.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(a.chart.type," chart is not supported.")),a.yaxis[0].reversed=!1),a}}]),V}(),Jt=function(){function V(){zt(this,V)}return Dt(V,[{key:"initGlobalVars",value:function(r){r.series=[],r.seriesCandleO=[],r.seriesCandleH=[],r.seriesCandleM=[],r.seriesCandleL=[],r.seriesCandleC=[],r.seriesRangeStart=[],r.seriesRangeEnd=[],r.seriesRange=[],r.seriesPercent=[],r.seriesGoals=[],r.seriesX=[],r.seriesZ=[],r.seriesNames=[],r.seriesTotals=[],r.seriesLog=[],r.seriesColors=[],r.stackedSeriesTotals=[],r.seriesXvalues=[],r.seriesYvalues=[],r.labels=[],r.hasXaxisGroups=!1,r.groups=[],r.hasSeriesGroups=!1,r.seriesGroups=[],r.categoryLabels=[],r.timescaleLabels=[],r.noLabelsProvided=!1,r.resizeTimer=null,r.selectionResizeTimer=null,r.delayedElements=[],r.pointsArray=[],r.dataLabelsRects=[],r.isXNumeric=!1,r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1,r.isDataXYZ=!1,r.isMultiLineX=!1,r.isMultipleYAxis=!1,r.maxY=-Number.MAX_VALUE,r.minY=Number.MIN_VALUE,r.minYArr=[],r.maxYArr=[],r.maxX=-Number.MAX_VALUE,r.minX=Number.MAX_VALUE,r.initialMaxX=-Number.MAX_VALUE,r.initialMinX=Number.MAX_VALUE,r.maxDate=0,r.minDate=Number.MAX_VALUE,r.minZ=Number.MAX_VALUE,r.maxZ=-Number.MAX_VALUE,r.minXDiff=Number.MAX_VALUE,r.yAxisScale=[],r.xAxisScale=null,r.xAxisTicksPositions=[],r.yLabelsCoords=[],r.yTitleCoords=[],r.barPadForNumericAxis=0,r.padHorizontal=0,r.xRange=0,r.yRange=[],r.zRange=0,r.dataPoints=0,r.xTickAmount=0,r.multiAxisTickAmount=0}},{key:"globalVars",value:function(r){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:r.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===r.chart.toolbar.autoSelected&&r.chart.toolbar.tools.zoom&&r.chart.zoom.enabled,panEnabled:"pan"===r.chart.toolbar.autoSelected&&r.chart.toolbar.tools.pan,selectionEnabled:"selection"===r.chart.toolbar.autoSelected&&r.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(r){var a=this.globalVars(r);return this.initGlobalVars(a),a.initialConfig=at.extend({},r),a.initialSeries=at.clone(r.series),a.lastXAxis=at.clone(a.initialConfig.xaxis),a.lastYAxis=at.clone(a.initialConfig.yaxis),a}}]),V}(),Od=function(){function V(r){zt(this,V),this.opts=r}return Dt(V,[{key:"init",value:function(){var r=new Gi(this.opts).init({responsiveOverride:!1});return{config:r,globals:(new Jt).init(r)}}}]),V}(),wi=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.opts=null,this.seriesIndex=0}return Dt(V,[{key:"clippedImgArea",value:function(r){var a=this.w,h=a.config,d=parseInt(a.globals.gridWidth,10),f=parseInt(a.globals.gridHeight,10),g=d>f?d:f,y=r.image,x=0,S=0;void 0===r.width&&void 0===r.height?void 0!==h.fill.image.width&&void 0!==h.fill.image.height?(x=h.fill.image.width+1,S=h.fill.image.height):(x=g+1,S=g):(x=r.width,S=r.height);var M=document.createElementNS(a.globals.SVGNS,"pattern");Q.setAttrs(M,{id:r.patternID,patternUnits:r.patternUnits?r.patternUnits:"userSpaceOnUse",width:x+"px",height:S+"px"});var C=document.createElementNS(a.globals.SVGNS,"image");M.appendChild(C),C.setAttributeNS(window.SVG.xlink,"href",y),Q.setAttrs(C,{x:0,y:0,preserveAspectRatio:"none",width:x+"px",height:S+"px"}),C.style.opacity=r.opacity,a.globals.dom.elDefs.node.appendChild(M)}},{key:"getSeriesIndex",value:function(r){var a=this.w,h=a.config.chart.type;return this.seriesIndex=("bar"===h||"rangeBar"===h)&&a.config.plotOptions.bar.distributed||"heatmap"===h||"treemap"===h?r.seriesNumber:r.seriesNumber%a.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(r){var a=this.w;this.opts=r;var h,d,f,g=this.w.config;this.seriesIndex=this.getSeriesIndex(r);var y=this.getFillColors()[this.seriesIndex];void 0!==a.globals.seriesColors[this.seriesIndex]&&(y=a.globals.seriesColors[this.seriesIndex]),"function"==typeof y&&(y=y({seriesIndex:this.seriesIndex,dataPointIndex:r.dataPointIndex,value:r.value,w:a}));var x=r.fillType?r.fillType:this.getFillType(this.seriesIndex),S=Array.isArray(g.fill.opacity)?g.fill.opacity[this.seriesIndex]:g.fill.opacity;r.color&&(y=r.color),y||(y="#fff",console.warn("undefined color - ApexCharts"));var M=y;if(-1===y.indexOf("rgb")?y.length<9&&(M=at.hexToRgba(y,S)):y.indexOf("rgba")>-1&&(S=at.getOpacityFromRGBA(y)),r.opacity&&(S=r.opacity),"pattern"===x&&(d=this.handlePatternFill({fillConfig:r.fillConfig,patternFill:d,fillColor:y,fillOpacity:S,defaultColor:M})),"gradient"===x&&(f=this.handleGradientFill({fillConfig:r.fillConfig,fillColor:y,fillOpacity:S,i:this.seriesIndex})),"image"===x){var C=g.fill.image.src,P=r.patternID?r.patternID:"";this.clippedImgArea({opacity:S,image:Array.isArray(C)?r.seriesNumber<C.length?C[r.seriesNumber]:C[0]:C,width:r.width?r.width:void 0,height:r.height?r.height:void 0,patternUnits:r.patternUnits,patternID:"pattern".concat(a.globals.cuid).concat(r.seriesNumber+1).concat(P)}),h="url(#pattern".concat(a.globals.cuid).concat(r.seriesNumber+1).concat(P,")")}else h="gradient"===x?f:"pattern"===x?d:M;return r.solid&&(h=M),h}},{key:"getFillType",value:function(r){var a=this.w;return Array.isArray(a.config.fill.type)?a.config.fill.type[r]:a.config.fill.type}},{key:"getFillColors",value:function(){var r=this.w,a=r.config,h=this.opts,d=[];return r.globals.comboCharts?"line"===r.config.series[this.seriesIndex].type?Array.isArray(r.globals.stroke.colors)?d=r.globals.stroke.colors:d.push(r.globals.stroke.colors):Array.isArray(r.globals.fill.colors)?d=r.globals.fill.colors:d.push(r.globals.fill.colors):"line"===a.chart.type?Array.isArray(r.globals.stroke.colors)?d=r.globals.stroke.colors:d.push(r.globals.stroke.colors):Array.isArray(r.globals.fill.colors)?d=r.globals.fill.colors:d.push(r.globals.fill.colors),void 0!==h.fillColors&&(d=[],Array.isArray(h.fillColors)?d=h.fillColors.slice():d.push(h.fillColors)),d}},{key:"handlePatternFill",value:function(r){var a=r.fillConfig,d=r.fillColor,f=r.fillOpacity,g=r.defaultColor,y=this.w.config.fill;a&&(y=a);var x=this.opts,S=new Q(this.ctx),M=Array.isArray(y.pattern.strokeWidth)?y.pattern.strokeWidth[this.seriesIndex]:y.pattern.strokeWidth,C=d;return Array.isArray(y.pattern.style)?void 0!==y.pattern.style[x.seriesNumber]?S.drawPattern(y.pattern.style[x.seriesNumber],y.pattern.width,y.pattern.height,C,M,f):g:S.drawPattern(y.pattern.style,y.pattern.width,y.pattern.height,C,M,f)}},{key:"handleGradientFill",value:function(r){var a=r.fillColor,h=r.fillOpacity,d=r.fillConfig,f=r.i,g=this.w.config.fill;d&&(g=Et(Et({},g),d));var y,x=this.opts,S=new Q(this.ctx),M=new at,C=g.gradient.type,P=a,F=void 0===g.gradient.opacityFrom?h:Array.isArray(g.gradient.opacityFrom)?g.gradient.opacityFrom[f]:g.gradient.opacityFrom;P.indexOf("rgba")>-1&&(F=at.getOpacityFromRGBA(P));var O=void 0===g.gradient.opacityTo?h:Array.isArray(g.gradient.opacityTo)?g.gradient.opacityTo[f]:g.gradient.opacityTo;if(void 0===g.gradient.gradientToColors||0===g.gradient.gradientToColors.length)y=M.shadeColor("dark"===g.gradient.shade?-1*parseFloat(g.gradient.shadeIntensity):parseFloat(g.gradient.shadeIntensity),a.indexOf("rgb")>-1?at.rgb2hex(a):a);else if(g.gradient.gradientToColors[x.seriesNumber]){var D=g.gradient.gradientToColors[x.seriesNumber];y=D,D.indexOf("rgba")>-1&&(O=at.getOpacityFromRGBA(D))}else y=a;if(g.gradient.gradientFrom&&(P=g.gradient.gradientFrom),g.gradient.gradientTo&&(y=g.gradient.gradientTo),g.gradient.inverseColors){var Y=P;P=y,y=Y}return P.indexOf("rgb")>-1&&(P=at.rgb2hex(P)),y.indexOf("rgb")>-1&&(y=at.rgb2hex(y)),S.drawGradient(C,P,y,F,O,x.size,g.gradient.stops,g.gradient.colorStops,f)}}]),V}(),Xo=function(){function V(r,a){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"setGlobalMarkerSize",value:function(){var r=this.w;if(r.globals.markers.size=Array.isArray(r.config.markers.size)?r.config.markers.size:[r.config.markers.size],r.globals.markers.size.length>0){if(r.globals.markers.size.length<r.globals.series.length+1)for(var a=0;a<=r.globals.series.length;a++)void 0===r.globals.markers.size[a]&&r.globals.markers.size.push(r.globals.markers.size[0])}else r.globals.markers.size=r.config.series.map(function(h){return r.config.markers.size})}},{key:"plotChartMarkers",value:function(r,a,h,d){var f,g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],y=this.w,x=a,S=r,M=null,C=new Q(this.ctx),P=y.config.markers.discrete&&y.config.markers.discrete.length;if((y.globals.markers.size[a]>0||g||P)&&(M=C.group({class:g||P?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(y.globals.cuid,")")),Array.isArray(S.x))for(var F=0;F<S.x.length;F++){var O=h;1===h&&0===F&&(O=0),1===h&&1===F&&(O=1);var D="apexcharts-marker";if("line"!==y.config.chart.type&&"area"!==y.config.chart.type||y.globals.comboCharts||y.config.tooltip.intersect||(D+=" no-pointer-events"),(Array.isArray(y.config.markers.size)?y.globals.markers.size[a]>0:y.config.markers.size>0)||g||P){at.isNumber(S.y[F])?D+=" w".concat(at.randomId()):D="apexcharts-nullpoint";var Y=this.getMarkerConfig({cssClass:D,seriesIndex:a,dataPointIndex:O});y.config.series[x].data[O]&&(y.config.series[x].data[O].fillColor&&(Y.pointFillColor=y.config.series[x].data[O].fillColor),y.config.series[x].data[O].strokeColor&&(Y.pointStrokeColor=y.config.series[x].data[O].strokeColor)),d&&(Y.pSize=d),(S.x[F]<0||S.x[F]>y.globals.gridWidth||S.y[F]<-y.globals.markers.largestSize||S.y[F]>y.globals.gridHeight+y.globals.markers.largestSize)&&(Y.pSize=0),(f=C.drawMarker(S.x[F],S.y[F],Y)).attr("rel",O),f.attr("j",O),f.attr("index",a),f.node.setAttribute("default-marker-size",Y.pSize),new Ve(this.ctx).setSelectionFilter(f,a,O),this.addEvents(f),M&&M.add(f)}else void 0===y.globals.pointsArray[a]&&(y.globals.pointsArray[a]=[]),y.globals.pointsArray[a].push([S.x[F],S.y[F]])}return M}},{key:"getMarkerConfig",value:function(r){var a=r.cssClass,h=r.seriesIndex,d=r.dataPointIndex,f=void 0===d?null:d,g=r.finishRadius,y=void 0===g?null:g,x=this.w,S=this.getMarkerStyle(h),M=x.globals.markers.size[h],C=x.config.markers;return null!==f&&C.discrete.length&&C.discrete.map(function(P){P.seriesIndex===h&&P.dataPointIndex===f&&(S.pointStrokeColor=P.strokeColor,S.pointFillColor=P.fillColor,M=P.size,S.pointShape=P.shape)}),{pSize:null===y?M:y,pRadius:C.radius,width:Array.isArray(C.width)?C.width[h]:C.width,height:Array.isArray(C.height)?C.height[h]:C.height,pointStrokeWidth:Array.isArray(C.strokeWidth)?C.strokeWidth[h]:C.strokeWidth,pointStrokeColor:S.pointStrokeColor,pointFillColor:S.pointFillColor,shape:S.pointShape||(Array.isArray(C.shape)?C.shape[h]:C.shape),class:a,pointStrokeOpacity:Array.isArray(C.strokeOpacity)?C.strokeOpacity[h]:C.strokeOpacity,pointStrokeDashArray:Array.isArray(C.strokeDashArray)?C.strokeDashArray[h]:C.strokeDashArray,pointFillOpacity:Array.isArray(C.fillOpacity)?C.fillOpacity[h]:C.fillOpacity,seriesIndex:h}}},{key:"addEvents",value:function(r){var a=this.w,h=new Q(this.ctx);r.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this.ctx,r)),r.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this.ctx,r)),r.node.addEventListener("mousedown",h.pathMouseDown.bind(this.ctx,r)),r.node.addEventListener("click",a.config.markers.onClick),r.node.addEventListener("dblclick",a.config.markers.onDblClick),r.node.addEventListener("touchstart",h.pathMouseDown.bind(this.ctx,r),{passive:!0})}},{key:"getMarkerStyle",value:function(r){var a=this.w,h=a.globals.markers.colors,d=a.config.markers.strokeColor||a.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(d)?d[r]:d,pointFillColor:Array.isArray(h)?h[r]:h}}}]),V}(),ut=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Dt(V,[{key:"draw",value:function(r,a,h){var d=this.w,f=new Q(this.ctx),g=h.realIndex,y=h.pointsPos,x=h.zRatio,S=h.elParent,M=f.group({class:"apexcharts-series-markers apexcharts-series-".concat(d.config.chart.type)});if(M.attr("clip-path","url(#gridRectMarkerMask".concat(d.globals.cuid,")")),Array.isArray(y.x))for(var C=0;C<y.x.length;C++){var P=a+1,F=!0;0===a&&0===C&&(P=0),0===a&&1===C&&(P=1);var O=0,D=d.globals.markers.size[g];if(x!==1/0){var Y=d.config.plotOptions.bubble;D=d.globals.seriesZ[g][P],Y.zScaling&&(D/=x),Y.minBubbleRadius&&D<Y.minBubbleRadius&&(D=Y.minBubbleRadius),Y.maxBubbleRadius&&D>Y.maxBubbleRadius&&(D=Y.maxBubbleRadius)}d.config.chart.animations.enabled||(O=D);var U=y.y[C];if(O=O||0,null!==U&&void 0!==d.globals.series[g][P]||(F=!1),F){var b=this.drawPoint(y.x[C],U,O,D,g,P,a);M.add(b)}S.add(M)}}},{key:"drawPoint",value:function(r,a,h,d,f,g,y){var x=this.w,S=f,M=new On(this.ctx),C=new Ve(this.ctx),P=new wi(this.ctx),F=new Xo(this.ctx),O=new Q(this.ctx),D=F.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:S,dataPointIndex:g,finishRadius:"bubble"===x.config.chart.type||x.globals.comboCharts&&x.config.series[f]&&"bubble"===x.config.series[f].type?d:null});d=D.pSize;var Y,G=P.fillPath({seriesNumber:f,dataPointIndex:g,color:D.pointFillColor,patternUnits:"objectBoundingBox",value:x.globals.series[f][y]});if("circle"===D.shape?Y=O.drawCircle(h):"square"!==D.shape&&"rect"!==D.shape||(Y=O.drawRect(0,0,D.width-D.pointStrokeWidth/2,D.height-D.pointStrokeWidth/2,D.pRadius)),x.config.series[S].data[g]&&x.config.series[S].data[g].fillColor&&(G=x.config.series[S].data[g].fillColor),Y.attr({x:r-D.width/2-D.pointStrokeWidth/2,y:a-D.height/2-D.pointStrokeWidth/2,cx:r,cy:a,fill:G,"fill-opacity":D.pointFillOpacity,stroke:D.pointStrokeColor,r:d,"stroke-width":D.pointStrokeWidth,"stroke-dasharray":D.pointStrokeDashArray,"stroke-opacity":D.pointStrokeOpacity}),x.config.chart.dropShadow.enabled&&C.dropShadow(Y,x.config.chart.dropShadow,f),!this.initialAnim||x.globals.dataChanged||x.globals.resized?x.globals.animationEnded=!0:M.animateMarker(Y,0,"circle"===D.shape?d:{width:D.width,height:D.height},x.config.chart.animations.speed,x.globals.easing,function(){window.setTimeout(function(){M.animationCompleted(Y)},100)}),x.globals.dataChanged&&"circle"===D.shape)if(this.dynamicAnim){var N,E,X,W,Z=x.config.chart.animations.dynamicAnimation.speed;null!=(W=x.globals.previousPaths[f]&&x.globals.previousPaths[f][y])&&(N=W.x,E=W.y,X=void 0!==W.r?W.r:d);for(var et=0;et<x.globals.collapsedSeries.length;et++)x.globals.collapsedSeries[et].index===f&&(Z=1,d=0);0===r&&0===a&&(d=0),M.animateCircle(Y,{cx:N,cy:E,r:X},{cx:r,cy:a,r:d},Z,x.globals.easing)}else Y.attr({r:d});return Y.attr({rel:g,j:g,index:f,"default-marker-size":d}),C.setSelectionFilter(Y,f,g),F.addEvents(Y),Y.node.classList.add("apexcharts-marker"),Y}},{key:"centerTextInBubble",value:function(r){return{y:r+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),V}(),Kn=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"dataLabelsCorrection",value:function(r,a,h,d,f,g,y){var x=this.w,S=!1,M=new Q(this.ctx).getTextRects(h,y),C=M.width,P=M.height;if(a<0&&(a=0),a>x.globals.gridHeight+P&&(a=x.globals.gridHeight+P/2),void 0===x.globals.dataLabelsRects[d]&&(x.globals.dataLabelsRects[d]=[]),x.globals.dataLabelsRects[d].push({x:r,y:a,width:C,height:P}),void 0!==x.globals.dataLabelsRects[d][x.globals.dataLabelsRects[d].length-2]){var D=x.globals.dataLabelsRects[d][void 0!==x.globals.lastDrawnDataLabelsIndexes[d]?x.globals.lastDrawnDataLabelsIndexes[d][x.globals.lastDrawnDataLabelsIndexes[d].length-1]:0];(r>D.x+D.width||a>D.y+D.height||a+P<D.y||r+C<D.x)&&(S=!0)}return(0===f||g)&&(S=!0),{x:r,y:a,textRects:M,drawnextLabel:S}}},{key:"drawDataLabel",value:function(r){var a=this,h=r.type,d=r.pos,f=r.i,g=r.j,y=r.isRangeStart,x=r.strokeWidth,S=void 0===x?2:x,M=this.w,C=new Q(this.ctx),P=M.config.dataLabels,F=0,O=0,D=g,Y=null;if(-1!==M.globals.collapsedSeriesIndices.indexOf(f)||!P.enabled||!Array.isArray(d.x))return Y;Y=C.group({class:"apexcharts-data-labels"});for(var G=0;G<d.x.length;G++)if(F=d.x[G]+P.offsetX,O=d.y[G]+P.offsetY+S,!isNaN(F)){1===g&&0===G&&(D=0),1===g&&1===G&&(D=1);var U=M.globals.series[f][D];"rangeArea"===h&&(U=y?M.globals.seriesRangeStart[f][D]:M.globals.seriesRangeEnd[f][D]);var b="",N=function(E){return M.config.dataLabels.formatter(E,{ctx:a.ctx,seriesIndex:f,dataPointIndex:D,w:M})};"bubble"===M.config.chart.type?(b=N(U=M.globals.seriesZ[f][D]),O=d.y[G],O=new ut(this.ctx).centerTextInBubble(O,f,D).y):void 0!==U&&(b=N(U)),this.plotDataLabelsText({x:F,y:O,text:b,i:f,j:D,parent:Y,offsetCorrection:!0,dataLabelsConfig:M.config.dataLabels})}return Y}},{key:"plotDataLabelsText",value:function(r){var a=this.w,h=new Q(this.ctx),d=r.x,f=r.y,g=r.i,y=r.j,x=r.text,S=r.textAnchor,M=r.fontSize,C=r.parent,P=r.dataLabelsConfig,F=r.color,O=r.alwaysDrawDataLabel,D=r.offsetCorrection;if(!(Array.isArray(a.config.dataLabels.enabledOnSeries)&&a.config.dataLabels.enabledOnSeries.indexOf(g)<0)){var Y={x:d,y:f,drawnextLabel:!0,textRects:null};D&&(Y=this.dataLabelsCorrection(d,f,x,g,y,O,parseInt(P.style.fontSize,10))),a.globals.zoomed||(d=Y.x,f=Y.y),Y.textRects&&(d<-20-Y.textRects.width||d>a.globals.gridWidth+Y.textRects.width+30)&&(x="");var G=a.globals.dataLabels.style.colors[g];(("bar"===a.config.chart.type||"rangeBar"===a.config.chart.type)&&a.config.plotOptions.bar.distributed||a.config.dataLabels.distributed)&&(G=a.globals.dataLabels.style.colors[y]),"function"==typeof G&&(G=G({series:a.globals.series,seriesIndex:g,dataPointIndex:y,w:a})),F&&(G=F);var U=P.offsetX,b=P.offsetY;if("bar"!==a.config.chart.type&&"rangeBar"!==a.config.chart.type||(U=0,b=0),Y.drawnextLabel){var N=h.drawText({width:100,height:parseInt(P.style.fontSize,10),x:d+U,y:f+b,foreColor:G,textAnchor:S||P.textAnchor,text:x,fontSize:M||P.style.fontSize,fontFamily:P.style.fontFamily,fontWeight:P.style.fontWeight||"normal"});if(N.attr({class:"apexcharts-datalabel",cx:d,cy:f}),P.dropShadow.enabled){var E=P.dropShadow;new Ve(this.ctx).dropShadow(N,E)}C.add(N),void 0===a.globals.lastDrawnDataLabelsIndexes[g]&&(a.globals.lastDrawnDataLabelsIndexes[g]=[]),a.globals.lastDrawnDataLabelsIndexes[g].push(y)}}}},{key:"addBackgroundToDataLabel",value:function(r,a){var h=this.w,d=h.config.dataLabels.background,f=d.padding,g=d.padding/2,y=a.width,x=a.height,S=new Q(this.ctx).drawRect(a.x-f,a.y-g/2,y+2*f,x+g,d.borderRadius,"transparent"===h.config.chart.background?"#fff":h.config.chart.background,d.opacity,d.borderWidth,d.borderColor);return d.dropShadow.enabled&&new Ve(this.ctx).dropShadow(S,d.dropShadow),S}},{key:"dataLabelsBackground",value:function(){var r=this.w;if("bubble"!==r.config.chart.type)for(var a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),h=0;h<a.length;h++){var d=a[h],f=d.getBBox(),g=null;if(f.width&&f.height&&(g=this.addBackgroundToDataLabel(d,f)),g){d.parentNode.insertBefore(g.node,d);var y=d.getAttribute("fill");!r.config.chart.animations.enabled||r.globals.resized||r.globals.dataChanged?g.attr({fill:y}):g.animate().attr({fill:y}),d.setAttribute("fill",r.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var r=this.w,a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),h=r.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),d=0;d<a.length;d++)h&&h.insertBefore(a[d],h.nextSibling)}}]),V}(),un=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.legendInactiveClass="legend-mouseover-inactive"}return Dt(V,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(r){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(at.escapeString(r),"']"))}},{key:"isSeriesHidden",value:function(r){var a=this.getSeriesByName(r),h=parseInt(a.getAttribute("data:realIndex"),10);return{isHidden:a.classList.contains("apexcharts-series-collapsed"),realIndex:h}}},{key:"addCollapsedClassToSeries",value:function(r,a){var h=this.w;function d(f){for(var g=0;g<f.length;g++)f[g].index===a&&r.node.classList.add("apexcharts-series-collapsed")}d(h.globals.collapsedSeries),d(h.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(r){var a=this.isSeriesHidden(r);return this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,a.isHidden),a.isHidden}},{key:"showSeries",value:function(r){var a=this.isSeriesHidden(r);a.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!0)}},{key:"hideSeries",value:function(r){var a=this.isSeriesHidden(r);a.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!1)}},{key:"resetSeries",value:function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this.w,f=at.clone(d.globals.initialSeries);d.globals.previousPaths=[],h?(d.globals.collapsedSeries=[],d.globals.ancillaryCollapsedSeries=[],d.globals.collapsedSeriesIndices=[],d.globals.ancillaryCollapsedSeriesIndices=[]):f=this.emptyCollapsedSeries(f),d.config.series=f,r&&(a&&(d.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(f,d.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(r){for(var a=this.w,h=0;h<r.length;h++)a.globals.collapsedSeriesIndices.indexOf(h)>-1&&(r[h].data=[]);return r}},{key:"toggleSeriesOnHover",value:function(r,a){var h=this.w;a||(a=r.target);var d=h.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===r.type){var f=parseInt(a.getAttribute("rel"),10)-1,g=null,y=null;h.globals.axisCharts||"radialBar"===h.config.chart.type?h.globals.axisCharts?(g=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(f,"']")),y=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(f,"']"))):g=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(f+1,"']")):g=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(f+1,"'] path"));for(var x=0;x<d.length;x++)d[x].classList.add(this.legendInactiveClass);null!==g&&(h.globals.axisCharts||g.parentNode.classList.remove(this.legendInactiveClass),g.classList.remove(this.legendInactiveClass),null!==y&&y.classList.remove(this.legendInactiveClass))}else if("mouseout"===r.type)for(var S=0;S<d.length;S++)d[S].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(r,a){var h=this,d=this.w,f=d.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),g=function(x){for(var S=0;S<f.length;S++)f[S].classList[x](h.legendInactiveClass)};if("mousemove"===r.type){var y=parseInt(a.getAttribute("rel"),10)-1;g("add"),function(x){for(var S=0;S<f.length;S++){var M=parseInt(f[S].getAttribute("val"),10);M>=x.from&&M<=x.to&&f[S].classList.remove(h.legendInactiveClass)}}(d.config.plotOptions.heatmap.colorScale.ranges[y])}else"mouseout"===r.type&&g("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],h=this.w,d=0;if(h.config.series.length>1)for(var f=h.config.series.map(function(y,x){return y.data&&y.data.length>0&&-1===h.globals.collapsedSeriesIndices.indexOf(x)&&(!h.globals.comboCharts||0===a.length||a.length&&a.indexOf(h.config.series[x].type)>-1)?x:-1}),g="asc"===r?0:f.length-1;"asc"===r?g<f.length:g>=0;"asc"===r?g++:g--)if(-1!==f[g]){d=f[g];break}return d}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(r,a){return"bar"===r.type||"column"===r.type?a:-1}).filter(function(r){return-1!==r}):this.w.config.series.map(function(r,a){return a})}},{key:"getPreviousPaths",value:function(){var r=this.w;function a(g,y,x){for(var S=g[y].childNodes,M={type:x,paths:[],realIndex:g[y].getAttribute("data:realIndex")},C=0;C<S.length;C++)if(S[C].hasAttribute("pathTo")){var P=S[C].getAttribute("pathTo");M.paths.push({d:P})}r.globals.previousPaths.push(M)}r.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(g){for(var x=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(g,"-series .apexcharts-series")),S=0;S<x.length;S++)a(x,S,g)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var h=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r.config.chart.type," .apexcharts-series"));if(h.length>0)for(var d=function(g){for(var y=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(g,"'] rect")),x=[],S=function(C){var P=function(O){return y[C].getAttribute(O)},F={x:parseFloat(P("x")),y:parseFloat(P("y")),width:parseFloat(P("width")),height:parseFloat(P("height"))};x.push({rect:F,color:y[C].getAttribute("color")})},M=0;M<y.length;M++)S(M);r.globals.previousPaths.push(x)},f=0;f<h.length;f++)d(f);r.globals.axisCharts||(r.globals.previousPaths=r.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(r){var a=this.w,h=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series"));if(h.length>0)for(var d=0;d<h.length;d++){for(var f=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series[data\\:realIndex='").concat(d,"'] circle")),g=[],y=0;y<f.length;y++)g.push({x:f[y].getAttribute("cx"),y:f[y].getAttribute("cy"),r:f[y].getAttribute("r")});a.globals.previousPaths.push(g)}}},{key:"clearPreviousPaths",value:function(){var r=this.w;r.globals.previousPaths=[],r.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var r=this.w,a=r.config.noData,h=new Q(this.ctx),d=r.globals.svgWidth/2,f=r.globals.svgHeight/2,g="middle";if(r.globals.noData=!0,r.globals.animationEnded=!0,"left"===a.align?(d=10,g="start"):"right"===a.align&&(d=r.globals.svgWidth-10,g="end"),"top"===a.verticalAlign?f=50:"bottom"===a.verticalAlign&&(f=r.globals.svgHeight-50),d+=a.offsetX,f=f+parseInt(a.style.fontSize,10)+2+a.offsetY,void 0!==a.text&&""!==a.text){var y=h.drawText({x:d,y:f,text:a.text,textAnchor:g,fontSize:a.style.fontSize,fontFamily:a.style.fontFamily,foreColor:a.style.color,opacity:1,class:"apexcharts-text-nodata"});r.globals.dom.Paper.add(y)}}},{key:"setNullSeriesToZeroValues",value:function(r){for(var a=this.w,h=0;h<r.length;h++)if(0===r[h].length)for(var d=0;d<r[a.globals.maxValsInArrayIndex].length;d++)r[h].push(0);return r}},{key:"hasAllSeriesEqualX",value:function(){for(var r=!0,a=this.w,h=this.filteredSeriesX(),d=0;d<h.length-1;d++)if(h[d][0]!==h[d+1][0]){r=!1;break}return a.globals.allSeriesHasEqualX=r,r}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(a){return a.length>0?a:[]})}}]),V}(),Wi=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Lt(this.ctx)}return Dt(V,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var r=this.w.config.series.slice(),a=new un(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),void 0!==r[this.activeSeriesIndex].data&&r[this.activeSeriesIndex].data.length>0&&null!==r[this.activeSeriesIndex].data[0]&&void 0!==r[this.activeSeriesIndex].data[0].x&&null!==r[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var r=this.w.config.series.slice(),a=new un(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),void 0!==r[this.activeSeriesIndex].data&&r[this.activeSeriesIndex].data.length>0&&null!=r[this.activeSeriesIndex].data[0]&&r[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(r,a){for(var h=this.w.config,d=this.w.globals,f="boxPlot"===h.chart.type||"boxPlot"===h.series[a].type,g=0;g<r[a].data.length;g++)if(void 0!==r[a].data[g][1]&&(Array.isArray(r[a].data[g][1])&&4===r[a].data[g][1].length&&!f?this.twoDSeries.push(at.parseNumber(r[a].data[g][1][3])):this.twoDSeries.push(at.parseNumber(r[a].data[g].length>=5?r[a].data[g][4]:r[a].data[g][1])),d.dataFormatXNumeric=!0),"datetime"===h.xaxis.type){var y=new Date(r[a].data[g][0]);y=new Date(y).getTime(),this.twoDSeriesX.push(y)}else this.twoDSeriesX.push(r[a].data[g][0]);for(var x=0;x<r[a].data.length;x++)void 0!==r[a].data[x][2]&&(this.threeDSeries.push(r[a].data[x][2]),d.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(r,a){var h=this.w.config,d=this.w.globals,f=new Xt(this.ctx),g=a;d.collapsedSeriesIndices.indexOf(a)>-1&&(g=this.activeSeriesIndex);for(var y=0;y<r[a].data.length;y++)void 0!==r[a].data[y].y&&(Array.isArray(r[a].data[y].y)?this.twoDSeries.push(at.parseNumber(r[a].data[y].y[r[a].data[y].y.length-1])):this.twoDSeries.push(at.parseNumber(r[a].data[y].y))),void 0!==r[a].data[y].goals&&Array.isArray(r[a].data[y].goals)?(void 0===this.seriesGoals[a]&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(r[a].data[y].goals)):(void 0===this.seriesGoals[a]&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(null));for(var x=0;x<r[g].data.length;x++){var S="string"==typeof r[g].data[x].x,M=Array.isArray(r[g].data[x].x),C=!M&&!!f.isValidDate(r[g].data[x].x);S||C?S||h.xaxis.convertedCatToNumeric?"datetime"!==h.xaxis.type||d.isBarHorizontal&&d.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(r[g].data[x].x),isNaN(r[g].data[x].x)||"category"===this.w.config.xaxis.type||"string"==typeof r[g].data[x].x||(d.isXNumeric=!0)):this.twoDSeriesX.push(f.parseDate(r[g].data[x].x)):"datetime"===h.xaxis.type?this.twoDSeriesX.push(f.parseDate(r[g].data[x].x.toString())):(d.dataFormatXNumeric=!0,d.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(r[g].data[x].x))):M?(this.fallbackToCategory=!0,this.twoDSeriesX.push(r[g].data[x].x)):(d.isXNumeric=!0,d.dataFormatXNumeric=!0,this.twoDSeriesX.push(r[g].data[x].x))}if(r[a].data[0]&&void 0!==r[a].data[0].z){for(var F=0;F<r[a].data.length;F++)this.threeDSeries.push(r[a].data[F].z);d.isDataXYZ=!0}}},{key:"handleRangeData",value:function(r,a){var h=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleRangeDataFormat("array",r,a):this.isFormatXY()&&(d=this.handleRangeDataFormat("xy",r,a)),h.seriesRangeStart.push(void 0===d.start?[]:d.start),h.seriesRangeEnd.push(void 0===d.end?[]:d.end),h.seriesRange.push(d.rangeUniques),h.seriesRange.forEach(function(f,g){f&&f.forEach(function(y,x){y.y.forEach(function(S,M){for(var C=0;C<y.y.length;C++)M!==C&&S.y1<=y.y[C].y2&&y.y[C].y1<=S.y2&&(y.overlaps.indexOf(S.rangeName)<0&&y.overlaps.push(S.rangeName),y.overlaps.indexOf(y.y[C].rangeName)<0&&y.overlaps.push(y.y[C].rangeName))})})}),d}},{key:"handleCandleStickBoxData",value:function(r,a){var h=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleCandleStickBoxDataFormat("array",r,a):this.isFormatXY()&&(d=this.handleCandleStickBoxDataFormat("xy",r,a)),h.seriesCandleO[a]=d.o,h.seriesCandleH[a]=d.h,h.seriesCandleM[a]=d.m,h.seriesCandleL[a]=d.l,h.seriesCandleC[a]=d.c,d}},{key:"handleRangeDataFormat",value:function(r,a,h){var d=[],f=[],g=a[h].data.filter(function(M,C,P){return C===P.findIndex(function(F){return F.x===M.x})}).map(function(M,C){return{x:M.x,overlaps:[],y:[]}});if("array"===r)for(var y=0;y<a[h].data.length;y++)Array.isArray(a[h].data[y])?(d.push(a[h].data[y][1][0]),f.push(a[h].data[y][1][1])):(d.push(a[h].data[y]),f.push(a[h].data[y]));else if("xy"===r)for(var x=function(M){var C=Array.isArray(a[h].data[M].y),P=at.randomId(),F=a[h].data[M].x,O={y1:C?a[h].data[M].y[0]:a[h].data[M].y,y2:C?a[h].data[M].y[1]:a[h].data[M].y,rangeName:P};a[h].data[M].rangeName=P;var D=g.findIndex(function(Y){return Y.x===F});g[D].y.push(O),d.push(O.y1),f.push(O.y2)},S=0;S<a[h].data.length;S++)x(S);return{start:d,end:f,rangeUniques:g}}},{key:"handleCandleStickBoxDataFormat",value:function(r,a,h){var d=this.w,f="boxPlot"===d.config.chart.type||"boxPlot"===d.config.series[h].type,g=[],y=[],x=[],S=[],M=[];if("array"===r)if(f&&6===a[h].data[0].length||!f&&5===a[h].data[0].length)for(var C=0;C<a[h].data.length;C++)g.push(a[h].data[C][1]),y.push(a[h].data[C][2]),f?(x.push(a[h].data[C][3]),S.push(a[h].data[C][4]),M.push(a[h].data[C][5])):(S.push(a[h].data[C][3]),M.push(a[h].data[C][4]));else for(var P=0;P<a[h].data.length;P++)Array.isArray(a[h].data[P][1])&&(g.push(a[h].data[P][1][0]),y.push(a[h].data[P][1][1]),f?(x.push(a[h].data[P][1][2]),S.push(a[h].data[P][1][3]),M.push(a[h].data[P][1][4])):(S.push(a[h].data[P][1][2]),M.push(a[h].data[P][1][3])));else if("xy"===r)for(var F=0;F<a[h].data.length;F++)Array.isArray(a[h].data[F].y)&&(g.push(a[h].data[F].y[0]),y.push(a[h].data[F].y[1]),f?(x.push(a[h].data[F].y[2]),S.push(a[h].data[F].y[3]),M.push(a[h].data[F].y[4])):(S.push(a[h].data[F].y[2]),M.push(a[h].data[F].y[3])));return{o:g,h:y,m:x,l:S,c:M}}},{key:"parseDataAxisCharts",value:function(r){var a,h=this,f=this.w.config,g=this.w.globals,y=new Xt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),x=f.labels.length>0?f.labels.slice():f.xaxis.categories.slice();if(g.isRangeBar="rangeBar"===f.chart.type&&g.isBarHorizontal,g.hasXaxisGroups="category"===f.xaxis.type&&f.xaxis.group.groups.length>0,g.hasXaxisGroups&&(g.groups=f.xaxis.group.groups),g.hasSeriesGroups=null===(a=r[0])||void 0===a?void 0:a.group,g.hasSeriesGroups){var S=[],M=hn(new Set(r.map(function(O){return O.group})));r.forEach(function(O,D){var Y=M.indexOf(O.group);S[Y]||(S[Y]=[]),S[Y].push(O.name)}),g.seriesGroups=S}for(var C=function(){for(var O=0;O<x.length;O++)if("string"==typeof x[O]){if(!y.isValidDate(x[O]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");h.twoDSeriesX.push(y.parseDate(x[O]))}else h.twoDSeriesX.push(x[O])},P=0;P<r.length;P++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===r[P].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==f.chart.type&&"rangeArea"!==f.chart.type&&"rangeBar"!==r[P].type&&"rangeArea"!==r[P].type||(g.isRangeData=!0,"rangeBar"!==f.chart.type&&"rangeArea"!==f.chart.type||this.handleRangeData(r,P)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(r,P):this.isFormatXY()&&this.handleFormatXY(r,P),"candlestick"!==f.chart.type&&"candlestick"!==r[P].type&&"boxPlot"!==f.chart.type&&"boxPlot"!==r[P].type||this.handleCandleStickBoxData(r,P),g.series.push(this.twoDSeries),g.labels.push(this.twoDSeriesX),g.seriesX.push(this.twoDSeriesX),g.seriesGoals=this.seriesGoals,P!==this.activeSeriesIndex||this.fallbackToCategory||(g.isXNumeric=!0);else{"datetime"===f.xaxis.type?(g.isXNumeric=!0,C(),g.seriesX.push(this.twoDSeriesX)):"numeric"===f.xaxis.type&&(g.isXNumeric=!0,x.length>0&&(this.twoDSeriesX=x,g.seriesX.push(this.twoDSeriesX))),g.labels.push(this.twoDSeriesX);var F=r[P].data.map(function(O){return at.parseNumber(O)});g.series.push(F)}g.seriesZ.push(this.threeDSeries),g.seriesNames.push(void 0!==r[P].name?r[P].name:"series-"+parseInt(P+1,10)),g.seriesColors.push(void 0!==r[P].color?r[P].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(r){var a=this.w.globals,h=this.w.config;a.series=r.slice(),a.seriesNames=h.labels.slice();for(var d=0;d<a.series.length;d++)void 0===a.seriesNames[d]&&a.seriesNames.push("series-"+(d+1));return this.w}},{key:"handleExternalLabelsData",value:function(r){var a=this.w.config,h=this.w.globals;a.xaxis.categories.length>0?h.labels=a.xaxis.categories:a.labels.length>0?h.labels=a.labels.slice():this.fallbackToCategory?(h.labels=h.labels[0],h.seriesRange.length&&(h.seriesRange.map(function(d){d.forEach(function(f){h.labels.indexOf(f.x)<0&&f.x&&h.labels.push(f.x)})}),h.labels=Array.from(new Set(h.labels.map(JSON.stringify)),JSON.parse)),a.xaxis.convertedCatToNumeric&&(new fr(a).convertCatToNumericXaxis(a,this.ctx,h.seriesX[0]),this._generateExternalLabels(r))):this._generateExternalLabels(r)}},{key:"_generateExternalLabels",value:function(r){var a=this.w.globals,h=this.w.config,d=[];if(a.axisCharts){if(a.series.length>0)if(this.isFormatXY())for(var f=h.series.map(function(C,P){return C.data.filter(function(F,O,D){return D.findIndex(function(Y){return Y.x===F.x})===O})}),g=f.reduce(function(C,P,F,O){return O[C].length>P.length?C:F},0),y=0;y<f[g].length;y++)d.push(y+1);else for(var x=0;x<a.series[a.maxValsInArrayIndex].length;x++)d.push(x+1);a.seriesX=[];for(var S=0;S<r.length;S++)a.seriesX.push(d);this.w.globals.isBarHorizontal||(a.isXNumeric=!0)}if(0===d.length){d=a.axisCharts?[]:a.series.map(function(C,P){return P+1});for(var M=0;M<r.length;M++)a.seriesX.push(d)}a.labels=d,h.xaxis.convertedCatToNumeric&&(a.categoryLabels=d.map(function(C){return h.xaxis.labels.formatter(C)})),a.noLabelsProvided=!0}},{key:"parseData",value:function(r){var a=this.w,h=a.config,d=a.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),d.axisCharts?(this.parseDataAxisCharts(r),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(r),h.chart.stacked){var f=new un(this.ctx);d.series=f.setNullSeriesToZeroValues(d.series)}this.coreUtils.getSeriesTotals(),d.axisCharts&&(d.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),d.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),d.dataFormatXNumeric||d.isXNumeric&&("numeric"!==h.xaxis.type||0!==h.labels.length||0!==h.xaxis.categories.length)||this.handleExternalLabelsData(r);for(var g=this.coreUtils.getCategoryLabels(d.labels),y=0;y<g.length;y++)if(Array.isArray(g[y])){d.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var r=this.w,a=[];r.globals.seriesYAxisMap.forEach(function(h,d){var f=0;h.forEach(function(g){-1!==r.globals.collapsedSeriesIndices.indexOf(g)&&f++}),f>0&&f==h.length&&a.push(d)}),r.globals.ignoreYAxisIndexes=a.map(function(h){return h})}}]),V}(),bs=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"getLabel",value:function(r,a,h,d){var Y,G,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",y=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],x=this.w,S=void 0===r[d]?"":r[d],M=S,C=x.globals.xLabelFormatter,P=x.config.xaxis.labels.formatter,F=!1,O=new Zt(this.ctx);y&&(M=O.xLabelFormat(C,S,S,{i:d,dateFormatter:new Xt(this.ctx).formatDate,w:x}),void 0!==P&&(M=P(S,r[d],{i:d,dateFormatter:new Xt(this.ctx).formatDate,w:x}))),a.length>0?(Y=a[d].unit,G=null,a.forEach(function(E){"month"===E.unit?G="year":"day"===E.unit?G="month":"hour"===E.unit?G="day":"minute"===E.unit&&(G="hour")}),F=G===Y,h=a[d].position,M=a[d].value):"datetime"===x.config.xaxis.type&&void 0===P&&(M=""),void 0===M&&(M=""),M=Array.isArray(M)?M:M.toString();var b,U=new Q(this.ctx);b=x.globals.rotateXLabels&&y?U.getTextRects(M,parseInt(g,10),null,"rotate(".concat(x.config.xaxis.labels.rotate," 0 0)"),!1):U.getTextRects(M,parseInt(g,10));var N=!x.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(M)&&("NaN"===String(M)||f.indexOf(M)>=0&&N)&&(M=""),{x:h,text:M,textRect:b,isBold:F}}},{key:"checkLabelBasedOnTickamount",value:function(r,a,h){var d=this.w,f=d.config.xaxis.tickAmount;return"dataPoints"===f&&(f=Math.round(d.globals.gridWidth/120)),f>h||r%Math.round(h/(f+1))==0||(a.text=""),a}},{key:"checkForOverflowingLabels",value:function(r,a,h,d,f){var g=this.w;if(0===r&&g.globals.skipFirstTimelinelabel&&(a.text=""),r===h-1&&g.globals.skipLastTimelinelabel&&(a.text=""),g.config.xaxis.labels.hideOverlappingLabels&&d.length>0){var y=f[f.length-1];a.x<y.textRect.width/(g.globals.rotateXLabels?Math.abs(g.config.xaxis.labels.rotate)/12:1.01)+y.x&&(a.text="")}return a}},{key:"checkForReversedLabels",value:function(r,a){var h=this.w;return h.config.yaxis[r]&&h.config.yaxis[r].reversed&&a.reverse(),a}},{key:"isYAxisHidden",value:function(r){var a=this.w,h=new Lt(this.ctx),d=!a.globals.seriesYAxisMap[r].some(function(f){return-1===a.globals.collapsedSeriesIndices.indexOf(f)});return!a.config.yaxis[r].show||!a.config.yaxis[r].showForNullSeries&&h.isSeriesNull(r)&&d}},{key:"getYAxisForeColor",value:function(r,a){var h=this.w;return Array.isArray(r)&&h.globals.yAxisScale[a]&&this.ctx.theme.pushExtraColors(r,h.globals.yAxisScale[a].result.length,!1),r}},{key:"drawYAxisTicks",value:function(r,a,h,d,f,g,y){var x=this.w,S=new Q(this.ctx),M=x.globals.translateY;if(d.show&&a>0){!0===x.config.yaxis[f].opposite&&(r+=d.width);for(var C=a;C>=0;C--){var P=M+a/10+x.config.yaxis[f].labels.offsetY-1;x.globals.isBarHorizontal&&(P=g*C),"heatmap"===x.config.chart.type&&(P+=g/2);var F=S.drawLine(r+h.offsetX-d.width+d.offsetX,P+d.offsetY,r+h.offsetX+d.offsetX,P+d.offsetY,d.color);y.add(F),M+=g}}}}]),V}(),Qe=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"scaleSvgNode",value:function(r,a){var h=parseFloat(r.getAttributeNS(null,"width")),d=parseFloat(r.getAttributeNS(null,"height"));r.setAttributeNS(null,"width",h*a),r.setAttributeNS(null,"height",d*a),r.setAttributeNS(null,"viewBox","0 0 "+h+" "+d)}},{key:"fixSvgStringForIe11",value:function(r){if(!at.isIE11())return r.replace(/&nbsp;/g,"&#160;");var a=0,h=r.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(d){return 2==++a?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':d});return(h=h.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(r){null==r&&(r=1);var a=this.w.globals.dom.Paper.svg();if(1!==r){var h=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(h,r),a=(new XMLSerializer).serializeToString(h)}return this.fixSvgStringForIe11(a)}},{key:"cleanup",value:function(){var r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),h=r.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(d,function(f){f.setAttribute("width",0)}),a&&a[0]&&(a[0].setAttribute("x",-500),a[0].setAttribute("x1",-500),a[0].setAttribute("x2",-500)),h&&h[0]&&(h[0].setAttribute("y",-100),h[0].setAttribute("y1",-100),h[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var r=this.getSvgString(),a=new Blob([r],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(a)}},{key:"dataURI",value:function(r){var a=this;return new Promise(function(h){var d=a.w,f=r?r.scale||r.width/d.globals.svgWidth:1;a.cleanup();var g=document.createElement("canvas");g.width=d.globals.svgWidth*f,g.height=parseInt(d.globals.dom.elWrap.style.height,10)*f;var y="transparent"===d.config.chart.background?"#fff":d.config.chart.background,x=g.getContext("2d");x.fillStyle=y,x.fillRect(0,0,g.width*f,g.height*f);var S=a.getSvgString(f);if(window.canvg&&at.isIE11()){var M=window.canvg.Canvg.fromString(x,S,{ignoreClear:!0,ignoreDimensions:!0});M.start();var C=g.msToBlob();M.stop(),h({blob:C})}else{var P="data:image/svg+xml,"+encodeURIComponent(S),F=new Image;F.crossOrigin="anonymous",F.onload=function(){if(x.drawImage(F,0,0),g.msToBlob){var O=g.msToBlob();h({blob:O})}else{var D=g.toDataURL("image/png");h({imgURI:D})}},F.src=P}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var r=this;this.dataURI().then(function(a){var h=a.imgURI,d=a.blob;d?navigator.msSaveOrOpenBlob(d,r.w.globals.chartID+".png"):r.triggerDownload(h,r.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(r){var a=this,h=r.series,d=r.fileName,f=r.columnDelimiter,g=void 0===f?",":f,y=r.lineDelimiter,x=void 0===y?"\n":y,S=this.w;h||(h=S.config.series);var M,C,P=[],F=[],O="",D=S.globals.series.map(function(X,W){return-1===S.globals.collapsedSeriesIndices.indexOf(W)?X:[]}),Y=function(X){return"datetime"===S.config.xaxis.type&&String(X).length>=10},G=Math.max.apply(Math,hn(h.map(function(X){return X.data?X.data.length:0}))),U=new Wi(this.ctx),b=new bs(this.ctx),N=function(X){var W="";if(S.globals.axisCharts){if("category"===S.config.xaxis.type||S.config.xaxis.convertedCatToNumeric)if(S.globals.isBarHorizontal){var Z=S.globals.yLabelFormatters[0],et=new un(a.ctx).getActiveConfigSeriesIndex();W=Z(S.globals.labels[X],{seriesIndex:et,dataPointIndex:X,w:S})}else W=b.getLabel(S.globals.labels,S.globals.timescaleLabels,0,X).text;"datetime"===S.config.xaxis.type&&(S.config.xaxis.categories.length?W=S.config.xaxis.categories[X]:S.config.labels.length&&(W=S.config.labels[X]))}else W=S.config.labels[X];return Array.isArray(W)&&(W=W.join(" ")),at.isNumber(W)?W:W.split(g).join("")};P.push(S.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===S.config.chart.type?(P.push("minimum"),P.push("q1"),P.push("median"),P.push("q3"),P.push("maximum")):"candlestick"===S.config.chart.type?(P.push("open"),P.push("high"),P.push("low"),P.push("close")):"rangeBar"===S.config.chart.type?(P.push("minimum"),P.push("maximum")):h.map(function(X,W){var Z=(X.name?X.name:"series-".concat(W))+"";S.globals.axisCharts&&P.push(Z.split(g).join("")?Z.split(g).join(""):"series-".concat(W))}),S.globals.axisCharts||(P.push(S.config.chart.toolbar.export.csv.headerValue),F.push(P.join(g))),S.globals.allSeriesHasEqualX||!S.globals.axisCharts||S.config.xaxis.categories.length||S.config.labels.length?h.map(function(X,W){S.globals.axisCharts?function(X,W){if(P.length&&0===W&&F.push(P.join(g)),X.data){X.data=X.data.length&&X.data||hn(Array(G)).map(function(){return""});for(var Z=0;Z<X.data.length;Z++){P=[];var et=N(Z);if(et||(U.isFormatXY()?et=h[W].data[Z].x:U.isFormat2DArray()&&(et=h[W].data[Z]?h[W].data[Z][0]:"")),0===W){P.push(Y(et)?S.config.chart.toolbar.export.csv.dateFormatter(et):at.isNumber(et)?et:et.split(g).join(""));for(var it=0;it<S.globals.series.length;it++){var pt;U.isFormatXY()?P.push(null===(pt=h[it].data[Z])||void 0===pt?void 0:pt.y):P.push(D[it][Z])}}("candlestick"===S.config.chart.type||X.type&&"candlestick"===X.type)&&(P.pop(),P.push(S.globals.seriesCandleO[W][Z]),P.push(S.globals.seriesCandleH[W][Z]),P.push(S.globals.seriesCandleL[W][Z]),P.push(S.globals.seriesCandleC[W][Z])),("boxPlot"===S.config.chart.type||X.type&&"boxPlot"===X.type)&&(P.pop(),P.push(S.globals.seriesCandleO[W][Z]),P.push(S.globals.seriesCandleH[W][Z]),P.push(S.globals.seriesCandleM[W][Z]),P.push(S.globals.seriesCandleL[W][Z]),P.push(S.globals.seriesCandleC[W][Z])),"rangeBar"===S.config.chart.type&&(P.pop(),P.push(S.globals.seriesRangeStart[W][Z]),P.push(S.globals.seriesRangeEnd[W][Z])),P.length&&F.push(P.join(g))}}}(X,W):((P=[]).push(S.globals.labels[W].split(g).join("")),P.push(D[W]),F.push(P.join(g)))}):(M=new Set,C={},h.forEach(function(X,W){X?.data.forEach(function(Z){var et,it;if(U.isFormatXY())et=Z.x,it=Z.y;else{if(!U.isFormat2DArray())return;et=Z[0],it=Z[1]}C[et]||(C[et]=Array(h.length).fill("")),C[et][W]=it,M.add(et)})}),P.length&&F.push(P.join(g)),Array.from(M).sort().forEach(function(X){F.push([Y(X)&&"datetime"===S.config.xaxis.type?S.config.chart.toolbar.export.csv.dateFormatter(X):at.isNumber(X)?X:X.split(g).join(""),C[X].join(g)])})),O+=F.join(x),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+O),d||S.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(r,a,h){var d=document.createElement("a");d.href=r,d.download=(a||this.w.globals.chartID)+h,document.body.appendChild(d),d.click(),document.body.removeChild(d)}}]),V}(),Ii=function(){function V(r,a){zt(this,V),this.ctx=r,this.elgrid=a,this.w=r.w;var h=this.w;this.axesUtils=new bs(r),this.xaxisLabels=h.globals.labels.slice(),h.globals.timescaleLabels.length>0&&!h.globals.isBarHorizontal&&(this.xaxisLabels=h.globals.timescaleLabels.slice()),h.config.xaxis.overwriteCategories&&(this.xaxisLabels=h.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===h.config.xaxis.position?0:h.globals.gridHeight+1,this.offY=this.offY+h.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.xaxisBorderWidth=h.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=h.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?h.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=h.config.xaxis.axisBorder.height,this.yaxis=h.config.yaxis[0]}return Dt(V,[{key:"drawXaxis",value:function(){var r=this.w,a=new Q(this.ctx),h=a.group({class:"apexcharts-xaxis",transform:"translate(".concat(r.config.xaxis.offsetX,", ").concat(r.config.xaxis.offsetY,")")}),d=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(r.globals.translateXAxisX,", ").concat(r.globals.translateXAxisY,")")});h.add(d);for(var f=[],g=0;g<this.xaxisLabels.length;g++)f.push(this.xaxisLabels[g]);if(this.drawXAxisLabelAndGroup(!0,a,d,f,r.globals.isXNumeric,function(O,D){return D}),r.globals.hasXaxisGroups){var y=r.globals.groups;f=[];for(var x=0;x<y.length;x++)f.push(y[x].title);var S={};r.config.xaxis.group.style&&(S.xaxisFontSize=r.config.xaxis.group.style.fontSize,S.xaxisFontFamily=r.config.xaxis.group.style.fontFamily,S.xaxisForeColors=r.config.xaxis.group.style.colors,S.fontWeight=r.config.xaxis.group.style.fontWeight,S.cssClass=r.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,a,d,f,!1,function(O,D){return y[O].cols*D},S)}if(void 0!==r.config.xaxis.title.text){var M=a.group({class:"apexcharts-xaxis-title"}),C=a.drawText({x:r.globals.gridWidth/2+r.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===r.config.xaxis.position?r.globals.xAxisLabelsHeight:-r.globals.xAxisLabelsHeight-10)+r.config.xaxis.title.offsetY,text:r.config.xaxis.title.text,textAnchor:"middle",fontSize:r.config.xaxis.title.style.fontSize,fontFamily:r.config.xaxis.title.style.fontFamily,fontWeight:r.config.xaxis.title.style.fontWeight,foreColor:r.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+r.config.xaxis.title.style.cssClass});M.add(C),h.add(M)}if(r.config.xaxis.axisBorder.show){var P=r.globals.barPadForNumericAxis,F=a.drawLine(r.globals.padHorizontal+r.config.xaxis.axisBorder.offsetX-P,this.offY,this.xaxisBorderWidth+P,this.offY,r.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(F):h.add(F)}return h}},{key:"drawXAxisLabelAndGroup",value:function(r,a,h,d,f,g){var y,x=this,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},M=[],C=[],P=this.w,F=S.xaxisFontSize||this.xaxisFontSize,O=S.xaxisFontFamily||this.xaxisFontFamily,D=S.xaxisForeColors||this.xaxisForeColors,Y=S.fontWeight||P.config.xaxis.labels.style.fontWeight,G=S.cssClass||P.config.xaxis.labels.style.cssClass,U=P.globals.padHorizontal,b=d.length,N="category"===P.config.xaxis.type?P.globals.dataPoints:b;0===N&&b>N&&(N=b),f?(y=P.globals.gridWidth/Math.min(N>1?N-1:N,b-1),U=U+g(0,y)/2+P.config.xaxis.labels.offsetX):U=U+g(0,y=P.globals.gridWidth/N)+P.config.xaxis.labels.offsetX;for(var X=function(Z){var et=U-g(Z,y)/2+P.config.xaxis.labels.offsetX;0===Z&&1===b&&y/2===U&&1===N&&(et=P.globals.gridWidth/2);var it=x.axesUtils.getLabel(d,P.globals.timescaleLabels,et,Z,M,F,r),pt=28;if(P.globals.rotateXLabels&&r&&(pt=22),P.config.xaxis.title.text&&"top"===P.config.xaxis.position&&(pt+=parseFloat(P.config.xaxis.title.style.fontSize)+2),r||(pt=pt+parseFloat(F)+(P.globals.xAxisLabelsHeight-P.globals.xAxisGroupLabelsHeight)+(P.globals.rotateXLabels?10:0)),it=void 0!==P.config.xaxis.tickAmount&&"dataPoints"!==P.config.xaxis.tickAmount&&"datetime"!==P.config.xaxis.type?x.axesUtils.checkLabelBasedOnTickamount(Z,it,b):x.axesUtils.checkForOverflowingLabels(Z,it,b,M,C),P.config.xaxis.labels.show){var wt=a.drawText({x:it.x,y:x.offY+P.config.xaxis.labels.offsetY+pt-("top"===P.config.xaxis.position?P.globals.xAxisHeight+P.config.xaxis.axisTicks.height-2:0),text:it.text,textAnchor:"middle",fontWeight:it.isBold?600:Y,fontSize:F,fontFamily:O,foreColor:Array.isArray(D)?r&&P.config.xaxis.convertedCatToNumeric?D[P.globals.minX+Z-1]:D[Z]:D,isPlainText:!1,cssClass:(r?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+G});if(h.add(wt),wt.on("click",function(Ft){if("function"==typeof P.config.chart.events.xAxisLabelClick){var Nt=Object.assign({},P,{labelIndex:Z});P.config.chart.events.xAxisLabelClick(Ft,x.ctx,Nt)}}),r){var xt=document.createElementNS(P.globals.SVGNS,"title");xt.textContent=Array.isArray(it.text)?it.text.join(" "):it.text,wt.node.appendChild(xt),""!==it.text&&(M.push(it.text),C.push(it))}}Z<b-1&&(U+=g(Z+1,y))},W=0;W<=b-1;W++)X(W)}},{key:"drawXaxisInversed",value:function(r){var a,h,d=this,f=this.w,g=new Q(this.ctx),y=f.config.yaxis[0].opposite?f.globals.translateYAxisX[r]:0,x=g.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:r}),S=g.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+y+", 0)"});x.add(S);var M=[];if(f.config.yaxis[r].show)for(var C=0;C<this.xaxisLabels.length;C++)M.push(this.xaxisLabels[C]);h=-(a=f.globals.gridHeight/M.length)/2.2;var P=f.globals.yLabelFormatters[0],F=f.config.yaxis[0].labels;if(F.show)for(var O=function(E){var X=void 0===M[E]?"":M[E];X=P(X,{seriesIndex:r,dataPointIndex:E,w:f});var W=d.axesUtils.getYAxisForeColor(F.style.colors,r),Z=0;Array.isArray(X)&&(Z=X.length/2*parseInt(F.style.fontSize,10));var et=F.offsetX-15,it="end";d.yaxis.opposite&&(it="start"),"left"===f.config.yaxis[0].labels.align?(et=F.offsetX,it="start"):"center"===f.config.yaxis[0].labels.align?(et=F.offsetX,it="middle"):"right"===f.config.yaxis[0].labels.align&&(it="end");var pt=g.drawText({x:et,y:h+a+F.offsetY-Z,text:X,textAnchor:it,foreColor:Array.isArray(W)?W[E]:W,fontSize:F.style.fontSize,fontFamily:F.style.fontFamily,fontWeight:F.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+F.style.cssClass,maxWidth:F.maxWidth});S.add(pt),pt.on("click",function(Ft){if("function"==typeof f.config.chart.events.xAxisLabelClick){var Nt=Object.assign({},f,{labelIndex:E});f.config.chart.events.xAxisLabelClick(Ft,d.ctx,Nt)}});var wt=document.createElementNS(f.globals.SVGNS,"title");if(wt.textContent=Array.isArray(X)?X.join(" "):X,pt.node.appendChild(wt),0!==f.config.yaxis[r].labels.rotate){var xt=g.rotateAroundCenter(pt.node);pt.node.setAttribute("transform","rotate(".concat(f.config.yaxis[r].labels.rotate," 0 ").concat(xt.y,")"))}h+=a},D=0;D<=M.length-1;D++)O(D);if(void 0!==f.config.yaxis[0].title.text){var Y=g.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+y+", 0)"}),G=g.drawText({x:f.config.yaxis[0].title.offsetX,y:f.globals.gridHeight/2+f.config.yaxis[0].title.offsetY,text:f.config.yaxis[0].title.text,textAnchor:"middle",foreColor:f.config.yaxis[0].title.style.color,fontSize:f.config.yaxis[0].title.style.fontSize,fontWeight:f.config.yaxis[0].title.style.fontWeight,fontFamily:f.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+f.config.yaxis[0].title.style.cssClass});Y.add(G),x.add(Y)}var U=0;this.isCategoryBarHorizontal&&f.config.yaxis[0].opposite&&(U=f.globals.gridWidth);var b=f.config.xaxis.axisBorder;if(b.show){var N=g.drawLine(f.globals.padHorizontal+b.offsetX+U,1+b.offsetY,f.globals.padHorizontal+b.offsetX+U,f.globals.gridHeight+b.offsetY,b.color,0);this.elgrid&&this.elgrid.elGridBorders&&f.config.grid.show?this.elgrid.elGridBorders.add(N):x.add(N)}return f.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(U,M.length,f.config.yaxis[0].axisBorder,f.config.yaxis[0].axisTicks,0,a,x),x}},{key:"drawXaxisTicks",value:function(r,a,h){var d=this.w,f=r;if(!(r<0||r-2>d.globals.gridWidth)){var g=this.offY+d.config.xaxis.axisTicks.offsetY;if(a=a+g+d.config.xaxis.axisTicks.height,"top"===d.config.xaxis.position&&(a=g-d.config.xaxis.axisTicks.height),d.config.xaxis.axisTicks.show){var y=new Q(this.ctx).drawLine(r+d.config.xaxis.axisTicks.offsetX,g+d.config.xaxis.offsetY,f+d.config.xaxis.axisTicks.offsetX,a+d.config.xaxis.offsetY,d.config.xaxis.axisTicks.color);h.add(y),y.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var r=this.w,a=[],h=this.xaxisLabels.length,d=r.globals.padHorizontal;if(r.globals.timescaleLabels.length>0)for(var f=0;f<h;f++)a.push(d=this.xaxisLabels[f].position);else for(var g=h,y=0;y<g;y++){var x=g;r.globals.isXNumeric&&"bar"!==r.config.chart.type&&(x-=1),a.push(d+=r.globals.gridWidth/x)}return a}},{key:"xAxisLabelCorrections",value:function(){var r=this.w,a=new Q(this.ctx),h=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),f=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),g=r.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(r.globals.rotateXLabels||r.config.xaxis.labels.rotateAlways)for(var y=0;y<d.length;y++){var x=a.rotateAroundCenter(d[y]);x.y=x.y-1,x.x=x.x+1,d[y].setAttribute("transform","rotate(".concat(r.config.xaxis.labels.rotate," ").concat(x.x," ").concat(x.y,")")),d[y].setAttribute("text-anchor","end"),h.setAttribute("transform","translate(0, ".concat(-10,")")),r.config.xaxis.labels.trim&&Array.prototype.forEach.call(d[y].childNodes,function(F){a.placeTextWithEllipsis(F,F.textContent,r.globals.xAxisLabelsHeight-("bottom"===r.config.legend.position?20:10))})}else!function(){for(var F=r.globals.gridWidth/(r.globals.labels.length+1),O=0;O<d.length;O++)r.config.xaxis.labels.trim&&"datetime"!==r.config.xaxis.type&&Array.prototype.forEach.call(d[O].childNodes,function(Y){a.placeTextWithEllipsis(Y,Y.textContent,F)})}();if(f.length>0){var M=f[f.length-1].getBBox(),C=f[0].getBBox();M.x<-20&&f[f.length-1].parentNode.removeChild(f[f.length-1]),C.x+C.width>r.globals.gridWidth&&!r.globals.isBarHorizontal&&f[0].parentNode.removeChild(f[0]);for(var P=0;P<g.length;P++)a.placeTextWithEllipsis(g[P],g[P].textContent,r.config.yaxis[0].labels.maxWidth-(r.config.yaxis[0].title.text?2*parseFloat(r.config.yaxis[0].title.style.fontSize):0)-15)}}}]),V}(),We=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w;var a=this.w;this.xaxisLabels=a.globals.labels.slice(),this.axesUtils=new bs(r),this.isRangeBar=a.globals.seriesRange.length&&a.globals.isBarHorizontal,a.globals.timescaleLabels.length>0&&(this.xaxisLabels=a.globals.timescaleLabels.slice())}return Dt(V,[{key:"drawGridArea",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.w,h=new Q(this.ctx);null===r&&(r=h.group({class:"apexcharts-grid"}));var d=h.drawLine(a.globals.padHorizontal,1,a.globals.padHorizontal,a.globals.gridHeight,"transparent"),f=h.drawLine(a.globals.padHorizontal,a.globals.gridHeight,a.globals.gridWidth,a.globals.gridHeight,"transparent");return r.add(f),r.add(d),r}},{key:"drawGrid",value:function(){var r=null;return this.w.globals.axisCharts&&(r=this.renderGrid(),this.drawGridArea(r.el)),r}},{key:"createGridMask",value:function(){var r=this.w,a=r.globals,h=new Q(this.ctx),d=Array.isArray(r.config.stroke.width)?0:r.config.stroke.width;if(Array.isArray(r.config.stroke.width)){var f=0;r.config.stroke.width.forEach(function(C){f=Math.max(f,C)}),d=f}a.dom.elGridRectMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(a.cuid)),a.dom.elGridRectMarkerMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(a.cuid)),a.dom.elForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elForecastMask.setAttribute("id","forecastMask".concat(a.cuid)),a.dom.elNonForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(a.cuid));var g=r.config.chart.type,y=0,x=0;("bar"===g||"rangeBar"===g||"candlestick"===g||"boxPlot"===g||r.globals.comboBarCount>0)&&r.globals.isXNumeric&&!r.globals.isBarHorizontal&&(x=r.config.grid.padding.right,a.barPadForNumericAxis>(y=r.config.grid.padding.left)&&(y=a.barPadForNumericAxis,x=a.barPadForNumericAxis)),a.dom.elGridRect=h.drawRect(-d-y-2,2*-d-2,a.gridWidth+d+x+y+4,a.gridHeight+4*d+4,0,"#fff");var S=r.globals.markers.largestSize+1;a.dom.elGridRectMarker=h.drawRect(2*-S,2*-S,a.gridWidth+4*S,a.gridHeight+4*S,0,"#fff"),a.dom.elGridRectMask.appendChild(a.dom.elGridRect.node),a.dom.elGridRectMarkerMask.appendChild(a.dom.elGridRectMarker.node);var M=a.dom.baseEl.querySelector("defs");M.appendChild(a.dom.elGridRectMask),M.appendChild(a.dom.elForecastMask),M.appendChild(a.dom.elNonForecastMask),M.appendChild(a.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(r){var a=r.i,h=r.x1,y=r.xCount,S=this.w;if(!(0===a&&S.globals.skipFirstTimelinelabel||a===y-1&&S.globals.skipLastTimelinelabel&&!S.config.xaxis.labels.formatter||"radar"===S.config.chart.type)){S.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,x1:h,y1:r.y1,x2:r.x2,y2:r.y2,xCount:y,parent:r.parent});var M=0;if(S.globals.hasXaxisGroups&&"between"===S.config.xaxis.tickPlacement){var C=S.globals.groups;if(C){for(var P=0,F=0;P<a&&F<C.length;F++)P+=C[F].cols;P===a&&(M=.6*S.globals.xAxisLabelsHeight)}}new Ii(this.ctx).drawXaxisTicks(h,M,S.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(r){var a=r.i,h=r.x1,d=r.y1,f=r.x2,g=r.y2,y=r.xCount,x=r.parent,S=this.w,M=!1,C=x.node.classList.contains("apexcharts-gridlines-horizontal"),P=S.config.grid.strokeDashArray,F=S.globals.barPadForNumericAxis;(0===d&&0===g||0===h&&0===f)&&(M=!0),d===S.globals.gridHeight&&g===S.globals.gridHeight&&(M=!0),!S.globals.isBarHorizontal||0!==a&&a!==y-1||(M=!0);var O=new Q(this).drawLine(h-(C?F:0),d,f+(C?F:0),g,S.config.grid.borderColor,P);O.node.classList.add("apexcharts-gridline"),M&&S.config.grid.show?this.elGridBorders.add(O):x.add(O)}},{key:"_drawGridBandRect",value:function(r){var a=r.c,h=r.x1,d=r.y1,f=r.x2,g=r.y2,y=r.type,x=this.w,S=new Q(this.ctx),M=x.globals.barPadForNumericAxis;if("column"!==y||"datetime"!==x.config.xaxis.type){var P=S.drawRect(h-("row"===y?M:0),d,f+("row"===y?2*M:0),g,0,x.config.grid[y].colors[a],x.config.grid[y].opacity);this.elg.add(P),P.attr("clip-path","url(#gridRectMask".concat(x.globals.cuid,")")),P.node.classList.add("apexcharts-grid-".concat(y))}}},{key:"_drawXYLines",value:function(r){var a=this,h=r.xCount,d=r.tickAmount,f=this.w;if(f.config.grid.xaxis.lines.show||f.config.xaxis.axisTicks.show){var g,y=f.globals.padHorizontal,x=f.globals.gridHeight;f.globals.timescaleLabels.length?function(O){for(var D=O.xC,G=O.y1,b=O.y2,N=0;N<D;N++)a._drawGridLines({i:N,x1:a.xaxisLabels[N].position,y1:G,x2:a.xaxisLabels[N].position,y2:b,xCount:h,parent:a.elgridLinesV})}({xC:h,x1:y,y1:0,x2:g,y2:x}):(f.globals.isXNumeric&&(h=f.globals.xAxisScale.result.length),function(O){for(var D=O.xC,Y=O.x1,G=O.y1,U=O.x2,b=O.y2,N=0;N<D+(f.globals.isXNumeric?0:1);N++)0===N&&1===D&&1===f.globals.dataPoints&&(U=Y=f.globals.gridWidth/2),a._drawGridLines({i:N,x1:Y,y1:G,x2:U,y2:b,xCount:h,parent:a.elgridLinesV}),U=Y+=f.globals.gridWidth/(f.globals.isXNumeric?D-1:D)}({xC:h,x1:y,y1:0,x2:g,y2:x}))}if(f.config.grid.yaxis.lines.show){var S=0,M=0,C=f.globals.gridWidth,P=d+1;this.isRangeBar&&(P=f.globals.labels.length);for(var F=0;F<P+(this.isRangeBar?1:0);F++)this._drawGridLine({i:F,xCount:P+(this.isRangeBar?1:0),x1:0,y1:S,x2:C,y2:M,parent:this.elgridLinesH}),M=S+=f.globals.gridHeight/(this.isRangeBar?P:d)}}},{key:"_drawInvertedXYLines",value:function(r){var a=r.xCount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show)for(var d,f=h.globals.padHorizontal,g=h.globals.gridHeight,y=0;y<a+1;y++)h.config.grid.xaxis.lines.show&&this._drawGridLine({i:y,xCount:a+1,x1:f,y1:0,x2:d,y2:g,parent:this.elgridLinesV}),new Ii(this.ctx).drawXaxisTicks(f,0,h.globals.dom.elGraphical),d=f=f+h.globals.gridWidth/a+.3;if(h.config.grid.yaxis.lines.show)for(var x=0,S=0,M=h.globals.gridWidth,C=0;C<h.globals.dataPoints+1;C++)this._drawGridLine({i:C,xCount:h.globals.dataPoints+1,x1:0,y1:x,x2:M,y2:S,parent:this.elgridLinesH}),S=x+=h.globals.gridHeight/h.globals.dataPoints}},{key:"renderGrid",value:function(){var r=this.w,a=new Q(this.ctx);this.elg=a.group({class:"apexcharts-grid"}),this.elgridLinesH=a.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=a.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=a.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),r.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var h=0;h<r.globals.seriesYAxisMap.length&&-1!==r.globals.ignoreYAxisIndexes.indexOf(h);)h++;h===r.globals.seriesYAxisMap.length&&(h=0);var d,g,y,x,f=r.globals.yAxisScale[h].result.length-1;return!r.globals.isBarHorizontal||this.isRangeBar?(d=this.xaxisLabels.length,this.isRangeBar&&(d--,f=r.globals.labels.length,r.config.xaxis.tickAmount&&r.config.xaxis.labels.formatter&&(d=r.config.xaxis.tickAmount),(null===(g=r.globals.yAxisScale)||void 0===g||null===(y=g[h])||void 0===y||null===(x=y.result)||void 0===x?void 0:x.length)>0&&"datetime"!==r.config.xaxis.type&&(d=r.globals.yAxisScale[h].result.length-1)),this._drawXYLines({xCount:d,tickAmount:f})):this._drawInvertedXYLines({xCount:d=f,tickAmount:f=r.globals.xTickAmount}),this.drawGridBands(d,f),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:r.globals.gridWidth/d}}},{key:"drawGridBands",value:function(r,a){var h=this.w;if(void 0!==h.config.grid.row.colors&&h.config.grid.row.colors.length>0)for(var d=0,f=h.globals.gridHeight/a,g=h.globals.gridWidth,y=0,x=0;y<a;y++,x++)x>=h.config.grid.row.colors.length&&(x=0),this._drawGridBandRect({c:x,x1:0,y1:d,x2:g,y2:f,type:"row"}),d+=h.globals.gridHeight/a;if(void 0!==h.config.grid.column.colors&&h.config.grid.column.colors.length>0)for(var S=h.globals.isBarHorizontal||"on"!==h.config.xaxis.tickPlacement||"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric?r:r-1,M=h.globals.padHorizontal,C=h.globals.padHorizontal+h.globals.gridWidth/S,P=h.globals.gridHeight,F=0,O=0;F<r;F++,O++)O>=h.config.grid.column.colors.length&&(O=0),this._drawGridBandRect({c:O,x1:M,y1:0,x2:C,y2:P,type:"column"}),M+=h.globals.gridWidth/S}}]),V}(),Re=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"niceScale",value:function(r,a){var h,d,f,g,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=1e-11,S=this.w,M=S.globals;M.isBarHorizontal?(h=S.config.xaxis,d=Math.max((M.svgWidth-100)/25,2)):(h=S.config.yaxis[y],d=Math.max((M.svgHeight-100)/15,2)),f=null!=h.min,g=void 0!==h.max&&null!==h.min;var C=null!=h.stepSize,P=null!=h.tickAmount,F=P?h.tickAmount:h.forceNiceScale?M.niceScaleDefaultTicks[Math.min(Math.round(d/2),M.niceScaleDefaultTicks.length-1)]:10;if(M.isMultipleYAxis&&!P&&M.multiAxisTickAmount>0&&(F=M.multiAxisTickAmount,P=!0),F="dataPoints"===F?M.dataPoints-1:Math.abs(Math.round(F)),(r===Number.MIN_VALUE&&0===a||!at.isNumber(r)&&!at.isNumber(a)||r===Number.MIN_VALUE&&a===-Number.MAX_VALUE)&&(r=0,a=F,M.allSeriesCollapsed=!1),r>a){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var O=a;a=r,r=O}else r===a&&(r=0===r?0:r-1,a=0===a?2:a+1);var D=[];F<1&&(F=1);var Y=F,G=Math.abs(a-r);h.forceNiceScale&&(!f&&r>0&&r/G<.15&&(r=0,f=!0),!g&&a<0&&-a/G<.15&&(a=0,g=!0),G=Math.abs(a-r));var U=G/Y,b=U,N=Math.floor(Math.log10(b)),E=Math.pow(10,N),X=Math.ceil(b/E);if(U=b=(X=M.niceScaleAllowedMagMsd[0===M.yValueDecimal?0:1][X])*E,M.isBarHorizontal&&h.stepSize&&"datetime"!==h.type?(U=h.stepSize,C=!0):C&&(U=h.stepSize),C&&h.forceNiceScale){var W=Math.floor(Math.log10(U));U*=Math.pow(10,N-W)}if(f&&g){var Z=G/Y;if(P)if(C)if(0!=at.mod(G,U)){var et=at.getGCD(U,Z);U=Z/et<10?et:Z}else 0==at.mod(U,Z)?U=Z:(Z=U,P=!1);else U=Z;else if(C)0==at.mod(G,U)?Z=U:U=Z;else if(0==at.mod(G,U))Z=U;else{Z=G/(Y=Math.ceil(G/U));var it=at.getGCD(G,U);G/it<d&&(Z=it),U=Z}Y=Math.round(G/U)}else{if(f||g)if(g)if(P)r=a-U*Y;else{var pt=r;r=U*Math.floor(r/U),Math.abs(a-r)/at.getGCD(G,U)>d&&(r=a-U*F,r+=U*Math.floor((pt-r)/U))}else f&&(a=P?r+U*Y:U*Math.ceil(a/U));else if(P){var wt=U/(a-r>a?1:2),xt=wt*Math.floor(r/wt);Math.abs(xt-r)<=wt/2?a=(r=xt)+U*Y:r=(a=wt*Math.ceil(a/wt))-U*Y}else r=U*Math.floor(r/U),a=U*Math.ceil(a/U);G=Math.abs(a-r),U=at.getGCD(G,U),Y=Math.round(G/U)}if(P||f||g||(Y=Math.ceil((G-x)/(U+x)))>16&&at.getPrimeFactors(Y).length<2&&Y++,M.isMultipleYAxis&&0==M.multiAxisTickAmount&&(M.multiAxisTickAmount=Y),Y>d&&(!P&&!C||h.forceNiceScale)){var Ft=at.getPrimeFactors(Y),Nt=Ft.length-1,_t=Y;t:for(var ne=0;ne<Nt;ne++)for(var oe=0;oe<=Nt-ne;oe++){for(var ue=Math.min(oe+ne,Nt),re=_t,ce=1,Le=oe;Le<=ue;Le++)ce*=Ft[Le];if((re/=ce)<d){_t=re;break t}}U=_t===Y?G:G/_t}var Te=r-U,En=U*x;do{D.push(at.stripNumber(Te+=U,7))}while(a-Te>En);return{result:D,niceMin:D[0],niceMax:D[D.length-1]}}},{key:"linearScale",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,g=Math.abs(a-r);"dataPoints"===(h=this._adjustTicksForSmallRange(h,d,g))&&(h=this.w.globals.dataPoints-1),f||(f=g/h),h===Number.MAX_VALUE&&(h=5,f=1);for(var y=[],x=r;h>=0;)y.push(x),x+=f,h-=1;return{result:y,niceMin:y[0],niceMax:y[y.length-1]}}},{key:"logarithmicScaleNice",value:function(r,a,h){a<=0&&(a=Math.max(r,h)),r<=0&&(r=Math.min(a,h));for(var d=[],f=Math.ceil(Math.log(a)/Math.log(h)+1),g=Math.floor(Math.log(r)/Math.log(h));g<f;g++)d.push(Math.pow(h,g));return{result:d,niceMin:d[0],niceMax:d[d.length-1]}}},{key:"logarithmicScale",value:function(r,a,h){a<=0&&(a=Math.max(r,h)),r<=0&&(r=Math.min(a,h));for(var d=[],f=Math.log(a)/Math.log(h),g=Math.log(r)/Math.log(h),y=f-g,x=Math.round(y),S=y/x,M=0,C=g;M<x;M++,C+=S)d.push(Math.pow(h,C));return d.push(Math.pow(h,f)),{result:d,niceMin:r,niceMax:a}}},{key:"_adjustTicksForSmallRange",value:function(r,a,h){var d=r;if(void 0!==a&&this.w.config.yaxis[a].labels.formatter&&void 0===this.w.config.yaxis[a].tickAmount){var f=Number(this.w.config.yaxis[a].labels.formatter(1));at.isNumber(f)&&0===this.w.globals.yValueDecimal&&(d=Math.ceil(h))}return d<r?d:r}},{key:"setYScaleForIndex",value:function(r,a,h){var d=this.w.globals,f=this.w.config,g=d.isBarHorizontal?f.xaxis:f.yaxis[r];void 0===d.yAxisScale[r]&&(d.yAxisScale[r]=[]);var y=Math.abs(h-a);g.logarithmic&&y<=5&&(d.invalidLogScale=!0),g.logarithmic&&y>5?(d.allSeriesCollapsed=!1,d.yAxisScale[r]=g.forceNiceScale?this.logarithmicScaleNice(a,h,g.logBase):this.logarithmicScale(a,h,g.logBase)):h!==-Number.MAX_VALUE&&at.isNumber(h)?(d.allSeriesCollapsed=!1,d.yAxisScale[r]=this.niceScale(a,h,r)):d.yAxisScale[r]=this.linearScale(0,10,10,r,f.yaxis[r].stepSize)}},{key:"setXScale",value:function(r,a){var h=this.w,d=h.globals,f=Math.abs(a-r);return d.xAxisScale=a!==-Number.MAX_VALUE&&at.isNumber(a)?this.linearScale(r,a,h.config.xaxis.tickAmount?h.config.xaxis.tickAmount:f<10&&f>1?f+1:10,0,h.config.xaxis.stepSize):this.linearScale(0,10,10),d.xAxisScale}},{key:"setMultipleYScales",value:function(){var r=this.w.globals,a=this.w.config,h=r.minYArr,d=r.maxYArr,f=[],g=[],y=[];a.series.forEach(function(P,F){y.push(F),g.push(null)});var x,S=[];a.yaxis.forEach(function(P,F){if(P.seriesName){var O=[];Array.isArray(P.seriesName)?O=P.seriesName:O.push(P.seriesName),f[F]=[],O.forEach(function(D){a.series.forEach(function(Y,G){if(Y.name===D){f[F].push(G),g[G]=F;var U=y.indexOf(G);y.splice(U,1)}})})}else S.push(F)});for(var M=0;M<S.length&&(f[x=S[M]]=[],y);M++){var C=y[0];y.shift(),f[x].push(C),g[C]=x}x&&y.forEach(function(P){f[x].push(P),g[P]=x}),r.seriesYAxisMap=f.map(function(P){return P}),r.seriesYAxisReverseMap=g.map(function(P){return P}),this.sameScaleInMultipleAxes(h,d,f)}},{key:"sameScaleInMultipleAxes",value:function(r,a,h){var d=this,f=this.w.config,g=this.w.globals,y=[];h.forEach(function(S,M){for(var C=M+1;C<h.length;C++){var P,F=dr(S.values());try{for(F.s();!(P=F.n()).done;){var D=h[C].indexOf(P.value);-1!==D&&(S.push(C),h[C].splice(D,1))}}catch(Y){F.e(Y)}finally{F.f()}h[C].length<1&&-1===y.indexOf(C)&&y.push(C)}});for(var x=y.length-1;x>=0;x--)h.splice(y[x],1);h.forEach(function(S,M){var C=Number.MAX_VALUE,P=-Number.MAX_VALUE;if(f.chart.stacked){for(var F=g.seriesX[S[0]].map(function(W){return Number.MIN_VALUE}),O=g.seriesX[S[0]].map(function(W){return Number.MIN_VALUE}),D=g.seriesX[S[0]].map(function(W){return Number.MIN_VALUE}),Y=f.series[S[0]].type,G=0;G<S.length;G++){var U=S[G];if(-1===g.collapsedSeriesIndices.indexOf(U))for(var b=0;b<g.series[U].length;b++){var N=g.series[U][b];N>=0?O[b]+=N:D[b]+=N,F[b]+=N}}"bar"===Y?(C=Math.min.apply(null,D),P=Math.max.apply(null,O)):(C=Math.min.apply(null,F),P=Math.max.apply(null,F))}else{for(var E=0;E<S.length;E++)C=Math.min(C,r[S[E]]);for(var X=0;X<S.length;X++)P=Math.max(P,a[S[X]])}void 0!==f.yaxis[M].min&&(C="function"==typeof f.yaxis[M].min?f.yaxis[M].min(C):f.yaxis[M].min),void 0!==f.yaxis[M].max&&(P="function"==typeof f.yaxis[M].max?f.yaxis[M].max(P):f.yaxis[M].max),d.setYScaleForIndex(M,C,P),S.forEach(function(W){r[W]=g.yAxisScale[M].niceMin,a[W]=g.yAxisScale[M].niceMax})})}}]),V}(),ei=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.scales=new Re(r)}return Dt(V,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=this.w.config,g=this.w.globals,y=-Number.MAX_VALUE,x=Number.MIN_VALUE;null===d&&(d=r+1);var S=0,M=0,C=void 0;if(g.seriesX.length>=d){var P,F;S=0,M=(C=hn(new Set((P=[]).concat.apply(P,hn(g.seriesX.slice(r,d)))))).length-1;var O=null===(F=g.brushSource)||void 0===F?void 0:F.w.config.chart.brush;if(f.chart.zoom.enabled&&f.chart.zoom.autoScaleYaxis||null!=O&&O.enabled&&null!=O&&O.autoScaleYaxis){if(f.xaxis.min)for(S=0;S<M&&C[S]<=f.xaxis.min;S++);if(f.xaxis.max)for(;M>S&&C[M]>=f.xaxis.max;M--);}}var D=g.series,Y=D,G=D;"candlestick"===f.chart.type?(Y=g.seriesCandleL,G=g.seriesCandleH):"boxPlot"===f.chart.type?(Y=g.seriesCandleO,G=g.seriesCandleC):g.isRangeData&&(Y=g.seriesRangeStart,G=g.seriesRangeEnd);for(var U=r;U<d;U++){g.dataPoints=Math.max(g.dataPoints,D[U].length);var b=f.series[U].type;g.categoryLabels.length&&(g.dataPoints=g.categoryLabels.filter(function(X){return void 0!==X}).length),g.labels.length&&"datetime"!==f.xaxis.type&&0!==g.series.reduce(function(X,W){return X+W.length},0)&&(g.dataPoints=Math.max(g.dataPoints,g.labels.length)),C||(S=0,M=g.series[U].length);for(var N=S;N<=M&&N<g.series[U].length;N++){var E=D[U][N];if(null!==E&&at.isNumber(E)){switch(void 0!==G[U][N]&&(y=Math.max(y,G[U][N]),a=Math.min(a,G[U][N])),void 0!==Y[U][N]&&(a=Math.min(a,Y[U][N]),h=Math.max(h,Y[U][N])),b){case"candlestick":void 0!==g.seriesCandleC[U][N]&&(y=Math.max(y,g.seriesCandleH[U][N]),a=Math.min(a,g.seriesCandleL[U][N]));case"boxPlot":void 0!==g.seriesCandleC[U][N]&&(y=Math.max(y,g.seriesCandleC[U][N]),a=Math.min(a,g.seriesCandleO[U][N]))}b&&"candlestick"!==b&&"boxPlot"!==b&&"rangeArea"!==b&&"rangeBar"!==b&&(y=Math.max(y,g.series[U][N]),a=Math.min(a,g.series[U][N])),h=y,g.seriesGoals[U]&&g.seriesGoals[U][N]&&Array.isArray(g.seriesGoals[U][N])&&g.seriesGoals[U][N].forEach(function(X){x!==Number.MIN_VALUE&&(x=Math.min(x,X.value),a=x),y=Math.max(y,X.value),h=y}),at.isFloat(E)&&(E=at.noExponents(E),g.yValueDecimal=Math.max(g.yValueDecimal,E.toString().split(".")[1].length)),x>Y[U][N]&&Y[U][N]<0&&(x=Y[U][N])}else g.hasNullValues=!0}"bar"!==b&&"column"!==b||(x<0&&y<0&&(y=0,h=Math.max(h,0)),x===Number.MIN_VALUE&&(x=0,a=Math.min(a,0)))}return"rangeBar"===f.chart.type&&g.seriesRangeStart.length&&g.isBarHorizontal&&(x=a),"bar"===f.chart.type&&(x<0&&y<0&&(y=0),x===Number.MIN_VALUE&&(x=0)),{minY:x,maxY:y,lowestY:a,highestY:h}}},{key:"setYRange",value:function(){var r=this.w.globals,a=this.w.config;r.maxY=-Number.MAX_VALUE,r.minY=Number.MIN_VALUE;var h,d=Number.MAX_VALUE;if(r.isMultipleYAxis){d=Number.MAX_VALUE;for(var f=0;f<r.series.length;f++)h=this.getMinYMaxY(f),r.minYArr[f]=h.lowestY,r.maxYArr[f]=h.highestY,d=Math.min(d,h.lowestY)}return h=this.getMinYMaxY(0,d,null,r.series.length),"bar"===a.chart.type?(r.minY=h.minY,r.maxY=h.maxY):(r.minY=h.lowestY,r.maxY=h.highestY),d=h.lowestY,a.chart.stacked&&this._setStackedMinMax(),"line"===a.chart.type||"area"===a.chart.type||"scatter"===a.chart.type||"candlestick"===a.chart.type||"boxPlot"===a.chart.type||"rangeBar"===a.chart.type&&!r.isBarHorizontal?r.minY===Number.MIN_VALUE&&d!==-Number.MAX_VALUE&&d!==r.maxY&&(r.minY=d):r.minY=h.minY,a.yaxis.forEach(function(g,y){void 0!==g.max&&("number"==typeof g.max?r.maxYArr[y]=g.max:"function"==typeof g.max&&(r.maxYArr[y]=g.max(r.isMultipleYAxis?r.maxYArr[y]:r.maxY)),r.maxY=r.maxYArr[y]),void 0!==g.min&&("number"==typeof g.min?r.minYArr[y]=g.min:"function"==typeof g.min&&(r.minYArr[y]=g.min(r.isMultipleYAxis?r.minYArr[y]===Number.MIN_VALUE?0:r.minYArr[y]:r.minY)),r.minY=r.minYArr[y])}),r.isBarHorizontal&&["min","max"].forEach(function(g){void 0!==a.xaxis[g]&&"number"==typeof a.xaxis[g]&&("min"===g?r.minY=a.xaxis[g]:r.maxY=a.xaxis[g])}),r.isMultipleYAxis?(this.scales.setMultipleYScales(),r.minY=d):(this.scales.setYScaleForIndex(0,r.minY,r.maxY),r.minY=r.yAxisScale[0].niceMin,r.maxY=r.yAxisScale[0].niceMax,r.minYArr[0]=r.yAxisScale[0].niceMin,r.maxYArr[0]=r.yAxisScale[0].niceMax,r.seriesYAxisMap=[r.series.map(function(g,y){return y})],r.seriesYAxisReverseMap=r.series.map(function(g,y){return 0})),{minY:r.minY,maxY:r.maxY,minYArr:r.minYArr,maxYArr:r.maxYArr,yAxisScale:r.yAxisScale}}},{key:"setXRange",value:function(){var r=this.w.globals,a=this.w.config,h="numeric"===a.xaxis.type||"datetime"===a.xaxis.type||"category"===a.xaxis.type&&!r.noLabelsProvided||r.noLabelsProvided||r.isXNumeric;if(r.isXNumeric&&function(){for(var y=0;y<r.series.length;y++)if(r.labels[y])for(var x=0;x<r.labels[y].length;x++)null!==r.labels[y][x]&&at.isNumber(r.labels[y][x])&&(r.maxX=Math.max(r.maxX,r.labels[y][x]),r.initialMaxX=Math.max(r.maxX,r.labels[y][x]),r.minX=Math.min(r.minX,r.labels[y][x]),r.initialMinX=Math.min(r.minX,r.labels[y][x]))}(),r.noLabelsProvided&&0===a.xaxis.categories.length&&(r.maxX=r.labels[r.labels.length-1],r.initialMaxX=r.labels[r.labels.length-1],r.minX=1,r.initialMinX=1),r.isXNumeric||r.noLabelsProvided||r.dataFormatXNumeric){var d;if(void 0===a.xaxis.tickAmount?(d=Math.round(r.svgWidth/150),"numeric"===a.xaxis.type&&r.dataPoints<30&&(d=r.dataPoints-1),d>r.dataPoints&&0!==r.dataPoints&&(d=r.dataPoints-1)):"dataPoints"===a.xaxis.tickAmount?(r.series.length>1&&(d=r.series[r.maxValsInArrayIndex].length-1),r.isXNumeric&&(d=r.maxX-r.minX-1)):d=a.xaxis.tickAmount,r.xTickAmount=d,void 0!==a.xaxis.max&&"number"==typeof a.xaxis.max&&(r.maxX=a.xaxis.max),void 0!==a.xaxis.min&&"number"==typeof a.xaxis.min&&(r.minX=a.xaxis.min),void 0!==a.xaxis.range&&(r.minX=r.maxX-a.xaxis.range),r.minX!==Number.MAX_VALUE&&r.maxX!==-Number.MAX_VALUE)if(a.xaxis.convertedCatToNumeric&&!r.dataFormatXNumeric){for(var f=[],g=r.minX-1;g<r.maxX;g++)f.push(g+1);r.xAxisScale={result:f,niceMin:f[0],niceMax:f[f.length-1]}}else r.xAxisScale=this.scales.setXScale(r.minX,r.maxX);else r.xAxisScale=this.scales.linearScale(0,d,d,0,a.xaxis.stepSize),r.noLabelsProvided&&r.labels.length>0&&(r.xAxisScale=this.scales.linearScale(1,r.labels.length,d-1,0,a.xaxis.stepSize),r.seriesX=r.labels.slice());h&&(r.labels=r.xAxisScale.result.slice())}return r.isBarHorizontal&&r.labels.length&&(r.xTickAmount=r.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:r.minX,maxX:r.maxX}}},{key:"setZRange",value:function(){var r=this.w.globals;if(r.isDataXYZ)for(var a=0;a<r.series.length;a++)if(void 0!==r.seriesZ[a])for(var h=0;h<r.seriesZ[a].length;h++)null!==r.seriesZ[a][h]&&at.isNumber(r.seriesZ[a][h])&&(r.maxZ=Math.max(r.maxZ,r.seriesZ[a][h]),r.minZ=Math.min(r.minZ,r.seriesZ[a][h]))}},{key:"_handleSingleDataPoint",value:function(){var r=this.w.globals,a=this.w.config;if(r.minX===r.maxX){var h=new Xt(this.ctx);if("datetime"===a.xaxis.type){var d=h.getDate(r.minX);a.xaxis.labels.datetimeUTC?d.setUTCDate(d.getUTCDate()-2):d.setDate(d.getDate()-2),r.minX=new Date(d).getTime();var f=h.getDate(r.maxX);a.xaxis.labels.datetimeUTC?f.setUTCDate(f.getUTCDate()+2):f.setDate(f.getDate()+2),r.maxX=new Date(f).getTime()}else("numeric"===a.xaxis.type||"category"===a.xaxis.type&&!r.noLabelsProvided)&&(r.minX=r.minX-2,r.initialMinX=r.minX,r.maxX=r.maxX+2,r.initialMaxX=r.maxX)}}},{key:"_getMinXDiff",value:function(){var r=this.w.globals;r.isXNumeric&&r.seriesX.forEach(function(a,h){1===a.length&&a.push(r.seriesX[r.maxValsInArrayIndex][r.seriesX[r.maxValsInArrayIndex].length-1]);var d=a.slice();d.sort(function(f,g){return f-g}),d.forEach(function(f,g){if(g>0){var y=f-d[g-1];y>0&&(r.minXDiff=Math.min(y,r.minXDiff))}}),1!==r.dataPoints&&r.minXDiff!==Number.MAX_VALUE||(r.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var r=this,a=this.w.globals;if(a.series.length){var h=a.seriesGroups;h.length||(h=[this.w.config.series.map(function(g){return g.name})]);var d={},f={};h.forEach(function(g){d[g]=[],f[g]=[],r.w.config.series.map(function(y,x){return g.indexOf(y.name)>-1?x:null}).filter(function(y){return null!==y}).forEach(function(y){for(var x=0;x<a.series[a.maxValsInArrayIndex].length;x++){var S,M;void 0===d[g][x]&&(d[g][x]=0,f[g][x]=0),(r.w.config.chart.stacked&&!a.comboCharts||r.w.config.chart.stacked&&a.comboCharts&&(!r.w.config.chart.stackOnlyBar||"bar"===(null===(S=r.w.config.series)||void 0===S||null===(M=S[y])||void 0===M?void 0:M.type)))&&null!==a.series[y][x]&&at.isNumber(a.series[y][x])&&(a.series[y][x]>0?d[g][x]+=parseFloat(a.series[y][x])+1e-4:f[g][x]+=parseFloat(a.series[y][x]))}})}),Object.entries(d).forEach(function(g){var y=uu(g,1)[0];d[y].forEach(function(x,S){a.maxY=Math.max(a.maxY,d[y][S]),a.minY=Math.min(a.minY,f[y][S])})})}}}]),V}(),dt=function(){function V(r,a){zt(this,V),this.ctx=r,this.elgrid=a,this.w=r.w;var h=this.w;this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.axisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===h.config.xaxis.position&&(this.xAxisoffX=h.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new bs(r)}return Dt(V,[{key:"drawYaxis",value:function(r){var a=this,h=this.w,d=new Q(this.ctx),f=h.config.yaxis[r].labels.style,g=f.fontSize,y=f.fontFamily,x=f.fontWeight,S=d.group({class:"apexcharts-yaxis",rel:r,transform:"translate("+h.globals.translateYAxisX[r]+", 0)"});if(this.axesUtils.isYAxisHidden(r))return S;var M=d.group({class:"apexcharts-yaxis-texts-g"});S.add(M);var C=h.globals.yAxisScale[r].result.length-1,P=h.globals.gridHeight/C,F=h.globals.translateY,O=h.globals.yLabelFormatters[r],D=h.globals.yAxisScale[r].result.slice();D=this.axesUtils.checkForReversedLabels(r,D);var Y="";if(h.config.yaxis[r].labels.show)for(var G=function(et){var it=D[et];it=O(it,et,h);var pt=h.config.yaxis[r].labels.padding;h.config.yaxis[r].opposite&&0!==h.config.yaxis.length&&(pt*=-1);var wt="end";h.config.yaxis[r].opposite&&(wt="start"),"left"===h.config.yaxis[r].labels.align?wt="start":"center"===h.config.yaxis[r].labels.align?wt="middle":"right"===h.config.yaxis[r].labels.align&&(wt="end");var xt=a.axesUtils.getYAxisForeColor(f.colors,r),Ft=h.config.yaxis[r].labels.offsetY;"heatmap"===h.config.chart.type&&(Ft-=(h.globals.gridHeight/h.globals.series.length-1)/2);var Nt=d.drawText({x:pt,y:F+C/10+Ft+1,text:it,textAnchor:wt,fontSize:g,fontFamily:y,fontWeight:x,maxWidth:h.config.yaxis[r].labels.maxWidth,foreColor:Array.isArray(xt)?xt[et]:xt,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+f.cssClass});et===C&&(Y=Nt),M.add(Nt);var _t=document.createElementNS(h.globals.SVGNS,"title");if(_t.textContent=Array.isArray(it)?it.join(" "):it,Nt.node.appendChild(_t),0!==h.config.yaxis[r].labels.rotate){var ne=d.rotateAroundCenter(Y.node),oe=d.rotateAroundCenter(Nt.node);Nt.node.setAttribute("transform","rotate(".concat(h.config.yaxis[r].labels.rotate," ").concat(ne.x," ").concat(oe.y,")"))}F+=P},U=C;U>=0;U--)G(U);if(void 0!==h.config.yaxis[r].title.text){var b=d.group({class:"apexcharts-yaxis-title"}),N=0;h.config.yaxis[r].opposite&&(N=h.globals.translateYAxisX[r]);var E=d.drawText({x:N,y:h.globals.gridHeight/2+h.globals.translateY+h.config.yaxis[r].title.offsetY,text:h.config.yaxis[r].title.text,textAnchor:"end",foreColor:h.config.yaxis[r].title.style.color,fontSize:h.config.yaxis[r].title.style.fontSize,fontWeight:h.config.yaxis[r].title.style.fontWeight,fontFamily:h.config.yaxis[r].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[r].title.style.cssClass});b.add(E),S.add(b)}var X=h.config.yaxis[r].axisBorder,W=31+X.offsetX;if(h.config.yaxis[r].opposite&&(W=-31-X.offsetX),X.show){var Z=d.drawLine(W,h.globals.translateY+X.offsetY-2,W,h.globals.gridHeight+h.globals.translateY+X.offsetY+2,X.color,0,X.width);S.add(Z)}return h.config.yaxis[r].axisTicks.show&&this.axesUtils.drawYAxisTicks(W,C,X,h.config.yaxis[r].axisTicks,r,P,S),S}},{key:"drawYaxisInversed",value:function(r){var a=this.w,h=new Q(this.ctx),d=h.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),f=h.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(a.globals.translateXAxisX,", ").concat(a.globals.translateXAxisY,")")});d.add(f);var g=a.globals.yAxisScale[r].result.length-1,y=a.globals.gridWidth/g+.1,x=y+a.config.xaxis.labels.offsetX,S=a.globals.xLabelFormatter,M=a.globals.yAxisScale[r].result.slice(),C=a.globals.timescaleLabels;C.length>0&&(this.xaxisLabels=C.slice(),g=(M=C.slice()).length),M=this.axesUtils.checkForReversedLabels(r,M);var P=C.length;if(a.config.xaxis.labels.show)for(var F=P?0:g;P?F<P:F>=0;P?F++:F--){var O=M[F];O=S(O,F,a);var D=a.globals.gridWidth+a.globals.padHorizontal-(x-y+a.config.xaxis.labels.offsetX);if(C.length){var Y=this.axesUtils.getLabel(M,C,D,F,this.drawnLabels,this.xaxisFontSize);D=Y.x,O=Y.text,this.drawnLabels.push(Y.text),0===F&&a.globals.skipFirstTimelinelabel&&(O=""),F===M.length-1&&a.globals.skipLastTimelinelabel&&(O="")}var G=h.drawText({x:D,y:this.xAxisoffX+a.config.xaxis.labels.offsetY+30-("top"===a.config.xaxis.position?a.globals.xAxisHeight+a.config.xaxis.axisTicks.height-2:0),text:O,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[r]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:a.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+a.config.xaxis.labels.style.cssClass});f.add(G),G.tspan(O);var U=document.createElementNS(a.globals.SVGNS,"title");U.textContent=O,G.node.appendChild(U),x+=y}return this.inversedYAxisTitleText(d),this.inversedYAxisBorder(d),d}},{key:"inversedYAxisBorder",value:function(r){var a=this.w,h=new Q(this.ctx),d=a.config.xaxis.axisBorder;if(d.show){var f=0;"bar"===a.config.chart.type&&a.globals.isXNumeric&&(f-=15);var g=h.drawLine(a.globals.padHorizontal+f+d.offsetX,this.xAxisoffX,a.globals.gridWidth,this.xAxisoffX,d.color,0,d.height);this.elgrid&&this.elgrid.elGridBorders&&a.config.grid.show?this.elgrid.elGridBorders.add(g):r.add(g)}}},{key:"inversedYAxisTitleText",value:function(r){var a=this.w,h=new Q(this.ctx);if(void 0!==a.config.xaxis.title.text){var d=h.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),f=h.drawText({x:a.globals.gridWidth/2+a.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(a.config.xaxis.title.style.fontSize)+a.config.xaxis.title.offsetY+20,text:a.config.xaxis.title.text,textAnchor:"middle",fontSize:a.config.xaxis.title.style.fontSize,fontFamily:a.config.xaxis.title.style.fontFamily,fontWeight:a.config.xaxis.title.style.fontWeight,foreColor:a.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+a.config.xaxis.title.style.cssClass});d.add(f),r.add(d)}}},{key:"yAxisTitleRotate",value:function(r,a){var h=this.w,d=new Q(this.ctx),f={width:0,height:0},g={width:0,height:0},y=h.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-texts-g"));null!==y&&(f=y.getBoundingClientRect());var x=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-title text"));if(null!==x&&(g=x.getBoundingClientRect()),null!==x){var S=this.xPaddingForYAxisTitle(r,f,g,a);x.setAttribute("x",S.xPos-(a?10:0))}if(null!==x){var M=d.rotateAroundCenter(x);x.setAttribute("transform","rotate(".concat(a?-1*h.config.yaxis[r].title.rotate:h.config.yaxis[r].title.rotate," ").concat(M.x," ").concat(M.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(r,a,h,d){var f=this.w,g=0,y=0,x=10;return void 0===f.config.yaxis[r].title.text||r<0?{xPos:y,padd:0}:(d?(y=a.width+f.config.yaxis[r].title.offsetX+h.width/2+x/2,0===(g+=1)&&(y-=x/2)):(y=-1*a.width+f.config.yaxis[r].title.offsetX+x/2+h.width/2,f.globals.isBarHorizontal&&(y=-1*a.width-f.config.yaxis[r].title.offsetX-(x=25))),{xPos:y,padd:x})}},{key:"setYAxisXPosition",value:function(r,a){var h=this.w,d=0,f=0,g=18,y=1;h.config.yaxis.length>1&&(this.multipleYs=!0),h.config.yaxis.map(function(x,S){var M=h.globals.ignoreYAxisIndexes.indexOf(S)>-1||!x.show||x.floating||0===r[S].width,C=r[S].width+a[S].width;x.opposite?h.globals.isBarHorizontal?h.globals.translateYAxisX[S]=(f=h.globals.gridWidth+h.globals.translateX-1)-x.labels.offsetX:(f=h.globals.gridWidth+h.globals.translateX+y,M||(y=y+C+20),h.globals.translateYAxisX[S]=f-x.labels.offsetX+20):(d=h.globals.translateX-g,M||(g=g+C+20),h.globals.translateYAxisX[S]=d+x.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(a=at.listToArray(a)).forEach(function(h,d){var f=r.config.yaxis[d];if(f&&!f.floating&&void 0!==f.labels.align){var g=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-texts-g")),y=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-label"));y=at.listToArray(y);var x=g.getBoundingClientRect();"left"===f.labels.align?(y.forEach(function(S,M){S.setAttribute("text-anchor","start")}),f.opposite||g.setAttribute("transform","translate(-".concat(x.width,", 0)"))):"center"===f.labels.align?(y.forEach(function(S,M){S.setAttribute("text-anchor","middle")}),g.setAttribute("transform","translate(".concat(x.width/2*(f.opposite?1:-1),", 0)"))):"right"===f.labels.align&&(y.forEach(function(S,M){S.setAttribute("text-anchor","end")}),f.opposite&&g.setAttribute("transform","translate(".concat(x.width,", 0)")))}})}}]),V}(),ai=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.documentEvent=at.bind(this.documentEvent,this)}return Dt(V,[{key:"addEventListener",value:function(r,a){var h=this.w;h.globals.events.hasOwnProperty(r)?h.globals.events[r].push(a):h.globals.events[r]=[a]}},{key:"removeEventListener",value:function(r,a){var h=this.w;if(h.globals.events.hasOwnProperty(r)){var d=h.globals.events[r].indexOf(a);-1!==d&&h.globals.events[r].splice(d,1)}}},{key:"fireEvent",value:function(r,a){var h=this.w;if(h.globals.events.hasOwnProperty(r)){a&&a.length||(a=[]);for(var d=h.globals.events[r],f=d.length,g=0;g<f;g++)d[g].apply(null,a)}}},{key:"setupEventHandlers",value:function(){var r=this,a=this.w,h=this.ctx,d=a.globals.dom.baseEl.querySelector(a.globals.chartClass);this.ctx.eventList.forEach(function(f){d.addEventListener(f,function(g){var y=Object.assign({},a,{seriesIndex:a.globals.capturedSeriesIndex,dataPointIndex:a.globals.capturedDataPointIndex});"mousemove"===g.type||"touchmove"===g.type?"function"==typeof a.config.chart.events.mouseMove&&a.config.chart.events.mouseMove(g,h,y):"mouseleave"===g.type||"touchleave"===g.type?"function"==typeof a.config.chart.events.mouseLeave&&a.config.chart.events.mouseLeave(g,h,y):("mouseup"===g.type&&1===g.which||"touchend"===g.type)&&("function"==typeof a.config.chart.events.click&&a.config.chart.events.click(g,h,y),h.ctx.events.fireEvent("click",[g,h,y]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(f){a.globals.dom.baseEl.addEventListener(f,r.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(r){var a=this.w,h=r.target.className;if("click"===r.type){var d=a.globals.dom.baseEl.querySelector(".apexcharts-menu");d&&d.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==h&&d.classList.remove("apexcharts-menu-open")}a.globals.clientX="touchmove"===r.type?r.touches[0].clientX:r.clientX,a.globals.clientY="touchmove"===r.type?r.touches[0].clientY:r.clientY}}]),V}(),ht=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"setCurrentLocaleValues",value:function(r){var a=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(a=this.w.config.chart.locales.concat(window.Apex.chart.locales));var h=a.filter(function(f){return f.name===r})[0];if(!h)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var d=at.extend(Ro,h);this.w.globals.locale=d.options}}]),V}(),Ye=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"drawAxis",value:function(r,a){var h,d,f=this,g=this.w.globals,y=this.w.config,x=new Ii(this.ctx,a),S=new dt(this.ctx,a);g.axisCharts&&"radar"!==r&&(g.isBarHorizontal?(d=S.drawYaxisInversed(0),h=x.drawXaxisInversed(0),g.dom.elGraphical.add(h),g.dom.elGraphical.add(d)):(h=x.drawXaxis(),g.dom.elGraphical.add(h),y.yaxis.map(function(M,C){if(-1===g.ignoreYAxisIndexes.indexOf(C)&&(d=S.drawYaxis(C),g.dom.Paper.add(d),"back"===f.w.config.grid.position)){var P=g.dom.Paper.children()[1];P.remove(),g.dom.Paper.add(P)}})))}}]),V}(),Vs=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"drawXCrosshairs",value:function(){var r=this.w,a=new Q(this.ctx),h=new Ve(this.ctx),d=r.config.xaxis.crosshairs.fill.gradient,f=r.config.xaxis.crosshairs.dropShadow,P=f.enabled,F=f.left,O=f.top,D=f.blur,Y=f.color,G=f.opacity,U=r.config.xaxis.crosshairs.fill.color;if(r.config.xaxis.crosshairs.show){"gradient"===r.config.xaxis.crosshairs.fill.type&&(U=a.drawGradient("vertical",d.colorFrom,d.colorTo,d.opacityFrom,d.opacityTo,null,d.stops,null));var b=a.drawRect();1===r.config.xaxis.crosshairs.width&&(b=a.drawLine());var N=r.globals.gridHeight;(!at.isNumber(N)||N<0)&&(N=0);var E=r.config.xaxis.crosshairs.width;(!at.isNumber(E)||E<0)&&(E=0),b.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:N,width:E,height:N,fill:U,filter:"none","fill-opacity":r.config.xaxis.crosshairs.opacity,stroke:r.config.xaxis.crosshairs.stroke.color,"stroke-width":r.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":r.config.xaxis.crosshairs.stroke.dashArray}),P&&(b=h.dropShadow(b,{left:F,top:O,blur:D,color:Y,opacity:G})),r.globals.dom.elGraphical.add(b)}}},{key:"drawYCrosshairs",value:function(){var r=this.w,a=new Q(this.ctx),h=r.config.yaxis[0].crosshairs,d=r.globals.barPadForNumericAxis;if(r.config.yaxis[0].crosshairs.show){var f=a.drawLine(-d,0,r.globals.gridWidth+d,0,h.stroke.color,h.stroke.dashArray,h.stroke.width);f.attr({class:"apexcharts-ycrosshairs"}),r.globals.dom.elGraphical.add(f)}var g=a.drawLine(-d,0,r.globals.gridWidth+d,0,h.stroke.color,0,0);g.attr({class:"apexcharts-ycrosshairs-hidden"}),r.globals.dom.elGraphical.add(g)}}]),V}(),pi=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"checkResponsiveConfig",value:function(r){var a=this,h=this.w,d=h.config;if(0!==d.responsive.length){var f=d.responsive.slice();f.sort(function(S,M){return S.breakpoint>M.breakpoint?1:M.breakpoint>S.breakpoint?-1:0}).reverse();var g=new Gi({}),y=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=window.innerWidth>0?window.innerWidth:screen.width;if(C>f[0].breakpoint){var P=Lt.extendArrayProps(g,h.globals.initialConfig,h);S=at.extend(P,S),S=at.extend(h.config,S),a.overrideResponsiveOptions(S)}else for(var F=0;F<f.length;F++)C<f[F].breakpoint&&(S=Lt.extendArrayProps(g,f[F].options,h),S=at.extend(h.config,S),a.overrideResponsiveOptions(S))};if(r){var x=Lt.extendArrayProps(g,r,h);x=at.extend(h.config,x),y(x=at.extend(x,r))}else y({})}}},{key:"overrideResponsiveOptions",value:function(r){var a=new Gi(r).init({responsiveOverride:!0});this.w.config=a}}]),V}(),Ho=function(){function V(r){zt(this,V),this.ctx=r,this.colors=[],this.w=r.w;var a=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===a.config.chart.type&&a.config.plotOptions.treemap.distributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.distributed,this.isBarDistributed=a.config.plotOptions.bar.distributed&&("bar"===a.config.chart.type||"rangeBar"===a.config.chart.type)}return Dt(V,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var r,a=this,h=this.w,d=new at;if(h.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(h.config.theme.mode)),void 0===h.config.colors||0===(null===(r=h.config.colors)||void 0===r?void 0:r.length)?h.globals.colors=this.predefined():(h.globals.colors=h.config.colors,Array.isArray(h.config.colors)&&h.config.colors.length>0&&"function"==typeof h.config.colors[0]&&(h.globals.colors=h.config.series.map(function(O,D){var Y=h.config.colors[D];return Y||(Y=h.config.colors[0]),"function"==typeof Y?(a.isColorFn=!0,Y({value:h.globals.axisCharts?h.globals.series[D][0]?h.globals.series[D][0]:0:h.globals.series[D],seriesIndex:D,dataPointIndex:D,w:h})):Y}))),h.globals.seriesColors.map(function(O,D){O&&(h.globals.colors[D]=O)}),h.config.theme.monochrome.enabled){var f=[],g=h.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(g=h.globals.series[0].length*h.globals.series.length);for(var y=h.config.theme.monochrome.color,x=1/(g/h.config.theme.monochrome.shadeIntensity),S=h.config.theme.monochrome.shadeTo,M=0,C=0;C<g;C++){var P=void 0;"dark"===S?(P=d.shadeColor(-1*M,y),M+=x):(P=d.shadeColor(M,y),M+=x),f.push(P)}h.globals.colors=f.slice()}var F=h.globals.colors.slice();this.pushExtraColors(h.globals.colors),["fill","stroke"].forEach(function(O){h.globals[O].colors=void 0===h.config[O].colors?a.isColorFn?h.config.colors:F:h.config[O].colors.slice(),a.pushExtraColors(h.globals[O].colors)}),h.globals.dataLabels.style.colors=void 0===h.config.dataLabels.style.colors?F:h.config.dataLabels.style.colors.slice(),this.pushExtraColors(h.globals.dataLabels.style.colors,50),h.globals.radarPolygons.fill.colors=void 0===h.config.plotOptions.radar.polygons.fill.colors?["dark"===h.config.theme.mode?"#424242":"none"]:h.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(h.globals.radarPolygons.fill.colors,20),h.globals.markers.colors=void 0===h.config.markers.colors?F:h.config.markers.colors.slice(),this.pushExtraColors(h.globals.markers.colors)}},{key:"pushExtraColors",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=this.w,f=a||d.globals.series.length;if(null===h&&(h=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===d.config.chart.type&&d.config.plotOptions.heatmap.colorScale.inverse),h&&d.globals.series.length&&(f=d.globals.series[d.globals.maxValsInArrayIndex].length*d.globals.series.length),r.length<f)for(var g=f-r.length,y=0;y<g;y++)r.push(r[y])}},{key:"updateThemeOptions",value:function(r){r.chart=r.chart||{},r.tooltip=r.tooltip||{};var a=r.theme.mode||"light",h=r.theme.palette?r.theme.palette:"dark"===a?"palette4":"palette1",d=r.chart.foreColor?r.chart.foreColor:"dark"===a?"#f6f7f8":"#373d3f";return r.tooltip.theme=a,r.chart.foreColor=d,r.theme.palette=h,r}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),V}(),si=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(r){var a=this.w,h="title"===r?a.config.title:a.config.subtitle,d=a.globals.svgWidth/2,f=h.offsetY,g="middle";if("left"===h.align?(d=10,g="start"):"right"===h.align&&(d=a.globals.svgWidth-10,g="end"),d+=h.offsetX,f=f+parseInt(h.style.fontSize,10)+h.margin/2,void 0!==h.text){var y=new Q(this.ctx).drawText({x:d,y:f,text:h.text,textAnchor:g,fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight,foreColor:h.style.color,opacity:1});y.node.setAttribute("class","apexcharts-".concat(r,"-text")),a.globals.dom.Paper.add(y)}}}]),V}(),ve=function(){function V(r){zt(this,V),this.w=r.w,this.dCtx=r}return Dt(V,[{key:"getTitleSubtitleCoords",value:function(r){var a=this.w,h=0,d=0,f="title"===r?a.config.title.floating:a.config.subtitle.floating,g=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-text"));if(null!==g&&!f){var y=g.getBoundingClientRect();h=y.width,d=a.globals.axisCharts?y.height+5:y.height}return{width:h,height:d}}},{key:"getLegendsRect",value:function(){var r=this.w,a=r.globals.dom.elLegendWrap;r.config.legend.height||"top"!==r.config.legend.position&&"bottom"!==r.config.legend.position||(a.style.maxHeight=r.globals.svgHeight/2+"px");var h=Object.assign({},at.getBoundingClientRect(a));return this.dCtx.lgRect=null!==a&&!r.config.legend.floating&&r.config.legend.show?{x:h.x,y:h.y,height:h.height,width:0===h.height?0:h.width}:{x:0,y:0,height:0,width:0},"left"!==r.config.legend.position&&"right"!==r.config.legend.position||1.5*this.dCtx.lgRect.width>r.globals.svgWidth&&(this.dCtx.lgRect.width=r.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(r,a){var h=r;if(this.w.globals.isMultiLineX){var d=a.map(function(g,y){return Array.isArray(g)?g.length:1}),f=Math.max.apply(Math,hn(d));h=a[d.indexOf(f)]}return h}}]),V}(),li=function(){function V(r){zt(this,V),this.w=r.w,this.dCtx=r}return Dt(V,[{key:"getxAxisLabelsCoords",value:function(){var r,a=this.w,h=a.globals.labels.slice();if(a.config.xaxis.convertedCatToNumeric&&0===h.length&&(h=a.globals.categoryLabels),a.globals.timescaleLabels.length>0){var d=this.getxAxisTimeScaleLabelsCoords();r={width:d.width,height:d.height},a.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==a.config.legend.position&&"right"!==a.config.legend.position||a.config.legend.floating?0:this.dCtx.lgRect.width;var f=a.globals.xLabelFormatter,g=at.getLargestStringFromArr(h),y=this.dCtx.dimHelpers.getLargestStringFromMultiArr(g,h);a.globals.isBarHorizontal&&(y=g=a.globals.yAxisScale[0].result.reduce(function(O,D){return O.length>D.length?O:D},0));var x=new Zt(this.dCtx.ctx),S=g;g=x.xLabelFormat(f,g,S,{i:void 0,dateFormatter:new Xt(this.dCtx.ctx).formatDate,w:a}),y=x.xLabelFormat(f,y,S,{i:void 0,dateFormatter:new Xt(this.dCtx.ctx).formatDate,w:a}),(a.config.xaxis.convertedCatToNumeric&&void 0===g||""===String(g).trim())&&(y=g="1");var M=new Q(this.dCtx.ctx),C=M.getTextRects(g,a.config.xaxis.labels.style.fontSize),P=C;if(g!==y&&(P=M.getTextRects(y,a.config.xaxis.labels.style.fontSize)),(r={width:C.width>=P.width?C.width:P.width,height:C.height>=P.height?C.height:P.height}).width*h.length>a.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==a.config.xaxis.labels.rotate||a.config.xaxis.labels.rotateAlways){if(!a.globals.isBarHorizontal){a.globals.rotateXLabels=!0;var F=function(O){return M.getTextRects(O,a.config.xaxis.labels.style.fontSize,a.config.xaxis.labels.style.fontFamily,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1)};C=F(g),g!==y&&(P=F(y)),r.height=(C.height>P.height?C.height:P.height)/1.5,r.width=C.width>P.width?C.width:P.width}}else a.globals.rotateXLabels=!1}return a.config.xaxis.labels.show||(r={width:0,height:0}),{width:r.width,height:r.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var r,a=this.w;if(!a.globals.hasXaxisGroups)return{width:0,height:0};var h,d=(null===(r=a.config.xaxis.group.style)||void 0===r?void 0:r.fontSize)||a.config.xaxis.labels.style.fontSize,f=a.globals.groups.map(function(C){return C.title}),g=at.getLargestStringFromArr(f),y=this.dCtx.dimHelpers.getLargestStringFromMultiArr(g,f),x=new Q(this.dCtx.ctx),S=x.getTextRects(g,d),M=S;return g!==y&&(M=x.getTextRects(y,d)),h={width:S.width>=M.width?S.width:M.width,height:S.height>=M.height?S.height:M.height},a.config.xaxis.labels.show||(h={width:0,height:0}),{width:h.width,height:h.height}}},{key:"getxAxisTitleCoords",value:function(){var r=this.w,a=0,h=0;if(void 0!==r.config.xaxis.title.text){var d=new Q(this.dCtx.ctx).getTextRects(r.config.xaxis.title.text,r.config.xaxis.title.style.fontSize);a=d.width,h=d.height}return{width:a,height:h}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var r,a=this.w;this.dCtx.timescaleLabels=a.globals.timescaleLabels.slice();var h=this.dCtx.timescaleLabels.map(function(f){return f.value}),d=h.reduce(function(f,g){return void 0===f?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):f.length>g.length?f:g},0);return 1.05*(r=new Q(this.dCtx.ctx).getTextRects(d,a.config.xaxis.labels.style.fontSize)).width*h.length>a.globals.gridWidth&&0!==a.config.xaxis.labels.rotate&&(a.globals.overlappingXLabels=!0),r}},{key:"additionalPaddingXLabels",value:function(r){var a=this,h=this.w,d=h.globals,f=h.config,g=f.xaxis.type,y=r.width;d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1;var x=h.config.yaxis[0].opposite&&h.globals.isBarHorizontal;f.yaxis.forEach(function(M,C){x?(a.dCtx.gridPad.left<y&&(a.dCtx.xPadLeft=y/2+1),a.dCtx.xPadRight=y/2+1):function(M,C){f.yaxis.length>1&&-1!==d.collapsedSeriesIndices.indexOf(C)||function(P){if(a.dCtx.timescaleLabels&&a.dCtx.timescaleLabels.length){var D=a.dCtx.timescaleLabels[0].position-y/1.75+a.dCtx.yAxisWidthLeft;a.dCtx.timescaleLabels[a.dCtx.timescaleLabels.length-1].position+y/1.75-a.dCtx.yAxisWidthRight>d.svgWidth-d.translateX-("right"===h.config.legend.position&&a.dCtx.lgRect.width>0?a.dCtx.lgRect.width:0)&&(d.skipLastTimelinelabel=!0),D<-(P.show&&!P.floating||"bar"!==f.chart.type&&"candlestick"!==f.chart.type&&"rangeBar"!==f.chart.type&&"boxPlot"!==f.chart.type?10:y/1.75)&&(d.skipFirstTimelinelabel=!0)}else"datetime"===g?a.dCtx.gridPad.right<y&&!d.rotateXLabels&&(d.skipLastTimelinelabel=!0):"datetime"!==g&&a.dCtx.gridPad.right<y/2-a.dCtx.yAxisWidthRight&&!d.rotateXLabels&&!h.config.xaxis.labels.trim&&("between"!==h.config.xaxis.tickPlacement||h.globals.isBarHorizontal)&&(a.dCtx.xPadRight=y/2+1)}(M)}(M,C)})}}]),V}(),Xr=function(){function V(r){zt(this,V),this.w=r.w,this.dCtx=r}return Dt(V,[{key:"getyAxisLabelsCoords",value:function(){var r=this,a=this.w,h=[],d=10,f=new bs(this.dCtx.ctx);return a.config.yaxis.map(function(g,y){var x={seriesIndex:y,dataPointIndex:-1,w:a},S=a.globals.yAxisScale[y],M=0;if(!f.isYAxisHidden(y)&&g.labels.show&&void 0!==g.labels.minWidth&&(M=g.labels.minWidth),!f.isYAxisHidden(y)&&g.labels.show&&S.result.length){var C=a.globals.yLabelFormatters[y],F=S.result.reduce(function(N,E){var X,W;return(null===(X=String(C(N,x)))||void 0===X?void 0:X.length)>(null===(W=String(C(E,x)))||void 0===W?void 0:W.length)?N:E},S.niceMin===Number.MIN_VALUE?0:S.niceMin),O=F=C(F,x);if(void 0!==F&&0!==F.length||(F=S.niceMax),a.globals.isBarHorizontal){d=0;var D=a.globals.labels.slice();F=at.getLargestStringFromArr(D),F=C(F,{seriesIndex:y,dataPointIndex:-1,w:a}),O=r.dCtx.dimHelpers.getLargestStringFromMultiArr(F,D)}var Y=new Q(r.dCtx.ctx),G="rotate(".concat(g.labels.rotate," 0 0)"),U=Y.getTextRects(F,g.labels.style.fontSize,g.labels.style.fontFamily,G,!1),b=U;F!==O&&(b=Y.getTextRects(O,g.labels.style.fontSize,g.labels.style.fontFamily,G,!1)),h.push({width:(M>b.width||M>U.width?M:b.width>U.width?b.width:U.width)+d,height:b.height>U.height?b.height:U.height})}else h.push({width:0,height:0})}),h}},{key:"getyAxisTitleCoords",value:function(){var r=this,h=[];return this.w.config.yaxis.map(function(d,f){if(d.show&&void 0!==d.title.text){var g=new Q(r.dCtx.ctx),y="rotate(".concat(d.title.rotate," 0 0)"),x=g.getTextRects(d.title.text,d.title.style.fontSize,d.title.style.fontFamily,y,!1);h.push({width:x.width,height:x.height})}else h.push({width:0,height:0})}),h}},{key:"getTotalYAxisWidth",value:function(){var r=this.w,a=0,h=0,d=0,f=r.globals.yAxisScale.length>1?10:0,g=new bs(this.dCtx.ctx),y=function(x,S){var M=r.config.yaxis[S].floating,C=0;x.width>0&&!M?(C=x.width+f,r.globals.ignoreYAxisIndexes.indexOf(S)>-1&&(C=C-x.width-f)):C=M||g.isYAxisHidden(S)?0:5,r.config.yaxis[S].opposite?d+=C:h+=C,a+=C};return r.globals.yLabelsCoords.map(function(x,S){y(x,S)}),r.globals.yTitleCoords.map(function(x,S){y(x,S)}),r.globals.isBarHorizontal&&!r.config.yaxis[0].floating&&(a=r.globals.yLabelsCoords[0].width+r.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=h,this.dCtx.yAxisWidthRight=d,a}}]),V}(),hi=function(){function V(r){zt(this,V),this.w=r.w,this.dCtx=r}return Dt(V,[{key:"gridPadForColumnsInNumericAxis",value:function(r){var a=this.w;if(a.globals.noData||a.globals.allSeriesCollapsed)return 0;var h=function(M){return"bar"===M||"rangeBar"===M||"candlestick"===M||"boxPlot"===M},d=a.config.chart.type,f=0,g=h(d)?a.config.series.length:1;if(a.globals.comboBarCount>0&&(g=a.globals.comboBarCount),a.globals.collapsedSeries.forEach(function(M){h(M.type)&&(g-=1)}),a.config.chart.stacked&&(g=1),(h(d)||a.globals.comboBarCount>0)&&a.globals.isXNumeric&&!a.globals.isBarHorizontal&&g>0){var y,x,S=Math.abs(a.globals.initialMaxX-a.globals.initialMinX);S<=3&&(S=a.globals.dataPoints),y=S/r,a.globals.minXDiff&&a.globals.minXDiff/y>0&&(x=a.globals.minXDiff/y),x>r/2&&(x/=2),(f=x*parseInt(a.config.plotOptions.bar.columnWidth,10)/100)<1&&(f=1),a.globals.barPadForNumericAxis=f}return f}},{key:"gridPadFortitleSubtitle",value:function(){var r=this,a=this.w,h=a.globals,d=this.dCtx.isSparkline||!a.globals.axisCharts?0:10;["title","subtitle"].forEach(function(y){d+=void 0!==a.config[y].text?a.config[y].margin:r.dCtx.isSparkline||!a.globals.axisCharts?0:5}),!a.config.legend.show||"bottom"!==a.config.legend.position||a.config.legend.floating||a.globals.axisCharts||(d+=10);var f=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),g=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");h.gridHeight=h.gridHeight-f.height-g.height-d,h.translateY=h.translateY+f.height+g.height+d}},{key:"setGridXPosForDualYAxis",value:function(r,a){var h=this.w,d=new bs(this.dCtx.ctx);h.config.yaxis.map(function(f,g){-1!==h.globals.ignoreYAxisIndexes.indexOf(g)||f.floating||d.isYAxisHidden(g)||(f.opposite&&(h.globals.translateX=h.globals.translateX-(a[g].width+r[g].width)-parseInt(h.config.yaxis[g].labels.style.fontSize,10)/1.2-12),h.globals.translateX<2&&(h.globals.translateX=2))})}}]),V}(),kt=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ve(this),this.dimYAxis=new Xr(this),this.dimXAxis=new li(this),this.dimGrid=new hi(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Dt(V,[{key:"plotCoords",value:function(){var r=this,a=this.w,h=a.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((a.config.markers.discrete.length>0||a.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(f){var g=uu(f,2);r.gridPad[g[0]]=Math.max(g[1],r.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(a.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(a.config.stroke.width/2,this.gridPad.bottom)),h.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),h.gridHeight=h.gridHeight-this.gridPad.top-this.gridPad.bottom,h.gridWidth=h.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var d=this.dimGrid.gridPadForColumnsInNumericAxis(h.gridWidth);h.gridWidth=h.gridWidth-2*d,h.translateX=h.translateX+this.gridPad.left+this.xPadLeft+(d>0?d+4:0),h.translateY=h.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var r=this,a=this.w,h=a.globals,d=this.dimYAxis.getyAxisLabelsCoords(),f=this.dimYAxis.getyAxisTitleCoords();a.globals.yLabelsCoords=[],a.globals.yTitleCoords=[],a.config.yaxis.map(function(F,O){a.globals.yLabelsCoords.push({width:d[O].width,index:O}),a.globals.yTitleCoords.push({width:f[O].width,index:O})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var g=this.dimXAxis.getxAxisLabelsCoords(),y=this.dimXAxis.getxAxisGroupLabelsCoords(),x=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(g,x,y),h.translateXAxisY=a.globals.rotateXLabels?this.xAxisHeight/8:-4,h.translateXAxisX=a.globals.rotateXLabels&&a.globals.isXNumeric&&a.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,a.globals.isBarHorizontal&&(h.rotateXLabels=!1,h.translateXAxisY=parseInt(a.config.xaxis.labels.style.fontSize,10)/1.5*-1),h.translateXAxisY=h.translateXAxisY+a.config.xaxis.labels.offsetY,h.translateXAxisX=h.translateXAxisX+a.config.xaxis.labels.offsetX;var S=this.yAxisWidth,M=this.xAxisHeight;h.xAxisLabelsHeight=this.xAxisHeight-x.height,h.xAxisGroupLabelsHeight=h.xAxisLabelsHeight-g.height,h.xAxisLabelsWidth=this.xAxisWidth,h.xAxisHeight=this.xAxisHeight;var C=10;("radar"===a.config.chart.type||this.isSparkline)&&(S=0,M=h.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===a.config.chart.type)&&(S=0,M=0,C=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(g);var P=function(){h.translateX=S,h.gridHeight=h.svgHeight-r.lgRect.height-M-(r.isSparkline||"treemap"===a.config.chart.type?0:a.globals.rotateXLabels?10:15),h.gridWidth=h.svgWidth-S};switch("top"===a.config.xaxis.position&&(C=h.xAxisHeight-a.config.xaxis.axisTicks.height-5),a.config.legend.position){case"bottom":h.translateY=C,P();break;case"top":h.translateY=this.lgRect.height+C,P();break;case"left":h.translateY=C,h.translateX=this.lgRect.width+S,h.gridHeight=h.svgHeight-M-12,h.gridWidth=h.svgWidth-this.lgRect.width-S;break;case"right":h.translateY=C,h.translateX=S,h.gridHeight=h.svgHeight-M-12,h.gridWidth=h.svgWidth-this.lgRect.width-S-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(f,d),new dt(this.ctx).setYAxisXPosition(d,f)}},{key:"setDimensionsForNonAxisCharts",value:function(){var r=this.w,a=r.globals,h=r.config,d=0;r.config.legend.show&&!r.config.legend.floating&&(d=20);var f="pie"===h.chart.type||"polarArea"===h.chart.type||"donut"===h.chart.type?"pie":"radialBar",g=h.plotOptions[f].offsetY,y=h.plotOptions[f].offsetX;if(!h.legend.show||h.legend.floating)return a.gridHeight=a.svgHeight-h.grid.padding.left+h.grid.padding.right,a.gridWidth=a.gridHeight,a.translateY=g,void(a.translateX=y+(a.svgWidth-a.gridWidth)/2);switch(h.legend.position){case"bottom":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=g-10,a.translateX=y+(a.svgWidth-a.gridWidth)/2;break;case"top":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=this.lgRect.height+g+10,a.translateX=y+(a.svgWidth-a.gridWidth)/2;break;case"left":a.gridWidth=a.svgWidth-this.lgRect.width-d,a.gridHeight="auto"!==h.chart.height?a.svgHeight:a.gridWidth,a.translateY=g,a.translateX=y+this.lgRect.width+d;break;case"right":a.gridWidth=a.svgWidth-this.lgRect.width-d-5,a.gridHeight="auto"!==h.chart.height?a.svgHeight:a.gridWidth,a.translateY=g,a.translateX=y+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(r,a,h){var d=this.w;this.xAxisHeight=(h.height+r.height+a.height)*(d.globals.isMultiLineX?1.2:d.globals.LINE_HEIGHT_RATIO)+(d.globals.hasXaxisGroups?2:1)*(d.globals.rotateXLabels?22:10)+(d.globals.rotateXLabels&&"bottom"===d.config.legend.position?10:0),this.xAxisWidth=r.width,this.xAxisHeight-a.height>d.config.xaxis.labels.maxHeight&&(this.xAxisHeight=d.config.xaxis.labels.maxHeight),d.config.xaxis.labels.minHeight&&this.xAxisHeight<d.config.xaxis.labels.minHeight&&(this.xAxisHeight=d.config.xaxis.labels.minHeight),d.config.xaxis.floating&&(this.xAxisHeight=0);var M=0,C=0;d.config.yaxis.forEach(function(P){M+=P.labels.minWidth,C+=P.labels.maxWidth}),this.yAxisWidth<M&&(this.yAxisWidth=M),this.yAxisWidth>C&&(this.yAxisWidth=C)}}]),V}(),z=function(){function V(r){zt(this,V),this.w=r.w,this.lgCtx=r}return Dt(V,[{key:"getLegendStyles",value:function(){var r,a,h,d=document.createElement("style");d.setAttribute("type","text/css");var f=(null===(r=this.lgCtx.ctx)||void 0===r||null===(a=r.opts)||void 0===a||null===(h=a.chart)||void 0===h?void 0:h.nonce)||this.w.config.chart.nonce;f&&d.setAttribute("nonce",f);var g=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return d.appendChild(g),d}},{key:"getLegendBBox",value:function(){var r=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:r.height,clww:r.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(r,a){var h=this,d=this.w;if(d.globals.axisCharts||"radialBar"===d.config.chart.type){d.globals.resized=!0;var f=null,g=null;d.globals.risingSeries=[],d.globals.axisCharts?(f=d.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),g=parseInt(f.getAttribute("data:realIndex"),10)):(f=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")),g=parseInt(f.getAttribute("rel"),10)-1),a?[{cs:d.globals.collapsedSeries,csi:d.globals.collapsedSeriesIndices},{cs:d.globals.ancillaryCollapsedSeries,csi:d.globals.ancillaryCollapsedSeriesIndices}].forEach(function(M){h.riseCollapsedSeries(M.cs,M.csi,g)}):this.hideSeries({seriesEl:f,realIndex:g})}else{var y=d.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(r+1,"'] path")),x=d.config.chart.type;if("pie"===x||"polarArea"===x||"donut"===x){var S=d.config.plotOptions.pie.donut.labels;new Q(this.lgCtx.ctx).pathMouseDown(y.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(y.members[0].node,S)}y.fire("click")}}},{key:"hideSeries",value:function(r){var a=r.seriesEl,h=r.realIndex,d=this.w,f=at.clone(d.config.series);if(d.globals.axisCharts){var g=d.config.yaxis[d.globals.seriesYAxisReverseMap[h]];if(g&&g.show&&g.showAlways)d.globals.ancillaryCollapsedSeriesIndices.indexOf(h)<0&&(d.globals.ancillaryCollapsedSeries.push({index:h,data:f[h].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.globals.ancillaryCollapsedSeriesIndices.push(h));else if(d.globals.collapsedSeriesIndices.indexOf(h)<0){d.globals.collapsedSeries.push({index:h,data:f[h].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.globals.collapsedSeriesIndices.push(h);var y=d.globals.risingSeries.indexOf(h);d.globals.risingSeries.splice(y,1)}}else d.globals.collapsedSeries.push({index:h,data:f[h]}),d.globals.collapsedSeriesIndices.push(h);for(var x=a.childNodes,S=0;S<x.length;S++)x[S].classList.contains("apexcharts-series-markers-wrap")&&(x[S].classList.contains("apexcharts-hide")?x[S].classList.remove("apexcharts-hide"):x[S].classList.add("apexcharts-hide"));d.globals.allSeriesCollapsed=d.globals.collapsedSeries.length===d.config.series.length,f=this._getSeriesBasedOnCollapsedState(f),this.lgCtx.ctx.updateHelpers._updateSeries(f,d.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(r,a,h){var d=this.w,f=at.clone(d.config.series);if(r.length>0){for(var g=0;g<r.length;g++)r[g].index===h&&(d.globals.axisCharts?(f[h].data=r[g].data.slice(),r.splice(g,1),a.splice(g,1),d.globals.risingSeries.push(h)):(f[h]=r[g].data,r.splice(g,1),a.splice(g,1),d.globals.risingSeries.push(h)));f=this._getSeriesBasedOnCollapsedState(f),this.lgCtx.ctx.updateHelpers._updateSeries(f,d.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(r){var a=this.w;return r.forEach(a.globals.axisCharts?function(h,d){a.globals.collapsedSeriesIndices.indexOf(d)>-1&&(r[d].data=[])}:function(h,d){a.globals.collapsedSeriesIndices.indexOf(d)>-1&&(r[d]=0)}),r}}]),V}(),_n=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new z(this)}return Dt(V,[{key:"init",value:function(){var r=this.w,a=r.globals,h=r.config;if((h.legend.showForSingleSeries&&1===a.series.length||this.isBarsDistributed||a.series.length>1||!a.axisCharts)&&h.legend.show){for(;a.dom.elLegendWrap.firstChild;)a.dom.elLegendWrap.removeChild(a.dom.elLegendWrap.firstChild);this.drawLegends(),at.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===h.legend.position||"top"===h.legend.position?this.legendAlignHorizontal():"right"!==h.legend.position&&"left"!==h.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var r=this,a=this.w,h=a.config.legend.fontFamily,d=a.globals.seriesNames,f=a.globals.colors.slice();if("heatmap"===a.config.chart.type){var g=a.config.plotOptions.heatmap.colorScale.ranges;d=g.map(function(xt){return xt.name?xt.name:xt.from+" - "+xt.to}),f=g.map(function(xt){return xt.color})}else this.isBarsDistributed&&(d=a.globals.labels.slice());a.config.legend.customLegendItems.length&&(d=a.config.legend.customLegendItems);for(var y=a.globals.legendFormatter,x=a.config.legend.inverseOrder,S=x?d.length-1:0;x?S>=0:S<=d.length-1;x?S--:S++){var M,C=y(d[S],{seriesIndex:S,w:a}),P=!1,F=!1;if(a.globals.collapsedSeries.length>0)for(var O=0;O<a.globals.collapsedSeries.length;O++)a.globals.collapsedSeries[O].index===S&&(P=!0);if(a.globals.ancillaryCollapsedSeriesIndices.length>0)for(var D=0;D<a.globals.ancillaryCollapsedSeriesIndices.length;D++)a.globals.ancillaryCollapsedSeriesIndices[D]===S&&(F=!0);var Y=document.createElement("span");Y.classList.add("apexcharts-legend-marker");var G=a.config.legend.markers.offsetX,U=a.config.legend.markers.offsetY,b=a.config.legend.markers.height,N=a.config.legend.markers.width,E=a.config.legend.markers.strokeWidth,X=a.config.legend.markers.strokeColor,W=a.config.legend.markers.radius,Z=Y.style;Z.background=f[S],Z.color=f[S],Z.setProperty("background",f[S],"important"),a.config.legend.markers.fillColors&&a.config.legend.markers.fillColors[S]&&(Z.background=a.config.legend.markers.fillColors[S]),void 0!==a.globals.seriesColors[S]&&(Z.background=a.globals.seriesColors[S],Z.color=a.globals.seriesColors[S]),Z.height=Array.isArray(b)?parseFloat(b[S])+"px":parseFloat(b)+"px",Z.width=Array.isArray(N)?parseFloat(N[S])+"px":parseFloat(N)+"px",Z.left=(Array.isArray(G)?parseFloat(G[S]):parseFloat(G))+"px",Z.top=(Array.isArray(U)?parseFloat(U[S]):parseFloat(U))+"px",Z.borderWidth=Array.isArray(E)?E[S]:E,Z.borderColor=Array.isArray(X)?X[S]:X,Z.borderRadius=Array.isArray(W)?parseFloat(W[S])+"px":parseFloat(W)+"px",a.config.legend.markers.customHTML&&(Array.isArray(a.config.legend.markers.customHTML)?a.config.legend.markers.customHTML[S]&&(Y.innerHTML=a.config.legend.markers.customHTML[S]()):Y.innerHTML=a.config.legend.markers.customHTML()),Q.setAttrs(Y,{rel:S+1,"data:collapsed":P||F}),(P||F)&&Y.classList.add("apexcharts-inactive-legend");var et=document.createElement("div"),it=document.createElement("span");it.classList.add("apexcharts-legend-text"),it.innerHTML=Array.isArray(C)?C.join(" "):C;var pt=a.config.legend.labels.useSeriesColors?a.globals.colors[S]:Array.isArray(a.config.legend.labels.colors)?null===(M=a.config.legend.labels.colors)||void 0===M?void 0:M[S]:a.config.legend.labels.colors;pt||(pt=a.config.chart.foreColor),it.style.color=pt,it.style.fontSize=parseFloat(a.config.legend.fontSize)+"px",it.style.fontWeight=a.config.legend.fontWeight,it.style.fontFamily=h||a.config.chart.fontFamily,Q.setAttrs(it,{rel:S+1,i:S,"data:default-text":encodeURIComponent(C),"data:collapsed":P||F}),et.appendChild(Y),et.appendChild(it);var wt=new Lt(this.ctx);a.config.legend.showForZeroSeries||0===wt.getSeriesTotalByIndex(S)&&wt.seriesHaveSameValues(S)&&!wt.isSeriesNull(S)&&-1===a.globals.collapsedSeriesIndices.indexOf(S)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(S)&&et.classList.add("apexcharts-hidden-zero-series"),a.config.legend.showForNullSeries||wt.isSeriesNull(S)&&-1===a.globals.collapsedSeriesIndices.indexOf(S)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(S)&&et.classList.add("apexcharts-hidden-null-series"),a.globals.dom.elLegendWrap.appendChild(et),a.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(a.config.legend.horizontalAlign)),a.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+a.config.legend.position),et.classList.add("apexcharts-legend-series"),et.style.margin="".concat(a.config.legend.itemMargin.vertical,"px ").concat(a.config.legend.itemMargin.horizontal,"px"),a.globals.dom.elLegendWrap.style.width=a.config.legend.width?a.config.legend.width+"px":"",a.globals.dom.elLegendWrap.style.height=a.config.legend.height?a.config.legend.height+"px":"",Q.setAttrs(et,{rel:S+1,seriesName:at.escapeString(d[S]),"data:collapsed":P||F}),(P||F)&&et.classList.add("apexcharts-inactive-legend"),a.config.legend.onItemClick.toggleDataSeries||et.classList.add("apexcharts-no-click")}a.globals.dom.elWrap.addEventListener("click",r.onLegendClick,!0),a.config.legend.onItemHover.highlightDataSeries&&0===a.config.legend.customLegendItems.length&&(a.globals.dom.elWrap.addEventListener("mousemove",r.onLegendHovered,!0),a.globals.dom.elWrap.addEventListener("mouseout",r.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(r,a){var h=this.w,d=h.globals.dom.elLegendWrap,f=d.getBoundingClientRect(),g=0,y=0;if("bottom"===h.config.legend.position)y+=h.globals.svgHeight-f.height/2;else if("top"===h.config.legend.position){var x=new kt(this.ctx),S=x.dimHelpers.getTitleSubtitleCoords("title").height,M=x.dimHelpers.getTitleSubtitleCoords("subtitle").height;y=y+(S>0?S-10:0)+(M>0?M-10:0)}d.style.position="absolute",y=y+a+h.config.legend.offsetY,d.style.left=(g=g+r+h.config.legend.offsetX)+"px",d.style.top=y+"px","bottom"===h.config.legend.position?(d.style.top="auto",d.style.bottom=5-h.config.legend.offsetY+"px"):"right"===h.config.legend.position&&(d.style.left="auto",d.style.right=25+h.config.legend.offsetX+"px"),["width","height"].forEach(function(C){d.style[C]&&(d.style[C]=parseInt(h.config.legend[C],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var r=this.w;r.globals.dom.elLegendWrap.style.right=0;var a=this.legendHelpers.getLegendBBox(),h=new kt(this.ctx),d=h.dimHelpers.getTitleSubtitleCoords("title"),f=h.dimHelpers.getTitleSubtitleCoords("subtitle"),g=0;"bottom"===r.config.legend.position?g=-a.clwh/1.8:"top"===r.config.legend.position&&(g=d.height+f.height+r.config.title.margin+r.config.subtitle.margin-10),this.setLegendWrapXY(20,g)}},{key:"legendAlignVertical",value:function(){var r=this.w,a=this.legendHelpers.getLegendBBox(),h=0;"left"===r.config.legend.position&&(h=20),"right"===r.config.legend.position&&(h=r.globals.svgWidth-a.clww-10),this.setLegendWrapXY(h,20)}},{key:"onLegendHovered",value:function(r){var a=this.w,h=r.target.classList.contains("apexcharts-legend-series")||r.target.classList.contains("apexcharts-legend-text")||r.target.classList.contains("apexcharts-legend-marker");if("heatmap"===a.config.chart.type||this.isBarsDistributed){if(h){var d=parseInt(r.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,d,this.w]),new un(this.ctx).highlightRangeInSeries(r,r.target)}}else!r.target.classList.contains("apexcharts-inactive-legend")&&h&&new un(this.ctx).toggleSeriesOnHover(r,r.target)}},{key:"onLegendClick",value:function(r){var a=this.w;if(!a.config.legend.customLegendItems.length&&(r.target.classList.contains("apexcharts-legend-series")||r.target.classList.contains("apexcharts-legend-text")||r.target.classList.contains("apexcharts-legend-marker"))){var h=parseInt(r.target.getAttribute("rel"),10)-1,d="true"===r.target.getAttribute("data:collapsed"),f=this.w.config.chart.events.legendClick;"function"==typeof f&&f(this.ctx,h,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,h,this.w]);var g=this.w.config.legend.markers.onClick;"function"==typeof g&&r.target.classList.contains("apexcharts-legend-marker")&&(g(this.ctx,h,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,h,this.w])),"treemap"!==a.config.chart.type&&"heatmap"!==a.config.chart.type&&!this.isBarsDistributed&&a.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(h,d)}}}]),V}(),Sa=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w;var a=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=a.globals.minX,this.maxX=a.globals.maxX}return Dt(V,[{key:"createToolbar",value:function(){var r=this,a=this.w,h=function(){return document.createElement("div")},d=h();if(d.setAttribute("class","apexcharts-toolbar"),d.style.top=a.config.chart.toolbar.offsetY+"px",d.style.right=3-a.config.chart.toolbar.offsetX+"px",a.globals.dom.elWrap.appendChild(d),this.elZoom=h(),this.elZoomIn=h(),this.elZoomOut=h(),this.elPan=h(),this.elSelection=h(),this.elZoomReset=h(),this.elMenuIcon=h(),this.elMenu=h(),this.elCustomIcons=[],this.t=a.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var f=0;f<this.t.customIcons.length;f++)this.elCustomIcons.push(h());var g=[],y=function(C,P,F){var O=C.toLowerCase();r.t[O]&&a.config.chart.zoom.enabled&&g.push({el:P,icon:"string"==typeof r.t[O]?r.t[O]:F,title:r.localeValues[C],class:"apexcharts-".concat(O,"-icon")})};y("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),y("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var x=function(C){r.t[C]&&a.config.chart[C].enabled&&g.push({el:"zoom"===C?r.elZoom:r.elSelection,icon:"string"==typeof r.t[C]?r.t[C]:"zoom"===C?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:r.localeValues["zoom"===C?"selectionZoom":"selection"],class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(C,"-icon")})};x("zoom"),x("selection"),this.t.pan&&a.config.chart.zoom.enabled&&g.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),y("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&g.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var S=0;S<this.elCustomIcons.length;S++)g.push({el:this.elCustomIcons[S],icon:this.t.customIcons[S].icon,title:this.t.customIcons[S].title,index:this.t.customIcons[S].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[S].class});g.forEach(function(C,P){C.index&&at.moveIndexInArray(g,P,C.index)});for(var M=0;M<g.length;M++)Q.setAttrs(g[M].el,{class:g[M].class,title:g[M].title}),g[M].el.innerHTML=g[M].icon,d.appendChild(g[M].el);this._createHamburgerMenu(d),a.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):a.globals.panEnabled?this.elPan.classList.add(this.selectedClass):a.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(r){this.elMenuItems=[],r.appendChild(this.elMenu),Q.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var a=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],h=0;h<a.length;h++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[h].innerHTML=a[h].title,Q.setAttrs(this.elMenuItems[h],{class:"apexcharts-menu-item ".concat(a[h].name),title:a[h].title}),this.elMenu.appendChild(this.elMenuItems[h])}},{key:"addToolbarEventListeners",value:function(){var r=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(h){h.classList.contains("exportSVG")?h.addEventListener("click",r.handleDownload.bind(r,"svg")):h.classList.contains("exportPNG")?h.addEventListener("click",r.handleDownload.bind(r,"png")):h.classList.contains("exportCSV")&&h.addEventListener("click",r.handleDownload.bind(r,"csv"))});for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons[a].addEventListener("click",this.t.customIcons[a].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(r){this.ctx.getSyncedCharts().forEach(function(a){a.ctx.toolbar.toggleOtherControls();var h="selection"===r?a.ctx.toolbar.elSelection:a.ctx.toolbar.elZoom,d="selection"===r?"selectionEnabled":"zoomEnabled";a.w.globals[d]=!a.w.globals[d],h.classList.contains(a.ctx.toolbar.selectedClass)?h.classList.remove(a.ctx.toolbar.selectedClass):h.classList.add(a.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var r=this.w;this.elZoom||(this.elZoom=r.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=r.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=r.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(r){this.toggleOtherControls(),"pan"===r?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var a="pan"===r?this.elPan:this.elZoom,h="pan"===r?this.elZoom:this.elPan;a&&a.classList.add(this.selectedClass),h&&h.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(r){r.ctx.toolbar.toggleOtherControls(),r.w.globals.panEnabled=!r.w.globals.panEnabled,r.ctx.toolbar.elPan.classList.contains(r.ctx.toolbar.selectedClass)?r.ctx.toolbar.elPan.classList.remove(r.ctx.toolbar.selectedClass):r.ctx.toolbar.elPan.classList.add(r.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var r=this,a=this.w;a.globals.panEnabled=!1,a.globals.zoomEnabled=!1,a.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(h){h&&h.classList.remove(r.selectedClass)})}},{key:"handleZoomIn",value:function(){var r=this.w;r.globals.isRangeBar&&(this.minX=r.globals.minY,this.maxX=r.globals.maxY);var a=(this.minX+this.maxX)/2,f=this._getNewMinXMaxX((this.minX+a)/2,(this.maxX+a)/2);r.globals.disableZoomIn||this.zoomUpdateOptions(f.minX,f.maxX)}},{key:"handleZoomOut",value:function(){var r=this.w;if(r.globals.isRangeBar&&(this.minX=r.globals.minY,this.maxX=r.globals.maxY),!("datetime"===r.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var a=(this.minX+this.maxX)/2,f=this._getNewMinXMaxX(this.minX-(a-this.minX),this.maxX-(a-this.maxX));r.globals.disableZoomOut||this.zoomUpdateOptions(f.minX,f.maxX)}}},{key:"_getNewMinXMaxX",value:function(r,a){var h=this.w.config.xaxis.convertedCatToNumeric;return{minX:h?Math.floor(r):r,maxX:h?Math.floor(a):a}}},{key:"zoomUpdateOptions",value:function(r,a){var h=this.w;if(void 0!==r||void 0!==a){if(!(h.config.xaxis.convertedCatToNumeric&&(r<1&&(r=1,a=h.globals.dataPoints),a-r<2))){var d={min:r,max:a},f=this.getBeforeZoomRange(d);f&&(d=f.xaxis);var g={xaxis:d},y=at.clone(h.globals.initialConfig.yaxis);h.config.chart.group||(g.yaxis=y),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(g,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(d,y)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(r,a){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:r,yaxis:a})}},{key:"getBeforeZoomRange",value:function(r,a){var h=null;return"function"==typeof this.ev.beforeZoom&&(h=this.ev.beforeZoom(this,{xaxis:r,yaxis:a})),h}},{key:"toggleMenu",value:function(){var r=this;window.setTimeout(function(){r.elMenu.classList.contains("apexcharts-menu-open")?r.elMenu.classList.remove("apexcharts-menu-open"):r.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(r){var a=this.w,h=new Qe(this.ctx);switch(r){case"svg":h.exportToSVG(this.ctx);break;case"png":h.exportToPng(this.ctx);break;case"csv":h.exportToCSV({series:a.config.series,columnDelimiter:a.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(r){this.ctx.getSyncedCharts().forEach(function(a){var h=a.w;if(h.globals.lastXAxis.min=h.globals.initialConfig.xaxis.min,h.globals.lastXAxis.max=h.globals.initialConfig.xaxis.max,a.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof h.config.chart.events.beforeResetZoom){var d=h.config.chart.events.beforeResetZoom(a,h);d&&a.updateHelpers.revertDefaultAxisMinMax(d)}"function"==typeof h.config.chart.events.zoomed&&a.ctx.toolbar.zoomCallback({min:h.config.xaxis.min,max:h.config.xaxis.max}),h.globals.zoomed=!1;var f=a.ctx.series.emptyCollapsedSeries(at.clone(h.globals.initialSeries));a.updateHelpers._updateSeries(f,h.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),V}(),jl=function(V){Rr(a,V);var r=Tt(a);function a(h){var d;return zt(this,a),(d=r.call(this,h)).ctx=h,d.w=h.w,d.dragged=!1,d.graphics=new Q(d.ctx),d.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],d.clientX=0,d.clientY=0,d.startX=0,d.endX=0,d.dragX=0,d.startY=0,d.endY=0,d.dragY=0,d.moveDirection="none",d}return Dt(a,[{key:"init",value:function(h){var d=this,f=h.xyRatios,g=this.w,y=this;this.xyRatios=f,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=g.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),g.globals.dom.elGraphical.add(this.zoomRect),g.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===g.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:g.globals.gridWidth,maxY:g.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===g.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:g.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=g.globals.dom.baseEl.querySelector("".concat(g.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(x){d.hoverArea.addEventListener(x,y.svgMouseEvents.bind(y,f),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(h,d){var f=this.w,g=this,y=this.ctx.toolbar,x=f.globals.zoomEnabled?f.config.chart.zoom.type:f.config.chart.selection.type,S=f.config.chart.toolbar.autoSelected;if(d.shiftKey?(this.shiftWasPressed=!0,y.enableZoomPanFromToolbar("pan"===S?"zoom":"pan")):this.shiftWasPressed&&(y.enableZoomPanFromToolbar(S),this.shiftWasPressed=!1),d.target){var M,C=d.target.classList;if(d.target.parentNode&&null!==d.target.parentNode&&(M=d.target.parentNode.classList),!(C.contains("apexcharts-selection-rect")||C.contains("apexcharts-legend-marker")||C.contains("apexcharts-legend-text")||M&&M.contains("apexcharts-toolbar"))){if(g.clientX="touchmove"===d.type||"touchstart"===d.type?d.touches[0].clientX:"touchend"===d.type?d.changedTouches[0].clientX:d.clientX,g.clientY="touchmove"===d.type||"touchstart"===d.type?d.touches[0].clientY:"touchend"===d.type?d.changedTouches[0].clientY:d.clientY,("mousedown"===d.type||"touchmove"===d.type)&&1===d.which){var P=g.gridRect.getBoundingClientRect();g.startX=g.clientX-P.left,g.startY=g.clientY-P.top,g.dragged=!1,g.w.globals.mousedown=!0}if("mousemove"===d.type&&1===d.which||"touchmove"===d.type)if(g.dragged=!0,f.globals.panEnabled){if(f.globals.selection=null,g.w.globals.mousedown||"touchmove"===d.type){if("touchmove"===d.type&&!g.w.globals.mousedown){console.warn("me.w.globals.mousedown ",g.w.globals.mousedown);var F=g.gridRect.getBoundingClientRect();g.startX=g.clientX-F.left,g.startY=g.clientY-F.top,g.w.globals.mousedown=!0}g.panDragging({context:g,zoomtype:x,xyRatios:h})}}else{if("touchmove"===d.type){if(!g.w.globals.mousedown){var O=g.gridRect.getBoundingClientRect();g.startX=g.clientX-O.left,g.startY=g.clientY-O.top}g.w.globals.mousedown=!0}(g.w.globals.mousedown&&f.globals.zoomEnabled||g.w.globals.mousedown&&f.globals.selectionEnabled)&&(g.selection=g.selectionDrawing({context:g,zoomtype:x}))}if("mouseup"===d.type||"touchend"===d.type||"mouseleave"===d.type){var D=g.gridRect.getBoundingClientRect();g.w.globals.mousedown&&(g.endX=g.clientX-D.left,g.endY=g.clientY-D.top,g.dragX=Math.abs(g.endX-g.startX),g.dragY=Math.abs(g.endY-g.startY),(f.globals.zoomEnabled||f.globals.selectionEnabled)&&g.selectionDrawn({context:g,zoomtype:x}),f.globals.panEnabled&&f.config.xaxis.convertedCatToNumeric&&g.delayedPanScrolled()),f.globals.zoomEnabled&&g.hideSelectionRect(this.selectionRect),g.dragged=!1,g.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var h=this.w;if(this.selectionRect){var d=this.selectionRect.node.getBoundingClientRect();d.width>0&&d.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:h.globals.gridWidth,maxY:h.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var h=this.w,d=this.xyRatios;if(!h.globals.zoomEnabled)if(null!=h.globals.selection)this.drawSelectionRect(h.globals.selection);else if(void 0!==h.config.chart.selection.xaxis.min&&void 0!==h.config.chart.selection.xaxis.max){var f=(h.config.chart.selection.xaxis.min-h.globals.minX)/d.xRatio,g=h.globals.gridWidth-(h.globals.maxX-h.config.chart.selection.xaxis.max)/d.xRatio-f;h.globals.isRangeBar&&(f=(h.config.chart.selection.xaxis.min-h.globals.yAxisScale[0].niceMin)/d.invertedYRatio,g=(h.config.chart.selection.xaxis.max-h.config.chart.selection.xaxis.min)/d.invertedYRatio),this.drawSelectionRect({x:f,y:0,width:g,height:h.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof h.config.chart.events.selection&&h.config.chart.events.selection(this.ctx,{xaxis:{min:h.config.chart.selection.xaxis.min,max:h.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(h){var d=h.x,f=h.y,g=h.width,y=h.height,x=h.translateX,M=h.translateY,P=this.w,F=this.zoomRect,O=this.selectionRect;if(this.dragged||null!==P.globals.selection){var D={transform:"translate("+(void 0===x?0:x)+", "+(void 0===M?0:M)+")"};P.globals.zoomEnabled&&this.dragged&&(g<0&&(g=1),F.attr({x:d,y:f,width:g,height:y,fill:P.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":P.config.chart.zoom.zoomedArea.fill.opacity,stroke:P.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":P.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":P.config.chart.zoom.zoomedArea.stroke.opacity}),Q.setAttrs(F.node,D)),P.globals.selectionEnabled&&(O.attr({x:d,y:f,width:g>0?g:0,height:y>0?y:0,fill:P.config.chart.selection.fill.color,"fill-opacity":P.config.chart.selection.fill.opacity,stroke:P.config.chart.selection.stroke.color,"stroke-width":P.config.chart.selection.stroke.width,"stroke-dasharray":P.config.chart.selection.stroke.dashArray,"stroke-opacity":P.config.chart.selection.stroke.opacity}),Q.setAttrs(O.node,D))}}},{key:"hideSelectionRect",value:function(h){h&&h.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(h){var D,f=h.zoomtype,g=this.w,y=h.context,x=this.gridRect.getBoundingClientRect(),S=y.startX-1,M=y.startY,C=!1,P=!1,F=y.clientX-x.left-S,O=y.clientY-x.top-M;return Math.abs(F+S)>g.globals.gridWidth?F=g.globals.gridWidth-S:y.clientX-x.left<0&&(F=S),S>y.clientX-x.left&&(C=!0,F=Math.abs(F)),M>y.clientY-x.top&&(P=!0,O=Math.abs(O)),y.drawSelectionRect(D="x"===f?{x:C?S-F:S,y:0,width:F,height:g.globals.gridHeight}:"y"===f?{x:0,y:P?M-O:M,width:g.globals.gridWidth,height:O}:{x:C?S-F:S,y:P?M-O:M,width:F,height:O}),y.selectionDragging("resizing"),D}},{key:"selectionDragging",value:function(h,d){var f=this,g=this.w,y=this.xyRatios,x=this.selectionRect,S=0;"resizing"===h&&(S=30);var M=function(P){return parseFloat(x.node.getAttribute(P))},C={x:M("x"),y:M("y"),width:M("width"),height:M("height")};g.globals.selection=C,"function"==typeof g.config.chart.events.selection&&g.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var P,F,O,D,Y=f.gridRect.getBoundingClientRect(),G=x.node.getBoundingClientRect();g.globals.isRangeBar?(P=g.globals.yAxisScale[0].niceMin+(G.left-Y.left)*y.invertedYRatio,F=g.globals.yAxisScale[0].niceMin+(G.right-Y.left)*y.invertedYRatio,O=0,D=1):(P=g.globals.xAxisScale.niceMin+(G.left-Y.left)*y.xRatio,F=g.globals.xAxisScale.niceMin+(G.right-Y.left)*y.xRatio,O=g.globals.yAxisScale[0].niceMin+(Y.bottom-G.bottom)*y.yRatio[0],D=g.globals.yAxisScale[0].niceMax-(G.top-Y.top)*y.yRatio[0]);var U={xaxis:{min:P,max:F},yaxis:{min:O,max:D}};g.config.chart.events.selection(f.ctx,U),g.config.chart.brush.enabled&&void 0!==g.config.chart.events.brushScrolled&&g.config.chart.events.brushScrolled(f.ctx,U)},S))}},{key:"selectionDrawn",value:function(h){var f=h.zoomtype,g=this.w,y=h.context,x=this.xyRatios,S=this.ctx.toolbar;if(y.startX>y.endX){var M=y.startX;y.startX=y.endX,y.endX=M}if(y.startY>y.endY){var C=y.startY;y.startY=y.endY,y.endY=C}var P=void 0,F=void 0;g.globals.isRangeBar?(P=g.globals.yAxisScale[0].niceMin+y.startX*x.invertedYRatio,F=g.globals.yAxisScale[0].niceMin+y.endX*x.invertedYRatio):(P=g.globals.xAxisScale.niceMin+y.startX*x.xRatio,F=g.globals.xAxisScale.niceMin+y.endX*x.xRatio);var O=[],D=[];if(g.config.yaxis.forEach(function(X,W){O.push(g.globals.yAxisScale[W].niceMax-x.yRatio[W]*y.startY),D.push(g.globals.yAxisScale[W].niceMax-x.yRatio[W]*y.endY)}),y.dragged&&(y.dragX>10||y.dragY>10)&&P!==F)if(g.globals.zoomEnabled){var Y=at.clone(g.globals.initialConfig.yaxis),G=at.clone(g.globals.initialConfig.xaxis);if(g.globals.zoomed=!0,g.config.xaxis.convertedCatToNumeric&&(P=Math.floor(P),F=Math.floor(F),P<1&&(P=1,F=g.globals.dataPoints),F-P<2&&(F=P+1)),"xy"!==f&&"x"!==f||(G={min:P,max:F}),"xy"!==f&&"y"!==f||Y.forEach(function(X,W){Y[W].min=D[W],Y[W].max=O[W]}),S){var U=S.getBeforeZoomRange(G,Y);U&&(G=U.xaxis?U.xaxis:G,Y=U.yaxis?U.yaxis:Y)}var b={xaxis:G};g.config.chart.group||(b.yaxis=Y),y.ctx.updateHelpers._updateOptions(b,!1,y.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof g.config.chart.events.zoomed&&S.zoomCallback(G,Y)}else if(g.globals.selectionEnabled){var N,E=null;N={min:P,max:F},"xy"!==f&&"y"!==f||(E=at.clone(g.config.yaxis)).forEach(function(X,W){E[W].min=D[W],E[W].max=O[W]}),g.globals.selection=y.selection,"function"==typeof g.config.chart.events.selection&&g.config.chart.events.selection(y.ctx,{xaxis:N,yaxis:E})}}},{key:"panDragging",value:function(h){var f=this.w,g=h.context;if(void 0!==f.globals.lastClientPosition.x){var y=f.globals.lastClientPosition.x-g.clientX,x=f.globals.lastClientPosition.y-g.clientY;Math.abs(y)>Math.abs(x)&&y>0?this.moveDirection="left":Math.abs(y)>Math.abs(x)&&y<0?this.moveDirection="right":Math.abs(x)>Math.abs(y)&&x>0?this.moveDirection="up":Math.abs(x)>Math.abs(y)&&x<0&&(this.moveDirection="down")}f.globals.lastClientPosition={x:g.clientX,y:g.clientY},f.config.xaxis.convertedCatToNumeric||g.panScrolled(f.globals.isRangeBar?f.globals.minY:f.globals.minX,f.globals.isRangeBar?f.globals.maxY:f.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var h=this.w,d=h.globals.minX,f=h.globals.maxX,g=(h.globals.maxX-h.globals.minX)/2;"left"===this.moveDirection?(d=h.globals.minX+g,f=h.globals.maxX+g):"right"===this.moveDirection&&(d=h.globals.minX-g,f=h.globals.maxX-g),d=Math.floor(d),f=Math.floor(f),this.updateScrolledChart({xaxis:{min:d,max:f}},d,f)}},{key:"panScrolled",value:function(h,d){var f=this.w,g=this.xyRatios,y=at.clone(f.globals.initialConfig.yaxis),x=g.xRatio,S=f.globals.minX,M=f.globals.maxX;f.globals.isRangeBar&&(x=g.invertedYRatio,S=f.globals.minY,M=f.globals.maxY),"left"===this.moveDirection?(h=S+f.globals.gridWidth/15*x,d=M+f.globals.gridWidth/15*x):"right"===this.moveDirection&&(h=S-f.globals.gridWidth/15*x,d=M-f.globals.gridWidth/15*x),f.globals.isRangeBar||(h<f.globals.initialMinX||d>f.globals.initialMaxX)&&(h=S,d=M);var C={xaxis:{min:h,max:d}};f.config.chart.group||(C.yaxis=y),this.updateScrolledChart(C,h,d)}},{key:"updateScrolledChart",value:function(h,d,f){var g=this.w;this.ctx.updateHelpers._updateOptions(h,!1,!1),"function"==typeof g.config.chart.events.scrolled&&g.config.chart.events.scrolled(this.ctx,{xaxis:{min:d,max:f}})}}]),a}(Sa),ka=function(){function V(r){zt(this,V),this.w=r.w,this.ttCtx=r,this.ctx=r.ctx}return Dt(V,[{key:"getNearestValues",value:function(r){var a=r.hoverArea,d=r.clientX,f=r.clientY,g=this.w,y=r.elGrid.getBoundingClientRect(),x=y.width,S=y.height,M=x/(g.globals.dataPoints-1),C=S/g.globals.dataPoints,P=this.hasBars();!g.globals.comboCharts&&!P||g.config.xaxis.convertedCatToNumeric||(M=x/g.globals.dataPoints);var F=d-y.left-g.globals.barPadForNumericAxis,O=f-y.top;F<0||O<0||F>x||O>S?(a.classList.remove("hovering-zoom"),a.classList.remove("hovering-pan")):g.globals.zoomEnabled?(a.classList.remove("hovering-pan"),a.classList.add("hovering-zoom")):g.globals.panEnabled&&(a.classList.remove("hovering-zoom"),a.classList.add("hovering-pan"));var D=Math.round(F/M),Y=Math.floor(O/C);P&&!g.config.xaxis.convertedCatToNumeric&&(D=Math.ceil(F/M),D-=1);var G=null,U=null,b=g.globals.seriesXvalues.map(function(Z){return Z.filter(function(et){return at.isNumber(et)})}),N=g.globals.seriesYvalues.map(function(Z){return Z.filter(function(et){return at.isNumber(et)})});if(g.globals.isXNumeric){var E=this.ttCtx.getElGrid().getBoundingClientRect(),X=F*(E.width/x);G=(U=this.closestInMultiArray(X,O*(E.height/S),b,N)).index,D=U.j,null!==G&&(D=(U=this.closestInArray(X,b=g.globals.seriesXvalues[G])).index)}return g.globals.capturedSeriesIndex=null===G?-1:G,(!D||D<1)&&(D=0),g.globals.capturedDataPointIndex=g.globals.isBarHorizontal?Y:D,{capturedSeries:G,j:g.globals.isBarHorizontal?Y:D,hoverX:F,hoverY:O}}},{key:"closestInMultiArray",value:function(r,a,h,d){var g=0,y=null,x=-1;this.w.globals.series.length>1?g=this.getFirstActiveXArray(h):y=0;var M=Math.abs(r-h[g][0]);if(h.forEach(function(F){F.forEach(function(O,D){var Y=Math.abs(r-O);Y<=M&&(M=Y,x=D)})}),-1!==x){var P=Math.abs(a-d[g][x]);y=g,d.forEach(function(F,O){var D=Math.abs(a-F[x]);D<=P&&(P=D,y=O)})}return{index:y,j:x}}},{key:"getFirstActiveXArray",value:function(r){for(var a=this.w,h=0,d=r.map(function(g,y){return g.length>0?y:-1}),f=0;f<d.length;f++)if(-1!==d[f]&&-1===a.globals.collapsedSeriesIndices.indexOf(f)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(f)){h=d[f];break}return h}},{key:"closestInArray",value:function(r,a){for(var d=null,f=Math.abs(r-a[0]),g=0;g<a.length;g++){var y=Math.abs(r-a[g]);y<f&&(f=y,d=g)}return{index:d}}},{key:"isXoverlap",value:function(r){var a=[],h=this.w.globals.seriesX.filter(function(f){return void 0!==f[0]});if(h.length>0)for(var d=0;d<h.length-1;d++)void 0!==h[d][r]&&void 0!==h[d+1][r]&&h[d][r]!==h[d+1][r]&&a.push("unEqual");return 0===a.length}},{key:"isInitialSeriesSameLen",value:function(){for(var r=!0,a=this.w.globals.initialSeries,h=0;h<a.length-1;h++)if(a[h].data.length!==a[h+1].data.length){r=!1;break}return r}},{key:"getBarsHeight",value:function(r){return hn(r).reduce(function(a,h){return a+h.getBBox().height},0)}},{key:"getElMarkers",value:function(r){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof r?".apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(r=hn(r)).sort(function(h,d){var f=Number(h.getAttribute("data:realIndex")),g=Number(d.getAttribute("data:realIndex"));return g<f?1:g>f?-1:0});var a=[];return r.forEach(function(h){a.push(h.querySelector(".apexcharts-marker"))}),a}},{key:"hasMarkers",value:function(r){return this.getElMarkers(r).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(r){var a=this.w,h=a.config.markers.hover.size;return void 0===h&&(h=a.globals.markers.size[r]+a.config.markers.hover.sizeOffset),h}},{key:"toggleAllTooltipSeriesGroups",value:function(r){var a=this.w,h=this.ttCtx;0===h.allTooltipSeriesGroups.length&&(h.allTooltipSeriesGroups=a.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var d=h.allTooltipSeriesGroups,f=0;f<d.length;f++)"enable"===r?(d[f].classList.add("apexcharts-active"),d[f].style.display=a.config.tooltip.items.display):(d[f].classList.remove("apexcharts-active"),d[f].style.display="none")}}]),V}(),Ma=function(){function V(r){zt(this,V),this.w=r.w,this.ctx=r.ctx,this.ttCtx=r,this.tooltipUtil=new ka(r)}return Dt(V,[{key:"drawSeriesTexts",value:function(r){var a=r.shared,h=void 0===a||a,d=r.ttItems,f=r.i,g=void 0===f?0:f,y=r.j,x=void 0===y?null:y,C=r.e,P=this.w;void 0!==P.config.tooltip.custom?this.handleCustomTooltip({i:g,j:x,y1:r.y1,y2:r.y2,w:P}):this.toggleActiveInactiveSeries(h);var F=this.getValuesToPrint({i:g,j:x});this.printLabels({i:g,j:x,values:F,ttItems:d,shared:h,e:C});var O=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=O.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=O.getBoundingClientRect().height}},{key:"printLabels",value:function(r){var a,h=this,d=r.i,f=r.j,g=r.values,y=r.ttItems,x=r.shared,S=r.e,M=this.w,C=[],P=function(E){return M.globals.seriesGoals[E]&&M.globals.seriesGoals[E][f]&&Array.isArray(M.globals.seriesGoals[E][f])},F=g.xVal,O=g.zVal,D=g.xAxisTTVal,Y="",G=M.globals.colors[d];null!==f&&M.config.plotOptions.bar.distributed&&(G=M.globals.colors[f]);for(var U=function(E,X){var W=h.getFormatters(d);Y=h.getSeriesName({fn:W.yLbTitleFormatter,index:d,seriesIndex:d,j:f}),"treemap"===M.config.chart.type&&(Y=W.yLbTitleFormatter(String(M.config.series[d].data[f].x),{series:M.globals.series,seriesIndex:d,dataPointIndex:f,w:M}));var Z=M.config.tooltip.inverseOrder?X:E;if(M.globals.axisCharts){var et=function(wt){var xt,Ft,Nt,_t;return M.globals.isRangeData?W.yLbFormatter(null===(xt=M.globals.seriesRangeStart)||void 0===xt||null===(Ft=xt[wt])||void 0===Ft?void 0:Ft[f],{series:M.globals.seriesRangeStart,seriesIndex:wt,dataPointIndex:f,w:M})+" - "+W.yLbFormatter(null===(Nt=M.globals.seriesRangeEnd)||void 0===Nt||null===(_t=Nt[wt])||void 0===_t?void 0:_t[f],{series:M.globals.seriesRangeEnd,seriesIndex:wt,dataPointIndex:f,w:M}):W.yLbFormatter(M.globals.series[wt][f],{series:M.globals.series,seriesIndex:wt,dataPointIndex:f,w:M})};if(x)W=h.getFormatters(Z),Y=h.getSeriesName({fn:W.yLbTitleFormatter,index:Z,seriesIndex:d,j:f}),G=M.globals.colors[Z],a=et(Z),P(Z)&&(C=M.globals.seriesGoals[Z][f].map(function(wt){return{attrs:wt,val:W.yLbFormatter(wt.value,{seriesIndex:Z,dataPointIndex:f,w:M})}}));else{var it,pt=null==S||null===(it=S.target)||void 0===it?void 0:it.getAttribute("fill");pt&&(G=-1!==pt.indexOf("url")?document.querySelector(pt.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):pt),a=et(d),P(d)&&Array.isArray(M.globals.seriesGoals[d][f])&&(C=M.globals.seriesGoals[d][f].map(function(wt){return{attrs:wt,val:W.yLbFormatter(wt.value,{seriesIndex:d,dataPointIndex:f,w:M})}}))}}null===f&&(a=W.yLbFormatter(M.globals.series[d],Et(Et({},M),{},{seriesIndex:d,dataPointIndex:d}))),h.DOMHandling({i:d,t:Z,j:f,ttItems:y,values:{val:a,goalVals:C,xVal:F,xAxisTTVal:D,zVal:O},seriesName:Y,shared:x,pColor:G})},b=0,N=M.globals.series.length-1;b<M.globals.series.length;b++,N--)U(b,N)}},{key:"getFormatters",value:function(r){var a,h=this.w,d=h.globals.yLabelFormatters[r];return void 0!==h.globals.ttVal?Array.isArray(h.globals.ttVal)?(d=h.globals.ttVal[r]&&h.globals.ttVal[r].formatter,a=h.globals.ttVal[r]&&h.globals.ttVal[r].title&&h.globals.ttVal[r].title.formatter):(d=h.globals.ttVal.formatter,"function"==typeof h.globals.ttVal.title.formatter&&(a=h.globals.ttVal.title.formatter)):a=h.config.tooltip.y.title.formatter,"function"!=typeof d&&(d=h.globals.yLabelFormatters[0]?h.globals.yLabelFormatters[0]:function(f){return f}),"function"!=typeof a&&(a=function(f){return f}),{yLbFormatter:d,yLbTitleFormatter:a}}},{key:"getSeriesName",value:function(r){var d=r.seriesIndex,f=r.j,g=this.w;return(0,r.fn)(String(g.globals.seriesNames[r.index]),{series:g.globals.series,seriesIndex:d,dataPointIndex:f,w:g})}},{key:"DOMHandling",value:function(r){var a=r.t,h=r.j,d=r.ttItems,f=r.values,g=r.seriesName,y=r.shared,x=r.pColor,S=this.w,M=this.ttCtx,C=f.val,P=f.goalVals,F=f.xVal,O=f.xAxisTTVal,D=f.zVal,Y=null;Y=d[a].children,S.config.tooltip.fillSeriesColor&&(d[a].style.backgroundColor=x,Y[0].style.display="none"),M.showTooltipTitle&&(null===M.tooltipTitle&&(M.tooltipTitle=S.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),M.tooltipTitle.innerHTML=F),M.isXAxisTooltipEnabled&&(M.xaxisTooltipText.innerHTML=""!==O?O:F);var G=d[a].querySelector(".apexcharts-tooltip-text-y-label");G&&(G.innerHTML=g||"");var U=d[a].querySelector(".apexcharts-tooltip-text-y-value");U&&(U.innerHTML=void 0!==C?C:""),Y[0]&&Y[0].classList.contains("apexcharts-tooltip-marker")&&(S.config.tooltip.marker.fillColors&&Array.isArray(S.config.tooltip.marker.fillColors)&&(x=S.config.tooltip.marker.fillColors[a]),Y[0].style.backgroundColor=x),S.config.tooltip.marker.show||(Y[0].style.display="none");var b=d[a].querySelector(".apexcharts-tooltip-text-goals-label"),N=d[a].querySelector(".apexcharts-tooltip-text-goals-value");if(P.length&&S.globals.seriesGoals[a]){var E=function(){var Z="<div >",et="<div>";P.forEach(function(it,pt){Z+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(it.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(it.attrs.name,"</div>"),et+="<div>".concat(it.val,"</div>")}),b.innerHTML=Z+"</div>",N.innerHTML=et+"</div>"};y?S.globals.seriesGoals[a][h]&&Array.isArray(S.globals.seriesGoals[a][h])?E():(b.innerHTML="",N.innerHTML=""):E()}else b.innerHTML="",N.innerHTML="";if(null!==D&&(d[a].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=S.config.tooltip.z.title,d[a].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==D?D:""),y&&Y[0]){if(S.config.tooltip.hideEmptySeries){var X=d[a].querySelector(".apexcharts-tooltip-marker"),W=d[a].querySelector(".apexcharts-tooltip-text");0==parseFloat(C)?(X.style.display="none",W.style.display="none"):(X.style.display="block",W.style.display="block")}Y[0].parentNode.style.display=null==C||S.globals.ancillaryCollapsedSeriesIndices.indexOf(a)>-1||S.globals.collapsedSeriesIndices.indexOf(a)>-1?"none":S.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(r){var a=this.w;if(r)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var h=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");h&&(h.classList.add("apexcharts-active"),h.style.display=a.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(r){var a=r.i,h=r.j,d=this.w,f=this.ctx.series.filteredSeriesX(),g="",y="",x=null,S=null,M={series:d.globals.series,seriesIndex:a,dataPointIndex:h,w:d},C=d.globals.ttZFormatter;null===h?S=d.globals.series[a]:d.globals.isXNumeric&&"treemap"!==d.config.chart.type?(g=f[a][h],0===f[a].length&&(g=f[this.tooltipUtil.getFirstActiveXArray(f)][h])):g=void 0!==d.globals.labels[h]?d.globals.labels[h]:"";var P=g;return g=d.globals.isXNumeric&&"datetime"===d.config.xaxis.type?new Zt(this.ctx).xLabelFormat(d.globals.ttKeyFormatter,P,P,{i:void 0,dateFormatter:new Xt(this.ctx).formatDate,w:this.w}):d.globals.isBarHorizontal?d.globals.yLabelFormatters[0](P,M):d.globals.xLabelFormatter(P,M),void 0!==d.config.tooltip.x.formatter&&(g=d.globals.ttKeyFormatter(P,M)),d.globals.seriesZ.length>0&&d.globals.seriesZ[a].length>0&&(x=C(d.globals.seriesZ[a][h],d)),y="function"==typeof d.config.xaxis.tooltip.formatter?d.globals.xaxisTooltipFormatter(P,M):g,{val:Array.isArray(S)?S.join(" "):S,xVal:Array.isArray(g)?g.join(" "):g,xAxisTTVal:Array.isArray(y)?y.join(" "):y,zVal:x}}},{key:"handleCustomTooltip",value:function(r){var a=r.i,h=r.j,d=r.y1,f=r.y2,g=r.w,y=this.ttCtx.getElTooltip(),x=g.config.tooltip.custom;Array.isArray(x)&&x[a]&&(x=x[a]),y.innerHTML=x({ctx:this.ctx,series:g.globals.series,seriesIndex:a,dataPointIndex:h,y1:d,y2:f,w:g})}}]),V}(),Dl=function(){function V(r){zt(this,V),this.ttCtx=r,this.ctx=r.ctx,this.w=r.w}return Dt(V,[{key:"moveXCrosshairs",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=this.ttCtx,d=this.w,f=h.getElXCrosshairs(),g=r-h.xcrosshairsWidth/2,y=d.globals.labels.slice().length;if(null!==a&&(g=d.globals.gridWidth/y*a),null===f||d.globals.isBarHorizontal||(f.setAttribute("x",g),f.setAttribute("x1",g),f.setAttribute("x2",g),f.setAttribute("y2",d.globals.gridHeight),f.classList.add("apexcharts-active")),g<0&&(g=0),g>d.globals.gridWidth&&(g=d.globals.gridWidth),h.isXAxisTooltipEnabled){var x=g;"tickWidth"!==d.config.xaxis.crosshairs.width&&"barWidth"!==d.config.xaxis.crosshairs.width||(x=g+h.xcrosshairsWidth/2),this.moveXAxisTooltip(x)}}},{key:"moveYCrosshairs",value:function(r){var a=this.ttCtx;null!==a.ycrosshairs&&Q.setAttrs(a.ycrosshairs,{y1:r,y2:r}),null!==a.ycrosshairsHidden&&Q.setAttrs(a.ycrosshairsHidden,{y1:r,y2:r})}},{key:"moveXAxisTooltip",value:function(r){var a=this.w,h=this.ttCtx;if(null!==h.xaxisTooltip&&0!==h.xcrosshairsWidth){h.xaxisTooltip.classList.add("apexcharts-active");var f,d=h.xaxisOffY+a.config.xaxis.tooltip.offsetY+a.globals.translateY+1+a.config.xaxis.offsetY;r-=h.xaxisTooltip.getBoundingClientRect().width/2,isNaN(r)||(r+=a.globals.translateX,f=new Q(this.ctx).getTextRects(h.xaxisTooltipText.innerHTML),h.xaxisTooltipText.style.minWidth=f.width+"px",h.xaxisTooltip.style.left=r+"px",h.xaxisTooltip.style.top=d+"px")}}},{key:"moveYAxisTooltip",value:function(r){var a=this.w,h=this.ttCtx;null===h.yaxisTTEls&&(h.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var d=parseInt(h.ycrosshairsHidden.getAttribute("y1"),10),f=a.globals.translateY+d,g=h.yaxisTTEls[r].getBoundingClientRect().height,y=a.globals.translateYAxisX[r]-2;a.config.yaxis[r].opposite&&(y-=26),f-=g/2,-1===a.globals.ignoreYAxisIndexes.indexOf(r)?(h.yaxisTTEls[r].classList.add("apexcharts-active"),h.yaxisTTEls[r].style.top=f+"px",h.yaxisTTEls[r].style.left=y+a.config.yaxis[r].tooltip.offsetX+"px"):h.yaxisTTEls[r].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=this.w,f=this.ttCtx,g=f.getElTooltip(),y=f.tooltipRect,x=null!==h?parseFloat(h):1,S=parseFloat(r)+x+5,M=parseFloat(a)+x/2;if(S>d.globals.gridWidth/2&&(S=S-y.ttWidth-x-10),S>d.globals.gridWidth-y.ttWidth-10&&(S=d.globals.gridWidth-y.ttWidth),S<-20&&(S=-20),d.config.tooltip.followCursor){var C=f.getElGrid().getBoundingClientRect();(S=f.e.clientX-C.left)>d.globals.gridWidth/2&&(S-=f.tooltipRect.ttWidth),(M=f.e.clientY+d.globals.translateY-C.top)>d.globals.gridHeight/2&&(M-=f.tooltipRect.ttHeight)}else d.globals.isBarHorizontal||y.ttHeight/2+M>d.globals.gridHeight&&(M=d.globals.gridHeight-y.ttHeight+d.globals.translateY);isNaN(S)||(g.style.left=(S+=d.globals.translateX)+"px",g.style.top=M+"px")}},{key:"moveMarkers",value:function(r,a){var h=this.w,d=this.ttCtx;if(h.globals.markers.size[r]>0)for(var f=h.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-marker")),g=0;g<f.length;g++)parseInt(f[g].getAttribute("rel"),10)===a&&(d.marker.resetPointsSize(),d.marker.enlargeCurrentPoint(a,f[g]));else d.marker.resetPointsSize(),this.moveDynamicPointOnHover(a,r)}},{key:"moveDynamicPointOnHover",value:function(r,a){var h,d,f=this.w,g=this.ttCtx,y=f.globals.pointsArray,x=g.tooltipUtil.getHoverMarkerSize(a),S=f.config.series[a].type;if(!S||"column"!==S&&"candlestick"!==S&&"boxPlot"!==S){h=y[a][r][0],d=y[a][r][1]?y[a][r][1]:0;var M=f.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"'] .apexcharts-series-markers circle"));M&&d<f.globals.gridHeight&&d>0&&(M.setAttribute("r",x),M.setAttribute("cx",h),M.setAttribute("cy",d)),this.moveXCrosshairs(h),g.fixedTooltip||this.moveTooltip(h,d,x)}}},{key:"moveDynamicPointsOnHover",value:function(r){var a,h=this.ttCtx,d=h.w,f=0,g=0,y=d.globals.pointsArray;a=new un(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var x=h.tooltipUtil.getHoverMarkerSize(a);y[a]&&(f=y[a][r][0],g=y[a][r][1]);var S=h.tooltipUtil.getAllMarkers();if(null!==S)for(var M=0;M<d.globals.series.length;M++){var C=y[M];if(d.globals.comboCharts&&void 0===C&&S.splice(M,0,null),C&&C.length){var P=y[M][r][1];S[M].setAttribute("cx",f),"rangeArea"!==d.config.chart.type||d.globals.comboCharts||(P-=Math.abs(P-y[M][r+d.globals.series[M].length][1])/2),null!==P&&!isNaN(P)&&P<d.globals.gridHeight+x&&P+x>0?(S[M]&&S[M].setAttribute("r",x),S[M]&&S[M].setAttribute("cy",P)):S[M]&&S[M].setAttribute("r",0)}}this.moveXCrosshairs(f),h.fixedTooltip||this.moveTooltip(f,g||d.globals.gridHeight,x)}},{key:"moveStickyTooltipOverBars",value:function(r,a){var h=this.w,d=this.ttCtx,f=h.globals.columnSeries?h.globals.columnSeries.length:h.globals.series.length,g=f>=2&&f%2==0?Math.floor(f/2):Math.floor(f/2)+1;h.globals.isBarHorizontal&&(g=new un(this.ctx).getActiveConfigSeriesIndex("desc")+1);var y=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(g,"'] path[j='").concat(r,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(g,"'] path[j='").concat(r,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(g,"'] path[j='").concat(r,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(g,"'] path[j='").concat(r,"']"));y||"number"!=typeof a||(y=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(a,"'] path[j='").concat(r,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(r,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(r,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(r,"']")));var x=y?parseFloat(y.getAttribute("cx")):0,S=y?parseFloat(y.getAttribute("cy")):0,M=y?parseFloat(y.getAttribute("barWidth")):0,C=d.getElGrid().getBoundingClientRect(),P=y&&(y.classList.contains("apexcharts-candlestick-area")||y.classList.contains("apexcharts-boxPlot-area"));h.globals.isXNumeric?(y&&!P&&(x-=f%2!=0?M/2:0),y&&P&&h.globals.comboCharts&&(x-=M/2)):h.globals.isBarHorizontal||(x=d.xAxisTicksPositions[r-1]+d.dataPointsDividedWidth/2,isNaN(x)&&(x=d.xAxisTicksPositions[r]-d.dataPointsDividedWidth/2)),h.globals.isBarHorizontal?S-=d.tooltipRect.ttHeight:h.config.tooltip.followCursor?S=d.e.clientY-C.top-d.tooltipRect.ttHeight/2:S+d.tooltipRect.ttHeight+15>h.globals.gridHeight&&(S=h.globals.gridHeight),h.globals.isBarHorizontal||this.moveXCrosshairs(x),d.fixedTooltip||this.moveTooltip(x,S||h.globals.gridHeight)}}]),V}(),cu=function(){function V(r){zt(this,V),this.w=r.w,this.ttCtx=r,this.ctx=r.ctx,this.tooltipPosition=new Dl(r)}return Dt(V,[{key:"drawDynamicPoints",value:function(){var r=this.w,a=new Q(this.ctx),h=new Xo(this.ctx),d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series");d=hn(d),r.config.chart.stacked&&d.sort(function(C,P){return parseFloat(C.getAttribute("data:realIndex"))-parseFloat(P.getAttribute("data:realIndex"))});for(var f=0;f<d.length;f++){var g=d[f].querySelector(".apexcharts-series-markers-wrap");if(null!==g){var y=void 0,x="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==r.config.chart.type&&"area"!==r.config.chart.type||r.globals.comboCharts||r.config.tooltip.intersect||(x+=" no-pointer-events");var S=h.getMarkerConfig({cssClass:x,seriesIndex:Number(g.getAttribute("data:realIndex"))});(y=a.drawMarker(0,0,S)).node.setAttribute("default-marker-size",0);var M=document.createElementNS(r.globals.SVGNS,"g");M.classList.add("apexcharts-series-markers"),M.appendChild(y.node),g.appendChild(M)}}}},{key:"enlargeCurrentPoint",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=this.w;"bubble"!==f.config.chart.type&&this.newPointSize(r,a);var g=a.getAttribute("cx"),y=a.getAttribute("cy");if(null!==h&&null!==d&&(g=h,y=d),this.tooltipPosition.moveXCrosshairs(g),!this.fixedTooltip){if("radar"===f.config.chart.type){var x=this.ttCtx.getElGrid().getBoundingClientRect();g=this.ttCtx.e.clientX-x.left}this.tooltipPosition.moveTooltip(g,y,f.config.markers.hover.size)}}},{key:"enlargePoints",value:function(r){for(var a=this.w,h=this,d=this.ttCtx,f=r,g=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),y=a.config.markers.hover.size,x=0;x<g.length;x++){var S=g[x].getAttribute("rel"),M=g[x].getAttribute("index");if(void 0===y&&(y=a.globals.markers.size[M]+a.config.markers.hover.sizeOffset),f===parseInt(S,10)){h.newPointSize(f,g[x]);var C=g[x].getAttribute("cx"),P=g[x].getAttribute("cy");h.tooltipPosition.moveXCrosshairs(C),d.fixedTooltip||h.tooltipPosition.moveTooltip(C,P,y)}else h.oldPointSize(g[x])}}},{key:"newPointSize",value:function(r,a){var h=this.w,d=h.config.markers.hover.size,f=0===r?a.parentNode.firstChild:a.parentNode.lastChild;if("0"!==f.getAttribute("default-marker-size")){var g=parseInt(f.getAttribute("index"),10);void 0===d&&(d=h.globals.markers.size[g]+h.config.markers.hover.sizeOffset),d<0&&(d=0),f.setAttribute("r",d)}}},{key:"oldPointSize",value:function(r){var a=parseFloat(r.getAttribute("default-marker-size"));r.setAttribute("r",a)}},{key:"resetPointsSize",value:function(){for(var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=0;a<r.length;a++){var h=parseFloat(r[a].getAttribute("default-marker-size"));at.isNumber(h)&&h>=0?r[a].setAttribute("r",h):r[a].setAttribute("r",0)}}}]),V}(),du=function(){function V(r){zt(this,V),this.w=r.w;var a=this.w;this.ttCtx=r,this.isVerticalGroupedRangeBar=!a.globals.isBarHorizontal&&"rangeBar"===a.config.chart.type&&a.config.plotOptions.bar.rangeBarGroupRows}return Dt(V,[{key:"getAttr",value:function(r,a){return parseFloat(r.target.getAttribute(a))}},{key:"handleHeatTreeTooltip",value:function(r){var a=r.e,h=r.opt,d=r.x,f=r.y,y=this.ttCtx,x=this.w;if(a.target.classList.contains("apexcharts-".concat(r.type,"-rect"))){var S=this.getAttr(a,"i"),M=this.getAttr(a,"j"),C=this.getAttr(a,"cx"),P=this.getAttr(a,"cy"),F=this.getAttr(a,"width"),O=this.getAttr(a,"height");if(y.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:S,j:M,shared:!1,e:a}),x.globals.capturedSeriesIndex=S,x.globals.capturedDataPointIndex=M,d=C+y.tooltipRect.ttWidth/2+F,f=P+y.tooltipRect.ttHeight/2-O/2,y.tooltipPosition.moveXCrosshairs(C+F/2),d>x.globals.gridWidth/2&&(d=C-y.tooltipRect.ttWidth/2+F),y.w.config.tooltip.followCursor){var D=x.globals.dom.elWrap.getBoundingClientRect();d=x.globals.clientX-D.left-(d>x.globals.gridWidth/2?y.tooltipRect.ttWidth:0),f=x.globals.clientY-D.top-(f>x.globals.gridHeight/2?y.tooltipRect.ttHeight:0)}}return{x:d,y:f}}},{key:"handleMarkerTooltip",value:function(r){var a,h,d=r.e,f=r.opt,g=r.x,y=r.y,x=this.w,S=this.ttCtx;if(d.target.classList.contains("apexcharts-marker")){var M=parseInt(f.paths.getAttribute("cx"),10),C=parseInt(f.paths.getAttribute("cy"),10),P=parseFloat(f.paths.getAttribute("val"));if(h=parseInt(f.paths.getAttribute("rel"),10),a=parseInt(f.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,S.intersect){var F=at.findAncestor(f.paths,"apexcharts-series");F&&(a=parseInt(F.getAttribute("data:realIndex"),10))}if(S.tooltipLabels.drawSeriesTexts({ttItems:f.ttItems,i:a,j:h,shared:!S.showOnIntersect&&x.config.tooltip.shared,e:d}),"mouseup"===d.type&&S.markerClick(d,a,h),x.globals.capturedSeriesIndex=a,x.globals.capturedDataPointIndex=h,g=M,y=C+x.globals.translateY-1.4*S.tooltipRect.ttHeight,S.w.config.tooltip.followCursor){var O=S.getElGrid().getBoundingClientRect();y=S.e.clientY+x.globals.translateY-O.top}P<0&&(y=C),S.marker.enlargeCurrentPoint(h,f.paths,g,y)}return{x:g,y}}},{key:"handleBarTooltip",value:function(r){var a,h,d=r.e,f=r.opt,g=this.w,y=this.ttCtx,x=y.getElTooltip(),S=0,M=0,C=0,P=this.getBarTooltipXY({e:d,opt:f}),F=P.barHeight,O=P.j;g.globals.capturedSeriesIndex=a=P.i,g.globals.capturedDataPointIndex=O,g.globals.isBarHorizontal&&y.tooltipUtil.hasBars()||!g.config.tooltip.shared?(M=P.x,C=P.y,h=Array.isArray(g.config.stroke.width)?g.config.stroke.width[a]:g.config.stroke.width,S=M):g.globals.comboCharts||g.config.tooltip.shared||(S/=2),isNaN(C)&&(C=g.globals.svgHeight-y.tooltipRect.ttHeight);var D=parseInt(f.paths.parentNode.getAttribute("data:realIndex"),10),Y=g.globals.isMultipleYAxis?g.config.yaxis[D]&&g.config.yaxis[D].reversed:g.config.yaxis[0].reversed;if(M+y.tooltipRect.ttWidth>g.globals.gridWidth&&!Y?M-=y.tooltipRect.ttWidth:M<0&&(M=0),y.w.config.tooltip.followCursor){var G=y.getElGrid().getBoundingClientRect();C=y.e.clientY-G.top}null===y.tooltip&&(y.tooltip=g.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),g.config.tooltip.shared||y.tooltipPosition.moveXCrosshairs(g.globals.comboBarCount>0?S+h/2:S),!y.fixedTooltip&&(!g.config.tooltip.shared||g.globals.isBarHorizontal&&y.tooltipUtil.hasBars())&&(Y&&(M-=y.tooltipRect.ttWidth)<0&&(M=0),!Y||g.globals.isBarHorizontal&&y.tooltipUtil.hasBars()||(C=C+F-2*(g.globals.series[a][O]<0?F:0)),C=C+g.globals.translateY-y.tooltipRect.ttHeight/2,x.style.left=M+g.globals.translateX+"px",x.style.top=C+"px")}},{key:"getBarTooltipXY",value:function(r){var a=this,h=r.e,d=r.opt,f=this.w,g=null,y=this.ttCtx,x=0,S=0,M=0,C=0,P=0,F=h.target.classList;if(F.contains("apexcharts-bar-area")||F.contains("apexcharts-candlestick-area")||F.contains("apexcharts-boxPlot-area")||F.contains("apexcharts-rangebar-area")){var O=h.target,D=O.getBoundingClientRect(),Y=d.elGrid.getBoundingClientRect(),G=D.height;P=D.height;var U=D.width,b=parseInt(O.getAttribute("cx"),10),N=parseInt(O.getAttribute("cy"),10);C=parseFloat(O.getAttribute("barWidth"));var E="touchmove"===h.type?h.touches[0].clientX:h.clientX;g=parseInt(O.getAttribute("j"),10),x=parseInt(O.parentNode.getAttribute("rel"),10)-1;var X=O.getAttribute("data-range-y1"),W=O.getAttribute("data-range-y2");f.globals.comboCharts&&(x=parseInt(O.parentNode.getAttribute("data:realIndex"),10));var Z=function(it){return f.globals.isXNumeric?b-U/2:a.isVerticalGroupedRangeBar?b+U/2:b-y.dataPointsDividedWidth+U/2},et=function(){return N-y.dataPointsDividedHeight+G/2-y.tooltipRect.ttHeight/2};y.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:x,j:g,y1:X?parseInt(X,10):null,y2:W?parseInt(W,10):null,shared:!y.showOnIntersect&&f.config.tooltip.shared,e:h}),f.config.tooltip.followCursor?f.globals.isBarHorizontal?(S=E-Y.left+15,M=et()):(S=Z(),M=h.clientY-Y.top-y.tooltipRect.ttHeight/2-15):f.globals.isBarHorizontal?((S=b)<y.xyRatios.baseLineInvertedY&&(S=b-y.tooltipRect.ttWidth),M=et()):(S=Z(),M=N)}return{x:S,y:M,barHeight:P,barWidth:C,i:x,j:g}}}]),V}(),ui=function(){function V(r){zt(this,V),this.w=r.w,this.ttCtx=r}return Dt(V,[{key:"drawXaxisTooltip",value:function(){var r=this.w,a=this.ttCtx,h="bottom"===r.config.xaxis.position;a.xaxisOffY=h?r.globals.gridHeight+1:-r.globals.xAxisHeight-r.config.xaxis.axisTicks.height+3;var d=h?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",f=r.globals.dom.elWrap;a.isXAxisTooltipEnabled&&null===r.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(a.xaxisTooltip=document.createElement("div"),a.xaxisTooltip.setAttribute("class",d+" apexcharts-theme-"+r.config.tooltip.theme),f.appendChild(a.xaxisTooltip),a.xaxisTooltipText=document.createElement("div"),a.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),a.xaxisTooltipText.style.fontFamily=r.config.xaxis.tooltip.style.fontFamily||r.config.chart.fontFamily,a.xaxisTooltipText.style.fontSize=r.config.xaxis.tooltip.style.fontSize,a.xaxisTooltip.appendChild(a.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var r=this.w,a=this.ttCtx,h=0;h<r.config.yaxis.length;h++){var d=r.config.yaxis[h].opposite||r.config.yaxis[h].crosshairs.opposite;a.yaxisOffX=d?r.globals.gridWidth+1:1;var f="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,d?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),g=r.globals.dom.elWrap;null===r.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))&&(a.yaxisTooltip=document.createElement("div"),a.yaxisTooltip.setAttribute("class",f+" apexcharts-theme-"+r.config.tooltip.theme),g.appendChild(a.yaxisTooltip),0===h&&(a.yaxisTooltipText=[]),a.yaxisTooltipText[h]=document.createElement("div"),a.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),a.yaxisTooltip.appendChild(a.yaxisTooltipText[h]))}}},{key:"setXCrosshairWidth",value:function(){var r=this.w,a=this.ttCtx,h=a.getElXCrosshairs();if(a.xcrosshairsWidth=parseInt(r.config.xaxis.crosshairs.width,10),r.globals.comboCharts){var d=r.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==d&&"barWidth"===r.config.xaxis.crosshairs.width){var f=parseFloat(d.getAttribute("barWidth"));a.xcrosshairsWidth=f}else"tickWidth"===r.config.xaxis.crosshairs.width&&(a.xcrosshairsWidth=r.globals.gridWidth/r.globals.labels.length)}else if("tickWidth"===r.config.xaxis.crosshairs.width)a.xcrosshairsWidth=r.globals.gridWidth/r.globals.labels.length;else if("barWidth"===r.config.xaxis.crosshairs.width){var x=r.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==x){var S=parseFloat(x.getAttribute("barWidth"));a.xcrosshairsWidth=S}else a.xcrosshairsWidth=1}r.globals.isBarHorizontal&&(a.xcrosshairsWidth=0),null!==h&&a.xcrosshairsWidth>0&&h.setAttribute("width",a.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var r=this.w,a=this.ttCtx;a.ycrosshairs=r.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),a.ycrosshairsHidden=r.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(r,a,h){var d=this.ttCtx,f=this.w,g=f.globals.yLabelFormatters[r];if(d.yaxisTooltips[r]){var y=d.getElGrid().getBoundingClientRect(),M=f.globals.minYArr[r]+(f.globals.maxYArr[r]-f.globals.minYArr[r]-(a-y.top)*h.yRatio[r]);d.tooltipPosition.moveYCrosshairs(a-y.top),d.yaxisTooltipText[r].innerHTML=g(M),d.tooltipPosition.moveYAxisTooltip(r)}}}]),V}(),oi=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w;var a=this.w;this.tConfig=a.config.tooltip,this.tooltipUtil=new ka(this),this.tooltipLabels=new Ma(this),this.tooltipPosition=new Dl(this),this.marker=new cu(this),this.intersect=new du(this),this.axesTooltip=new ui(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!a.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Dt(V,[{key:"getElTooltip",value:function(r){return r||(r=this),r.w.globals.dom.baseEl?r.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(r){var a=this.w;this.xyRatios=r,this.isXAxisTooltipEnabled=a.config.xaxis.tooltip.enabled&&a.globals.axisCharts,this.yaxisTooltips=a.config.yaxis.map(function(g,y){return!!(g.show&&g.tooltip.enabled&&a.globals.axisCharts)}),this.allTooltipSeriesGroups=[],a.globals.axisCharts||(this.showTooltipTitle=!1);var h=document.createElement("div");if(h.classList.add("apexcharts-tooltip"),a.config.tooltip.cssClass&&h.classList.add(a.config.tooltip.cssClass),h.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),a.globals.dom.elWrap.appendChild(h),a.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var d=new Ii(this.ctx);this.xAxisTicksPositions=d.getXAxisTicksPositions()}if(!a.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==a.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==a.config.markers.size&&0!==a.globals.markers.largestSize||this.marker.drawDynamicPoints(this),a.globals.collapsedSeries.length!==a.globals.series.length){this.dataPointsDividedHeight=a.globals.gridHeight/a.globals.dataPoints,this.dataPointsDividedWidth=a.globals.gridWidth/a.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||a.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,h.appendChild(this.tooltipTitle));var f=a.globals.series.length;(a.globals.xyCharts||a.globals.comboCharts)&&this.tConfig.shared&&(f=this.showOnIntersect?1:a.globals.series.length),this.legendLabels=a.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(f),this.addSVGEvents()}}},{key:"createTTElements",value:function(r){for(var a=this,h=this.w,d=[],f=this.getElTooltip(),g=function(x){var S=document.createElement("div");S.classList.add("apexcharts-tooltip-series-group"),S.style.order=h.config.tooltip.inverseOrder?r-x:x+1,a.tConfig.shared&&a.tConfig.enabledOnSeries&&Array.isArray(a.tConfig.enabledOnSeries)&&a.tConfig.enabledOnSeries.indexOf(x)<0&&S.classList.add("apexcharts-tooltip-series-group-hidden");var M=document.createElement("span");M.classList.add("apexcharts-tooltip-marker"),M.style.backgroundColor=h.globals.colors[x],S.appendChild(M);var C=document.createElement("div");C.classList.add("apexcharts-tooltip-text"),C.style.fontFamily=a.tConfig.style.fontFamily||h.config.chart.fontFamily,C.style.fontSize=a.tConfig.style.fontSize,["y","goals","z"].forEach(function(P){var F=document.createElement("div");F.classList.add("apexcharts-tooltip-".concat(P,"-group"));var O=document.createElement("span");O.classList.add("apexcharts-tooltip-text-".concat(P,"-label")),F.appendChild(O);var D=document.createElement("span");D.classList.add("apexcharts-tooltip-text-".concat(P,"-value")),F.appendChild(D),C.appendChild(F)}),S.appendChild(C),f.appendChild(S),d.push(S)},y=0;y<r;y++)g(y);return d}},{key:"addSVGEvents",value:function(){var r=this.w,a=r.config.chart.type,h=this.getElTooltip(),d=!("bar"!==a&&"candlestick"!==a&&"boxPlot"!==a&&"rangeBar"!==a),f="area"===a||"line"===a||"scatter"===a||"bubble"===a||"radar"===a,g=r.globals.dom.Paper.node,y=this.getElGrid();y&&(this.seriesBound=y.getBoundingClientRect());var x,S=[],M=[],C={hoverArea:g,elGrid:y,tooltipEl:h,tooltipY:S,tooltipX:M,ttItems:this.ttItems};if(r.globals.axisCharts&&(f?x=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):d?x=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==a&&"treemap"!==a||(x=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),x&&x.length))for(var P=0;P<x.length;P++)S.push(x[P].getAttribute("cy")),M.push(x[P].getAttribute("cx"));if(r.globals.xyCharts&&!this.showOnIntersect||r.globals.comboCharts&&!this.showOnIntersect||d&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([g],C);else if(d&&!r.globals.comboCharts||f&&this.showOnIntersect)this.addDatapointEventsListeners(C);else if(!r.globals.axisCharts||"heatmap"===a||"treemap"===a){var F=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(F,C)}if(this.showOnIntersect){var O=r.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");O.length>0&&this.addPathsEventListeners(O,C),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(C)}}},{key:"drawFixedTooltipRect",value:function(){var r=this.w,a=this.getElTooltip(),h=a.getBoundingClientRect(),d=h.width+10,f=h.height+10,g=this.tConfig.fixed.offsetX,y=this.tConfig.fixed.offsetY,x=this.tConfig.fixed.position.toLowerCase();return x.indexOf("right")>-1&&(g=g+r.globals.svgWidth-d+10),x.indexOf("bottom")>-1&&(y=y+r.globals.svgHeight-f-10),a.style.left=g+"px",a.style.top=y+"px",{x:g,y,ttWidth:d,ttHeight:f}}},{key:"addDatapointEventsListeners",value:function(r){var a=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(a,r)}},{key:"addPathsEventListeners",value:function(r,a){for(var h=this,d=function(g){var y={paths:r[g],tooltipEl:a.tooltipEl,tooltipY:a.tooltipY,tooltipX:a.tooltipX,elGrid:a.elGrid,hoverArea:a.hoverArea,ttItems:a.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(x){return r[g].addEventListener(x,h.onSeriesHover.bind(h,y),{capture:!1,passive:!0})})},f=0;f<r.length;f++)d(f)}},{key:"onSeriesHover",value:function(r,a){var h=this,d=Date.now()-this.lastHoverTime;d>=100?this.seriesHover(r,a):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){h.seriesHover(r,a)},100-d))}},{key:"seriesHover",value:function(r,a){var h=this;this.lastHoverTime=Date.now();var d=[],f=this.w;f.config.chart.group&&(d=this.ctx.getGroupedCharts()),f.globals.axisCharts&&(f.globals.minX===-1/0&&f.globals.maxX===1/0||0===f.globals.dataPoints)||(d.length?d.forEach(function(g){var y=h.getElTooltip(g);g.w.globals.minX===h.w.globals.minX&&g.w.globals.maxX===h.w.globals.maxX&&g.w.globals.tooltip.seriesHoverByContext({chartCtx:g,ttCtx:g.w.globals.tooltip,opt:{paths:r.paths,tooltipEl:y,tooltipY:r.tooltipY,tooltipX:r.tooltipX,elGrid:r.elGrid,hoverArea:r.hoverArea,ttItems:g.w.globals.tooltip.ttItems},e:a})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:r,e:a}))}},{key:"seriesHoverByContext",value:function(r){var a=r.chartCtx,h=r.ttCtx,d=r.opt,f=r.e,g=a.w,y=this.getElTooltip();y&&(h.tooltipRect={x:0,y:0,ttWidth:y.getBoundingClientRect().width,ttHeight:y.getBoundingClientRect().height},h.e=f,h.tooltipUtil.hasBars()&&!g.globals.comboCharts&&!h.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new un(a).toggleSeriesOnHover(f,f.target.parentNode),h.fixedTooltip&&h.drawFixedTooltipRect(),g.globals.axisCharts?h.axisChartsTooltips({e:f,opt:d,tooltipRect:h.tooltipRect}):h.nonAxisChartsTooltips({e:f,opt:d,tooltipRect:h.tooltipRect}))}},{key:"axisChartsTooltips",value:function(r){var a,h,d=r.e,f=r.opt,g=this.w,y=f.elGrid.getBoundingClientRect(),x="touchmove"===d.type?d.touches[0].clientX:d.clientX,S="touchmove"===d.type?d.touches[0].clientY:d.clientY;if(this.clientY=S,this.clientX=x,g.globals.capturedSeriesIndex=-1,g.globals.capturedDataPointIndex=-1,S<y.top||S>y.top+y.height)this.handleMouseOut(f);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!g.config.tooltip.shared){var M=parseInt(f.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(M)<0)return void this.handleMouseOut(f)}var C=this.getElTooltip(),P=this.getElXCrosshairs(),F=g.globals.xyCharts||"bar"===g.config.chart.type&&!g.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||g.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===d.type||"touchmove"===d.type||"mouseup"===d.type){if(g.globals.collapsedSeries.length+g.globals.ancillaryCollapsedSeries.length===g.globals.series.length)return;null!==P&&P.classList.add("apexcharts-active");var O=this.yaxisTooltips.filter(function(G){return!0===G});if(null!==this.ycrosshairs&&O.length&&this.ycrosshairs.classList.add("apexcharts-active"),F&&!this.showOnIntersect)this.handleStickyTooltip(d,x,S,f);else if("heatmap"===g.config.chart.type||"treemap"===g.config.chart.type){var D=this.intersect.handleHeatTreeTooltip({e:d,opt:f,x:a,y:h,type:g.config.chart.type});h=D.y,C.style.left=(a=D.x)+"px",C.style.top=h+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:d,opt:f}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:d,opt:f,x:a,y:h});if(this.yaxisTooltips.length)for(var Y=0;Y<g.config.yaxis.length;Y++)this.axesTooltip.drawYaxisTooltipText(Y,S,this.xyRatios);f.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==d.type&&"touchend"!==d.type||this.handleMouseOut(f)}}},{key:"nonAxisChartsTooltips",value:function(r){var a=r.e,h=r.opt,d=r.tooltipRect,f=this.w,g=h.paths.getAttribute("rel"),y=this.getElTooltip(),x=f.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===a.type||"touchmove"===a.type){y.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:parseInt(g,10)-1,shared:!1});var M=f.globals.clientY-x.top-d.ttHeight-10;if(y.style.left=f.globals.clientX-x.left-d.ttWidth/2+"px",y.style.top=M+"px",f.config.legend.tooltipHoverFormatter){var C=g-1,P=(0,f.config.legend.tooltipHoverFormatter)(this.legendLabels[C].getAttribute("data:default-text"),{seriesIndex:C,dataPointIndex:C,w:f});this.legendLabels[C].innerHTML=P}}else"mouseout"!==a.type&&"touchend"!==a.type||(y.classList.remove("apexcharts-active"),f.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(F){var O=F.getAttribute("data:default-text");F.innerHTML=decodeURIComponent(O)}))}},{key:"handleStickyTooltip",value:function(r,a,h,d){var f=this.w,g=this.tooltipUtil.getNearestValues({context:this,hoverArea:d.hoverArea,elGrid:d.elGrid,clientX:a,clientY:h}),y=g.j,x=g.capturedSeries;f.globals.collapsedSeriesIndices.includes(x)&&(x=null);var S=d.elGrid.getBoundingClientRect();if(g.hoverX<0||g.hoverX>S.width)this.handleMouseOut(d);else if(null!==x)this.handleStickyCapturedSeries(r,x,d,y);else if(this.tooltipUtil.isXoverlap(y)||f.globals.isBarHorizontal){var M=f.globals.series.findIndex(function(C,P){return!f.globals.collapsedSeriesIndices.includes(P)});this.create(r,this,M,y,d.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(r,a,h,d){var f=this.w;if(this.tConfig.shared||null!==f.globals.series[a][d]){if(void 0!==f.globals.series[a][d])this.tConfig.shared&&this.tooltipUtil.isXoverlap(d)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(r,this,a,d,h.ttItems):this.create(r,this,a,d,h.ttItems,!1);else if(this.tooltipUtil.isXoverlap(d)){var g=f.globals.series.findIndex(function(y,x){return!f.globals.collapsedSeriesIndices.includes(x)});this.create(r,this,g,d,h.ttItems)}}else this.handleMouseOut(h)}},{key:"deactivateHoverFilter",value:function(){for(var r=this.w,a=new Q(this.ctx),h=r.globals.dom.Paper.select(".apexcharts-bar-area"),d=0;d<h.length;d++)a.pathMouseLeave(h[d])}},{key:"handleMouseOut",value:function(r){var a=this.w,h=this.getElXCrosshairs();if(r.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==a.config.chart.type&&this.marker.resetPointsSize(),null!==h&&h.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var d=0;d<this.yaxisTTEls.length;d++)this.yaxisTTEls[d].classList.remove("apexcharts-active")}a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(f){var g=f.getAttribute("data:default-text");f.innerHTML=decodeURIComponent(g)})}},{key:"markerClick",value:function(r,a,h){var d=this.w;"function"==typeof d.config.chart.events.markerClick&&d.config.chart.events.markerClick(r,this.ctx,{seriesIndex:a,dataPointIndex:h,w:d}),this.ctx.events.fireEvent("markerClick",[r,this.ctx,{seriesIndex:a,dataPointIndex:h,w:d}])}},{key:"create",value:function(r,a,h,d,f){var g,y,x,S,M,C,P,F,O,D,Y,G,U,b,N,E,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,W=this.w,Z=a;"mouseup"===r.type&&this.markerClick(r,h,d),null===X&&(X=this.tConfig.shared);var et=this.tooltipUtil.hasMarkers(h),it=this.tooltipUtil.getElBars();if(W.config.legend.tooltipHoverFormatter){var pt=W.config.legend.tooltipHoverFormatter,wt=Array.from(this.legendLabels);wt.forEach(function(Le){var Te=Le.getAttribute("data:default-text");Le.innerHTML=decodeURIComponent(Te)});for(var xt=0;xt<wt.length;xt++){var Ft=wt[xt],Nt=parseInt(Ft.getAttribute("i"),10),_t=decodeURIComponent(Ft.getAttribute("data:default-text")),ne=pt(_t,{seriesIndex:X?Nt:h,dataPointIndex:d,w:W});if(X)Ft.innerHTML=W.globals.collapsedSeriesIndices.indexOf(Nt)<0?ne:_t;else if(Ft.innerHTML=Nt===h?ne:_t,h===Nt)break}}var oe=Et(Et({ttItems:f,i:h,j:d},void 0!==(null===(g=W.globals.seriesRange)||void 0===g||null===(y=g[h])||void 0===y||null===(x=y[d])||void 0===x||null===(S=x.y[0])||void 0===S?void 0:S.y1)&&{y1:null===(M=W.globals.seriesRange)||void 0===M||null===(C=M[h])||void 0===C||null===(P=C[d])||void 0===P||null===(F=P.y[0])||void 0===F?void 0:F.y1}),void 0!==(null===(O=W.globals.seriesRange)||void 0===O||null===(D=O[h])||void 0===D||null===(Y=D[d])||void 0===Y||null===(G=Y.y[0])||void 0===G?void 0:G.y2)&&{y2:null===(U=W.globals.seriesRange)||void 0===U||null===(b=U[h])||void 0===b||null===(N=b[d])||void 0===N||null===(E=N.y[0])||void 0===E?void 0:E.y2});if(X){if(Z.tooltipLabels.drawSeriesTexts(Et(Et({},oe),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),et)W.globals.markers.largestSize>0?Z.marker.enlargePoints(d):Z.tooltipPosition.moveDynamicPointsOnHover(d);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(it),this.barSeriesHeight>0)){var ue=new Q(this.ctx),re=W.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(d,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(d,h);for(var ce=0;ce<re.length;ce++)ue.pathMouseEnter(re[ce])}}else Z.tooltipLabels.drawSeriesTexts(Et({shared:!1},oe)),this.tooltipUtil.hasBars()&&Z.tooltipPosition.moveStickyTooltipOverBars(d,h),et&&Z.tooltipPosition.moveMarkers(h,d)}}]),V}(),ls=function(){function V(r){zt(this,V),this.w=r.w,this.barCtx=r,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Dt(V,[{key:"handleBarDataLabels",value:function(r){var a=r.x,h=r.y,d=r.y1,f=r.y2,g=r.i,y=r.j,x=r.realIndex,S=r.groupIndex,M=r.series,C=r.barHeight,P=r.barWidth,F=r.barXPosition,O=r.barYPosition,D=r.visibleSeries,Y=r.renderedPath,G=this.w,U=new Q(this.barCtx.ctx),b=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[x]:this.barCtx.strokeWidth,N=a+parseFloat(P*D),E=h+parseFloat(C*D);G.globals.isXNumeric&&!G.globals.isBarHorizontal&&(N=a+parseFloat(P*(D+1)),E=h+parseFloat(C*(D+1))-b);var X,it,W=null,Z=a,et=h,pt=G.config.dataLabels,wt=this.barCtx.barOptions.dataLabels,xt=this.barCtx.barOptions.dataLabels.total;void 0!==O&&this.barCtx.isRangeBar&&(E=O,et=O),void 0!==F&&this.barCtx.isVerticalGroupedRangeBar&&(N=F,Z=F);var Ft=pt.offsetX,Nt=pt.offsetY,_t={width:0,height:0};G.config.dataLabels.enabled&&(_t=U.getTextRects(G.globals.yLabelFormatters[0](this.barCtx.series[g][y]),parseFloat(pt.style.fontSize)));var oe={x:a,y:h,i:g,j:y,realIndex:x,groupIndex:S||-1,renderedPath:Y,bcx:N,bcy:E,barHeight:C,barWidth:P,textRects:_t,strokeWidth:b,dataLabelsX:Z,dataLabelsY:et,dataLabelsConfig:pt,barDataLabelsConfig:wt,barTotalDataLabelsConfig:xt,offX:Ft,offY:Nt};return it=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(oe):this.calculateColumnsDataLabelsPosition(oe),Y.attr({cy:it.bcy,cx:it.bcx,j:y,val:M[g][y],barHeight:C,barWidth:P}),X=this.drawCalculatedDataLabels({x:it.dataLabelsX,y:it.dataLabelsY,val:this.barCtx.isRangeBar?[d,f]:M[g][y],i:x,j:y,barWidth:P,barHeight:C,textRects:_t,dataLabelsConfig:pt}),G.config.chart.stacked&&xt.enabled&&(W=this.drawTotalDataLabels({x:it.totalDataLabelsX,y:it.totalDataLabelsY,barWidth:P,barHeight:C,realIndex:x,textAnchor:it.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:x,j:y}),dataLabelsConfig:pt,barTotalDataLabelsConfig:xt})),{dataLabels:X,totalDataLabels:W}}},{key:"getStackedTotalDataLabel",value:function(r){var a=r.realIndex,h=r.j,d=this.w,f=this.barCtx.stackedSeriesTotals[h];return this.totalFormatter&&(f=this.totalFormatter(f,Et(Et({},d),{},{seriesIndex:a,dataPointIndex:h,w:d}))),f}},{key:"calculateColumnsDataLabelsPosition",value:function(r){var a,h,d=this.w,f=r.i,g=r.j,y=r.realIndex,x=r.groupIndex,S=r.y,M=r.bcx,C=r.barWidth,P=r.barHeight,F=r.textRects,O=r.dataLabelsX,D=r.dataLabelsY,Y=r.dataLabelsConfig,G=r.barDataLabelsConfig,U=r.barTotalDataLabelsConfig,b=r.strokeWidth,N=r.offX,E=r.offY;P=Math.abs(P);var X="vertical"===d.config.plotOptions.bar.dataLabels.orientation,W=this.barCtx.barHelpers.getZeroValueEncounters({i:f,j:g}).zeroEncounters;M=M-b/2+(-1!==x?x*C:0),this.barCtx.isVerticalGroupedRangeBar?O+=C/2:(O=d.globals.isXNumeric?M-C/2+N:M-d.globals.gridWidth/d.globals.dataPoints+C/2+N,W>0&&d.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(O-=C*W)),X&&(O=O+F.height/2-b/2-2);var et=this.barCtx.series[f][g]<0,it=S;switch(this.barCtx.isReversed&&(it=S-P+(et?2*P:0),S-=P),G.position){case"center":D=X?et?it-P/2+E:it+P/2-E:et?it-P/2+F.height/2+E:it+P/2+F.height/2-E;break;case"bottom":D=X?et?it-P+E:it+P-E:et?it-P+F.height+b+E:it+P-F.height/2+b-E;break;case"top":D=X?et?it+E:it-E:et?it-F.height/2-E:it+F.height+E}if(this.barCtx.lastActiveBarSerieIndex===y&&U.enabled){var pt=new Q(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:y,j:g}),Y.fontSize);a=et?it-pt.height/2-E-U.offsetY+18:it+pt.height+E+U.offsetY-18,h=O+U.offsetX}return d.config.chart.stacked||(D<0?D=0+b:D+F.height/3>d.globals.gridHeight&&(D=d.globals.gridHeight-b)),{bcx:M,bcy:S,dataLabelsX:O,dataLabelsY:D,totalDataLabelsX:h,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(r){var a=this.w,h=r.x,d=r.i,f=r.j,g=r.realIndex,y=r.groupIndex,x=r.bcy,S=r.barHeight,M=r.barWidth,C=r.textRects,P=r.dataLabelsX,F=r.strokeWidth,O=r.dataLabelsConfig,D=r.barDataLabelsConfig,Y=r.barTotalDataLabelsConfig,G=r.offX,U=r.offY,b=a.globals.gridHeight/a.globals.dataPoints;M=Math.abs(M);var N,E,X=(x+=-1!==y?y*S:0)-(this.barCtx.isRangeBar?0:b)+S/2+C.height/2+U-3,W="start",Z=this.barCtx.series[d][f]<0,et=h;switch(this.barCtx.isReversed&&(et=h+M-(Z?2*M:0),h=a.globals.gridWidth-M),D.position){case"center":P=Z?et+M/2-G:Math.max(C.width/2,et-M/2)+G;break;case"bottom":P=Z?et+M-F-Math.round(C.width/2)-G:et-M+F+Math.round(C.width/2)+G;break;case"top":P=Z?et-F+Math.round(C.width/2)-G:et-F-Math.round(C.width/2)+G}if(this.barCtx.lastActiveBarSerieIndex===g&&Y.enabled){var it=new Q(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:g,j:f}),O.fontSize);Z?(N=et-F+Math.round(it.width/2)-G-Y.offsetX-15,W="end"):N=et-F-Math.round(it.width/2)+G+Y.offsetX+15,E=X+Y.offsetY}return a.config.chart.stacked||(P<0?P=P+C.width+F:P+C.width/2>a.globals.gridWidth&&(P=a.globals.gridWidth-C.width-F)),{bcx:h,bcy:x,dataLabelsX:P,dataLabelsY:X,totalDataLabelsX:N,totalDataLabelsY:E,totalDataLabelsAnchor:W}}},{key:"drawCalculatedDataLabels",value:function(r){var a=r.x,h=r.y,d=r.val,f=r.i,g=r.j,y=r.textRects,x=r.barHeight,S=r.barWidth,M=r.dataLabelsConfig,C=this.w,P="rotate(0)";"vertical"===C.config.plotOptions.bar.dataLabels.orientation&&(P="rotate(-90, ".concat(a,", ").concat(h,")"));var F=new Kn(this.barCtx.ctx),O=new Q(this.barCtx.ctx),D=M.formatter,Y=null,G=C.globals.collapsedSeriesIndices.indexOf(f)>-1;if(M.enabled&&!G){Y=O.group({class:"apexcharts-data-labels",transform:P});var U="";void 0!==d&&(U=D(d,Et(Et({},C),{},{seriesIndex:f,dataPointIndex:g,w:C}))),!d&&C.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(U="");var b=C.globals.series[f][g]<0,N=C.config.plotOptions.bar.dataLabels.position;"vertical"===C.config.plotOptions.bar.dataLabels.orientation&&("top"===N&&(M.textAnchor=b?"end":"start"),"center"===N&&(M.textAnchor="middle"),"bottom"===N&&(M.textAnchor=b?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&S<O.getTextRects(U,parseFloat(M.style.fontSize)).width&&(U=""),C.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?y.width/1.6>Math.abs(S)&&(U=""):y.height/1.6>Math.abs(x)&&(U=""));var E=Et({},M);this.barCtx.isHorizontal&&d<0&&("start"===M.textAnchor?E.textAnchor="end":"end"===M.textAnchor&&(E.textAnchor="start")),F.plotDataLabelsText({x:a,y:h,text:U,i:f,j:g,parent:Y,dataLabelsConfig:E,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return Y}},{key:"drawTotalDataLabels",value:function(r){var a,h=r.x,d=r.y,f=r.val,g=r.barWidth,y=r.barHeight,x=r.realIndex,S=r.textAnchor,M=r.barTotalDataLabelsConfig,C=this.w,P=new Q(this.barCtx.ctx);return M.enabled&&void 0!==h&&void 0!==d&&this.barCtx.lastActiveBarSerieIndex===x&&(a=P.drawText({x:h-(!C.globals.isBarHorizontal&&C.globals.seriesGroups.length?g/C.globals.seriesGroups.length:0),y:d-(C.globals.isBarHorizontal&&C.globals.seriesGroups.length?y/C.globals.seriesGroups.length:0),foreColor:M.style.color,text:f,textAnchor:S,fontFamily:M.style.fontFamily,fontSize:M.style.fontSize,fontWeight:M.style.fontWeight})),a}}]),V}(),zl=function(){function V(r){zt(this,V),this.w=r.w,this.barCtx=r}return Dt(V,[{key:"initVariables",value:function(r){var a=this.w;this.barCtx.series=r,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var h=0;h<r.length;h++)if(r[h].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=r[h].length),a.globals.isXNumeric)for(var d=0;d<r[h].length;d++)a.globals.seriesX[h][d]>a.globals.minX&&a.globals.seriesX[h][d]<a.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=a.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],a.globals.comboCharts||this.checkZeroSeries({series:r})}},{key:"initialPositions",value:function(){var r,a,h,d,f,g,y,x,S=this.w,M=S.globals.dataPoints;this.barCtx.isRangeBar&&(M=S.globals.labels.length);var C=this.barCtx.seriesLen;if(S.config.plotOptions.bar.rangeBarGroupRows&&(C=1),this.barCtx.isHorizontal)f=(h=S.globals.gridHeight/M)/C,S.globals.isXNumeric&&(f=(h=S.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),f=f*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(f=parseInt(this.barCtx.barOptions.barHeight,10)),x=this.barCtx.baseLineInvertedY+S.globals.padHorizontal+(this.barCtx.isReversed?S.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(x=S.globals.gridWidth/2),a=(h-f*this.barCtx.seriesLen)/2;else{if(d=S.globals.gridWidth/this.barCtx.visibleItems,S.config.xaxis.convertedCatToNumeric&&(d=S.globals.gridWidth/S.globals.dataPoints),g=d/C*parseInt(this.barCtx.barOptions.columnWidth,10)/100,S.globals.isXNumeric){var P=this.barCtx.xRatio;S.globals.minXDiff&&.5!==S.globals.minXDiff&&S.globals.minXDiff/P>0&&(d=S.globals.minXDiff/P),(g=d/C*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(g=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(g=parseInt(this.barCtx.barOptions.columnWidth,10)),y=S.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?S.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),r=S.globals.padHorizontal+(d-g*this.barCtx.seriesLen)/2}return S.globals.barHeight=f,S.globals.barWidth=g,{x:r,y:a,yDivision:h,xDivision:d,barHeight:f,barWidth:g,zeroH:y,zeroW:x}}},{key:"initializeStackedPrevVars",value:function(r){var a=r.w;a.globals.hasSeriesGroups?a.globals.seriesGroups.forEach(function(h){r[h]||(r[h]={}),r[h].prevY=[],r[h].prevX=[],r[h].prevYF=[],r[h].prevXF=[],r[h].prevYVal=[],r[h].prevXVal=[]}):(r.prevY=[],r.prevX=[],r.prevYF=[],r.prevXF=[],r.prevYVal=[],r.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(r){var a=r.w;a.globals.hasSeriesGroups?a.globals.seriesGroups.forEach(function(h){r[h]||(r[h]={}),r[h].xArrj=[],r[h].xArrjF=[],r[h].xArrjVal=[],r[h].yArrj=[],r[h].yArrjF=[],r[h].yArrjVal=[]}):(r.xArrj=[],r.xArrjF=[],r.xArrjVal=[],r.yArrj=[],r.yArrjF=[],r.yArrjVal=[])}},{key:"getPathFillColor",value:function(r,a,h,d){var f,g,y,x,S=this.w,M=new wi(this.barCtx.ctx),C=null,P=this.barCtx.barOptions.distributed?h:a;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(F){r[a][h]>=F.from&&r[a][h]<=F.to&&(C=F.color)}),S.config.series[a].data[h]&&S.config.series[a].data[h].fillColor&&(C=S.config.series[a].data[h].fillColor),M.fillPath({seriesNumber:this.barCtx.barOptions.distributed?P:d,dataPointIndex:h,color:C,value:r[a][h],fillConfig:null===(f=S.config.series[a].data[h])||void 0===f?void 0:f.fill,fillType:null!==(g=S.config.series[a].data[h])&&void 0!==g&&null!==(y=g.fill)&&void 0!==y&&y.type?null===(x=S.config.series[a].data[h])||void 0===x?void 0:x.fill.type:Array.isArray(S.config.fill.type)?S.config.fill.type[a]:S.config.fill.type})}},{key:"getStrokeWidth",value:function(r,a,h){var d=0,f=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[r][a],f.config.stroke.show&&(this.barCtx.isNullValue||(d=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth)),d}},{key:"shouldApplyRadius",value:function(r){var a=this.w,h=!1;return a.config.plotOptions.bar.borderRadius>0&&(a.config.chart.stacked&&"last"===a.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===r&&(h=!0):h=!0),h}},{key:"barBackground",value:function(r){var a=r.j,h=r.i,d=r.x1,f=r.x2,g=r.y1,y=r.y2,x=r.elSeries,S=this.w,M=new Q(this.barCtx.ctx),C=new un(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&C===h){a>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(a%=this.barCtx.barOptions.colors.backgroundBarColors.length);var F=M.drawRect(void 0!==d?d:0,void 0!==g?g:0,void 0!==f?f:S.globals.gridWidth,void 0!==y?y:S.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[a],this.barCtx.barOptions.colors.backgroundBarOpacity);x.add(F),F.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(r){var a,h=r.barWidth,d=r.barXPosition,f=r.y1,g=r.y2,y=r.strokeWidth,x=r.seriesGroup,S=r.realIndex,M=r.i,C=r.j,P=r.w,F=new Q(this.barCtx.ctx);(y=Array.isArray(y)?y[S]:y)||(y=0);var O=h,D=d;null!==(a=P.config.series[S].data[C])&&void 0!==a&&a.columnWidthOffset&&(D=d-P.config.series[S].data[C].columnWidthOffset/2,O=h+P.config.series[S].data[C].columnWidthOffset);var Y=D,G=D+O;g+=.001;var U=F.move(Y,f+=.001),b=F.move(Y,f),N=F.line(G-y,f);if(P.globals.previousPaths.length>0&&(b=this.barCtx.getPreviousPath(S,C,!1)),U=U+F.line(Y,g)+F.line(G-y,g)+F.line(G-y,f)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),b=b+F.line(Y,f)+N+N+N+N+N+F.line(Y,f)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(S)&&(U=F.roundPathCorners(U,P.config.plotOptions.bar.borderRadius)),P.config.chart.stacked){var E=this.barCtx;P.globals.hasSeriesGroups&&x&&(E=this.barCtx[x]),E.yArrj.push(g),E.yArrjF.push(Math.abs(f-g)),E.yArrjVal.push(this.barCtx.series[M][C])}return{pathTo:U,pathFrom:b}}},{key:"getBarpaths",value:function(r){var a,h=r.barYPosition,d=r.barHeight,f=r.x1,g=r.x2,y=r.strokeWidth,x=r.seriesGroup,S=r.realIndex,M=r.i,C=r.j,P=r.w,F=new Q(this.barCtx.ctx);(y=Array.isArray(y)?y[S]:y)||(y=0);var O=h,D=d;null!==(a=P.config.series[S].data[C])&&void 0!==a&&a.barHeightOffset&&(O=h-P.config.series[S].data[C].barHeightOffset/2,D=d+P.config.series[S].data[C].barHeightOffset);var Y=O,G=O+D;g+=.001;var U=F.move(f+=.001,Y),b=F.move(f,Y);P.globals.previousPaths.length>0&&(b=this.barCtx.getPreviousPath(S,C,!1));var N=F.line(f,G-y);if(U=U+F.line(g,Y)+F.line(g,G-y)+N+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),b=b+F.line(f,Y)+N+N+N+N+N+F.line(f,Y)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(S)&&(U=F.roundPathCorners(U,P.config.plotOptions.bar.borderRadius)),P.config.chart.stacked){var E=this.barCtx;P.globals.hasSeriesGroups&&x&&(E=this.barCtx[x]),E.xArrj.push(g),E.xArrjF.push(Math.abs(f-g)),E.xArrjVal.push(this.barCtx.series[M][C])}return{pathTo:U,pathFrom:b}}},{key:"checkZeroSeries",value:function(r){for(var a=r.series,h=this.w,d=0;d<a.length;d++){for(var f=0,g=0;g<a[h.globals.maxValsInArrayIndex].length;g++)f+=a[d][g];0===f&&this.barCtx.zeroSerieses.push(d)}}},{key:"getXForValue",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:a;return null!=r&&(h=a+r/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?r/this.barCtx.invertedYRatio:0)),h}},{key:"getYForValue",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:a;return null!=r&&(h=a-r/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?r/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),h}},{key:"getGoalValues",value:function(r,a,h,d,f){var g=this,y=this.w,x=[],S=function(P,F){var O;x.push((as(O={},r,"x"===r?g.getXForValue(P,a,!1):g.getYForValue(P,h,!1)),as(O,"attrs",F),O))};if(y.globals.seriesGoals[d]&&y.globals.seriesGoals[d][f]&&Array.isArray(y.globals.seriesGoals[d][f])&&y.globals.seriesGoals[d][f].forEach(function(P){S(P.value,P)}),this.barCtx.barOptions.isDumbbell&&y.globals.seriesRange.length){var M=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:y.globals.colors,C={strokeHeight:"x"===r?0:y.globals.markers.size[d],strokeWidth:"x"===r?y.globals.markers.size[d]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(M[d])?M[d][0]:M[d]};S(y.globals.seriesRangeStart[d][f],C),S(y.globals.seriesRangeEnd[d][f],Et(Et({},C),{},{strokeColor:Array.isArray(M[d])?M[d][1]:M[d]}))}return x}},{key:"drawGoalLine",value:function(r){var a=r.barXPosition,h=r.barYPosition,d=r.goalX,f=r.goalY,g=r.barWidth,y=r.barHeight,x=new Q(this.barCtx.ctx),S=x.group({className:"apexcharts-bar-goals-groups"});S.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:S.node}),S.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var M=null;return this.barCtx.isHorizontal?Array.isArray(d)&&d.forEach(function(C){var P=void 0!==C.attrs.strokeHeight?C.attrs.strokeHeight:y/2,F=h+P+y/2;M=x.drawLine(C.x,F-2*P,C.x,F,C.attrs.strokeColor?C.attrs.strokeColor:void 0,C.attrs.strokeDashArray,C.attrs.strokeWidth?C.attrs.strokeWidth:2,C.attrs.strokeLineCap),S.add(M)}):Array.isArray(f)&&f.forEach(function(C){var P=void 0!==C.attrs.strokeWidth?C.attrs.strokeWidth:g/2,F=a+P+g/2;M=x.drawLine(F-2*P,C.y,F,C.y,C.attrs.strokeColor?C.attrs.strokeColor:void 0,C.attrs.strokeDashArray,C.attrs.strokeHeight?C.attrs.strokeHeight:2,C.attrs.strokeLineCap),S.add(M)}),S}},{key:"drawBarShadow",value:function(r){var a=r.prevPaths,h=r.currPaths,d=r.color,f=this.w,g=a.x,y=a.x1,S=h.x,M=h.x1,C=h.barYPosition,P=a.barYPosition+h.barHeight,F=new Q(this.barCtx.ctx),O=new at,D=F.move(y,P)+F.line(g,P)+F.line(S,C)+F.line(M,C)+F.line(y,P)+("around"===f.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return F.drawPath({d:D,fill:O.shadeColor(.5,at.rgb2hex(d)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(r){var a=r.i,h=r.j,f=0,g=0;return this.w.globals.seriesPercent.forEach(function(y,x){y[h]&&f++,x<a&&0===y[h]&&g++}),{nonZeroColumns:f,zeroEncounters:g}}}]),V}(),ao=function(){function V(r,a){zt(this,V),this.ctx=r,this.w=r.w;var h=this.w;this.barOptions=h.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=h.config.stroke.width,this.isNullValue=!1,this.isRangeBar=h.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!h.globals.isBarHorizontal&&h.globals.seriesRange.length&&h.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=a,null!==this.xyRatios&&(this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.invertedXRatio=a.invertedXRatio,this.invertedYRatio=a.invertedYRatio,this.baseLineY=a.baseLineY,this.baseLineInvertedY=a.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var d=new un(this.ctx);this.lastActiveBarSerieIndex=d.getActiveConfigSeriesIndex("desc",["bar","column"]);var f=d.getBarSeriesIndices(),g=new Lt(this.ctx);this.stackedSeriesTotals=g.getStackedSeriesTotals(this.w.config.series.map(function(y,x){return-1===f.indexOf(x)?x:-1}).filter(function(y){return-1!==y})),this.barHelpers=new zl(this)}return Dt(V,[{key:"draw",value:function(r,a){var h=this.w,d=new Q(this.ctx),f=new Lt(this.ctx,h);r=f.getLogSeries(r),this.series=r,this.yRatio=f.getLogYRatios(this.yRatio),this.barHelpers.initVariables(r);var g=d.group({class:"apexcharts-bar-series apexcharts-plot-series"});h.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var y=0,x=0;y<r.length;y++,x++){var S,M,C,P,F=void 0,O=void 0,D=[],Y=[],G=h.globals.comboCharts?a[y]:y,U=d.group({class:"apexcharts-series",rel:y+1,seriesName:at.escapeString(h.globals.seriesNames[G]),"data:realIndex":G});this.ctx.series.addCollapsedClassToSeries(U,G),r[y].length>0&&(this.visibleI=this.visibleI+1);var b=0,N=0;this.yRatio.length>1&&(this.yaxisIndex=G),this.isReversed=h.config.yaxis[this.yaxisIndex]&&h.config.yaxis[this.yaxisIndex].reversed;var E=this.barHelpers.initialPositions();O=E.y,b=E.barHeight,M=E.yDivision,P=E.zeroW,F=E.x,N=E.barWidth,S=E.xDivision,C=E.zeroH,this.horizontal||Y.push(F+N/2);var X=d.group({class:"apexcharts-datalabels","data:realIndex":G});h.globals.delayedElements.push({el:X.node}),X.node.classList.add("apexcharts-element-hidden");var W=d.group({class:"apexcharts-bar-goals-markers"}),Z=d.group({class:"apexcharts-bar-shadows"});h.globals.delayedElements.push({el:Z.node}),Z.node.classList.add("apexcharts-element-hidden");for(var et=0;et<r[y].length;et++){var it=this.barHelpers.getStrokeWidth(y,et,G),pt=null,wt={indexes:{i:y,j:et,realIndex:G,bc:x},x:F,y:O,strokeWidth:it,elSeries:U};this.isHorizontal?(pt=this.drawBarPaths(Et(Et({},wt),{},{barHeight:b,zeroW:P,yDivision:M})),N=this.series[y][et]/this.invertedYRatio):(pt=this.drawColumnPaths(Et(Et({},wt),{},{xDivision:S,barWidth:N,zeroH:C})),b=this.series[y][et]/this.yRatio[this.yaxisIndex]);var xt=this.barHelpers.getPathFillColor(r,y,et,G);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&et>0){var Ft=this.barHelpers.drawBarShadow({color:"string"==typeof xt&&-1===xt?.indexOf("url")?xt:at.hexToRgba(h.globals.colors[y]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:pt});Ft&&Z.add(Ft)}this.pathArr.push(pt);var Nt=this.barHelpers.drawGoalLine({barXPosition:pt.barXPosition,barYPosition:pt.barYPosition,goalX:pt.goalX,goalY:pt.goalY,barHeight:b,barWidth:N});Nt&&W.add(Nt),O=pt.y,F=pt.x,et>0&&Y.push(F+N/2),D.push(O),this.renderSeries({realIndex:G,pathFill:xt,j:et,i:y,pathFrom:pt.pathFrom,pathTo:pt.pathTo,strokeWidth:it,elSeries:U,x:F,y:O,series:r,barHeight:pt.barHeight?pt.barHeight:b,barWidth:pt.barWidth?pt.barWidth:N,elDataLabelsWrap:X,elGoalsMarkers:W,elBarShadows:Z,visibleSeries:this.visibleI,type:"bar"})}h.globals.seriesXvalues[G]=Y,h.globals.seriesYvalues[G]=D,g.add(U)}return g}},{key:"renderSeries",value:function(r){var a=r.realIndex,h=r.pathFill,d=r.lineFill,f=r.j,g=r.i,y=r.groupIndex,x=r.pathFrom,S=r.pathTo,M=r.strokeWidth,C=r.elSeries,P=r.x,F=r.y,O=r.y1,D=r.y2,Y=r.series,G=r.barHeight,U=r.barWidth,b=r.barXPosition,N=r.barYPosition,E=r.elDataLabelsWrap,X=r.elGoalsMarkers,W=r.elBarShadows,Z=r.visibleSeries,et=r.type,it=this.w,pt=new Q(this.ctx);d||(d=this.barOptions.distributed?it.globals.stroke.colors[f]:it.globals.stroke.colors[a]),it.config.series[g].data[f]&&it.config.series[g].data[f].strokeColor&&(d=it.config.series[g].data[f].strokeColor),this.isNullValue&&(h="none");var xt=pt.renderPaths({i:g,j:f,realIndex:a,pathFrom:x,pathTo:S,stroke:d,strokeWidth:M,strokeLineCap:it.config.stroke.lineCap,fill:h,animationDelay:f/it.config.chart.animations.animateGradually.delay*(it.config.chart.animations.speed/it.globals.dataPoints)/2.4,initialSpeed:it.config.chart.animations.speed,dataChangeSpeed:it.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(et,"-area")});xt.attr("clip-path","url(#gridRectMask".concat(it.globals.cuid,")"));var Ft=it.config.forecastDataPoints;Ft.count>0&&f>=it.globals.dataPoints-Ft.count&&(xt.node.setAttribute("stroke-dasharray",Ft.dashArray),xt.node.setAttribute("stroke-width",Ft.strokeWidth),xt.node.setAttribute("fill-opacity",Ft.fillOpacity)),void 0!==O&&void 0!==D&&(xt.attr("data-range-y1",O),xt.attr("data-range-y2",D)),new Ve(this.ctx).setSelectionFilter(xt,a,f),C.add(xt);var Nt=new ls(this).handleBarDataLabels({x:P,y:F,y1:O,y2:D,i:g,j:f,series:Y,realIndex:a,groupIndex:y,barHeight:G,barWidth:U,barXPosition:b,barYPosition:N,renderedPath:xt,visibleSeries:Z});return null!==Nt.dataLabels&&E.add(Nt.dataLabels),Nt.totalDataLabels&&E.add(Nt.totalDataLabels),C.add(E),X&&C.add(X),W&&C.add(W),C}},{key:"drawBarPaths",value:function(r){var a,y,h=r.indexes,d=r.barHeight,f=r.strokeWidth,g=r.zeroW,x=r.y,S=r.yDivision,M=r.elSeries,C=this.w,P=h.i,F=h.j;if(C.globals.isXNumeric)a=(x=(C.globals.seriesX[P][F]-C.globals.minX)/this.invertedXRatio-d)+d*this.visibleI;else if(C.config.plotOptions.bar.hideZeroBarsWhenGrouped){var O=0,D=0;C.globals.seriesPercent.forEach(function(G,U){G[F]&&O++,U<P&&0===G[F]&&D++}),O>0&&(d=this.seriesLen*d/O),a=x+d*this.visibleI,a-=d*D}else a=x+d*this.visibleI;this.isFunnel&&(g-=(this.barHelpers.getXForValue(this.series[P][F],g)-g)/2),y=this.barHelpers.getXForValue(this.series[P][F],g);var Y=this.barHelpers.getBarpaths({barYPosition:a,barHeight:d,x1:g,x2:y,strokeWidth:f,series:this.series,realIndex:h.realIndex,i:P,j:F,w:C});return C.globals.isXNumeric||(x+=S),this.barHelpers.barBackground({j:F,i:P,y1:a-d*this.visibleI,y2:d*this.seriesLen,elSeries:M}),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,x1:g,x:y,y:x,goalX:this.barHelpers.getGoalValues("x",g,null,P,F),barYPosition:a,barHeight:d}}},{key:"drawColumnPaths",value:function(r){var a,f,h=r.indexes,d=r.x,g=r.xDivision,y=r.barWidth,x=r.zeroH,S=r.strokeWidth,M=r.elSeries,C=this.w,F=h.i,O=h.j,D=h.bc;if(C.globals.isXNumeric){var Y=this.getBarXForNumericXAxis({x:d,j:O,realIndex:h.realIndex,barWidth:y});d=Y.x,a=Y.barXPosition}else if(C.config.plotOptions.bar.hideZeroBarsWhenGrouped){var G=this.barHelpers.getZeroValueEncounters({i:F,j:O}),U=G.nonZeroColumns;U>0&&(y=this.seriesLen*y/U),a=d+y*this.visibleI,a-=y*G.zeroEncounters}else a=d+y*this.visibleI;f=this.barHelpers.getYForValue(this.series[F][O],x);var N=this.barHelpers.getColumnPaths({barXPosition:a,barWidth:y,y1:x,y2:f,strokeWidth:S,series:this.series,realIndex:h.realIndex,i:F,j:O,w:C});return C.globals.isXNumeric||(d+=g),this.barHelpers.barBackground({bc:D,j:O,i:F,x1:a-S/2-y*this.visibleI,x2:y*this.seriesLen+S/2,elSeries:M}),{pathTo:N.pathTo,pathFrom:N.pathFrom,x:d,y:f,goalY:this.barHelpers.getGoalValues("y",null,x,F,O),barXPosition:a,barWidth:y}}},{key:"getBarXForNumericXAxis",value:function(r){var a=r.x,h=r.barWidth,d=r.realIndex,f=r.j,g=this.w,y=d;return g.globals.seriesX[d].length||(y=g.globals.maxValsInArrayIndex),g.globals.seriesX[y][f]&&(a=(g.globals.seriesX[y][f]-g.globals.minX)/this.xRatio-h*this.seriesLen/2),{barXPosition:a+h*this.visibleI,x:a}}},{key:"getPreviousPath",value:function(r,a){for(var h,d=this.w,f=0;f<d.globals.previousPaths.length;f++){var g=d.globals.previousPaths[f];g.paths&&g.paths.length>0&&parseInt(g.realIndex,10)===parseInt(r,10)&&void 0!==d.globals.previousPaths[f].paths[a]&&(h=d.globals.previousPaths[f].paths[a].d)}return h}}]),V}(),Mt=function(V){Rr(a,V);var r=Tt(a);function a(){return zt(this,a),r.apply(this,arguments)}return Dt(a,[{key:"draw",value:function(h,d){var f=this,g=this.w;this.graphics=new Q(this.ctx),this.bar=new ao(this.ctx,this.xyRatios);var y=new Lt(this.ctx,g);h=y.getLogSeries(h),this.yRatio=y.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h),"100%"===g.config.chart.stackType&&(h=g.globals.seriesPercent.slice()),this.series=h,this.barHelpers.initializeStackedPrevVars(this);for(var x=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),S=0,M=0,C=function(O,D){var Y=void 0,G=void 0,U=void 0,b=void 0,N=-1;f.groupCtx=f,g.globals.seriesGroups.forEach(function(re,ce){re.indexOf(g.config.series[O].name)>-1&&(N=ce)}),-1!==N&&(f.groupCtx=f[g.globals.seriesGroups[N]]);var E=[],X=[],W=g.globals.comboCharts?d[O]:O;f.yRatio.length>1&&(f.yaxisIndex=W),f.isReversed=g.config.yaxis[f.yaxisIndex]&&g.config.yaxis[f.yaxisIndex].reversed;var Z=f.graphics.group({class:"apexcharts-series",seriesName:at.escapeString(g.globals.seriesNames[W]),rel:O+1,"data:realIndex":W});f.ctx.series.addCollapsedClassToSeries(Z,W);var et=f.graphics.group({class:"apexcharts-datalabels","data:realIndex":W}),it=f.graphics.group({class:"apexcharts-bar-goals-markers"}),pt=0,wt=0,xt=f.initialPositions(S,M,Y,G,U,b);M=xt.y,G=xt.yDivision,b=xt.zeroW,S=xt.x,wt=xt.barWidth,Y=xt.xDivision,U=xt.zeroH,g.globals.barHeight=pt=xt.barHeight,g.globals.barWidth=wt,f.barHelpers.initializeStackedXYVars(f),1===f.groupCtx.prevY.length&&f.groupCtx.prevY[0].every(function(re){return isNaN(re)})&&(f.groupCtx.prevY[0]=f.groupCtx.prevY[0].map(function(re){return U}),f.groupCtx.prevYF[0]=f.groupCtx.prevYF[0].map(function(re){return 0}));for(var Ft=0;Ft<g.globals.dataPoints;Ft++){var Nt=f.barHelpers.getStrokeWidth(O,Ft,W),_t={indexes:{i:O,j:Ft,realIndex:W,bc:D},strokeWidth:Nt,x:S,y:M,elSeries:Z,groupIndex:N,seriesGroup:g.globals.seriesGroups[N]},ne=null;f.isHorizontal?(ne=f.drawStackedBarPaths(Et(Et({},_t),{},{zeroW:b,barHeight:pt,yDivision:G})),wt=f.series[O][Ft]/f.invertedYRatio):(ne=f.drawStackedColumnPaths(Et(Et({},_t),{},{xDivision:Y,barWidth:wt,zeroH:U})),pt=f.series[O][Ft]/f.yRatio[f.yaxisIndex]);var oe=f.barHelpers.drawGoalLine({barXPosition:ne.barXPosition,barYPosition:ne.barYPosition,goalX:ne.goalX,goalY:ne.goalY,barHeight:pt,barWidth:wt});oe&&it.add(oe),M=ne.y,E.push(S=ne.x),X.push(M);var ue=f.barHelpers.getPathFillColor(h,O,Ft,W);Z=f.renderSeries({realIndex:W,pathFill:ue,j:Ft,i:O,groupIndex:N,pathFrom:ne.pathFrom,pathTo:ne.pathTo,strokeWidth:Nt,elSeries:Z,x:S,y:M,series:h,barHeight:pt,barWidth:wt,elDataLabelsWrap:et,elGoalsMarkers:it,type:"bar",visibleSeries:0})}g.globals.seriesXvalues[W]=E,g.globals.seriesYvalues[W]=X,f.groupCtx.prevY.push(f.groupCtx.yArrj),f.groupCtx.prevYF.push(f.groupCtx.yArrjF),f.groupCtx.prevYVal.push(f.groupCtx.yArrjVal),f.groupCtx.prevX.push(f.groupCtx.xArrj),f.groupCtx.prevXF.push(f.groupCtx.xArrjF),f.groupCtx.prevXVal.push(f.groupCtx.xArrjVal),x.add(Z)},P=0,F=0;P<h.length;P++,F++)C(P,F);return x}},{key:"initialPositions",value:function(h,d,f,g,y,x){var S,M,C,P,F=this.w;return this.isHorizontal?(C=(C=g=F.globals.gridHeight/F.globals.dataPoints)*parseInt(F.config.plotOptions.bar.barHeight,10)/100,-1===String(F.config.plotOptions.bar.barHeight).indexOf("%")&&(C=parseInt(F.config.plotOptions.bar.barHeight,10)),x=this.baseLineInvertedY+F.globals.padHorizontal+(this.isReversed?F.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),d=(g-C)/2):(P=f=F.globals.gridWidth/F.globals.dataPoints,P=F.globals.isXNumeric&&F.globals.dataPoints>1?(f=F.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:P*parseInt(F.config.plotOptions.bar.columnWidth,10)/100,-1===String(F.config.plotOptions.bar.columnWidth).indexOf("%")&&(P=parseInt(F.config.plotOptions.bar.columnWidth,10)),y=F.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?F.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),h=F.globals.padHorizontal+(f-P)/2),{x:h,y:d,yDivision:g,xDivision:f,barHeight:null!==(S=F.globals.seriesGroups)&&void 0!==S&&S.length?C/F.globals.seriesGroups.length:C,barWidth:null!==(M=F.globals.seriesGroups)&&void 0!==M&&M.length?P/F.globals.seriesGroups.length:P,zeroH:y,zeroW:x}}},{key:"drawStackedBarPaths",value:function(h){for(var d,S,f=h.indexes,g=h.barHeight,y=h.strokeWidth,x=h.zeroW,M=h.y,C=h.groupIndex,P=h.seriesGroup,F=h.yDivision,O=h.elSeries,D=this.w,Y=M+(-1!==C?C*g:0),G=f.i,U=f.j,b=0,N=0;N<this.groupCtx.prevXF.length;N++)b+=this.groupCtx.prevXF[N][U];var E=G;if(P&&(E=P.indexOf(D.config.series[G].name)),E>0){var X=x;this.groupCtx.prevXVal[E-1][U]<0?X=this.series[G][U]>=0?this.groupCtx.prevX[E-1][U]+b-2*(this.isReversed?b:0):this.groupCtx.prevX[E-1][U]:this.groupCtx.prevXVal[E-1][U]>=0&&(X=this.series[G][U]>=0?this.groupCtx.prevX[E-1][U]:this.groupCtx.prevX[E-1][U]-b+2*(this.isReversed?b:0)),d=X}else d=x;var W=this.barHelpers.getBarpaths({barYPosition:Y,barHeight:g,x1:d,x2:S=null===this.series[G][U]?d:d+this.series[G][U]/this.invertedYRatio-2*(this.isReversed?this.series[G][U]/this.invertedYRatio:0),strokeWidth:y,series:this.series,realIndex:f.realIndex,seriesGroup:P,i:G,j:U,w:D});return this.barHelpers.barBackground({j:U,i:G,y1:Y,y2:g,elSeries:O}),M+=F,{pathTo:W.pathTo,pathFrom:W.pathFrom,goalX:this.barHelpers.getGoalValues("x",x,null,G,U),barYPosition:Y,x:S,y:M}}},{key:"drawStackedColumnPaths",value:function(h){var g,d=h.indexes,f=h.x,y=h.xDivision,x=h.barWidth,S=h.zeroH,M=h.groupIndex,C=h.seriesGroup,P=h.elSeries,F=this.w,O=d.i,D=d.j,Y=d.bc;if(F.globals.isXNumeric){var G=F.globals.seriesX[O][D];G||(G=0),f=(G-F.globals.minX)/this.xRatio-x/2,F.globals.seriesGroups.length&&(f=(G-F.globals.minX)/this.xRatio-x/2*F.globals.seriesGroups.length)}for(var U,b=f+(-1!==M?M*x:0),N=0,E=0;E<this.groupCtx.prevYF.length;E++)N+=isNaN(this.groupCtx.prevYF[E][D])?0:this.groupCtx.prevYF[E][D];var X=O;if(C&&(X=C.indexOf(F.config.series[O].name)),X>0&&!F.globals.isXNumeric||X>0&&F.globals.isXNumeric&&F.globals.seriesX[O-1][D]===F.globals.seriesX[O][D]){var W,Z,et,it=Math.min(this.yRatio.length+1,O+1);if(void 0!==this.groupCtx.prevY[X-1]&&this.groupCtx.prevY[X-1].length)for(var pt=1;pt<it;pt++){var wt;if(!isNaN(null===(wt=this.groupCtx.prevY[X-pt])||void 0===wt?void 0:wt[D])){et=this.groupCtx.prevY[X-pt][D];break}}for(var xt=1;xt<it;xt++){var Ft,Nt;if((null===(Ft=this.groupCtx.prevYVal[X-xt])||void 0===Ft?void 0:Ft[D])<0){Z=this.series[O][D]>=0?et-N+2*(this.isReversed?N:0):et;break}if((null===(Nt=this.groupCtx.prevYVal[X-xt])||void 0===Nt?void 0:Nt[D])>=0){Z=this.series[O][D]>=0?et:et+N-2*(this.isReversed?N:0);break}}void 0===Z&&(Z=F.globals.gridHeight),U=null!==(W=this.groupCtx.prevYF[0])&&void 0!==W&&W.every(function(ne){return 0===ne})&&this.groupCtx.prevYF.slice(1,X).every(function(ne){return ne.every(function(oe){return isNaN(oe)})})?S:Z}else U=S;var _t=this.barHelpers.getColumnPaths({barXPosition:b,barWidth:x,y1:U,y2:g=this.series[O][D]?U-this.series[O][D]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[O][D]/this.yRatio[this.yaxisIndex]:0):U,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:C,realIndex:d.realIndex,i:O,j:D,w:F});return this.barHelpers.barBackground({bc:Y,j:D,i:O,x1:b,x2:x,elSeries:P}),f+=y,{pathTo:_t.pathTo,pathFrom:_t.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,S,O,D),barXPosition:b,x:F.globals.isXNumeric?f-y:f,y:g}}}]),a}(ao),Gs=function(V){Rr(a,V);var r=Tt(a);function a(){return zt(this,a),r.apply(this,arguments)}return Dt(a,[{key:"draw",value:function(h,d,f){var g=this,y=this.w,x=new Q(this.ctx),S=y.globals.comboCharts?d:y.config.chart.type,M=new wi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=y.config.plotOptions.bar.horizontal;var C=new Lt(this.ctx,y);h=C.getLogSeries(h),this.series=h,this.yRatio=C.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h);for(var P=x.group({class:"apexcharts-".concat(S,"-series apexcharts-plot-series")}),F=function(D){g.isBoxPlot="boxPlot"===y.config.chart.type||"boxPlot"===y.config.series[D].type;var Y,G,U,b,it,pt,N=void 0,E=void 0,X=[],W=[],Z=y.globals.comboCharts?f[D]:D,et=x.group({class:"apexcharts-series",seriesName:at.escapeString(y.globals.seriesNames[Z]),rel:D+1,"data:realIndex":Z});g.ctx.series.addCollapsedClassToSeries(et,Z),h[D].length>0&&(g.visibleI=g.visibleI+1),g.yRatio.length>1&&(g.yaxisIndex=Z);var wt=g.barHelpers.initialPositions();E=wt.y,it=wt.barHeight,G=wt.yDivision,b=wt.zeroW,Y=wt.xDivision,U=wt.zeroH,W.push((N=wt.x)+(pt=wt.barWidth)/2);for(var xt=x.group({class:"apexcharts-datalabels","data:realIndex":Z}),Ft=function(_t){var ne=g.barHelpers.getStrokeWidth(D,_t,Z),oe=null,ue={indexes:{i:D,j:_t,realIndex:Z},x:N,y:E,strokeWidth:ne,elSeries:et};oe=g.isHorizontal?g.drawHorizontalBoxPaths(Et(Et({},ue),{},{yDivision:G,barHeight:it,zeroW:b})):g.drawVerticalBoxPaths(Et(Et({},ue),{},{xDivision:Y,barWidth:pt,zeroH:U})),E=oe.y,N=oe.x,_t>0&&W.push(N+pt/2),X.push(E),oe.pathTo.forEach(function(re,ce){var Le=!g.isBoxPlot&&g.candlestickOptions.wick.useFillColor?oe.color[ce]:y.globals.stroke.colors[D],Te=M.fillPath({seriesNumber:Z,dataPointIndex:_t,color:oe.color[ce],value:h[D][_t]});g.renderSeries({realIndex:Z,pathFill:Te,lineFill:Le,j:_t,i:D,pathFrom:oe.pathFrom,pathTo:re,strokeWidth:ne,elSeries:et,x:N,y:E,series:h,barHeight:it,barWidth:pt,elDataLabelsWrap:xt,visibleSeries:g.visibleI,type:y.config.chart.type})})},Nt=0;Nt<y.globals.dataPoints;Nt++)Ft(Nt);y.globals.seriesXvalues[Z]=W,y.globals.seriesYvalues[Z]=X,P.add(et)},O=0;O<h.length;O++)F(O);return P}},{key:"drawVerticalBoxPaths",value:function(h){var d=h.indexes,f=h.x,g=h.xDivision,y=h.barWidth,x=h.zeroH,S=h.strokeWidth,M=this.w,C=new Q(this.ctx),P=d.i,F=d.j,O=!0,D=M.config.plotOptions.candlestick.colors.upward,Y=M.config.plotOptions.candlestick.colors.downward,G="";this.isBoxPlot&&(G=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var U=this.yRatio[this.yaxisIndex],b=d.realIndex,N=this.getOHLCValue(b,F),E=x,X=x;N.o>N.c&&(O=!1);var W=Math.min(N.o,N.c),Z=Math.max(N.o,N.c),et=N.m;M.globals.isXNumeric&&(f=(M.globals.seriesX[b][F]-M.globals.minX)/this.xRatio-y/2);var it=f+y*this.visibleI;null==this.series[P][F]?(W=x,Z=x):(W=x-W/U,Z=x-Z/U,E=x-N.h/U,X=x-N.l/U,et=x-N.m/U);var pt=C.move(it,x),wt=C.move(it+y/2,W);return M.globals.previousPaths.length>0&&(wt=this.getPreviousPath(b,F,!0)),pt=this.isBoxPlot?[C.move(it,W)+C.line(it+y/2,W)+C.line(it+y/2,E)+C.line(it+y/4,E)+C.line(it+y-y/4,E)+C.line(it+y/2,E)+C.line(it+y/2,W)+C.line(it+y,W)+C.line(it+y,et)+C.line(it,et)+C.line(it,W+S/2),C.move(it,et)+C.line(it+y,et)+C.line(it+y,Z)+C.line(it+y/2,Z)+C.line(it+y/2,X)+C.line(it+y-y/4,X)+C.line(it+y/4,X)+C.line(it+y/2,X)+C.line(it+y/2,Z)+C.line(it,Z)+C.line(it,et)+"z"]:[C.move(it,Z)+C.line(it+y/2,Z)+C.line(it+y/2,E)+C.line(it+y/2,Z)+C.line(it+y,Z)+C.line(it+y,W)+C.line(it+y/2,W)+C.line(it+y/2,X)+C.line(it+y/2,W)+C.line(it,W)+C.line(it,Z-S/2)],wt+=C.move(it,W),M.globals.isXNumeric||(f+=g),{pathTo:pt,pathFrom:wt,x:f,y:Z,barXPosition:it,color:this.isBoxPlot?G:O?[D]:[Y]}}},{key:"drawHorizontalBoxPaths",value:function(h){var d=h.indexes,f=h.y,g=h.yDivision,y=h.barHeight,x=h.zeroW,S=h.strokeWidth,M=this.w,C=new Q(this.ctx),P=d.i,F=d.j,O=this.boxOptions.colors.lower;this.isBoxPlot&&(O=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var D=this.invertedYRatio,Y=d.realIndex,G=this.getOHLCValue(Y,F),U=x,b=x,N=Math.min(G.o,G.c),E=Math.max(G.o,G.c),X=G.m;M.globals.isXNumeric&&(f=(M.globals.seriesX[Y][F]-M.globals.minX)/this.invertedXRatio-y/2);var W=f+y*this.visibleI;null==this.series[P][F]?(N=x,E=x):(N=x+N/D,E=x+E/D,U=x+G.h/D,b=x+G.l/D,X=x+G.m/D);var Z=C.move(x,W),et=C.move(N,W+y/2);return M.globals.previousPaths.length>0&&(et=this.getPreviousPath(Y,F,!0)),Z=[C.move(N,W)+C.line(N,W+y/2)+C.line(U,W+y/2)+C.line(U,W+y/2-y/4)+C.line(U,W+y/2+y/4)+C.line(U,W+y/2)+C.line(N,W+y/2)+C.line(N,W+y)+C.line(X,W+y)+C.line(X,W)+C.line(N+S/2,W),C.move(X,W)+C.line(X,W+y)+C.line(E,W+y)+C.line(E,W+y/2)+C.line(b,W+y/2)+C.line(b,W+y-y/4)+C.line(b,W+y/4)+C.line(b,W+y/2)+C.line(E,W+y/2)+C.line(E,W)+C.line(X,W)+"z"],et+=C.move(N,W),M.globals.isXNumeric||(f+=g),{pathTo:Z,pathFrom:et,x:E,y:f,barYPosition:W,color:O}}},{key:"getOHLCValue",value:function(h,d){var f=this.w;return{o:this.isBoxPlot?f.globals.seriesCandleH[h][d]:f.globals.seriesCandleO[h][d],h:this.isBoxPlot?f.globals.seriesCandleO[h][d]:f.globals.seriesCandleH[h][d],m:f.globals.seriesCandleM[h][d],l:this.isBoxPlot?f.globals.seriesCandleC[h][d]:f.globals.seriesCandleL[h][d],c:this.isBoxPlot?f.globals.seriesCandleL[h][d]:f.globals.seriesCandleC[h][d]}}}]),a}(ao),Hr=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"checkColorRange",value:function(){var r=this.w,a=!1,h=r.config.plotOptions[r.config.chart.type];return h.colorScale.ranges.length>0&&h.colorScale.ranges.map(function(d,f){d.from<=0&&(a=!0)}),a}},{key:"getShadeColor",value:function(r,a,h,d){var f=this.w,g=1,y=f.config.plotOptions[r].shadeIntensity,x=this.determineColor(r,a,h);f.globals.hasNegs||d?g=f.config.plotOptions[r].reverseNegativeShade?x.percent<0?x.percent/100*(1.25*y):1.25*y*(1-x.percent/100):x.percent<=0?1-(1+x.percent/100)*y:(1-x.percent/100)*y:(g=1-x.percent/100,"treemap"===r&&(g=1.25*y*(1-x.percent/100)));var S=x.color,M=new at;return f.config.plotOptions[r].enableShades&&(S=at.hexToRgba(M.shadeColor("dark"===this.w.config.theme.mode?-1*g:g,x.color),f.config.fill.opacity)),{color:S,colorProps:x}}},{key:"determineColor",value:function(r,a,h){var d=this.w,f=d.globals.series[a][h],g=d.config.plotOptions[r],y=g.colorScale.inverse?h:a;g.distributed&&"treemap"===d.config.chart.type&&(y=h);var x=d.globals.colors[y],S=null,M=Math.min.apply(Math,hn(d.globals.series[a])),C=Math.max.apply(Math,hn(d.globals.series[a]));g.distributed||"heatmap"!==r||(M=d.globals.minY,C=d.globals.maxY),void 0!==g.colorScale.min&&(M=g.colorScale.min<d.globals.minY?g.colorScale.min:d.globals.minY,C=g.colorScale.max>d.globals.maxY?g.colorScale.max:d.globals.maxY);var P=Math.abs(C)+Math.abs(M),F=100*f/(0===P?P-1e-6:P);return g.colorScale.ranges.length>0&&g.colorScale.ranges.map(function(O,D){if(f>=O.from&&f<=O.to){x=O.color,S=O.foreColor?O.foreColor:null,M=O.from,C=O.to;var Y=Math.abs(C)+Math.abs(M);F=100*f/(0===Y?Y-1e-6:Y)}}),{color:x,foreColor:S,percent:F}}},{key:"calculateDataLabels",value:function(r){var a=r.text,h=r.x,d=r.y,f=r.i,g=r.j,y=r.colorProps,x=r.fontSize,S=this.w.config.dataLabels,M=new Q(this.ctx),C=new Kn(this.ctx),P=null;if(S.enabled){P=M.group({class:"apexcharts-data-labels"});var O=S.offsetY,D=h+S.offsetX,Y=d+parseFloat(S.style.fontSize)/3+O;C.plotDataLabelsText({x:D,y:Y,text:a,i:f,j:g,color:y.foreColor,parent:P,fontSize:x,dataLabelsConfig:S})}return P}},{key:"addListeners",value:function(r){var a=new Q(this.ctx);r.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this,r)),r.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this,r)),r.node.addEventListener("mousedown",a.pathMouseDown.bind(this,r))}}]),V}(),Bl=function(){function V(r,a){zt(this,V),this.ctx=r,this.w=r.w,this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Hr(r),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Dt(V,[{key:"draw",value:function(r){var a=this.w,h=new Q(this.ctx),d=h.group({class:"apexcharts-heatmap"});d.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")"));var f=a.globals.gridWidth/a.globals.dataPoints,g=a.globals.gridHeight/a.globals.series.length,y=0,x=!1;this.negRange=this.helpers.checkColorRange();var S=r.slice();a.config.yaxis[0].reversed&&(x=!0,S.reverse());for(var M=x?0:S.length-1;x?M<S.length:M>=0;x?M++:M--){var C=h.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:at.escapeString(a.globals.seriesNames[M]),rel:M+1,"data:realIndex":M});if(this.ctx.series.addCollapsedClassToSeries(C,M),a.config.chart.dropShadow.enabled){var P=a.config.chart.dropShadow;new Ve(this.ctx).dropShadow(C,P,M)}for(var F=0,O=a.config.plotOptions.heatmap.shadeIntensity,D=0;D<S[M].length;D++){var Y=this.helpers.getShadeColor(a.config.chart.type,M,D,this.negRange),G=Y.color,U=Y.colorProps;"image"===a.config.fill.type&&(G=new wi(this.ctx).fillPath({seriesNumber:M,dataPointIndex:D,opacity:a.globals.hasNegs?U.percent<0?1-(1+U.percent/100):O+U.percent/100:U.percent/100,patternID:at.randomId(),width:a.config.fill.image.width?a.config.fill.image.width:f,height:a.config.fill.image.height?a.config.fill.image.height:g}));var N=h.drawRect(F,y,f,g,this.rectRadius);if(N.attr({cx:F,cy:y}),N.node.classList.add("apexcharts-heatmap-rect"),C.add(N),N.attr({fill:G,i:M,index:M,j:D,val:r[M][D],"stroke-width":this.strokeWidth,stroke:a.config.plotOptions.heatmap.useFillColorAsStroke?G:a.globals.stroke.colors[0],color:G}),this.helpers.addListeners(N),a.config.chart.animations.enabled&&!a.globals.dataChanged){var E=1;a.globals.resized||(E=a.config.chart.animations.speed),this.animateHeatMap(N,F,y,f,g,E)}if(a.globals.dataChanged){var X=1;if(this.dynamicAnim.enabled&&a.globals.shouldAnimate){X=this.dynamicAnim.speed;var W=a.globals.previousPaths[M]&&a.globals.previousPaths[M][D]&&a.globals.previousPaths[M][D].color;W||(W="rgba(255, 255, 255, 0)"),this.animateHeatColor(N,at.isColorHex(W)?W:at.rgb2hex(W),at.isColorHex(G)?G:at.rgb2hex(G),X)}}var Z=(0,a.config.dataLabels.formatter)(a.globals.series[M][D],{value:a.globals.series[M][D],seriesIndex:M,dataPointIndex:D,w:a}),et=this.helpers.calculateDataLabels({text:Z,x:F+f/2,y:y+g/2,i:M,j:D,colorProps:U,series:S});null!==et&&C.add(et),F+=f}y+=g,d.add(C)}var it=a.globals.yAxisScale[0].result.slice();return a.config.yaxis[0].reversed?it.unshift(""):it.push(""),a.globals.yAxisScale[0].result=it,d}},{key:"animateHeatMap",value:function(r,a,h,d,f,g){var y=new On(this.ctx);y.animateRect(r,{x:a+d/2,y:h+f/2,width:0,height:0},{x:a,y:h,width:d,height:f},g,function(){y.animationCompleted(r)})}},{key:"animateHeatColor",value:function(r,a,h,d){r.attr({fill:a}).animate(d).attr({fill:h})}}]),V}(),lo=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"drawYAxisTexts",value:function(r,a,h,d){var f=this.w,g=f.config.yaxis[0],y=f.globals.yLabelFormatters[0];return new Q(this.ctx).drawText({x:r+g.labels.offsetX,y:a+g.labels.offsetY,text:y(d,h),textAnchor:"middle",fontSize:g.labels.style.fontSize,fontFamily:g.labels.style.fontFamily,foreColor:Array.isArray(g.labels.style.colors)?g.labels.style.colors[h]:g.labels.style.colors})}}]),V}(),Rl=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w;var a=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==a.globals.stroke.colors?a.globals.stroke.colors:a.globals.colors,this.defaultSize=Math.min(a.globals.gridWidth,a.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=a.globals.gridWidth/2,this.fullAngle="radialBar"===a.config.chart.type?360:Math.abs(a.config.plotOptions.pie.endAngle-a.config.plotOptions.pie.startAngle),this.initialAngle=a.config.plotOptions.pie.startAngle%this.fullAngle,a.globals.radialSize=this.defaultSize/2.05-a.config.stroke.width-(a.config.chart.sparkline.enabled?0:a.config.chart.dropShadow.blur),this.donutSize=a.globals.radialSize*parseInt(a.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Dt(V,[{key:"draw",value:function(r){var a=this,h=this.w,d=new Q(this.ctx);if(this.ret=d.group({class:"apexcharts-pie"}),h.globals.noData)return this.ret;for(var f=0,g=0;g<r.length;g++)f+=at.negToZero(r[g]);var y=[],x=d.group();0===f&&(f=1e-5),r.forEach(function(W){a.maxY=Math.max(a.maxY,W)}),h.config.yaxis[0].max&&(this.maxY=h.config.yaxis[0].max),"back"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var S=0;S<r.length;S++){var M=this.fullAngle*at.negToZero(r[S])/f;y.push(M),"polarArea"===this.chartType?(y[S]=this.fullAngle/r.length,this.sliceSizes.push(h.globals.radialSize*r[S]/this.maxY)):this.sliceSizes.push(h.globals.radialSize)}if(h.globals.dataChanged){for(var C,P=0,F=0;F<h.globals.previousPaths.length;F++)P+=at.negToZero(h.globals.previousPaths[F]);for(var O=0;O<h.globals.previousPaths.length;O++)C=this.fullAngle*at.negToZero(h.globals.previousPaths[O])/P,this.prevSectorAngleArr.push(C)}this.donutSize<0&&(this.donutSize=0);var D=h.config.plotOptions.pie.customScale,U=h.globals.gridWidth/2-h.globals.gridWidth/2*D,b=h.globals.gridHeight/2-h.globals.gridHeight/2*D;if("donut"===this.chartType){var N=d.drawCircle(this.donutSize);N.attr({cx:this.centerX,cy:this.centerY,fill:h.config.plotOptions.pie.donut.background?h.config.plotOptions.pie.donut.background:"transparent"}),x.add(N)}var E=this.drawArcs(y,r);if(this.sliceLabels.forEach(function(W){E.add(W)}),x.attr({transform:"translate(".concat(U,", ").concat(b,") scale(").concat(D,")")}),x.add(E),this.ret.add(x),this.donutDataLabels.show){var X=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:U,translateY:b});this.ret.add(X)}return"front"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(r,a){var h=this.w,d=new Ve(this.ctx),f=new Q(this.ctx),g=new wi(this.ctx),y=f.group({class:"apexcharts-slices"}),x=this.initialAngle,S=this.initialAngle,M=this.initialAngle,C=this.initialAngle;this.strokeWidth=h.config.stroke.show?h.config.stroke.width:0;for(var P=0;P<r.length;P++){var F=f.group({class:"apexcharts-series apexcharts-pie-series",seriesName:at.escapeString(h.globals.seriesNames[P]),rel:P+1,"data:realIndex":P});y.add(F),M=(x=M)+r[P],C=(S=C)+this.prevSectorAngleArr[P];var O=M<x?this.fullAngle+M-x:M-x,D=g.fillPath({seriesNumber:P,size:this.sliceSizes[P],value:a[P]}),Y=this.getChangedPath(S,C),G=f.drawPath({d:Y,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[P]:this.lineColorArr,strokeWidth:0,fill:D,fillOpacity:h.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(P)});G.attr({index:0,j:P}),d.setSelectionFilter(G,0,P),h.config.chart.dropShadow.enabled&&d.dropShadow(G,h.config.chart.dropShadow,P),this.addListeners(G,this.donutDataLabels),Q.setAttrs(G.node,{"data:angle":O,"data:startAngle":x,"data:strokeWidth":this.strokeWidth,"data:value":a[P]});var b={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?b=at.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize/1.25+h.config.plotOptions.pie.dataLabels.offset,(x+O/2)%this.fullAngle):"donut"===this.chartType&&(b=at.polarToCartesian(this.centerX,this.centerY,(h.globals.radialSize+this.donutSize)/2+h.config.plotOptions.pie.dataLabels.offset,(x+O/2)%this.fullAngle)),F.add(G);var N=0;if(!this.initialAnim||h.globals.resized||h.globals.dataChanged?this.animBeginArr.push(0):(0==(N=O/this.fullAngle*h.config.chart.animations.speed)&&(N=1),this.animDur=N+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(G,this.dynamicAnim&&h.globals.dataChanged?{size:this.sliceSizes[P],endAngle:M,startAngle:x,prevStartAngle:S,prevEndAngle:C,animateStartingPos:!0,i:P,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:h.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[P],endAngle:M,startAngle:x,i:P,totalItems:r.length-1,animBeginArr:this.animBeginArr,dur:N}),h.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&G.click(this.pieClicked.bind(this,P)),void 0!==h.globals.selectedDataPoints[0]&&h.globals.selectedDataPoints[0].indexOf(P)>-1&&this.pieClicked(P),h.config.dataLabels.enabled){var E=b.x,X=b.y,W=100*O/this.fullAngle+"%";if(0!==O&&h.config.plotOptions.pie.dataLabels.minAngleToShowLabel<r[P]){var Z=h.config.dataLabels.formatter;void 0!==Z&&(W=Z(h.globals.seriesPercent[P][0],{seriesIndex:P,w:h}));var et=h.globals.dataLabels.style.colors[P],it=f.group({class:"apexcharts-datalabels"}),pt=f.drawText({x:E,y:X,text:W,textAnchor:"middle",fontSize:h.config.dataLabels.style.fontSize,fontFamily:h.config.dataLabels.style.fontFamily,fontWeight:h.config.dataLabels.style.fontWeight,foreColor:et});it.add(pt),h.config.dataLabels.dropShadow.enabled&&d.dropShadow(pt,h.config.dataLabels.dropShadow),pt.node.classList.add("apexcharts-pie-label"),h.config.chart.animations.animate&&!1===h.globals.resized&&(pt.node.classList.add("apexcharts-pie-label-delay"),pt.node.style.animationDelay=h.config.chart.animations.speed/940+"s"),this.sliceLabels.push(it)}}}return y}},{key:"addListeners",value:function(r,a){var h=new Q(this.ctx);r.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this,r)),r.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this,r)),r.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,r.node,a)),r.node.addEventListener("mousedown",h.pathMouseDown.bind(this,r)),this.donutDataLabels.total.showAlways||(r.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,r.node,a)),r.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,r.node,a)))}},{key:"animatePaths",value:function(r,a){var d=a.endAngle<a.startAngle?this.fullAngle+a.endAngle-a.startAngle:a.endAngle-a.startAngle,f=d,g=a.startAngle,y=a.startAngle;void 0!==a.prevStartAngle&&void 0!==a.prevEndAngle&&(g=a.prevEndAngle,f=a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle),a.i===this.w.config.series.length-1&&(d+y>this.fullAngle?a.endAngle=a.endAngle-(d+y):d+y<this.fullAngle&&(a.endAngle=a.endAngle+(this.fullAngle-(d+y)))),d===this.fullAngle&&(d=this.fullAngle-.01),this.animateArc(r,g,y,d,f,a)}},{key:"animateArc",value:function(r,a,h,d,f,g){var y,x=this,S=this.w,M=new On(this.ctx),C=g.size;(isNaN(a)||isNaN(f))&&(a=h,f=d,g.dur=0);var P=d,F=h,O=a<h?this.fullAngle+a-h:a-h;S.globals.dataChanged&&g.shouldSetPrevPaths&&g.prevEndAngle&&(y=x.getPiePath({me:x,startAngle:g.prevStartAngle,angle:g.prevEndAngle<g.prevStartAngle?this.fullAngle+g.prevEndAngle-g.prevStartAngle:g.prevEndAngle-g.prevStartAngle,size:C}),r.attr({d:y})),0!==g.dur?r.animate(g.dur,S.globals.easing,g.animBeginArr[g.i]).afterAll(function(){"pie"!==x.chartType&&"donut"!==x.chartType&&"polarArea"!==x.chartType||this.animate(S.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":x.strokeWidth}),g.i===S.config.series.length-1&&M.animationCompleted(r)}).during(function(D){P=O+(d-O)*D,g.animateStartingPos&&(P=f+(d-f)*D,F=a-f+(h-(a-f))*D),y=x.getPiePath({me:x,startAngle:F,angle:P,size:C}),r.node.setAttribute("data:pathOrig",y),r.attr({d:y})}):(y=x.getPiePath({me:x,startAngle:F,angle:d,size:C}),g.isTrack||(S.globals.animationEnded=!0),r.node.setAttribute("data:pathOrig",y),r.attr({d:y,"stroke-width":x.strokeWidth}))}},{key:"pieClicked",value:function(r){var a,h=this.w,d=this,f=d.sliceSizes[r]+(h.config.plotOptions.pie.expandOnClick?4:0),g=h.globals.dom.Paper.select(".apexcharts-".concat(d.chartType.toLowerCase(),"-slice-").concat(r)).members[0];if("true"!==g.attr("data:pieClicked")){var y=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(y,function(C){C.setAttribute("data:pieClicked","false");var P=C.getAttribute("data:pathOrig");P&&C.setAttribute("d",P)}),g.attr("data:pieClicked","true");var x=parseInt(g.attr("data:startAngle"),10),S=parseInt(g.attr("data:angle"),10);a=d.getPiePath({me:d,startAngle:x,angle:S,size:f}),360!==S&&g.plot(a)}else{g.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(g.node,this.donutDataLabels);var M=g.attr("data:pathOrig");g.attr({d:M})}}},{key:"getChangedPath",value:function(r,a){var h="";return this.dynamicAnim&&this.w.globals.dataChanged&&(h=this.getPiePath({me:this,startAngle:r,angle:a-r,size:this.size})),h}},{key:"getPiePath",value:function(r){var a,h=r.me,d=r.startAngle,f=r.angle,g=r.size,y=new Q(this.ctx),x=d,S=Math.PI*(x-90)/180,M=f+d;Math.ceil(M)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(M=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(M)>this.fullAngle&&(M-=this.fullAngle);var C=Math.PI*(M-90)/180,P=h.centerX+g*Math.cos(S),F=h.centerY+g*Math.sin(S),O=h.centerX+g*Math.cos(C),D=h.centerY+g*Math.sin(C),Y=at.polarToCartesian(h.centerX,h.centerY,h.donutSize,M),G=at.polarToCartesian(h.centerX,h.centerY,h.donutSize,x),U=f>180?1:0,b=["M",P,F,"A",g,g,0,U,1,O,D];return a="donut"===h.chartType?[].concat(b,["L",Y.x,Y.y,"A",h.donutSize,h.donutSize,0,U,0,G.x,G.y,"L",P,F,"z"]).join(" "):"pie"===h.chartType||"polarArea"===h.chartType?[].concat(b,["L",h.centerX,h.centerY,"L",P,F]).join(" "):[].concat(b).join(" "),y.roundPathCorners(a,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(r){var a=this.w,h=new Re(this.ctx),d=new Q(this.ctx),f=new lo(this.ctx),g=d.group(),y=d.group(),x=h.niceScale(0,Math.ceil(this.maxY),0),S=x.result.reverse(),M=x.result.length;this.maxY=x.niceMax;for(var C=a.globals.radialSize,P=C/(M-1),F=0;F<M-1;F++){var O=d.drawCircle(C);if(O.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":a.config.plotOptions.polarArea.rings.strokeWidth,stroke:a.config.plotOptions.polarArea.rings.strokeColor}),a.config.yaxis[0].show){var D=f.drawYAxisTexts(this.centerX,this.centerY-C+parseInt(a.config.yaxis[0].labels.style.fontSize,10)/2,F,S[F]);y.add(D)}g.add(O),C-=P}this.drawSpokes(r),r.add(g),r.add(y)}},{key:"renderInnerDataLabels",value:function(r,a){var h=this.w,d=new Q(this.ctx),f=d.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(a.translateX?a.translateX:0,", ").concat(a.translateY?a.translateY:0,") scale(").concat(h.config.plotOptions.pie.customScale,")")}),g=r.total.show;f.node.style.opacity=a.opacity;var y,x,S=a.centerX,M=a.centerY;y=void 0===r.name.color?h.globals.colors[0]:r.name.color;var C=r.name.fontSize,P=r.name.fontFamily,F=r.name.fontWeight;x=void 0===r.value.color?h.config.chart.foreColor:r.value.color;var O=r.value.formatter,D="",Y="";if(g?(y=r.total.color,C=r.total.fontSize,P=r.total.fontFamily,F=r.total.fontWeight,Y=r.total.label,D=r.total.formatter(h)):1===h.globals.series.length&&(D=O(h.globals.series[0],h),Y=h.globals.seriesNames[0]),Y&&(Y=r.name.formatter(Y,r.total.show,h)),r.name.show){var G=d.drawText({x:S,y:M+parseFloat(r.name.offsetY),text:Y,textAnchor:"middle",foreColor:y,fontSize:C,fontWeight:F,fontFamily:P});G.node.classList.add("apexcharts-datalabel-label"),f.add(G)}if(r.value.show){var U=r.name.show?parseFloat(r.value.offsetY)+16:r.value.offsetY,b=d.drawText({x:S,y:M+U,text:D,textAnchor:"middle",foreColor:x,fontWeight:r.value.fontWeight,fontSize:r.value.fontSize,fontFamily:r.value.fontFamily});b.node.classList.add("apexcharts-datalabel-value"),f.add(b)}return f}},{key:"printInnerLabels",value:function(r,a,h,d){var f,g=this.w;d?f=void 0===r.name.color?g.globals.colors[parseInt(d.parentNode.getAttribute("rel"),10)-1]:r.name.color:g.globals.series.length>1&&r.total.show&&(f=r.total.color);var y=g.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),x=g.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");h=(0,r.value.formatter)(h,g),d||"function"!=typeof r.total.formatter||(h=r.total.formatter(g)),a=r.name.formatter(a,a===r.total.label,g),null!==y&&(y.textContent=a),null!==x&&(x.textContent=h),null!==y&&(y.style.fill=f)}},{key:"printDataLabelsInner",value:function(r,a){var h=this.w,d=r.getAttribute("data:value"),f=h.globals.seriesNames[parseInt(r.parentNode.getAttribute("rel"),10)-1];h.globals.series.length>1&&this.printInnerLabels(a,f,d,r);var g=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==g&&(g.style.opacity=1)}},{key:"drawSpokes",value:function(r){var a=this,h=this.w,d=new Q(this.ctx),f=h.config.plotOptions.polarArea.spokes;if(0!==f.strokeWidth){for(var g=[],y=360/h.globals.series.length,x=0;x<h.globals.series.length;x++)g.push(at.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize,h.config.plotOptions.pie.startAngle+y*x));g.forEach(function(S,M){var C=d.drawLine(S.x,S.y,a.centerX,a.centerY,Array.isArray(f.connectorColors)?f.connectorColors[M]:f.connectorColors);r.add(C)})}}},{key:"revertDataLabelsInner",value:function(r,a,h){var d=this,f=this.w,g=f.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),y=!1,x=f.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),S=function(P){var F=P.makeSliceOut,O=P.printLabel;Array.prototype.forEach.call(x,function(D){"true"===D.getAttribute("data:pieClicked")&&(F&&(y=!0),O&&d.printDataLabelsInner(D,a))})};if(S({makeSliceOut:!0,printLabel:!1}),a.total.show&&f.globals.series.length>1)y&&!a.total.showAlways?S({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(a,a.total.label,a.total.formatter(f));else if(S({makeSliceOut:!1,printLabel:!0}),!y)if(f.globals.selectedDataPoints.length&&f.globals.series.length>1)if(f.globals.selectedDataPoints[0].length>0){var M=f.globals.selectedDataPoints[0],C=f.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(M));this.printDataLabelsInner(C,a)}else g&&f.globals.selectedDataPoints.length&&0===f.globals.selectedDataPoints[0].length&&(g.style.opacity=0);else g&&f.globals.series.length>1&&(g.style.opacity=0)}}]),V}(),Yl=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var a=this.w;this.graphics=new Q(this.ctx),this.lineColorArr=void 0!==a.globals.stroke.colors?a.globals.stroke.colors:a.globals.colors,this.defaultSize=a.globals.svgHeight<a.globals.svgWidth?a.globals.gridHeight+1.5*a.globals.goldenPadding:a.globals.gridWidth,this.isLog=a.config.yaxis[0].logarithmic,this.coreUtils=new Lt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(a.globals.maxY,0):a.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):a.globals.minY,this.polygons=a.config.plotOptions.radar.polygons,this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-a.config.chart.dropShadow.blur,a.config.xaxis.labels.show&&(this.size=this.size-a.globals.xAxisLabelsWidth/1.75),void 0!==a.config.plotOptions.radar.size&&(this.size=a.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Dt(V,[{key:"draw",value:function(r){var a=this,h=this.w,d=new wi(this.ctx),f=[],g=new Kn(this.ctx);r.length&&(this.dataPointsLen=r[h.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var M=h.globals.gridHeight/2+h.config.plotOptions.radar.offsetY,C=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h.globals.gridWidth/2+h.config.plotOptions.radar.offsetX||0,", ").concat(M||0,")")}),P=[],F=null,O=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),r.forEach(function(Y,G){var U=Y.length===h.globals.dataPoints,b=a.graphics.group().attr({class:"apexcharts-series","data:longestSeries":U,seriesName:at.escapeString(h.globals.seriesNames[G]),rel:G+1,"data:realIndex":G});a.dataRadiusOfPercent[G]=[],a.dataRadius[G]=[],a.angleArr[G]=[],Y.forEach(function(xt,Ft){var Nt=Math.abs(a.maxValue-a.minValue);xt+=Math.abs(a.minValue),a.isLog&&(xt=a.coreUtils.getLogVal(xt,0)),a.dataRadiusOfPercent[G][Ft]=xt/Nt,a.dataRadius[G][Ft]=a.dataRadiusOfPercent[G][Ft]*a.size,a.angleArr[G][Ft]=Ft*a.disAngle}),P=a.getDataPointsPos(a.dataRadius[G],a.angleArr[G]);var N=a.createPaths(P,{x:0,y:0});F=a.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),O=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":G}),h.globals.delayedElements.push({el:F.node,index:G});var E={i:G,realIndex:G,animationDelay:G,initialSpeed:h.config.chart.animations.speed,dataChangeSpeed:h.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:h.globals.stroke.colors[G],strokeLineCap:h.config.stroke.lineCap},X=null;h.globals.previousPaths.length>0&&(X=a.getPreviousPath(G));for(var W=0;W<N.linePathsTo.length;W++){var Z=a.graphics.renderPaths(Et(Et({},E),{},{pathFrom:null===X?N.linePathsFrom[W]:X,pathTo:N.linePathsTo[W],strokeWidth:Array.isArray(a.strokeWidth)?a.strokeWidth[G]:a.strokeWidth,fill:"none",drawShadow:!1}));b.add(Z);var et=d.fillPath({seriesNumber:G}),it=a.graphics.renderPaths(Et(Et({},E),{},{pathFrom:null===X?N.areaPathsFrom[W]:X,pathTo:N.areaPathsTo[W],strokeWidth:0,fill:et,drawShadow:!1}));h.config.chart.dropShadow.enabled&&new Ve(a.ctx).dropShadow(it,Object.assign({},h.config.chart.dropShadow,{noUserSpaceOnUse:!0}),G),b.add(it)}Y.forEach(function(xt,Ft){var Nt=new Xo(a.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:G,dataPointIndex:Ft}),_t=a.graphics.drawMarker(P[Ft].x,P[Ft].y,Nt);_t.attr("rel",Ft),_t.attr("j",Ft),_t.attr("index",G),_t.node.setAttribute("default-marker-size",Nt.pSize);var ne=a.graphics.group({class:"apexcharts-series-markers"});ne&&ne.add(_t),F.add(ne),b.add(F);var oe=h.config.dataLabels;if(oe.enabled){var ue=oe.formatter(h.globals.series[G][Ft],{seriesIndex:G,dataPointIndex:Ft,w:h});g.plotDataLabelsText({x:P[Ft].x,y:P[Ft].y,text:ue,textAnchor:"middle",i:G,j:G,parent:O,offsetCorrection:!1,dataLabelsConfig:Et({},oe)})}b.add(O)}),f.push(b)}),this.drawPolygons({parent:C}),h.config.xaxis.labels.show){var D=this.drawXAxisTexts();C.add(D)}return f.forEach(function(Y){C.add(Y)}),C.add(this.yaxisLabels),C}},{key:"drawPolygons",value:function(r){for(var a=this,h=this.w,d=r.parent,f=new lo(this.ctx),g=h.globals.yAxisScale[0].result.reverse(),y=g.length,x=[],S=this.size/(y-1),M=0;M<y;M++)x[M]=S*M;x.reverse();var C=[],P=[];x.forEach(function(F,O){var D=at.getPolygonPos(F,a.dataPointsLen),Y="";D.forEach(function(G,U){if(0===O){var b=a.graphics.drawLine(G.x,G.y,0,0,Array.isArray(a.polygons.connectorColors)?a.polygons.connectorColors[U]:a.polygons.connectorColors);P.push(b)}0===U&&a.yaxisLabelsTextsPos.push({x:G.x,y:G.y}),Y+=G.x+","+G.y+" "}),C.push(Y)}),C.forEach(function(F,O){var D=a.polygons.strokeColors,Y=a.polygons.strokeWidth,G=a.graphics.drawPolygon(F,Array.isArray(D)?D[O]:D,Array.isArray(Y)?Y[O]:Y,h.globals.radarPolygons.fill.colors[O]);d.add(G)}),P.forEach(function(F){d.add(F)}),h.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(F,O){var D=f.drawYAxisTexts(F.x,F.y,O,g[O]);a.yaxisLabels.add(D)})}},{key:"drawXAxisTexts",value:function(){var r=this,a=this.w,h=a.config.xaxis.labels,d=this.graphics.group({class:"apexcharts-xaxis"}),f=at.getPolygonPos(this.size,this.dataPointsLen);return a.globals.labels.forEach(function(g,y){var x=a.config.xaxis.labels.formatter,S=new Kn(r.ctx);if(f[y]){var M=r.getTextPos(f[y],r.size),C=x(g,{seriesIndex:-1,dataPointIndex:y,w:a});S.plotDataLabelsText({x:M.newX,y:M.newY,text:C,textAnchor:M.textAnchor,i:y,j:y,parent:d,color:Array.isArray(h.style.colors)&&h.style.colors[y]?h.style.colors[y]:"#a8a8a8",dataLabelsConfig:Et({textAnchor:M.textAnchor,dropShadow:{enabled:!1}},h),offsetCorrection:!1})}}),d}},{key:"createPaths",value:function(r,a){var h=this,d=[],f=[],g=[],y=[];if(r.length){f=[this.graphics.move(a.x,a.y)],y=[this.graphics.move(a.x,a.y)];var x=this.graphics.move(r[0].x,r[0].y),S=this.graphics.move(r[0].x,r[0].y);r.forEach(function(M,C){x+=h.graphics.line(M.x,M.y),S+=h.graphics.line(M.x,M.y),C===r.length-1&&(x+="Z",S+="Z")}),d.push(x),g.push(S)}return{linePathsFrom:f,linePathsTo:d,areaPathsFrom:y,areaPathsTo:g}}},{key:"getTextPos",value:function(r,a){var h="middle",d=r.x,f=r.y;return Math.abs(r.x)>=10?r.x>0?(h="start",d+=10):r.x<0&&(h="end",d-=10):h="middle",Math.abs(r.y)>=a-10&&(r.y<0?f-=10:r.y>0&&(f+=10)),{textAnchor:h,newX:d,newY:f}}},{key:"getPreviousPath",value:function(r){for(var a=this.w,h=null,d=0;d<a.globals.previousPaths.length;d++){var f=a.globals.previousPaths[d];f.paths.length>0&&parseInt(f.realIndex,10)===parseInt(r,10)&&void 0!==a.globals.previousPaths[d].paths[0]&&(h=a.globals.previousPaths[d].paths[0].d)}return h}},{key:"getDataPointsPos",value:function(r,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;r=r||[],a=a||[];for(var d=[],f=0;f<h;f++){var g={};g.x=r[f]*Math.sin(a[f]),g.y=-r[f]*Math.cos(a[f]),d.push(g)}return d}}]),V}(),Ca=function(V){Rr(a,V);var r=Tt(a);function a(h){var d;zt(this,a),(d=r.call(this,h)).ctx=h,d.w=h.w,d.animBeginArr=[0],d.animDur=0;var f=d.w;return d.startAngle=f.config.plotOptions.radialBar.startAngle,d.endAngle=f.config.plotOptions.radialBar.endAngle,d.totalAngle=Math.abs(f.config.plotOptions.radialBar.endAngle-f.config.plotOptions.radialBar.startAngle),d.trackStartAngle=f.config.plotOptions.radialBar.track.startAngle,d.trackEndAngle=f.config.plotOptions.radialBar.track.endAngle,d.barLabels=d.w.config.plotOptions.radialBar.barLabels,d.donutDataLabels=d.w.config.plotOptions.radialBar.dataLabels,d.radialDataLabels=d.donutDataLabels,d.trackStartAngle||(d.trackStartAngle=d.startAngle),d.trackEndAngle||(d.trackEndAngle=d.endAngle),360===d.endAngle&&(d.endAngle=359.99),d.margin=parseInt(f.config.plotOptions.radialBar.track.margin,10),d.onBarLabelClick=d.onBarLabelClick.bind(Vt(d)),d}return Dt(a,[{key:"draw",value:function(h){var d=this.w,f=new Q(this.ctx),g=f.group({class:"apexcharts-radialbar"});if(d.globals.noData)return g;var y=f.group(),x=this.defaultSize/2,S=d.globals.gridWidth/2,M=this.defaultSize/2.05;d.config.chart.sparkline.enabled||(M=M-d.config.stroke.width-d.config.chart.dropShadow.blur);var C=d.globals.fill.colors;if(d.config.plotOptions.radialBar.track.show){var P=this.drawTracks({size:M,centerX:S,centerY:x,colorArr:C,series:h});y.add(P)}var F=this.drawArcs({size:M,centerX:S,centerY:x,colorArr:C,series:h}),O=360;d.config.plotOptions.radialBar.startAngle<0&&(O=this.totalAngle);var D=(360-O)/360;if(d.globals.radialSize=M-M*D,this.radialDataLabels.value.show){var Y=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);d.globals.radialSize+=Y*D}return y.add(F.g),"front"===d.config.plotOptions.radialBar.hollow.position&&(F.g.add(F.elHollow),F.dataLabels&&F.g.add(F.dataLabels)),g.add(y),g}},{key:"drawTracks",value:function(h){var d=this.w,f=new Q(this.ctx),g=f.group({class:"apexcharts-tracks"}),y=new Ve(this.ctx),x=new wi(this.ctx),S=this.getStrokeWidth(h);h.size=h.size-S/2;for(var M=0;M<h.series.length;M++){var C=f.group({class:"apexcharts-radialbar-track apexcharts-track"});g.add(C),C.attr({rel:M+1}),h.size=h.size-S-this.margin;var P=d.config.plotOptions.radialBar.track,F=x.fillPath({seriesNumber:0,size:h.size,fillColors:Array.isArray(P.background)?P.background[M]:P.background,solid:!0}),O=this.trackStartAngle,D=this.trackEndAngle;Math.abs(D)+Math.abs(O)>=360&&(D=360-Math.abs(this.startAngle)-.1);var Y=f.drawPath({d:"",stroke:F,strokeWidth:S*parseInt(P.strokeWidth,10)/100,fill:"none",strokeOpacity:P.opacity,classes:"apexcharts-radialbar-area"});P.dropShadow.enabled&&y.dropShadow(Y,P.dropShadow),C.add(Y),Y.attr("id","apexcharts-radialbarTrack-"+M),this.animatePaths(Y,{centerX:h.centerX,centerY:h.centerY,endAngle:D,startAngle:O,size:h.size,i:M,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:d.globals.easing})}return g}},{key:"drawArcs",value:function(h){var d=this.w,f=new Q(this.ctx),g=new wi(this.ctx),y=new Ve(this.ctx),x=f.group(),S=this.getStrokeWidth(h);h.size=h.size-S/2;var M=d.config.plotOptions.radialBar.hollow.background,C=h.size-S*h.series.length-this.margin*h.series.length-S*parseInt(d.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,P=C-d.config.plotOptions.radialBar.hollow.margin;void 0!==d.config.plotOptions.radialBar.hollow.image&&(M=this.drawHollowImage(h,x,C,M));var F=this.drawHollow({size:P,centerX:h.centerX,centerY:h.centerY,fill:M||"transparent"});d.config.plotOptions.radialBar.hollow.dropShadow.enabled&&y.dropShadow(F,d.config.plotOptions.radialBar.hollow.dropShadow);var D=1;!this.radialDataLabels.total.show&&d.globals.series.length>1&&(D=0);var Y=null;this.radialDataLabels.show&&(Y=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:C,centerX:h.centerX,centerY:h.centerY,opacity:D})),"back"===d.config.plotOptions.radialBar.hollow.position&&(x.add(F),Y&&x.add(Y));var G=!1;d.config.plotOptions.radialBar.inverseOrder&&(G=!0);for(var U=G?h.series.length-1:0;G?U>=0:U<h.series.length;G?U--:U++){var b=f.group({class:"apexcharts-series apexcharts-radial-series",seriesName:at.escapeString(d.globals.seriesNames[U])});x.add(b),b.attr({rel:U+1,"data:realIndex":U}),this.ctx.series.addCollapsedClassToSeries(b,U),h.size=h.size-S-this.margin;var N=g.fillPath({seriesNumber:U,size:h.size,value:h.series[U]}),E=this.startAngle,X=void 0,W=at.negToZero(h.series[U]>100?100:h.series[U])/100,Z=Math.round(this.totalAngle*W)+this.startAngle,et=void 0;d.globals.dataChanged&&(X=this.startAngle,et=Math.round(this.totalAngle*at.negToZero(d.globals.previousPaths[U])/100)+X),Math.abs(Z)+Math.abs(E)>=360&&(Z-=.01),Math.abs(et)+Math.abs(X)>=360&&(et-=.01);var it=Z-E,pt=Array.isArray(d.config.stroke.dashArray)?d.config.stroke.dashArray[U]:d.config.stroke.dashArray,wt=f.drawPath({d:"",stroke:N,strokeWidth:S,fill:"none",fillOpacity:d.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+U,strokeDashArray:pt});if(Q.setAttrs(wt.node,{"data:angle":it,"data:value":h.series[U]}),d.config.chart.dropShadow.enabled&&y.dropShadow(wt,d.config.chart.dropShadow,U),y.setSelectionFilter(wt,0,U),this.addListeners(wt,this.radialDataLabels),b.add(wt),wt.attr({index:0,j:U}),this.barLabels.enabled){var Ft=at.polarToCartesian(h.centerX,h.centerY,h.size,E),Nt=this.barLabels.formatter(d.globals.seriesNames[U],{seriesIndex:U,w:d}),_t=["apexcharts-radialbar-label"];this.barLabels.onClick||_t.push("apexcharts-no-click");var ne=this.barLabels.useSeriesColors?d.globals.colors[U]:d.config.chart.foreColor;ne||(ne=d.config.chart.foreColor);var oe=Ft.x-this.barLabels.margin,ue=Ft.y,re=f.drawText({x:oe,y:ue,text:Nt,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:ne,cssClass:_t.join(" ")});re.on("click",this.onBarLabelClick),re.attr({rel:U+1}),0!==E&&re.attr({"transform-origin":"".concat(oe," ").concat(ue),transform:"rotate(".concat(E," 0 0)")}),b.add(re)}var ce=0;!this.initialAnim||d.globals.resized||d.globals.dataChanged||(ce=d.config.chart.animations.speed),d.globals.dataChanged&&(ce=d.config.chart.animations.dynamicAnimation.speed),this.animDur=ce/(1.2*h.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(wt,{centerX:h.centerX,centerY:h.centerY,endAngle:Z,startAngle:E,prevEndAngle:et,prevStartAngle:X,size:h.size,i:U,totalItems:2,animBeginArr:this.animBeginArr,dur:ce,shouldSetPrevPaths:!0,easing:d.globals.easing})}return{g:x,elHollow:F,dataLabels:Y}}},{key:"drawHollow",value:function(h){var d=new Q(this.ctx).drawCircle(2*h.size);return d.attr({class:"apexcharts-radialbar-hollow",cx:h.centerX,cy:h.centerY,r:h.size,fill:h.fill}),d}},{key:"drawHollowImage",value:function(h,d,f,g){var y=this.w,x=new wi(this.ctx),S=at.randomId(),M=y.config.plotOptions.radialBar.hollow.image;if(y.config.plotOptions.radialBar.hollow.imageClipped)x.clippedImgArea({width:f,height:f,image:M,patternID:"pattern".concat(y.globals.cuid).concat(S)}),g="url(#pattern".concat(y.globals.cuid).concat(S,")");else{var C=y.config.plotOptions.radialBar.hollow.imageWidth,P=y.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===C&&void 0===P){var F=y.globals.dom.Paper.image(M).loaded(function(D){this.move(h.centerX-D.width/2+y.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-D.height/2+y.config.plotOptions.radialBar.hollow.imageOffsetY)});d.add(F)}else{var O=y.globals.dom.Paper.image(M).loaded(function(D){this.move(h.centerX-C/2+y.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-P/2+y.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(C,P)});d.add(O)}}return g}},{key:"getStrokeWidth",value:function(h){return h.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(h.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(h){var d=parseInt(h.target.getAttribute("rel"),10)-1,f=this.barLabels.onClick,g=this.w;f&&f(g.globals.seriesNames[d],{w:g,seriesIndex:d})}}]),a}(Rl),fu=function(V){Rr(a,V);var r=Tt(a);function a(){return zt(this,a),r.apply(this,arguments)}return Dt(a,[{key:"draw",value:function(h,d){var f=this.w,g=new Q(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=h,this.seriesRangeStart=f.globals.seriesRangeStart,this.seriesRangeEnd=f.globals.seriesRangeEnd,this.barHelpers.initVariables(h);for(var y=g.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),x=0;x<h.length;x++){var S,M,C,P,F=void 0,O=void 0,D=f.globals.comboCharts?d[x]:x,Y=g.group({class:"apexcharts-series",seriesName:at.escapeString(f.globals.seriesNames[D]),rel:x+1,"data:realIndex":D});this.ctx.series.addCollapsedClassToSeries(Y,D),h[x].length>0&&(this.visibleI=this.visibleI+1);var G=0,U=0;this.yRatio.length>1&&(this.yaxisIndex=D);var b=this.barHelpers.initialPositions();O=b.y,P=b.zeroW,F=b.x,U=b.barWidth,G=b.barHeight,S=b.xDivision,M=b.yDivision,C=b.zeroH;for(var N=g.group({class:"apexcharts-datalabels","data:realIndex":D}),E=g.group({class:"apexcharts-rangebar-goals-markers"}),X=0;X<f.globals.dataPoints;X++){var W,Z=this.barHelpers.getStrokeWidth(x,X,D),et=this.seriesRangeStart[x][X],it=this.seriesRangeEnd[x][X],pt=null,wt=null,xt=null,Ft={x:F,y:O,strokeWidth:Z,elSeries:Y},Nt=this.seriesLen;if(f.config.plotOptions.bar.rangeBarGroupRows&&(Nt=1),void 0===f.config.series[x].data[X])break;if(this.isHorizontal){if(xt=O+G*this.visibleI,f.config.series[x].data[X].x){var ne=this.detectOverlappingBars({i:x,j:X,barYPosition:xt,srty:(M-G*Nt)/2,barHeight:G,yDivision:M,initPositions:b});G=ne.barHeight,xt=ne.barYPosition}U=(pt=this.drawRangeBarPaths(Et({indexes:{i:x,j:X,realIndex:D},barHeight:G,barYPosition:xt,zeroW:P,yDivision:M,y1:et,y2:it},Ft))).barWidth}else{if(f.globals.isXNumeric&&(F=(f.globals.seriesX[x][X]-f.globals.minX)/this.xRatio-U/2),wt=F+U*this.visibleI,f.config.series[x].data[X].x){var ue=this.detectOverlappingBars({i:x,j:X,barXPosition:wt,srtx:(S-U*Nt)/2,barWidth:U,xDivision:S,initPositions:b});U=ue.barWidth,wt=ue.barXPosition}G=(pt=this.drawRangeColumnPaths(Et({indexes:{i:x,j:X,realIndex:D},barWidth:U,barXPosition:wt,zeroH:C,xDivision:S},Ft))).barHeight}var re=this.barHelpers.drawGoalLine({barXPosition:pt.barXPosition,barYPosition:xt,goalX:pt.goalX,goalY:pt.goalY,barHeight:G,barWidth:U});re&&E.add(re),O=pt.y,F=pt.x;var ce=this.barHelpers.getPathFillColor(h,x,X,D);this.renderSeries((as(W={realIndex:D,pathFill:ce,lineFill:f.globals.stroke.colors[D],j:X,i:x,x:F,y:O,y1:et,y2:it,pathFrom:pt.pathFrom,pathTo:pt.pathTo,strokeWidth:Z,elSeries:Y,series:h,barHeight:G,barWidth:U,barXPosition:wt,barYPosition:xt},"barWidth",U),as(W,"elDataLabelsWrap",N),as(W,"elGoalsMarkers",E),as(W,"visibleSeries",this.visibleI),as(W,"type","rangebar"),W))}y.add(Y)}return y}},{key:"detectOverlappingBars",value:function(h){var d=h.i,f=h.j,g=h.barYPosition,y=h.barXPosition,x=h.srty,S=h.srtx,M=h.barHeight,C=h.barWidth,P=h.yDivision,F=h.xDivision,O=h.initPositions,D=this.w,Y=[],G=D.config.series[d].data[f].rangeName,U=D.config.series[d].data[f].x,b=Array.isArray(U)?U.join(" "):U,N=D.globals.labels.map(function(X){return Array.isArray(X)?X.join(" "):X}).indexOf(b),E=D.globals.seriesRange[d].findIndex(function(X){return X.x===b&&X.overlaps.length>0});return this.isHorizontal?(g=D.config.plotOptions.bar.rangeBarGroupRows?x+P*N:x+M*this.visibleI+P*N,E>-1&&!D.config.plotOptions.bar.rangeBarOverlap&&(Y=D.globals.seriesRange[d][E].overlaps).indexOf(G)>-1&&(g=(M=O.barHeight/Y.length)*this.visibleI+P*(100-parseInt(this.barOptions.barHeight,10))/100/2+M*(this.visibleI+Y.indexOf(G))+P*N)):(N>-1&&(y=D.config.plotOptions.bar.rangeBarGroupRows?S+F*N:S+C*this.visibleI+F*N),E>-1&&!D.config.plotOptions.bar.rangeBarOverlap&&(Y=D.globals.seriesRange[d][E].overlaps).indexOf(G)>-1&&(y=(C=O.barWidth/Y.length)*this.visibleI+F*(100-parseInt(this.barOptions.barWidth,10))/100/2+C*(this.visibleI+Y.indexOf(G))+F*N)),{barYPosition:g,barXPosition:y,barHeight:M,barWidth:C}}},{key:"drawRangeColumnPaths",value:function(h){var d=h.indexes,f=h.x,g=h.xDivision,y=h.barWidth,x=h.barXPosition,S=h.zeroH,M=this.w,C=d.i,P=d.j,F=this.yRatio[this.yaxisIndex],O=d.realIndex,D=this.getRangeValue(O,P),Y=Math.min(D.start,D.end),G=Math.max(D.start,D.end);null==this.series[C][P]?Y=S:(Y=S-Y/F,G=S-G/F);var U=Math.abs(G-Y),b=this.barHelpers.getColumnPaths({barXPosition:x,barWidth:y,y1:Y,y2:G,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:d.realIndex,i:O,j:P,w:M});if(M.globals.isXNumeric){var N=this.getBarXForNumericXAxis({x:f,j:P,realIndex:O,barWidth:y});f=N.x,x=N.barXPosition}else f+=g;return{pathTo:b.pathTo,pathFrom:b.pathFrom,barHeight:U,x:f,y:G,goalY:this.barHelpers.getGoalValues("y",null,S,C,P),barXPosition:x}}},{key:"drawRangeBarPaths",value:function(h){var d=h.indexes,f=h.y,x=h.yDivision,S=h.barHeight,M=h.barYPosition,C=h.zeroW,P=this.w,F=C+h.y1/this.invertedYRatio,O=C+h.y2/this.invertedYRatio,D=Math.abs(O-F),Y=this.barHelpers.getBarpaths({barYPosition:M,barHeight:S,x1:F,x2:O,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:d.realIndex,realIndex:d.realIndex,j:d.j,w:P});return P.globals.isXNumeric||(f+=x),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,barWidth:D,x:O,goalX:this.barHelpers.getGoalValues("x",C,null,d.realIndex,d.j),y:f}}},{key:"getRangeValue",value:function(h,d){var f=this.w;return{start:f.globals.seriesRangeStart[h][d],end:f.globals.seriesRangeEnd[h][d]}}}]),a}(ao),pu=function(){function V(r){zt(this,V),this.w=r.w,this.lineCtx=r}return Dt(V,[{key:"sameValueSeriesFix",value:function(r,a){var h=this.w;if(("gradient"===h.config.fill.type||"gradient"===h.config.fill.type[r])&&new Lt(this.lineCtx.ctx,h).seriesHaveSameValues(r)){var d=a[r].slice();d[d.length-1]=d[d.length-1]+1e-6,a[r]=d}return a}},{key:"calculatePoints",value:function(r){var a=r.series,d=r.x,f=r.y,g=r.i,y=r.j,x=r.prevY,S=this.w,M=[],C=[];if(0===y){var P=this.lineCtx.categoryAxisCorrection+S.config.markers.offsetX;S.globals.isXNumeric&&(P=(S.globals.seriesX[r.realIndex][0]-S.globals.minX)/this.lineCtx.xRatio+S.config.markers.offsetX),M.push(P),C.push(at.isNumber(a[g][0])?x+S.config.markers.offsetY:null),M.push(d+S.config.markers.offsetX),C.push(at.isNumber(a[g][y+1])?f+S.config.markers.offsetY:null)}else M.push(d+S.config.markers.offsetX),C.push(at.isNumber(a[g][y+1])?f+S.config.markers.offsetY:null);return{x:M,y:C}}},{key:"checkPreviousPaths",value:function(r){for(var a=r.pathFromLine,h=r.pathFromArea,d=r.realIndex,f=this.w,g=0;g<f.globals.previousPaths.length;g++){var y=f.globals.previousPaths[g];("line"===y.type||"area"===y.type)&&y.paths.length>0&&parseInt(y.realIndex,10)===parseInt(d,10)&&("line"===y.type?(this.lineCtx.appendPathFrom=!1,a=f.globals.previousPaths[g].paths[0].d):"area"===y.type&&(this.lineCtx.appendPathFrom=!1,h=f.globals.previousPaths[g].paths[0].d,f.config.stroke.show&&f.globals.previousPaths[g].paths[1]&&(a=f.globals.previousPaths[g].paths[1].d)))}return{pathFromLine:a,pathFromArea:h}}},{key:"determineFirstPrevY",value:function(r){var a,h,d=r.i,f=r.series,g=r.prevY,y=r.lineYPosition,x=this.w,S=x.config.chart.stacked&&!x.globals.comboCharts||x.config.chart.stacked&&x.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(a=this.w.config.series[d])||void 0===a?void 0:a.type));if(void 0!==(null===(h=f[d])||void 0===h?void 0:h[0]))g=(y=S&&d>0?this.lineCtx.prevSeriesY[d-1][0]:this.lineCtx.zeroY)-f[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?f[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(S&&d>0&&void 0===f[d][0])for(var M=d-1;M>=0;M--)if(null!=f[M][0]){g=y=this.lineCtx.prevSeriesY[M][0];break}return{prevY:g,lineYPosition:y}}}]),V}(),q=function(V){for(var r="",a=0;a<V.length;a++){var h=V[a],d=h.length;d>4?(r+="C".concat(h[0],", ").concat(h[1]),r+=", ".concat(h[2],", ").concat(h[3]),r+=", ".concat(h[4],", ").concat(h[5])):d>2&&(r+="S".concat(h[0],", ").concat(h[1]),r+=", ".concat(h[2],", ").concat(h[3]))}return r},Zn=function(V){var r=function(V){for(var r,a,h,d,f=function(M){for(var C=[],P=M[0],F=M[1],O=C[0]=Aa(P,F),D=1,Y=M.length-1;D<Y;D++)C[D]=.5*(O+(O=Aa(P=F,F=M[D+1])));return C[D]=O,C}(V),g=V.length-1,y=[],x=0;x<g;x++)h=Aa(V[x],V[x+1]),Math.abs(h)<1e-6?f[x]=f[x+1]=0:(d=(r=f[x]/h)*r+(a=f[x+1]/h)*a)>9&&(d=3*h/Math.sqrt(d),f[x]=d*r,f[x+1]=d*a);for(var S=0;S<=g;S++)d=(V[Math.min(g,S+1)][0]-V[Math.max(0,S-1)][0])/(6*(1+f[S]*f[S])),y.push([d||0,f[S]*d||0]);return y}(V),a=V[1],h=V[0],d=[],f=r[1],g=r[0];d.push(h,[h[0]+g[0],h[1]+g[1],a[0]-f[0],a[1]-f[1],a[0],a[1]]);for(var y=2,x=r.length;y<x;y++){var S=V[y],M=r[y];d.push([S[0]-M[0],S[1]-M[1],S[0],S[1]])}return d};function Aa(V,r){return(r[1]-V[1])/(r[0]-V[0])}var Pa=function(){function V(r,a,h){zt(this,V),this.ctx=r,this.w=r.w,this.xyRatios=a,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||h,this.scatter=new ut(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new pu(this),this.markers=new Xo(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Dt(V,[{key:"draw",value:function(r,a,h,d){var f,g=this.w,y=new Q(this.ctx),x=g.globals.comboCharts?a:g.config.chart.type,S=y.group({class:"apexcharts-".concat(x,"-series apexcharts-plot-series")}),M=new Lt(this.ctx,g);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,r=M.getLogSeries(r),this.yRatio=M.getLogYRatios(this.yRatio);for(var C=[],P=0;P<r.length;P++){r=this.lineHelpers.sameValueSeriesFix(P,r);var F=g.globals.comboCharts?h[P]:P;this._initSerieVariables(r,P,F);var O=[],D=[],Y=[],G=g.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,F),g.globals.isXNumeric&&g.globals.seriesX.length>0&&(G=(g.globals.seriesX[F][0]-g.globals.minX)/this.xRatio),Y.push(G);var U,b=G,N=void 0,E=b,X=this.zeroY,W=this.zeroY;X=this.lineHelpers.determineFirstPrevY({i:P,series:r,prevY:X,lineYPosition:0}).prevY,O.push("monotonCubic"===g.config.stroke.curve&&null===r[P][0]?null:X),U=X,"rangeArea"===x&&(N=W=this.lineHelpers.determineFirstPrevY({i:P,series:d,prevY:W,lineYPosition:0}).prevY,D.push(W));var Z={type:x,series:r,realIndex:F,i:P,x:G,y:1,pX:b,pY:U,pathsFrom:this._calculatePathsFrom({type:x,series:r,i:P,realIndex:F,prevX:E,prevY:X,prevY2:W}),linePaths:[],areaPaths:[],seriesIndex:h,lineYPosition:0,xArrj:Y,yArrj:O,y2Arrj:D,seriesRangeEnd:d},et=this._iterateOverDataPoints(Et(Et({},Z),{},{iterations:"rangeArea"===x?r[P].length-1:void 0,isRangeStart:!0}));if("rangeArea"===x){var it=this._calculatePathsFrom({series:d,i:P,realIndex:F,prevX:E,prevY:W}),pt=this._iterateOverDataPoints(Et(Et({},Z),{},{series:d,pY:N,pathsFrom:it,iterations:d[P].length-1,isRangeStart:!1}));et.linePaths[0]=pt.linePath+et.linePath,et.pathFromLine=pt.pathFromLine+et.pathFromLine}this._handlePaths({type:x,realIndex:F,i:P,paths:et}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),C.push(this.elSeries)}if(void 0!==(null===(f=g.config.series[0])||void 0===f?void 0:f.zIndex)&&C.sort(function(Ft,Nt){return Number(Ft.node.getAttribute("zIndex"))-Number(Nt.node.getAttribute("zIndex"))}),g.config.chart.stacked)for(var wt=C.length;wt>0;wt--)S.add(C[wt-1]);else for(var xt=0;xt<C.length;xt++)S.add(C[xt]);return S}},{key:"_initSerieVariables",value:function(r,a,h){var d=this.w,f=new Q(this.ctx);this.xDivision=d.globals.gridWidth/(d.globals.dataPoints-("on"===d.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(d.config.stroke.width)?d.config.stroke.width[h]:d.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=h),this.isReversed=d.config.yaxis[this.yaxisIndex]&&d.config.yaxis[this.yaxisIndex].reversed,this.zeroY=d.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?d.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>d.globals.gridHeight||"end"===d.config.plotOptions.area.fillTo)&&(this.areaBottomY=d.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=f.group({class:"apexcharts-series",zIndex:void 0!==d.config.series[h].zIndex?d.config.series[h].zIndex:h,seriesName:at.escapeString(d.globals.seriesNames[h])}),this.elPointsMain=f.group({class:"apexcharts-series-markers-wrap","data:realIndex":h}),this.elDataLabelsWrap=f.group({class:"apexcharts-datalabels","data:realIndex":h}),this.elSeries.attr({"data:longestSeries":r[a].length===d.globals.dataPoints,rel:a+1,"data:realIndex":h}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(r){var a,h,d,f,g=r.type,y=r.series,x=r.i,S=r.realIndex,M=r.prevX,C=r.prevY,P=r.prevY2,F=this.w,O=new Q(this.ctx);if(null===y[x][0]){for(var D=0;D<y[x].length;D++)if(null!==y[x][D]){a=O.move(M=this.xDivision*D,C=this.zeroY-y[x][D]/this.yRatio[this.yaxisIndex]),h=O.move(M,this.areaBottomY);break}}else a=O.move(M,C),"rangeArea"===g&&(a=O.move(M,P)+O.line(M,C)),h=O.move(M,this.areaBottomY)+O.line(M,C);if(d=O.move(-1,this.zeroY)+O.line(-1,this.zeroY),f=O.move(-1,this.zeroY)+O.line(-1,this.zeroY),F.globals.previousPaths.length>0){var Y=this.lineHelpers.checkPreviousPaths({pathFromLine:d,pathFromArea:f,realIndex:S});d=Y.pathFromLine,f=Y.pathFromArea}return{prevX:M,prevY:C,linePath:a,areaPath:h,pathFromLine:d,pathFromArea:f}}},{key:"_handlePaths",value:function(r){var a=r.type,h=r.realIndex,d=r.i,f=r.paths,g=this.w,y=new Q(this.ctx),x=new wi(this.ctx);this.prevSeriesY.push(f.yArrj),g.globals.seriesXvalues[h]=f.xArrj,g.globals.seriesYvalues[h]=f.yArrj;var S=g.config.forecastDataPoints;if(S.count>0&&"rangeArea"!==a){var M=g.globals.seriesXvalues[h][g.globals.seriesXvalues[h].length-S.count-1],C=y.drawRect(M,0,g.globals.gridWidth,g.globals.gridHeight,0);g.globals.dom.elForecastMask.appendChild(C.node);var P=y.drawRect(0,0,M,g.globals.gridHeight,0);g.globals.dom.elNonForecastMask.appendChild(P.node)}this.pointsChart||g.globals.delayedElements.push({el:this.elPointsMain.node,index:h});var F={i:d,realIndex:h,animationDelay:d,initialSpeed:g.config.chart.animations.speed,dataChangeSpeed:g.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(a)};if("area"===a)for(var O=x.fillPath({seriesNumber:h}),D=0;D<f.areaPaths.length;D++){var Y=y.renderPaths(Et(Et({},F),{},{pathFrom:f.pathFromArea,pathTo:f.areaPaths[D],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:O}));this.elSeries.add(Y)}if(g.config.stroke.show&&!this.pointsChart){var G=null;if("line"===a)G=x.fillPath({seriesNumber:h,i:d});else if("solid"===g.config.stroke.fill.type)G=g.globals.stroke.colors[h];else{var U=g.config.fill;g.config.fill=g.config.stroke.fill,G=x.fillPath({seriesNumber:h,i:d}),g.config.fill=U}for(var b=0;b<f.linePaths.length;b++){var N=G;"rangeArea"===a&&(N=x.fillPath({seriesNumber:h}));var E=Et(Et({},F),{},{pathFrom:f.pathFromLine,pathTo:f.linePaths[b],stroke:G,strokeWidth:this.strokeWidth,strokeLineCap:g.config.stroke.lineCap,fill:"rangeArea"===a?N:"none"}),X=y.renderPaths(E);if(this.elSeries.add(X),X.attr("fill-rule","evenodd"),S.count>0&&"rangeArea"!==a){var W=y.renderPaths(E);W.node.setAttribute("stroke-dasharray",S.dashArray),S.strokeWidth&&W.node.setAttribute("stroke-width",S.strokeWidth),this.elSeries.add(W),W.attr("clip-path","url(#forecastMask".concat(g.globals.cuid,")")),X.attr("clip-path","url(#nonForecastMask".concat(g.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(r){var a,h=this,d=r.type,f=r.series,g=r.iterations,y=r.realIndex,x=r.i,S=r.x,M=r.y,C=r.pX,P=r.pY,F=r.pathsFrom,O=r.linePaths,D=r.areaPaths,Y=r.seriesIndex,G=r.lineYPosition,U=r.xArrj,b=r.yArrj,N=r.y2Arrj,E=r.isRangeStart,X=r.seriesRangeEnd,W=this.w,Z=new Q(this.ctx),et=this.yRatio,it=F.prevY,pt=F.linePath,wt=F.areaPath,xt=F.pathFromLine,Ft=F.pathFromArea,Nt=at.isNumber(W.globals.minYArr[y])?W.globals.minYArr[y]:W.globals.minY;g||(g=W.globals.dataPoints>1?W.globals.dataPoints-1:W.globals.dataPoints);for(var _t=function(En,us){return us-En/et[h.yaxisIndex]+2*(h.isReversed?En/et[h.yaxisIndex]:0)},ne=M,oe=W.config.chart.stacked&&!W.globals.comboCharts||W.config.chart.stacked&&W.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(a=this.w.config.series[y])||void 0===a?void 0:a.type)),ue=0;ue<g;ue++){var re=null==f[x][ue+1];if(W.globals.isXNumeric){var ce=W.globals.seriesX[y][ue+1];void 0===W.globals.seriesX[y][ue+1]&&(ce=W.globals.seriesX[y][g-1]),S=(ce-W.globals.minX)/this.xRatio}else S+=this.xDivision;G=oe&&x>0&&W.globals.collapsedSeries.length<W.config.series.length-1?this.prevSeriesY[function(En){for(var us=En,Ne=0;Ne<W.globals.series.length;Ne++)if(W.globals.collapsedSeriesIndices.indexOf(En)>-1){us--;break}return us>=0?us:0}(x-1)][ue+1]:this.zeroY,re?M=_t(Nt,G):(M=_t(f[x][ue+1],G),"rangeArea"===d&&(ne=_t(X[x][ue+1],G))),U.push(S),b.push(re&&"smooth"===W.config.stroke.curve?null:M),N.push(ne);var Le=this.lineHelpers.calculatePoints({series:f,x:S,y:M,realIndex:y,i:x,j:ue,prevY:it}),Te=this._createPaths({type:d,series:f,i:x,realIndex:y,j:ue,x:S,y:M,y2:ne,xArrj:U,yArrj:b,y2Arrj:N,pX:C,pY:P,linePath:pt,areaPath:wt,linePaths:O,areaPaths:D,seriesIndex:Y,isRangeStart:E});D=Te.areaPaths,O=Te.linePaths,C=Te.pX,P=Te.pY,wt=Te.areaPath,pt=Te.linePath,!this.appendPathFrom||"monotoneCubic"===W.config.stroke.curve&&"rangeArea"===d||(xt+=Z.line(S,this.zeroY),Ft+=Z.line(S,this.zeroY)),this.handleNullDataPoints(f,Le,x,ue,y),this._handleMarkersAndLabels({type:d,pointsPos:Le,i:x,j:ue,realIndex:y,isRangeStart:E})}return{yArrj:b,xArrj:U,pathFromArea:Ft,areaPaths:D,pathFromLine:xt,linePaths:O,linePath:pt,areaPath:wt}}},{key:"_handleMarkersAndLabels",value:function(r){var a=r.type,h=r.pointsPos,d=r.isRangeStart,f=r.i,g=r.j,y=r.realIndex,x=this.w,S=new Kn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,g,{realIndex:y,pointsPos:h,zRatio:this.zRatio,elParent:this.elPointsMain});else{x.globals.series[f].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var M=this.markers.plotChartMarkers(h,y,g+1);null!==M&&this.elPointsMain.add(M)}var C=S.drawDataLabel({type:a,isRangeStart:d,pos:h,i:y,j:g+1});null!==C&&this.elDataLabelsWrap.add(C)}},{key:"_createPaths",value:function(r){var a=r.type,h=r.series,d=r.i,f=r.realIndex,g=r.j,y=r.x,x=r.y,S=r.xArrj,M=r.yArrj,C=r.y2,P=r.y2Arrj,F=r.pX,O=r.pY,D=r.linePath,Y=r.areaPath,G=r.linePaths,U=r.areaPaths,b=r.seriesIndex,N=r.isRangeStart,E=this.w,X=new Q(this.ctx),W=E.config.stroke.curve,Z=this.areaBottomY;if(Array.isArray(E.config.stroke.curve)&&(W=Array.isArray(b)?E.config.stroke.curve[b[d]]:E.config.stroke.curve[d]),"rangeArea"===a&&(E.globals.hasNullValues||E.config.forecastDataPoints.count>0)&&"monotoneCubic"===W&&(W="straight"),"monotoneCubic"===W){var et="rangeArea"===a?S.length===E.globals.dataPoints:g===h[d].length-2,it=S.map(function(oe,ue){return[S[ue],M[ue]]}).filter(function(oe){return null!==oe[1]});if(et&&it.length>1){var pt=Zn(it);if(D+=q(pt),null===h[d][0]?Y=D:Y+=q(pt),"rangeArea"===a&&N){D+=X.line(S[S.length-1],P[P.length-1]);var wt=S.slice().reverse(),xt=P.slice().reverse(),Ft=wt.map(function(oe,ue){return[wt[ue],xt[ue]]}),Nt=Zn(Ft);Y=D+=q(Nt)}else Y+=X.line(it[it.length-1][0],Z)+X.line(it[0][0],Z)+X.move(it[0][0],it[0][1])+"z";G.push(D),U.push(Y)}}else if("smooth"===W){var _t=.35*(y-F);E.globals.hasNullValues?(null!==h[d][g]&&(null!==h[d][g+1]?(D=X.move(F,O)+X.curve(F+_t,O,y-_t,x,y+1,x),Y=X.move(F+1,O)+X.curve(F+_t,O,y-_t,x,y+1,x)+X.line(y,Z)+X.line(F,Z)+"z"):(D=X.move(F,O),Y=X.move(F,O)+"z")),G.push(D),U.push(Y)):(D+=X.curve(F+_t,O,y-_t,x,y,x),Y+=X.curve(F+_t,O,y-_t,x,y,x)),F=y,O=x,g===h[d].length-2&&(Y=Y+X.curve(F,O,y,x,y,Z)+X.move(y,x)+"z","rangeArea"===a&&N?D=D+X.curve(F,O,y,x,y,C)+X.move(y,C)+"z":E.globals.hasNullValues||(G.push(D),U.push(Y)))}else null===h[d][g+1]&&(D+=X.move(y,x),Y=Y+X.line(E.globals.isXNumeric?(E.globals.seriesX[f][g]-E.globals.minX)/this.xRatio:y-this.xDivision,Z)+X.move(y,x)+"z"),null===h[d][g]&&(D+=X.move(y,x),Y+=X.move(y,Z)),"stepline"===W?(D=D+X.line(y,null,"H")+X.line(null,x,"V"),Y=Y+X.line(y,null,"H")+X.line(null,x,"V")):"straight"===W&&(D+=X.line(y,x),Y+=X.line(y,x)),g===h[d].length-2&&(Y=Y+X.line(y,Z)+X.move(y,x)+"z","rangeArea"===a&&N?D=D+X.line(y,C)+X.move(y,C)+"z":(G.push(D),U.push(Y)));return{linePaths:G,areaPaths:U,pX:F,pY:O,linePath:D,areaPath:Y}}},{key:"handleNullDataPoints",value:function(r,a,h,d,f){var g=this.w;if(null===r[h][d]&&g.config.markers.showNullDataPoints||1===r[h].length){var y=this.markers.plotChartMarkers(a,f,d+1,this.strokeWidth-g.config.markers.strokeWidth/2,!0);null!==y&&this.elPointsMain.add(y)}}}]),V}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function V(y,x,S,M){this.xoffset=y,this.yoffset=x,this.height=M,this.width=S,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(C){var P,F=[],O=this.xoffset,D=this.yoffset,Y=f(C)/this.height,G=f(C)/this.width;if(this.width>=this.height)for(P=0;P<C.length;P++)F.push([O,D,O+Y,D+C[P]/Y]),D+=C[P]/Y;else for(P=0;P<C.length;P++)F.push([O,D,O+C[P]/G,D+G]),O+=C[P]/G;return F},this.cutArea=function(C){var P;if(this.width>=this.height){var F=C/this.height;P=new V(this.xoffset+F,this.yoffset,this.width-F,this.height)}else{var D=C/this.width;P=new V(this.xoffset,this.yoffset+D,this.width,this.height-D)}return P}}function r(y,x,S,M,C){return M=void 0===M?0:M,C=void 0===C?0:C,function(F){var O,D,Y=[];for(O=0;O<F.length;O++)for(D=0;D<F[O].length;D++)Y.push(F[O][D]);return Y}(a(function(F,O){var D,Y=[],G=O/f(F);for(D=0;D<F.length;D++)Y[D]=F[D]*G;return Y}(y,x*S),[],new V(M,C,x,S),[]))}function a(y,x,S,M){var C,P,F,O,D,Y,G;if(0!==y.length)return C=S.shortestEdge(),D=P=y[0],Y=C,0===(O=x).length||((G=O.slice()).push(D),h(O,Y)>=h(G,Y))?(x.push(P),a(y.slice(1),x,S,M)):(F=S.cutArea(f(x),M),M.push(S.getCoordinates(x)),a(y,[],F,M)),M;M.push(S.getCoordinates(x))}function h(y,x){var S=Math.min.apply(Math,y),M=Math.max.apply(Math,y),C=f(y);return Math.max(Math.pow(x,2)*M/Math.pow(C,2),Math.pow(C,2)/(Math.pow(x,2)*S))}function d(y){return y&&y.constructor===Array}function f(y){var x,S=0;for(x=0;x<y.length;x++)S+=y[x];return S}function g(y){var x,S=0;if(d(y[0]))for(x=0;x<y.length;x++)S+=g(y[x]);else S=f(y);return S}return function y(x,S,M,C,P){C=void 0===C?0:C,P=void 0===P?0:P;var F,O,D=[],Y=[];if(d(x[0])){for(O=0;O<x.length;O++)D[O]=g(x[O]);for(F=r(D,S,M,C,P),O=0;O<x.length;O++)Y.push(y(x[O],F[O][2]-F[O][0],F[O][3]-F[O][1],F[O][0],F[O][1]))}else Y=r(x,S,M,C,P);return Y}}();var hs,ho,mu=function(){function V(r,a){zt(this,V),this.ctx=r,this.w=r.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Hr(r),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Dt(V,[{key:"draw",value:function(r){var a=this,h=this.w,d=new Q(this.ctx),f=new wi(this.ctx),g=d.group({class:"apexcharts-treemap"});if(h.globals.noData)return g;var y=[];return r.forEach(function(x){var S=x.map(function(M){return Math.abs(M)});y.push(S)}),this.negRange=this.helpers.checkColorRange(),h.config.series.forEach(function(x,S){x.data.forEach(function(M){Array.isArray(a.labels[S])||(a.labels[S]=[]),a.labels[S].push(M.x)})}),window.TreemapSquared.generate(y,h.globals.gridWidth,h.globals.gridHeight).forEach(function(x,S){var M=d.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:at.escapeString(h.globals.seriesNames[S]),rel:S+1,"data:realIndex":S});if(h.config.chart.dropShadow.enabled){var C=h.config.chart.dropShadow;new Ve(a.ctx).dropShadow(g,C,S)}var P=d.group({class:"apexcharts-data-labels"});x.forEach(function(F,O){var D=F[0],Y=F[1],G=F[2],U=F[3],b=d.drawRect(D,Y,G-D,U-Y,h.config.plotOptions.treemap.borderRadius,"#fff",1,a.strokeWidth,h.config.plotOptions.treemap.useFillColorAsStroke?E:h.globals.stroke.colors[S]);b.attr({cx:D,cy:Y,index:S,i:S,j:O,width:G-D,height:U-Y});var N=a.helpers.getShadeColor(h.config.chart.type,S,O,a.negRange),E=N.color;void 0!==h.config.series[S].data[O]&&h.config.series[S].data[O].fillColor&&(E=h.config.series[S].data[O].fillColor);var X=f.fillPath({color:E,seriesNumber:S,dataPointIndex:O});b.node.classList.add("apexcharts-treemap-rect"),b.attr({fill:X}),a.helpers.addListeners(b);var W={x:D+(G-D)/2,y:Y+(U-Y)/2,width:0,height:0},Z={x:D,y:Y,width:G-D,height:U-Y};if(h.config.chart.animations.enabled&&!h.globals.dataChanged){var et=1;h.globals.resized||(et=h.config.chart.animations.speed),a.animateTreemap(b,W,Z,et)}h.globals.dataChanged&&a.dynamicAnim.enabled&&h.globals.shouldAnimate&&(h.globals.previousPaths[S]&&h.globals.previousPaths[S][O]&&h.globals.previousPaths[S][O].rect&&(W=h.globals.previousPaths[S][O].rect),a.animateTreemap(b,W,Z,a.dynamicAnim.speed));var pt=a.getFontSize(F),wt=h.config.dataLabels.formatter(a.labels[S][O],{value:h.globals.series[S][O],seriesIndex:S,dataPointIndex:O,w:h});"truncate"===h.config.plotOptions.treemap.dataLabels.format&&(pt=parseInt(h.config.dataLabels.style.fontSize,10),wt=a.truncateLabels(wt,pt,D,Y,G,U));var xt=a.helpers.calculateDataLabels({text:wt,x:(D+G)/2,y:(Y+U)/2+a.strokeWidth/2+pt/3,i:S,j:O,colorProps:N,fontSize:pt,series:r});h.config.dataLabels.enabled&&xt&&a.rotateToFitLabel(xt,pt,wt,D,Y,G,U),M.add(b),null!==xt&&M.add(xt)}),M.add(P),g.add(M)}),g}},{key:"getFontSize",value:function(r){var g,a=this.w,y=function x(S){var M,C=0;if(Array.isArray(S[0]))for(M=0;M<S.length;M++)C+=x(S[M]);else for(M=0;M<S.length;M++)C+=S[M].length;return C}(this.labels)/function x(S){var M,C=0;if(Array.isArray(S[0]))for(M=0;M<S.length;M++)C+=x(S[M]);else for(M=0;M<S.length;M++)C+=1;return C}(this.labels);return g=Math.pow((r[2]-r[0])*(r[3]-r[1]),.5),Math.min(g/y,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(r,a,h,d,f,g,y){var x=new Q(this.ctx),S=x.getTextRects(h,a);if(S.width+this.w.config.stroke.width+5>g-d&&S.width<=y-f){var M=x.rotateAroundCenter(r.node);r.node.setAttribute("transform","rotate(-90 ".concat(M.x," ").concat(M.y,") translate(").concat(S.height/3,")"))}}},{key:"truncateLabels",value:function(r,a,h,d,f,g){var y=new Q(this.ctx),x=y.getTextRects(r,a).width+this.w.config.stroke.width+5>f-h&&g-d>f-h?g-d:f-h,S=y.getTextBasedOnMaxWidth({text:r,maxWidth:x,fontSize:a});return r.length!==S.length&&x/a<5?"":S}},{key:"animateTreemap",value:function(r,a,h,d){var f=new On(this.ctx);f.animateRect(r,{x:a.x,y:a.y,width:a.width,height:a.height},{x:h.x,y:h.y,width:h.width,height:h.height},d,function(){f.animationCompleted(r)})}}]),V}(),Ze=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Dt(V,[{key:"calculateTimeScaleTicks",value:function(r,a){var h=this,d=this.w;if(d.globals.allSeriesCollapsed)return d.globals.labels=[],d.globals.timescaleLabels=[],[];var f=new Xt(this.ctx),g=(a-r)/864e5;this.determineInterval(g),d.globals.disableZoomIn=!1,d.globals.disableZoomOut=!1,g<.00011574074074074075?d.globals.disableZoomIn=!0:g>5e4&&(d.globals.disableZoomOut=!0);var y=f.getTimeUnitsfromTimestamp(r,a,this.utc),x=d.globals.gridWidth/g,S=x/24,M=S/60,C=M/60,P=Math.floor(24*g),F=Math.floor(1440*g),O=Math.floor(86400*g),D=Math.floor(g),Y=Math.floor(g/30),G=Math.floor(g/365),U={minMillisecond:y.minMillisecond,minSecond:y.minSecond,minMinute:y.minMinute,minHour:y.minHour,minDate:y.minDate,minMonth:y.minMonth,minYear:y.minYear},b={firstVal:U,currentMillisecond:U.minMillisecond,currentSecond:U.minSecond,currentMinute:U.minMinute,currentHour:U.minHour,currentMonthDate:U.minDate,currentDate:U.minDate,currentMonth:U.minMonth,currentYear:U.minYear,daysWidthOnXAxis:x,hoursWidthOnXAxis:S,minutesWidthOnXAxis:M,secondsWidthOnXAxis:C,numberOfSeconds:O,numberOfMinutes:F,numberOfHours:P,numberOfDays:D,numberOfMonths:Y,numberOfYears:G};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var N=this.timeScaleArray.map(function(E){var X={position:E.position,unit:E.unit,year:E.year,day:E.day?E.day:1,hour:E.hour?E.hour:0,month:E.month+1};return"month"===E.unit?Et(Et({},X),{},{day:1,value:E.value+1}):"day"===E.unit||"hour"===E.unit?Et(Et({},X),{},{value:E.value}):"minute"===E.unit?Et(Et({},X),{},{value:E.value,minute:E.value}):"second"===E.unit?Et(Et({},X),{},{value:E.value,minute:E.minute,second:E.second}):E});return N.filter(function(E){var X=1,W=Math.ceil(d.globals.gridWidth/120),Z=E.value;void 0!==d.config.xaxis.tickAmount&&(W=d.config.xaxis.tickAmount),N.length>W&&(X=Math.floor(N.length/W));var et=!1,it=!1;switch(h.tickInterval){case"years":"year"===E.unit&&(et=!0);break;case"half_year":X=7,"year"===E.unit&&(et=!0);break;case"months":X=1,"year"===E.unit&&(et=!0);break;case"months_fortnight":X=15,"year"!==E.unit&&"month"!==E.unit||(et=!0),30===Z&&(it=!0);break;case"months_days":X=10,"month"===E.unit&&(et=!0),30===Z&&(it=!0);break;case"week_days":X=8,"month"===E.unit&&(et=!0);break;case"days":X=1,"month"===E.unit&&(et=!0);break;case"hours":"day"===E.unit&&(et=!0);break;case"minutes_fives":case"seconds_fives":Z%5!=0&&(it=!0);break;case"seconds_tens":Z%10!=0&&(it=!0)}if("hours"===h.tickInterval||"minutes_fives"===h.tickInterval||"seconds_tens"===h.tickInterval||"seconds_fives"===h.tickInterval){if(!it)return!0}else if((Z%X==0||et)&&!it)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(r,a){var h=this.w,d=this.formatDates(r),f=this.removeOverlappingTS(d);h.globals.timescaleLabels=f.slice(),new kt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(r){var a=24*r,h=60*a;switch(!0){case r/365>5:this.tickInterval="years";break;case r>800:this.tickInterval="half_year";break;case r>180:this.tickInterval="months";break;case r>90:this.tickInterval="months_fortnight";break;case r>60:this.tickInterval="months_days";break;case r>30:this.tickInterval="week_days";break;case r>2:this.tickInterval="days";break;case a>2.4:this.tickInterval="hours";break;case h>15:this.tickInterval="minutes_fives";break;case h>5:this.tickInterval="minutes";break;case h>1:this.tickInterval="seconds_tens";break;case 60*h>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(r){var a=r.firstVal,h=r.currentMonth,d=r.currentYear,f=r.daysWidthOnXAxis,g=r.numberOfYears,y=a.minYear,x=0,S=new Xt(this.ctx),M="year";if(a.minDate>1||a.minMonth>0){var C=S.determineRemainingDaysOfYear(a.minYear,a.minMonth,a.minDate);x=(S.determineDaysOfYear(a.minYear)-C+1)*f,this.timeScaleArray.push({position:x,value:y=a.minYear+1,unit:M,year:y,month:at.monthMod(h+1)})}else 1===a.minDate&&0===a.minMonth&&this.timeScaleArray.push({position:x,value:y,unit:M,year:d,month:at.monthMod(h+1)});for(var P=y,F=x,O=0;O<g;O++)P++,F=S.determineDaysOfYear(P-1)*f+F,this.timeScaleArray.push({position:F,value:P,unit:M,year:P,month:1})}},{key:"generateMonthScale",value:function(r){var a=r.firstVal,h=r.currentMonthDate,d=r.currentMonth,f=r.currentYear,g=r.daysWidthOnXAxis,y=r.numberOfMonths,x=d,S=0,M=new Xt(this.ctx),C="month",P=0;if(a.minDate>1){S=(M.determineDaysOfMonths(d+1,a.minYear)-h+1)*g,x=at.monthMod(d+1);var F=f+P,O=at.monthMod(x),D=x;0===x&&(C="year",D=F,O=1,F+=P+=1),this.timeScaleArray.push({position:S,value:D,unit:C,year:F,month:O})}else this.timeScaleArray.push({position:S,value:x,unit:C,year:f,month:at.monthMod(d)});for(var Y=x+1,G=S,U=0,b=1;U<y;U++,b++){0===(Y=at.monthMod(Y))?(C="year",P+=1):C="month";var N=this._getYear(f,Y,P);G=M.determineDaysOfMonths(Y,N)*g+G,this.timeScaleArray.push({position:G,value:0===Y?N:Y,unit:C,year:N,month:0===Y?1:Y}),Y++}}},{key:"generateDayScale",value:function(r){var a=r.firstVal,h=r.currentMonth,d=r.currentYear,f=r.hoursWidthOnXAxis,g=r.numberOfDays,y=new Xt(this.ctx),x="day",S=a.minDate+1,M=S,C=function(b,N,E){return b>y.determineDaysOfMonths(N+1,E)&&(M=1,x="month",F=N+=1),N},P=(24-a.minHour)*f,F=S,O=C(M,h,d);0===a.minHour&&1===a.minDate?(P=0,F=at.monthMod(a.minMonth),x="month",M=a.minDate):1!==a.minDate&&0===a.minHour&&0===a.minMinute&&(P=0,F=S=a.minDate,O=C(M=S,h,d)),this.timeScaleArray.push({position:P,value:F,unit:x,year:this._getYear(d,O,0),month:at.monthMod(O),day:M});for(var D=P,Y=0;Y<g;Y++){x="day",O=C(M+=1,O,this._getYear(d,O,0));var G=this._getYear(d,O,0);D=24*f+D;var U=1===M?at.monthMod(O):M;this.timeScaleArray.push({position:D,value:U,unit:x,year:G,month:at.monthMod(O),day:U})}}},{key:"generateHourScale",value:function(r){var a=r.firstVal,h=r.currentDate,d=r.currentMonth,f=r.currentYear,g=r.minutesWidthOnXAxis,y=r.numberOfHours,x=new Xt(this.ctx),S="hour",M=function(X,W){return X>x.determineDaysOfMonths(W+1,f)&&(Y=1,W+=1),{month:W,date:Y}},C=function(X,W){return X>x.determineDaysOfMonths(W+1,f)?W+=1:W},P=60-(a.minMinute+a.minSecond/60),F=P*g,O=a.minHour+1,D=O;60===P&&(F=0,D=O=a.minHour);var Y=h;D>=24&&(D=0,Y+=1,S="day");var G=M(Y,d).month;G=C(Y,G),this.timeScaleArray.push({position:F,value:O,unit:S,day:Y,hour:D,year:f,month:at.monthMod(G)}),D++;for(var U=F,b=0;b<y;b++){S="hour",D>=24&&(D=0,S="day",G=M(Y+=1,G).month,G=C(Y,G));var N=this._getYear(f,G,0);this.timeScaleArray.push({position:U=60*g+U,value:0===D?Y:D,unit:S,hour:D,day:Y,year:N,month:at.monthMod(G)}),D++}}},{key:"generateMinuteScale",value:function(r){for(var S=r.minutesWidthOnXAxis,C=r.numberOfMinutes,P=r.currentMinute+1,F=r.currentDate,O=r.currentMonth,D=r.currentYear,Y=r.currentHour,G=(60-r.currentSecond-r.currentMillisecond/1e3)*r.secondsWidthOnXAxis,U=0;U<C;U++)P>=60&&(P=0,24===(Y+=1)&&(Y=0)),this.timeScaleArray.push({position:G,value:P,unit:"minute",hour:Y,minute:P,day:F,year:this._getYear(D,O,0),month:at.monthMod(O)}),G+=S,P++}},{key:"generateSecondScale",value:function(r){for(var S=r.secondsWidthOnXAxis,M=r.numberOfSeconds,C=r.currentSecond+1,P=r.currentMinute,F=r.currentDate,O=r.currentMonth,D=r.currentYear,Y=r.currentHour,G=(1e3-r.currentMillisecond)/1e3*S,U=0;U<M;U++)C>=60&&(C=0,++P>=60&&(P=0,24==++Y&&(Y=0))),this.timeScaleArray.push({position:G,value:C,unit:"second",hour:Y,minute:P,second:C,day:F,year:this._getYear(D,O,0),month:at.monthMod(O)}),G+=S,C++}},{key:"createRawDateString",value:function(r,a){var h=r.year;return 0===r.month&&(r.month=1),h+="-"+("0"+r.month.toString()).slice(-2),h+="day"===r.unit?"day"===r.unit?"-"+("0"+a).slice(-2):"-01":"-"+("0"+(r.day?r.day:"1")).slice(-2),h+="hour"===r.unit?"hour"===r.unit?"T"+("0"+a).slice(-2):"T00":"T"+("0"+(r.hour?r.hour:"0")).slice(-2),h+="minute"===r.unit?":"+("0"+a).slice(-2):":"+(r.minute?("0"+r.minute).slice(-2):"00"),h+="second"===r.unit?":"+("0"+a).slice(-2):":00",this.utc&&(h+=".000Z"),h}},{key:"formatDates",value:function(r){var a=this,h=this.w;return r.map(function(d){var f=d.value.toString(),g=new Xt(a.ctx),y=a.createRawDateString(d,f),x=g.getDate(g.parseDate(y));if(a.utc||(x=g.getDate(g.parseDateWithTimezone(y))),void 0===h.config.xaxis.labels.format){var S="dd MMM",M=h.config.xaxis.labels.datetimeFormatter;"year"===d.unit&&(S=M.year),"month"===d.unit&&(S=M.month),"day"===d.unit&&(S=M.day),"hour"===d.unit&&(S=M.hour),"minute"===d.unit&&(S=M.minute),"second"===d.unit&&(S=M.second),f=g.formatDate(x,S)}else f=g.formatDate(x,h.config.xaxis.labels.format);return{dateString:y,position:d.position,value:f,unit:d.unit,year:d.year,month:d.month}})}},{key:"removeOverlappingTS",value:function(r){var a,h=this,d=new Q(this.ctx),f=!1;r.length>0&&r[0].value&&r.every(function(x){return x.value.length===r[0].value.length})&&(f=!0,a=d.getTextRects(r[0].value).width);var g=0;return r.map(function(x,S){if(S>0&&h.w.config.xaxis.labels.hideOverlappingLabels){var M=f?a:d.getTextRects(r[g].value).width;return x.position>r[g].position+M+10?(g=S,x):null}return x}).filter(function(x){return null!==x})}},{key:"_getYear",value:function(r,a,h){return r+Math.floor(a/12)+h}}]),V}(),kn=function(){function V(r,a){zt(this,V),this.ctx=a,this.w=a.w,this.el=r}return Dt(V,[{key:"setupElements",value:function(){var r=this.w.globals,a=this.w.config,h=a.chart.type;r.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(h)>-1,r.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(h)>-1,r.isBarHorizontal=("bar"===a.chart.type||"rangeBar"===a.chart.type||"boxPlot"===a.chart.type)&&a.plotOptions.bar.horizontal,r.chartClass=".apexcharts"+r.chartID,r.dom.baseEl=this.el,r.dom.elWrap=document.createElement("div"),Q.setAttrs(r.dom.elWrap,{id:r.chartClass.substring(1),class:"apexcharts-canvas "+r.chartClass.substring(1)}),this.el.appendChild(r.dom.elWrap),r.dom.Paper=new window.SVG.Doc(r.dom.elWrap),r.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(a.chart.offsetX,", ").concat(a.chart.offsetY,")")}),r.dom.Paper.node.style.background="dark"!==a.theme.mode||a.chart.background?a.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),r.dom.elLegendForeign=document.createElementNS(r.SVGNS,"foreignObject"),Q.setAttrs(r.dom.elLegendForeign,{x:0,y:0,width:r.svgWidth,height:r.svgHeight}),r.dom.elLegendWrap=document.createElement("div"),r.dom.elLegendWrap.classList.add("apexcharts-legend"),r.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.dom.elLegendForeign.appendChild(r.dom.elLegendWrap),r.dom.Paper.node.appendChild(r.dom.elLegendForeign),r.dom.elGraphical=r.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),r.dom.elDefs=r.dom.Paper.defs(),r.dom.Paper.add(r.dom.elGraphical),r.dom.elGraphical.add(r.dom.elDefs)}},{key:"plotChartType",value:function(r,a){var h=this.w,d=h.config,f=h.globals,g={series:[],i:[]},y={series:[],i:[]},x={series:[],i:[]},S={series:[],i:[]},M={series:[],i:[]},C={series:[],i:[]},P={series:[],i:[]},F={series:[],i:[]},O={series:[],seriesRangeEnd:[],i:[]};f.series.map(function(W,Z){var et=0;void 0!==r[Z].type?("column"===r[Z].type||"bar"===r[Z].type?(f.series.length>1&&d.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),M.series.push(W),M.i.push(Z),et++,h.globals.columnSeries=M.series):"area"===r[Z].type?(y.series.push(W),y.i.push(Z),et++):"line"===r[Z].type?(g.series.push(W),g.i.push(Z),et++):"scatter"===r[Z].type?(x.series.push(W),x.i.push(Z)):"bubble"===r[Z].type?(S.series.push(W),S.i.push(Z),et++):"candlestick"===r[Z].type?(C.series.push(W),C.i.push(Z),et++):"boxPlot"===r[Z].type?(P.series.push(W),P.i.push(Z),et++):"rangeBar"===r[Z].type?(F.series.push(W),F.i.push(Z),et++):"rangeArea"===r[Z].type?(O.series.push(f.seriesRangeStart[Z]),O.seriesRangeEnd.push(f.seriesRangeEnd[Z]),O.i.push(Z),et++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),et>1&&(f.comboCharts=!0)):(g.series.push(W),g.i.push(Z))});var D=new Pa(this.ctx,a),Y=new Gs(this.ctx,a);this.ctx.pie=new Rl(this.ctx);var G=new Ca(this.ctx);this.ctx.rangeBar=new fu(this.ctx,a);var U=new Yl(this.ctx),b=[];if(f.comboCharts){if(y.series.length>0&&b.push(D.draw(y.series,"area",y.i)),M.series.length>0)if(h.config.chart.stacked){var N=new Mt(this.ctx,a);b.push(N.draw(M.series,M.i))}else this.ctx.bar=new ao(this.ctx,a),b.push(this.ctx.bar.draw(M.series,M.i));if(O.series.length>0&&b.push(D.draw(O.series,"rangeArea",O.i,O.seriesRangeEnd)),g.series.length>0&&b.push(D.draw(g.series,"line",g.i)),C.series.length>0&&b.push(Y.draw(C.series,"candlestick",C.i)),P.series.length>0&&b.push(Y.draw(P.series,"boxPlot",P.i)),F.series.length>0&&b.push(this.ctx.rangeBar.draw(F.series,F.i)),x.series.length>0){var E=new Pa(this.ctx,a,!0);b.push(E.draw(x.series,"scatter",x.i))}if(S.series.length>0){var X=new Pa(this.ctx,a,!0);b.push(X.draw(S.series,"bubble",S.i))}}else switch(d.chart.type){case"line":b=D.draw(f.series,"line");break;case"area":b=D.draw(f.series,"area");break;case"bar":d.chart.stacked?b=new Mt(this.ctx,a).draw(f.series):(this.ctx.bar=new ao(this.ctx,a),b=this.ctx.bar.draw(f.series));break;case"candlestick":b=new Gs(this.ctx,a).draw(f.series,"candlestick");break;case"boxPlot":b=new Gs(this.ctx,a).draw(f.series,d.chart.type);break;case"rangeBar":b=this.ctx.rangeBar.draw(f.series);break;case"rangeArea":b=D.draw(f.seriesRangeStart,"rangeArea",void 0,f.seriesRangeEnd);break;case"heatmap":b=new Bl(this.ctx,a).draw(f.series);break;case"treemap":b=new mu(this.ctx,a).draw(f.series);break;case"pie":case"donut":case"polarArea":b=this.ctx.pie.draw(f.series);break;case"radialBar":b=G.draw(f.series);break;case"radar":b=U.draw(f.series);break;default:b=D.draw(f.series)}return b}},{key:"setSVGDimensions",value:function(){var r=this.w.globals,a=this.w.config;r.svgWidth=a.chart.width,r.svgHeight=a.chart.height;var h=at.getDimensions(this.el),d=a.chart.width.toString().split(/[0-9]+/g).pop();"%"===d?at.isNumber(h[0])&&(0===h[0].width&&(h=at.getDimensions(this.el.parentNode)),r.svgWidth=h[0]*parseInt(a.chart.width,10)/100):"px"!==d&&""!==d||(r.svgWidth=parseInt(a.chart.width,10));var f=a.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==r.svgHeight&&""!==r.svgHeight)if("%"===f){var g=at.getDimensions(this.el.parentNode);r.svgHeight=g[1]*parseInt(a.chart.height,10)/100}else r.svgHeight=parseInt(a.chart.height,10);else r.svgHeight=r.axisCharts?r.svgWidth/1.61:r.svgWidth/1.2;r.svgWidth<0&&(r.svgWidth=0),r.svgHeight<0&&(r.svgHeight=0),Q.setAttrs(r.dom.Paper.node,{width:r.svgWidth,height:r.svgHeight}),"%"!==f&&(r.dom.Paper.node.parentNode.parentNode.style.minHeight=r.svgHeight+(a.chart.sparkline.enabled?0:r.axisCharts?a.chart.parentHeightOffset:0)+"px"),r.dom.elWrap.style.width=r.svgWidth+"px",r.dom.elWrap.style.height=r.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var r=this.w.globals;Q.setAttrs(r.dom.elGraphical.node,{transform:"translate("+r.translateX+", "+r.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var r=this.w,a=r.globals,h=0,d=r.config.chart.sparkline.enabled?1:15;d+=r.config.grid.padding.bottom,"top"!==r.config.legend.position&&"bottom"!==r.config.legend.position||!r.config.legend.show||r.config.legend.floating||(h=new _n(this.ctx).legendHelpers.getLegendBBox().clwh+10);var f=r.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),g=2.05*r.globals.radialSize;if(f&&!r.config.chart.sparkline.enabled&&0!==r.config.plotOptions.radialBar.startAngle){var y=at.getBoundingClientRect(f);g=y.bottom,g=Math.max(2.05*r.globals.radialSize,y.bottom-y.top)}var S=g+a.translateY+h+d;a.dom.elLegendForeign&&a.dom.elLegendForeign.setAttribute("height",S),r.config.chart.height&&String(r.config.chart.height).indexOf("%")>0||(a.dom.elWrap.style.height=S+"px",Q.setAttrs(a.dom.Paper.node,{height:S}),a.dom.Paper.node.parentNode.parentNode.style.minHeight=S+"px")}},{key:"coreCalculations",value:function(){new ei(this.ctx).init()}},{key:"resetGlobals",value:function(){var r=this,a=function(){return r.w.config.series.map(function(f){return[]})},h=new Jt,d=this.w.globals;h.initGlobalVars(d),d.seriesXvalues=a(),d.seriesYvalues=a()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var r=null,a=this.w;if(a.globals.axisCharts){if("back"===a.config.xaxis.crosshairs.position&&new Vs(this.ctx).drawXCrosshairs(),"back"===a.config.yaxis[0].crosshairs.position&&new Vs(this.ctx).drawYCrosshairs(),"datetime"===a.config.xaxis.type&&void 0===a.config.xaxis.labels.formatter){this.ctx.timeScale=new Ze(this.ctx);var h=[];isFinite(a.globals.minX)&&isFinite(a.globals.maxX)&&!a.globals.isBarHorizontal?h=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minX,a.globals.maxX):a.globals.isBarHorizontal&&(h=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minY,a.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(h)}r=new Lt(this.ctx).getCalculatedRatios()}return r}},{key:"updateSourceChart",value:function(r){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:r.w.globals.minX,max:r.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var r=this,a=this.w;if(a.config.chart.brush.enabled&&"function"!=typeof a.config.chart.events.selection){var h=Array.isArray(a.config.chart.brush.targets)?a.config.chart.brush.targets:[a.config.chart.brush.target];h.forEach(function(d){var f=ApexCharts.getChartByID(d);f.w.globals.brushSource=r.ctx,"function"!=typeof f.w.config.chart.events.zoomed&&(f.w.config.chart.events.zoomed=function(){r.updateSourceChart(f)}),"function"!=typeof f.w.config.chart.events.scrolled&&(f.w.config.chart.events.scrolled=function(){r.updateSourceChart(f)})}),a.config.chart.events.selection=function(d,f){h.forEach(function(g){ApexCharts.getChartByID(g).ctx.updateHelpers._updateOptions({xaxis:{min:f.xaxis.min,max:f.xaxis.max}},!1,!1,!1,!1)})}}}}]),V}(),vu=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"_updateOptions",value:function(r){var a=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(y){var x=[a.ctx];f&&(x=a.ctx.getSyncedCharts()),a.ctx.w.globals.isExecCalled&&(x=[a.ctx],a.ctx.w.globals.isExecCalled=!1),x.forEach(function(S,M){var C=S.w;if(C.globals.shouldAnimate=d,h||(C.globals.resized=!0,C.globals.dataChanged=!0,d&&S.series.getPreviousPaths()),r&&"object"===be(r)&&(S.config=new Gi(r),r=Lt.extendArrayProps(S.config,r,C),S.w.globals.chartID!==a.ctx.w.globals.chartID&&delete r.series,C.config=at.extend(C.config,r),g&&(C.globals.lastXAxis=r.xaxis?at.clone(r.xaxis):[],C.globals.lastYAxis=r.yaxis?at.clone(r.yaxis):[],C.globals.initialConfig=at.extend({},C.config),C.globals.initialSeries=at.clone(C.config.series),r.series))){for(var P=0;P<C.globals.collapsedSeriesIndices.length;P++){var F=C.config.series[C.globals.collapsedSeriesIndices[P]];C.globals.collapsedSeries[P].data=C.globals.axisCharts?F.data.slice():F}for(var O=0;O<C.globals.ancillaryCollapsedSeriesIndices.length;O++){var D=C.config.series[C.globals.ancillaryCollapsedSeriesIndices[O]];C.globals.ancillaryCollapsedSeries[O].data=C.globals.axisCharts?D.data.slice():D}S.series.emptyCollapsedSeries(C.config.series)}return S.update(r).then(function(){M===x.length-1&&y(S)})})})}},{key:"_updateSeries",value:function(r,a){var h=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(f){var g,y=h.w;return y.globals.shouldAnimate=a,y.globals.dataChanged=!0,a&&h.ctx.series.getPreviousPaths(),y.globals.axisCharts?(0===(g=r.map(function(x,S){return h._extendSeries(x,S)})).length&&(g=[{data:[]}]),y.config.series=g):y.config.series=r.slice(),d&&(y.globals.initialConfig.series=at.clone(y.config.series),y.globals.initialSeries=at.clone(y.config.series)),h.ctx.update().then(function(){f(h.ctx)})})}},{key:"_extendSeries",value:function(r,a){var h=this.w,d=h.config.series[a];return Et(Et({},h.config.series[a]),{},{name:r.name?r.name:d?.name,color:r.color?r.color:d?.color,type:r.type?r.type:d?.type,group:r.group?r.group:d?.group,data:r.data?r.data:d?.data,zIndex:void 0!==r.zIndex?r.zIndex:a})}},{key:"toggleDataPointSelection",value:function(r,a){var h=this.w,d=null,f=".apexcharts-series[data\\:realIndex='".concat(r,"']");return h.globals.axisCharts?d=h.globals.dom.Paper.select("".concat(f," path[j='").concat(a,"'], ").concat(f," circle[j='").concat(a,"'], ").concat(f," rect[j='").concat(a,"']")).members[0]:void 0===a&&(d=h.globals.dom.Paper.select("".concat(f," path[j='").concat(r,"']")).members[0],"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"donut"!==h.config.chart.type||this.ctx.pie.pieClicked(r)),d?(new Q(this.ctx).pathMouseDown(d,null),d.node?d.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(r){var a=this.w;if(["min","max"].forEach(function(d){void 0!==r.xaxis[d]&&(a.config.xaxis[d]=r.xaxis[d],a.globals.lastXAxis[d]=r.xaxis[d])}),r.xaxis.categories&&r.xaxis.categories.length&&(a.config.xaxis.categories=r.xaxis.categories),a.config.xaxis.convertedCatToNumeric){var h=new fr(r);r=h.convertCatToNumericXaxis(r,this.ctx)}return r}},{key:"forceYAxisUpdate",value:function(r){return r.chart&&r.chart.stacked&&"100%"===r.chart.stackType&&(Array.isArray(r.yaxis)?r.yaxis.forEach(function(a,h){r.yaxis[h].min=0,r.yaxis[h].max=100}):(r.yaxis.min=0,r.yaxis.max=100)),r}},{key:"revertDefaultAxisMinMax",value:function(r){var a=this,h=this.w,d=h.globals.lastXAxis,f=h.globals.lastYAxis;r&&r.xaxis&&(d=r.xaxis),r&&r.yaxis&&(f=r.yaxis),h.config.xaxis.min=d.min,h.config.xaxis.max=d.max,h.config.yaxis.map(function(y,x){h.globals.zoomed||void 0!==f[x]?function(y){void 0!==f[y]&&(h.config.yaxis[y].min=f[y].min,h.config.yaxis[y].max=f[y].max)}(x):void 0!==a.ctx.opts.yaxis[x]&&(y.min=a.ctx.opts.yaxis[x].min,y.max=a.ctx.opts.yaxis[x].max)})}}]),V}();hs=typeof window<"u"?window:void 0,ho=function(V,r){var a=(void 0!==this?this:V).SVG=function(b){if(a.supported)return b=new a.Doc(b),a.parser.draw||a.prepare(),b};if(a.ns="http://www.w3.org/2000/svg",a.xmlns="http://www.w3.org/2000/xmlns/",a.xlink="http://www.w3.org/1999/xlink",a.svgjs="http://svgjs.dev",a.supported=!0,!a.supported)return!1;a.did=1e3,a.eid=function(b){return"Svgjs"+M(b)+a.did++},a.create=function(b){var N=r.createElementNS(this.ns,b);return N.setAttribute("id",this.eid(b)),N},a.extend=function(){var b,N;N=(b=[].slice.call(arguments)).pop();for(var E=b.length-1;E>=0;E--)if(b[E])for(var X in N)b[E].prototype[X]=N[X];a.Set&&a.Set.inherit&&a.Set.inherit()},a.invent=function(b){var N="function"==typeof b.create?b.create:function(){this.constructor.call(this,a.create(b.create))};return b.inherit&&(N.prototype=new b.inherit),b.extend&&a.extend(N,b.extend),b.construct&&a.extend(b.parent||a.Container,b.construct),N},a.adopt=function(b){return b?b.instance?b.instance:((N="svg"==b.nodeName?b.parentNode instanceof V.SVGElement?new a.Nested:new a.Doc:"linearGradient"==b.nodeName?new a.Gradient("linear"):"radialGradient"==b.nodeName?new a.Gradient("radial"):a[M(b.nodeName)]?new(a[M(b.nodeName)]):new a.Element(b)).type=b.nodeName,N.node=b,b.instance=N,N instanceof a.Doc&&N.namespace().defs(),N.setData(JSON.parse(b.getAttribute("svgjs:data"))||{}),N):null;var N},a.prepare=function(){var b=r.getElementsByTagName("body")[0],N=(b?new a.Doc(b):a.adopt(r.documentElement).nested()).size(2,0);a.parser={body:b||r.documentElement,draw:N.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:N.polyline().node,path:N.path().node,native:a.create("svg")}},a.parser={native:a.create("svg")},r.addEventListener("DOMContentLoaded",function(){a.parser.draw||a.prepare()},!1),a.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},a.utils={map:function(b,N){for(var E=b.length,X=[],W=0;W<E;W++)X.push(N(b[W]));return X},filter:function(b,N){for(var E=b.length,X=[],W=0;W<E;W++)N(b[W])&&X.push(b[W]);return X},filterSVGElements:function(b){return this.filter(b,function(N){return N instanceof V.SVGElement})}},a.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},a.Color=function(b){var N,E;this.r=0,this.g=0,this.b=0,b&&("string"==typeof b?a.regex.isRgb.test(b)?(N=a.regex.rgb.exec(b.replace(a.regex.whitespace,"")),this.r=parseInt(N[1]),this.g=parseInt(N[2]),this.b=parseInt(N[3])):a.regex.isHex.test(b)&&(N=a.regex.hex.exec(4==(E=b).length?["#",E.substring(1,2),E.substring(1,2),E.substring(2,3),E.substring(2,3),E.substring(3,4),E.substring(3,4)].join(""):E),this.r=parseInt(N[1],16),this.g=parseInt(N[2],16),this.b=parseInt(N[3],16)):"object"===be(b)&&(this.r=b.r,this.g=b.g,this.b=b.b))},a.extend(a.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+C(this.r)+C(this.g)+C(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(b){return this.destination=new a.Color(b),this},at:function(b){return this.destination?new a.Color({r:~~(this.r+(this.destination.r-this.r)*(b=b<0?0:b>1?1:b)),g:~~(this.g+(this.destination.g-this.g)*b),b:~~(this.b+(this.destination.b-this.b)*b)}):this}}),a.Color.test=function(b){return a.regex.isHex.test(b+="")||a.regex.isRgb.test(b)},a.Color.isRgb=function(b){return b&&"number"==typeof b.r&&"number"==typeof b.g&&"number"==typeof b.b},a.Color.isColor=function(b){return a.Color.isRgb(b)||a.Color.test(b)},a.Array=function(b,N){0==(b=(b||[]).valueOf()).length&&N&&(b=N.valueOf()),this.value=this.parse(b)},a.extend(a.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(b){return b=b.valueOf(),Array.isArray(b)?b:this.split(b)}}),a.PointArray=function(b,N){a.Array.call(this,b,N||[[0,0]])},a.PointArray.prototype=new a.Array,a.PointArray.prototype.constructor=a.PointArray;for(var h={M:function(b,N,E){return N.x=E.x=b[0],N.y=E.y=b[1],["M",N.x,N.y]},L:function(b,N){return N.x=b[0],N.y=b[1],["L",b[0],b[1]]},H:function(b,N){return N.x=b[0],["H",b[0]]},V:function(b,N){return N.y=b[0],["V",b[0]]},C:function(b,N){return N.x=b[4],N.y=b[5],["C",b[0],b[1],b[2],b[3],b[4],b[5]]},Q:function(b,N){return N.x=b[2],N.y=b[3],["Q",b[0],b[1],b[2],b[3]]},S:function(b,N){return N.x=b[2],N.y=b[3],["S",b[0],b[1],b[2],b[3]]},Z:function(b,N,E){return N.x=E.x,N.y=E.y,["Z"]}},d="mlhvqtcsaz".split(""),f=0,g=d.length;f<g;++f)h[d[f]]=function(b){return function(N,E,X){if("H"==b)N[0]=N[0]+E.x;else if("V"==b)N[0]=N[0]+E.y;else if("A"==b)N[5]=N[5]+E.x,N[6]=N[6]+E.y;else for(var W=0,Z=N.length;W<Z;++W)N[W]=N[W]+(W%2?E.y:E.x);if(h&&"function"==typeof h[b])return h[b](N,E,X)}}(d[f].toUpperCase());a.PathArray=function(b,N){a.Array.call(this,b,N||[["M",0,0]])},a.PathArray.prototype=new a.Array,a.PathArray.prototype.constructor=a.PathArray,a.extend(a.PathArray,{toString:function(){return function(b){for(var N=0,E=b.length,X="";N<E;N++)X+=b[N][0],null!=b[N][1]&&(X+=b[N][1],null!=b[N][2]&&(X+=" ",X+=b[N][2],null!=b[N][3]&&(X+=" ",X+=b[N][3],X+=" ",X+=b[N][4],null!=b[N][5]&&(X+=" ",X+=b[N][5],X+=" ",X+=b[N][6],null!=b[N][7]&&(X+=" ",X+=b[N][7])))));return X+" "}(this.value)},move:function(b,N){return this.bbox(),this},at:function(b){if(!this.destination)return this;for(var N=this.value,E=this.destination.value,X=[],W=new a.PathArray,Z=0,et=N.length;Z<et;Z++){X[Z]=[N[Z][0]];for(var it=1,pt=N[Z].length;it<pt;it++)X[Z][it]=N[Z][it]+(E[Z][it]-N[Z][it])*b;"A"===X[Z][0]&&(X[Z][4]=+(0!=X[Z][4]),X[Z][5]=+(0!=X[Z][5]))}return W.value=X,W},parse:function(b){if(b instanceof a.PathArray)return b.valueOf();var N,E={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};b="string"==typeof b?b.replace(a.regex.numbersWithDots,x).replace(a.regex.pathLetters," $& ").replace(a.regex.hyphen,"$1 -").trim().split(a.regex.delimiter):b.reduce(function(pt,wt){return[].concat.call(pt,wt)},[]);var X=[],W=new a.Point,Z=new a.Point,et=0,it=b.length;do{a.regex.isPathLetter.test(b[et])?(N=b[et],++et):"M"==N?N="L":"m"==N&&(N="l"),X.push(h[N].call(null,b.slice(et,et+=E[N.toUpperCase()]).map(parseFloat),W,Z))}while(it>et);return X},bbox:function(){return a.parser.draw||a.prepare(),a.parser.path.setAttribute("d",this.toString()),a.parser.path.getBBox()}}),a.Number=a.invent({create:function(b,N){this.value=0,this.unit=N||"","number"==typeof b?this.value=isNaN(b)?0:isFinite(b)?b:b<0?-34e37:34e37:"string"==typeof b?(N=b.match(a.regex.numberAndUnit))&&(this.value=parseFloat(N[1]),"%"==N[5]?this.value/=100:"s"==N[5]&&(this.value*=1e3),this.unit=N[5]):b instanceof a.Number&&(this.value=b.valueOf(),this.unit=b.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(b){return b=new a.Number(b),new a.Number(this+b,this.unit||b.unit)},minus:function(b){return b=new a.Number(b),new a.Number(this-b,this.unit||b.unit)},times:function(b){return b=new a.Number(b),new a.Number(this*b,this.unit||b.unit)},divide:function(b){return b=new a.Number(b),new a.Number(this/b,this.unit||b.unit)},to:function(b){var N=new a.Number(this);return"string"==typeof b&&(N.unit=b),N},morph:function(b){return this.destination=new a.Number(b),b.relative&&(this.destination.value+=this.value),this},at:function(b){return this.destination?new a.Number(this.destination).minus(this).times(b).plus(this):this}}}),a.Element=a.invent({create:function(b){this._stroke=a.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=b)&&(this.type=b.nodeName,this.node.instance=this,this._stroke=b.getAttribute("stroke")||this._stroke)},extend:{x:function(b){return this.attr("x",b)},y:function(b){return this.attr("y",b)},cx:function(b){return null==b?this.x()+this.width()/2:this.x(b-this.width()/2)},cy:function(b){return null==b?this.y()+this.height()/2:this.y(b-this.height()/2)},move:function(b,N){return this.x(b).y(N)},center:function(b,N){return this.cx(b).cy(N)},width:function(b){return this.attr("width",b)},height:function(b){return this.attr("height",b)},size:function(b,N){var E=P(this,b,N);return this.width(new a.Number(E.width)).height(new a.Number(E.height))},clone:function(b){this.writeDataToDom();var N=D(this.node.cloneNode(!0));return b?b.add(N):this.after(N),N},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(b){return this.after(b).remove(),b},addTo:function(b){return b.put(this)},putIn:function(b){return b.add(this)},id:function(b){return this.attr("id",b)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var b=this.attr("class");return null==b?[]:b.trim().split(a.regex.delimiter)},hasClass:function(b){return-1!=this.classes().indexOf(b)},addClass:function(b){if(!this.hasClass(b)){var N=this.classes();N.push(b),this.attr("class",N.join(" "))}return this},removeClass:function(b){return this.hasClass(b)&&this.attr("class",this.classes().filter(function(N){return N!=b}).join(" ")),this},toggleClass:function(b){return this.hasClass(b)?this.removeClass(b):this.addClass(b)},reference:function(b){return a.get(this.attr(b))},parent:function(b){var N=this;if(!N.node.parentNode)return null;if(N=a.adopt(N.node.parentNode),!b)return N;for(;N&&N.node instanceof V.SVGElement;){if("string"==typeof b?N.matches(b):N instanceof b)return N;if(!N.node.parentNode||"#document"==N.node.parentNode.nodeName)return null;N=a.adopt(N.node.parentNode)}},doc:function(){return this instanceof a.Doc?this:this.parent(a.Doc)},parents:function(b){var N=[],E=this;do{if(!(E=E.parent(b))||!E.node)break;N.push(E)}while(E.parent);return N},matches:function(b){return((N=this.node).matches||N.matchesSelector||N.msMatchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector).call(N,b);var N},native:function(){return this.node},svg:function(b){var N=r.createElement("svg");if(!(b&&this instanceof a.Parent))return N.appendChild(b=r.createElement("svg")),this.writeDataToDom(),b.appendChild(this.node.cloneNode(!0)),N.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");N.innerHTML="<svg>"+b.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var E=0,X=N.firstChild.childNodes.length;E<X;E++)this.node.appendChild(N.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(b){return this.dom=b,this},is:function(b){return this instanceof b}}}),a.easing={"-":function(b){return b},"<>":function(b){return-Math.cos(b*Math.PI)/2+.5},">":function(b){return Math.sin(b*Math.PI/2)},"<":function(b){return 1-Math.cos(b*Math.PI/2)}},a.morph=function(b){return function(N,E){return new a.MorphObj(N,E).at(b)}},a.Situation=a.invent({create:function(b){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new a.Number(b.duration).valueOf(),this.delay=new a.Number(b.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=b.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),a.FX=a.invent({create:function(b){this._target=b,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(b,N,E){"object"===be(b)&&(N=b.ease,E=b.delay,b=b.duration);var X=new a.Situation({duration:b||1e3,delay:E||0,ease:a.easing[N||"-"]||N});return this.queue(X),this},target:function(b){return b&&b instanceof a.Element?(this._target=b,this):this._target},timeToAbsPos:function(b){return(b-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(b){return this.situation.duration/this._speed*b+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=V.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){V.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(b){return("function"==typeof b||b instanceof a.Situation)&&this.situations.push(b),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof a.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var b,N=this.situation;if(N.init)return this;for(var E in N.animations){b=this.target()[E](),Array.isArray(b)||(b=[b]),Array.isArray(N.animations[E])||(N.animations[E]=[N.animations[E]]);for(var X=b.length;X--;)N.animations[E][X]instanceof a.Number&&(b[X]=new a.Number(b[X])),N.animations[E][X]=b[X].morph(N.animations[E][X])}for(var E in N.attrs)N.attrs[E]=new a.MorphObj(this.target().attr(E),N.attrs[E]);for(var E in N.styles)N.styles[E]=new a.MorphObj(this.target().style(E),N.styles[E]);return N.initialTransformation=this.target().matrixify(),N.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(b,N){var E=this.active;return this.active=!1,N&&this.clearQueue(),b&&this.situation&&(!E&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(b){var N=this.last();return this.target().on("finished.fx",function E(X){X.detail.situation==N&&(b.call(this,N),this.off("finished.fx",E))}),this._callStart()},during:function(b){var N=this.last(),E=function(X){X.detail.situation==N&&b.call(this,X.detail.pos,a.morph(X.detail.pos),X.detail.eased,N)};return this.target().off("during.fx",E).on("during.fx",E),this.after(function(){this.off("during.fx",E)}),this._callStart()},afterAll:function(b){var N=function E(X){b.call(this),this.off("allfinished.fx",E)};return this.target().off("allfinished.fx",N).on("allfinished.fx",N),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(b,N,E){return this.last()[E||"animations"][b]=N,this._callStart()},step:function(b){var N,E,X;b||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(N=Math.max(this.absPos,0),E=Math.floor(N),!0===this.situation.loops||E<this.situation.loops?(this.pos=N-E,X=this.situation.loop,this.situation.loop=E):(this.absPos=this.situation.loops,this.pos=1,X=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-X)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var W=this.situation.ease(this.pos);for(var Z in this.situation.once)Z>this.lastPos&&Z<=W&&(this.situation.once[Z].call(this.target(),this.pos,W),delete this.situation.once[Z]);return this.active&&this.target().fire("during",{pos:this.pos,eased:W,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=W,this):this},eachAt:function(){var b,N=this,E=this.target(),X=this.situation;for(var W in X.animations)b=[].concat(X.animations[W]).map(function(it){return"string"!=typeof it&&it.at?it.at(X.ease(N.pos),N.pos):it}),E[W].apply(E,b);for(var W in X.attrs)b=[W].concat(X.attrs[W]).map(function(pt){return"string"!=typeof pt&&pt.at?pt.at(X.ease(N.pos),N.pos):pt}),E.attr.apply(E,b);for(var W in X.styles)b=[W].concat(X.styles[W]).map(function(pt){return"string"!=typeof pt&&pt.at?pt.at(X.ease(N.pos),N.pos):pt}),E.style.apply(E,b);if(X.transforms.length){b=X.initialTransformation,W=0;for(var Z=X.transforms.length;W<Z;W++){var et=X.transforms[W];et instanceof a.Matrix?b=et.relative?b.multiply((new a.Matrix).morph(et).at(X.ease(this.pos))):b.morph(et).at(X.ease(this.pos)):(et.relative||et.undo(b.extract()),b=b.multiply(et.at(X.ease(this.pos))))}E.matrix(b)}return this},once:function(b,N,E){var X=this.last();return E||(b=X.ease(b)),X.once[b]=N,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:a.Element,construct:{animate:function(b,N,E){return(this.fx||(this.fx=new a.FX(this))).animate(b,N,E)},delay:function(b){return(this.fx||(this.fx=new a.FX(this))).delay(b)},stop:function(b,N){return this.fx&&this.fx.stop(b,N),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),a.MorphObj=a.invent({create:function(b,N){return a.Color.isColor(N)?new a.Color(b).morph(N):a.regex.delimiter.test(b)?a.regex.pathLetters.test(b)?new a.PathArray(b).morph(N):new a.Array(b).morph(N):a.regex.numberAndUnit.test(N)?new a.Number(b).morph(N):(this.value=b,void(this.destination=N))},extend:{at:function(b,N){return N<1?this.value:this.destination},valueOf:function(){return this.value}}}),a.extend(a.FX,{attr:function(b,N,E){if("object"===be(b))for(var X in b)this.attr(X,b[X]);else this.add(b,N,"attrs");return this},plot:function(b,N,E,X){return 4==arguments.length?this.plot([b,N,E,X]):this.add("plot",new(this.target().morphArray)(b))}}),a.Box=a.invent({create:function(b,N,E,X){if(!("object"!==be(b)||b instanceof a.Element))return a.Box.call(this,null!=b.left?b.left:b.x,null!=b.top?b.top:b.y,b.width,b.height);var W;4==arguments.length&&(this.x=b,this.y=N,this.width=E,this.height=X),null==(W=this).x&&(W.x=0,W.y=0,W.width=0,W.height=0),W.w=W.width,W.h=W.height,W.x2=W.x+W.width,W.y2=W.y+W.height,W.cx=W.x+W.width/2,W.cy=W.y+W.height/2}}),a.BBox=a.invent({create:function(b){if(a.Box.apply(this,[].slice.call(arguments)),b instanceof a.Element){var N;try{if(!r.documentElement.contains){for(var E=b.node;E.parentNode;)E=E.parentNode;if(E!=r)throw new Error("Element not in the dom")}N=b.node.getBBox()}catch{if(b instanceof a.Shape){a.parser.draw||a.prepare();var X=b.clone(a.parser.draw.instance).show();X&&X.node&&"function"==typeof X.node.getBBox&&(N=X.node.getBBox()),X&&"function"==typeof X.remove&&X.remove()}else N={x:b.node.clientLeft,y:b.node.clientTop,width:b.node.clientWidth,height:b.node.clientHeight}}a.Box.call(this,N)}},inherit:a.Box,parent:a.Element,construct:{bbox:function(){return new a.BBox(this)}}}),a.BBox.prototype.constructor=a.BBox,a.Matrix=a.invent({create:function(b){var N=O([1,0,0,1,0,0]);b=null===b?N:b instanceof a.Element?b.matrixify():"string"==typeof b?O(b.split(a.regex.delimiter).map(parseFloat)):6==arguments.length?O([].slice.call(arguments)):Array.isArray(b)?O(b):b&&"object"===be(b)?b:N;for(var E=G.length-1;E>=0;--E)this[G[E]]=null!=b[G[E]]?b[G[E]]:N[G[E]]},extend:{extract:function(){var b=F(this,0,1);F(this,1,0);var N=180/Math.PI*Math.atan2(b.y,b.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(N*Math.PI/180)+this.f*Math.sin(N*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(N*Math.PI/180)+this.e*Math.sin(-N*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:N,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new a.Matrix(this)}},clone:function(){return new a.Matrix(this)},morph:function(b){return this.destination=new a.Matrix(b),this},multiply:function(b){return new a.Matrix(this.native().multiply((N=b,N instanceof a.Matrix||(N=new a.Matrix(N)),N).native()));var N},inverse:function(){return new a.Matrix(this.native().inverse())},translate:function(b,N){return new a.Matrix(this.native().translate(b||0,N||0))},native:function(){for(var b=a.parser.native.createSVGMatrix(),N=G.length-1;N>=0;N--)b[G[N]]=this[G[N]];return b},toString:function(){return"matrix("+Y(this.a)+","+Y(this.b)+","+Y(this.c)+","+Y(this.d)+","+Y(this.e)+","+Y(this.f)+")"}},parent:a.Element,construct:{ctm:function(){return new a.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof a.Nested){var b=this.rect(1,1),N=b.node.getScreenCTM();return b.remove(),new a.Matrix(N)}return new a.Matrix(this.node.getScreenCTM())}}}),a.Point=a.invent({create:function(b,N){var E;E=Array.isArray(b)?{x:b[0],y:b[1]}:"object"===be(b)?{x:b.x,y:b.y}:null!=b?{x:b,y:N??b}:{x:0,y:0},this.x=E.x,this.y=E.y},extend:{clone:function(){return new a.Point(this)},morph:function(b,N){return this.destination=new a.Point(b,N),this}}}),a.extend(a.Element,{point:function(b,N){return new a.Point(b,N).transform(this.screenCTM().inverse())}}),a.extend(a.Element,{attr:function(b,N,E){if(null==b){for(b={},E=(N=this.node.attributes).length-1;E>=0;E--)b[N[E].nodeName]=a.regex.isNumber.test(N[E].nodeValue)?parseFloat(N[E].nodeValue):N[E].nodeValue;return b}if("object"===be(b))for(var X in b)this.attr(X,b[X]);else if(null===N)this.node.removeAttribute(b);else{if(null==N)return null==(N=this.node.getAttribute(b))?a.defaults.attrs[b]:a.regex.isNumber.test(N)?parseFloat(N):N;"stroke-width"==b?this.attr("stroke",parseFloat(N)>0?this._stroke:null):"stroke"==b&&(this._stroke=N),"fill"!=b&&"stroke"!=b||(a.regex.isImage.test(N)&&(N=this.doc().defs().image(N,0,0)),N instanceof a.Image&&(N=this.doc().defs().pattern(0,0,function(){this.add(N)}))),"number"==typeof N?N=new a.Number(N):a.Color.isColor(N)?N=new a.Color(N):Array.isArray(N)&&(N=new a.Array(N)),"leading"==b?this.leading&&this.leading(N):"string"==typeof E?this.node.setAttributeNS(E,b,N.toString()):this.node.setAttribute(b,N.toString()),!this.rebuild||"font-size"!=b&&"x"!=b||this.rebuild(b,N)}return this}}),a.extend(a.Element,{transform:function(b,N){var E;return"object"!==be(b)?(E=new a.Matrix(this).extract(),"string"==typeof b?E[b]:E):(E=new a.Matrix(this),N=!!N||!!b.relative,null!=b.a&&(E=N?E.multiply(new a.Matrix(b)):new a.Matrix(b)),this.attr("transform",E))}}),a.extend(a.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(a.regex.transforms).slice(0,-1).map(function(b){var N=b.trim().split("(");return[N[0],N[1].split(a.regex.delimiter).map(function(E){return parseFloat(E)})]}).reduce(function(b,N){return"matrix"==N[0]?b.multiply(O(N[1])):b[N[0]].apply(b,N[1])},new a.Matrix)},toParent:function(b){if(this==b)return this;var N=this.screenCTM(),E=b.screenCTM().inverse();return this.addTo(b).untransform().transform(E.multiply(N)),this},toDoc:function(){return this.toParent(this.doc())}}),a.Transformation=a.invent({create:function(b,N){if(arguments.length>1&&"boolean"!=typeof N)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(b))for(var E=0,X=this.arguments.length;E<X;++E)this[this.arguments[E]]=b[E];else if(b&&"object"===be(b))for(E=0,X=this.arguments.length;E<X;++E)this[this.arguments[E]]=b[this.arguments[E]];this.inversed=!1,!0===N&&(this.inversed=!0)}}),a.Translate=a.invent({parent:a.Matrix,inherit:a.Transformation,create:function(b,N){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),a.extend(a.Element,{style:function(b,N){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===be(b))for(var E in b)this.style(E,b[E]);else{if(!a.regex.isCss.test(b))return this.node.style[S(b)];for(b=b.split(/\s*;\s*/).filter(function(X){return!!X}).map(function(X){return X.split(/\s*:\s*/)});N=b.pop();)this.style(N[0],N[1])}else this.node.style[S(b)]=null===N||a.regex.isBlank.test(N)?"":N;return this}}),a.Parent=a.invent({create:function(b){this.constructor.call(this,b)},inherit:a.Element,extend:{children:function(){return a.utils.map(a.utils.filterSVGElements(this.node.childNodes),function(b){return a.adopt(b)})},add:function(b,N){return null==N?this.node.appendChild(b.node):b.node!=this.node.childNodes[N]&&this.node.insertBefore(b.node,this.node.childNodes[N]),this},put:function(b,N){return this.add(b,N),b},has:function(b){return this.index(b)>=0},index:function(b){return[].slice.call(this.node.childNodes).indexOf(b.node)},get:function(b){return a.adopt(this.node.childNodes[b])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(b,N){for(var E=this.children(),X=0,W=E.length;X<W;X++)E[X]instanceof a.Element&&b.apply(E[X],[X,E]),N&&E[X]instanceof a.Container&&E[X].each(b,N);return this},removeElement:function(b){return this.node.removeChild(b.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),a.extend(a.Parent,{ungroup:function(b,N){return 0===N||this instanceof a.Defs||this.node==a.parser.draw||(b=b||(this instanceof a.Doc?this:this.parent(a.Parent)),N=N||1/0,this.each(function(){return this instanceof a.Defs?this:this instanceof a.Parent?this.ungroup(b,N-1):this.toParent(b)}),this.node.firstChild||this.remove()),this},flatten:function(b,N){return this.ungroup(b,N)}}),a.Container=a.invent({create:function(b){this.constructor.call(this,b)},inherit:a.Parent}),a.ViewBox=a.invent({parent:a.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(b){a.Element.prototype[b]=function(N){return a.on(this.node,b,N),this}}),a.listeners=[],a.handlerMap=[],a.listenerId=0,a.on=function(b,N,E,X,W){var Z=E.bind(X||b.instance||b),et=(a.handlerMap.indexOf(b)+1||a.handlerMap.push(b))-1,it=N.split(".")[0],pt=N.split(".")[1]||"*";a.listeners[et]=a.listeners[et]||{},a.listeners[et][it]=a.listeners[et][it]||{},a.listeners[et][it][pt]=a.listeners[et][it][pt]||{},E._svgjsListenerId||(E._svgjsListenerId=++a.listenerId),a.listeners[et][it][pt][E._svgjsListenerId]=Z,b.addEventListener(it,Z,W||{passive:!1})},a.off=function(b,N,E){var X=a.handlerMap.indexOf(b),W=N&&N.split(".")[0],Z=N&&N.split(".")[1],et="";if(-1!=X)if(E){if("function"==typeof E&&(E=E._svgjsListenerId),!E)return;a.listeners[X][W]&&a.listeners[X][W][Z||"*"]&&(b.removeEventListener(W,a.listeners[X][W][Z||"*"][E],!1),delete a.listeners[X][W][Z||"*"][E])}else if(Z&&W){if(a.listeners[X][W]&&a.listeners[X][W][Z]){for(var it in a.listeners[X][W][Z])a.off(b,[W,Z].join("."),it);delete a.listeners[X][W][Z]}}else if(Z)for(var pt in a.listeners[X])for(var et in a.listeners[X][pt])Z===et&&a.off(b,[pt,Z].join("."));else if(W){if(a.listeners[X][W]){for(var et in a.listeners[X][W])a.off(b,[W,et].join("."));delete a.listeners[X][W]}}else{for(var pt in a.listeners[X])a.off(b,pt);delete a.listeners[X],delete a.handlerMap[X]}},a.extend(a.Element,{on:function(b,N,E,X){return a.on(this.node,b,N,E,X),this},off:function(b,N){return a.off(this.node,b,N),this},fire:function(b,N){return this.node.dispatchEvent(b instanceof V.Event?b:b=new a.CustomEvent(b,{detail:N,cancelable:!0})),this._event=b,this},event:function(){return this._event}}),a.Defs=a.invent({create:"defs",inherit:a.Container}),a.G=a.invent({create:"g",inherit:a.Container,extend:{x:function(b){return null==b?this.transform("x"):this.transform({x:b-this.x()},!0)}},construct:{group:function(){return this.put(new a.G)}}}),a.Doc=a.invent({create:function(b){b&&("svg"==(b="string"==typeof b?r.getElementById(b):b).nodeName?this.constructor.call(this,b):(this.constructor.call(this,a.create("svg")),b.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:a.Container,extend:{namespace:function(){return this.attr({xmlns:a.ns,version:"1.1"}).attr("xmlns:xlink",a.xlink,a.xmlns).attr("xmlns:svgjs",a.svgjs,a.xmlns)},defs:function(){var b;return this._defs||(this._defs=(b=this.node.getElementsByTagName("defs")[0])?a.adopt(b):new a.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,a.parser.draw&&!a.parser.draw.parentNode&&this.node.appendChild(a.parser.draw),this},clone:function(b){this.writeDataToDom();var N=this.node,E=D(N.cloneNode(!0));return b?(b.node||b).appendChild(E.node):N.parentNode.insertBefore(E.node,N.nextSibling),E}}}),a.extend(a.Element,{}),a.Gradient=a.invent({create:function(b){this.constructor.call(this,a.create(b+"Gradient")),this.type=b},inherit:a.Container,extend:{at:function(b,N,E){return this.put(new a.Stop).update(b,N,E)},update:function(b){return this.clear(),"function"==typeof b&&b.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(b,N,E){return"transform"==b&&(b="gradientTransform"),a.Container.prototype.attr.call(this,b,N,E)}},construct:{gradient:function(b,N){return this.defs().gradient(b,N)}}}),a.extend(a.Gradient,a.FX,{from:function(b,N){return this.attr("radial"==(this._target||this).type?{fx:new a.Number(b),fy:new a.Number(N)}:{x1:new a.Number(b),y1:new a.Number(N)})},to:function(b,N){return this.attr("radial"==(this._target||this).type?{cx:new a.Number(b),cy:new a.Number(N)}:{x2:new a.Number(b),y2:new a.Number(N)})}}),a.extend(a.Defs,{gradient:function(b,N){return this.put(new a.Gradient(b)).update(N)}}),a.Stop=a.invent({create:"stop",inherit:a.Element,extend:{update:function(b){return("number"==typeof b||b instanceof a.Number)&&(b={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=b.opacity&&this.attr("stop-opacity",b.opacity),null!=b.color&&this.attr("stop-color",b.color),null!=b.offset&&this.attr("offset",new a.Number(b.offset)),this}}}),a.Pattern=a.invent({create:"pattern",inherit:a.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(b){return this.clear(),"function"==typeof b&&b.call(this,this),this},toString:function(){return this.fill()},attr:function(b,N,E){return"transform"==b&&(b="patternTransform"),a.Container.prototype.attr.call(this,b,N,E)}},construct:{pattern:function(b,N,E){return this.defs().pattern(b,N,E)}}}),a.extend(a.Defs,{pattern:function(b,N,E){return this.put(new a.Pattern).update(E).attr({x:0,y:0,width:b,height:N,patternUnits:"userSpaceOnUse"})}}),a.Shape=a.invent({create:function(b){this.constructor.call(this,b)},inherit:a.Element}),a.Symbol=a.invent({create:"symbol",inherit:a.Container,construct:{symbol:function(){return this.put(new a.Symbol)}}}),a.Use=a.invent({create:"use",inherit:a.Shape,extend:{element:function(b,N){return this.attr("href",(N||"")+"#"+b,a.xlink)}},construct:{use:function(b,N){return this.put(new a.Use).element(b,N)}}}),a.Rect=a.invent({create:"rect",inherit:a.Shape,construct:{rect:function(b,N){return this.put(new a.Rect).size(b,N)}}}),a.Circle=a.invent({create:"circle",inherit:a.Shape,construct:{circle:function(b){return this.put(new a.Circle).rx(new a.Number(b).divide(2)).move(0,0)}}}),a.extend(a.Circle,a.FX,{rx:function(b){return this.attr("r",b)},ry:function(b){return this.rx(b)}}),a.Ellipse=a.invent({create:"ellipse",inherit:a.Shape,construct:{ellipse:function(b,N){return this.put(new a.Ellipse).size(b,N).move(0,0)}}}),a.extend(a.Ellipse,a.Rect,a.FX,{rx:function(b){return this.attr("rx",b)},ry:function(b){return this.attr("ry",b)}}),a.extend(a.Circle,a.Ellipse,{x:function(b){return null==b?this.cx()-this.rx():this.cx(b+this.rx())},y:function(b){return null==b?this.cy()-this.ry():this.cy(b+this.ry())},cx:function(b){return null==b?this.attr("cx"):this.attr("cx",b)},cy:function(b){return null==b?this.attr("cy"):this.attr("cy",b)},width:function(b){return null==b?2*this.rx():this.rx(new a.Number(b).divide(2))},height:function(b){return null==b?2*this.ry():this.ry(new a.Number(b).divide(2))},size:function(b,N){var E=P(this,b,N);return this.rx(new a.Number(E.width).divide(2)).ry(new a.Number(E.height).divide(2))}}),a.Line=a.invent({create:"line",inherit:a.Shape,extend:{array:function(){return new a.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(b,N,E,X){return null==b?this.array():(b=void 0!==N?{x1:b,y1:N,x2:E,y2:X}:new a.PointArray(b).toLine(),this.attr(b))},move:function(b,N){return this.attr(this.array().move(b,N).toLine())},size:function(b,N){var E=P(this,b,N);return this.attr(this.array().size(E.width,E.height).toLine())}},construct:{line:function(b,N,E,X){return a.Line.prototype.plot.apply(this.put(new a.Line),null!=b?[b,N,E,X]:[0,0,0,0])}}}),a.Polyline=a.invent({create:"polyline",inherit:a.Shape,construct:{polyline:function(b){return this.put(new a.Polyline).plot(b||new a.PointArray)}}}),a.Polygon=a.invent({create:"polygon",inherit:a.Shape,construct:{polygon:function(b){return this.put(new a.Polygon).plot(b||new a.PointArray)}}}),a.extend(a.Polyline,a.Polygon,{array:function(){return this._array||(this._array=new a.PointArray(this.attr("points")))},plot:function(b){return null==b?this.array():this.clear().attr("points","string"==typeof b?b:this._array=new a.PointArray(b))},clear:function(){return delete this._array,this},move:function(b,N){return this.attr("points",this.array().move(b,N))},size:function(b,N){var E=P(this,b,N);return this.attr("points",this.array().size(E.width,E.height))}}),a.extend(a.Line,a.Polyline,a.Polygon,{morphArray:a.PointArray,x:function(b){return null==b?this.bbox().x:this.move(b,this.bbox().y)},y:function(b){return null==b?this.bbox().y:this.move(this.bbox().x,b)},width:function(b){var N=this.bbox();return null==b?N.width:this.size(b,N.height)},height:function(b){var N=this.bbox();return null==b?N.height:this.size(N.width,b)}}),a.Path=a.invent({create:"path",inherit:a.Shape,extend:{morphArray:a.PathArray,array:function(){return this._array||(this._array=new a.PathArray(this.attr("d")))},plot:function(b){return null==b?this.array():this.clear().attr("d","string"==typeof b?b:this._array=new a.PathArray(b))},clear:function(){return delete this._array,this}},construct:{path:function(b){return this.put(new a.Path).plot(b||new a.PathArray)}}}),a.Image=a.invent({create:"image",inherit:a.Shape,extend:{load:function(b){if(!b)return this;var N=this,E=new V.Image;return a.on(E,"load",function(){a.off(E);var X=N.parent(a.Pattern);null!==X&&(0==N.width()&&0==N.height()&&N.size(E.width,E.height),X&&0==X.width()&&0==X.height()&&X.size(N.width(),N.height()),"function"==typeof N._loaded&&N._loaded.call(N,{width:E.width,height:E.height,ratio:E.width/E.height,url:b}))}),a.on(E,"error",function(X){a.off(E),"function"==typeof N._error&&N._error.call(N,X)}),this.attr("href",E.src=this.src=b,a.xlink)},loaded:function(b){return this._loaded=b,this},error:function(b){return this._error=b,this}},construct:{image:function(b,N,E){return this.put(new a.Image).load(b).size(N||0,E||N||0)}}}),a.Text=a.invent({create:function(){this.constructor.call(this,a.create("text")),this.dom.leading=new a.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",a.defaults.attrs["font-family"])},inherit:a.Shape,extend:{x:function(b){return null==b?this.attr("x"):this.attr("x",b)},text:function(b){if(void 0===b){b="";for(var N=this.node.childNodes,E=0,X=N.length;E<X;++E)0!=E&&3!=N[E].nodeType&&1==a.adopt(N[E]).dom.newLined&&(b+="\n"),b+=N[E].textContent;return b}if(this.clear().build(!0),"function"==typeof b)b.call(this,this);else{E=0;for(var W=(b=b.split("\n")).length;E<W;E++)this.tspan(b[E]).newLine()}return this.build(!1).rebuild()},size:function(b){return this.attr("font-size",b).rebuild()},leading:function(b){return null==b?this.dom.leading:(this.dom.leading=new a.Number(b),this.rebuild())},lines:function(){var b=(this.textPath&&this.textPath()||this).node,N=a.utils.map(a.utils.filterSVGElements(b.childNodes),function(E){return a.adopt(E)});return new a.Set(N)},rebuild:function(b){if("boolean"==typeof b&&(this._rebuild=b),this._rebuild){var N=this,E=0,X=this.dom.leading*new a.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(N.textPath()||this.attr("x",N.attr("x")),"\n"==this.text()?E+=X:(this.attr("dy",X+E),E=0))}),this.fire("rebuild")}return this},build:function(b){return this._build=!!b,this},setData:function(b){return this.dom=b,this.dom.leading=new a.Number(b.leading||1.3),this}},construct:{text:function(b){return this.put(new a.Text).text(b)},plain:function(b){return this.put(new a.Text).plain(b)}}}),a.Tspan=a.invent({create:"tspan",inherit:a.Shape,extend:{text:function(b){return null==b?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof b?b.call(this,this):this.plain(b),this)},dx:function(b){return this.attr("dx",b)},dy:function(b){return this.attr("dy",b)},newLine:function(){var b=this.parent(a.Text);return this.dom.newLined=!0,this.dy(b.dom.leading*b.attr("font-size")).attr("x",b.x())}}}),a.extend(a.Text,a.Tspan,{plain:function(b){return!1===this._build&&this.clear(),this.node.appendChild(r.createTextNode(b)),this},tspan:function(b){var N=(this.textPath&&this.textPath()||this).node,E=new a.Tspan;return!1===this._build&&this.clear(),N.appendChild(E.node),E.text(b)},clear:function(){for(var b=(this.textPath&&this.textPath()||this).node;b.hasChildNodes();)b.removeChild(b.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),a.TextPath=a.invent({create:"textPath",inherit:a.Parent,parent:a.Text,construct:{morphArray:a.PathArray,array:function(){var b=this.track();return b?b.array():null},plot:function(b){var N=this.track(),E=null;return N&&(E=N.plot(b)),null==b?E:this},track:function(){var b=this.textPath();if(b)return b.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return a.adopt(this.node.firstChild)}}}),a.Nested=a.invent({create:function(){this.constructor.call(this,a.create("svg")),this.style("overflow","visible")},inherit:a.Container,construct:{nested:function(){return this.put(new a.Nested)}}});var y={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(b,N){return"color"==N?b:b+"-"+N}};function x(b,N,E,X){return E+X.replace(a.regex.dots," .")}function S(b){return b.toLowerCase().replace(/-(.)/g,function(N,E){return E.toUpperCase()})}function M(b){return b.charAt(0).toUpperCase()+b.slice(1)}function C(b){var N=b.toString(16);return 1==N.length?"0"+N:N}function P(b,N,E){if(null==N||null==E){var X=b.bbox();null==N?N=X.width/X.height*E:null==E&&(E=X.height/X.width*N)}return{width:N,height:E}}function F(b,N,E){return{x:N*b.a+E*b.c+0,y:N*b.b+E*b.d+0}}function O(b){return{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}}function D(b){for(var N=b.childNodes.length-1;N>=0;N--)b.childNodes[N]instanceof V.SVGElement&&D(b.childNodes[N]);return a.adopt(b).id(a.eid(b.nodeName))}function Y(b){return Math.abs(b)>1e-37?b:0}["fill","stroke"].forEach(function(b){var N={};N[b]=function(E){if(void 0===E)return this;if("string"==typeof E||a.Color.isRgb(E)||E&&"function"==typeof E.fill)this.attr(b,E);else for(var X=y[b].length-1;X>=0;X--)null!=E[y[b][X]]&&this.attr(y.prefix(b,y[b][X]),E[y[b][X]]);return this},a.extend(a.Element,a.FX,N)}),a.extend(a.Element,a.FX,{translate:function(b,N){return this.transform({x:b,y:N})},matrix:function(b){return this.attr("transform",new a.Matrix(6==arguments.length?[].slice.call(arguments):b))},opacity:function(b){return this.attr("opacity",b)},dx:function(b){return this.x(new a.Number(b).plus(this instanceof a.FX?0:this.x()),!0)},dy:function(b){return this.y(new a.Number(b).plus(this instanceof a.FX?0:this.y()),!0)}}),a.extend(a.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(b){return this.node.getPointAtLength(b)}}),a.Set=a.invent({create:function(b){Array.isArray(b)?this.members=b:this.clear()},extend:{add:function(){for(var b=[].slice.call(arguments),N=0,E=b.length;N<E;N++)this.members.push(b[N]);return this},remove:function(b){var N=this.index(b);return N>-1&&this.members.splice(N,1),this},each:function(b){for(var N=0,E=this.members.length;N<E;N++)b.apply(this.members[N],[N,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(b){return this.index(b)>=0},index:function(b){return this.members.indexOf(b)},get:function(b){return this.members[b]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(b){return new a.Set(b)}}}),a.FX.Set=a.invent({create:function(b){this.set=b}}),a.Set.inherit=function(){var b=[];for(var N in a.Shape.prototype)"function"==typeof a.Shape.prototype[N]&&"function"!=typeof a.Set.prototype[N]&&b.push(N);for(var N in b.forEach(function(X){a.Set.prototype[X]=function(){for(var W=0,Z=this.members.length;W<Z;W++)this.members[W]&&"function"==typeof this.members[W][X]&&this.members[W][X].apply(this.members[W],arguments);return"animate"==X?this.fx||(this.fx=new a.FX.Set(this)):this}}),b=[],a.FX.prototype)"function"==typeof a.FX.prototype[N]&&"function"!=typeof a.FX.Set.prototype[N]&&b.push(N);b.forEach(function(E){a.FX.Set.prototype[E]=function(){for(var X=0,W=this.set.members.length;X<W;X++)this.set.members[X].fx[E].apply(this.set.members[X].fx,arguments);return this}})},a.extend(a.Element,{}),a.extend(a.Element,{remember:function(b,N){if("object"===be(arguments[0]))for(var E in b)this.remember(E,b[E]);else{if(1==arguments.length)return this.memory()[b];this.memory()[b]=N}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var b=arguments.length-1;b>=0;b--)delete this.memory()[arguments[b]];return this},memory:function(){return this._memory||(this._memory={})}}),a.get=function(b){var N=r.getElementById(function(E){var X=(E||"").toString().match(a.regex.reference);if(X)return X[1]}(b)||b);return a.adopt(N)},a.select=function(b,N){return new a.Set(a.utils.map((N||r).querySelectorAll(b),function(E){return a.adopt(E)}))},a.extend(a.Parent,{select:function(b){return a.select(b,this.node)}});var G="abcdef".split("");if("function"!=typeof V.CustomEvent){var U=function(b,N){N=N||{bubbles:!1,cancelable:!1,detail:void 0};var E=r.createEvent("CustomEvent");return E.initCustomEvent(b,N.bubbles,N.cancelable,N.detail),E};U.prototype=V.Event.prototype,a.CustomEvent=U}else a.CustomEvent=V.CustomEvent;return a},"function"==typeof define&&define.amd?define(function(){return ho(hs,hs.document)}):"object"===(typeof exports>"u"?"undefined":be(exports))&&typeof module<"u"?module.exports=hs.document?ho(hs,hs.document):function(V){return ho(V,V.document)}:hs.SVG=ho(hs,hs.document),
/*! svg.filter.js - v2.0.2 - 2016-02-24
    * https://github.com/wout/svg.filter.js
    * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(g,y){return this.add(g,y),!g.attr("in")&&this.autoSetIn&&g.attr("in",this.source),g.attr("result")||g.attr("result",g),g},blend:function(g,y,x){return this.put(new SVG.BlendEffect(g,y,x))},colorMatrix:function(g,y){return this.put(new SVG.ColorMatrixEffect(g,y))},convolveMatrix:function(g){return this.put(new SVG.ConvolveMatrixEffect(g))},componentTransfer:function(g){return this.put(new SVG.ComponentTransferEffect(g))},composite:function(g,y,x){return this.put(new SVG.CompositeEffect(g,y,x))},flood:function(g,y){return this.put(new SVG.FloodEffect(g,y))},offset:function(g,y){return this.put(new SVG.OffsetEffect(g,y))},image:function(g){return this.put(new SVG.ImageEffect(g))},merge:function(){var g=[void 0];for(var y in arguments)g.push(arguments[y]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,g)))},gaussianBlur:function(g,y){return this.put(new SVG.GaussianBlurEffect(g,y))},morphology:function(g,y){return this.put(new SVG.MorphologyEffect(g,y))},diffuseLighting:function(g,y,x){return this.put(new SVG.DiffuseLightingEffect(g,y,x))},displacementMap:function(g,y,x,S,M){return this.put(new SVG.DisplacementMapEffect(g,y,x,S,M))},specularLighting:function(g,y,x,S){return this.put(new SVG.SpecularLightingEffect(g,y,x,S))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(g,y,x,S,M){return this.put(new SVG.TurbulenceEffect(g,y,x,S,M))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(g){var y=this.put(new SVG.Filter);return"function"==typeof g&&g.call(y,y),y}}),SVG.extend(SVG.Container,{filter:function(g){return this.defs().filter(g)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(g){return this.filterer=g instanceof SVG.Element?g:this.doc().filter(g),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(g){return this.filterer&&!0===g&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(g){return null==g?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",g)},result:function(g){return null==g?this.attr("result"):this.attr("result",g)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(g){return null==g?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",g)},result:function(g){return null==g?this.attr("result"):this.attr("result",g)},toString:function(){return this.result()}}});var V={blend:function(g,y){return this.parent()&&this.parent().blend(this,g,y)},colorMatrix:function(g,y){return this.parent()&&this.parent().colorMatrix(g,y).in(this)},convolveMatrix:function(g){return this.parent()&&this.parent().convolveMatrix(g).in(this)},componentTransfer:function(g){return this.parent()&&this.parent().componentTransfer(g).in(this)},composite:function(g,y){return this.parent()&&this.parent().composite(this,g,y)},flood:function(g,y){return this.parent()&&this.parent().flood(g,y)},offset:function(g,y){return this.parent()&&this.parent().offset(g,y).in(this)},image:function(g){return this.parent()&&this.parent().image(g)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(g,y){return this.parent()&&this.parent().gaussianBlur(g,y).in(this)},morphology:function(g,y){return this.parent()&&this.parent().morphology(g,y).in(this)},diffuseLighting:function(g,y,x){return this.parent()&&this.parent().diffuseLighting(g,y,x).in(this)},displacementMap:function(g,y,x,S){return this.parent()&&this.parent().displacementMap(this,g,y,x,S)},specularLighting:function(g,y,x,S){return this.parent()&&this.parent().specularLighting(g,y,x,S).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(g,y,x,S,M){return this.parent()&&this.parent().turbulence(g,y,x,S,M).in(this)}};SVG.extend(SVG.Effect,V),SVG.extend(SVG.ParentEffect,V),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(g){this.attr("in",g)}}});var r={blend:function(g,y,x){this.attr({in:g,in2:y,mode:x||"normal"})},colorMatrix:function(g,y){"matrix"==g&&(y=d(y)),this.attr({type:g,values:void 0===y?null:y})},convolveMatrix:function(g){g=d(g),this.attr({order:Math.sqrt(g.split(" ").length),kernelMatrix:g})},composite:function(g,y,x){this.attr({in:g,in2:y,operator:x})},flood:function(g,y){this.attr("flood-color",g),null!=y&&this.attr("flood-opacity",y)},offset:function(g,y){this.attr({dx:g,dy:y})},image:function(g){this.attr("href",g,SVG.xlink)},displacementMap:function(g,y,x,S,M){this.attr({in:g,in2:y,scale:x,xChannelSelector:S,yChannelSelector:M})},gaussianBlur:function(g,y){this.attr("stdDeviation",null!=g||null!=y?function(x){if(!Array.isArray(x))return x;for(var S=0,M=x.length,C=[];S<M;S++)C.push(x[S]);return C.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(g,y){this.attr({operator:g,radius:y})},tile:function(){},turbulence:function(g,y,x,S,M){this.attr({numOctaves:y,seed:x,stitchTiles:S,baseFrequency:g,type:M})}},a={merge:function(){var g;if(arguments[0]instanceof SVG.Set){var y=this;arguments[0].each(function(S){this instanceof SVG.MergeNode?y.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&y.put(new SVG.MergeNode(this))})}else{g=Array.isArray(arguments[0])?arguments[0]:arguments;for(var x=0;x<g.length;x++)g[x]instanceof SVG.MergeNode?this.put(g[x]):this.put(new SVG.MergeNode(g[x]))}},componentTransfer:function(g){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(x){this[x]=new(SVG["Func"+x.toUpperCase()])("identity"),this.rgb.add(this[x]),this.node.appendChild(this[x].node)}.bind(this)),g)for(var y in g.rgb&&(["r","g","b"].forEach(function(x){this[x].attr(g.rgb)}.bind(this)),delete g.rgb),g)this[y].attr(g[y])},diffuseLighting:function(g,y,x){this.attr({surfaceScale:g,diffuseConstant:y,kernelUnitLength:x})},specularLighting:function(g,y,x,S){this.attr({surfaceScale:g,diffuseConstant:y,specularExponent:x,kernelUnitLength:S})}},h={distantLight:function(g,y){this.attr({azimuth:g,elevation:y})},pointLight:function(g,y,x){this.attr({x:g,y,z:x})},spotLight:function(g,y,x,S,M,C){this.attr({x:g,y,z:x,pointsAtX:S,pointsAtY:M,pointsAtZ:C})},mergeNode:function(g){this.attr("in",g)}};function d(g){return Array.isArray(g)&&(g=new SVG.Array(g)),g.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function f(){var g=function(){};for(var y in"function"==typeof arguments[arguments.length-1]&&(g=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var x in arguments[y])g(arguments[y][x],x,arguments[y])}["r","g","b","a"].forEach(function(g){h["Func"+g.toUpperCase()]=function(y){switch(this.attr("type",y),y){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),f(r,function(g,y){var x=y.charAt(0).toUpperCase()+y.slice(1);SVG[x+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+x)),g.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),f(a,function(g,y){var x=y.charAt(0).toUpperCase()+y.slice(1);SVG[x+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+x)),g.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),f(h,function(g,y){var x=y.charAt(0).toUpperCase()+y.slice(1);SVG[x]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+x)),g.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(g){return g instanceof SVG.MergeNode?this.add(g,0):this.add(new SVG.MergeNode(g),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(g){return null==g?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",g)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function V(f,g,y,x,S,M,C){for(var P=f.slice(g,y||C),F=x.slice(S,M||C),O=0,D={pos:[0,0],start:[0,0]},Y={pos:[0,0],start:[0,0]};P[O]=r.call(D,P[O]),F[O]=r.call(Y,F[O]),P[O][0]!=F[O][0]||"M"==P[O][0]||"A"==P[O][0]&&(P[O][4]!=F[O][4]||P[O][5]!=F[O][5])?(Array.prototype.splice.apply(P,[O,1].concat(h.call(D,P[O]))),Array.prototype.splice.apply(F,[O,1].concat(h.call(Y,F[O])))):(P[O]=a.call(D,P[O]),F[O]=a.call(Y,F[O])),++O!=P.length||O!=F.length;)O==P.length&&P.push(["C",D.pos[0],D.pos[1],D.pos[0],D.pos[1],D.pos[0],D.pos[1]]),O==F.length&&F.push(["C",Y.pos[0],Y.pos[1],Y.pos[0],Y.pos[1],Y.pos[0],Y.pos[1]]);return{start:P,dest:F}}function r(f){switch(f[0]){case"z":case"Z":f[0]="L",f[1]=this.start[0],f[2]=this.start[1];break;case"H":f[0]="L",f[2]=this.pos[1];break;case"V":f[0]="L",f[2]=f[1],f[1]=this.pos[0];break;case"T":f[0]="Q",f[3]=f[1],f[4]=f[2],f[1]=this.reflection[1],f[2]=this.reflection[0];break;case"S":f[0]="C",f[6]=f[4],f[5]=f[3],f[4]=f[2],f[3]=f[1],f[2]=this.reflection[1],f[1]=this.reflection[0]}return f}function a(f){var g=f.length;return this.pos=[f[g-2],f[g-1]],-1!="SCQT".indexOf(f[0])&&(this.reflection=[2*this.pos[0]-f[g-4],2*this.pos[1]-f[g-3]]),f}function h(f){var g=[f];switch(f[0]){case"M":return this.pos=this.start=[f[1],f[2]],g;case"L":f[5]=f[3]=f[1],f[6]=f[4]=f[2],f[1]=this.pos[0],f[2]=this.pos[1];break;case"Q":f[6]=f[4],f[5]=f[3],f[4]=1*f[4]/3+2*f[2]/3,f[3]=1*f[3]/3+2*f[1]/3,f[2]=1*this.pos[1]/3+2*f[2]/3,f[1]=1*this.pos[0]/3+2*f[1]/3;break;case"A":f=(g=function(y,x){var S,M,C,P,F,O,D,Y,G,U,b,N,E,X,W,Z,et,it,pt,wt,xt,Ft,Nt,_t,ne,oe,ue=Math.abs(x[1]),re=Math.abs(x[2]),ce=x[3]%360,Le=x[4],Te=x[5],En=x[6],us=x[7],Ne=new SVG.Point(y),zi=new SVG.Point(En,us),Hl=[];if(0===ue||0===re||Ne.x===zi.x&&Ne.y===zi.y)return[["C",Ne.x,Ne.y,zi.x,zi.y,zi.x,zi.y]];for((M=(S=new SVG.Point((Ne.x-zi.x)/2,(Ne.y-zi.y)/2).transform((new SVG.Matrix).rotate(ce))).x*S.x/(ue*ue)+S.y*S.y/(re*re))>1&&(ue*=M=Math.sqrt(M),re*=M),C=(new SVG.Matrix).rotate(ce).scale(1/ue,1/re).rotate(-ce),Ne=Ne.transform(C),O=(P=[(zi=zi.transform(C)).x-Ne.x,zi.y-Ne.y])[0]*P[0]+P[1]*P[1],F=Math.sqrt(O),P[0]/=F,P[1]/=F,D=O<4?Math.sqrt(1-O/4):0,Le===Te&&(D*=-1),Y=new SVG.Point((zi.x+Ne.x)/2+D*-P[1],(zi.y+Ne.y)/2+D*P[0]),G=new SVG.Point(Ne.x-Y.x,Ne.y-Y.y),U=new SVG.Point(zi.x-Y.x,zi.y-Y.y),b=Math.acos(G.x/Math.sqrt(G.x*G.x+G.y*G.y)),G.y<0&&(b*=-1),N=Math.acos(U.x/Math.sqrt(U.x*U.x+U.y*U.y)),U.y<0&&(N*=-1),Te&&b>N&&(N+=2*Math.PI),!Te&&b<N&&(N-=2*Math.PI),Z=[],et=b,E=(N-b)/(X=Math.ceil(2*Math.abs(b-N)/Math.PI)),W=4*Math.tan(E/4)/3,xt=0;xt<=X;xt++)pt=Math.cos(et),it=Math.sin(et),wt=new SVG.Point(Y.x+pt,Y.y+it),Z[xt]=[new SVG.Point(wt.x+W*it,wt.y-W*pt),wt,new SVG.Point(wt.x-W*it,wt.y+W*pt)],et+=E;for(Z[0][0]=Z[0][1].clone(),Z[Z.length-1][2]=Z[Z.length-1][1].clone(),C=(new SVG.Matrix).rotate(ce).scale(ue,re).rotate(-ce),xt=0,Ft=Z.length;xt<Ft;xt++)Z[xt][0]=Z[xt][0].transform(C),Z[xt][1]=Z[xt][1].transform(C),Z[xt][2]=Z[xt][2].transform(C);for(xt=1,Ft=Z.length;xt<Ft;xt++)Nt=(wt=Z[xt-1][2]).x,_t=wt.y,ne=(wt=Z[xt][0]).x,oe=wt.y,En=(wt=Z[xt][1]).x,Hl.push(["C",Nt,_t,ne,oe,En,us=wt.y]);return Hl}(this.pos,f))[0]}return f[0]="C",this.pos=[f[5],f[6]],this.reflection=[2*f[5]-f[3],2*f[6]-f[4]],g}function d(f,g){if(!1===g)return!1;for(var y=g,x=f.length;y<x;++y)if("M"==f[y][0])return y;return!1}SVG.extend(SVG.PathArray,{morph:function(f){for(var g=this.value,y=this.parse(f),x=0,S=0,M=!1,C=!1;!1!==x||!1!==S;){var P;M=d(g,!1!==x&&x+1),C=d(y,!1!==S&&S+1),!1===x&&(x=0==(P=new SVG.PathArray(F.start).bbox()).height||0==P.width?g.push(g[0])-1:g.push(["M",P.x+P.width/2,P.y+P.height/2])-1),!1===S&&(S=0==(P=new SVG.PathArray(F.dest).bbox()).height||0==P.width?y.push(y[0])-1:y.push(["M",P.x+P.width/2,P.y+P.height/2])-1);var F=V(g,x,M,y,S,C);g=g.slice(0,x).concat(F.start,!1===M?[]:g.slice(M)),y=y.slice(0,S).concat(F.dest,!1===C?[]:y.slice(C)),x=!1!==M&&x+F.start.length,S=!1!==C&&S+F.dest.length}return this.value=g,this.destination=new SVG.PathArray,this.destination.value=y,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
    * https://github.com/svgdotjs/svg.draggable.js
    * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function V(r){r.remember("_draggable",this),this.el=r}V.prototype.init=function(r,a){var h=this;this.constraint=r,this.value=a,this.el.on("mousedown.drag",function(d){h.start(d)}),this.el.on("touchstart.drag",function(d){h.start(d)})},V.prototype.transformPoint=function(r,a){var h=(r=r||window.event).changedTouches&&r.changedTouches[0]||r;return this.p.x=h.clientX-(a||0),this.p.y=h.clientY,this.p.matrixTransform(this.m)},V.prototype.getBBox=function(){var r=this.el.bbox();return this.el instanceof SVG.Nested&&(r=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(r.x=this.el.x(),r.y=this.el.y()),r},V.prototype.start=function(r){if("click"!=r.type&&"mousedown"!=r.type&&"mousemove"!=r.type||1==(r.which||r.buttons)){var a=this;if(this.el.fire("beforedrag",{event:r,handler:this}),!this.el.event().defaultPrevented){r.preventDefault(),r.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var h,d=this.getBBox();if(this.el instanceof SVG.Text)switch(h=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":h/=2;break;case"start":h=0}this.startPoints={point:this.transformPoint(r,h),box:d,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(f){a.drag(f)}),SVG.on(window,"touchmove.drag",function(f){a.drag(f)}),SVG.on(window,"mouseup.drag",function(f){a.end(f)}),SVG.on(window,"touchend.drag",function(f){a.end(f)}),this.el.fire("dragstart",{event:r,p:this.startPoints.point,m:this.m,handler:this})}}},V.prototype.drag=function(r){var a=this.getBBox(),h=this.transformPoint(r),d=this.startPoints.box.x+h.x-this.startPoints.point.x,f=this.startPoints.box.y+h.y-this.startPoints.point.y,g=this.constraint,y=h.x-this.startPoints.point.x,x=h.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:r,p:h,m:this.m,handler:this}),this.el.event().defaultPrevented)return h;if("function"==typeof g){var S=g.call(this.el,d,f,this.m);"boolean"==typeof S&&(S={x:S,y:S}),!0===S.x?this.el.x(d):!1!==S.x&&this.el.x(S.x),!0===S.y?this.el.y(f):!1!==S.y&&this.el.y(S.y)}else"object"==typeof g&&(null!=g.minX&&d<g.minX?y=(d=g.minX)-this.startPoints.box.x:null!=g.maxX&&d>g.maxX-a.width&&(y=(d=g.maxX-a.width)-this.startPoints.box.x),null!=g.minY&&f<g.minY?x=(f=g.minY)-this.startPoints.box.y:null!=g.maxY&&f>g.maxY-a.height&&(x=(f=g.maxY-a.height)-this.startPoints.box.y),null!=g.snapToGrid&&(d-=d%g.snapToGrid,f-=f%g.snapToGrid,y-=y%g.snapToGrid,x-=x%g.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:y,y:x},!0):this.el.move(d,f));return h},V.prototype.end=function(r){var a=this.drag(r);this.el.fire("dragend",{event:r,p:a,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(r,a){"function"!=typeof r&&"object"!=typeof r||(a=r,r=!0);var h=this.remember("_draggable")||new V(this);return(r=void 0===r||r)?h.init(a||{},r):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function V(r){this.el=r,r.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(a,h,d){var f="string"!=typeof a?a:h[a];return d?f/2:f},this.pointCoords=function(a,h){var d=this.pointsList[a];return{x:this.pointCoord(d[0],h,"t"===a||"b"===a),y:this.pointCoord(d[1],h,"r"===a||"l"===a)}}}V.prototype.init=function(r,a){var h=this.el.bbox();this.options={};var d=this.el.selectize.defaults.points;for(var f in this.el.selectize.defaults)this.options[f]=this.el.selectize.defaults[f],void 0!==a[f]&&(this.options[f]=a[f]);var g=["points","pointsExclude"];for(var f in g){var y=this.options[g[f]];"string"==typeof y?y=y.length>0?y.split(/\s*,\s*/i):[]:"boolean"==typeof y&&"points"===g[f]&&(y=y?d:[]),this.options[g[f]]=y}this.options.points=[d,this.options.points].reduce(function(x,S){return x.filter(function(M){return S.indexOf(M)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(x,S){return x.filter(function(M){return S.indexOf(M)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(h.x,h.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(r):this.selectRect(r),this.observe(),this.cleanup()},V.prototype.selectPoints=function(r){return this.pointSelection.isSelected=r,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},V.prototype.getPointArray=function(){var r=this.el.bbox();return this.el.array().valueOf().map(function(a){return[a[0]-r.x,a[1]-r.y]})},V.prototype.drawPoints=function(){for(var r=this,a=this.getPointArray(),h=0,d=a.length;h<d;++h){var f=function(y){return function(x){(x=x||window.event).preventDefault?x.preventDefault():x.returnValue=!1,x.stopPropagation(),r.el.fire("point",{x:x.pageX||x.touches[0].pageX,y:x.pageY||x.touches[0].pageY,i:y,event:x})}}(h),g=this.drawPoint(a[h][0],a[h][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",f).on("mousedown",f);this.pointSelection.set.add(g)}},V.prototype.drawPoint=function(r,a){var h=this.options.pointType;switch(h){case"circle":return this.drawCircle(r,a);case"rect":return this.drawRect(r,a);default:if("function"==typeof h)return h.call(this,r,a);throw new Error("Unknown "+h+" point type!")}},V.prototype.drawCircle=function(r,a){return this.nested.circle(this.options.pointSize).center(r,a)},V.prototype.drawRect=function(r,a){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(r,a)},V.prototype.updatePointSelection=function(){var r=this.getPointArray();this.pointSelection.set.each(function(a){this.cx()===r[a][0]&&this.cy()===r[a][1]||this.center(r[a][0],r[a][1])})},V.prototype.updateRectSelection=function(){var r=this,a=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:a.width,height:a.height}),this.options.points.length&&this.options.points.map(function(d,f){var g=r.pointCoords(d,a);r.rectSelection.set.get(f+1).center(g.x,g.y)}),this.options.rotationPoint){var h=this.rectSelection.set.length();this.rectSelection.set.get(h-1).center(a.width/2,20)}},V.prototype.selectRect=function(r){var a=this,h=this.el.bbox();function d(y){return function(x){(x=x||window.event).preventDefault?x.preventDefault():x.returnValue=!1,x.stopPropagation(),a.el.fire(y,{x:x.pageX||x.touches[0].pageX,y:x.pageY||x.touches[0].pageY,event:x})}}if(this.rectSelection.isSelected=r,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(h.width,h.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(y,x){var S=a.pointCoords(y,h),M=a.drawPoint(S.x,S.y).attr("class",a.options.classPoints+"_"+y).on("mousedown",d(y)).on("touchstart",d(y));a.rectSelection.set.add(M)}),this.rectSelection.set.each(function(){this.addClass(a.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var f=function(y){(y=y||window.event).preventDefault?y.preventDefault():y.returnValue=!1,y.stopPropagation(),a.el.fire("rot",{x:y.pageX||y.touches[0].pageX,y:y.pageY||y.touches[0].pageY,event:y})},g=this.drawPoint(h.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",f).on("mousedown",f);this.rectSelection.set.add(g)}},V.prototype.handler=function(){var r=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(r.x,r.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},V.prototype.observe=function(){var r=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){r.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){r.handler()})},V.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(r,a){return"object"==typeof r&&(a=r,r=!0),(this.remember("_selectHandler")||new V(this)).init(void 0===r||r,a||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function V(r){r.remember("_resizeHandler",this),this.el=r,this.parameters={},this.lastUpdateCall=null,this.p=r.doc().node.createSVGPoint()}V.prototype.transformPoint=function(r,a,h){return this.p.x=r-(this.offset.x-window.pageXOffset),this.p.y=a-(this.offset.y-window.pageYOffset),this.p.matrixTransform(h||this.m)},V.prototype._extractPosition=function(r){return{x:null!=r.clientX?r.clientX:r.touches[0].clientX,y:null!=r.clientY?r.clientY:r.touches[0].clientY}},V.prototype.init=function(r){var a=this;if(this.stop(),"stop"!==r){for(var h in this.options={},this.el.resize.defaults)this.options[h]=this.el.resize.defaults[h],void 0!==r[h]&&(this.options[h]=r[h]);this.el.on("lt.resize",function(d){a.resize(d||window.event)}),this.el.on("rt.resize",function(d){a.resize(d||window.event)}),this.el.on("rb.resize",function(d){a.resize(d||window.event)}),this.el.on("lb.resize",function(d){a.resize(d||window.event)}),this.el.on("t.resize",function(d){a.resize(d||window.event)}),this.el.on("r.resize",function(d){a.resize(d||window.event)}),this.el.on("b.resize",function(d){a.resize(d||window.event)}),this.el.on("l.resize",function(d){a.resize(d||window.event)}),this.el.on("rot.resize",function(d){a.resize(d||window.event)}),this.el.on("point.resize",function(d){a.resize(d||window.event)}),this.update()}},V.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},V.prototype.resize=function(r){var a=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var h=this._extractPosition(r.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(h.x,h.y),x:r.detail.x,y:r.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==r.detail.i){var d=this.el.array().valueOf();this.parameters.i=r.detail.i,this.parameters.pointCoords=[d[r.detail.i][0],d[r.detail.i][1]]}switch(r.type){case"lt":this.calc=function(f,g){var y=this.snapToGrid(f,g);if(this.parameters.box.width-y[0]>0&&this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-y[0]);y=this.checkAspectRatio(y),this.el.move(this.parameters.box.x+y[0],this.parameters.box.y+y[1]).size(this.parameters.box.width-y[0],this.parameters.box.height-y[1])}};break;case"rt":this.calc=function(f,g){var y=this.snapToGrid(f,g,2);if(this.parameters.box.width+y[0]>0&&this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+y[0]);y=this.checkAspectRatio(y,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+y[1]).size(this.parameters.box.width+y[0],this.parameters.box.height-y[1])}};break;case"rb":this.calc=function(f,g){var y=this.snapToGrid(f,g,0);if(this.parameters.box.width+y[0]>0&&this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+y[0]);y=this.checkAspectRatio(y),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+y[0],this.parameters.box.height+y[1])}};break;case"lb":this.calc=function(f,g){var y=this.snapToGrid(f,g,1);if(this.parameters.box.width-y[0]>0&&this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-y[0]);y=this.checkAspectRatio(y,!0),this.el.move(this.parameters.box.x+y[0],this.parameters.box.y).size(this.parameters.box.width-y[0],this.parameters.box.height+y[1])}};break;case"t":this.calc=function(f,g){var y=this.snapToGrid(f,g,2);if(this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+y[1]).height(this.parameters.box.height-y[1])}};break;case"r":this.calc=function(f,g){var y=this.snapToGrid(f,g,0);if(this.parameters.box.width+y[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+y[0])}};break;case"b":this.calc=function(f,g){var y=this.snapToGrid(f,g,0);if(this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+y[1])}};break;case"l":this.calc=function(f,g){var y=this.snapToGrid(f,g,1);if(this.parameters.box.width-y[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+y[0],this.parameters.box.y).width(this.parameters.box.width-y[0])}};break;case"rot":this.calc=function(f,g){var y=f+this.parameters.p.x,x=g+this.parameters.p.y,S=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),M=Math.atan2(x-this.parameters.box.y-this.parameters.box.height/2,y-this.parameters.box.x-this.parameters.box.width/2),C=this.parameters.rotation+180*(M-S)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(C-C%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(f,g){var y=this.snapToGrid(f,g,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),x=this.el.array().valueOf();x[this.parameters.i][0]=this.parameters.pointCoords[0]+y[0],x[this.parameters.i][1]=this.parameters.pointCoords[1]+y[1],this.el.plot(x)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:r}),SVG.on(window,"touchmove.resize",function(f){a.update(f||window.event)}),SVG.on(window,"touchend.resize",function(){a.done()}),SVG.on(window,"mousemove.resize",function(f){a.update(f||window.event)}),SVG.on(window,"mouseup.resize",function(){a.done()})},V.prototype.update=function(r){if(r){var a=this._extractPosition(r),h=this.transformPoint(a.x,a.y),d=h.x-this.parameters.p.x,f=h.y-this.parameters.p.y;this.lastUpdateCall=[d,f],this.calc(d,f),this.el.fire("resizing",{dx:d,dy:f,event:r})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},V.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},V.prototype.snapToGrid=function(r,a,h,d){var f;return f=void 0!==d?[(h+r)%this.options.snapToGrid,(d+a)%this.options.snapToGrid]:[(this.parameters.box.x+r+(1&(h=h??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+a+(2&h?0:this.parameters.box.height))%this.options.snapToGrid],r<0&&(f[0]-=this.options.snapToGrid),a<0&&(f[1]-=this.options.snapToGrid),r-=Math.abs(f[0])<this.options.snapToGrid/2?f[0]:f[0]-(r<0?-this.options.snapToGrid:this.options.snapToGrid),a-=Math.abs(f[1])<this.options.snapToGrid/2?f[1]:f[1]-(a<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(r,a,h,d)},V.prototype.constraintToBox=function(r,a,h,d){var f,g,y=this.options.constraint||{};return void 0!==d?(f=h,g=d):(f=this.parameters.box.x+(1&h?0:this.parameters.box.width),g=this.parameters.box.y+(2&h?0:this.parameters.box.height)),void 0!==y.minX&&f+r<y.minX&&(r=y.minX-f),void 0!==y.maxX&&f+r>y.maxX&&(r=y.maxX-f),void 0!==y.minY&&g+a<y.minY&&(a=y.minY-g),void 0!==y.maxY&&g+a>y.maxY&&(a=y.maxY-g),[r,a]},V.prototype.checkAspectRatio=function(r,a){if(!this.options.saveAspectRatio)return r;var h=r.slice(),d=this.parameters.box.width/this.parameters.box.height,f=this.parameters.box.width+r[0],g=this.parameters.box.height-r[1],y=f/g;return y<d?(h[1]=f/d-this.parameters.box.height,a&&(h[1]=-h[1])):y>d&&(h[0]=this.parameters.box.width-g*d,a&&(h[0]=-h[0])),h},SVG.extend(SVG.Element,{resize:function(r){return(this.remember("_resizeHandler")||new V(this)).init(r||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Vr=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new On(this.ctx),this.ctx.axes=new Ye(this.ctx),this.ctx.core=new kn(this.ctx.el,this.ctx),this.ctx.config=new Gi({}),this.ctx.data=new Wi(this.ctx),this.ctx.grid=new We(this.ctx),this.ctx.graphics=new Q(this.ctx),this.ctx.coreUtils=new Lt(this.ctx),this.ctx.crosshairs=new Vs(this.ctx),this.ctx.events=new ai(this.ctx),this.ctx.exports=new Qe(this.ctx),this.ctx.localization=new ht(this.ctx),this.ctx.options=new Un,this.ctx.responsive=new pi(this.ctx),this.ctx.series=new un(this.ctx),this.ctx.theme=new Ho(this.ctx),this.ctx.formatters=new Zt(this.ctx),this.ctx.titleSubtitle=new si(this.ctx),this.ctx.legend=new _n(this.ctx),this.ctx.toolbar=new Sa(this.ctx),this.ctx.tooltip=new oi(this.ctx),this.ctx.dimensions=new kt(this.ctx),this.ctx.updateHelpers=new vu(this.ctx),this.ctx.zoomPanSelection=new jl(this.ctx),this.ctx.w.globals.tooltip=new oi(this.ctx)}}]),V}(),Xl=function(){function V(r){zt(this,V),this.ctx=r,this.w=r.w}return Dt(V,[{key:"clear",value:function(r){var a=r.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:a})}},{key:"killSVG",value:function(r){r.each(function(a,h){this.removeClass("*"),this.off(),this.stop()},!0),r.ungroup(),r.clear()}},{key:"clearDomElements",value:function(r){var a=this,d=this.w.globals.dom.Paper.node;d.parentNode&&d.parentNode.parentNode&&!r.isUpdating&&(d.parentNode.parentNode.style.minHeight="unset");var f=this.w.globals.dom.baseEl;f&&this.ctx.eventList.forEach(function(y){f.removeEventListener(y,a.ctx.events.documentEvent)});var g=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(g.Paper),g.Paper.remove(),g.elWrap=null,g.elGraphical=null,g.elLegendWrap=null,g.elLegendForeign=null,g.baseEl=null,g.elGridRect=null,g.elGridRectMask=null,g.elGridRectMarkerMask=null,g.elForecastMask=null,g.elNonForecastMask=null,g.elDefs=null}}]),V}(),Gr=new WeakMap,Gt=function(){function V(r,a){zt(this,V),this.opts=a,this.ctx=this,this.w=new Od(a).init(),this.el=r,this.w.globals.cuid=at.randomId(),this.w.globals.chartID=this.w.config.chart.id?at.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Vr(this).initModules(),this.create=at.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Dt(V,[{key:"render",value:function(){var r=this;return new Promise(function(a,h){if(null!==r.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),r.w.config.chart.id&&Apex._chartInstances.push({id:r.w.globals.chartID,group:r.w.config.chart.group,chart:r}),r.setLocale(r.w.config.chart.defaultLocale);var d=r.w.config.chart.events.beforeMount;if("function"==typeof d&&d(r,r.w),r.events.fireEvent("beforeMount",[r,r.w]),window.addEventListener("resize",r.windowResizeHandler),function(P,F){var O=!1;if(P.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var D=P.getBoundingClientRect();"none"!==P.style.display&&0!==D.width||(O=!0)}var Y=new ResizeObserver(function(G){O&&F.call(P,G),O=!0});P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(P.children).forEach(function(G){return Y.observe(G)}):Y.observe(P),Gr.set(F,Y)}(r.el.parentNode,r.parentResizeHandler),!r.css){var f=r.el.getRootNode&&r.el.getRootNode(),g=at.is("ShadowRoot",f),y=r.el.ownerDocument,x=y.getElementById("apexcharts-css");if(g||!x){var S;r.css=document.createElement("style"),r.css.id="apexcharts-css",r.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var M=(null===(S=r.opts.chart)||void 0===S?void 0:S.nonce)||r.w.config.chart.nonce;M&&r.css.setAttribute("nonce",M),g?f.prepend(r.css):y.head.appendChild(r.css)}}var C=r.create(r.w.config.series,{});if(!C)return a(r);r.mount(C).then(function(){"function"==typeof r.w.config.chart.events.mounted&&r.w.config.chart.events.mounted(r,r.w),r.events.fireEvent("mounted",[r,r.w]),a(C)}).catch(function(P){h(P)})}else h(new Error("Element not found"))})}},{key:"create",value:function(r,a){var h=this.w;new Vr(this).initModules();var d=this.w.globals;if(d.noData=!1,d.animationEnded=!1,this.responsive.checkResponsiveConfig(a),h.config.xaxis.convertedCatToNumeric&&new fr(h.config).convertCatToNumericXaxis(h.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===h.config.chart.type&&(h.config.grid.show=!1,h.config.yaxis[0].show=!1),0===d.svgWidth))return d.animationEnded=!0,null;var f=Lt.checkComboSeries(r);d.comboCharts=f.comboCharts,d.comboBarCount=f.comboBarCount;var g=r.every(function(M){return M.data&&0===M.data.length});(0===r.length||g)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(r),this.theme.init(),new Xo(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),d.noData&&d.collapsedSeries.length!==d.series.length&&!h.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),d.axisCharts&&(this.core.coreCalculations(),"category"!==h.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=h.globals.minX,this.ctx.toolbar.maxX=h.globals.maxX),this.formatters.heatmapLabelFormatters(),new Lt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var y=this.core.xySettings();this.grid.createGridMask();var x=this.core.plotChartType(r,y),S=new Kn(this);return S.bringForward(),h.config.dataLabels.background.enabled&&S.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:x,xyRatios:y,dimensions:{plot:{left:h.globals.translateX,top:h.globals.translateY,width:h.globals.gridWidth,height:h.globals.gridHeight}}}}},{key:"mount",value:function(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=this,d=h.w;return new Promise(function(f,g){if(null===h.el)return g(new Error("Not enough data to display or target element not found"));(null===a||d.globals.allSeriesCollapsed)&&h.series.handleNoData(),h.grid=new We(h);var y,x,S=h.grid.drawGrid();if(h.annotations=new Yo(h),h.annotations.drawImageAnnos(),h.annotations.drawTextAnnos(),"back"===d.config.grid.position&&(S&&d.globals.dom.elGraphical.add(S.el),null!=S&&null!==(y=S.elGridBorders)&&void 0!==y&&y.node&&d.globals.dom.elGraphical.add(S.elGridBorders)),Array.isArray(a.elGraph))for(var M=0;M<a.elGraph.length;M++)d.globals.dom.elGraphical.add(a.elGraph[M]);else d.globals.dom.elGraphical.add(a.elGraph);"front"===d.config.grid.position&&(S&&d.globals.dom.elGraphical.add(S.el),null!=S&&null!==(x=S.elGridBorders)&&void 0!==x&&x.node&&d.globals.dom.elGraphical.add(S.elGridBorders)),"front"===d.config.xaxis.crosshairs.position&&h.crosshairs.drawXCrosshairs(),"front"===d.config.yaxis[0].crosshairs.position&&h.crosshairs.drawYCrosshairs(),"treemap"!==d.config.chart.type&&h.axes.drawAxis(d.config.chart.type,S);var C=new Ii(r.ctx,S),P=new dt(r.ctx,S);if(null!==S&&(C.xAxisLabelCorrections(S.xAxisTickWidth),P.setYAxisTextAlignments(),d.config.yaxis.map(function(O,D){-1===d.globals.ignoreYAxisIndexes.indexOf(D)&&P.yAxisTitleRotate(D,O.opposite)})),h.annotations.drawAxesAnnotations(),!d.globals.noData){if(d.config.tooltip.enabled&&!d.globals.noData&&h.w.globals.tooltip.drawTooltip(a.xyRatios),d.globals.axisCharts&&(d.globals.isXNumeric||d.config.xaxis.convertedCatToNumeric||d.globals.isRangeBar))(d.config.chart.zoom.enabled||d.config.chart.selection&&d.config.chart.selection.enabled||d.config.chart.pan&&d.config.chart.pan.enabled)&&h.zoomPanSelection.init({xyRatios:a.xyRatios});else{var F=d.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(O){F[O]=!1})}d.config.chart.toolbar.show&&!d.globals.allSeriesCollapsed&&h.toolbar.createToolbar()}d.globals.memory.methodsToExec.length>0&&d.globals.memory.methodsToExec.forEach(function(O){O.method(O.params,!1,O.context)}),d.globals.axisCharts||d.globals.noData||h.core.resizeNonAxisCharts(),f(h)})}},{key:"destroy",value:function(){var r,a;window.removeEventListener("resize",this.windowResizeHandler),(a=Gr.get(r=this.parentResizeHandler))&&(a.disconnect(),Gr.delete(r));var h=this.w.config.chart.id;h&&Apex._chartInstances.forEach(function(d,f){d.id===at.escapeString(h)&&Apex._chartInstances.splice(f,1)}),new Xl(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(r){var a=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],y=this.w;return y.globals.selection=void 0,r.series&&(this.series.resetSeries(!1,!0,!1),r.series.length&&r.series[0].data&&(r.series=r.series.map(function(x,S){return a.updateHelpers._extendSeries(x,S)})),this.updateHelpers.revertDefaultAxisMinMax()),r.xaxis&&(r=this.updateHelpers.forceXAxisUpdate(r)),r.yaxis&&(r=this.updateHelpers.forceYAxisUpdate(r)),y.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),r.theme&&(r=this.theme.updateThemeOptions(r)),this.updateHelpers._updateOptions(r,h,d,f,g)}},{key:"updateSeries",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,a,h)}},{key:"appendSeries",value:function(r){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this.w.config.series.slice();return d.push(r),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,a,h)}},{key:"appendData",value:function(r){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this;h.w.globals.dataChanged=!0,h.series.getPreviousPaths();for(var d=h.w.config.series.slice(),f=0;f<d.length;f++)if(null!=r[f])for(var g=0;g<r[f].data.length;g++)d[f].data.push(r[f].data[g]);return h.w.config.series=d,a&&(h.w.globals.initialSeries=at.clone(h.w.config.series)),this.update()}},{key:"update",value:function(r){var a=this;return new Promise(function(h,d){new Xl(a.ctx).clear({isUpdating:!0});var f=a.create(a.w.config.series,r);if(!f)return h(a);a.mount(f).then(function(){"function"==typeof a.w.config.chart.events.updated&&a.w.config.chart.events.updated(a,a.w),a.events.fireEvent("updated",[a,a.w]),a.w.globals.isDirty=!0,h(a)}).catch(function(g){d(g)})})}},{key:"getSyncedCharts",value:function(){var r=this.getGroupedCharts(),a=[this];return r.length&&(a=[],r.forEach(function(h){a.push(h)})),a}},{key:"getGroupedCharts",value:function(){var r=this;return Apex._chartInstances.filter(function(a){if(a.group)return!0}).map(function(a){return r.w.config.chart.group===a.group?a.chart:r})}},{key:"toggleSeries",value:function(r){return this.series.toggleSeries(r)}},{key:"highlightSeriesOnLegendHover",value:function(r,a){return this.series.toggleSeriesOnHover(r,a)}},{key:"showSeries",value:function(r){this.series.showSeries(r)}},{key:"hideSeries",value:function(r){this.series.hideSeries(r)}},{key:"isSeriesHidden",value:function(r){this.series.isSeriesHidden(r)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(r,a){this.events.addEventListener(r,a)}},{key:"removeEventListener",value:function(r,a){this.events.removeEventListener(r,a)}},{key:"addXaxisAnnotation",value:function(r){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addXaxisAnnotationExternal(r,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"addYaxisAnnotation",value:function(r){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addYaxisAnnotationExternal(r,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"addPointAnnotation",value:function(r){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addPointAnnotationExternal(r,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"clearAnnotations",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=this;r&&(a=r),a.annotations.clearAnnotations(a)}},{key:"removeAnnotation",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=this;a&&(h=a),h.annotations.removeAnnotation(h,r)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(r,a){return this.coreUtils.getSeriesTotalsXRange(r,a)}},{key:"getHighestValueInSeries",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ei(this.ctx).getMinYMaxY(r).highestY}},{key:"getLowestValueInSeries",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ei(this.ctx).getMinYMaxY(r).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(r,a){return this.updateHelpers.toggleDataPointSelection(r,a)}},{key:"zoomX",value:function(r,a){this.ctx.toolbar.zoomUpdateOptions(r,a)}},{key:"setLocale",value:function(r){this.localization.setCurrentLocaleValues(r)}},{key:"dataURI",value:function(r){return new Qe(this.ctx).dataURI(r)}},{key:"exportToCSV",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Qe(this.ctx).exportToCSV(r)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var r=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){r.w.globals.resized=!0,r.w.globals.dataChanged=!1,r.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var r=this.w.config.chart.redrawOnWindowResize;"function"==typeof r&&(r=r()),r&&this._windowResize()}}],[{key:"getChartByID",value:function(r){var a=at.escapeString(r);if(Apex._chartInstances){var h=Apex._chartInstances.filter(function(d){return d.id===a})[0];return h&&h.chart}}},{key:"initOnLoad",value:function(){for(var r=document.querySelectorAll("[data-apexcharts]"),a=0;a<r.length;a++)new V(r[a],JSON.parse(r[a].getAttribute("data-options"))).render()}},{key:"exec",value:function(r,a){var h=this.getChartByID(r);if(h){h.w.globals.isExecCalled=!0;var d=null;if(-1!==h.publicMethods.indexOf(a)){for(var f=arguments.length,g=new Array(f>2?f-2:0),y=2;y<f;y++)g[y-2]=arguments[y];d=h[a].apply(h,g)}return d}}},{key:"merge",value:function(r,a){return at.extend(r,a)}}]),V}();return Gt}),function(){var L;function Et(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function be(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:Et(t)}}function zt(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var Dt,hu="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)Dt=Object.setPrototypeOf;else{var as;t:{var Yr={};try{Yr.__proto__={a:!0},as=Yr.a;break t}catch{}as=!1}Dt=as?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var wa=Dt;function Vt(t,e){if(t.prototype=hu(e.prototype),t.prototype.constructor=t,wa)wa(t,e);else for(var i in e)if("prototype"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.QA=e.prototype}var Tt=typeof global<"u"&&null!=global?global:self,uu="function"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hn="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function ba(t,e){if(e){var i=Tt;t=t.split(".");for(var n=0;n<t.length-1;n++){var s=t[n];s in i||(i[s]={}),i=i[s]}(e=e(n=i[t=t[t.length-1]]))!=n&&null!=e&&hn(i,t,{writable:!0,value:e})}}ba("Object.assign",function(t){return t||uu}),ba("Array.prototype.fill",function(t){return t||function(e,i,n){var s=this.length||0;for(0>i&&(i=Math.max(0,s+i)),(null==n||n>s)&&(n=s),0>(n=Number(n))&&(n=Math.max(0,s+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var St="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function dr(){}function at(t,e){var i=-1;return function(){var n=this,s=arguments;-1!==i&&St.clearTimeout(i),i=On(function(){i=-1,t.apply(n,s)},e)}}function On(t,e){return St.setTimeout(t,e)}function Ve(t){return St.document.createElement(t)}function Q(t){throw Error(t)}function Lt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),Q(t)}function ie(t,e,i,n){i=null===i?"*":"string"==typeof i?i:"function"==typeof i&&"string"==typeof i.className?i.className:"",void 0!==n&&(i+="."+n),Q(i+" is not in the range "+e+": "+t)}function Fi(t){St.console&&St.console.log(t)}function le(t){return"object"==typeof t&&null!==t}function Ge(t){return Array.isArray(t)||St.NodeList&&t instanceof St.NodeList||St.HTMLCollection&&t instanceof St.HTMLCollection}function Ro(t){return Array.prototype.slice.call(t)}function Un(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):Q("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function Yo(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):Q("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Xt(){var t=Xo.pop();return void 0===t?[]:t}function Zt(t){t.length=0,Xo.push(t)}function ws(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(le(t)&&t.constructor)return ws(t.constructor);return typeof t}function Vi(t){var e=t;return le(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function fr(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.DA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Gi(t,e,i){Object.defineProperty(me.prototype,t,{get:e,set:i})}function Jt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,s=0;s<t.length;s+=2)i[n++]=e[t.substr(s,2)];for(t=""===(t=i.join(""))?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)s=e[i],e[i]=e[n=(n+e[i]+119)%256],e[n]=s;n=i=0;for(var o="",l=0;l<t.length;l++)s=e[i=(i+1)%256],e[i]=e[n=(n+e[i])%256],e[n]=s,o+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return o}void 0===St.requestAnimationFrame&&(St.requestAnimationFrame=void 0===St.setImmediate?function(t){St.setTimeout(t,0)}:St.setImmediate);var Od=void 0!==St.navigator&&0<St.navigator.userAgent.indexOf("Trident/7"),wi=void 0!==St.navigator&&void 0!==St.navigator.platform&&null!==St.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),Xo=[];function ut(t,e,i){Ye(this),this.j=t,this.xa=e,this.o=i}function Kn(t,e){return null==e||""===e?null:t[e]}function un(){this.fw=[]}function Wi(){}Object.freeze([]),dr.className="Util",dr.Dx="32ab5ff3b26f42dc0ed90f21472913b5",dr.adym="gojs.net",dr.vfo="28e645fdb265",dr.className="Util",ut.prototype.toString=function(){return"EnumValue."+this.xa},Tt.Object.defineProperties(ut.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.xa}},value:{get:function(){return this.o}}}),ut.className="EnumValue",un.prototype.toString=function(){return this.fw.join("")},un.prototype.add=function(t){""!==t&&this.fw.push(t)},un.className="StringBuilder",Wi.className="PropertyCollection";var Ii,bs={FA:!1,KA:!1,HA:!1,JA:!1,OA:!1,MA:!1,ox:!1,GA:null,trace:function(t){St.console&&St.console.log(t)},IA:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},EA:function(t){var i,e={};for(i in t){if(e.x=i,"licenseKey"!==e.x){var n=t[e.x];if(void 0!==n.prototype){e.Zl=Object.getOwnPropertyNames(n.prototype);for(var s={Sj:0};s.Sj<e.Zl.length;(s={Sj:s.Sj}).Sj++){var o=Object.getOwnPropertyDescriptor(n.prototype,e.Zl[s.Sj]);void 0!==o.get&&void 0===o.set&&Object.defineProperty(n.prototype,e.Zl[s.Sj],{set:function(l,u){return function(){throw Error("Property "+l.Zl[u.Sj]+" of "+l.x+" is read-only.")}}(e,s)})}}}e={Zl:e.Zl,x:e.x}}}};function Qe(){}function We(t){this.key=-1,this.value=t}function Re(t){this.Cb=t,this.qf=null,t.Sa=null,this.qa=t.Ja,this.Za=-1}function ei(t){this.Cb=t,t.Hg=null,this.qa=t.Ja,this.Za=t.s.length}function dt(t){Ye(this),this._isFrozen=!1,this.s=[],this.Ja=0,this.Hg=this.Sa=null,"string"==typeof t&&Q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function ai(t){this.eg=t,t.Sa=null,this.qa=t.Ja,this.sa=null}function ht(t){Ye(this),this._isFrozen=!1,this.Ub={},this.Tb=0,this.Sa=null,this.Ja=0,this.kf=this.ea=null,"string"==typeof t&&Q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function Ye(t){t.__gohashid=Ho++}function Vs(t){var e=t.__gohashid;return void 0===e&&(e=Ho++,t.__gohashid=e),e}function pi(t){return t.__gohashid}Qe.prototype.reset=function(){},Qe.prototype.next=function(){return!1},Qe.prototype.Ad=function(){return!1},Qe.prototype.first=function(){return null},Qe.prototype.any=function(){return!1},Qe.prototype.all=function(){return!0},Qe.prototype.each=function(){return this},Qe.prototype.map=function(){return this},Qe.prototype.filter=function(){return this},Qe.prototype.de=function(){},Qe.prototype.toString=function(){return"EmptyIterator"},Tt.Object.defineProperties(Qe.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Qe.prototype.first=Qe.prototype.first,Qe.prototype.hasNext=Qe.prototype.Ad,Qe.prototype.next=Qe.prototype.next,Qe.prototype.reset=Qe.prototype.reset,Qe.className="EmptyIterator",Ii=new Qe,We.prototype.reset=function(){this.key=-1},We.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},We.prototype.Ad=function(){return this.next()},We.prototype.first=function(){return this.key=0,this.value},We.prototype.any=function(t){return this.key=-1,t(this.value)},We.prototype.all=function(t){return this.key=-1,t(this.value)},We.prototype.each=function(t){return this.key=-1,t(this.value),this},We.prototype.map=function(t){return new We(t(this.value))},We.prototype.filter=function(t){return t(this.value)?new We(this.value):Ii},We.prototype.de=function(){this.value=null},We.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Tt.Object.defineProperties(We.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),We.prototype.first=We.prototype.first,We.prototype.hasNext=We.prototype.Ad,We.prototype.next=We.prototype.next,We.prototype.reset=We.prototype.reset,We.className="SingletonIterator",Re.prototype.reset=function(){var t=this.Cb;t.Sa=null,this.qa=t.Ja,this.Za=-1},Re.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=(t=t.s).length,i=++this.Za,n=this.qf;if(null!==n)for(;i<e;){var s=t[i];if(n(s))return this.key=this.Za=i,this.value=s,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.de()}return!1},Re.prototype.Ad=function(){return this.next()},Re.prototype.first=function(){var t=this.Cb;this.qa=t.Ja,this.Za=0;var e=(t=t.s).length,i=this.qf;if(null!==i){for(var n=0;n<e;){var s=t[n];if(i(s))return this.key=this.Za=n,this.value=s;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Re.prototype.any=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,s=0;s<i;s++){var o=e[s];if((null===n||n(o))&&t(o))return!0}return!1},Re.prototype.all=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,s=0;s<i;s++){var o=e[s];if((null===n||n(o))&&!t(o))return!1}return!0},Re.prototype.each=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,s=0;s<i;s++){var o=e[s];(null===n||n(o))&&t(o)}return this},Re.prototype.map=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=[],n=(e=e.s).length,s=this.qf,o=0;o<n;o++){var l=e[o];(null===s||s(l))&&i.push(t(l))}return(t=new dt).s=i,t.yb(),t.iterator},Re.prototype.filter=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=[],n=(e=e.s).length,s=this.qf,o=0;o<n;o++){var l=e[o];(null===s||s(l))&&t(l)&&i.push(l)}return(t=new dt).s=i,t.yb(),t.iterator},Re.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.qf=null,this.Cb.Sa=this},Re.prototype.toString=function(){return"ListIterator@"+this.Za+"/"+this.Cb.count},Tt.Object.defineProperties(Re.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.qf},set:function(t){this.qf=t}},count:{get:function(){var t=this.qf;if(null!==t){for(var e=0,i=this.Cb.s,n=i.length,s=0;s<n;s++)t(i[s])&&e++;return e}return this.Cb.s.length}}}),Re.prototype.first=Re.prototype.first,Re.prototype.hasNext=Re.prototype.Ad,Re.prototype.next=Re.prototype.next,Re.prototype.reset=Re.prototype.reset,Re.className="ListIterator",ei.prototype.reset=function(){var t=this.Cb;t.Hg=null,this.qa=t.Ja,this.Za=t.s.length},ei.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=--this.Za;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.de(),!1)},ei.prototype.Ad=function(){return this.next()},ei.prototype.first=function(){var t=this.Cb;this.qa=t.Ja;var e=t.s;return this.Za=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},ei.prototype.any=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},ei.prototype.all=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},ei.prototype.each=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)t(e[i]);return this},ei.prototype.map=function(t){var e=this.Cb;e.Hg=null;var i=[],n=(e=e.s).length;for(this.Za=n,--n;0<=n;n--)i.push(t(e[n]));return(t=new dt).s=i,t.yb(),t.iterator},ei.prototype.filter=function(t){var e=this.Cb;e.Hg=null;var i=[],n=(e=e.s).length;for(this.Za=n,--n;0<=n;n--){var s=e[n];t(s)&&i.push(s)}return(t=new dt).s=i,t.yb(),t.iterator},ei.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.Cb.Hg=this},ei.prototype.toString=function(){return"ListIteratorBackwards("+this.Za+"/"+this.Cb.count+")"},Tt.Object.defineProperties(ei.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Cb.s.length}}}),ei.prototype.first=ei.prototype.first,ei.prototype.hasNext=ei.prototype.Ad,ei.prototype.next=ei.prototype.next,ei.prototype.reset=ei.prototype.reset,ei.className="ListIteratorBackwards",(L=dt.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return this._isFrozen=!1,this},L.toString=function(){return"List()#"+pi(this)},L.add=function(t){return null===t||(this._isFrozen&&Lt(this,t),this.s.push(t),this.yb()),this},L.push=function(t){this.add(t)},L.addAll=function(t){if(null===t)return this;this._isFrozen&&Lt(this);var e=this.s;if(Ge(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.yb(),this},L.clear=function(){this._isFrozen&&Lt(this),this.s.length=0,this.yb()},L.contains=function(t){return null!==t&&-1!==this.s.indexOf(t)},L.has=function(t){return this.contains(t)},L.indexOf=function(t){return null===t?-1:this.s.indexOf(t)},L.M=function(t){var e=this.s;return(0>t||t>=e.length)&&ie(t,"0 <= i < length",dt,"elt:i"),e[t]},L.get=function(t){return this.M(t)},L.cd=function(t,e){var i=this.s;(0>t||t>=i.length)&&ie(t,"0 <= i < length",dt,"setElt:i"),this._isFrozen&&Lt(this,t),i[t]=e},L.set=function(t,e){this.cd(t,e)},L.first=function(){var t=this.s;return 0===t.length?null:t[0]},L.kc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},L.pop=function(){this._isFrozen&&Lt(this);var t=this.s;return 0<t.length?t.pop():null},dt.prototype.any=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},dt.prototype.all=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},dt.prototype.each=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)t(e[n]);return this},dt.prototype.map=function(t){for(var e=new dt,i=[],n=this.s,s=n.length,o=0;o<s;o++)i.push(t(n[o]));return e.s=i,e.yb(),e},dt.prototype.filter=function(t){for(var e=new dt,i=[],n=this.s,s=n.length,o=0;o<s;o++){var l=n[o];t(l)&&i.push(l)}return e.s=i,e.yb(),e},(L=dt.prototype).Hb=function(t,e){0>t&&ie(t,">= 0",dt,"insertAt:i"),this._isFrozen&&Lt(this,t);var i=this.s;t>=i.length?i.push(e):i.splice(t,0,e),this.yb()},L.remove=function(t){if(null===t)return!1;this._isFrozen&&Lt(this,t);var e=this.s;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.yb(),!0)},L.delete=function(t){return this.remove(t)},L.mb=function(t){var e=this.s;(0>t||t>=e.length)&&ie(t,"0 <= i < length",dt,"removeAt:i"),this._isFrozen&&Lt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.yb()},L.removeRange=function(t,e){var i=this.s,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this._isFrozen&&Lt(this);for(var s=t,o=e+1;o<n;)i[s++]=i[o++];return i.length=n-(e-t+1),this.yb(),this},dt.prototype.copy=function(){var t=new dt,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},(L=dt.prototype).Fa=function(){for(var t=this.s,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},L.Jv=function(){for(var t=new ht,e=this.s,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},L.sort=function(t){return this._isFrozen&&Lt(this),this.s.sort(t),this.yb(),this},L.zi=function(t,e,i){var n=this.s,s=n.length;void 0===e&&(e=0),void 0===i&&(i=s),this._isFrozen&&Lt(this);var o=i-e;if(1>=o)return this;if((0>e||e>=s-1)&&ie(e,"0 <= from < length",dt,"sortRange:from"),2===o)return 0<t(i=n[e],s=n[e+1])&&(n[e]=s,n[e+1]=i,this.yb()),this;if(0===e)if(i>=s)n.sort(t);else for((e=n.slice(0,i)).sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=s)for((i=n.slice(e)).sort(t),t=e;t<s;t++)n[t]=i[t-e];else for((s=n.slice(e,i)).sort(t),t=e;t<i;t++)n[t]=s[t-e];return this.yb(),this},L.reverse=function(){return this._isFrozen&&Lt(this),this.s.reverse(),this.yb(),this},Tt.Object.defineProperties(dt.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Ii;var t=this.Sa;return null!==t?(t.reset(),t):new Re(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Ii;var t=this.Hg;return null!==t?(t.reset(),t):new ei(this)}}}),dt.prototype.reverse=dt.prototype.reverse,dt.prototype.sortRange=dt.prototype.zi,dt.prototype.sort=dt.prototype.sort,dt.prototype.toSet=dt.prototype.Jv,dt.prototype.toArray=dt.prototype.Fa,dt.prototype.removeRange=dt.prototype.removeRange,dt.prototype.removeAt=dt.prototype.mb,dt.prototype.delete=dt.prototype.delete,dt.prototype.remove=dt.prototype.remove,dt.prototype.insertAt=dt.prototype.Hb,dt.prototype.pop=dt.prototype.pop,dt.prototype.last=dt.prototype.kc,dt.prototype.first=dt.prototype.first,dt.prototype.set=dt.prototype.set,dt.prototype.setElt=dt.prototype.cd,dt.prototype.get=dt.prototype.get,dt.prototype.elt=dt.prototype.M,dt.prototype.indexOf=dt.prototype.indexOf,dt.prototype.has=dt.prototype.has,dt.prototype.contains=dt.prototype.contains,dt.prototype.clear=dt.prototype.clear,dt.prototype.addAll=dt.prototype.addAll,dt.prototype.push=dt.prototype.push,dt.prototype.add=dt.prototype.add,dt.prototype.thaw=dt.prototype.ka,dt.prototype.freeze=dt.prototype.freeze,dt.className="List",ai.prototype.reset=function(){var t=this.eg;t.Sa=null,this.qa=t.Ja,this.sa=null},ai.prototype.next=function(){var t=this.eg;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},ai.prototype.Ad=function(){return this.next()},ai.prototype.first=function(){var t=this.eg;if(this.qa=t.Ja,null!==(t=t.ea)){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},ai.prototype.any=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},ai.prototype.all=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},ai.prototype.each=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;)t(e.value),e=e.va;return this},ai.prototype.map=function(t){var e=this.eg;e.Sa=null;var i=new dt;for(e=e.ea;null!==e;)i.add(t(e.value)),e=e.va;return i.iterator},ai.prototype.filter=function(t){var e=this.eg;e.Sa=null;var i=new dt;for(e=e.ea;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},ai.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.eg.Sa=this},ai.prototype.toString=function(){return null!==this.sa?"SetIterator@"+this.sa.value:"SetIterator"},Tt.Object.defineProperties(ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.eg.Tb}}}),ai.prototype.first=ai.prototype.first,ai.prototype.hasNext=ai.prototype.Ad,ai.prototype.next=ai.prototype.next,ai.prototype.reset=ai.prototype.reset,ai.className="SetIterator",(L=ht.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return this._isFrozen=!1,this},L.toString=function(){return"Set()#"+pi(this)},L.add=function(t){if(null===t)return this;this._isFrozen&&Lt(this,t);var e=t;return le(t)&&(e=Vs(t)),void 0===this.Ub[e]&&(this.Tb++,t=new Xr(t,t),this.Ub[e]=t,null===(e=this.kf)?this.ea=t:(t.ll=e,e.va=t),this.kf=t,this.yb()),this},L.addAll=function(t){if(null===t)return this;if(this._isFrozen&&Lt(this),Ge(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},L.contains=function(t){if(null===t)return!1;var e=t;return(!le(t)||void 0!==(e=pi(t)))&&void 0!==this.Ub[e]},L.has=function(t){return this.contains(t)},L.Ty=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},L.Uy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},L.first=function(){var t=this.ea;return null===t?null:t.value},ht.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},ht.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},ht.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e.value),e=e.va;return this},ht.prototype.map=function(t){for(var e=new ht,i=this.ea;null!==i;)e.add(t(i.value)),i=i.va;return e},ht.prototype.filter=function(t){for(var e=new ht,i=this.ea;null!==i;){var n=i.value;t(n)&&e.add(n),i=i.va}return e},(L=ht.prototype).remove=function(t){if(null===t)return!1;this._isFrozen&&Lt(this,t);var e=t;if(le(t)&&void 0===(e=pi(t))||void 0===(t=this.Ub[e]))return!1;var i=t.va,n=t.ll;return null!==i&&(i.ll=n),null!==n&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Ub[e],this.Tb--,this.yb(),!0},L.delete=function(t){return this.remove(t)},L.hp=function(t){if(null===t)return this;if(this._isFrozen&&Lt(this),Ge(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},L.qA=function(t){if(null===t||0===this.count)return this;this._isFrozen&&Lt(this);var e=new ht;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.hp(t),this},L.clear=function(){this._isFrozen&&Lt(this),this.Ub={},this.Tb=0,null!==this.Sa&&this.Sa.reset(),this.kf=this.ea=null,this.yb()},ht.prototype.copy=function(){var i,t=new ht,e=this.Ub;for(i in e)t.add(e[i].value);return t},ht.prototype.Fa=function(){var n,t=Array(this.Tb),e=this.Ub,i=0;for(n in e)t[i]=e[n].value,i++;return t},ht.prototype.Iv=function(){var i,t=new dt,e=this.Ub;for(i in e)t.add(e[i].value);return t},Tt.Object.defineProperties(ht.prototype,{count:{get:function(){return this.Tb}},size:{get:function(){return this.Tb}},iterator:{get:function(){if(0>=this.Tb)return Ii;var t=this.Sa;return null!==t?(t.reset(),t):new ai(this)}}}),ht.prototype.toList=ht.prototype.Iv,ht.prototype.toArray=ht.prototype.Fa,ht.prototype.clear=ht.prototype.clear,ht.prototype.retainAll=ht.prototype.qA,ht.prototype.removeAll=ht.prototype.hp,ht.prototype.delete=ht.prototype.delete,ht.prototype.remove=ht.prototype.remove,ht.prototype.first=ht.prototype.first,ht.prototype.containsAny=ht.prototype.Uy,ht.prototype.containsAll=ht.prototype.Ty,ht.prototype.has=ht.prototype.has,ht.prototype.contains=ht.prototype.contains,ht.prototype.addAll=ht.prototype.addAll,ht.prototype.add=ht.prototype.add,ht.prototype.thaw=ht.prototype.ka,ht.prototype.freeze=ht.prototype.freeze;var _n,Sa,jl,ka,Ma,Ho=1;function si(t){this.ma=t,this.qa=t.Ja,this.sa=null}function ve(t){ht.call(this),Ye(this),this._isFrozen=!0,this.ma=t}function li(t){this.ma=t,t.jf=null,this.qa=t.Ja,this.sa=null}function Xr(t,e){this.key=t,this.value=e,this.ll=this.va=null}function hi(t){this.ma=t,t.Sa=null,this.qa=t.Ja,this.sa=null}function kt(t){Ye(this),this._isFrozen=!1,this.Ub={},this.Tb=0,this.jf=this.Sa=null,this.Ja=0,this.kf=this.ea=null,"string"==typeof t&&Q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function z(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):Q("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}function Dl(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var s=0;""===t[e];)e++;return(n=t[e++])&&(s=parseFloat(n)),new z(i,s)}return new z}function cu(t){return t.x.toString()+" "+t.y.toString()}function du(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function ui(t,e){return e.Cd(t),t}function oi(t,e,i,n,s,o){var l=s-i,u=o-n,c=l*l+u*u,p=-(i-=t)*l-(n-=e)*u;return 0>=p||p>=c?(l=s-t,u=o-e,Math.min(i*i+n*n,l*l+u*u)):(t=l*n-u*i)*t/c}function ls(t,e,i,n){return(t=i-t)*t+(e=n-e)*e}function zl(t,e,i,n){return e=n-e,0==(t=i-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}ht.className="Set",ht.uniqueHash=Ye,ht.hashIdUnique=Vs,ht.hashId=pi,si.prototype.reset=function(){this.qa=this.ma.Ja,this.sa=null},si.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=this.key=t=e.key,!0):(this.de(),!1)},si.prototype.Ad=function(){return this.next()},si.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,null!==(t=t.ea)?(this.sa=t,this.value=this.key=t=t.key):null},si.prototype.any=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;){if(t(e.key))return!0;e=e.va}return!1},si.prototype.all=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;){if(!t(e.key))return!1;e=e.va}return!0},si.prototype.each=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;)t(e.key),e=e.va;return this},si.prototype.map=function(t){var e=this.ma;this.sa=null;var i=new dt;for(e=e.ea;null!==e;)i.add(t(e.key)),e=e.va;return i.iterator},si.prototype.filter=function(t){var e=this.ma;this.sa=null;var i=new dt;for(e=e.ea;null!==e;){var n=e.key;t(n)&&i.add(n),e=e.va}return i.iterator},si.prototype.de=function(){this.value=this.key=null,this.qa=-1},si.prototype.toString=function(){return null!==this.sa?"MapKeySetIterator@"+this.sa.value:"MapKeySetIterator"},Tt.Object.defineProperties(si.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),si.prototype.first=si.prototype.first,si.prototype.hasNext=si.prototype.Ad,si.prototype.next=si.prototype.next,si.prototype.reset=si.prototype.reset,si.className="MapKeySetIterator",Vt(ve,ht),(L=ve.prototype).freeze=function(){return this},L.ka=function(){return this},L.toString=function(){return"MapKeySet("+this.ma.toString()+")"},L.add=function(){Q("This Set is read-only: "+this.toString())},L.contains=function(t){return this.ma.contains(t)},L.has=function(t){return this.contains(t)},L.remove=function(){Q("This Set is read-only: "+this.toString())},L.delete=function(t){return this.remove(t)},L.clear=function(){Q("This Set is read-only: "+this.toString())},L.first=function(){var t=this.ma.ea;return null!==t?t.key:null},ve.prototype.any=function(t){for(var e=this.ma.ea;null!==e;){if(t(e.key))return!0;e=e.va}return!1},ve.prototype.all=function(t){for(var e=this.ma.ea;null!==e;){if(!t(e.key))return!1;e=e.va}return!0},ve.prototype.each=function(t){for(var e=this.ma.ea;null!==e;)t(e.key),e=e.va;return this},ve.prototype.map=function(t){for(var e=new ht,i=this.ma.ea;null!==i;)e.add(t(i.key)),i=i.va;return e},ve.prototype.filter=function(t){for(var e=new ht,i=this.ma.ea;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.va}return e},ve.prototype.copy=function(){return new ve(this.ma)},ve.prototype.Jv=function(){var i,t=new ht,e=this.ma.Ub;for(i in e)t.add(e[i].key);return t},ve.prototype.Fa=function(){var n,t=this.ma.Ub,e=Array(this.ma.Tb),i=0;for(n in t)e[i]=t[n].key,i++;return e},ve.prototype.Iv=function(){var i,t=new dt,e=this.ma.Ub;for(i in e)t.add(e[i].key);return t},Tt.Object.defineProperties(ve.prototype,{count:{get:function(){return this.ma.Tb}},size:{get:function(){return this.ma.Tb}},iterator:{get:function(){return 0>=this.ma.Tb?Ii:new si(this.ma)}}}),ve.prototype.toList=ve.prototype.Iv,ve.prototype.toArray=ve.prototype.Fa,ve.prototype.toSet=ve.prototype.Jv,ve.prototype.first=ve.prototype.first,ve.prototype.clear=ve.prototype.clear,ve.prototype.delete=ve.prototype.delete,ve.prototype.remove=ve.prototype.remove,ve.prototype.has=ve.prototype.has,ve.prototype.contains=ve.prototype.contains,ve.prototype.add=ve.prototype.add,ve.prototype.thaw=ve.prototype.ka,ve.prototype.freeze=ve.prototype.freeze,ve.className="MapKeySet",li.prototype.reset=function(){var t=this.ma;t.jf=null,this.qa=t.Ja,this.sa=null},li.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},li.prototype.Ad=function(){return this.next()},li.prototype.first=function(){var t=this.ma;if(this.qa=t.Ja,null!==(t=t.ea)){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},li.prototype.any=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},li.prototype.all=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},li.prototype.each=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;)t(e.value),e=e.va;return this},li.prototype.map=function(t){var e=this.ma;this.sa=e.jf=null;var i=new dt;for(e=e.ea;null!==e;)i.add(t(e.value)),e=e.va;return i.iterator},li.prototype.filter=function(t){var e=this.ma;this.sa=e.jf=null;var i=new dt;for(e=e.ea;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},li.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.jf=this},li.prototype.toString=function(){return null!==this.sa?"MapValueSetIterator@"+this.sa.value:"MapValueSetIterator"},Tt.Object.defineProperties(li.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),li.prototype.first=li.prototype.first,li.prototype.hasNext=li.prototype.Ad,li.prototype.next=li.prototype.next,li.prototype.reset=li.prototype.reset,li.className="MapValueSetIterator",Xr.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Xr.className="KeyValuePair",hi.prototype.reset=function(){var t=this.ma;t.Sa=null,this.qa=t.Ja,this.sa=null},hi.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.key=e.key,this.value=e.value,!0):(this.de(),!1)},hi.prototype.Ad=function(){return this.next()},hi.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,null!==(t=t.ea)?(this.sa=t,this.key=t.key,this.value=t.value,t):null},hi.prototype.any=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(t(e))return!0;e=e.va}return!1},hi.prototype.all=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(!t(e))return!1;e=e.va}return!0},hi.prototype.each=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;)t(e),e=e.va;return this},hi.prototype.map=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new dt;for(e=e.ea;null!==e;)i.add(t(e)),e=e.va;return i.iterator},hi.prototype.filter=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new dt;for(e=e.ea;null!==e;)t(e)&&i.add(e),e=e.va;return i.iterator},hi.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.Sa=this},hi.prototype.toString=function(){return null!==this.sa?"MapIterator@"+this.sa:"MapIterator"},Tt.Object.defineProperties(hi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),hi.prototype.first=hi.prototype.first,hi.prototype.hasNext=hi.prototype.Ad,hi.prototype.next=hi.prototype.next,hi.prototype.reset=hi.prototype.reset,hi.className="MapIterator",(L=kt.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return this._isFrozen=!1,this},L.toString=function(){return"Map()#"+pi(this)},L.add=function(t,e){this._isFrozen&&Lt(this,t);var i=t;le(t)&&(i=Vs(t));var n=this.Ub[i];return void 0===n?(this.Tb++,t=new Xr(t,e),this.Ub[i]=t,null===(i=this.kf)?this.ea=t:(t.ll=i,i.va=t),this.kf=t,this.yb()):n.value=e,this},L.set=function(t,e){return this.add(t,e)},L.addAll=function(t){if(null===t)return this;if(Ge(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof kt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},L.first=function(){return this.ea},kt.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e))return!0;e=e.va}return!1},kt.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e))return!1;e=e.va}return!0},kt.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e),e=e.va;return this},kt.prototype.map=function(t){for(var e=new kt,i=this.ea;null!==i;)e.add(i.key,t(i)),i=i.va;return e},kt.prototype.filter=function(t){for(var e=new kt,i=this.ea;null!==i;)t(i)&&e.add(i.key,i.value),i=i.va;return e},(L=kt.prototype).contains=function(t){var e=t;return(!le(t)||void 0!==(e=pi(t)))&&void 0!==this.Ub[e]},L.has=function(t){return this.contains(t)},L.I=function(t){var e=t;return le(t)&&void 0===(e=pi(t))||void 0===(t=this.Ub[e])?null:t.value},L.get=function(t){return this.I(t)},L.remove=function(t){if(null===t)return!1;this._isFrozen&&Lt(this,t);var e=t;if(le(t)&&void 0===(e=pi(t))||void 0===(t=this.Ub[e]))return!1;var i=t.va,n=t.ll;return null!==i&&(i.ll=n),null!==n&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Ub[e],this.Tb--,this.yb(),!0},L.delete=function(t){return this.remove(t)},L.clear=function(){this._isFrozen&&Lt(this),this.Ub={},this.Tb=0,null!==this.Sa&&this.Sa.reset(),null!==this.jf&&this.jf.reset(),this.kf=this.ea=null,this.yb()},kt.prototype.copy=function(){var i,t=new kt,e=this.Ub;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},kt.prototype.Fa=function(){var n,t=this.Ub,e=Array(this.Tb),i=0;for(n in t){var s=t[n];e[i]=new Xr(s.key,s.value),i++}return e},kt.prototype.Lf=function(){return new ve(this)},Tt.Object.defineProperties(kt.prototype,{count:{get:function(){return this.Tb}},size:{get:function(){return this.Tb}},iterator:{get:function(){if(0>=this.count)return Ii;var t=this.Sa;return null!==t?(t.reset(),t):new hi(this)}},iteratorKeys:{get:function(){return 0>=this.count?Ii:new si(this)}},iteratorValues:{get:function(){if(0>=this.count)return Ii;var t=this.jf;return null!==t?(t.reset(),t):new li(this)}}}),kt.prototype.toKeySet=kt.prototype.Lf,kt.prototype.toArray=kt.prototype.Fa,kt.prototype.clear=kt.prototype.clear,kt.prototype.delete=kt.prototype.delete,kt.prototype.remove=kt.prototype.remove,kt.prototype.get=kt.prototype.get,kt.prototype.getValue=kt.prototype.I,kt.prototype.has=kt.prototype.has,kt.prototype.contains=kt.prototype.contains,kt.prototype.first=kt.prototype.first,kt.prototype.addAll=kt.prototype.addAll,kt.prototype.set=kt.prototype.set,kt.prototype.add=kt.prototype.add,kt.prototype.thaw=kt.prototype.ka,kt.prototype.freeze=kt.prototype.freeze,kt.className="Map",z.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},z.prototype.h=function(t,e){return this.x=t,this.y=e,this},z.prototype.sg=function(t,e){return this.x=t,this.y=e,this},z.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},z.prototype.copy=function(){var t=new z;return t.x=this.x,t.y=this.y,t},(L=z.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},L.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this},L.toString=function(){return"Point("+this.x+","+this.y+")"},L.D=function(t){return t instanceof z&&this.x===t.x&&this.y===t.y},L.hi=function(t,e){return this.x===t&&this.y===e},L.Xa=function(t){return _.B(this.x,t.x)&&_.B(this.y,t.y)},L.add=function(t){return this.x+=t.x,this.y+=t.y,this},L.re=function(t){return this.x-=t.x,this.y-=t.y,this},L.offset=function(t,e){return this.x+=t,this.y+=e,this},z.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},(L=z.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},L.Bf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},L.zd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},L.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},L.ab=function(t){return du(t.x-this.x,t.y-this.y)},L.direction=function(t,e){return du(t-this.x,e-this.y)},L.Sy=function(t,e){return _.Fl(t.x,t.y,e.x,e.y,this.x,this.y)},L.gA=function(t,e,i,n){return _.qh(t,e,i,n,this.x,this.y,this),this},L.hA=function(t,e){return _.qh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},L.vA=function(t,e,i,n){return _.No(this.x,this.y,t,e,i,n,this),this},L.wA=function(t,e){return _.No(this.x,this.y,t.x,t.y,e.width,e.height,this),this},L.xi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},L.yi=function(t,e,i,n,s){return this.x=t+s.x*i+s.offsetX,this.y=e+s.y*n+s.offsetY,this},L.transform=function(t){return t.Ga(this),this},L.w=function(){return isFinite(this.x)&&isFinite(this.y)},z.alloc=function(){var t=ao.pop();return void 0===t?new z:t},z.allocAt=function(t,e){var i=ao.pop();return void 0===i?new z(t,e):(i.x=t,i.y=e,i)},z.free=function(t){ao.push(t)},z.prototype.isReal=z.prototype.w,z.prototype.setSpot=z.prototype.yi,z.prototype.setRectSpot=z.prototype.xi,z.prototype.snapToGridPoint=z.prototype.wA,z.prototype.snapToGrid=z.prototype.vA,z.prototype.projectOntoLineSegmentPoint=z.prototype.hA,z.prototype.projectOntoLineSegment=z.prototype.gA,z.intersectingLineSegments=function(t,e,i,n,s,o,l,u){return _.Rl(t,e,i,n,s,o,l,u)},z.prototype.compareWithLineSegmentPoint=z.prototype.Sy,z.compareWithLineSegment=function(t,e,i,n,s,o){return _.Fl(t,e,i,n,s,o)},z.prototype.direction=z.prototype.direction,z.prototype.directionPoint=z.prototype.ab,z.prototype.normalize=z.prototype.normalize,z.prototype.distanceSquared=z.prototype.zd,z.prototype.distanceSquaredPoint=z.prototype.Bf,z.prototype.scale=z.prototype.scale,z.prototype.rotate=z.prototype.rotate,z.prototype.offset=z.prototype.offset,z.prototype.subtract=z.prototype.re,z.prototype.add=z.prototype.add,z.prototype.equalsApprox=z.prototype.Xa,z.prototype.equalTo=z.prototype.hi,z.prototype.equals=z.prototype.D,z.prototype.set=z.prototype.set,z.prototype.setTo=z.prototype.sg;var Gs,Hr,Bl,lo,Rl,Yl,Ca,ao=[];function Mt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):Q("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}function fu(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var s=0;""===t[e];)e++;return(n=t[e++])&&(s=parseFloat(n)),new Mt(i,s)}return new Mt}function pu(t){return t.width.toString()+" "+t.height.toString()}z.className="Point",z.parse=Dl,z.stringify=cu,z.distanceLineSegmentSquared=oi,z.distanceSquared=ls,z.direction=zl,z.Origin=_n=new z(0,0).ja(),z.InfiniteTopLeft=Sa=new z(-1/0,-1/0).ja(),z.InfiniteBottomRight=jl=new z(1/0,1/0).ja(),z.SixPoint=ka=new z(6,6).ja(),z.NoPoint=Ma=new z(NaN,NaN).ja(),z.parse=Dl,z.stringify=cu,z.distanceLineSegmentSquared=oi,z.distanceSquared=ls,z.direction=zl,Mt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Mt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Mt.prototype.sg=function(t,e){return this.width=t,this.height=e,this},Mt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Mt.prototype.copy=function(){var t=new Mt;return t.width=this.width,t.height=this.height,t},(L=Mt.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},L.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this},L.toString=function(){return"Size("+this.width+","+this.height+")"},L.D=function(t){return t instanceof Mt&&this.width===t.width&&this.height===t.height},L.hi=function(t,e){return this.width===t&&this.height===e},L.Xa=function(t){return _.B(this.width,t.width)&&_.B(this.height,t.height)},L.Bc=function(t,e){return this.width=0<=(t=this.width+t)?t:0,this.height=0<=(e=this.height+e)?e:0,this},L.w=function(){return isFinite(this.width)&&isFinite(this.height)},Mt.alloc=function(){var t=gu.pop();return void 0===t?new Mt:t},Mt.free=function(t){gu.push(t)},Mt.prototype.isReal=Mt.prototype.w,Mt.prototype.inflate=Mt.prototype.Bc,Mt.prototype.equalsApprox=Mt.prototype.Xa,Mt.prototype.equalTo=Mt.prototype.hi,Mt.prototype.equals=Mt.prototype.D,Mt.prototype.set=Mt.prototype.set,Mt.prototype.setTo=Mt.prototype.sg;var gu=[];function q(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&(0<=i||isNaN(i))&&"number"==typeof n&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof z?(i=t.x,t=t.y,e instanceof z?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof Mt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):Q("Incorrect second argument supplied to Rect constructor "+e)):Q("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}function Zn(t,e,i){t.width=e,t.height=i}function Aa(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var s=0;""===t[e];)e++;(n=t[e++])&&(s=parseFloat(n));for(var o=0;""===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var l=0;""===t[e];)e++;return(n=t[e++])&&(l=parseFloat(n)),new q(i,s,o,l)}return new q}function Pa(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function hs(t,e){return _.$(t.x,e.x)&&_.$(t.y,e.y)&&_.$(t.width,e.width)&&_.$(t.height,e.height)}function ho(t,e,i,n,s){var o=t.width;return i+s<=-o?(t.x+=o/2,t.width=0):(t.x-=s,t.width+=i+s),e+n<=-(i=t.height)?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function mu(t,e,i,n,s){var o=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+s),t.x=o,t.y=l,t.width=Math.max(0,e-o),t.height=Math.max(0,i-l),t}function yu(t,e){var i=t.width,n=t.x,s=e.x-10;return!(n>e.width+10+10+s||s>i+n||(i=t.height,(t=t.y)>e.height+10+10+(n=e.y-10)||n>i+t))}function Ze(t,e,i,n,s){var o=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+s),t.x=o,t.y=l,t.width=e-o,t.height=i-l,t}function kn(t,e,i,n,s,o,l,u){return void 0===l&&(l=0),void 0===u&&(u=0),t<=s&&s+l<=t+i&&e<=o&&o+u<=e+n}function vu(t,e,i,n,s,o,l,u){return!(t>l+s||s>i+t||e>u+o||o>n+e)}Mt.className="Size",Mt.parse=fu,Mt.stringify=pu,Mt.ZeroSize=Gs=new Mt(0,0).ja(),Mt.OneSize=Hr=new Mt(1,1).ja(),Mt.SixSize=Bl=new Mt(6,6).ja(),Mt.EightSize=lo=new Mt(8,8).ja(),Mt.TenSize=Rl=new Mt(10,10).ja(),Mt.InfiniteSize=Yl=new Mt(1/0,1/0).ja(),Mt.NoSize=Ca=new Mt(NaN,NaN).ja(),Mt.parse=fu,Mt.stringify=pu,(L=q.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},L.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},L.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},L.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},L.dd=function(t){return this.x=t.x,this.y=t.y,this},L.uA=function(t){return this.width=t.width,this.height=t.height,this},q.prototype.copy=function(){var t=new q;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(L=q.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},L.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this},L.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},L.D=function(t){return t instanceof q&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},L.hi=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},L.Xa=function(t){return _.B(this.x,t.x)&&_.B(this.y,t.y)&&_.B(this.width,t.width)&&_.B(this.height,t.height)},L.ca=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},L.Re=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},L.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},L.offset=function(t,e){return this.x+=t,this.y+=e,this},L.Bc=function(t,e){return ho(this,e,t,e,t)},L.Co=function(t){return ho(this,t.top,t.right,t.bottom,t.left)},L.Gv=function(t){return ho(this,-t.top,-t.right,-t.bottom,-t.left)},L.Iz=function(t,e,i,n){return ho(this,t,e,i,n)},L.Fx=function(t){return mu(this,t.x,t.y,t.width,t.height)},L.Vu=function(t,e,i,n){return mu(this,t,e,i,n)},L.Yc=function(t){return this.Wu(t.x,t.y,t.width,t.height)},L.Wu=function(t,e,i,n){var s=this.width,o=this.x;return!(s!==1/0&&i!==1/0&&(s+=o,i+=t,isNaN(i)||isNaN(s)||o>i||t>s)||(i=this.y,(t=this.height)!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},L.Ye=function(t){return Ze(this,t.x,t.y,0,0)},L.ed=function(t){return Ze(this,t.x,t.y,t.width,t.height)},L.Lv=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),Ze(this,t,e,i,n)},L.yi=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this},L.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},L.Nz=function(){return 0===this.width&&0===this.height},q.alloc=function(){var t=Gr.pop();return void 0===t?new q:t},q.allocAt=function(t,e,i,n){var s=Gr.pop();return void 0===s?new q(t,e,i,n):s.h(t,e,i,n)},q.free=function(t){Gr.push(t)},Tt.Object.defineProperties(q.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new z(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Mt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new z(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),q.prototype.isEmpty=q.prototype.Nz,q.prototype.isReal=q.prototype.w,q.intersectsLineSegment=function(t,e,i,n,s,o,l,u){return _.Gx(t,e,i,n,s,o,l,u)},q.prototype.setSpot=q.prototype.yi,q.prototype.union=q.prototype.Lv,q.prototype.unionRect=q.prototype.ed,q.prototype.unionPoint=q.prototype.Ye,q.prototype.intersects=q.prototype.Wu,q.prototype.intersectsRect=q.prototype.Yc,q.prototype.intersect=q.prototype.Vu,q.prototype.intersectRect=q.prototype.Fx,q.prototype.grow=q.prototype.Iz,q.prototype.subtractMargin=q.prototype.Gv,q.prototype.addMargin=q.prototype.Co,q.prototype.inflate=q.prototype.Bc,q.prototype.offset=q.prototype.offset,q.prototype.contains=q.prototype.contains,q.prototype.containsRect=q.prototype.Re,q.prototype.containsPoint=q.prototype.ca,q.prototype.equalsApprox=q.prototype.Xa,q.prototype.equalTo=q.prototype.hi,q.prototype.equals=q.prototype.D,q.prototype.setSize=q.prototype.uA,q.prototype.setPoint=q.prototype.dd,q.prototype.set=q.prototype.set,q.prototype.setTo=q.prototype.sg;var Vr,Xl=null,Gr=[];function Gt(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):Q("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}function V(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=NaN;""===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Gt;for(var s=NaN;""===t[e];)e++;if((n=t[e++])&&(s=parseFloat(n)),isNaN(s))return new Gt(i);for(var o=NaN;""===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Gt(i,s);for(var l=NaN;""===t[e];)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new Gt(i,s):new Gt(i,s,o,l)}return new Gt}function r(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}q.className="Rect",q.parse=Aa,q.stringify=Pa,q.contains=kn,q.intersects=vu,q.ZeroRect=Vr=new q(0,0,0,0).ja(),q.NoRect=Xl=new q(NaN,NaN,NaN,NaN).ja(),q.parse=Aa,q.stringify=Pa,q.contains=kn,q.intersects=vu,Gt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Gt.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Gt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Gt.prototype.copy=function(){var t=new Gt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(L=Gt.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},L.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this},L.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},L.D=function(t){return t instanceof Gt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},L.hi=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},L.Xa=function(t){return _.B(this.top,t.top)&&_.B(this.right,t.right)&&_.B(this.bottom,t.bottom)&&_.B(this.left,t.left)},L.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Gt.alloc=function(){var t=d.pop();return void 0===t?new Gt:t},Gt.free=function(t){d.push(t)},Gt.prototype.isReal=Gt.prototype.w,Gt.prototype.equalsApprox=Gt.prototype.Xa,Gt.prototype.equalTo=Gt.prototype.hi,Gt.prototype.equals=Gt.prototype.D,Gt.prototype.set=Gt.prototype.set,Gt.prototype.setTo=Gt.prototype.sg;var g,y,x,S,M,C,P,F,O,D,Y,G,U,b,N,E,X,W,Z,et,it,pt,wt,xt,Ft,Nt,_t,ne,oe,ue,re,ce,Le,Te,En,us,a=null,h=null,d=[];function f(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this._isFrozen=!1}function Ne(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function zi(t){if("string"==typeof t){if("None"===(t=t.trim()))return g;if("TopLeft"===t)return y;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return x;if("TopRight"===t)return S;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return M;if("Center"===t)return C;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return P;if("BottomLeft"===t)return F;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return O;if("BottomRight"===t)return D;if("TopSide"===t)return Y;if("LeftSide"===t)return G;if("RightSide"===t)return U;if("BottomSide"===t)return b;if("TopBottomSides"===t)return N;if("LeftRightSides"===t)return E;if("TopLeftSides"===t)return X;if("TopRightSides"===t)return W;if("BottomLeftSides"===t)return Z;if("BottomRightSides"===t)return et;if("NotTopSide"===t)return it;if("NotLeftSide"===t)return pt;if("NotRightSide"===t)return wt;if("NotBottomSide"===t)return xt;if("AllSides"===t)return Ft;if("Default"===t)return Nt;t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var s=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(s=parseFloat(n));for(var o=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(o=parseFloat(n));for(var l=0;""===t[e];)e++;return void 0!==(n=t[e++])&&0<n.length&&(l=parseFloat(n)),new f(i,s,o,l)}return new f}function Hl(t){return t.sb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Gt.className="Margin",Gt.parse=V,Gt.stringify=r,Gt.ZeroMargin=a=new Gt(0,0,0,0).ja(),Gt.TwoMargin=h=new Gt(2,2,2,2).ja(),Gt.parse=V,Gt.stringify=r,f.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},f.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},f.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},f.prototype.copy=function(){var t=new f;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(L=f.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},L.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this},L.toString=function(){return this.sb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.D(g)?"None":this.D(y)?"TopLeft":this.D(x)?"Top":this.D(S)?"TopRight":this.D(M)?"Left":this.D(C)?"Center":this.D(P)?"Right":this.D(F)?"BottomLeft":this.D(O)?"Bottom":this.D(D)?"BottomRight":this.D(Y)?"TopSide":this.D(G)?"LeftSide":this.D(U)?"RightSide":this.D(b)?"BottomSide":this.D(N)?"TopBottomSides":this.D(E)?"LeftRightSides":this.D(X)?"TopLeftSides":this.D(W)?"TopRightSides":this.D(Z)?"BottomLeftSides":this.D(et)?"BottomRightSides":this.D(it)?"NotTopSide":this.D(pt)?"NotLeftSide":this.D(wt)?"NotRightSide":this.D(xt)?"NotBottomSide":this.D(Ft)?"AllSides":this.D(Nt)?"Default":"None"},L.D=function(t){return t instanceof f&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},L.hv=function(){return new f(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},L.Hf=function(t){if(!this.$c())return!1;if(!t.$c())if(t.D(_t))t=G;else if(t.D(ne))t=U;else if(t.D(oe))t=Y;else{if(!t.D(ue))return!1;t=b}return(this.offsetY&(t=t.offsetY))===t},L.sb=function(){return!isNaN(this.x)&&!isNaN(this.y)},L.Mc=function(){return isNaN(this.x)||isNaN(this.y)},L.$c=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},L.ys=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},L.Yb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},f.alloc=function(){var t=wg.pop();return void 0===t?new f:t},f.free=function(t){wg.push(t)},f.prototype.isDefault=f.prototype.Yb,f.prototype.isNone=f.prototype.ys,f.prototype.isSide=f.prototype.$c,f.prototype.isNoSpot=f.prototype.Mc,f.prototype.isSpot=f.prototype.sb,f.prototype.includesSide=f.prototype.Hf,f.prototype.opposite=f.prototype.hv,f.prototype.equals=f.prototype.D,f.prototype.set=f.prototype.set,f.prototype.setTo=f.prototype.sg;var wg=[];function Ot(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}f.className="Spot",f.parse=zi,f.stringify=Hl,f.None=g=Ne(new f(0,0,0,0),0).ja(),f.Default=Nt=Ne(new f(0,0,-1,0),-1).ja(),f.TopLeft=y=new f(0,0,0,0).ja(),f.TopCenter=x=new f(.5,0,0,0).ja(),f.TopRight=S=new f(1,0,0,0).ja(),f.LeftCenter=M=new f(0,.5,0,0).ja(),f.Center=C=new f(.5,.5,0,0).ja(),f.RightCenter=P=new f(1,.5,0,0).ja(),f.BottomLeft=F=new f(0,1,0,0).ja(),f.BottomCenter=O=new f(.5,1,0,0).ja(),f.BottomRight=D=new f(1,1,0,0).ja(),f.MiddleTop=re=x,f.MiddleLeft=ce=M,f.MiddleRight=Le=P,f.MiddleBottom=Te=O,f.Top=oe=x,f.Left=_t=M,f.Right=ne=P,f.Bottom=ue=O,f.TopSide=Y=Ne(new f(0,0,1,1),1).ja(),f.LeftSide=G=Ne(new f(0,0,1,2),1).ja(),f.RightSide=U=Ne(new f(0,0,1,4),1).ja(),f.BottomSide=b=Ne(new f(0,0,1,8),1).ja(),f.TopBottomSides=N=Ne(new f(0,0,1,9),1).ja(),f.LeftRightSides=E=Ne(new f(0,0,1,6),1).ja(),f.TopLeftSides=X=Ne(new f(0,0,1,3),1).ja(),f.TopRightSides=W=Ne(new f(0,0,1,5),1).ja(),f.BottomLeftSides=Z=Ne(new f(0,0,1,10),1).ja(),f.BottomRightSides=et=Ne(new f(0,0,1,12),1).ja(),f.NotTopSide=it=Ne(new f(0,0,1,14),1).ja(),f.NotLeftSide=pt=Ne(new f(0,0,1,13),1).ja(),f.NotRightSide=wt=Ne(new f(0,0,1,11),1).ja(),f.NotBottomSide=xt=Ne(new f(0,0,1,7),1).ja(),f.AllSides=Ft=Ne(new f(0,0,1,15),1).ja(),En=new f(.156,.156).ja(),us=new f(.844,.844).ja(),f.parse=zi,f.stringify=Hl,Ot.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ot.prototype.setTransform=function(t,e,i,n,s,o){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=s,this.dy=o,this},Ot.prototype.copy=function(){var t=new Ot;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Ot.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Ot.prototype.D=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Ot.prototype.ws=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Ot.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Ot.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,s=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=s,this},Ot.prototype.cv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,s=-t.m21*e,o=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*s+this.m21*o,s=this.m12*s+this.m22*o,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=s,this},Ot.prototype.Uj=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,s=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=s,this.dy=o,this},Ot.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var s=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=s,this.m21=o,this.m22=l,this.translate(-e,-i),this},(L=Ot.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},L.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},L.Ga=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},L.Cd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},L.Fu=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},L.pp=function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,o=this.m11,l=this.m12,u=this.m21,c=this.m22,p=this.dx,m=this.dy,v=e*o+i*u+p,w=e*l+i*c+m,k=n*o+i*u+p,A=n*l+i*c+m;return i=e*o+s*u+p,e=e*l+s*c+m,o=n*o+s*u+p,n=n*l+s*c+m,s=Math.min(v,k),v=Math.max(v,k),k=Math.min(w,A),w=Math.max(w,A),s=Math.min(s,i),v=Math.max(v,i),k=Math.min(k,e),w=Math.max(w,e),s=Math.min(s,o),v=Math.max(v,o),k=Math.min(k,n),w=Math.max(w,n),t.h(s,k,v-s,w-k),t},Ot.alloc=function(){var t=bg.pop();return void 0===t?new Ot:t},Ot.free=function(t){bg.push(t)},Ot.prototype.transformRect=Ot.prototype.pp,Ot.prototype.transformPoint=Ot.prototype.Ga,Ot.prototype.scale=Ot.prototype.scale,Ot.prototype.translate=Ot.prototype.translate,Ot.prototype.rotate=Ot.prototype.rotate,Ot.prototype.invert=Ot.prototype.Uj,Ot.prototype.multiplyInverted=Ot.prototype.cv,Ot.prototype.multiply=Ot.prototype.multiply,Ot.prototype.reset=Ot.prototype.reset,Ot.prototype.isIdentity=Ot.prototype.ws,Ot.prototype.equals=Ot.prototype.D,Ot.prototype.setTransform=Ot.prototype.setTransform,Ot.prototype.set=Ot.prototype.set;var bg=[];Ot.className="Transform",Ot.xF="54a702f3e53909c447824c6706603faf4c";var _={BA:"7da71ca0ad381e90",wg:(Math.sqrt(2)-1)/3*4,Vv:null,sqrt:function(t){if(0>=t)return 0;var e=_.Vv;if(null===e){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);_.Vv=e}return 1>t?2e3>=(i=1/t)?1/e[0|i]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},B:function(t,e){return.5>(t-=e)&&-.5<t},$:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Zb:function(t,e,i,n,s,o,l){if(0>=s&&(s=1e-6),t<i)var u=t,c=i;else u=i,c=t;if(e<n)var p=e,m=n;else p=n,m=e;if(t===i)return p<=l&&l<=m&&t-s<=o&&o<=t+s;if(e===n)return u<=o&&o<=c&&e-s<=l&&l<=e+s;if(c+=s,(u-=s)<=o&&o<=c&&(m+=s,(p-=s)<=l&&l<=m))if(c-u>m-p){if(!(t-i>s||i-t>s))return!0;if((o=(n-e)/(i-t)*(o-t)+e)-s<=l&&l<=o+s)return!0}else{if(!(e-n>s||n-e>s))return!0;if((l=(i-t)/(n-e)*(l-e)+t)-s<=o&&o<=l+s)return!0}return!1},cs:function(t,e,i,n,s,o,l,u,c,p,m,v){if(_.Zb(t,e,l,u,v,i,n)&&_.Zb(t,e,l,u,v,s,o))return _.Zb(t,e,l,u,v,p,m);var w=(t+i)/2,k=(e+n)/2,A=(i+s)/2,T=(n+o)/2,j=((n=(w+A)/2)+(A=(A+(s=(s+l)/2))/2))/2,I=((i=(k+T)/2)+(T=(T+(o=(o+u)/2))/2))/2;return _.cs(t,e,w,k,n,i,j,I,c,p,m,v)||_.cs(j,I,A,T,s,o,l,u,c,p,m,v)},bx:function(t,e,i,n,s,o,l,u,c){var p=(i+s)/2,m=(n+o)/2;return c.h((((t+i)/2+p)/2+(p+(s+l)/2)/2)/2,(((e+n)/2+m)/2+(m+(o+u)/2)/2)/2),c},Ny:function(t,e,i,n,s,o,l,u){var c=(i+s)/2,p=(n+o)/2;return zl(((t+i)/2+c)/2,((e+n)/2+p)/2,(c+(s+l)/2)/2,(p+(o+u)/2)/2)},Dl:function(t,e,i,n,s,o,l,u,c,p){if(_.Zb(t,e,l,u,c,i,n)&&_.Zb(t,e,l,u,c,s,o))Ze(p,t,e,0,0),Ze(p,l,u,0,0);else{var m=(t+i)/2,v=(e+n)/2,w=(i+s)/2,k=(n+o)/2,A=((n=(m+w)/2)+(w=(w+(s=(s+l)/2))/2))/2,T=((i=(v+k)/2)+(k=(k+(o=(o+u)/2))/2))/2;_.Dl(t,e,m,v,n,i,A,T,c,p),_.Dl(A,T,w,k,s,o,l,u,c,p)}return p},Qe:function(t,e,i,n,s,o,l,u,c,p){if(_.Zb(t,e,l,u,c,i,n)&&_.Zb(t,e,l,u,c,s,o))0===p.length&&(p.push(t),p.push(e)),p.push(l),p.push(u);else{var m=(t+i)/2,v=(e+n)/2,w=(i+s)/2,k=(n+o)/2,A=((n=(m+w)/2)+(w=(w+(s=(s+l)/2))/2))/2,T=((i=(v+k)/2)+(k=(k+(o=(o+u)/2))/2))/2;_.Qe(t,e,m,v,n,i,A,T,c,p),_.Qe(A,T,w,k,s,o,l,u,c,p)}return p},kv:function(t,e,i,n,s,o,l,u,c,p){if(_.Zb(t,e,s,o,p,i,n))return _.Zb(t,e,s,o,p,u,c);var m=(t+i)/2,v=(e+n)/2,w=(m+(i=(i+s)/2))/2,k=(v+(n=(n+o)/2))/2;return _.kv(t,e,m,v,w,k,l,u,c,p)||_.kv(w,k,i,n,s,o,l,u,c,p)},PA:function(t,e,i,n,s,o,l){return l.h(((t+i)/2+(i+s)/2)/2,((e+n)/2+(n+o)/2)/2),l},jv:function(t,e,i,n,s,o,l,u){if(_.Zb(t,e,s,o,l,i,n))Ze(u,t,e,0,0),Ze(u,s,o,0,0);else{var c=(t+i)/2,p=(e+n)/2,m=(c+(i=(i+s)/2))/2,v=(p+(n=(n+o)/2))/2;_.jv(t,e,c,p,m,v,l,u),_.jv(m,v,i,n,s,o,l,u)}return u},ep:function(t,e,i,n,s,o,l,u){if(_.Zb(t,e,s,o,l,i,n))0===u.length&&(u.push(t),u.push(e)),u.push(s),u.push(o);else{var c=(t+i)/2,p=(e+n)/2,m=(c+(i=(i+s)/2))/2,v=(p+(n=(n+o)/2))/2;_.ep(t,e,c,p,m,v,l,u),_.ep(m,v,i,n,s,o,l,u)}return u},Eo:function(t,e,i,n,s,o,l,u,c,p,m,v,w,k){if(_.Zb(t,e,l,u,w,i,n)&&_.Zb(t,e,l,u,w,s,o))return!(!_.Rl(t,e,l,u,c,p,m,v)||(w=(t-l)*(p-v)-(e-u)*(c-m),0===w)||(k.h(((t*u-e*l)*(c-m)-(t-l)*(c*v-p*m))/w,((t*u-e*l)*(p-v)-(e-u)*(c*v-p*m))/w),0));var A=(t+i)/2,T=(e+n)/2,j=(i+s)/2,I=(n+o)/2,B=((n=(A+j)/2)+(j=(j+(s=(s+l)/2))/2))/2,R=((i=(T+I)/2)+(I=(I+(o=(o+u)/2))/2))/2,H=1/0,K=!1,J=0,lt=0;return _.Eo(t,e,A,T,n,i,B,R,c,p,m,v,w,k)&&(t=(k.x-c)*(k.x-c)+(k.y-p)*(k.y-p))<H&&(H=t,K=!0,J=k.x,lt=k.y),_.Eo(B,R,j,I,s,o,l,u,c,p,m,v,w,k)&&(k.x-c)*(k.x-c)+(k.y-p)*(k.y-p)<H&&(K=!0,J=k.x,lt=k.y),K&&(k.x=J,k.y=lt),K},Fo:function(t,e,i,n,s,o,l,u,c,p,m,v,w){var k=0;if(_.Zb(t,e,l,u,w,i,n)&&_.Zb(t,e,l,u,w,s,o)){if(0==(w=(t-l)*(p-v)-(e-u)*(c-m)))return k;var A=((t*u-e*l)*(c-m)-(t-l)*(c*v-p*m))/w,T=((t*u-e*l)*(p-v)-(e-u)*(c*v-p*m))/w;if(A>=m)return k;if((c>m?c-m:m-c)<(p>v?p-v:v-p)){if(e<u?(c=e,t=u):(c=u,t=e),T<c||T>t)return k}else if(t<l?(c=t,t=l):c=l,A<c||A>t)return k;0<w?k++:0>w&&k--}else{T=(e+n)/2;var j=(i+s)/2,I=(n+o)/2,B=((n=((A=(t+i)/2)+j)/2)+(j=(j+(s=(s+l)/2))/2))/2,R=((i=(T+I)/2)+(I=(I+(o=(o+u)/2))/2))/2;k+=_.Fo(t,e,A,T,n,i,B,R,c,p,m,v,w),k+=_.Fo(B,R,j,I,s,o,l,u,c,p,m,v,w)}return k},qh:function(t,e,i,n,s,o,l){return _.$(t,i)?(e<n?(i=e,e=n):i=n,o<i?(l.h(t,i),!1):o>e?(l.h(t,e),!1):(l.h(t,o),!0)):_.$(e,n)?(t<i?(n=t,t=i):n=i,s<n?(l.h(n,e),!1):s>t?(l.h(t,e),!1):(l.h(s,e),!0)):-5e-6>(s=((t-s)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(l.h(t,e),!1):1.000005<s?(l.h(i,n),!1):(l.h(t+s*(i-t),e+s*(n-e)),!0)},Ve:function(t,e,i,n,s,o,l,u,c){return _.B(t,i)&&_.B(e,n)?(c.h(t,e),!1):_.$(s,l)?_.$(t,i)?(_.qh(t,e,i,n,s,o,c),!1):_.qh(t,e,i,n,s,(n-e)/(i-t)*(s-t)+e,c):(u=(u-o)/(l-s),_.$(t,i)?(i=u*(t-s)+o,e<n?(s=e,e=n):s=n,i<s?(c.h(t,s),!1):i>e?(c.h(t,e),!1):(c.h(t,i),!0)):_.$(u,l=(n-e)/(i-t))?(_.qh(t,e,i,n,s,o,c),!1):(s=(l*t-u*s+o-e)/(l-u),_.$(l,0)?(t<i?(n=t,t=i):n=i,s<n?(c.h(n,e),!1):s>t?(c.h(t,e),!1):(c.h(s,e),!0)):_.qh(t,e,i,n,s,l*(s-t)+e,c)))},NA:function(t,e,i,n,s){return _.Ve(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,s)},LA:function(t,e,i,n,s,o,l,u,c,p){function m(j,I){var B=(j-t)*(j-t)+(I-e)*(I-e);B<v&&(v=B,c.h(j,I))}var v=1/0;m(c.x,c.y);var w=0,k=0,A=0,T=0;if(s<l?(w=s,k=l):(w=l,k=s),o<u?(A=s,T=l):(A=l,T=s),w=(k-w)/2+p,p=(T-A)/2+p,s=(s+l)/2,o=(o+u)/2,0===w||0===p)return c;if(.5>(i>t?i-t:t-i)){if(0>(w=1-(i-s)*(i-s)/(w*w)))return c;n=-p*(w=Math.sqrt(w))+o,m(i,p*w+o),m(i,n)}else{if(0>(w=(u=2*(i=(n-e)/(i-t))*(e-i*t)/(p*p)-2*i*o/(p*p)-2*s/(w*w))*u-4*(n=1/(w*w)+i*i/(p*p))*(2*i*t*o/(p*p)-2*e*o/(p*p)+o*o/(p*p)+s*s/(w*w)-1+(e-i*t)*(e-i*t)/(p*p))))return c;m(p=(-u+(w=Math.sqrt(w)))/(2*n),i*p-i*t+e),m(w=(-u-w)/(2*n),i*w-i*t+e)}return c},Ff:function(t,e,i,n,s,o,l,u,c){var p=1e21,m=t,v=e;if(_.Ve(t,e,t,n,s,o,l,u,c)){var w=(c.x-s)*(c.x-s)+(c.y-o)*(c.y-o);w<p&&(p=w,m=c.x,v=c.y)}return _.Ve(i,e,i,n,s,o,l,u,c)&&(w=(c.x-s)*(c.x-s)+(c.y-o)*(c.y-o))<p&&(p=w,m=c.x,v=c.y),_.Ve(t,e,i,e,s,o,l,u,c)&&(e=(c.x-s)*(c.x-s)+(c.y-o)*(c.y-o))<p&&(p=e,m=c.x,v=c.y),_.Ve(t,n,i,n,s,o,l,u,c)&&(t=(c.x-s)*(c.x-s)+(c.y-o)*(c.y-o))<p&&(p=t,m=c.x,v=c.y),c.h(m,v),1e21>p},us:function(t,e,i){return _.Gx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Gx:function(t,e,i,n,s,o,l,u){var c=t+i,p=e+n;return s===l?(o<u?(l=o,o=u):l=u,t<=s&&s<=c&&l<=p&&o>=e):o===u?(s<l?(u=s,s=l):u=l,e<=o&&o<=p&&u<=c&&s>=t):!!(kn(t,e,i,n,s,o)||kn(t,e,i,n,l,u)||_.Rl(t,e,c,e,s,o,l,u)||_.Rl(c,e,c,p,s,o,l,u)||_.Rl(c,p,t,p,s,o,l,u)||_.Rl(t,p,t,e,s,o,l,u))},Rl:function(t,e,i,n,s,o,l,u){return t===i&&e===n&&s===l&&o===u?t===s&&e===o:0>=_.Fl(t,e,i,n,s,o)*_.Fl(t,e,i,n,l,u)&&0>=_.Fl(s,o,l,u,t,e)*_.Fl(s,o,l,u,i,n)},Fl:function(t,e,i,n,s,o){return i-=t,0==(o=(t=s-t)*(n-=e)-(e=o-e)*i)&&0<(o=t*i+e*n)&&0>(o=(t-i)*i+(e-n)*n)&&(o=0),o},bp:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},kx:function(t,e,i,n,s,o){var l=Math.PI;o||(n*=l/180,s*=l/180);var u=n>s?-1:1;o=[];var c=l/2,p=n;if(1e-5>(n=Math.min(2*l,Math.abs(s-n))))return c=p+u*Math.min(n,c),u=t+i*Math.cos(p),p=e+i*Math.sin(p),t+=i*Math.cos(c),e+=i*Math.sin(c),o.push([u,p,i=(u+t)/2,c=(p+e)/2,i,c,t,e]),o;for(;1e-5<n;)s=p+u*Math.min(n,c),o.push(_.Wy(i,p,s,t,e)),n-=Math.abs(s-p),p=s;return o},Wy:function(t,e,i,n,s){var o=(i-e)/2,l=t*Math.cos(o),u=t*Math.sin(o),c=-u,p=l*l+c*c,m=p+l*l+c*u;return u=l-(p=4/3*(Math.sqrt(2*p*m)-m)/(l*u-c*l))*c,c=-(l=c+p*l),p=o+e,o=Math.cos(p),p=Math.sin(p),[n+t*Math.cos(e),s+t*Math.sin(e),n+u*o-l*p,s+u*p+l*o,n+u*o-c*p,s+u*p+c*o,n+t*Math.cos(i),s+t*Math.sin(i)]},No:function(t,e,i,n,s,o,l){var u=i=Math.floor((t-i)/s)*s+i;return i+s-t<s/2&&(u=i+s),t=n=Math.floor((e-n)/o)*o+n,n+o-e<o/2&&(t=n+o),l.h(u,t),l},wx:function(t,e){var n,i=Math.max(t,e);t=Math.min(t,e);do{e=i%t,i=n=t,t=e}while(0<e);return n},az:function(t,e,i,n){var s=0>i,o=0>n;if(t<e)var l=1,u=0;else l=0,u=1;var c=0===l?t:e,p=0===l?i:n;return(0===l?s:o)&&(p=-p),i=0===(l=u)?i:n,(0===l?s:o)&&(i=-i),_.bz(c,0===l?t:e,p,i,0,0)},bz:function(t,e,i,n,s,o){if(0<n)if(0<i){s=t*t,t*=i;var l=e*n,u=-(o=e*e)+l,c=-o+Math.sqrt(t*t+l*l);e=u;for(var p=0;9999999999>p&&(e=.5*(u+c))!==u&&e!==c;++p){var m=t/(e+s),v=l/(e+o);if(0<(m=m*m+v*v-1))u=e;else{if(!(0>m))break;c=e}}i=s*i/(e+s)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else(o=t*i)<(n=t*t-e*e)?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Ze:new Wi,um:new Wi,Mf:new Wi,Nf:0,vm:100};function rt(t){Ye(this),this.l=2,void 0===t&&(t=rt.o),this.na=t,this.Ec=this.Dc=this.pd=this.od=0,t===rt.o?this.ee=new dt:(null===rt.V&&(rt.V=(new dt).freeze()),this.ee=rt.V),this.aq=this.ee.Ja,this.Ip=(new q).freeze(),this.ym=this.sk=null,this.zm=NaN,this.fg=y,this.gg=D,this.Qk=this.Rk=NaN,this.Uf=Ce}function Sg(t,e){return t.type===rt.j&&e.type===rt.o&&!!(1===e.figures.count&&(e=e.figures.M(0),1===e.segments.count&&_.B(t.startX,e.startX)&&_.B(t.startY,e.startY)&&(e=e.segments.M(0),e.type===pe&&_.B(t.endX,e.endX)&&_.B(t.endY,e.endY))))}function kg(t,e,i){switch(t.type){case rt.j:case rt.u:case rt.F:i?e.h(t.od,t.pd,0,0):Ze(e,t.od,t.pd,0,0),Ze(e,t.Dc,t.Ec,0,0);break;case rt.o:var n=t.figures;t=n.s,n=n.length;for(var s=0;s<n;s++){var o=t[s];i&&0===s?e.h(o.startX,o.startY,0,0):Ze(e,o.startX,o.startY,0,0);for(var l=o.segments.s,u=l.length,c=o.startX,p=o.startY,m=0;m<u;m++){var v=l[m];switch(v.type){case pe:case jn:Ze(e,c=v.endX,p=v.endY,0,0);break;case cn:_.Dl(c,p,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,e),c=v.endX,p=v.endY;break;case cs:_.jv(c,p,v.point1X,v.point1Y,v.endX,v.endY,.5,e),c=v.endX,p=v.endY;break;case Oe:case Jn:var w=v.type===Oe?Ws(v,o):pr(v,o,c,p),k=w.length;if(0===k){Ze(e,c=v.type===Oe?v.centerX:v.endX,p=v.type===Oe?v.centerY:v.endY,0,0);break}v=null;for(var A=0;A<k;A++)_.Dl((v=w[A])[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.5,e);null!==v&&(c=v[6],p=v[7]);break;default:Q("Unknown Segment type: "+v.type)}}}break;default:Q("Unknown Geometry type: "+t.type)}}function Ed(t,e,i,n,s){var o=e.x;e=e.y;for(var c,p,m,v,l=t.bounds.x-20,u=0,w=t.figures.s,k=w.length,A=0;A<k;A++){var T=w[A],j=!T.isEvenOdd;if(T.isFilled){if(n&&T.ca(o,e,i))return!0;for(var I=T.segments,B=c=T.startX,R=p=T.startY,H=I.s,K=0;K<=I.length;K++){var J=void 0;if(K!==I.length){var lt=(J=H[K]).type;t=J.endX,v=J.endY}else lt=pe,t=B,v=R;switch(lt){case jn:if(B=xu(o,e,l,e,c,p,B,R),isNaN(B))return!0;u+=B,B=t,R=v;break;case pe:if(c=xu(o,e,l,e,c,p,t,v),isNaN(c))return!0;u+=c;break;case cn:u+=m=_.Fo(c,p,J.point1X,J.point1Y,J.point2X,J.point2Y,t,v,l,e,o,e,.5);break;case cs:u+=m=_.Fo(c,p,(c+2*J.point1X)/3,(p+2*J.point1Y)/3,(2*J.point1X+t)/3,(2*J.point1Y+v)/3,t,v,l,e,o,e,.5);break;case Oe:case Jn:var gt=(lt=J.type===Oe?Ws(J,T):pr(J,T,c,p)).length;if(0===gt){if(c=xu(o,e,l,e,c,p,J.type===Oe?J.centerX:J.endX,J.type===Oe?J.centerY:J.endY),isNaN(c))return!0;u+=c;break}J=null;for(var ft=0;ft<gt;ft++){if(J=lt[ft],0===ft){if(m=xu(o,e,l,e,c,p,J[0],J[1]),isNaN(m))return!0;u+=m}u+=m=_.Fo(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],l,e,o,e,.5)}null!==J&&(t=J[6],v=J[7]);break;default:Q("Unknown Segment type: "+J.type)}c=t,p=v}if(j){if(0!==u)return!0}else if(u%2!=0)return!0;u=0}else if(T.ca(o,e,s?i:i+2))return!0}return!1}function xu(t,e,i,n,s,o,l,u){if(_.Zb(s,o,l,u,.05,t,e))return NaN;var c=(t-i)*(o-u);if(0===c)return 0;var p=((t*n-e*i)*(s-l)-(t-i)*(s*u-o*l))/c;if(e=(t*n-e*i)*(o-u)/c,p>=t)return 0;if((s>l?s-l:l-s)<(o>u?o-u:u-o)){if(o<u){if(e<o||e>u)return 0}else if(e<u||e>o)return 0}else if(s<l){if(p<s||p>l)return 0}else if(p<l||p>s)return 0;return 0<c?1:-1}function Mg(t,e,i,n){for(var s=(t=t.figures.s).length,o=0;o<s;o++)if(t[o].ca(e,i,n))return!0;return!1}function Cg(t){if(null===t.sk){var e=t.sk=[],i=t.ym=[],n=[],s=[];if(t.type===rt.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),s.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(s);else if(t.type===rt.u)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),s.push(Math.abs(t.startX-t.endX)),s.push(Math.abs(t.startY-t.endY)),s.push(Math.abs(t.startX-t.endX)),s.push(Math.abs(t.startY-t.endY)),i.push(s);else if(t.type===rt.F){var o=new Je;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var l=new Ht(Oe);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,o.add(l),0===(s=(t=Ws(l,o)).length))n.push(l.centerX),n.push(l.centerY);else{l=o.startX,o=o.startY;for(var u=0;u<s;u++){var c=t[u];_.Qe(l,o,c[2],c[3],c[4],c[5],c[6],c[7],.5,n),l=c[6],o=c[7]}}e.push(n),i.push(jd(n))}else for(t=t.figures.iterator;t.next();){(n=[]).push((s=t.value).startX),n.push(s.startY),u=l=s.startX,c=o=s.startY;for(var p=s.segments.s,m=p.length,v=0;v<m;v++){var w=p[v];switch(w.type){case jn:4<=n.length&&(e.push(n),i.push(jd(n))),(n=[]).push(w.endX),n.push(w.endY),u=l=w.endX,c=o=w.endY;break;case pe:n.push(w.endX),n.push(w.endY),l=w.endX,o=w.endY;break;case cn:_.Qe(l,o,w.point1X,w.point1Y,w.point2X,w.point2Y,w.endX,w.endY,.5,n),l=w.endX,o=w.endY;break;case cs:_.ep(l,o,w.point1X,w.point1Y,w.endX,w.endY,.5,n),l=w.endX,o=w.endY;break;case Oe:var k=Ws(w,s),A=k.length;if(0===A){n.push(w.centerX),n.push(w.centerY),l=w.centerX,o=w.centerY;break}for(var T=0;T<A;T++){var j=k[T];_.Qe(l,o,j[2],j[3],j[4],j[5],j[6],j[7],.5,n),l=j[6],o=j[7]}break;case Jn:if(k=pr(w,s,l,o),T=w.endX,j=w.endY,0===(A=k.length)){n.push(T),n.push(j),l=T,o=j;break}for(T=0;T<A;T++)_.Qe(l,o,(j=k[T])[2],j[3],j[4],j[5],j[6],j[7],.5,n),l=j[6],o=j[7];break;default:Q("Segment not of valid type: "+w.type)}w.isClosed&&(n.push(u),n.push(c))}4<=n.length&&(e.push(n),i.push(jd(n)))}}}function jd(t){for(var e=[],i=0,n=0,s=t.length,o=0;o<s;o+=2){var l=t[o],u=t[o+1];0!==o&&e.push(Math.sqrt(ls(i,n,l,u))),i=l,n=u}return e}function Je(t,e,i,n,s){Ye(this),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),this.l=2|(i?4:0)|(n?8:0)|(s?16:0),this.od=void 0!==t?t:0,this.pd=void 0!==e?e:0,this.pl=new dt,this.sr=this.pl.Ja,this.gw=null}function Ht(t,e,i,n,s,o,l,u){Ye(this),void 0===t&&(t=pe),this.na=t,this.l=2,this.Dc=void 0!==e?e:0,this.Ec=void 0!==i?i:0,void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===l&&(l=0),t===Jn?(0>(t=o%360)&&(t+=360),this.Ne=t,this.Vh=0,this.Wh=Math.max(n,0),this.Pg=Math.max(s,0),"boolean"==typeof l?l&&(this.isLargeArc=!0):"number"==typeof l&&l&&(this.isLargeArc=!0),u&&(this.isClockwiseArc=!0)):(this.Ne=n,this.Vh=s,t===Oe&&(o=Math.max(o,0)),this.Wh=o,"number"==typeof l?(t===Oe&&(l=Math.max(l,0)),this.Pg=l):this.Pg=0),this.ae=null}function Ws(t,e){if(null!==t.ae&&!1===e._isInvalidBounds)return t.ae;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.ae=[],t.ae;e=t.Ne;var s=t.Vh,o=_.kx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=Ot.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),rt.Ha(o,l),Ot.free(l)}for(i=o.length,n=0;n<i;n++)(l=o[n])[0]+=e,l[1]+=s,l[2]+=e,l[3]+=s,l[4]+=e,l[5]+=s,l[6]+=e,l[7]+=s;return t.ae=o,t.ae}function pr(t,e,i,n){function s(T,j,I,B){return(T*B<j*I?-1:1)*Math.acos((T*I+j*B)/(Math.sqrt(T*T+j*j)*Math.sqrt(I*I+B*B)))}if(null!==t.ae&&!1===e._isInvalidBounds)return t.ae;if(0===t.radiusX||0===t.radiusY)return t.ae=[],t.ae;var o=t.Pg;0===(e=t.Wh)&&(e=1e-4),0===o&&(o=1e-4);var l=Math.PI/180*t.Ne,u=t.isLargeArc,c=t.isClockwiseArc,p=t.Dc,m=t.Ec,v=Math.cos(l),w=Math.sin(l),k=v*(i-p)/2+w*(n-m)/2,A=k*k/(e*e)+(l=-w*(i-p)/2+v*(n-m)/2)*l/(o*o);return 1<A&&(e*=Math.sqrt(A),o*=Math.sqrt(A)),A=(u===c?-1:1)*Math.sqrt((e*e*o*o-e*e*l*l-o*o*k*k)/(e*e*l*l+o*o*k*k)),isNaN(A)&&(A=0),u=A*e*l/o,A=A*-o*k/e,isNaN(u)&&(u=0),isNaN(A)&&(A=0),i=(i+p)/2+v*u-w*A,n=(n+m)/2+w*u+v*A,m=s(1,0,(k-u)/e,(l-A)/o),l=s(v=(k-u)/e,p=(l-A)/o,k=(-k-u)/e,u=(-l-A)/o),-1>=(k=(v*k+p*u)/(Math.sqrt(v*v+p*p)*Math.sqrt(k*k+u*u)))?l=Math.PI:1<=k&&(l=0),!c&&0<l&&(l-=2*Math.PI),c&&0>l&&(l+=2*Math.PI),c=e>o?1:e/o,k=e>o?o/e:1,e=_.kx(0,0,e>o?e:o,m,m+l,!0),(o=Ot.alloc()).reset(),o.translate(i,n),o.rotate(t.Ne,0,0),o.scale(c,k),rt.Ha(e,o),Ot.free(o),t.ae=e,t.ae}_.za=_.BA,rt.prototype.copy=function(){var t=new rt;if(t.l=-2&this.l,t.na=this.na,t.od=this.od,t.pd=this.pd,t.Dc=this.Dc,t.Ec=this.Ec,this.na===rt.o){for(var e=this.ee.s,i=t.ee,n=0;n<e.length;n++)i.add(e[n].copy());t.ee=i}else t.ee=this.ee;return t.aq=this.aq,t.Ip.assign(this.Ip),t.sk=this.sk,t.ym=this.ym,t.zm=this.zm,t.fg=this.fg.J(),t.gg=this.gg.J(),t.Rk=this.Rk,t.Qk=this.Qk,t.Uf=this.Uf,t},rt.prototype.ja=function(){return this.freeze(),Object.freeze(this),this},rt.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==rt.o)return this;var t=this.figures;t.freeze();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].freeze();return this},rt.prototype.ka=function(){if(Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==rt.o)return this;var t=this.figures;t.ka();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].ka();return this},rt.prototype.Xa=function(t){if(!(t instanceof rt))return!1;if(this.type!==t.type)return this.type===rt.j&&t.type===rt.o?Sg(this,t):t.type===rt.j&&this.type===rt.o&&Sg(t,this);if(this.type===rt.o){var e=this.figures.s,i=e.length;if(i!==(t=t.figures.s).length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0}return _.B(this.startX,t.startX)&&_.B(this.startY,t.startY)&&_.B(this.endX,t.endX)&&_.B(this.endY,t.endY)},rt.ia=function(t){return t.toString()},rt.prototype.qb=function(t){t.classType===rt&&(this.type=t)},rt.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case rt.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case rt.u:var e=new q(this.startX,this.startY,0,0);return e.Lv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case rt.F:if((e=new q(this.startX,this.startY,0,0)).Lv(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case rt.o:e="";for(var n=(i=this.figures.s).length,s=0;s<n;s++){var o=i[s];0<s&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}},rt.nb=function(t){for(var e=(t=t.split(/[Xx]/)).length,i="",n=0;n<e;n++){var s=t[n];i=null!==s.match(/[Ff]/)?0===n?i+s:i+"X"+(" "===s[0]?"":" ")+s:i+(0===n?"":"X ")+"F"+(" "===s[0]?"":" ")+s}return i},rt.parse=function(t,e){function i(){return T>=H-1||null!==p[T+1].match(K)}function n(){return T++,p[T]}function s(Ct){var bt=parseFloat(n()),Rt=parseFloat(n());j===j.toLowerCase()&&(bt=R.x+bt,Rt=R.y+Rt),Ct.h(bt,Rt)}function o(){return s(R),R}function l(){return s(B),B}function u(){var Ct=I.toLowerCase();return"c"!==Ct&&"s"!==Ct&&"q"!==Ct&&"t"!==Ct?new z(R.x,R.y):new z(2*R.x-B.x,2*R.y-B.y)}void 0===e&&(e=!1);var c=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,p=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(c,"$1 $2")).replace(c,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<p.length;t++){var m=p[t];if(null!==m.match(/(\.[0-9]*)(\.)/gm)){c=Xt();for(var v="",w=!1,k=0;k<m.length;k++){var A=m[k];"."!==A||w?"."===A?(c.push(v),v="."):v+=A:(w=!0,v+=A)}for(c.push(v),p.splice(t,1),m=0;m<c.length;m++)p.splice(t+m,0,c[m]);t+=c.length-1,Zt(c)}}var T=-1,j="",I="";c=new z(0,0);var B=new z(0,0),R=new z(0,0),H=p.length;t=Py(null),w=v=m=!1,k=!0,A=null;for(var K=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(T>=H-1);)if(I=j,""!==(j=n()))switch(j.toUpperCase()){case"X":k=!0,v=m=!1;break;case"M":for(A=o(),null===t.nc||!0===k?(rl(t,A.x,A.y,m,!v,w),k=!1):t.moveTo(A.x,A.y),c.assign(R);!i();)A=o(),t.lineTo(A.x,A.y);break;case"L":for(;!i();)A=o(),t.lineTo(A.x,A.y);break;case"H":for(;!i();)R.h((j===j.toLowerCase()?R.x:0)+parseFloat(n()),R.y),t.lineTo(R.x,R.y);break;case"V":for(;!i();)R.h(R.x,(j===j.toLowerCase()?R.y:0)+parseFloat(n())),t.lineTo(R.x,R.y);break;case"C":for(;!i();){s(A=new z);var J=l(),lt=o();So(t,A.x,A.y,J.x,J.y,lt.x,lt.y)}break;case"S":for(;!i();)A=u(),J=l(),lt=o(),So(t,A.x,A.y,J.x,J.y,lt.x,lt.y);break;case"Q":for(;!i();)A=l(),J=o(),wc(t,A.x,A.y,J.x,J.y);break;case"T":for(;!i();)A=u(),B.assign(A),J=o(),wc(t,A.x,A.y,J.x,J.y),B.assign(J);break;case"B":for(;!i();){A=parseFloat(n()),J=parseFloat(n()),lt=parseFloat(n());var gt=parseFloat(n()),ft=parseFloat(n()),ot=ft,tt=!1;i()||(ot=parseFloat(n()),i()||(tt=0!==parseFloat(n()))),j===j.toLowerCase()&&(lt+=R.x,gt+=R.y),t.arcTo(A,J,lt,gt,ft,ot,tt)}break;case"A":for(;!i();)A=Math.abs(parseFloat(n())),J=Math.abs(parseFloat(n())),lt=parseFloat(n()),ft=gt=!1,tt=ot=0,1===(ot=n()).length?(gt=!!parseFloat(ot),ft=!!parseFloat(n()),ot=parseFloat(n())):2===ot.length?(gt=!!parseFloat(ot[0]),ft=!!parseFloat(ot[1]),ot=parseFloat(n())):(gt=!!parseFloat(ot[0]),ft=!!parseFloat(ot[1]),ot=parseFloat(ot.slice(2))),tt=parseFloat(n()),j===j.toLowerCase()&&(ot=R.x+ot,tt=R.y+tt),R.h(ot,tt),K0(t,A,J,lt,gt,ft,ot,tt);break;case"Z":U0(t),R.assign(c);break;case"F":for(A="",J=1;p[T+J];)if("0"===p[T+J])w=!0,J++;else if(null!==p[T+J].match(/[Uu]/))J++;else{if(null!==p[T+J].match(K)){A=p[T+J];break}J++}A.match(/[Mm]/)?m=!0:0<t.nc.segments.length&&(t.nc.isFilled=!0);break;case"U":for(A="",J=1;p[T+J];)if(null!==p[T+J].match(/[Ff]/))J++;else{if(null!==p[T+J].match(K)){A=p[T+J];break}J++}A.match(/[Mm]/)?v=!0:t.nc.isShadowed=!1}if(c=t.os,bc=t,e)for(e=c.figures.iterator;e.next();)e.value.isFilled=!0;return c},rt.Ha=function(t,e){for(var i=t.length,n=z.alloc(),s=0;s<i;s++){var o=t[s];n.x=o[0],n.y=o[1],e.Ga(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.Ga(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.Ga(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.Ga(n),o[6]=n.x,o[7]=n.y}z.free(n)},rt.prototype.$u=function(){if(this._isInvalidBounds)return!0;if(this.type===rt.o){if(this.aq!==this.figures.Ja)return!0;for(var t=this.figures.s,e=t.length,i=0;i<e;i++)if(t[i].$u())return!0}return!1},rt.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.ym=this.sk=null,this.zm=NaN,this.type===rt.o){this.aq=this.figures.Ja;for(var t=this.figures.s,e=t.length,i=0;i<e;i++){var n=t[i];n._isInvalidBounds=!1;var s=n.segments;n.sr=s.Ja,s=(n=s.s).length;for(var o=0;o<s;o++){var l=n[o];l._isInvalidBounds=!1,l.ae=null}}}(t=this.Ip).ka(),isNaN(this.Rk)||isNaN(this.Qk)?t.h(0,0,0,0):t.h(0,0,this.Rk,this.Qk),kg(this,t,!1),Ze(t,0,0,0,0),t.freeze()},rt.prototype.jx=function(){var t=new q;return kg(this,t,!0),t},rt.prototype.normalize=function(){this._isFrozen&&Lt(this);var t=this.jx();return this.offset(-t.x,-t.y),new z(-t.x,-t.y)},rt.prototype.offset=function(t,e){return this._isFrozen&&Lt(this),this.transform(1,0,0,1,t,e),this},rt.prototype.scale=function(t,e){return this._isFrozen&&Lt(this),this.transform(t,0,0,e,0,0),this},rt.prototype.rotate=function(t,e,i){this._isFrozen&&Lt(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=Ot.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Ot.free(n),this},(L=rt.prototype).transform=function(t,e,i,n,s,o){switch(this.type){case rt.j:case rt.u:case rt.F:var l=this.od,u=this.pd;this.od=l*t+u*i+s,this.pd=l*e+u*n+o,this.Dc=(l=this.Dc)*t+(u=this.Ec)*i+s,this.Ec=l*e+u*n+o;break;case rt.o:for(var c=this.figures.s,p=c.length,m=0;m<p;m++){var v=c[m];v.startX=(l=v.startX)*t+(u=v.startY)*i+s,v.startY=l*e+u*n+o;for(var w=(v=v.segments.s).length,k=0;k<w;k++){var A=v[k];switch(A.type){case pe:case jn:A.endX=(l=A.endX)*t+(u=A.endY)*i+s,A.endY=l*e+u*n+o;break;case cn:A.point1X=(l=A.point1X)*t+(u=A.point1Y)*i+s,A.point1Y=l*e+u*n+o,A.point2X=(l=A.point2X)*t+(u=A.point2Y)*i+s,A.point2Y=l*e+u*n+o,A.endX=(l=A.endX)*t+(u=A.endY)*i+s,A.endY=l*e+u*n+o;break;case cs:A.point1X=(l=A.point1X)*t+(u=A.point1Y)*i+s,A.point1Y=l*e+u*n+o,A.endX=(l=A.endX)*t+(u=A.endY)*i+s,A.endY=l*e+u*n+o;break;case Oe:A.centerX=(l=A.centerX)*t+(u=A.centerY)*i+s,A.centerY=l*e+u*n+o,0!==e&&(0>(l=180*Math.atan2(e,t)/Math.PI)&&(l+=360),A.startAngle+=l),0>t&&(A.startAngle=180-A.startAngle,A.sweepAngle=-A.sweepAngle),0>n&&(A.startAngle=-A.startAngle,A.sweepAngle=-A.sweepAngle),A.radiusX*=Math.sqrt(t*t+i*i),void 0!==A.radiusY&&(A.radiusY*=Math.sqrt(e*e+n*n));break;case Jn:if(A.endX=(l=A.endX)*t+(u=A.endY)*i+s,A.endY=l*e+u*n+o,0===A.radiusX||0===A.radiusY)break;0!==e&&(0>(l=180*Math.atan2(e,t)/Math.PI)&&(l+=360),A.xAxisRotation+=l),0>t&&(A.xAxisRotation=180-A.xAxisRotation,A.isClockwiseArc=!A.isClockwiseArc),0>n&&(A.xAxisRotation=-A.xAxisRotation,A.isClockwiseArc=!A.isClockwiseArc),A.radiusX*=Math.sqrt(t*t+i*i),A.radiusY*=Math.sqrt(e*e+n*n);break;default:Q("Unknown Segment type: "+A.type)}}}}return this._isInvalidBounds=!0,this},L.ca=function(t,e){void 0===e&&(e=0);var i=this.od,n=this.pd,s=this.Dc,o=this.Ec;switch(this.type){case rt.j:return _.Zb(i,n,s,o,e,t.x,t.y);case rt.u:var l=q.allocAt(Math.min(i,s)-e,Math.min(n,o)-e,Math.abs(s-i)+2*e,Math.abs(o-n)+2*e);return t=l.ca(t),q.free(l),t;case rt.F:l=Math.min(i,s)-e;var u=Math.min(n,o)-e;return i=(Math.abs(s-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,!(0>=i||0>=e)&&1>=(l=t.x-(l+i))*l/(i*i)+(u=t.y-(u+e))*u/(e*e);case rt.o:return Ed(this,t,e,!0,!1);default:return!1}},L.Qu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new z),this.type===rt.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,s=i.length,o=this.flattenedTotalLength*t,l=0,u=0;u<s;u++){var c=n[u],p=c.length;for(t=0;t<p;t++){var m=c[t];if(l+m>=o)return n=o-l,e.h((u=(i=i[u])[2*t])+(i[2*t+2]-u)*(n=0===m?0:n/m),(s=i[2*t+1])+(i[2*t+3]-s)*n),e;l+=m}}return e},L.xx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===rt.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,s=this.flattenedTotalLength*t,o=0,l=0;l<n;l++){var u=i[l],c=u.length;for(t=0;t<c;t++){var p=u[t];if(o+p>=s)return e=(s=e[l])[2*t],i=s[2*t+1],n=s[2*t+2],t=s[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=p}}return NaN},L.Ru=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===rt.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,s=i.length,o=this.flattenedTotalLength*t,l=0,u=0;u<s;u++){var c=n[u],p=c.length;for(t=0;t<p;t++){var m=c[t];if(l+m>=o)return n=o-l,n=0===m?0:n/m,i=(m=i[u])[2*t],u=m[2*t+1],s=m[2*t+2],t=m[2*t+3],e[0]=i+(s-i)*n,e[1]=u+(t-u)*n,e[2]=1>Math.abs(s-i)&&1>Math.abs(t-u)?0:1>Math.abs(s-i)?0<=t-u?90:270:1>Math.abs(t-u)?0<=s-i?0:180:180*Math.atan2(t-u,s-i)/Math.PI,e;l+=m}}return e},L.yx=function(t){if(this.type===rt.j){var e=this.startX,i=this.startY,n=this.endX,s=this.endY;if(e!==n||i!==s){var o=t.x;if(t=t.y,e===n){if(i<s){var l=i;n=s}else l=s,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===s)return e<n?l=e:(l=n,n=e),o<=l?l===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-l);l=(n-e)*(n-e)+(s-i)*(s-i);var u=z.alloc();return _.qh(e,i,n,s,o,t,u),t=u.x,o=u.y,z.free(u),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/l)}}else{if(this.type!==rt.u){e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=z.alloc(),s=1/0,u=l=0,c=e.length;for(var m=p=0,v=0;v<c;v++)for(var w=e[v],k=i[v],A=w.length,T=0;T<A;T+=2){var j=w[T],I=w[T+1];if(0!==T){_.qh(p,m,j,I,t.x,t.y,n);var B=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);B<s&&(s=B,l=u,l+=Math.sqrt((n.x-p)*(n.x-p)+(n.y-m)*(n.y-m))),u+=k[(T-2)/2]}p=j,m=I}return z.free(n),0>(t=l/o)?0:1<t?1:t}u=this.startY;var c=this.endX;if(s=this.endY,(l=this.startX)!==c||u!==s){o=2*(e=c-l)+2*(i=s-u),n=t.x,t=t.y,n=Math.min(Math.max(n,l),c),t=Math.min(Math.max(t,u),s),l=Math.abs(n-l),c=Math.abs(n-c),u=Math.abs(t-u),s=Math.abs(t-s);var p=Math.min(l,c,u,s);if(p===u)return n/o;if(p===c)return(e+t)/o;if(p===s)return(2*e+i-n)/o;if(p===l)return(2*e+2*i-t)/o}}return 0},L.add=function(t){return this.ee.add(t),this},L.pm=function(t,e,i,n,s,o,l,u){return this._isFrozen&&Lt(this),this.fg=new f(t,e,s,o).freeze(),this.gg=new f(i,n,l,u).freeze(),this},Tt.Object.defineProperties(rt.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},flattenedSegments:{get:function(){return Cg(this),this.sk}},flattenedLengths:{get:function(){return Cg(this),this.ym}},flattenedTotalLength:{get:function(){var t=this.zm;if(isNaN(t)){if(this.type===rt.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===rt.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var i=(e=this.flattenedLengths).length,n=t=0;n<i;n++)for(var s=e[n],o=s.length,l=0;l<o;l++)t+=s[l];this.zm=t}return t}},type:{get:function(){return this.na},set:function(t){this.na!==t&&(this._isFrozen&&Lt(this,t),this.na=t,t===rt.o?this.ee=new dt:(null===rt.V&&(rt.V=(new dt).freeze()),this.ee=rt.V),this._isInvalidBounds=!0)}},startX:{get:function(){return this.od},set:function(t){this.od!==t&&(this._isFrozen&&Lt(this,t),this.od=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this._isFrozen&&Lt(this,t),this.pd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.Dc},set:function(t){this.Dc!==t&&(this._isFrozen&&Lt(this,t),this.Dc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.Ec},set:function(t){this.Ec!==t&&(this._isFrozen&&Lt(this,t),this.Ec=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.ee},set:function(t){this.ee!==t&&(this._isFrozen&&Lt(this,t),this.ee=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.fg},set:function(t){this._isFrozen&&Lt(this,t),this.fg=t.J()}},spot2:{get:function(){return this.gg},set:function(t){this._isFrozen&&Lt(this,t),this.gg=t.J()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this._isFrozen&&Lt(this,t),this.Uf=t}},bounds:{get:function(){return this.$u()&&this.computeBounds(),this.Ip}}}),rt.prototype.setSpots=rt.prototype.pm,rt.prototype.add=rt.prototype.add,rt.prototype.getFractionForPoint=rt.prototype.yx,rt.prototype.getPointAndAngleAlongPath=rt.prototype.Ru,rt.prototype.getAngleAlongPath=rt.prototype.xx,rt.prototype.getPointAlongPath=rt.prototype.Qu,rt.prototype.containsPoint=rt.prototype.ca,rt.prototype.transform=rt.prototype.transform,rt.prototype.rotate=rt.prototype.rotate,rt.prototype.scale=rt.prototype.scale,rt.prototype.offset=rt.prototype.offset,rt.prototype.normalize=rt.prototype.normalize,rt.prototype.computeBoundsWithoutOrigin=rt.prototype.jx,rt.prototype.equalsApprox=rt.prototype.Xa,rt.className="Geometry",rt.j=new ut(rt,"Line",0),rt.u=new ut(rt,"Rectangle",1),rt.F=new ut(rt,"Ellipse",2),rt.o=new ut(rt,"Path",3),rt.V=null,rt.hb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",rt.className="Geometry",rt.stringify=rt.ia,rt.fillPath=rt.nb,rt.parse=rt.parse,rt.Line=rt.j,rt.Rectangle=rt.u,rt.Ellipse=rt.F,rt.Path=rt.o,Je.prototype.copy=function(){var t=new Je;t.l=-2&this.l,t.od=this.od,t.pd=this.pd;for(var e=this.pl.s,i=e.length,n=t.pl,s=0;s<i;s++){var o=e[s].copy();n.add(o)}return t.sr=this.sr,t.gw=this.gw,t},(L=Je.prototype).Xa=function(t){if(!(t instanceof Je&&_.B(this.startX,t.startX)&&_.B(this.startY,t.startY)))return!1;var e=this.segments.s,i=e.length;if(i!==(t=t.segments.s).length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0},L.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.s,n=i.length,s=0;s<n;s++)e+=" "+i[s].toString(t);return e},L.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},L.ka=function(){this._isFrozen=!1;var t=this.segments;t.ka();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].ka();return this},L.$u=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.sr!==t.Ja)return!0;for(var e=(t=t.s).length,i=0;i<e;i++)if(t[i]._isInvalidBounds)return!0;return!1},L.add=function(t){return this.pl.add(t),this},L.ca=function(t,e,i){for(var n=this.startX,s=this.startY,o=n,l=s,u=this.segments.s,c=u.length,p=0;p<c;p++){var m=u[p];switch(m.type){case jn:o=m.endX,l=m.endY,n=m.endX,s=m.endY;break;case pe:if(_.Zb(n,s,m.endX,m.endY,i,t,e))return!0;n=m.endX,s=m.endY;break;case cn:if(_.cs(n,s,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,t,e,i))return!0;n=m.endX,s=m.endY;break;case cs:if(_.kv(n,s,m.point1X,m.point1Y,m.endX,m.endY,.5,t,e,i))return!0;n=m.endX,s=m.endY;break;case Oe:case Jn:var v=m.type===Oe?Ws(m,this):pr(m,this,n,s),w=v.length,k=m.type===Oe?m.centerX:m.endX,A=m.type===Oe?m.centerY:m.endY;if(0===w){if(_.Zb(n,s,k,A,i,t,e))return!0;n=k,s=A;break}for(k=null,A=0;A<w;A++)if(k=v[A],0===A&&_.Zb(n,s,k[0],k[1],i,t,e)||_.cs(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],.5,t,e,i))return!0;null!==k&&(n=k[6],s=k[7]);break;default:Q("Unknown Segment type: "+m.type)}if(m.isClosed&&(n!==o||s!==l)&&_.Zb(n,s,o,l,i,t,e))return!0}return!1},Tt.Object.defineProperties(Je.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},isFilled:{get:function(){return 0!=(4&this.l)},set:function(t){this._isFrozen&&Lt(this,t),this.l=t?4|this.l:-5&this.l}},isShadowed:{get:function(){return 0!=(8&this.l)},set:function(t){this._isFrozen&&Lt(this,t),this.l=t?8|this.l:-9&this.l}},isEvenOdd:{get:function(){return 0!=(16&this.l)},set:function(t){this._isFrozen&&Lt(this,t),this.l=t?16|this.l:-17&this.l}},startX:{get:function(){return this.od},set:function(t){this._isFrozen&&Lt(this,t),this.od=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.pd},set:function(t){this._isFrozen&&Lt(this,t),this.pd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.pl},set:function(t){this._isFrozen&&Lt(this,t),this.pl=t,this._isInvalidBounds=!0}}}),Je.prototype.add=Je.prototype.add,Je.prototype.equalsApprox=Je.prototype.Xa,Je.className="PathFigure",Ht.prototype.copy=function(){var t=new Ht;return t.na=this.na,t.l=-2&this.l,t.Dc=this.Dc,t.Ec=this.Ec,t.Ne=this.Ne,t.Vh=this.Vh,t.Wh=this.Wh,t.Pg=this.Pg,t},(L=Ht.prototype).Xa=function(t){if(!(t instanceof Ht)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case jn:case pe:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY);case cn:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.point1X,t.point1X)&&_.B(this.point1Y,t.point1Y)&&_.B(this.point2X,t.point2X)&&_.B(this.point2Y,t.point2Y);case cs:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.point1X,t.point1X)&&_.B(this.point1Y,t.point1Y);case Oe:return _.B(this.startAngle,t.startAngle)&&_.B(this.sweepAngle,t.sweepAngle)&&_.B(this.centerX,t.centerX)&&_.B(this.centerY,t.centerY)&&_.B(this.radiusX,t.radiusX)&&_.B(this.radiusY,t.radiusY);case Jn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&_.B(this.xAxisRotation,t.xAxisRotation)&&_.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.radiusX,t.radiusX)&&_.B(this.radiusY,t.radiusY);default:return!1}},L.qb=function(t){t.classType===Ht&&(this.type=t)},L.toString=function(t){switch(void 0===t&&(t=-1),this.type){case jn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case pe:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case cn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case cs:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Oe:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Jn:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return this._isFrozen=!1,this},L.close=function(){return this.isClosed=!0,this},Tt.Object.defineProperties(Ht.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},isClosed:{get:function(){return 0!=(8&this.l)},set:function(t){this.isClosed!==t&&(this.l=t?8|this.l:-9&this.l,this._isInvalidBounds=!0)}},type:{get:function(){return this.na},set:function(t){this._isFrozen&&Lt(this,t),this.na=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.Dc},set:function(t){this._isFrozen&&Lt(this,t),this.Dc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.Ec},set:function(t){this._isFrozen&&Lt(this,t),this.Ec=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Lt(this,t),this.Ne=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Vh},set:function(t){this._isFrozen&&Lt(this,t),this.Vh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Wh},set:function(t){this._isFrozen&&Lt(this,t),this.Wh=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Pg},set:function(t){this._isFrozen&&Lt(this,t),this.Pg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Lt(this,t),this.Ne=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Vh},set:function(t){this._isFrozen&&Lt(this,t),this.Vh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Wh},set:function(t){0>t&&ie(t,">= zero",Ht,"radiusX"),this._isFrozen&&Lt(this,t),this.Wh=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Pg},set:function(t){0>t&&ie(t,">= zero",Ht,"radiusY"),this._isFrozen&&Lt(this,t),this.Pg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.Dc},set:function(t){this._isFrozen&&Lt(this,t),0>(t%=360)&&(t+=360),this.Dc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.Ec},set:function(t){this._isFrozen&&Lt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Ec=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return 0!=(4&this.l)},set:function(t){this._isFrozen&&Lt(this,t),this.l=t?4|this.l:-5&this.l,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return 0!=(16&this.l)},set:function(t){this._isFrozen&&Lt(this,t),this.l=t?16|this.l:-17&this.l,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Lt(this,t),0>(t%=360)&&(t+=360),this.Ne=t,this._isInvalidBounds=!0}}}),Ht.prototype.equalsApprox=Ht.prototype.Xa;var jn=new ut(Ht,"Move",0),pe=new ut(Ht,"Line",1),cn=new ut(Ht,"Bezier",2),cs=new ut(Ht,"QuadraticBezier",3),Oe=new ut(Ht,"Arc",4),Jn=new ut(Ht,"SvgArc",4);function dn(){this.H=null,this.xu=new z(0,0).freeze(),this.mt=new z(0,0).freeze(),this.Bp=this.Rq=0,this.Cp=1,this.xq="",this.Wr=this.Tp=!1,this.Rp=this.Ep=0,this.xg=this.nq=this.tq=!1,this.Zp=null,this.Rr=0,this.xd=this.Nr=null}function Wr(){this.H=null,this.xa="",this.ar=this.Lr=null}function ge(){this.Fm=de,this.rf=this.Qq="",this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.dc=null}Ht.className="PathSegment",Ht.Move=jn,Ht.Line=pe,Ht.Bezier=cn,Ht.QuadraticBezier=cs,Ht.Arc=Oe,Ht.SvgArc=Jn,dn.prototype.copy=function(){var t=new dn;return this.clone(t)},dn.prototype.clone=function(t){return t.H=this.H,t.xu.assign(this.viewPoint),t.mt.assign(this.documentPoint),t.Rq=this.Rq,t.Bp=this.Bp,t.Cp=this.Cp,t.xq=this.xq,t.Tp=this.Tp,t.Wr=this.Wr,t.Ep=this.Ep,t.Rp=this.Rp,t.tq=this.tq,t.nq=this.nq,t.xg=this.xg,t.Zp=this.Zp,t.Rr=this.Rr,t.Nr=this.Nr,t.xd=this.xd,t},dn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},dn.prototype.So=function(t,e){var i=this.diagram;return null===i||fm(i,t,e),e},dn.prototype.Cz=function(t,e){var i=this.diagram;return null===i||(fm(i,t,e),e.assign(i.Ps(e))),e},Tt.Object.defineProperties(dn.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.xu},set:function(t){this.xu.assign(t)}},documentPoint:{get:function(){return this.mt},set:function(t){this.mt.assign(t)}},modifiers:{get:function(){return this.Rq},set:function(t){this.Rq=t}},button:{get:function(){return this.Bp},set:function(t){if(this.Bp=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Cp},set:function(t){this.Cp=t}},key:{get:function(){return this.xq},set:function(t){this.xq=t}},down:{get:function(){return this.Tp},set:function(t){this.Tp=t}},up:{get:function(){return this.Wr},set:function(t){this.Wr=t}},clickCount:{get:function(){return this.Ep},set:function(t){this.Ep=t}},delta:{get:function(){return this.Rp},set:function(t){this.Rp=t}},isMultiTouch:{get:function(){return this.tq},set:function(t){this.tq=t}},handled:{get:function(){return this.nq},set:function(t){this.nq=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Zp},set:function(t){this.Zp=t}},isTouchEvent:{get:function(){var t=this.event;return null!==t&&("touch"===t.pointerType||"pen"===t.pointerType)}},timestamp:{get:function(){return this.Rr},set:function(t){this.Rr=t}},targetDiagram:{get:function(){return this.Nr},set:function(t){this.Nr=t}},targetObject:{get:function(){return this.xd},set:function(t){this.xd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),dn.prototype.getMultiTouchDocumentPoint=dn.prototype.Cz,dn.prototype.getMultiTouchViewPoint=dn.prototype.So,dn.className="InputEvent",Wr.prototype.copy=function(){var t=new Wr;return t.H=this.H,t.xa=this.xa,t.Lr=this.Lr,t.ar=this.ar,t},Wr.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},Tt.Object.defineProperties(Wr.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},subject:{get:function(){return this.Lr},set:function(t){this.Lr=t}},parameter:{get:function(){return this.ar},set:function(t){this.ar=t}}}),Wr.className="DiagramEvent",ge.prototype.clear=function(){this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.dc=null},ge.prototype.copy=function(){var t=new ge;t.Fm=this.Fm,t.Qq=this.Qq,t.rf=this.rf,t.dc=this.dc,t.H=this.H,t.Qn=this.Qn;var e=this.Sn;return t.Sn=le(e)&&"function"==typeof e.J?e.J():e,t.Rn=le(e=this.Rn)&&"function"==typeof e.J?e.J():e,t.Mn=le(e=this.Mn)&&"function"==typeof e.J?e.J():e,t.Ln=le(e=this.Ln)&&"function"==typeof e.J?e.J():e,t},ge.prototype.qb=function(t){t.classType===ge&&(this.change=t)},ge.prototype.toString=function(){var t="";return t=this.change===$n?t+"* ":this.change===de?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===$n?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=Vi(this.object)),null!==this.oldValue&&(t+="  old: "+Vi(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+Vi(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},ge.prototype.I=function(t){return t?this.oldValue:this.newValue},ge.prototype.Ez=function(t){return t?this.oldParam:this.newParam},ge.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},ge.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},ge.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},ge.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},Tt.Object.defineProperties(ge.prototype,{model:{get:function(){return this.dc},set:function(t){this.dc=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.Fm},set:function(t){this.Fm=t}},modelChange:{get:function(){return this.Qq},set:function(t){this.Qq=t}},propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},isTransactionFinished:{get:function(){return this.Fm===$n&&("CommittedTransaction"===this.rf||"FinishedUndo"===this.rf||"FinishedRedo"===this.rf)}},object:{get:function(){return this.Qn},set:function(t){this.Qn=t}},oldValue:{get:function(){return this.Sn},set:function(t){this.Sn=t}},oldParam:{get:function(){return this.Rn},set:function(t){this.Rn=t}},newValue:{get:function(){return this.Mn},set:function(t){this.Mn=t}},newParam:{get:function(){return this.Ln},set:function(t){this.Ln=t}}}),ge.prototype.redo=ge.prototype.redo,ge.prototype.canRedo=ge.prototype.canRedo,ge.prototype.undo=ge.prototype.undo,ge.prototype.canUndo=ge.prototype.canUndo,ge.prototype.getParam=ge.prototype.Ez,ge.prototype.getValue=ge.prototype.I,ge.prototype.clear=ge.prototype.clear;var $n=new ut(ge,"Transaction",-1),de=new ut(ge,"Property",0),ze=new ut(ge,"Insert",1),Ue=new ut(ge,"Remove",2);function qe(){this.o=(new dt).freeze(),this.xa="",this.j=!1}function we(){this.Pt=new ht,this.Jd=!1,this.u=(new dt).freeze(),this.Ce=-1,this.o=999,this.Fe=!1,this.Np=null,this.bi=0,this.j=!1,this.Ie=(new dt).freeze(),this.gl=new dt,this.tt=!0,this.Dt=this.rq=this.Gt=this.Ft=!1}function Ag(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Fi("Ending transaction without having started a transaction: "+i);var n=1===t.transactionLevel,s=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Pb("CommittingTransaction",i,s));var o=0;if(0<t.transactionLevel&&(t.bi--,t.isEnabled)){var l=t.Ie.count;0<l&&(""===i&&(i=t.Ie.M(0)),t.Ie.ka(),t.Ie.mb(l-1),t.Ie.freeze()),0<(l=t.gl.count)&&(o=t.gl.M(l-1),t.gl.mb(l-1))}if(n){if(e)t.rq=!1,null===s&&""!==i&&(s=t.currentTransaction),t.isEnabled&&null!==s&&(s.isComplete||(s.isComplete=!0,s.name=i),t.mx(),(e=t.history).ka(),0<=(n=t.maxHistoryLength)&&(0===n?e.clear():e.count>=n&&(null!==(o=e.M(0))&&o.clear(),e.mb(0),t.Ce--)),0===n||0!==e.count&&e.get(e.count-1)===s||(e.add(s),t.Ce++),e.freeze()),t.isInternalTransaction||t.Pb("CommittedTransaction",i,s);else{t.Fe=!0;try{t.isEnabled&&null!==s&&(s.isComplete=!0,s.undo())}finally{t.isInternalTransaction||t.Pb("RolledBackTransaction",i,s),t.Fe=!1}null!==s&&s.clear()}return t.Np=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==s){for(t=o,s=(i=s.changes).count-1;s>=t;s--)null!==(e=i.M(s))&&e.undo(),i.ka(),i.mb(s);i.freeze()}return!1}function Yt(){Ye(this),this.H=za,this.xa="",this.Jd=!0,this.nb=!1,this.wm=null,this.zy=new dn,this.Zr=-1}function me(){Yt.call(this),this.name="ToolManager",this.hb=new dt,this.ob=new dt,this.Ib=new dt,this.F=this.V=850,this.o=new Mt(2,2).ja(),this.Ha=5e3,this.ia=La,this.u=Lg,this.Mp=this.j=null,this.zj=-1}function Pg(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}ge.className="ChangedEvent",ge.Transaction=$n,ge.Property=de,ge.Insert=ze,ge.Remove=Ue,qe.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.M(i);null!==n&&(e+="\n  "+n.toString())}}return e},qe.prototype.clear=function(){var t=this.changes;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);null!==i&&i.clear()}t.clear(),t.freeze()},qe.prototype.canUndo=function(){return this.isComplete},qe.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.M(t);null!==e&&e.undo()}},qe.prototype.canRedo=function(){return this.isComplete},qe.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.M(e);null!==i&&i.redo()}},qe.prototype.$j=function(){if(this.isComplete){var t=this.changes;t.ka();for(var e=new kt,i=0;i<t.count;i++){var n=t.M(i);if(null!==n&&n.change===de&&n.object){var s=e.get(n.object);s||(s=new kt,e.set(n.object,s));var o=s.get(n.propertyName);null===o?s.set(n.propertyName,-1):(0<o&&t.cd(o,null),s.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)null!==(n=t.M(i))&&(i>e&&t.cd(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},Tt.Object.defineProperties(qe.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),qe.prototype.optimize=qe.prototype.$j,qe.prototype.redo=qe.prototype.redo,qe.prototype.canRedo=qe.prototype.canRedo,qe.prototype.undo=qe.prototype.undo,qe.prototype.canUndo=qe.prototype.canUndo,qe.prototype.clear=qe.prototype.clear,qe.className="Transaction",we.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.M(n);if(e+="]",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+="\n "+this.history.M(n).toString(t-1);return e},we.prototype.clear=function(){var t=this.history;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);null!==i&&i.clear()}t.clear(),this.Ce=-1,t.freeze(),this.Fe=!1,this.Np=null,this.bi=0,this.Ie.ka(),this.Ie.clear(),this.Ie.freeze(),this.gl.clear(),this.Dt=this.rq=this.Gt=this.Ft=!1},we.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(L=we.prototype).Yw=function(t){this.Pt.add(t)},L.Sx=function(t){this.Pt.remove(t)},L.Ea=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.tt&&(this.tt=!1,this.bi++,this.isInternalTransaction||this.Pb("StartingFirstTransaction",t,this.currentTransaction),0<this.bi&&this.bi--),this.isEnabled&&(this.Ie.ka(),this.Ie.add(t),this.Ie.freeze(),this.gl.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.bi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Pb("StartedTransaction",t,this.currentTransaction)),e},L.eb=function(t){return void 0===t&&(t=""),Ag(this,!0,t)},L.Kf=function(){return Ag(this,!1,"")},L.mx=function(){if(!this.isUndoingRedoing&&this.canRedo()){var t=this.history;t.ka();for(var e=t.count-1;e>this.historyIndex;e--){var i=t.M(e);null!==i&&i.clear(),t.mb(e),this.rq=!0}t.freeze()}},we.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},we.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.Fe=!0,this.Pb("StartingUndo","Undo",t),this.Ce--,t.undo()}catch(e){Fi("undo error: "+e.toString())}finally{this.Pb("FinishedUndo","Undo",t),this.Fe=!1}}},we.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},we.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.Fe=!0,this.Pb("StartingRedo","Redo",t),this.Ce++,t.redo()}catch(e){Fi("redo error: "+e.toString())}finally{this.Pb("FinishedRedo","Redo",t),this.Fe=!1}}},we.prototype.Pb=function(t,e,i){void 0===i&&(i=null);var n=new ge;for(n.change=$n,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)n.model=e=t.value,e.ds(n)},we.prototype.Uu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Np=e=new qe);var i=t.copy();(e=e.changes).ka(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.tt&&(null!==(t=t.diagram)&&!1===t.pi||Fi("Change not within a transaction: "+i.toString()))}},we.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Tt.Object.defineProperties(we.prototype,{models:{get:function(){return this.Pt.iterator}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.M(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.M(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.Fe}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.Ce}},currentTransaction:{get:function(){return this.Np}},transactionLevel:{get:function(){return this.bi}},isInTransaction:{get:function(){return 0<this.bi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.Ie}},isPendingClear:{get:function(){return this.Ft},set:function(t){this.Ft=t}},isPendingUnmodified:{get:function(){return this.Gt},set:function(t){this.Gt=t}},isInternalTransaction:{get:function(){return this.Dt},set:function(t){this.Dt=t}},isJustDiscarded:{get:function(){return this.rq}}}),we.prototype.handleChanged=we.prototype.Uu,we.prototype.redo=we.prototype.redo,we.prototype.undo=we.prototype.undo,we.prototype.canUndo=we.prototype.canUndo,we.prototype.discardHistoryAfterIndex=we.prototype.mx,we.prototype.rollbackTransaction=we.prototype.Kf,we.prototype.commitTransaction=we.prototype.eb,we.prototype.startTransaction=we.prototype.Ea,we.prototype.removeModel=we.prototype.Sx,we.prototype.addModel=we.prototype.Yw,we.prototype.clear=we.prototype.clear,we.className="UndoManager",Yt.prototype.toString=function(){return""!==this.name?this.name+" Tool":ws(this.constructor)},Yt.prototype.updateAdornments=function(){},Yt.prototype.canStart=function(){return this.isEnabled},Yt.prototype.doStart=function(){},Yt.prototype.doActivate=function(){this.isActive=!0},Yt.prototype.doDeactivate=function(){this.isActive=!1},Yt.prototype.doStop=function(){},Yt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Yt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Yt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Yt.prototype.doMouseMove=function(){},Yt.prototype.doMouseUp=function(){this.stopTool()},Yt.prototype.doMouseWheel=function(){},Yt.prototype.canStartMultiTouch=function(){return!0},Yt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,z.allocAt(NaN,NaN)),n=e.So(1,z.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){t.Cw=t.scale;var s=n.x-i.x,o=n.y-i.y;t.Kw=Math.sqrt(s*s+o*o),e.bubbles=!1}z.free(i),z.free(n)},Yt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,z.allocAt(NaN,NaN)),n=e.So(1,z.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){var s=n.x-i.x,o=n.y-i.y;o=Math.sqrt(s*s+o*o)/t.Kw,s=new z((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2);var l=t.commandHandler;if((o*=t.Cw)!==t.scale&&l.canResetZoom(o)){var u=t.zoomPoint;t.zoomPoint=s,l.resetZoom(o),t.zoomPoint=u}e.bubbles=!1}z.free(i),z.free(n)},Yt.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Yt.prototype.doKeyUp=function(){},Yt.prototype.Ea=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.Ea(t)},Yt.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Kf():t.eb(this.transactionResult)},Yt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Ol(e.documentPoint,!1);if(null!==i){if(wi?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.S("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(wi?e.meta:e.control)||e.shift||t.clearSelection()}},Yt.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(s){return!s.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.jc(n.documentPoint,t,e),n.targetObject=t,function p0(t,e,i){if(e.handled=!1,null===t||t.If()){var n=0;e.left?n=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(n=3);var s="ObjectSingleClicked";if(null!==t){switch(n){case 1:s="ObjectSingleClicked";break;case 2:s="ObjectDoubleClicked";break;case 3:s="ObjectContextClicked"}0!==n&&i.S(s,t)}else{switch(n){case 1:s="BackgroundSingleClicked";break;case 2:s="BackgroundDoubleClicked";break;case 3:s="BackgroundContextClicked"}0!==n&&i.S(s)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(null!==i&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}null!==t&&t(e)}}}(t,n,i),n.handled},Yt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.Ab){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.ca(e.documentPoint)?t.jc(e.documentPoint,null,null):null;!e.event||"pointercancel"!==e.event.type&&"pointerout"!==e.event.type||(n=null),e.targetObject=n;var s=!1;if(n!==t.Bk){var o=t.Bk,l=o;for(t.Bk=n,this.doCurrentObjectChanged(o,n),e.handled=!1;null!==o;){var u=o.mouseLeave;if(null!==u&&(n===o||null!==n&&n.rg(o)||(u(e,o,n),s=!0,e.handled)))break;o=o.panel}for(o=l,e.handled=!1;null!==n&&(null===(l=n.mouseEnter)||!(o===n||null!==o&&o.rg(n)||(l(e,n,o),s=!0,e.handled)));)n=n.panel;n=t.Bk}if(null!==n){for(o=n,l="";null!==o&&""===(l=o.cursor);)o=o.panel;for(t.currentCursor=l,e.handled=!1,o=n;null!==o&&(null===(n=o.mouseOver)||(n(e,o),s=!0,!e.handled));)o=o.panel}else this.doUpdateCursor(null),null!==(n=t.mouseOver)&&(n(e),s=!0);s&&t.ac(),t.skipsUndoManager=i}},Yt.prototype.doUpdateCursor=function(){var t=this.diagram;t&&(t.currentCursor="")},Yt.prototype.doCurrentObjectChanged=function(){},Yt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(0!==i&&t.documentBounds.w()){var n=t.commandHandler,s=t.toolManager.mouseWheelBehavior;if(null!==n&&(s===Vl&&!e.shift||s===La&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(s=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=s),e.bubbles=!1;else if(s===Vl&&e.shift||s===La&&!e.control){n=t.position.copy();var o=e.event;s=o.deltaMode;var l=o.deltaX;o=o.deltaY;var u="pixel";if(0===l&&0===o||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll(u,0<(i=3*i*t.scrollVerticalLineChange)?"up":"down",Math.abs(i)):e.shift&&t.allowHorizontalScroll&&t.scroll(u,0<(i=3*i*t.scrollHorizontalLineChange)?"left":"right",Math.abs(i));else{switch(s){case 0:u="pixel";break;case 1:u="line";break;case 2:u="page"}0!==l&&t.allowHorizontalScroll&&t.scroll(u,0<(l*=t.scrollHorizontalLineChange/16)?"right":"left",Math.abs(l)),0!==o&&t.allowVerticalScroll&&t.scroll(u,0<(o*=t.scrollVerticalLineChange/16)?"down":"up",Math.abs(o))}this.doWheelChange(t,n,e)}}},Yt.prototype.doWheelChange=function(t,e,i){t.position.D(e)&&0===i.event.wheelDeltaX||(i.bubbles=!1)},Yt.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.zy);this.Zr=On(function(){i.doWaitAfter(n)},t)},Yt.prototype.cancelWaitAfter=function(){-1!==this.Zr&&St.clearTimeout(this.Zr),this.Zr=-1},Yt.prototype.doWaitAfter=function(){},Yt.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.jc(t,function(i){for(;null!==i&&!(i.panel instanceof Bt);)i=i.panel;return i}))?null:t.part.category===e?t:null},Yt.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;void 0===t&&(t=i.firstInput.viewPoint),void 0===e&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,s=n.width;return n=n.height,i.firstInput.isTouchEvent&&(s+=6,n+=6),Math.abs(e.x-t.x)>s||Math.abs(e.y-t.y)>n},Tt.Object.defineProperties(Yt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof $&&(this.H=t)}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},isActive:{get:function(){return this.nb},set:function(t){this.nb=t}},transactionResult:{get:function(){return this.wm},set:function(t){this.wm=t}}}),Yt.prototype.startTransaction=Yt.prototype.Ea,Yt.className="Tool",Vt(me,Yt),me.prototype.initializeStandardTools=function(){},me.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Bt&&this.Mp===t){var i=e.adornedObject;(null!==t?i.part===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},me.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===wu&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Dd)return void(e.bubbles=!0);if(this.gestureBehavior===wu)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var s=this.mouseDownTools.M(n);if(s.diagram=this.diagram,s.canStart())return t.doFocus(),t.currentTool=s,void(t.currentTool===s&&(s.isActive||s.doActivate(),s.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===La?this.mouseWheelBehavior=Vl:this.mouseWheelBehavior===Vl&&(this.mouseWheelBehavior=La)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},me.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Dd)return void(e.bubbles=!0);if(this.gestureBehavior===wu)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var s=this.mouseMoveTools.M(n);if(s.diagram=this.diagram,s.canStart())return t.doFocus(),t.currentTool=s,void(t.currentTool===s&&(s.isActive||s.doActivate(),s.doMouseMove()))}Pg(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},me.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Bt&&(e===t||e.rg(t))||this.hideToolTip()},me.prototype.doWaitAfter=function(t){var e=this.diagram;null!==e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.qu=!0,e.doMouseUp()))},me.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.jc(e.documentPoint,null,null));var i=e.targetObject;if(null!==i)for(e.handled=!1;null!==i&&(null===(t=this.isActive?i.mouseHold:i.mouseHover)||(t(e,i),!e.handled));)i=i.panel;else null!==(i=this.isActive?t.mouseHold:t.mouseHover)&&i(e)},me.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.jc(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Bt)||e!==t&&!e.rg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},me.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Bt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Va(),this.positionToolTip(t,e)}else t instanceof co&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,-1!==this.zj&&(St.clearTimeout(this.zj),this.zj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var s=this;this.zj=On(function(){s.hideToolTip()},t)}},me.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,s=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>s.right&&(i.x-=n.width+5/e.scale),i.x<s.x&&(i.x=s.x),i.y=i.y+20/e.scale+n.height>s.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<s.y&&(i.y=s.y),t.position=i}},me.prototype.hideToolTip=function(){-1!==this.zj&&(St.clearTimeout(this.zj),this.zj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Bt?(t.remove(e),null!==this.Mp&&this.Mp.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof co&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},me.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.M(i);if(n.diagram=this.diagram,n.canStart())return t.doFocus(),t.currentTool=n,void(t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()},me.prototype.doMouseWheel=function(){this.standardMouseWheel()},me.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},me.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},me.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.M(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if((n=this.mouseMoveTools.M(i)).name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if((n=this.mouseUpTools.M(i)).name===t)return n;return null},me.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var s=this.mouseDownTools.M(n);if(s.name===t)return null!==e?this.mouseDownTools.cd(n,e):this.mouseDownTools.mb(n),s}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if((s=this.mouseMoveTools.M(n)).name===t)return null!==e?this.mouseMoveTools.cd(n,e):this.mouseMoveTools.mb(n),s;for(i=this.mouseUpTools.length,n=0;n<i;n++)if((s=this.mouseUpTools.M(n)).name===t)return null!==e?this.mouseUpTools.cd(n,e):this.mouseUpTools.mb(n),s;return null},me.prototype.gb=function(t,e,i){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&i.add(e)},Tt.Object.defineProperties(me.prototype,{mouseWheelBehavior:{get:function(){return this.ia},set:function(t){this.ia=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Mp=null!==t&&t instanceof Bt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.hb}},mouseMoveTools:{get:function(){return this.ob}},mouseUpTools:{get:function(){return this.Ib}},hoverDelay:{get:function(){return this.V},set:function(t){this.V=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.J()}},toolTipDuration:{get:function(){return this.Ha},set:function(t){this.Ha=t}}}),me.prototype.replaceStandardTool=me.prototype.gb;var Ur,La=new ut(me,"WheelScroll",0),Vl=new ut(me,"WheelZoom",1),g0=new ut(me,"WheelNone",2),Lg=new ut(me,"GestureZoom",3),wu=new ut(me,"GestureCancel",4),Dd=new ut(me,"GestureNone",5);function ye(){Yt.call(this),this.name="Dragging",this.u=this.Tw=this.ob=!0,this.o=this.Ha=this.V=this.Oe=null,this.Ym=this.Ib=!1,this.tl=new z(NaN,NaN),this.Fr=new z,this.hb=!0,this.Hk=100,this.Cg=[],this.te=(new ht).freeze(),this.ia=new Ga,this.Bn=null,this.F="copy",this.Oc="",this.Pc="no-drop"}function zd(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.Vj()&&1===e.count&&e.first()instanceof st?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Dj(),t.Oe=i.toolManager.findTool("Relinking"),null===t.Oe&&(t.Oe=new Mn,t.Oe.diagram=i),t.Oe.originalLink=t.draggedLink):(t.draggedLink=null,t.Oe=null))}}function Bd(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,Fg(t,e.lastInput,null),e.skipsUndoManager=i,t.Cg.length=0}function Tg(){var t=ii;Vo(t),Yd(t);var e=t.diagram;t.tl.w()&&(e.position=t.tl),e.ug()}function Rd(t,e){if(null===t.copiedParts){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&null!==t.draggedParts){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?null!==n.currentTransaction&&0<n.currentTransaction.changes.count&&(i.undoManager.Kf(),i.Ea("Drag")):Yd(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Lf():i.selection,e=i.Jj(e,i,!0),i=new kt,n=t.draggedParts.iterator;n.next();){var s=n.key;if(s.Zc()&&s.canCopy()){var o=e.I(s);null!==o&&(o.location=s.location,o.Va(),i.add(o,t.Pd(o.location)))}}for(e=e.iterator;e.next();)(n=e.value)instanceof st&&n.canCopy()&&i.add(n,t.Pd());t.copiedParts=i,zd(t,i.Lf()),null!==t.draggedLink&&Co(i=t.draggedLink,t.startPoint.x-((e=i.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null)}}}function Vo(t){var e=t.diagram;if(null!==t.copiedParts){if(e.Is(t.copiedParts.Lf(),!1),t.copiedParts=null,null!==t.draggedParts)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof st&&(i.value.point=new z(0,0));t.doUpdateCursor(null)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Ng(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.Oe){var e=t.Oe;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Oe.originalLink=null}t.draggedLink=null,t.Oe=null}}function Kr(t,e,i){var n=t.diagram,s=t.startPoint,o=z.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.re(s),i),z.free(o),!0===n.Gf("temporaryPixelRatio")&&null===n.Yh&&30<n.ax&&($l(n),n.gk())}function Yd(t){if(null!==t.draggedParts){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Zc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if((n=i.key)instanceof st&&n.suspendsRouting){var s=i.value.point;t.draggedParts.add(n,t.Pd()),Co(n,-s.x,-s.y)}e.bd()}}function Xd(t,e){var i=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Eg(t,!1));var n=t.findDragOverObject(e),s=i.lastInput;s.targetObject=n,t.doUpdateCursor(n);var o=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=Fg(t,s,n),!t.isActive&&null===ii)return;var u=null!==n?n.part:null;if(null===u||i.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof At)){var c=i.mouseDragOver;null!==c&&(c(s),l=!0)}if(!t.isActive&&null===ii||(t.doDragOver(e,n),!t.isActive&&null===ii))return}finally{i.skipsUndoManager=o,l&&i.bd()}t.Bn=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.gs(s.viewPoint)}function Fg(t,e,i){var n=!1,s=t.Cg.length,o=0<s?t.Cg[0]:null;if(i===o)return!1;e.handled=!1;for(var l=0;l<s;l++){var u=t.Cg[l],c=u.mouseDragLeave;if(null!==c&&(c(e,u,i),n=!0,e.handled))break}if(t.Cg.length=0,!t.isActive&&null===ii||null===i)return n;for(e.handled=!1,s=i;null!==s;)t.Cg.push(s),s=Ig(s);for(s=t.Cg.length,i=0;i<s&&(null===(u=(l=t.Cg[i]).mouseDragEnter)||(u(e,l,o),n=!0,!e.handled));i++);return n}function Ig(t){var e=t.panel;return null!==e?e:t instanceof vt&&!(t instanceof At)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function Og(t,e,i){var n=t.Oe;if(null===n)return null;var s=t.diagram.og(e,n.portGravity,function(p){return n.findValidLinkablePort(p,i)});t=z.alloc();var o=1/0,l=null;for(s=s.iterator;s.next();){var u=s.value;if(null!==u.part){var c=u.ga(C,t);(c=e.Bf(c))<o&&(l=u,o=c)}}return z.free(t),l}function Eg(t,e){var i=t.draggedLink;if(null!==i&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var s=t.Oe;if(null!==s){var o=null,l=null;null===i.fromNode&&null!==(o=Og(t,i.i(0),!1))&&(l=o.part);var u=null,c=null;null===i.toNode&&null!==(u=Og(t,i.i(i.pointsCount-1),!0))&&(c=u.part),s.isValidLink(l,o,c,u)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,null!==o&&(i.fromPortId=o.portId),i.toNode=c,null!==u&&(i.toPortId=u.portId),i.fromPort!==n.Nx&&n.S("LinkRelinked",i,n.Nx),i.toPort!==n.Ox&&n.S("LinkRelinked",i,n.Ox)):Xg(s,l,o,c,u):Xg(s,null,null,null,null)}}}}function jg(t,e){var i=t.diagram;t.dragsLink&&Eg(t,!0),Bd(t);var n=t.findDragOverObject(e),s=i.lastInput;if(s.targetObject=n,null!==n){s.handled=!1;for(var o=n;null!==o;){var l=o.mouseDrop;if(null!==l&&(l(s,o),s.handled))break;m0(t,s,o),o=Ig(o)}}else null!==(o=i.mouseDrop)&&o(s);if(t.isActive||null!==ii){for(s=(t.copiedParts||t.draggedParts).iterator;s.next();)(o=s.key)instanceof ct&&o.linksConnected.each(function(u){u.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||null!==ii){for(t=q.alloc(),e=i.selection.iterator;e.next();)(n=e.value)instanceof ct&&y0(i,n,t);q.free(t)}}}function m0(t,e,i){i=i.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof At||null!==(i=t.mouseDrop)&&i(e)}function y0(t,e,i){var n=!1;if(i=e.getAvoidableRect(i),t.viewportBounds.Re(i)&&(n=!0),0!==(t=t.Ou(i,function(s){return s.part},function(s){return s instanceof st},!0,function(s){return s instanceof st},n)).count)for(t=t.iterator;t.next();)!(i=t.value).Td(e)&&i.isAvoiding&&i.bb()}function Dg(t,e,i,n){if(null===t.copiedParts){var s=t.diagram;if(!s.isReadOnly&&!s.isModelReadOnly){s.skipsUndoManager=!i,s.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=s.Jj(e,s,!0);var o=q.alloc();s=n=1/0;for(var l=-1/0,u=-1/0,c=e.iterator;c.next();){var p=c.value;if(p.isVisible()){var m=p.location;p=m.x,m=m.y,isNaN(p)||isNaN(m)||(p<n&&(n=p),m<s&&(s=m),p>l&&(l=p),m>u&&(u=m))}}for(n===1/0?o.h(0,0,0,0):o.h(n,s,l-n,u-s),n=o.x+o.width/2,s=o.y+o.height/2,q.free(o),o=t.Fr,l=new kt,u=z.alloc(),c=e.iterator;c.next();)(p=c.value)instanceof st&&p.canCopy()&&null!==(m=i.I(p))&&(m.points=p.points,Co(m,o.x-n,o.y-s),m.suspendsRouting=!0,l.add(m,t.Pd()));for(e=e.iterator;e.next();)(p=e.value).Zc()&&p.canCopy()&&null!==(c=i.I(p))&&(u.h(o.x-(n-(p=p.location).x),o.y-(s-p.y)),c.location=u,c.Va(),l.add(c,t.Pd(u)));z.free(u),t.copiedParts=l,zd(t,l.Lf()),null!==t.draggedLink&&Co(i=t.draggedLink,t.startPoint.x-((e=i.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null)}}}me.className="ToolManager",me.WheelScroll=La,me.WheelZoom=Vl,me.WheelNone=g0,me.GestureZoom=Lg,me.GestureCancel=wu,me.GestureNone=Dd,Vt(ye,Yt),ye.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Hk))&&null!==this.findDraggablePart()},ye.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.Ol(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},ye.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Ol(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(wi?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},ye.prototype.doActivate=function(){var t=this.diagram;this.Bn=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.Gu(!0),ii=null,this.isActive=!0,this.tl.set(t.position),zd(this,t.selection),this.Cg.length=0,t.animationManager.Cc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.Tw=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.Ns=!0,!0===t.Gf("temporaryPixelRatio")&&30<t.ax&&$l(t),Du(t,this.draggedParts),this.Ea("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Ym=!1,ii=this,gr=this.diagram,this.doSimulatedDragOut()))},ye.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ye.prototype.Pd=function(t){return new Go(void 0===t?_n:this.isGridSnapEnabled?new z(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},ye.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.Tw,t.Gu(!1),t.ug(),Bd(this),th(t,this.draggedParts),this.draggedParts=this.currentPart=this.Bn=null,this.Ym=this.isDragOutStarted=!1,0<Ur.count){for(var e=Ur,i=e.length,n=0;n<i;n++){var s=e.M(n);Ng(s),Vo(s),Bd(s),s.diagram.ug()}e.clear()}Ng(this),this.tl.h(NaN,NaN),null!==gr&&(gr.currentCursor=""),ii=gr=null,Vo(this),t.isMouseCaptured=!1,t.currentCursor="",t.Ns=!1,this.stopTransaction(),Iu(t,!0)},ye.prototype.stopTransaction=function(){var t=this.diagram,e=Yt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},ye.prototype.doCancel=function(){Vo(this),Yd(this);var t=this.diagram;this.tl.w()&&(t.position=this.tl),this.stopTool()},ye.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ye.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},ye.prototype.moveParts=function(t,e,i){void 0===i&&(i=!1);var n=this.diagram;null!==n&&cf(n,t,e,this.dragOptions,i)},ye.prototype.findDragOverObject=function(t){var e=this;return of(this.diagram,t,null,function(i){return!(i=null===i||!!(null===(i=i.part)||i instanceof Bt||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i)))})},ye.prototype.doUpdateCursor=function(t){var e=this.diagram;(null===t||this.Bn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},ye.prototype.doDragOver=function(){},ye.prototype.doDropOnto=function(){},ye.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Rd(this,!1),Du(t,this.copiedParts),Kr(this,this.copiedParts,!1),th(t,this.copiedParts)):this.mayMove()?(Vo(this),Kr(this,this.draggedParts,!0)):this.mayDragOut()?(Rd(this,!1),Kr(this,this.copiedParts,!1)):Vo(this),Xd(this,t.lastInput.documentPoint))}},ye.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&null!==this.copiedParts?(Vo(this),Rd(this,!0),Du(t,this.copiedParts),Kr(this,this.copiedParts,!1),th(t,this.copiedParts),null!==this.copiedParts&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(s){s.isSelected=!0}))):(e=!0,Vo(this),this.mayMove()&&(Kr(this,this.draggedParts,!0),Xd(this,t.lastInput.documentPoint))),this.Ym=!0,jg(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Lf():this.draggedParts.Lf();this.copiedParts=null,e&&function v0(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof ct&&(null===(i=i.containingGroup)||null===i.placeholder||t.draggedParts.contains(i)||i.placeholder.v())}}(this),t.Ya(),th(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.S(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.S("ChangedSelection",t.selection)}}},ye.prototype.simulatedMouseMove=function(t,e,i){if(null===ii)return!1;var n=ii.diagram;i instanceof $||(i=null);var s=gr;return i!==s&&(null!==s&&s!==n&&(s.ug(),ii.isDragOutStarted=!1,null!==(s=s.toolManager.findTool("Dragging"))&&s.doSimulatedDragLeave()),gr=i,null!==i&&i!==n&&(Tg(),null!==(s=i.toolManager.findTool("Dragging"))&&(Ur.contains(s)||Ur.add(s),s.doSimulatedDragEnter())),this.doUpdateCursor(null)),!(null===i||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert||(null!==(n=i.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),0))},ye.prototype.simulatedMouseUp=function(t,e,i){if(null===ii)return!1;var n=gr,s=ii.diagram;if(null===i)return ii.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool("Dragging");if(null!==n&&n!==s&&null!==o)return n.ug(),ii.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;gr=i,null!==(n=i.toolManager.findTool("Dragging"))&&(Tg(),Ur.contains(n)||Ur.add(n),n.doSimulatedDragEnter())}return i!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):null===e&&(e=new z),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!0,null!==(t=i.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=ii)&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0)},ye.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(wi?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ye.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ye.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},ye.prototype.computeBorder=function(t,e,i){return this.Ym||null===this.draggedParts||this.draggedParts.contains(t)?null:i.assign(e)},ye.prototype.Bz=function(){return ii},ye.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===ii||ii.diagram.model.dataFormat!==t.model.dataFormat)},ye.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Cc(),po(t),t.animationManager.Cc(),null!==(t=ii)&&(t.diagram.Ns=!1),this.doUpdateCursor(null)}},ye.prototype.doSimulatedDragLeave=function(){null!==ii&&ii.doSimulatedDragOut(),this.doCancel()},ye.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Dm=!0;var e=ii;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;Dg(this,e.draggedParts.Lf(),!1,t.firstInput),Kr(this,this.copiedParts,!1),Xd(this,t.lastInput.documentPoint)}t.animationManager.Dm=!1},ye.prototype.doSimulatedDrop=function(){var t=this.diagram,e=ii;if(null!==e){var i=e.diagram;if(e.Ym=!0,Vo(this),!this.mayDragIn())return;t.animationManager.Dm=!0,t.S("ChangingSelection",t.selection),this.Ea("Drop"),Dg(this,e.draggedParts.Lf(),!0,t.lastInput),Kr(this,this.copiedParts,!1);var n=new ht;null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(s){s.isSelected=!0,n.add(s)})),jg(this,t.lastInput.documentPoint),t.Ya(),null!==this.copiedParts&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",n,i),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.Dm=!1},ye.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Ns=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.Bn=null},ye.prototype.computeMove=function(t,e,i,n){return null!==(i=this.diagram)?i.computeMove(t,e,this.dragOptions,n):new z},Tt.Object.defineProperties(ye.prototype,{isCopyEnabled:{get:function(){return this.ob},set:function(t){this.ob=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ia},set:function(t){this.ia=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.hb},set:function(t){this.hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.D(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Oc},set:function(t){this.Oc=t}},nodropCursor:{get:function(){return this.Pc},set:function(t){this.Pc=t}},currentPart:{get:function(){return this.V},set:function(t){this.V=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ha},set:function(t){this.Ha=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Lf():null!==this.draggedParts?this.draggedParts.Lf():this.te}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Ib},set:function(t){this.Ib=t}},startPoint:{get:function(){return this.Fr},set:function(t){this.Fr.D(t)||this.Fr.assign(t)}},delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}}}),ye.prototype.getDraggingSource=ye.prototype.Bz;var ii=null,gr=null;function ci(){Yt.call(this),this.te=100,this.Ha=!1,this.u="pointer";var t=new st,e=new Pt;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new Pt).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Ci=t,t=new ct,(e=new Pt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Hr,t.add(e),t.selectable=!1,t.layerName="Tool",this.Bi=t,this.j=e,t=new ct,(e=new Pt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Hr,t.add(e),t.selectable=!1,t.layerName="Tool",this.Di=t,this.o=e,this.Pc=this.Oc=this.ob=this.hb=this.Ib=null,this.ia=!0,this.iy=new kt,this.Of=this.gj=this.Pf=null}function Hd(t,e,i,n){if(e===i)return!0;var s=e.fromNode;return!(null===s||!s.isLinkLabel||(n.add(s),!Hd(t,s.labeledLink,i,n)))||!(null===(e=e.toNode)||!e.isLinkLabel||(n.add(e),!Hd(t,e.labeledLink,i,n)))}function Gl(t,e,i,n,s){if(e===i)return!0;if(null===e||null===i)return!1;for(var o=e.linksConnected;o.next();){var l=o.value;if(l!==n&&(!s||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode)!==e&&Gl(t,l,i,n,s))return!0}return!1}function zg(t,e,i,n,s){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==s&&l.toNode===i&&(l=l.fromNode)!==i&&zg(t,e,l,n,s))return!0}return!1}function Bg(t,e,i,n,s){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==s){var u=l.fromNode;if(l=l.toNode,(u=u===i?l:u)!==i&&Bg(t,e,u,n,s))return!0}}return!1}function Bi(){ci.call(this),this.name="Linking",this.V={},this.F=null,this.K=bu,this.Xd=null}ye.className="DraggingTool",Ur=new dt,Gi("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),me.prototype.doCancel=function(){null!==ii&&ii.doCancel(),Yt.prototype.doCancel.call(this)},Vt(ci,Yt),ci.prototype.doStop=function(){this.diagram.ug(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},ci.prototype.copyPortProperties=function(t,e,i,n,s){if(null!==t&&null!==e&&null!==i&&null!==n){var o=e.Df(),l=Mt.alloc();l.width=e.naturalBounds.width*o,l.height=e.naturalBounds.height*o,n.desiredSize=l,Mt.free(l),s?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=C,o=z.alloc(),i.location=e.ga(C,o),z.free(o),n.angle=e.li(),null!==this.portTargeted&&this.portTargeted(t,e,i,n,s)}},ci.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.desiredSize=Hr,e.fromSpot=g,e.toSpot=g),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,i)},ci.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},ci.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof ct){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},ci.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.part;if(!(i instanceof ct))return null;for(;null!==t;){var n=e?t.toLinkable:t.fromLinkable;if(!0===n&&(null!==t.portId||t instanceof ct)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.panel}return null},ci.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var s=this,o=e.og(i,n,function(v){return s.findValidLinkablePort(v,t)},null,!0);for(n=1/0,e=null,o=o.iterator;o.next();){var l=o.value,u=l.part;if(u instanceof ct){var c=l.ga(C,z.alloc()),p=i.x-c.x,m=i.y-c.y;z.free(c),(c=p*p+m*m)<n&&(null!==(p=this.validPortsCache.I(l))?p&&(e=l,n=c):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,u,l)||!t&&this.isValidLink(u,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=c):this.validPortsCache.add(l,!1))}}return null!==e&&(i=e.part)instanceof ct&&(null===i.layer||i.layer.allowLink)?e:null},ci.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var i=e.fromMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Mo(e).count>=i)return!1}return!0},ci.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var i=e.toMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Sd(e).count>=i)return!1}return!0},ci.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},ci.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.part;if(!(i instanceof ct))return!1;null===(t=t.portId)&&(t="");var n=e.part;if(!(n instanceof ct))return!1;for(null===(e=e.portId)&&(e=""),e=n.Sd(e);e.next();)if((n=e.value).fromNode===i&&n.fromPortId===t)return!0;return!1},ci.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==i&&this.isLabelDependentOnLink(i,this.originalLink))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.originalLink))return!1;if(null!==t){var s=t.linkValidation;if(null!==s&&!s(t,e,i,n,this.originalLink))return!1}return!(null!==i&&(s=i.linkValidation,null!==s&&!s(t,e,i,n,this.originalLink)))&&(null===(s=this.linkValidation)||s(t,e,i,n,this.originalLink))},ci.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.labeledLink;if(null===i)return!1;if(i===e)return!0;var n=new ht;return n.add(t),Hd(this,i,e,n)},ci.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==kf){if(n===Fm){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var s=n.value;if(s!==i&&s.isTreeLink&&s.toNode===e)return!1}return!Gl(this,t,e,i,!0)}if(n===Im){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if((s=n.value)!==i&&s.isTreeLink&&s.fromNode===t)return!1;return!Gl(this,t,e,i,!0)}if(n===Lm)return t===e?t=!0:((n=new ht).add(e),t=zg(this,n,t,e,i)),!t;if(n===Tm)return!Gl(this,t,e,i,!1);if(n===Nm)return t===e?t=!0:((n=new ht).add(e),t=Bg(this,n,t,e,i)),!t}return!0},Tt.Object.defineProperties(ci.prototype,{portGravity:{get:function(){return this.te},set:function(t){0<=t&&(this.te=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.Ci},set:function(t){this.Ci=t}},temporaryFromNode:{get:function(){return this.Bi},set:function(t){(this.Bi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var i=e.O.indexOf(this.j);e.mb(i),e.Hb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.Di},set:function(t){(this.Di=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(null!==this.o){var e=this.o.panel;if(null!==e){var i=e.O.indexOf(this.o);e.mb(i),e.Hb(i,t)}}this.o=t}},originalLink:{get:function(){return this.Ib},set:function(t){this.Ib=t}},originalFromNode:{get:function(){return this.hb},set:function(t){this.hb=t}},originalFromPort:{get:function(){return this.ob},set:function(t){this.ob=t}},originalToNode:{get:function(){return this.Oc},set:function(t){this.Oc=t}},originalToPort:{get:function(){return this.Pc},set:function(t){this.Pc=t}},isForwards:{get:function(){return this.ia},set:function(t){this.ia=t}},validPortsCache:{get:function(){return this.iy}},targetPort:{get:function(){return this.Pf},set:function(t){this.Pf=t}},linkValidation:{get:function(){return this.gj},set:function(t){this.gj=t}},portTargeted:{get:function(){return this.Of},set:function(t){this.Of=t}}}),ci.className="LinkingBaseTool",Vt(Bi,ci),Bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.xs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Bi.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.jc(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof ct))return null;var i=this.direction;if(i===bu||i===Rg){var n=this.findValidLinkablePort(e,!1);if(null!==n||this.startObject===t&&this.findValidLinkablePort(n=t.port,!1))return this.isForwards=!0,n}return i!==bu&&i!==Yg||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},Bi.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null!==this.temporaryToNode&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof ct&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null!==this.temporaryFromNode&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof ct&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Va(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Va(),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0)},Bi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Bi.prototype.doStop=function(){ci.prototype.doStop.call(this),this.startObject=null},Bi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,s=null,o=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(null!==l){var u=l.part;u instanceof ct&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,i=this.originalFromPort),n=u,s=l):(e=u,i=l,null!==this.originalToNode&&(n=this.originalToNode,s=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(n=this.originalToNode,s=this.originalToPort);null!==e||null!==n?null!==(o=this.insertLink(e,i,n,s))?(null===l&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",o)):this.doNoLink(e,i,n,s):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},Bi.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof st)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},Bi.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Bi.prototype.doNoLink=function(){},Tt.Object.defineProperties(Bi.prototype,{archetypeLinkData:{get:function(){return this.V},set:function(t){this.V=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Xd},set:function(t){this.Xd=t}}});var bu=new ut(Bi,"Either",0),Rg=new ut(Bi,"ForwardsOnly",0),Yg=new ut(Bi,"BackwardsOnly",0);function Mn(){ci.call(this),this.name="Relinking";var t=new Pt;t.figure="Diamond",t.desiredSize=lo,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.V=t,(t=new Pt).figure="Diamond",t.desiredSize=lo,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Xd=t,this.F=null,this.Fw=new q}function Xg(t,e,i,n,s){null!==e?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==n?(t.copyPortProperties(n,s,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function Ee(){Yt.call(this),this.name="LinkReshaping";var t=new Pt;t.figure="Rectangle",t.desiredSize=Bl,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,(t=new Pt).figure="Diamond",t.desiredSize=lo,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.Ts=this.j=null,this.Gw=new z,this.Yq=new dt}function Ta(t,e,i,n,s,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-s.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-s.x)<t.resegmentingDistance}Bi.className="LinkingTool",Bi.Either=bu,Bi.ForwardsOnly=Rg,Bi.BackwardsOnly=Yg,Vt(Mn,ci),Mn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof st){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;null!==n&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&null===(i=t.Oj(e))&&(i=this.makeAdornment(n,!1),t.bh(e,i))}null===i&&t.Jf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(n=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(null===(i=t.Oj(e))?(i=this.makeAdornment(n,!0),t.bh(e,i)):i.v()),null===i&&t.Jf(e)}},Mn.prototype.makeAdornment=function(t,e){var i=new Bt;return i.type=nt.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&i.add(e.copy()),i.adornedObject=t,i},Mn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.xs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},Mn.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var i=e.part;if(!(i instanceof Bt&&i.adornedPart instanceof st))return;this.handle=e,this.isForwards=null===i||"RelinkTo"===i.category,this.originalLink=i.adornedPart}this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Fw.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Gs),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Gs),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0},Mn.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===hl||i===Ao)&&(i=Ci),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Mn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Mn.prototype.doStop=function(){ci.prototype.doStop.call(this),this.handle=null},Mn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,s=this.originalToPort,o=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var l=this.targetPort.part;l instanceof ct&&(this.isForwards?(n=l,s=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?s=n=null:i=e=null:o=null;null!==o?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?s:i,this.isForwards),null===this.targetPort&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.bb()),this.transactionResult=this.name,t.S("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Xo(this.Fw)}finally{this.stopTool()}}},Mn.prototype.reconnectLink=function(t,e,i,n){return i=null!==i&&null!==i.portId?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},Mn.prototype.doNoRelink=function(){},Tt.Object.defineProperties(Mn.prototype,{fromHandleArchetype:{get:function(){return this.V},set:function(t){this.V=t}},toHandleArchetype:{get:function(){return this.Xd},set:function(t){this.Xd=t}},handle:{get:function(){return this.F},set:function(t){if(null!==t&&!(t.part instanceof Bt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),Mn.className="RelinkingTool",Gi("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Gi("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)}),Vt(Ee,Yt),Ee.prototype.Su=function(t){return t&&0!==t.reshapingBehavior.value?t.reshapingBehavior:Vd},Ee.prototype.om=function(t,e){t.reshapingBehavior=e},Ee.prototype.updateAdornments=function(t){if(null!==t&&t instanceof st){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;null!==i&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.Ed()&&(null===(e=t.Oj(this.name))||e.Bw!==t.pointsCount||e.Vw!==t.resegmentable)&&null!==(e=this.makeAdornment(i))&&(e.Bw=t.pointsCount,e.Vw=t.resegmentable,t.bh(this.name,e))}null===e&&t.Jf(this.name)}},Ee.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,s=null;if(null!==e.points&&1<i){(s=new Bt).type=nt.Link,i=e.firstPickIndex;var o=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==rn)for(var u=i+l;u<o-l;u++){var c=this.makeResegmentHandle(t,u);null!==c&&(c.segmentIndex=u,c.segmentFraction=.5,c.fromMaxLinks=999,s.add(c))}for(l=i+1;l<o;l++)if(null!==(u=this.makeHandle(t,l))){if(u.segmentIndex=l,l!==i)if(l===i+1&&n){c=e.i(i);var p=e.i(i+1);_.B(c.x,p.x)&&_.B(c.y,p.y)&&(p=e.i(i-1)),_.B(c.x,p.x)?(this.om(u,Fa),u.cursor="n-resize"):_.B(c.y,p.y)&&(this.om(u,Na),u.cursor="w-resize")}else l===o-1&&n?(c=e.i(o-1),p=e.i(o),_.B(c.x,p.x)&&_.B(c.y,p.y)&&(c=e.i(o+1)),_.B(c.x,p.x)?(this.om(u,Fa),u.cursor="n-resize"):_.B(c.y,p.y)&&(this.om(u,Na),u.cursor="w-resize")):l!==o&&(this.om(u,Gd),u.cursor="move");s.add(u)}s.adornedObject=t}return s},Ee.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},Ee.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},Ee.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Ee.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof st){if(this.Ts=e,t.isMouseCaptured=!0,this.Ea(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.Hb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.Hb(this.handle.segmentIndex+1,n),e.points=i,e.Xb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.Gw=e.i(this.handle.segmentIndex),this.Yq=e.points.copy(),this.isActive=!0}}},Ee.prototype.doDeactivate=function(){this.stopTransaction(),this.Ts=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Ee.prototype.stopTransaction=function(){var t=this.diagram,e=Yt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},Ee.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Yq),this.stopTool()},Ee.prototype.getResegmentingPoint=function(){return this.handle.ga(C)},Ee.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Ee.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),s=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-s.x)<this.resegmentingDistance&&Math.abs(n.y-s.y)<this.resegmentingDistance&&(Ta(this,l,n,s,o,!0)||Ta(this,l,n,s,o,!1))){var u=e.points.copy();Ta(this,l,n,s,o,!0)?(u.cd(i-2,new z(l.x,(o.y+l.y)/2)),u.cd(i+1,new z(o.x,(o.y+l.y)/2))):(u.cd(i-2,new z((o.x+l.x)/2,l.y)),u.cd(i+1,new z((o.x+l.x)/2,o.y))),u.mb(i),u.mb(i-1),e.points=u,e.Xb()}else l=e.i(i+2),Math.abs(s.x-o.x)<this.resegmentingDistance&&Math.abs(s.y-o.y)<this.resegmentingDistance&&(Ta(this,n,s,o,l,!0)||Ta(this,n,s,o,l,!1))&&(u=e.points.copy(),Ta(this,n,s,o,l,!0)?(u.cd(i-1,new z(n.x,(n.y+l.y)/2)),u.cd(i+2,new z(l.x,(n.y+l.y)/2))):(u.cd(i-1,new z((n.x+l.x)/2,n.y)),u.cd(i+2,new z((n.x+l.x)/2,l.y))),u.mb(i+1),u.mb(i),e.points=u,e.Xb())}}else l=z.alloc(),_.qh(n.x,n.y,o.x,o.y,s.x,s.y,l)&&l.Bf(s)<this.resegmentingDistance*this.resegmentingDistance&&((n=e.points.copy()).mb(i),e.points=n,e.Xb()),z.free(l)}t.Ya(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Yq)}this.stopTool()},Ee.prototype.reshape=function(t){var e=this.adornedLink;e.uh();var i=this.handle.segmentIndex,n=this.Su(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===Fa?(e.L(i,e.i(i-1).x,t.y),e.L(i+1,e.i(i+2).x,t.y)):n===Na&&(e.L(i,t.x,e.i(i-1).y),e.L(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===Fa?(e.L(i-1,e.i(i-2).x,t.y),e.L(i,e.i(i+1).x,t.y)):n===Na&&(e.L(i-1,t.x,e.i(i-2).y),e.L(i,t.x,e.i(i+1).y));else{var s=e.i(n=i),o=e.i(n-1),l=e.i(n+1);_.B(o.x,s.x)&&_.B(s.y,l.y)?(_.B(o.x,e.i(n-2).x)&&!_.B(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),_.B(l.y,e.i(n+2).y)&&!_.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)):_.B(o.y,s.y)&&_.B(s.x,l.x)?(_.B(o.y,e.i(n-2).y)&&!_.B(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),_.B(l.x,e.i(n+2).x)&&!_.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):_.B(o.x,s.x)&&_.B(s.x,l.x)?(_.B(o.x,e.i(n-2).x)&&!_.B(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),_.B(l.x,e.i(n+2).x)&&!_.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):_.B(o.y,s.y)&&_.B(s.y,l.y)&&(_.B(o.y,e.i(n-2).y)&&!_.B(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),_.B(l.y,e.i(n+2).y)&&!_.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)),e.L(i,t.x,t.y)}else e.L(i,t.x,t.y),s=e.fromPort,null!==(n=e.fromNode)&&null!==(o=n.findVisibleNode())&&o!==n&&(s=(n=o).port),1===i&&e.computeSpot(!0,s).Mc()&&(o=s.ga(C,z.alloc()),n=e.getLinkPointFromPoint(n,s,o,t,!0,z.alloc()),e.L(0,n.x,n.y),z.free(o),z.free(n)),s=e.toPort,null!==(n=e.toNode)&&null!==(o=n.findVisibleNode())&&o!==n&&(s=(n=o).port),i===e.pointsCount-2&&e.computeSpot(!1,s).Mc()&&(i=s.ga(C,z.alloc()),t=e.getLinkPointFromPoint(n,s,i,t,!1,z.alloc()),e.L(e.pointsCount-1,t.x,t.y),z.free(i),z.free(t));e.zf()},Ee.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Su(this.handle)){case Gd:return t;case Fa:return new z(e.i(i).x,t.y);case Na:return new z(t.x,e.i(i).y);default:return e.i(i)}},Tt.Object.defineProperties(Ee.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Bt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.Ts}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.Gw}},originalPoints:{get:function(){return this.Yq}}}),Ee.prototype.setReshapingBehavior=Ee.prototype.om,Ee.prototype.getReshapingBehavior=Ee.prototype.Su;var Vd=new ut(Ee,"None",0),Na=new ut(Ee,"Horizontal",1),Fa=new ut(Ee,"Vertical",2),Gd=new ut(Ee,"All",3);function bi(){Yt.call(this),this.name="Resizing",this.o=new Mt(1,1).freeze(),this.j=new Mt(9999,9999).freeze(),this.yg=new Mt(NaN,NaN).freeze(),this.V=!1,this.ia=!0,this.ue=null;var t=new Pt;t.alignmentFocus=C,t.figure="Rectangle",t.desiredSize=Bl,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.Xq=new z,this.Ew=new Mt,this.Tn=new z,this.rt=new Mt(0,0),this.qt=new Mt(1/0,1/0),this.pt=new Mt(1,1)}function nn(){Yt.call(this),this.name="Rotating",this.ia=45,this.V=2,this.Tn=new z,this.ue=null;var t=new Pt;t.figure="Ellipse",t.desiredSize=lo,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Dw=0,this.kr=new z(NaN,NaN),this.u=0,this.F=50}function Ia(){Yt.call(this),this.name="ClickSelecting"}function uo(){Yt.call(this),this.name="Action",this.nk=null}function mr(){Yt.call(this),this.name="ClickCreating",this.Ri=null,this.o=!0,this.j=!1,this.nw=new z(0,0)}function Ss(){Yt.call(this),this.name="DragSelecting",this.Hk=175,this.o=!1;var t=new vt;t.layerName="Tool",t.selectable=!1;var e=new Pt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function ks(){Yt.call(this),this.name="Panning",this.Xt=new z,this.yy=new z,this.xg=!1;var t=this;this.Lw=function(){var e=t.diagram;null!==e&&e.removeEventListener(St.document,"scroll",t.Lw,!1),t.stopTool()}}function co(){this.F=this.u=this.j=this.o=null}function Qn(t,e,i){this.text=t,this.ix=e,this.visible=i}function Ui(){Yt.call(this),this.name="ContextMenu",this.o=this.ht=this.j=null,this.zw=new z,this.jt=null,this.Et=!1;var t=this;this.tu=function(){t.stopTool()}}function Wd(t){return t.preventDefault(),!1}function Hg(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(null!==i){var n=null;i instanceof co||null!==(n=e.jc(e.lastInput.documentPoint,null,null))&&n.rg(i)&&t.standardMouseClick(null,null),t.maybeStopTool(n)}}else t.canStart()&&(Vg(t,!0),t.isActive||t.stopTool())}function Vg(t,e,i){if(void 0===i&&(i=null),!t.Et&&(t.Et=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Et=!1,!e)){if(t.isActive=!0,e=Oa,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.currentObject=i instanceof yt?i:null,t.showContextMenu(n,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Bt&&!t.currentContextMenu.visible&&t.stopTool()}}Ee.className="LinkReshapingTool",Ee.None=Vd,Ee.Horizontal=Na,Ee.Vertical=Fa,Ee.All=Gd,Gi("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)}),Vt(bi,Yt),bi.prototype.updateAdornments=function(t){if(!(null===t||t instanceof st)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Oj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()&&((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i))return e=e.li(),_o(t)&&this.updateResizeHandles(i,e),void t.bh(this.name,i)}t.Jf(this.name)}},bi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Bt).type=nt.Spot,e.locationSpot=C;var i=new Mi;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,y)),e.add(this.makeHandle(t,S)),e.add(this.makeHandle(t,D)),e.add(this.makeHandle(t,F)),e.add(this.makeHandle(t,re)),e.add(this.makeHandle(t,Le)),e.add(this.makeHandle(t,Te)),e.add(this.makeHandle(t,ce))}else if(An(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},bi.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},bi.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Yb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.Mc()&&(i=C),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else{if(!(1<=i.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof nt)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},bi.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.Cc(),this.Ea(this.name),this.Xq.set(this.adornedObject.ga(this.handle.alignment.hv())),this.Tn.set(this.adornedObject.part.location),this.Ew.set(this.adornedObject.desiredSize),this.pt=this.computeCellSize(),this.rt=this.computeMinSize(),this.qt=this.computeMaxSize(),this.isActive=!0))},bi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.isActive=t.isMouseCaptured=!1},bi.prototype.stopTransaction=function(){var t=this.diagram,e=Yt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},bi.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},bi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,s=this.adornedObject.qs(t.lastInput.documentPoint,z.alloc()),o=this.computeReshape();e=this.computeResize(s,this.handle.alignment,e,i,n,o),this.resize(e),t.bd(),z.free(s)}},bi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,s=this.adornedObject.qs(t.lastInput.documentPoint,z.alloc()),o=this.computeReshape();e=this.computeResize(s,this.handle.alignment,e,i,n,o),this.resize(e),z.free(s),t.Ya(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},bi.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(null!==i){if(i.desiredSize=t.size,(t=i.part).Va(),i=i.ga(this.handle.alignment.hv()),t instanceof At){var n=new dt;if(n.add(t),!this.dragsMembers&&null===t.placeholder){var s=new Ga;s.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().re(i),!0,s)}else t.location=t.location.copy().re(i).add(this.oppositePoint);e.bd()}},bi.prototype.computeResize=function(t,e,i,n,s,o){e.Mc()&&(e=C);var l=this.adornedObject.naturalBounds,u=l.x,c=l.y,p=l.x+l.width,m=l.y+l.height,v=1;if(!o){var w=l.height;0>=(v=l.width)&&(v=1),0>=w&&(w=1),v=w/v}return w=z.alloc(),_.No(t.x,t.y,u,c,s.width,s.height,w),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(w.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=Math.max(p-t.x,i.width),t.y=Math.max(w.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=Math.max(m-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width),t.x=p-t.width,t.y=m-t.height)):1<=e.y?(t.x=Math.max(w.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=Math.max(p-t.x,i.width),t.height=Math.max(Math.min(w.y-c,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width),t.x=p-t.width)):(t.x=Math.max(w.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=p-t.x,o||(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v,t.y=c+.5*(m-c-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(w.x-u,n.width),i.width),t.y=Math.max(w.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=Math.max(m-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width),t.y=m-t.height)):1<=e.y?(t.width=Math.max(Math.min(w.x-u,n.width),i.width),t.height=Math.max(Math.min(w.y-c,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width))):(t.width=Math.max(Math.min(w.x-u,n.width),i.width),o||(t.height=Math.max(Math.min(v*t.width,n.height),i.height),t.width=t.height/v,t.y=c+.5*(m-c-t.height))):0>=e.y?(t.y=Math.max(w.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=m-t.y,o||(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width,t.x=u+.5*(p-u-t.width))):1<=e.y&&(t.height=Math.max(Math.min(w.y-c,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/v,n.width),i.width),t.height=v*t.width,t.x=u+.5*(p-u-t.width))),z.free(w),t},bi.prototype.computeReshape=function(){var t=Se;return this.adornedObject instanceof Pt&&(t=ep(this.adornedObject)),!(t===ds||this.diagram.lastInput.shift)},bi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},bi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},bi.prototype.computeCellSize=function(){var t=new Mt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},Tt.Object.defineProperties(bi.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(null!==t&&!(t.part instanceof Bt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(null!==t&&t.part instanceof Bt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},minSize:{get:function(){return this.o},set:function(t){if(!this.o.D(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.o.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.D(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.V},set:function(t){this.V=t}},dragsMembers:{get:function(){return this.ia},set:function(t){this.ia=t}},oppositePoint:{get:function(){return this.Xq},set:function(t){this.Xq.D(t)||this.Xq.assign(t)}},originalDesiredSize:{get:function(){return this.Ew}},originalLocation:{get:function(){return this.Tn}}}),bi.className="ResizingTool",Gi("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)}),Vt(nn,Yt),nn.prototype.updateAdornments=function(t){if(null!==t){if(t.ph()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()){var i=t.Oj(this.name);if((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i)return i.angle=e.li(),null===i.placeholder&&(i.location=this.computeAdornmentLocation(e)),void t.bh(this.name,i)}t.Jf(this.name)}},nn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Bt).type=nt.Position,e.locationSpot=C;var i=this.handleArchetype;null!==i&&e.add(i.copy())}else if(An(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},nn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},nn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ea(this.name),this.Dw=this.adornedObject.angle,this.kr=this.computeRotationPoint(this.adornedObject),this.Tn=this.adornedObject.part.location.copy(),this.isActive=!0)},nn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.sb()?t.ga(e.rotationSpot):t===e||t===i?i.ga(e.locationSpot):t.ga(C)},nn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.qs(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return 0===i?e.x=t.naturalBounds.width+n:45===i?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):90===i?e.y=t.naturalBounds.height+n:135===i?(e.x=-n,e.y=t.naturalBounds.height+n):180===i?e.x=-n:225===i?(e.x=-n,e.y=-n):270===i?e.y=-n:315===i&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ga(e)},nn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.kr=new z(NaN,NaN),this.isActive=t.isMouseCaptured=!1},nn.prototype.stopTransaction=function(){var t=this.diagram,e=Yt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},nn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},nn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},nn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Ya(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},nn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Va();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Tn.copy(),e.location=i.re(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.bd()}},nn.prototype.computeRotate=function(t){t=this.rotationPoint.ab(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.li()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Tt.Object.defineProperties(nn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Bt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(null!==t&&t.part instanceof Bt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},snapAngleMultiple:{get:function(){return this.ia},set:function(t){this.ia=t}},snapAngleEpsilon:{get:function(){return this.V},set:function(t){this.V=t}},originalAngle:{get:function(){return this.Dw}},rotationPoint:{get:function(){return this.kr},set:function(t){this.kr=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),nn.className="RotatingTool",Gi("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)}),Vt(Ia,Yt),Ia.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Ia.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Ia.className="ClickSelectingTool",Vt(uo,Yt),uo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.jc(e.documentPoint,function(n){for(;null!==n.panel&&!n.isActionable;)n=n.panel;return n});return!(null===i||!i.isActionable||(this.nk=i,t.Bk=t.jc(e.documentPoint,null,null),0))},uo.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},uo.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},uo.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;null!==i.panel&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},uo.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},uo.prototype.doStop=function(){this.nk=null},uo.className="ActionTool",Vt(mr,Yt),mr.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.nw=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.nw))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.Ol(t.lastInput.documentPoint,!0))},mr.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},mr.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(null===i)return null;var n=null;try{if(e.S("ChangingSelection",e.selection),this.Ea(this.name),i instanceof vt)i.Zc()&&(An(i),null!==(n=i.copy())&&e.add(n));else if(null!==i){var s=e.model.copyNodeData(i);le(s)&&(e.model.xf(s),n=e.Lc(s))}if(null!==n){var o=z.allocAt(t.x,t.y);this.isGridSnapEnabled&&ff(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),z.free(o)}e.Ya(),this.transactionResult=this.name,e.S("PartCreated",n)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return n},Tt.Object.defineProperties(mr.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){this.Ri=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),mr.className="ClickCreatingTool",Vt(Ss,Yt),Ss.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.Ol(e.documentPoint,!0)))},Ss.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Ss.prototype.doDeactivate=function(){var t=this.diagram;t.ug(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Ss.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),i=this.box.fb("SHAPE");null===i&&(i=this.box.Qb());var n=Mt.alloc().h(e.width,e.height);i.desiredSize=n,this.box.mm(e.x,e.y,!1),Mt.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},Ss.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Ss.prototype.computeBoxBounds=function(){var t=this.diagram;return new q(t.firstInput.documentPoint,t.lastInput.documentPoint)},Ss.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.vx(t,this.isPartialInclusion),wi?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(i=new dt,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},Tt.Object.defineProperties(Ss.prototype,{delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Ss.className="DragSelectingTool",Vt(ks,Yt),ks.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},ks.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener(St.document,"scroll",this.Lw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Xt.assign(t.position)),this.isActive=!0},ks.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},ks.prototype.doCancel=function(){var t=this.diagram;t.position=this.Xt,t.isMouseCaptured=!1,this.stopTool()},ks.prototype.doMouseMove=function(){this.move()},ks.prototype.doMouseUp=function(){this.move(),this.stopTool()},ks.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,s=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(s=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.yy.h(s,i)}},Tt.Object.defineProperties(ks.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Xt}}}),ks.className="PanningTool",Gi("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Gi("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Gi("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Gi("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Gi("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)}),Tt.Object.defineProperties(co.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),co.className="HTMLInfo",Qn.className="ContextMenuButtonInfo",Vt(Ui,Yt),Ui.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},Ui.prototype.doStart=function(){this.zw.set(this.diagram.firstInput.documentPoint)},Ui.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Ui.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,n=null;if(t instanceof $||(n=t instanceof yt?t:e.jc(e.lastInput.documentPoint,null,function(s){return!s.layer.isTemporary})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(null!==e.contextMenu)return e;return null},Ui.prototype.doActivate=function(){},Ui.prototype.doMouseDown=function(){if(Yt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Bt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Hg(this)},Ui.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Bt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Hg(this)},Ui.prototype.maybeStopTool=function(){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())},Ui.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Ui.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Bt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Va(),this.positionContextMenu(t,e)}else t instanceof co&&t.show(e,i,this);this.currentContextMenu=t},Ui.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,s=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>s.right&&(i.x-=n.width+5/e.scale),i.x<s.x&&(i.x=s.x),i.y+n.height>s.bottom&&(i.y-=n.height+5/e.scale),i.y<s.y&&(i.y=s.y),t.position=i}},Ui.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Bt?(t.remove(e),null!==this.ht&&this.ht.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof co&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},Ui.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.jt&&(this.jt=function w0(t){var e=new dt;return e.add(new Qn("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new Qn("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new Qn("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new Qn("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Qn("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new Qn("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new Qn("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new Qn("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new Qn("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new Qn("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new Qn("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new Qn("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new Qn("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}(this)),Ul.innerHTML="",Wl.addEventListener("pointerdown",this.tu,!1);var e=this,i=Ve("ul");i.className="goCXul",Ul.appendChild(i),i.innerHTML="";for(var n=this.jt.iterator;n.next();){var s=n.value,o=s.visible;if("function"==typeof s.ix&&("function"!=typeof o||o(t))){(o=Ve("li")).className="goCXli";var l=Ve("a");l.className="goCXa",l.href="#",l.ly=s.ix,l.addEventListener("pointerdown",function(u){return this.ly(t),e.stopTool(),u.preventDefault(),!1},!1),l.textContent=s.text,o.appendChild(l),i.appendChild(o)}}Ul.style.display="block",Wl.style.display="block"},Ui.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Oa){Ul.style.display="none",Wl.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(Wl,"pointerdown",this.tu,!1),this.currentContextMenu=null}},Tt.Object.defineProperties(Ui.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.ht=t instanceof Bt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Ud&&null===Oa&&Dn&&function x0(t){var e=new co;e.show=function(s,o,l){l.showDefaultContextMenu()},e.hide=function(s,o){o.hideDefaultContextMenu()},Oa=e,t.tu=function(){t.stopTool()},e=Ve("div");var i=Ve("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=Ve("style");St.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(n=t.diagram)&&(n.addEventListener(e,"contextmenu",Wd,!1),n.addEventListener(e,"selectstart",Wd,!1),n.addEventListener(i,"contextmenu",Wd,!1)),e.className="goCXforeground",i.className="goCXbackground",St.document.body&&(St.document.body.appendChild(e),St.document.body.appendChild(i)),Ul=e,Wl=i,Ud=!0}(this),Oa},set:function(t){null===t&&(Ud=!0),Oa=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.zw}}});var Oa=null,Ud=!1,Wl=null,Ul=null;function he(){Yt.call(this),this.name="TextEditing",this.Zh=new qt,this.ia=null,this.V=_d,this.vj=null,this.qa=Kl,this.u=1,this.F=!0,this.o=null,this.j=new co,this.kt=null,function b0(t,e){if(Dn){var i=Ve("textarea");t.kt=i,i.addEventListener("input",function(){if(null!==t.textBlock){var n=t.Mx(this.value);this.style.width=20+n.measuredBounds.width*this.xA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(!n.isComposing&&null!==t.textBlock){var s=n.key;"Enter"===s?(!1===t.textBlock.isMultiline&&n.preventDefault(),t.acceptText(ku)):"Tab"===s?(t.acceptText(Kd),n.preventDefault()):"Escape"===s&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==Kl){var n=t.kt;t.qa===_l&&(t.qa=Mu),"function"==typeof n.select&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==Kl){var n=t.kt;"function"==typeof n.focus&&n.focus(),"function"==typeof n.select&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,s,o){if(n instanceof qt&&o instanceof he)if(o.state===Zl)i.style.border="3px solid red",i.focus();else{var l=n.ga(C),u=s.position,c=s.scale,p=n.Df()*c;p<o.minimumEditorScale&&(p=o.minimumEditorScale);var m=n.naturalBounds.width*p+6,v=n.naturalBounds.height*p+2,w=(l.x-u.x)*c;l=(l.y-u.y)*c,v=(u=n.verticalAlignment).y*v-u.y*(c=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*p)+u.offsetY-(.5*v-.5*c)-c/2,i.value=n.text,s.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*p+"%",i.style.lineHeight="normal",i.style.width=m+"px",i.style.left=(w-m/2|0)-1+"px",i.style.top=(l+v|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.xA=p,i.className="goTXarea",s.div.appendChild(i),i.focus(),o.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}(this,this.j)}function Gg(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(null!==e&&null!==n){var s=e.text,o="";null!==n.valueFunction&&(o=n.valueFunction()),t.isValidText(e,s,o)?(t.Ea(t.name),t.qa=Jd,t.transactionResult=t.name,e.text=o,t.doSuccess(s,o),null!==i&&i.S("TextEdited",e,s),t.stopTransaction(),t.stopTool(),null!==i&&i.doFocus()):(t.qa=Zl,t.doError(s,o))}}Ui.className="ContextMenuTool",Gi("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)}),Vt(he,Yt),he.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||_r&&_r!==this&&(_r.acceptText(Su),_r&&_r!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.jc(t.lastInput.documentPoint);return!!(null!==e&&e instanceof qt&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===_d&&!e.isSelected||this.starting===Ug&&2>t.lastInput.clickCount)},he.prototype.doStart=function(){_r=this,null!==this.textBlock&&this.doActivate()},he.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.jc(t.lastInput.documentPoint)),null!==e&&e instanceof qt&&(this.textBlock=e,null!==e.part)){t.animationManager.Cc(),this.isActive=!0,this.qa=_l;var i=this.defaultTextEditor;null!==e.textEditor&&(i=e.textEditor),this.Zh=this.textBlock.copy();var n=new q(this.textBlock.ga(y),this.textBlock.ga(D));t.uv(n),i.show(e,t,this),this.currentTextEditor=i}}}},he.prototype.doCancel=function(){this.stopTool()},he.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},he.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Su)},he.prototype.acceptText=function(t){switch(t){case Su:this.qa===Jd?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.qa===_l||this.qa===Zl||this.qa===Mu)&&(this.qa=Zd,Gg(this));break;case Wg:case ku:case Kd:(ku!==t||!0!==this.textBlock.isMultiline)&&(this.qa===_l||this.qa===Zl||this.qa===Mu)&&(this.qa=Zd,Gg(this))}},he.prototype.doError=function(t,e){var i=this.textBlock;null!==i.errorFunction&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},he.prototype.doSuccess=function(t,e){var i=this.textBlock;null!==i.textEdited&&i.textEdited(i,t,e)},he.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.qa=Kl,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},he.prototype.doStop=function(){_r=null},he.prototype.isValidText=function(t,e,i){var n=this.textValidation;return!(null!==n&&!n(t,e,i)||null!==(n=t.textValidation)&&!n(t,e,i))},he.prototype.Mx=function(t){var e=this.Zh;return e.text=t,e.measure(this.textBlock.Ih,1/0),e},Tt.Object.defineProperties(he.prototype,{textBlock:{get:function(){return this.ia},set:function(t){this.ia=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.V},set:function(t){this.V=t}},textValidation:{get:function(){return this.vj},set:function(t){this.vj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this.qa=t)}}}),he.prototype.measureTemporaryTextBlock=he.prototype.Mx;var Wg=new ut(he,"LostFocus",0),Su=new ut(he,"MouseDown",1),Kd=new ut(he,"Tab",2),ku=new ut(he,"Enter",3),S0=new ut(he,"SingleClick",0),_d=new ut(he,"SingleClickSelected",1),Ug=new ut(he,"DoubleClick",2),Kl=new ut(he,"StateNone",0),_l=new ut(he,"StateActive",1),Mu=new ut(he,"StateEditing",2),Zd=new ut(he,"StateValidating",3),Zl=new ut(he,"StateInvalid",4),Jd=new ut(he,"StateValidated",5),_r=null;function fn(t){Lu||(Jg(),Lu=!0),this.H=za,this.Nk=this.Ab=this.vq=this.cc=!1,this.Rw=!0,this.Ok=Tu,this.Dm=!1,this.Gh=this.Jd=!0,this.Dg=600,this.dw=this.Pw=!1,this.Zd=new ht,this.ce=new gi,this.ce.Yd=this,this.Ei=new ht,this.pu=new ht,this.Sr=new ht,this.pr=new ht,t&&Object.assign(this,t)}function fo(t,e){t.Jd&&t.canStart(e)&&(t.Zd.add(e),t.defaultAnimation.isAnimating&&t.Cc(),Si(t.H),t.Ab=!0)}function $d(t){if(t.Jd&&t.Ab){var e=t.ce,i=t.H,n=t.Zd.contains("Model");n&&(t.Nk=!0,t.Ok===Tu?(e.isViewportUnconstrained=!0,e.vc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Ok===Qg&&e.vc.clear(),t.Rw=!(t.Ok!==$g||!i.du.D(i.pa)),i.S("InitialAnimationStarting",t)),n&&!t.Gh||0===e.vc.count?(t.Zd.clear(),t.Ab=!1,e.vc.clear(),Nu(e,i),t.Nk=!1,i.N()):(t.Zd.clear(),i.kg=!1,n=e.vc.get(i),i.autoScale!==pn&&null!==n&&(delete n.start.scale,delete n.end.scale),St.requestAnimationFrame(function(){!1===t.Ab||e.cc||(i.Gf("temporaryPixelRatio")&&$l(i),nf(i),t.Ab=!1,e.start(),e.cc&&(Ea(t),i.Ya(),tm(e,0),po(i,!0),ja(t),i.S("AnimationStarting",t)))}))}}function Cu(t){return t.Zd.contains("Trigger")&&1===t.Zd.count}function Kg(t,e,i,n){t.isTicking||Cu(t)||e instanceof st&&(null!==e.fromNode||null!==e.toNode)||t.ce.add(e,"position",i,n,!1)}function Ea(t){if(!t.vq){var e=t.H;t.Pw=e.skipsUndoManager,t.dw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.vq=!0}}function ja(t){var e=t.H;e.skipsUndoManager=t.Pw,e.skipsModelSourceBindings=t.dw,t.vq=!1}function _g(t,e,i){!t.Ab||e.D(i)||Cu(t)||(t.H.pi||(e=i.copy()),qd(t.ce,t.H,"position",e,i))}function Qd(t,e,i){e.fd&&(e.Tg=i,t.pr.add(e))}function Zg(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.fd&&(i.Tg=i.points.copy(),t.pr.add(i))}}function Au(t,e,i,n,s){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var o=t[0],l=t[1],u=t[2];t=t[3];var c=e[0],p=e[1],m=e[2];return e=e[3],0===u||100===u?(o=c,l=p):(0===m||100===m)&&(c=o,p=l),180<Math.abs(c-o)&&(c>o?o+=360:c+=360),"hsla("+(o=s(i,o,c-o,n)%360)+", "+(l=s(i,l,p-l,n))+"%, "+(u=s(i,u,m-u,n))+"%, "+(i=s(i,t,e-t,n))+")"}function Jg(){function t(i,n,s,o,l,u){i.position=new z(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u))}var e=new kt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,s,o,l,u){l<u?i.mm(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u),!1):i.position=new z(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u))}),e.add("location",function(i,n,s,o,l,u){l<u?i.mm(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u),!0):i.location=new z(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u))}),e.add("position:placeholder",function(i,n,s,o,l,u){l<u?i.mm(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u),!1):i.position=new z(o(l,n.x,s.x-n.x,u),o(l,n.y,s.y-n.y,u))}),e.add("position:nodeCollapse",function(i,n,s,o,l,u){var c=i.actualBounds,p=s.actualBounds;s=p.x+p.width/2-c.width/2,c=p.y+p.height/2-c.height/2,l<u?i.mm(o(l,n.x,s-n.x,u),o(l,n.y,c-n.y,u),!1):i.position=new z(o(l,n.x,s-n.x,u),o(l,n.y,c-n.y,u))}),e.add("desiredSize",function(i,n,s,o,l,u){i.desiredSize=new q(o(l,n.width,s.width-n.width,u),o(l,n.height,s.height-n.height,u))}),e.add("width",function(i,n,s,o,l,u){i.width=o(l,n,s-n,u)}),e.add("height",function(i,n,s,o,l,u){i.height=o(l,n,s-n,u)}),e.add("fill",function(i,n,s,o,l,u){i.fill=Au(n,s,l,u,o)}),e.add("stroke",function(i,n,s,o,l,u){i.stroke=Au(n,s,l,u,o)}),e.add("strokeWidth",function(i,n,s,o,l,u){i.strokeWidth=o(l,n,s-n,u)}),e.add("strokeDashOffset",function(i,n,s,o,l,u){i.strokeDashOffset=o(l,n,s-n,u)}),e.add("background",function(i,n,s,o,l,u){i.background=Au(n,s,l,u,o)}),e.add("areaBackground",function(i,n,s,o,l,u){i.areaBackground=Au(n,s,l,u,o)}),e.add("opacity",function(i,n,s,o,l,u){i.opacity=o(l,n,s-n,u)}),e.add("scale",function(i,n,s,o,l,u){i.scale=o(l,n,s-n,u)}),e.add("angle",function(i,n,s,o,l,u){i.angle=o(l,n,s-n,u)}),Pu=e}he.className="TextEditingTool",he.LostFocus=Wg,he.MouseDown=Su,he.Tab=Kd,he.Enter=ku,he.SingleClick=S0,he.SingleClickSelected=_d,he.DoubleClick=Ug,he.StateNone=Kl,he.StateActive=_l,he.StateEditing=Mu,he.StateValidating=Zd,he.StateInvalid=Zl,he.StateValidated=Jd,Gi("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)}),fn.prototype.Xe=function(t){this.H=t},fn.prototype.canStart=function(){return!0},(L=fn.prototype).gv=function(t){return this.ce.gv(t)},L.Yu=function(t){return this.ce.Yu(t)},L.Cc=function(t){var e=this.ce;if(!0===this.Ab&&(this.Nk=this.Ab=!1,this.Zd.clear(),0<e.vc.count&&this.H.ac()),this.cc){if(e.Ml(!0),e.vc.clear(),Nu(e,null),!0===t)for(t=this.Ei.Fa(),e=0;e<t.length;e++)t[e].Ml(!0)}else e.vc.clear(),Nu(e,this.H)},L.Ml=function(t){t===this.defaultAnimation&&this.defaultAnimation.vc.clear(),this.Ei.remove(t),0===this.Ei.count&&(this.cc=!1,this.H.ac()),t===this.defaultAnimation&&(this.defaultAnimation.vc.clear(),this.H.S("AnimationFinished",this))},L.Cj=function(t,e){this.Ab&&(this.Zd.contains("Expand Tree")||this.Zd.contains("Expand SubGraph"))&&(this.ce.Cj(t,e),Zg(this,t))},L.Aj=function(t,e){this.Ab&&(this.Zd.contains("Collapse Tree")||this.Zd.contains("Collapse SubGraph"))&&(this.ce.Aj(t,e),qd(this.ce,e,"position",e.position,e.position),Zg(this,t))},Tt.Object.defineProperties(fn.prototype,{animationReasons:{get:function(){return this.Zd}},isEnabled:{get:function(){return this.Jd},set:function(t){(this.Jd=t)&&this.Ei.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Dg},set:function(t){1>t&&ie(t,">= 1",fn,"duration"),this.Dg=t}},isAnimating:{get:function(){return this.cc}},isTicking:{get:function(){return this.vq}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t}},defaultAnimation:{get:function(){return this.ce}},activeAnimations:{get:function(){return this.Ei}},initialAnimationStyle:{get:function(){return this.Ok},set:function(t){this.Ok=t}}}),fn.prototype.stopAnimation=fn.prototype.Cc;var Pu=null,Lu=!1,Tu=new ut(fn,"Default",1),$g=new ut(fn,"AnimateLocations",2),Qg=new ut(fn,"None",3);function gi(t){this.vu=this.Ow=this.Yd=this.H=null,this.Wk=this.cc=this.j=!1,this.cn=this.Qd=0,this.Lp=this.ot=em,this.Vk=this.ho=!1,this.cu=1,this.au=0,this.Gd=this.Dg=NaN,this.hw=0,this.dn=null,this.o=_n,this.vc=new kt,this.Tt=new kt,this.yl=new ht,this.Ut=new ht,this.ew=vr,t&&Object.assign(this,t)}function Nu(t,e){if(t.Tt.clear(),t.Vk=!1,t.au=0,t.Gd=NaN,0<t.yl.count&&t.yl.clear(),0<t.Ut.count&&t.Ut.clear(),null!==e)for(t=e.links;t.next();)t.value.Tg=null}function qd(t,e,i,n,s,o){var l=t.vc;if(e instanceof $&&"position"===i&&(i="position:diagram"),("fill"===i||"stroke"===i||"background"===i||"areaBackground"===i)&&(_s(n),zf(),n=[on.j,on.u,on.o,on.F],_s(s),zf(),s=[on.j,on.u,on.o,on.F]),l.contains(e)){var u=l.I(e),c=u.start,p=u.end;void 0===c[i]&&(c[i]=Da(n)),p[i]=Da(s)}else p={},(c={})[i]=Da(n),p[i]=Da(s),u=c.position,e instanceof yt&&u instanceof z&&!u.w()&&e.diagram.animationManager.Zd.contains("Expand SubGraph")&&u.assign(p.position),u=new nm(c,p,o),l.add(e,u);(l=c[i])instanceof z&&!l.w()&&l.assign(t.o),o&&0===i.indexOf("position:")&&e instanceof vt?u.Lu.location=Da(e.location):o&&(u.Lu[i]=Da(n))}function Da(t){return t instanceof z||t instanceof Mt?t.copy():t}function qg(t,e){if(!t.Wk||e){var i=t.Yd;if(!1!==t.cc){var n=+new Date,s=n>t.cn?t.Gd:n-t.Qd;e&&((s=t.hw)<t.Gd?(t.Qd=+new Date-s,t.cn=t.Qd+t.Gd):s=t.Gd),Ea(i),tm(t,s),po(t.H,!0),ja(i),n>t.cn&&(t.ho&&!t.Vk?(t.Qd=+new Date,t.cn=t.Qd+t.Gd,t.Vk=!0):t.Ml(!1))}}}function tm(t,e){for(var i=t.Gd,n=t.vc.iterator,s=t.Vk;n.next();){var o=n.key;if(!(o instanceof yt&&null===o.diagram)){var l=n.value,u=s?l.end:l.start;l=s?l.start:l.end;var p,c=Pu;for(p in l)"position"===p&&(l["position:placeholder"]||l["position:nodeCollapse"])||null===c.get(p)||c.get(p)(o,u[p],l[p],t.Lp,e,i,t)}}}function em(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function im(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function nm(t,e,i){this.start=t,this.end=e,this.Lu={},this.Iu=i,this.ov=!1}function Ms(t,e,i){this.xd=null,this.rf=t,this.so=i||sm,this.tk=null,void 0!==e&&(this.tk=e,void 0===i&&(this.so=tf))}fn.className="AnimationManager",fn.defineAnimationEffect=function(t,e){Lu||(Jg(),Lu=!0),Pu.add(t,e)},fn.Default=Tu,fn.AnimateLocations=$g,fn.None=Qg,gi.prototype.suspend=function(){this.Wk=!0},gi.prototype.advanceTo=function(t,e){e&&(this.Wk=!1),this.ho&&t>=this.Gd&&(this.Vk=!0,t-=this.Gd),this.hw=t,qg(this,!0),Ea(this.Yd),po(this.H),ja(this.Yd),this.H.redraw()},(L=gi.prototype).start=function(){if(0===this.vc.count||this.cc)return this;for(var t=this.H,e=this.vc.iterator;e.next();){var i=e.key;null===t&&(i instanceof $?t=i:i instanceof yt&&(t=i.diagram))}return null===t||(this.H=t,this.Yd=t.animationManager,!1===(e=this.Yd).isEnabled||(this.Gd=isNaN(this.Dg)?e.duration:this.Dg,this.Lp=this.ot,e.Nk&&e.Ok===Tu&&this===e.defaultAnimation&&(this.Lp=im,this.Gd=isNaN(this.Dg)?600===e.duration?900:e.duration:this.Dg),this.ew=t.scrollMode,this.isViewportUnconstrained&&(t.sj=Mf),Ea(e),this.yl.each(function(n){n.data=null,t.add(n)}),ja(e),this.cc=!0,this.Qd=+new Date,this.cn=this.Qd+this.Gd,function k0(t,e){function i(){if(0<s.Sr.count&&(n.addAll(s.Sr),s.Sr.clear(),s.cc=!0),!1!==s.cc&&0!==n.count){s.pu.addAll(n);for(var o=s.pu.iterator;o.next();){var l=o.value;if(!1!==l.cc){t:if(0<l.yl.count)var u=!0;else{for(u=l.vc.iterator;u.next();){var c=u.key;if(c instanceof yt&&null!==c.diagram||c instanceof $){u=!0;break t}}u=!1}u?qg(l,!1):l.Wk=!0}}s.pu.clear(),!1!==s.cc&&(Ea(s),po(s.H),ja(s)),St.requestAnimationFrame(i)}}var n=t.Ei,s=t;t.cc?t.Sr.add(e):(t.cc=!0,n.add(e),St.requestAnimationFrame(function(){i()}))}(e,this))),this},L.Jy=function(t,e){return t.Zc()?(this.yl.add(t),this.H=e,this):this},L.add=function(t,e,i,n,s){if("position"===e&&i.Xa(n))return this;if(null===this.H&&(t instanceof $?this.H=t:t instanceof yt&&null!==t.diagram&&(this.H=t.diagram)),t instanceof vt){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return qd(this,t,e,i,n,s),this},L.gv=function(t){return!!this.cc&&null!==(t=this.vc.I(t))&&t.ov},L.Yu=function(t){return!!this.cc&&null!==(t=this.vc.I(t))&&(t.start.position||t.start.location)},L.stop=function(){return this.cc?(this.Ml(!0),this):this},L.Ml=function(t){if(null!==this.vu&&this.vu.jo.remove(this.Ow),this.cc){var e=this.H,i=this.Yd;this.Wk=this.cc=i.Nk=!1,Ea(i);for(var n=this.vc,s=this.yl.iterator;s.next();)e.remove(s.value);for(s=this.Ut.iterator;s.next();)s.value.v();s=this.ho,n=n.iterator;for(var o=Pu;n.next();){var v,l=n.key,u=n.value,c=s?u.end:u.start,p=s?u.start:u.end,m=u.Lu;for(v in p)if(null!==o.get(v)){var w=v;!u.Iu||"position:nodeCollapse"!==w&&"position:placeholder"!==w||(w="position"),o.get(w)(l,c[v],void 0!==m[v]?m[v]:u.Iu?c[v]:p[v],this.Lp,this.Gd,this.Gd,this)}u.Iu&&void 0!==m.location&&l instanceof vt&&(l.location=m.location),u.ov&&l instanceof vt&&l.$b(!1)}if(e.As.clear(),Iu(e,!1),e.Ya(),e.N(),po(e,!0),i.defaultAnimation===this){for(v=i.pr.iterator;v.next();)null!==(s=v.value).Tg&&(s.points=s.Tg,s.Tg=null);i.pr.clear()}po(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.ew),ja(i),this.au++,!t&&this.cu>this.au?(this.Vk=!1,this.start()):(this.dn&&this.dn(this),Nu(this,null),i.Ml(this),e.ac())}},L.Cj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof At&&(n=e.placeholder),null!==n?((i=n.ga(y)).x+=(n=n.padding).left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new z(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof At)for(t=t.memberParts;t.next();)(n=t.value)instanceof ct&&this.Cj(n,e)},L.Aj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof At&&(i=e.placeholder),null!==i){var n=i.ga(y);n.x+=(i=i.padding).left,n.y+=i.top,this.add(t,"position:placeholder",t.position,n,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);if(this.add(t,"scale",t.scale,.01,!0),(n=this.vc).contains(t)&&(n.I(t).ov=!0),t instanceof At)for(t=t.memberParts;t.next();)(n=t.value)instanceof ct&&this.Aj(n,e)}},L.Fz=function(t){var e=this.Tt.get(t);return null===e&&this.Tt.add(t,e={}),e},Tt.Object.defineProperties(gi.prototype,{duration:{get:function(){return this.Dg},set:function(t){1>t&&ie(t,">= 1",gi,"duration"),this.Dg=t}},reversible:{get:function(){return this.ho},set:function(t){this.ho=t}},runCount:{get:function(){return this.cu},set:function(t){0<t?this.cu=t:Q("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t)}},easing:{get:function(){return this.ot},set:function(t){this.ot=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.cc}}}),gi.prototype.getTemporaryState=gi.prototype.Fz,gi.prototype.stop=gi.prototype.stop,gi.prototype.add=gi.prototype.add,gi.prototype.addTemporaryPart=gi.prototype.Jy,gi.className="Animation",gi.EaseLinear=function(t,e,i,n){return i*t/n+e},gi.EaseInOutQuad=em,gi.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},gi.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},gi.EaseInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},gi.EaseOutExpo=im,nm.className="AnimationState",Ms.prototype.copy=function(){var t=new Ms(this.rf);t.so=this.so;var e=this.tk;if(null!==e){var i={};void 0!==e.duration&&(i.duration=e.duration),void 0!==e.finished&&(i.finished=e.finished),void 0!==e.easing&&(i.easing=e.easing),t.tk=i}return t},Tt.Object.defineProperties(Ms.prototype,{propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},animationSettings:{get:function(){return this.tk},set:function(t){this.tk=t}},startCondition:{get:function(){return this.so},set:function(t){this.so=t}}});var rm,za,sm=new ut(Ms,"Default",1),tf=new ut(Ms,"Immediate",2),om=new ut(Ms,"Bundled",3);function mi(t){Ye(this),this.H=null,this.Pa=new dt,this.xa="",this.pb=1,this.o=!1,this.j=this.Uh=this.u=this.Oi=this.Ni=this.Mi=this.Li=this.Ji=this.Ki=this.Ii=this.Qi=this.Hi=this.Pi=this.Gi=this.Fi=!0,this.Zq=[],t&&Object.assign(this,t)}function Jl(t,e){var i=1;return 1!==t.pb&&(e.globalAlpha=(i=e.globalAlpha)*t.pb),i}function A0(t,e,i,n,s){if(t.visible&&0!==t.pb&&(s||!t.isTemporary)){var o=(s=t.Pa.s).length;if(0!==o){var l=Jl(t,e),u=t.Zq;u.length=0;for(var c=i.scale,p=q.alloc(),m=0;m<o;m++){var v=s[m];n.contains(v)&&t.Nj(e,v,i,u,c,p,!1)}q.free(p),e.globalAlpha=l}}}function Fu(t,e,i){if(e=function P0(t,e,i){var n=i.zOrder;if(isNaN(n))return e;var s=(t=t.Pa).count;if(1>=s)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,l=NaN;0<=o&&(l=t.M(o).zOrder,isNaN(l));)o--;for(var u=e+1,c=NaN;u<s&&(c=t.M(u).zOrder,isNaN(c));)u++;if(!isNaN(l)&&l>n)for(;;){if(-1===o||l<=n){if(++o===e)break;return t.mb(e),t.Hb(o,i),o}for(l=NaN;0<=--o&&(l=t.M(o).zOrder,isNaN(l)););}else if(!isNaN(c)&&c<n)for(;;){if(u===s||c>=n){if(--u===e)break;return t.mb(e),t.Hb(u,i),u}for(c=NaN;++u<s&&(c=t.M(u).zOrder,isNaN(c)););}return e}(t,e,i),i instanceof At&&null!==i&&isNaN(i.zOrder)){if(0!==i.memberParts.count){for(var n=-1,s=t.Pa.s,o=s.length,l=0;l<o;l++){var u=s[l];if(u===i&&(e=l,0<=n)||0>n&&u.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&((s=t.Pa).mb(e),s.Hb(n,i))}null!==(e=i.containingGroup)&&Fu(t,-1,e)}null!==i.svg&&i.svg.remove()}function $(t,e){if(Em||(function R0(){if(Dn){var t=St.document.createElement("canvas");t.getContext("2d"),Om=t}}(),Em=!0),Ye(this),za=this,this.wb=!0,this.Ka=null,this.ya=this.Aa=0,this.ta=null,Dn){var i=this,n=function(){i.removeEventListener(St.document,"DOMContentLoaded",n,!1),i.setRTL()};null!==St.document.body?this.setRTL():i.addEventListener(St.document,"DOMContentLoaded",n,!1)}this.ol=null,Bu.add("Model",Ut);var s=this;return this.Ib=function(o){var l=s.partManager;if(o.model===l.diagram.model&&l.diagram.aa){l.diagram.aa=!1;try{""===o.modelChange&&o.change===de&&l.updateDataBindings(o.object,o.propertyName)}finally{l.diagram.aa=!0}}},this.Oc=function(o){s.partManager.doModelChanged(o)},this.hu=this.ku=null,am(this),this.model=Yp(),this.Wg=!0,um(this),this.layout=new ae,this.Wg=!1,this.bk=this.dk=this.ek=this.ck=this.ui=this.bA=this.Zj=this.Pv=null,this.gk=function(){},this.preventDefault=null,this.rn=!1,this.Yf=new jm,void 0!==t&&("string"==typeof t||St.Element&&t instanceof Element?ef(this,t):e=t),this.wb=!1,e&&this.nm(e),this}function am(t){t.Yd=new fn,t.Yd.Xe(t),t.Eb=17,t.Hw=!1,t.tn=!1,t.bu="default",t.Wa=new dt,t.pj=new kt,t.nl="default",t.Ux(),t.Tx(),t.pb=1,t.pa=new z(NaN,NaN).freeze(),t.du=new z(NaN,NaN),t.Ca=1,t.Pp=1,t.zt=new z(NaN,NaN).freeze(),t.At=NaN,t.Ot=1e-4,t.Mt=100,t.Bb=new Ot,t.zu=new z(NaN,NaN).freeze(),t.ut=new q(NaN,NaN,NaN,NaN).freeze(),t.rj=new Gt(0,0,0,0).freeze(),t.sj=vr,t.nu=!1,t.Zt=null,t.fu=null,t.yh=pn,t.yk=Nt,t.Fg=pn,t.pq=Nt,t.yt=y,t.Bt=y,t.Fc=!0,t.pn=!1,t.De=new ht,t.Eh=new kt,t.Xm=!0,t.vp=250,t.uk=-1,t.xp=new Gt(16,16,16,16).freeze(),t.kg=!1,t.Ik=!1,t.fn=!0,t.bq=new dn,t.bq.diagram=t,t.Qg=new dn,t.Qg.diagram=t,t.cj=new dn,t.cj.diagram=t,t.zg=null,t.pf=null,t.qu=!1,function z0(t){function e(s){var o=s.toLowerCase(),l=new dt;i.add(s,l),i.add(o,l),n.add(s,s),n.add(o,s)}var i=new kt,n=new kt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.jw=i,t.iw=n}(t),t.ai=new ht,t.Ht=!0,t.uu=Jr,t.qw=!1,t.wu=kf,t.it="auto",t.Op="auto",t.zh=null,t.Fh=null,t.Bh=null,t.Qh=null,t.Oh=null,t.Nh=null,t.Qt=null,t.Lh=null,t.xt=!1,t.Mh=null,t.Ph=null,t.$h=null,t.Ch=null,t.Rt=!1,t.Yt={},t.oj=[null,null],t.Wg=!1,t.Jw=!1,t.ou=!1,t.lt=!1,t.sw=!0,t.ld=!1,t.$i=!1,t.Uw=!0,t.Ce=-2,t.Og=new kt,t.Xn=new dt,t.Gg=!1,t.Jd=!0,t.Us=!0,t.Fi=!0,t.Gi=!0,t.Vs=!1,t.Ws=!0,t.Pi=!0,t.Hi=!0,t.Qi=!0,t.Ys=!0,t.Ii=!0,t.Ki=!0,t.Ji=!0,t.Li=!0,t.Mi=!0,t.Ni=!0,t.Oi=!0,t.Zs=!0,t.at=!0,t.rw=!1,t.Uk=!1,t.mn=!0,t.nn=!0,t.Xs=!0,t.$s=!0,t.iu=16,t.mu=16,t.qr=!1,t.gu=!1,t.lu=0,t.ju=0,t.zb=new Gt(5).freeze(),t.Iw=(new ht).freeze(),t.Nt=999999999,t.ow=(new ht).freeze(),t.Zi=!0,t.Ee=!0,t.vd=!0,t.Be=!1,t.gf=!1,t.xh=!0,t.hf=!1,t.ty=new ht,t.pw=new ht,t.Xh=null,t.bw=new Mt(8,8),t.cw=999,t.Cw=1,t.Kw=0,t.gc={scale:1,position:new z,bounds:new q,Qy:new Mt,cA:new Mt,Pz:!1},t.gc.canvasSize=t.gc.Qy,t.gc.newCanvasSize=t.gc.cA,t.gc.isScroll=!1,t.Sw=new q(NaN,NaN,NaN,NaN).freeze(),t.wo=new Mt(NaN,NaN).freeze(),t.Sp=new q(NaN,NaN,NaN,NaN).freeze(),t.It=!1,t.Lg=new kt;var e=new ct,i=new qt;i.bind(new Ae("text","",Vi)),e.add(i),t.oy=e,t.Lg.add("",e),e=new ct,(i=new qt).stroke="brown",i.bind(new Ae("text","",Vi)),e.add(i),t.Lg.add("Comment",e),(e=new ct).selectable=!1,e.avoidable=!1,(i=new Pt).figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new Mt(3,3).ja(),e.add(i),t.Lg.add("LinkLabel",e),t.Yi=new kt,(e=new At).selectionObjectName="GROUPPANEL",e.type=nt.Vertical,(i=new qt).font="bold 12pt sans-serif",i.bind(new Ae("text","",Vi)),e.add(i),(i=new nt(nt.Auto)).name="GROUPPANEL";var n=new Pt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),(n=new Mi).padding=new Gt(5,5,5,5).ja(),i.add(n),e.add(i),t.my=e,t.Yi.add("",e),t.Kh=new kt,e=new st,(i=new Pt).isPanelMain=!0,e.add(i),(i=new Pt).toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.ny=e,t.Kh.add("",e),e=new st,(i=new Pt).isPanelMain=!0,i.stroke="brown",e.add(i),t.Kh.add("Comment",e),(e=new Bt).type=nt.Auto,(i=new Pt).fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),(i=new Mi).margin=new Gt(1.5,1.5,1.5,1.5).ja(),e.add(i),t.St=e,t.wt=e,(e=new Bt).type=nt.Link,(i=new Pt).isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Kt=e,t.fe=null,t.mq=!1,t.Bk=null,t.partManager=new Ut,t.toolManager=new me,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.nt=null,t.Wm=new Ga,t.Vt=null,t.Wt=null,t.Mr=!1,t.commandHandler=hm(),t.eq=null,t.fq=Ma,t.Qw=!1,t.Nb=1,t.Yh=null,t.Oq=1,t.Sq=0,t.Aw=[0,0,0,0,0],t.Tq=0,t.yq=1,t.uw=0,t.vw=new z,t.Ay=500,t.wp=new z,t.wq=!1}function lm(t,e){t.animationManager.Cc(!0),t.Iw=(new ht).freeze(),t.ow=(new ht).freeze();var i=t.skipsUndoManager,n=null!=t.dc;n&&(t.skipsUndoManager=!0);var s=null;null!==t.fe&&null!==(s=t.fe.part)&&t.remove(s);var o=[],l=t.Wa.length;if(e){for(e=0;e<l;e++)for(var u=t.Wa.s[e].parts;u.next();){var c=u.value;c!==s&&null===c.data&&o.push(c)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<l;e++)t.Wa.s[e].clear();return t.partManager.clear(),t.De.clear(),t.Eh.clear(),t.ai.clear(),t.Bk=null,t.Xn.clear(),sl(),t.Og.clear(),Xo=[],null!==s&&(t.add(s),t.partManager.parts.remove(s)),n&&(t.skipsUndoManager=i),o}function hm(){return null}function ef(t,e){if(Dn){if(null!=e||Q("Diagram setup requires an argument DIV."),null!==t.Ka&&Q("Diagram has already completed setup."),"string"==typeof e?t.Ka=St.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:Q("No DIV or DIV id supplied: "+e),null===t.Ka&&Q("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ka.H&&Q("Invalid div id; div already has a Diagram associated with it."),!t.ol&&St.ResizeObserver){var i=at(function(){t.ac()},250);t.ol=new St.ResizeObserver(function(){i()}),t.ol.observe(t.Ka)}"static"===St.getComputedStyle(t.Ka,null).position&&(t.Ka.style.position="relative");var n="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=n,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=St.go;var s=new Cn(t);if(void 0!==s.style&&(s.style.position="absolute",s.style.top="0px",s.style.left="0px","rtl"===St.getComputedStyle(t.Ka,null).getPropertyValue("direction")&&(t.tn=!0),s.style.zIndex="2",s.style.userSelect="none",s.style.MozUserSelect="none",s.style.touchAction="none",s.style.letterSpacing="normal !important",s.style.wordSpacing="normal !important"),t.ta=s,t.ib=s.context,n=t.ib,t.Nb=t.computePixelRatio(),t.viewSize.w()||(t.Aa=t.Ka.clientWidth||1,t.ya=t.Ka.clientHeight||1),pm(t,t.Aa,t.ya),t.Ka.insertBefore(s.Oa,t.Ka.firstChild),(s=new Cn(null)).width=1,s.height=1,t.kw=s,t.py=s.context,Dn){s=Ve("div");var o=Ve("div");s.style.position="absolute",s.style.overflow="auto",s.style.width=t.Aa+"px",s.style.height=t.ya+"px",s.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ka.appendChild(s),s.appendChild(o),s.onscroll=T0,s.addEventListener("pointerdown",N0),s.H=t,s.vy=!0,s.wy=!0,t.ku=s,t.hu=o}t.gk=at(function(){t.Yh=null,t.N()},300),t.Pv=at(function(){nf(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.Zj=function(l){if(t.isEnabled){var u=Zr(t,l,!0);u.bubbles=!0;var c=0,p=0;u.delta=0,void 0!==l.deltaX?(0!==l.deltaX&&(c=0<l.deltaX?1:-1),0!==l.deltaY&&(p=0<l.deltaY?1:-1),u.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-c:-p):void 0!==l.wheelDeltaX?(0!==l.wheelDeltaX&&(c=0<l.wheelDeltaX?-1:1),0!==l.wheelDeltaY&&(p=0<l.wheelDeltaY?-1:1),u.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-c:-p):void 0!==l.wheelDelta&&0!==l.wheelDelta&&(u.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),yr(u,l)}},t.bA=function(l){t.isEnabled&&(t.Uk=!1,Zr(t,l,!0),(l=t.currentTool).cancelWaitAfter(),l.standardMouseOver())},t.ui=function(l){if(t.isEnabled){t.Uk=!0;var u=t.Yt;void 0===u[l.pointerId]&&(u[l.pointerId]=l);var c=!1;if(null===(u=t.oj)[0]||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType)if(null!==u[1]&&u[1].pointerId===l.pointerId)u[1]=l,c=!0;else if(null===u[0])u[0]=l;else{if(null!==u[1])return void l.preventDefault();u[1]=l,c=!0}else u[0]=l;(u="touch"===l.pointerType||"pen"===l.pointerType)&&(t.qu=!1,t.wq=!0);var p=c;c=af(t,l,!0,!1,!0,p),Ql(t,l,c),c.targetDiagram=rf(l,l.target),c.targetObject=null,p||c.clone(t.bq),p=t.vw,u=u?25:10,l.timeStamp-t.uw<t.Ay&&!(Math.abs(p.x-l.screenX)>u||Math.abs(p.y-l.screenY)>u)?t.yq++:t.yq=1,c.clickCount=t.yq,t.uw=l.timeStamp,t.vw.sg(l.screenX,l.screenY),t.doMouseDown(),1===l.button?l.preventDefault():yr(c,l)}},t.ck=function(l){if(t.isEnabled){t.Uk=!0;var u=t.oj;if(null===u[0]||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType){if(null!==u[1]&&u[1].pointerId===l.pointerId)return void(u[1]=l);if(null!==u[0])return;u[0]=l}else u[0]=l;if(u[0].pointerId===l.pointerId){u=af(t,l,!1,!1,!1,null!==u[1]);var c=St.document.elementFromPoint(l.clientX,l.clientY)||null;null!==c&&null!=c.shadowRoot&&(c=c.shadowRoot.elementFromPoint(l.clientX,l.clientY));var p=t,m=l;c&&c.H&&(m=l,p=c.H),u.targetDiagram=p,Ql(t,m,u),u.targetObject=null,t.doMouseMove(),yr(u,l)}}},t.ek=function(l){if(t.isEnabled){t.Uk=!0;var u="touch"===l.pointerType||"pen"===l.pointerType,c=t.Yt;if(u&&t.qu)delete c[l.pointerId],l.preventDefault();else if(null===(c=t.oj)[0]||c[0].pointerId!==l.pointerId&&c[0].pointerType===l.pointerType)null!==c[1]&&c[1].pointerId===l.pointerId&&(c[1]=null);else{c[0]=null,c=af(t,l,!1,!0,!0,!1);var p=St.document.elementFromPoint(l.clientX,l.clientY)||null;null!==p&&null!=p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(l.clientX,l.clientY)),null!==p&&p.H instanceof $&&p.H!==t&&Ql(p.H,l,c),null===p&&(p=l.target),Ql(t,l,c),c.clickCount=t.yq,c.targetDiagram=rf(l,p),c.targetObject=null,t.doMouseUp(),yr(c,l),u&&(t.wq=!1)}}},t.dk=function(l){if(t.isEnabled){t.Uk=!1;var u=t.Yt;u[l.pointerId]&&delete u[l.pointerId],null!==(u=t.oj)[0]&&u[0].pointerId===l.pointerId&&(u[0]=null),null!==u[1]&&u[1].pointerId===l.pointerId&&(u[1]=null),"touch"!==l.pointerType&&"pen"!==l.pointerType&&((l=t.currentTool).cancelWaitAfter(),l.standardMouseOver())}},t.bk=function(l){var u=t.oj;null!==u[0]&&u[0].pointerId===l.pointerId?(u[0]=null,t.wq=!1):null!==u[1]&&u[1].pointerId===l.pointerId&&(u[1]=null)},t.Vp=n.Z["d"+Dm[1]+Dm[2]+"wI"+Ha.slice(1,5)]["b"+nx.slice(1,e)](n.Z,Om,e,e),n.Vc(!0),function L0(t){var e=t.ta.Oa;e instanceof HTMLCanvasElement||(e=t.div),t.addEventListener(e,"pointerdown",t.ui,!1),t.addEventListener(e,"pointermove",t.ck,!1),t.addEventListener(e,"pointerup",t.ek,!1),t.addEventListener(e,"pointerout",t.dk,!1),t.addEventListener(e,"pointercancel",t.bk,!1),t.addEventListener(e,"pointerenter",t.cz,!1),t.addEventListener(e,"pointerleave",t.dz,!1),t.addEventListener(e,"wheel",t.Zj,!1),t.addEventListener(e,"keydown",t.Rz,!1),t.addEventListener(e,"keyup",t.Sz,!1),t.addEventListener(e,"blur",t.Oy,!1),t.addEventListener(e,"focus",t.Py,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(St,"resize",t.Pv,!1)}(t),"svg"===t.nl&&(e=t.pj.get("svg"),t.Ka.appendChild(e.Oa),t.ib=e.context)}}function $l(t){30<t.Sq&&(t.Yh=1)}function Iu(t,e){null!==t.Yh&&(t.Yh=null,e&&t.gk(),bs&&bs.ox||(t.Sq=0,t.Aw=[0,0,0,0,0],t.Tq=0))}function nf(t){if(null!==t.ta){var e=t.Ka;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.Hw||t.setScrollWidth();var i=t.gf?t.Eb:0,n=t.Be?t.Eb:0,s=t.Nb;t.Nb=t.computePixelRatio(),t.Nb!==s&&(t.pn=!0,t.ac()),(e.clientWidth!==t.Aa+i||e.clientHeight!==t.ya+n)&&(t.Ee=!0,t.Fc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===pn&&(t.Ik=!0,e.C()),t.ld||t.ac())}}}function um(t){var e=new mi;e.name="Background",t.Al(e),(e=new mi).name="",t.Al(e),(e=new mi).name="Foreground",t.Al(e),(e=new mi).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Al(e),(e=new mi).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Al(e),(e=new mi).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Xw(e,t.Pj("Background"))}function cm(t){var e=new nt(nt.Grid);e.name="GRID";var i=new Pt;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new Pt).figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new Pt).figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),(i=new Pt).figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new Pt).figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new Pt).figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),(i=new vt).add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function T0(){this.H.gu?this.H.gu=!1:this.H.isEnabled?this.H.lx(this):hf(this.H)}function N0(t){this.H.isEnabled?(this.H.lu=t.target.scrollTop,this.H.ju=t.target.scrollLeft):hf(this.H)}function dm(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.Co(t.zb),e;for(var i=!0,n=t.Wa.s,s=n.length,o=0;o<s;o++){var l=n[o];if(l.visible&&l.isInDocumentBounds)for(var u=(l=l.Pa.s).length,c=0;c<u;c++){var p=l[c];p.isInDocumentBounds&&p.isVisible()&&(p=p.actualBounds).w()&&(i?(i=!1,e.assign(p)):e.ed(p))}}return i&&e.h(0,0,0,0),e.Co(t.zb),e}function qn(t,e){if((e||t.hf)&&!t.wb&&null!==t.ta&&t.documentBounds.w()){if(t.wb=!0,e){var i=t.initialPosition;if(i.w())return t.wb=!1,void(t.position=i);(i=z.alloc()).xi(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=q.allocAt(0,0,n.width,n.height);var s=z.alloc();s.xi(n,t.initialViewportSpot),s.h(i.x-s.x,i.y-s.y),t.position=s,q.free(n),z.free(s),z.free(i)}i=t.yh,e&&t.Fg!==pn&&(i=t.Fg);var o=i!==pn?Ba(t,i):t.scale;i=t.pa.x,n=t.pa.y,s=t.Aa/o;var l=t.ya/o,u=t.yk,c=t.pq;e&&!u.sb()&&(c.sb()||c.Yb())&&(u=c.Yb()?C:c),sf(t,t.documentBounds,s,l,u,e),e=t.scale,t.scale=o,t.wb=!1,_.B((o=t.viewportBounds).x,i)&&_.B(o.y,n)&&_.B(o.width,s)&&_.B(o.height,l)||t.onViewportBoundsChanged(new q(i,n,s,l),o,e,!1)}}function Ba(t,e){var i=t.Pp;if(null===t.ta)return i;t.Va();var n=t.documentBounds;if(!n.w())return i;var s=n.width,o=t.Aa+(t.gf?t.Eb:0),l=t.ya+(t.Be?t.Eb:0),u=o/s,c=l/(n=n.height);return e===Xa?((e=Math.min(c,u))>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Ru?((e=c>u?(l-t.Eb)/n:(o-t.Eb)/s)>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function sf(t,e,i,n,s,o){var l=z.allocAt(t.pa.x,t.pa.y),u=l.x,c=l.y;if(null!==t.eq){var p=z.alloc();u=(p=t.eq.ga(y,p)).x-t.fq.x/t.scale,c=p.y-t.fq.y/t.scale,s=g,z.free(p)}(o||t.scrollMode===vr)&&(s.sb()&&(i>e.width&&(u=e.x+(s.x*e.width+s.offsetX)-(s.x*i-s.offsetX)),n>e.height&&(c=e.y+(s.y*e.height+s.offsetY)-(s.y*n-s.offsetY))),o=i-e.width,i<e.width+(s=t.rj).left+s.right?(u=Math.min(u+i/2,e.right+Math.max(o,s.right)-i/2),u=Math.max(u,e.left-Math.max(o,s.left)+i/2),u-=i/2):u>e.left?u=e.left:u<e.right-i&&(u=e.right-i),i=n-e.height,n<e.height+s.top+s.bottom?(c=Math.min(c+n/2,e.bottom+Math.max(i,s.bottom)-n/2),c=Math.max(c,e.top-Math.max(i,s.top)+n/2),c-=n/2):c>e.top?c=e.top:c<e.bottom-n&&(c=e.bottom-n)),l.x=isFinite(u)?u:-t.zb.left,l.y=isFinite(c)?c:-t.zb.top,null!==t.positionComputation&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),_g(t.Yd,t.pa,l),t.pa.h(l.x,l.y),yo(t),z.free(l)}function of(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),Si(t),t=t.Wa.iteratorBackwards;t.next();){var s=t.value;if(s.visible&&!s.isTemporary&&null!==(s=s.jc(e,i,n)))return s}return null}function Zr(t,e,i){var n=t.Qg;return t.Qg=t.cj,t.cj=n,n.diagram=t,n.event=e,i?Ql(t,e,n):(n.viewPoint=t.Qg.viewPoint,n.documentPoint=t.Qg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,void 0!==e.buttons&&(n.buttons=e.buttons),wi&&0===e.button&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=rf(e,e.target),n.targetObject=null,n}function rf(t,e){return null===e?null:(e=e.H)?e:((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function af(t,e,i,n,s,o){var l=t.Qg;return t.Qg=t.cj,t.cj=l,l.diagram=t,l.clickCount=1,t=l.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),l.modifiers=t,l.event=e,l.timestamp=e.timeStamp,l.button=e.button,l.buttons=e.buttons,wi&&0===e.button&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=s,l.isMultiTouch=o,l}function yr(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function Ql(t,e,i){var n=t.ta,s=t.Aa,o=t.ya,l=0,u=0;null!==n&&(n=n.getBoundingClientRect(),l=e.clientX-s/n.width*n.left,u=e.clientY-o/n.height*n.top),i.viewPoint.h(l,u),null!==t.Bb?(e=z.allocAt(l,u),t.Bb.Cd(e),i.documentPoint.assign(e),z.free(e)):i.documentPoint.h(l,u)}function fm(t,e,i){if(null!==t.oj[0]){e=t.oj[e];var n=t.ta;null!==n&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Aa/n.width*n.left,e.clientY-t.ya/n.height*n.top))}}function Ou(t,e,i){!t.Ee||t.wb||t.animationManager.defaultAnimation.isAnimating||hf(t)||(e&&Si(t),i&&qn(t,!1))}function po(t,e){if(!t.ld&&(t.kg=!1,null!==t.Ka||t.wo.w())){t.ld=!0;var i=t.animationManager,n=t.Xn;if(!i.isAnimating&&0!==n.length){for(var s=n.s,o=s.length,l=0;l<o;l++){var u=s[l];gn(u,!1),u.v()}n.clear()}0<(n=t.pw).count&&(n.each(function(c){c.Ov()}),n.clear()),s=n=!1,i.defaultAnimation.isAnimating&&(s=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.Ab||nf(t),Ou(t,!1,!0),null!==t.fe&&(t.fe.visible&&!t.mq&&(mo(t),t.mq=!0),!t.fe.visible&&t.mq&&(t.mq=!1)),Si(t),o=!1,(!t.hf||t.xh)&&(t.hf?vf(t,!t.Ik):(t.Ea("Initial Layout"),!1===i.isEnabled&&i.Cc(),vf(t,!1)),o=!0),t.Ik=!1,Si(t),t.ou||function E0(t){t.ld||Si(t),t.Va()}(t),Ou(t,!0,!1),l=!1,o?((i=q.alloc()).assign(t.viewportBounds),t.hf||(l=t.hf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function j0(t){if(t.Fg!==pn)t.scale=Ba(t,t.Fg);else if(t.yh!==pn)t.scale=Ba(t,t.yh);else{var e=t.initialScale;isFinite(e)&&0<e&&(t.scale=e)}qn(t,!0),t.Fd(e=t.Wa.s,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.du.assign(t.pa),mo(t)}(t)),t.S("LayoutCompleted"),Ou(t,!0,!1),q.free(i)):i.Nk&&i.Rw&&(t.Fg!==pn?t.scale=Ba(t,t.Fg):t.yh!==pn?t.scale=Ba(t,t.yh):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),qn(t,!0)),o&&l&&t.eb("Initial Layout"),Si(t),e||t.hc(t.ib),s&&(t.skipsUndoManager=n),t.ld=!1}}function Si(t){if(0!==t.De.count&&(t.ld||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.De.iterator;if(null===i||0===t.De.count)break;t.De=new ht,t.Ov(i,t.De)}t.nodes.each(function(n){n instanceof At&&65536&n.R&&(n.R=65536^n.R)})}}function lf(t,e){for(var i=Xt(),n=Xt(),s=e.memberParts;s.next();){var o=s.value;o.isVisible()&&(o instanceof At?(vo(o)||Bn(o)||Ko(o))&&lf(t,o):o instanceof st?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=i.length,s=0;s<t;s++)(o=i[s]).measure(1/0,1/0),o.arrange();for(Zt(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)(i=n[e]).measure(1/0,1/0),i.arrange();Zt(n)}function Eu(t,e,i,n,s,o,l,u,c,p){if(null!==t.Ka){null===t.ta&&Q("No canvas specified"),void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=!1),void 0===p&&(p=!1),Ra(t),t.ib.Vc(!0),t.vd=!0,t.$i=!0;var m=t.Ca;t.Ca=s;var v=t.Wa.s,w=v.length;try{var k=new q(o.x,o.y,n.width/s,n.height/s),A=k.copy();A.Co(i),mo(t,A),Si(t),t.Fd(v,w,t,k),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),null!==u&&""!==u&&(e.fillStyle=u,e.px(0,0,n.width,n.height));var T=t.Nb;e.scale(T,T);var j=Ot.alloc();j.reset(),j.translate(i.left,i.top),j.scale(s),0===o.x&&0===o.y||j.translate(-o.x,-o.y),e.setTransform(j.m11,j.m12,j.m21,j.m22,j.dx,j.dy),e.yc(),e instanceof Ki&&Wm(e,j.m11,j.m12,j.m21,j.m22,j.dx,j.dy),Ot.free(j),ju(t,e),e.globalAlpha=t.pb;var I=t.Pj("Grid");if(l){var B=new ht,R=l.iterator;for(R.reset();R.next();){var H=R.value;H instanceof vt&&(p||H.layer!==I)&&(H.Fj(),B.add(H))}for(p=0;p<w;p++)A0(v[p],e,t,B,c);B.each(function(J){return J.Fj()})}else for(B=0;B<w;B++){var K=v[B];K===I?p&&K.hc(e,t,!0):K.hc(e,t,c)}t.$i=!1,t.Yf&&Va(t.Yf,t)&&t.Vp()}finally{t.Ca=m,t.ib.Vc(!0),t.vd=!0,t.Fd(v,w,t,t.viewportBounds),mo(t),t.ib instanceof Ki&&(t.ib.Mj.replaceChildren(),t.redraw())}}}function ju(t,e){null!==(t=t.Rg)&&(void 0!==t.imageSmoothingEnabled&&e.Xx(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function ql(t,e){var s,i=t instanceof nt,n=t instanceof $;for(s in e){""===s&&Q("Setting properties requires non-empty property names");var o=t,l=s;if(i||n){var u=s.indexOf(".");if(0<u){var c=s.substring(0,u);i?o=t.fb(c):null==(o=t[c])&&(o=t.toolManager[c]),le(o)?l=s.substr(u+1):Q("Unable to find object named: "+c+" in "+t.toString()+" when trying to set property: "+s)}}if("_"!==l[0]&&!fr(o,l)){if(n&&"ModelChanged"===l){t.Zw(e[l]);continue}if(n&&"Changed"===l){t.Pe(e[l]);continue}if(n&&fr(t.toolManager,l))o=t.toolManager;else{if(n&&bm(t,l)){t.Bj(l,e[l]);continue}if(t instanceof mt&&"Changed"===l){t.Pe(e[l]);continue}Q('Trying to set undefined property "'+l+'" on object: '+o.toString())}}o[l]=e[s],"_"===l[0]&&o instanceof yt&&o.Ww(l)}}function Ra(t){!1!==t.pn&&(t.pn=!1,pm(t,t.Aa,t.ya))}function pm(t,e,i){yo(t);var n=t.Nb;t.ta.resize(e*n,i*n,e,i)&&(t.Fc=!0,t.ib.Vc(!0))}function hf(t){var e=t.ta;if(null===e||t.wo.w())return!0;var i=t.Aa,n=t.ya,s=t.Ka,o=!1,l=t.gf?t.Eb:0,u=t.Be?t.Eb:0,c=s.clientWidth||i+l,p=s.clientHeight||n+u,m=t.viewportBounds;s=m.x;var v=m.y,w=m.width,k=m.height;if((c!==i+l||p!==n+u)&&(t.gf=!1,t.Be=!1,u=l=0,t.Aa=c,t.ya=p,o=t.pn=!0,yo(t)),!t.hf||!t.viewportBounds.w())return!0;var A=t.ku,T=t.hu;if(t.Ee=!1,!(o||t.gf||t.Be||t.mn||t.nn))return!0;var j=t.documentBounds,I=0,B=0,R=0,H=0,K=m.width,J=m.height,lt=t.rj;t.contentAlignment.sb()?(j.width>K&&(I=lt.left,B=lt.right),j.height>J&&(R=lt.top,H=lt.bottom)):(I=lt.left,B=lt.right,R=lt.top,H=lt.bottom);var gt=j.width+I+B,ft=j.height+R+H,ot=gt>c/(lt=t.scale),tt=ft>p/lt;if(!(o||t.gf||t.Be||ot||tt))return!0;I=j.x-I,c=m.x,B=j.right+B,p=m.right+l,R=j.y-R;var Ct=m.y;j=j.bottom+H,m=m.bottom+u;var bt="1px";if(H="1px",t.scrollMode===vr&&(ot||tt)&&(ot&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(ot=1,I+1<c&&(ot=Math.max((c-I)*lt+t.Aa,ot)),B>p+1&&(ot=Math.max((B-p)*lt+t.Aa,ot)),K+l+1<gt&&(ot=Math.max((gt-K)*lt+t.Aa,ot)),bt=ot.toString()+"px"),tt&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(ot=1,R+1<Ct&&(ot=Math.max((Ct-R)*lt+t.ya,ot)),j>m+1&&(ot=Math.max((j-m)*lt+t.ya,ot)),J+u+1<ft&&(ot=Math.max((ft-J)*lt+t.ya,ot)),H=ot.toString()+"px")),tt="1px"!==H,(ot="1px"!==bt)&&tt||!ot&&!tt||(tt&&(p-=t.Eb),ot&&(m-=t.Eb),gt<K+l||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(l=1,I+1<c&&(l=Math.max((c-I)*lt+t.Aa,l)),B>p+1&&(l=Math.max((B-p)*lt+t.Aa,l)),K+1<gt&&(l=Math.max((gt-K)*lt+t.Aa,l)),bt=l.toString()+"px"),l=t.ya,(ot="1px"!==bt)!==t.Be&&(l=ot?t.ya-t.Eb:t.ya+t.Eb),ft<J+u||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(u=1,R+1<Ct&&(u=Math.max((Ct-R)*lt+l,u)),j>m+1&&(u=Math.max((j-m)*lt+l,u)),J+1<ft&&(u=Math.max((ft-J)*lt+l,u)),H=u.toString()+"px"),tt="1px"!==H),t.qr&&ot===t.Be&&tt===t.gf)return i===t.Aa&&n===t.ya||t.bd(),!1;if(ot!==t.Be&&(t.ya="1px"===bt?t.ya+t.Eb:Math.max(t.ya-t.Eb,1),o=!0),t.Be=ot,T.style.width=bt,tt!==t.gf&&(t.Aa="1px"===H?t.Aa+t.Eb:Math.max(t.Aa-t.Eb,1),o=!0,t.tn&&(u=z.alloc(),tt?(e.style.left=t.Eb+"px",t.position=u.h(t.pa.x+t.Eb/t.scale,t.pa.y)):(e.style.left="0px",t.position=u.h(t.pa.x-t.Eb/t.scale,t.pa.y)),z.free(u))),o&&yo(t),t.gf=tt,T.style.height=H,t.gu=!0,o&&(t.pn=!0),e=A.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(K+1<gt?e=(t.position.x-I)*lt:I+1<c?e=A.scrollWidth-A.clientWidth:B>p+1&&(e=t.position.x*lt)),t.tn)switch(t.bu){case"negative":e=-(A.scrollWidth-e-A.clientWidth);break;case"reverse":e=A.scrollWidth-e-A.clientWidth}return A.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(J+1<ft?A.scrollTop=(t.position.y-R)*lt:R+1<Ct?A.scrollTop=A.scrollHeight-A.clientHeight:j>m+1&&(A.scrollTop=t.position.y*lt)),p=t.ya,A.style.width=(c=t.Aa)+(t.gf?t.Eb:0)+"px",A.style.height=p+(t.Be?t.Eb:0)+"px",i===c&&n===p&&!t.animationManager.Ab||(i=q.allocAt(s,v,w,k),t.onViewportBoundsChanged(i,t.viewportBounds,lt,o),q.free(i),!1)}function uf(t,e,i){var n=e.layer;null!==n&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.Kj(),0<=(i=n.qc(-1,e,!1))&&t.cb(Ue,"parts",n,e,null,i,null),null!==(t=e.layerChanged)&&t(e,n,null))}function go(t,e,i,n,s,o){if(!e.contains(i)&&(void 0===o&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(void 0===s&&(s=df(t)),i instanceof ct){if(e.add(i,t.Pd(s,i,i.location)),i instanceof At&&(null!==i.placeholder||s.dragsMembers))for(o=i.memberParts;o.next();)go(t,e,o.value,n,s,s.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var l=o.value;if(!e.contains(l)){var u=l.fromNode,c=l.toNode;null!==u&&e.contains(u)&&null!==c&&e.contains(c)&&go(t,e,l,n,s)}}if(s.dragsTree)for(i=i.Pu();i.next();)go(t,e,i.value,n,s)}else if(i instanceof st)for(e.add(i,t.Pd(s,i)),i=i.labelNodes;i.next();)go(t,e,i.value,n,s);else i instanceof Bt||e.add(i,t.Pd(s,i,i.location))}function cf(t,e,i,n,s){if(null!==e&&0!==e.count){var o=z.alloc(),l=z.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Mr)||Du(t,e);for(var u=Xt(),c=Xt(),p=e.iterator,m=z.alloc();p.next();){var v=p.key,w=p.value;if(v.Zc()){var k=gm(t,v,e);null!==k?u.push(new zm(v,w,k)):(!s||v.canMove())&&(o.assign(k=w.point),t.computeMove(v,o.add(l),n,m),v.location=m,void 0===w.shifted&&(w.shifted=new z),w.shifted.assign(m.re(k)))}else p.key instanceof st&&c.push(p.sa)}for(z.free(m),s=u.length,p=0;p<s;p++)o.assign((v=u[p]).info.point),void 0===v.Tu.shifted&&(v.Tu.shifted=new z),v.node.location=o.add(v.Tu.shifted);for(s=z.alloc(),p=z.alloc(),v=c.length,w=0;w<v;w++){var A=c[w];if((k=A.key)instanceof st)if(k.suspendsRouting){k.Tg=null,m=k.fromNode;var T=k.toNode;if(null!==t.draggedLink&&n.dragsLink)if(T=A.value.point,null===k.dragComputation)e.add(k,t.Pd(n,k,l)),Co(k,l.x-T.x,l.y-T.y);else{A=z.allocAt(0,0),(m=k.i(0))&&m.w()&&A.assign(m);var j=m=z.alloc().assign(A).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&ff(t,k,m,j=z.alloc(),n),m.assign(k.dragComputation(k,m,j)).re(A),e.add(k,t.Pd(n,k,m)),Co(k,m.x-T.x,m.y-T.y),z.free(A),z.free(m),j!==m&&z.free(j)}else null!==m&&(s.assign(m.location),null!==(j=e.I(m))&&s.re(j.point)),null!==T&&(p.assign(T.location),null!==(j=e.I(T))&&p.re(j.point)),null!==m&&null!==T?s.Xa(p)?(m=A.value.point,(T=o).assign(s),T.re(m),e.add(k,t.Pd(n,k,s)),Co(k,T.x,T.y)):(k.suspendsRouting=!1,k.bb()):(A=A.value.point,e.add(k,t.Pd(n,k,m=null!==m?s:null!==T?p:l)),Co(k,m.x-A.x,m.y-A.y))}else(null===k.fromNode||null===k.toNode)&&(m=A.value.point,e.add(k,t.Pd(n,k,l)),Co(k,l.x-m.x,l.y-m.y))}z.free(o),z.free(l),z.free(s),z.free(p),Zt(u),Zt(c),i||(Si(t),th(t,e))}}function df(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Wm}function ff(t,e,i,n,s){if(void 0===s&&(s=df(t)),n.assign(i),null!==e){var o=t.grid;t=(e=s.gridSnapCellSize).width,e=e.height;var l=s.gridSnapOrigin,u=l.x;if(l=l.y,s=s.gridSnapCellSpot,null!==o){var c=o.gridCellSize;isNaN(t)&&(t=c.width),isNaN(e)&&(e=c.height),o=o.gridOrigin,isNaN(u)&&(u=o.x),isNaN(l)&&(l=o.y)}(o=z.allocAt(0,0)).yi(0,0,t,e,s),_.No(i.x,i.y,u+o.x,l+o.y,t,e,n),z.free(o)}}function Du(t,e){if(null!==e)for(t.Mr=!0,t=e.iterator;t.next();)(e=t.key)instanceof st&&(e.suspendsRouting=!0)}function th(t,e){if(null!==e){for(e=e.iterator;e.next();){var i=e.key;i instanceof st&&(i.suspendsRouting=!1,$y(i)&&i.bb())}t.Mr=!1}}function gm(t,e,i){return null===(e=e.containingGroup)||null===(t=gm(t,e,i))&&null===(t=i.I(e))?null:t}function pf(t,e,i){if(null!==e.diagram&&e.diagram!==t&&Q("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===i?null!==e.diagram&&Q("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&Q("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&Q("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,i=(t=t.Wa).count;for(var n=0;n<i;n++)t.M(n).name===e&&Q("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function mm(t,e,i){var n=t.animationManager;if(t.wb||t.ld)t.Ca=i,yo(t),t.N(),t.Ee=!0,n.Ab&&(Cu(n)||n.ce.add(n.H,"scale",e,t.Ca));else if(null===t.ta)t.Ca=i,yo(t);else{t.wb=!0;var s=t.viewportBounds.copy(),o=t.Aa,l=t.ya,u=t.zoomPoint.x,c=t.zoomPoint.y,p=t.contentAlignment;isNaN(u)&&(p.$c()?p.Hf(G)?u=0:p.Hf(U)&&(u=o-1):u=p.sb()?p.x*(o-1):o/2),isNaN(c)&&(p.$c()?p.Hf(Y)?c=0:p.Hf(b)&&(c=l-1):c=p.sb()?p.y*(l-1):l/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=z.allocAt(t.pa.x+u/e-u/i,t.pa.y+c/e-c/i),t.position=o,z.free(o),t.Ca=i,yo(t),t.wb=!1,t.onViewportBoundsChanged(s,t.viewportBounds,e,!1),qn(t,!1),n.Ab&&(Cu(n)||n.ce.add(n.H,"scale",e,t.Ca))}}function mo(t,e){var i=t.fe;if(null!==i&&i.visible){for(var n=Mt.alloc(),s=1,o=1,l=i.O.s,u=l.length,c=0;c<u;c++){var p=l[c],m=Math.abs(p.interval);2>m||(Uf(p.figure)?o=o*m/_.wx(o,m):s=s*m/_.wx(s,m))}if(n.h(o*(l=i.gridCellSize).width,s*l.height),void 0!==e)s=e.width,o=e.height,t=e.x,l=e.y;else{if((e=q.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.w())return void q.free(e);s=e.width,o=e.height,t=e.x,l=e.y,q.free(e)}i.width=s+2*n.width,i.height=o+2*n.height,e=z.alloc(),_.No(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),Mt.free(n),i.part.location=e,z.free(e)}}function ym(t){var e=t.isModified;t.Uw!==e&&(t.Uw=e,t.S("Modified"))}function vm(t,e){for(var i=(e=e.O.s).length,n=0;n<i;n++)gf(t,e[n])}function gf(t,e){if(e instanceof Ei){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){i.Bg instanceof ht&&i.Bg.add(t);var n=e.Eg;if(null!==n&&!0===n.sq&&null!==e.diagram&&e.diagram.Xn.add(e),i.hn)if(i=i.getAttribute("src")||"",null===(n=t.Og.I(i)))(n=[]).push(e),t.Og.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function mf(t,e){if(e instanceof Ei){var i=e.element;if(null!==i&&i instanceof HTMLImageElement&&i.hn){var n=i.getAttribute("src")||"",s=t.Og.I(n);if(null!==s)for(var o=0;o<s.length;o++)if(s[o]===e){s.splice(o,1),0===s.length&&(t.Og.remove(n),i.Fq&&i.removeEventListener("load",i.Fq),i.Yp&&i.removeEventListener("error",i.Yp),delete i.Fq,delete i.Yp,i.Bg instanceof ht&&i.Bg.remove(t),sl(n));break}}}}function yo(t){var e=t.pa,i=t.Ca;t.Sw.h(e.x,e.y,Math.max(t.Aa,0)/i,Math.max(t.ya,0)/i),t.vd=!0}function yf(t,e){t.Zi=!1;var i=t.Sp;i.D(e)||(i=i.copy(),t.Sp.assign(e),qn(t,!1),t.S("DocumentBoundsChanged",void 0,i),t.Ee=!0,t.N())}function zu(t,e){for(var i=t.ai.iterator;i.next();)xm(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function xm(t,e,i){if(null!==e){for(var n=e.fl.iterator;n.next();)xm(t,n.value,i);null!==e.layout&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function vf(t,e){if(t.xh&&!t.lt){var i=t.aa;t.aa=!0;var n=t.undoManager.transactionLevel,s=t.layout,o=t.animationManager;try{0===n&&(t.undoManager.isInternalTransaction=!0,t.Ea("Layout")),1>=n&&!o.defaultAnimation.isAnimating&&!o.Ab&&(e||fo(o,"Layout")),t.xh=!1;for(var l=t.ai.iterator;l.next();)wm(t,l.value,e,n);s.isValidLayout||(!e||s.isRealtime||null===s.isRealtime||0===n?(s.doLayout(t),Si(t),s.isValidLayout=!0):t.xh=!0)}finally{e=t.undoManager.isInternalTransaction,0===n&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==n&&1!==n||$d(o),t.aa=i}}}function wm(t,e,i,n){if(null!==e){for(var s=e.fl.iterator;s.next();)wm(t,s.value,i,n);null===(s=e.layout)||s.isValidLayout||(!i||s.isRealtime||0===n?(e.rh=!e.location.w(),s.doLayout(e),e.C(32),lf(t,e),s.isValidLayout=!0):t.xh=!0)}}function bm(t,e){var i=t.iw.I(e);return null!==i?i:t.iw.I(e.toLowerCase())}function xf(t,e){var i=t.jw.I(e);if(null!==i||null!==(i=t.jw.I(e.toLowerCase())))return i;Q("Unknown DiagramEvent name: "+e)}function Sm(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.Mr||e.isComplexRoutingRealtime}function wf(t,e,i,n){var s=t.Xh;if(null===s&&(t.Xh=s=new Th(t.avoidanceCellSize)),s.vs||s.group!==i||s.Zx!==n){if(s.Ix=Math.max(s.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),s.Jx=Math.max(s.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),null!==i&&(i=km(t,i)),null===i){e=q.alloc(),t.computeOccupiedArea(e),e.Bc(100,100),s.initialize(e);for(var o=t.nodes;o.next();){var l=o.value,u=l.layer;null!==u&&u.visible&&!u.isTemporary&&bf(t,l,n,e)}q.free(e)}else{for(0<i.memberParts.count&&((e=t.computePartsBounds(i.memberParts,!1)).Bc(20,20),s.initialize(e)),e=q.alloc(),o=i.memberParts;o.next();)(l=o.value)instanceof ct&&bf(t,l,n,e);q.free(e)}s.group=i,s.Zx=n,s.vs=!1}else e&&iv(s);return s}function km(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?km(t,e.containingGroup):null}function bf(t,e,i,n){if(e!==i&&e.isVisible()){var s=e.avoidable&&!e.isLinkLabel;if(s){var o=e.getAvoidableRect(n),l=t.Xh,u=o.x,c=o.y;if(ul(l,u,c)){var p=(c-l.Od)/l.tc|0,m=Math.min((u+o.width-l.Nd)/l.sc|0,l.di);for(o=Math.min((c+o.height-l.Od)/l.tc|0,l.ei),u=(u-l.Nd)/l.sc|0;u<=m;u++)if((c=l.bc[u]).fill)c.fill(Po,p,o+1);else for(var v=p;v<=o;v++)c[v]=Po}}if(e instanceof At&&(!s||e.avoidableMembers))for(e=e.memberParts;e.next();)(s=e.value)instanceof ct&&bf(t,s,i,n)}}function Sf(t,e){null===t.Xh||t.Xh.vs||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.Xh.vs=!0)}function Mm(t){-1===t.uk&&(t.uk=On(function(){if(-1!==t.uk&&(t.ug(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.wp);e.Xa(t.position)||(t.position=e,t.lastInput.documentPoint=t.Ps(t.wp),t.doMouseMove(),t.Zi=!0,e=q.alloc(),t.computeBounds(e),e.ed(t.documentBounds),yf(t,e),q.free(e),t.Fc=!0,t.bd(),Mm(t))}},t.vp))}function Cm(t,e,i){function n(){var m=+new Date;for(o=!0,l.reset();l.next();)if(!l.value[0].$k){o=!1;break}o||m-p>c?e(i,s,u):St.requestAnimationFrame(n)}for(var s=i.callback,o=!0,l=t.Og.iterator;l.next();)if(!l.value[0].$k){o=!1;break}if("function"!=typeof s||o)return e(i,s,t);var u=t,c=i.callbackTimeout||300,p=+new Date;return St.requestAnimationFrame(function(){n()}),null}function Am(t,e,i,n){if(t.animationManager.Cc(),t.bd(),null===t.ta)return null;"object"!=typeof e&&Q("properties argument must be an Object.");var s=e.size||null,o=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(o="NaN");var l=e.maxSize;void 0===e.maxSize&&(l="SVG"===i?new Mt(1/0,1/0):new Mt(2e3,2e3));var u=e.position||null,c=e.parts||null,p=void 0===e.padding?1:e.padding,m=e.background||null,v=e.omitTemporary;void 0===v&&(v=!0);var w=e.document||document,k=e.elementFinished||null,A=e.showTemporary;void 0===A&&(A=!v),void 0===(e=e.showGrid)&&(e=A),null!==s&&isNaN(s.width)&&isNaN(s.height)&&(s=null),"number"==typeof p?p=new Gt(p):p instanceof Gt||Q("MakeImage padding must be a Margin or a number."),p.left=Math.max(p.left,0),p.right=Math.max(p.right,0),p.top=Math.max(p.top,0),p.bottom=Math.max(p.bottom,0),t.ib.Vc(!0);var T=(v=new Cn(null,w,void 0,!0)).context;if(!(s||o||c||u))return v.width=t.Aa+Math.ceil(p.left+p.right),v.height=t.ya+Math.ceil(p.top+p.bottom),"SVG"===i?null===n?null:(n.resize(v.width,v.height,v.width,v.height),n.ownerDocument=w,n.hs=k,Eu(t,n.context,p,new Mt(v.width,v.height),t.Ca,t.pa,c,m,A,e),n.context):(t.Xm=!1,Eu(t,T,p,new Mt(v.width,v.height),t.Ca,t.pa,c,m,A,e),t.Xm=!0,v.context);var j=t.Pp,I=t.documentBounds.copy();if(I.Gv(t.zb),A)for(var B=t.Wa.s,R=B.length,H=0;H<R;H++){var K=B[H];if(K.visible&&K.isTemporary)for(var J=(K=K.Pa.s).length,lt=0;lt<J;lt++){var gt=K[lt];gt.isInDocumentBounds&&gt.isVisible()&&(gt=gt.actualBounds).w()&&I.ed(gt)}}if(B=new z(I.x,I.y),null!==c){for(R=new q(0,0,0,0),H=!0,(K=c.iterator).reset();K.next();)(J=K.value)instanceof vt&&(null!==(lt=J.layer)&&!lt.visible||null!==lt&&!A&&lt.isTemporary||!J.isVisible()||(J=J.actualBounds).w()&&(H?(H=!1,R.assign(J)):R.ed(J)));I.width=R.width,I.height=R.height,B.x=R.x,B.y=R.y}return null!==u&&u.w()&&(B=u,o||(o=j)),R=u=0,null!==p&&(u=p.left+p.right,R=p.top+p.bottom),H=K=0,null!==s&&(K=s.width,H=s.height,isFinite(K)&&(K=Math.max(0,K-u)),isFinite(H)&&(H=Math.max(0,H-R))),null!==s&&null!==o?("NaN"===o&&(o=j),s.w()?(s=K,I=H):isNaN(H)?(s=K,I=I.height*o):(s=I.width*o,I=H)):null!==s?s.w()?(o=Math.min(K/I.width,H/I.height),s=K,I=H):isNaN(H)?(s=K,I=I.height*(o=K/I.width)):(s=I.width*(o=H/I.height),I=H):null!==o?"NaN"===o&&l.w()?(o=Math.min((l.width-u)/I.width,(l.height-R)/I.height))>j?(o=j,s=I.width,I=I.height):(s=l.width,I=l.height):(s=I.width*o,I=I.height*o):(o=j,s=I.width,I=I.height),null!==p?(s+=u,I+=R):p=new Gt(0),null!==l&&(j=l.width,l=l.height,isNaN(j)&&(j=2e3),isNaN(l)&&(l=2e3),isFinite(j)&&(s=Math.min(s,j)),isFinite(l)&&(I=Math.min(I,l))),v.width=Math.ceil(s),v.height=Math.ceil(I),"SVG"===i?null===n?null:(n.resize(v.width,v.height,v.width,v.height),n.ownerDocument=w,n.hs=k,Eu(t,n.context,p,new Mt(Math.ceil(s),Math.ceil(I)),o,B,c,m,A,e),n.context):(t.Xm=!1,Eu(t,T,p,new Mt(Math.ceil(s),Math.ceil(I)),o,B,c,m,A,e),t.Xm=!0,v.context)}Ms.className="AnimationTrigger",Ms.Default=sm,Ms.Immediate=tf,Ms.Bundled=om,(L=mi.prototype).clear=function(){for(var t=this.Pa,e=0;e<t.length;e++){var i=t.s[e];i.Ig=null,Ff(i)}t.clear(),this.Zq.length=0},L.Xe=function(t){this.H=t},L.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,s=0,o=0,l=0,u=this.Pa.iterator;u.next();){var c=u.value;c instanceof At?s++:c instanceof ct?n++:c instanceof st?o++:c instanceof Bt?l++:i++}if(u="",0<i&&(u+=i+" Parts "),0<n&&(u+=n+" Nodes "),0<s&&(u+=s+" Groups "),0<o&&(u+=o+" Links "),0<l&&(u+=l+" Adornments "),1<t)for(t=this.Pa.iterator;t.next();)u+="\n    "+(i=t.value).toString(),null!==(n=i.data)&&pi(n)&&(u+=" #"+pi(n)),i instanceof ct?u+=" "+Vi(n):i instanceof st&&(u+=" "+Vi(i.fromNode)+" "+Vi(i.toNode));return e+" "+this.Pa.count+": "+u},L.jc=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.Uh)return null;var n=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(n=!0);for(var s=z.alloc(),o=this.Pa.s,l=o.length;l--;){var u=o[l];if((!0!==n||!1!==_o(u))&&u.isVisible()&&(s.assign(t),ui(s,u.oe),null!==(u=u.jc(s,e,i))&&(null!==e&&(u=e(u)),null!==u&&(null===i||i(u)))))return z.free(s),u}return z.free(s),null},L.ji=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof dt||n instanceof ht||(n=new ht),!1===this.Uh)return n;var s=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(s=!0);for(var o=z.alloc(),l=this.Pa.s,u=l.length;u--;){var c=l[u];if((!0!==s||!1!==_o(c))&&c.isVisible()){o.assign(t),ui(o,c.oe);var p=c;c.ji(o,e,i,n)&&(null!==e&&(p=e(p)),null===p||null!==i&&!i(p)||n.add(p))}}return z.free(o),n},L.Cf=function(t,e,i,n,s){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),s instanceof dt||s instanceof ht||(s=new ht),!1===this.Uh)return s;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.Re(t)&&(o=!0);for(var l=this.Pa.s,u=l.length;u--;){var c=l[u];if((!0!==o||!1!==_o(c))&&c.isVisible()){var p=c;c.Cf(t,e,i,n,s)&&(null!==e&&(p=e(p)),null===p||null!==i&&!i(p)||s.add(p))}}return s},L.Ou=function(t,e,i,n,s,o,l){if(!1===this.Uh)return s;for(var u=this.Pa.s,c=u.length;c--;){var p=u[c];if((!0!==l||!1!==_o(p))&&o(p)&&p.isVisible()){var m=p;p.Cf(t,e,i,n,s)&&(null!==e&&(m=e(m)),null===m||null!==i&&!i(m)||s.add(m))}}return s},L.og=function(t,e,i,n,s,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof dt||s instanceof ht)&&(o=s),s=!0),o instanceof dt||o instanceof ht||(o=new ht),!1===this.Uh)return o;var l=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(l=!0);for(var u=z.alloc(),c=z.alloc(),p=this.Pa.s,m=p.length;m--;){var v=p[m];if((!0!==l||!1!==_o(v))&&v.isVisible()){u.assign(t),ui(u,v.oe),c.h(t.x+e,t.y),ui(c,v.oe);var w=v;v.og(u,c,i,n,s,o)&&(null!==i&&(w=i(w)),null===w||null!==n&&!n(w)||o.add(w))}}return z.free(u),z.free(c),o},L.Fd=function(t,e){if(this.visible){var i=this.Pa.s,n=i.length;if(0!==n){t=Xt();for(var s=Xt(),o=0;o<n;o++){var l=i[o];if(l.ww=o,l instanceof st){if(!1===l.fd)continue}else if(l instanceof Bt&&null!==l.adornedPart)continue;var u=l.actualBounds;l.isVisible()&&yu(u,e)?(l.Fd(!0),t.push(l)):(l.Fd(!1),null!==l.adornments&&0<l.adornments.count&&s.push(l))}for(e=0;e<t.length;e++)for(dp(i=t[e]),i=i.adornments;i.next();)(n=i.value).measure(1/0,1/0),n.arrange(),n.Fd(!0);for(e=0;e<s.length;e++)dp(s[e]);Zt(t),Zt(s)}}},L.hc=function(t,e,i){if(this.visible&&0!==this.pb&&(void 0===i&&(i=!0),i||!this.isTemporary)){var n=(i=this.Pa.s).length;if(0!==n){if(t.isTemporary)for(var s=0;s<n;s++)i[s].Fj();s=Jl(this,t);var o=this.Zq;o.length=0;for(var l=e.scale,u=q.alloc(),c=0;c<n;c++)this.Nj(t,i[c],e,o,l,u,!0);if(q.free(u),t.isTemporary)for(e=0;e<n;e++)i[e].Fj();t.globalAlpha=s}}},L.Nj=function(t,e,i,n,s,o,l){if(l&&!_o(e))t.Hs(e);else{if(null!==n&&e instanceof st&&(e.isOrthogonal&&n.push(e),!1===e.fd))return void t.Hs(e);for(l=!1,n=e.containingGroup;null!==n;)l?null!==n.tb&&o.Fx(n.tb):null!==n.tb&&(l=!0,o.assign(n.tb)),n=n.containingGroup;var u=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!o.Yc(u))return void t.Hs(e);n=!o.Re(u)}n&&(t.save(),t instanceof Ki?t.ak=o.copy():(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip())),u.width*s>i.Oq||u.height*s>i.Oq?e.hc(t,i):(o=e.naturalBounds,0===(s=e.actualBounds).width||0===s.height||isNaN(s.x)||isNaN(s.y)||!e.isVisible()||(i=e.transform,null!==e.areaBackground&&(sn(e,t,e.areaBackground,!0,!0,o,s),t.fillRect(s.x,s.y,s.width,s.height)),null===e.areaBackground&&null===e.background&&(sn(e,t,"rgba(0,0,0,0.3)",!0,!1,o,s),t.fillRect(s.x,s.y,s.width,s.height)),null!==e.background&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),sn(e,t,e.background,!0,!1,o,s),t.fillRect(0,0,o.width/2,o.height/2),i.ws()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))))),n&&(t.restore(),t.Vc(!0))}},L.g=function(t,e,i,n,s){var o=this.diagram;null!==o&&o.cb(de,t,this,e,i,n,s)},L.oi=function(t,e,i){var n=this.Pa;if(e.Ig=this,null===this&&Ff(e),t>=n.count)t=n.count;else if(n.M(t)===e)return-1;return n.Hb(t,e),e.Vo(i),null!==(n=this.diagram)&&(i?n.N():n.oi(e)),Fu(this,t,e),t},L.qc=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.qc(t,e,i);var n=this.Pa;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.M(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.Wo(i),n.mb(t),null!==(n=this.diagram)&&(i?n.N():n.qc(e)),e.Ig=null,Ff(e),t},Tt.Object.defineProperties(mi.prototype,{parts:{get:function(){return this.Pa.iterator}},partsBackwards:{get:function(){return this.Pa.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.xa},set:function(t){var e=this.xa;if(e!==t){var i=this.diagram;if(null!==i)for(""===e&&Q("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&Q("Layer.name is already present in this diagram: "+t);for(this.xa=t,this.g("name",e,t),t=this.Pa.iterator;t.next();)t.value.layerName=this.xa}}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&ie(t,"0 <= value <= 1",mi,"opacity"),this.pb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Pa.iterator;e.next();)e.value.$b(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Ya())}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}}}),mi.prototype.findObjectsNear=mi.prototype.og,mi.prototype.findObjectsIn=mi.prototype.Cf,mi.prototype.findObjectsAt=mi.prototype.ji,mi.prototype.findObjectAt=mi.prototype.jc,mi.className="Layer",$.prototype.clear=function(){this.animationManager.Cc(),this.model.clear(),Ya=null,eh="",lm(this,!1),this.Xn.clear(),sl(),this.Og.clear(),this.Xh=null,this.Ya(),this.Va(),this.N()},$.prototype.reset=function(){this.clear(),this.wb=!0,am(this),yo(this),this.Wg=!0,um(this),this.layout=new ae,this.Wg=!1,this.model=Yp(),this.model.undoManager=new we,this.wb=this.rn=!1,this.N()},$.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=St.document.body);var e=Ve("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,0===e.scrollLeft&&(i="negative")),t.removeChild(e),this.bu=i},$.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=St.document.body);var e=0;if(Dn){var i=Pm;e=rm,null===i&&((i=Pm=Ve("p")).style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",(e=rm=Ve("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",n===(i=i.offsetWidth)&&(i=e.clientWidth),t.removeChild(e),0!=(e=n-i)||wi||(e=11)}this.Eb=e,this.Hw=!0},$.prototype.qb=function(t){t.classType===$&&(this.autoScale=t)},$.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Wa.iterator;i.next();)e+="\n  "+i.value.toString(t-1);return e},$.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},$.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})},$.prototype.computePixelRatio=function(){return null!==this.Yh?this.Yh:St.devicePixelRatio||1},$.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},$.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},$.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},$.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},$.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},$.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},$.prototype.doFocus=function(){this.focus()},$.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=St.scrollX||St.pageXOffset,e=St.scrollY||St.pageYOffset;this.ta.focus(),St.scrollTo(t,e)}},$.prototype.Py=function(){this.H.S("GainedFocus")},$.prototype.Oy=function(){this.H.S("LostFocus")},$.prototype.lx=function(t){if(null!==this.ta){var e=this.ku,i=this.hu;this.qr=!0;var n=this.documentBounds,s=this.viewportBounds,o=this.rj,l=n.x-o.left,u=n.y-o.top,c=n.width+o.left+o.right,p=n.height+o.top+o.bottom,m=n.right+o.right;o=n.bottom+o.bottom;var v=s.x;n=s.y;var w=s.width,k=s.height,A=s.right,T=s.bottom;s=this.scale;var j=t.scrollLeft;if(this.tn)switch(this.bu){case"negative":j=j+t.scrollWidth-t.clientWidth;break;case"reverse":j=t.scrollWidth-j-t.clientWidth}var I=j;w<c||k<p?(j=z.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.ju!==I&&(j.x=I/s+l,this.ju=I),this.allowVerticalScroll&&this.lu!==t.scrollTop&&(j.y=t.scrollTop/s+u,this.lu=t.scrollTop),this.position=j,z.free(j),this.Ee=this.qr=!1):(j=z.alloc(),t.vy&&this.allowHorizontalScroll&&(l<v&&(this.position=j.h(I+l,this.position.y)),m>A&&(this.position=j.h(-(e.scrollWidth-this.Aa)+I-this.Aa/s+m,this.position.y))),t.wy&&this.allowVerticalScroll&&(u<n&&(this.position=j.h(this.position.x,t.scrollTop+u)),o>T&&(this.position=j.h(this.position.x,-(e.scrollHeight-this.ya)+t.scrollTop-this.ya/s+o))),z.free(j),this.vd=!0,this.Ee=this.qr=!1,m=(n=this.documentBounds).right,A=(s=this.viewportBounds).right,o=n.bottom,T=s.bottom,l=n.x,v=s.x,u=n.y,n=s.y,w>=c&&l>=v&&m<=A&&(i.style.width="1px"),k>=p&&u>=n&&o<=T&&(i.style.height="1px"))}},$.prototype.computeBounds=function(t){return void 0===t&&(t=new q),Si(this),dm(this,t)},$.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var i=null;if(Ge(t))for(var n=0;n<t.length;n++){var s=t[n];!e&&s instanceof st||(s.Va(),null===i?i=s.actualBounds.copy():i.ed(s.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof st||(n.Va(),null===i?i=n.actualBounds.copy():i.ed(n.actualBounds));return null===i?new q(NaN,NaN,0,0):i},$.prototype.zoomToFit=function(){var t=this.sj;this.sj=vr,this.scale=Ba(this,Xa),t!==vr&&(qn(this,!1),sf(this,this.documentBounds,this.Aa/this.Ca,this.ya/this.Ca,this.yk,!1)),this.sj=t},(L=$.prototype).CA=function(t,e){void 0===e&&(e=Xa);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var s=1;if(e===Xa||e===Ru)if(isNaN(i))s=this.viewportBounds.height*this.scale/n;else if(isNaN(n))s=this.viewportBounds.width*this.scale/i;else{s=this.Aa;var o=this.ya;s=e===Ru?o/n>s/i?(o-(this.Be?this.Eb:0))/n:(s-(this.gf?this.Eb:0))/i:Math.min(o/n,s/i)}this.scale=s,this.position=new z(t.x,t.y)}},L.Ky=function(t,e){this.Va();var i=this.documentBounds,n=this.viewportBounds;this.position=new z(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},L.Az=function(t){if(t instanceof yt){this.eq=t;var e=z.alloc();this.fq=this.op(t.ga(y,e)),z.free(e)}else this.eq=null,this.fq=Ma},L.Ol=function(t,e){if(void 0===e&&(e=!0),e){if((t=of(this,t,function(i){return i.part},function(i){return i.canSelect()}))instanceof vt)return t}else if((t=of(this,t,function(i){return i.part}))instanceof vt)return t;return null},L.jc=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),Si(this);for(var n=this.Wa.iteratorBackwards;n.next();){var s=n.value;if(s.visible&&null!==(s=s.jc(t,e,i)))return s}return null},L.mz=function(t,e,i){return void 0===e&&(e=!0),function F0(t,e,i,n,s){for(void 0===i&&(i=null),void 0===n&&(n=null),s instanceof dt||s instanceof ht||(s=new ht),Si(t),t=t.Wa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.ji(e,i,n,s)}return s}(this,t,function(n){return n.part},e?function(n){return n instanceof vt&&n.canSelect()}:null,i)},L.ji=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof dt||n instanceof ht||(n=new ht),Si(this);for(var s=this.Wa.iteratorBackwards;s.next();){var o=s.value;o.visible&&o.ji(t,e,i,n)}return n},L.vx=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=!0),function I0(t,e,i,n,s){var o=null;for(void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=!1),s instanceof dt||s instanceof ht||(s=new ht),Si(t),t=t.Wa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.Cf(e,o,i,n,s)}return s}(this,t,function(s){return s instanceof vt&&(!i||s.canSelect())},e,n)},L.Cf=function(t,e,i,n,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),s instanceof dt||s instanceof ht||(s=new ht),Si(this);for(var o=this.Wa.iteratorBackwards;o.next();){var l=o.value;l.visible&&l.Cf(t,e,i,n,s)}return s},L.Ou=function(t,e,i,n,s,o){var l=new ht;Si(this);for(var u=this.Wa.iteratorBackwards;u.next();){var c=u.value;c.visible&&c.Ou(t,e,i,n,l,s,o)}return l},L.nz=function(t,e,i,n,s){return void 0===i&&(i=!0),void 0===n&&(n=!0),function O0(t,e,i,n,s,o){var l=null;for(void 0===l&&(l=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof dt||s instanceof ht)&&(o=s),s=!0),o instanceof dt||o instanceof ht||(o=new ht),Si(t),t=t.Wa.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.og(e,i,l,n,s,o)}return o}(this,t,e,function(o){return o instanceof vt&&(!n||o.canSelect())},i,s)},L.og=function(t,e,i,n,s,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof dt||s instanceof ht)&&(o=s),s=!0),o instanceof dt||o instanceof ht||(o=new ht),Si(this);for(var l=this.Wa.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.og(t,e,i,n,s,o)}return o},$.prototype.acceptEvent=function(t){return Zr(this,t,t instanceof MouseEvent)},$.prototype.Rz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var i=Zr(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),yr(i,t)},$.prototype.Sz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=Zr(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),yr(i,t)},$.prototype.cz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=Zr(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(i),e.currentTool.standardMouseOver(),yr(i,t)},$.prototype.dz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=Zr(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(i),yr(i,t)},$.prototype.getMouse=function(t){var e=this.ta;if(null===e)return new z(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.Aa/i.width*i.left,t=t.clientY-this.ya/i.height*i.top,null!==this.Bb?ui(new z(e,t),this.Bb):new z(e,t)},$.prototype.Ya=function(){this.Zi||(this.Zi=!0,this.ac(!1))},$.prototype.redraw=function(){this.wb||this.ld||(this.N(),this.bd())},(L=$.prototype).Qz=function(){return this.kg},L.Yy=function(t){void 0===t&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Cc(),e.isEnabled=!1,po(this),this.hf=!1,this.du=new z(NaN,NaN),e.isEnabled=i,this.ld=!0;var n=this;null!==t&&On(function(){n.ld=!1,fo(e,"Model"),t(n)},1)},L.ac=function(t){if(void 0===t&&(t=!1),!0!==this.kg&&!(this.wb||!1===t&&this.ld)){this.kg=!0;var e=this;St.requestAnimationFrame(function(){e.kg&&e.bd()})}},L.bd=function(){(!this.fn||this.kg)&&(this.fn&&(this.fn=!1),po(this))},L.Ov=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Zc()||i instanceof At||(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof At&&i.isVisible()&&lf(this,i);for(t.reset();t.next();)(i=t.value)instanceof st&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof Bt&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))},L.Fd=function(t,e,i,n){if(this.vd||this.animationManager.isAnimating)for(var s=0;s<e;s++)t[s].Fd(i,n)},L.hc=function(t){if(null!==this.Ka)if(null===this.ta&&Q("No canvas specified"),"svg"===this.nl){if(null!==this.Ka){var e=this.animationManager;if(!e.Ab&&(!e.isAnimating||e.isTicking)){Ra(this);var i=this.Aa,n=this.ya;if(t.Hv.resize(i,n,i,n),this.Fd(i=this.Wa.s,n=i.length,this,this.viewportBounds),this.Fc||e.isAnimating){e=this.pa;var s=this.Ca,o=Math.round(e.x*s)/s,l=Math.round(e.y*s)/s,u=this.Bb;for(u.reset(),1!==s&&u.scale(s),0===e.x&&0===e.y||u.translate(-o,-l),t.ti=null,Wm(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),1!==this.pb&&(t.globalAlpha=this.pb),ju(this,t),this.ta.context.setTransform(e=this.Nb,0,0,e,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya),e=0;e<n;e++)i[e].hc(t,this);t=!1,this.Yf?Va(this.Yf,this)&&(t=this.Vp()):t=!0,t&&(Ot.prototype.Cd=Ot.prototype.Fu),this.Fc=this.vd=!1}}}}else t:if(o=this.animationManager,!o.Ab&&(!o.isAnimating||o.isTicking)&&(i=new Date,Ra(this),"0"!==this.Ka.style.opacity)){if(n=t!==this.ib,this.Fd(e=this.Wa.s,s=e.length,this,this.viewportBounds),n)t.Vc(!0),this.vd=!0;else if(!this.Fc&&!o.isAnimating)break t;(o=this.Bb).reset(),l=this.Nb,u=this.pa;var c=this.Ca,p=Math.round(u.x*c)/c,m=Math.round(u.y*c)/c;for(1!==c&&o.scale(c),0===u.x&&0===u.y||o.translate(-p,-m),t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.Aa,this.ya),1!==this.pb&&(t.globalAlpha=this.pb),ju(this,t),u=0;u<s;u++)t.setTransform(l,0,0,l,0,0),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),t.yc(),e[u].hc(t,this);if(e=!1,this.Yf?Va(this.Yf,this)&&(e=this.Vp()):e=!0,e&&(Ot.prototype.Cd=Ot.prototype.Fu),n?(this.ib.Vc(!0),this.vd=!0):this.Fc=this.vd=!1,e=+new Date-+i,i=this.Aw,(n=bs&&bs.ox)||null===this.Yh){for(i[this.Tq]=e,this.Tq=(this.Tq+1)%i.length,s=e=0;s<i.length;s++)e+=i[s];this.Sq=e/i.length}if(1!==this.pb&&(t.globalAlpha=1),n)for(t.setTransform(1,0,0,1,0,0),n=0;n<i.length;n++)t.fillText(i[n].toString(),20,150+20*n)}},L.Gf=function(t){return this.Rg[t]},L.Yx=function(t,e){"minDrawingLength"===t&&(this.Oq=e),this.Rg[t]=e,this.redraw()},L.Ux=function(){this.Rg=new Wi,this.Rg.drawShadows=!0,this.Rg.textGreeking=!0,this.Rg.viewportOptimizations=!(wi||Od),this.Rg.temporaryPixelRatio=!0,this.Rg.pictureRatioOptimization=!0,this.Oq=this.Rg.minDrawingLength=1},L.Ql=function(t){return this.on[t]},L.tA=function(t,e){this.on[t]=e},L.Tx=function(){this.on=new Wi,this.on.extraTouchArea=10,this.on.extraTouchThreshold=10,this.on.hasGestureZoom=!0},L.set=function(t){return Object.assign(this,t),this},L.Eu=function(t){return this.nm(t)},L.nm=function(t){return ql(this,t),this},L.ex=function(){if(0!==this.Eh.count&&!(1<this.undoManager.transactionLevel)){for(;0<this.Eh.count;){var t=this.Eh;for(this.Eh=new kt,t=t.iterator;t.next();){var e=t.key;e.Xo(t.value),e.rc()}}this.N()}},L.N=function(t){if(void 0===t)this.Fc=!0,this.ac();else{var e=this.viewportBounds;t.w()&&e.Yc(t)&&(this.Fc=!0,this.ac())}this.S("InvalidateDraw")},$.prototype.invalidateViewport=function(t,e){if(!0!==this.Fc)if(this.Fc=!0,"svg"===this.nl)this.bd();else{var i=!0===this.Gf("temporaryPixelRatio");if(!0===this.Gf("viewportOptimizations")&&this.scrollMode!==Mf&&this.rj.hi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,s=Math.max(t.y,e.y),o=Math.min(t.y+t.height,e.y+e.height);if(0<Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*n&&0<Math.max(0,o-s)*n){if(!(this.ld||(this.kg=!1,null===this.Ka||(this.ld=!0,this.documentBounds.w()||(n=q.alloc(),yf(this,this.computeBounds(n)),q.free(n)),n=this.ta,null===n||n instanceof fs)))){var l=this.Nb;s=this.Aa*l;var u=this.ya*l,c=this.scale*l;o=Math.round(Math.round(e.x*c)-Math.round(t.x*c)),e=Math.round(Math.round(e.y*c)-Math.round(t.y*c)),t=this.py,(c=this.kw).width!==s&&(c.width=s),c.height!==u&&(c.height=u),t.clearRect(0,0,s,u),c=190*l;var p=70*l,m=Math.max(o,0),v=Math.max(e,0),w=Math.floor(s-m),k=Math.floor(u-v);t.drawImage(n.Oa,m,v,w,k,0,0,w,k),Va(this.Yf,this)&&t.clearRect(0,0,c,p),n=Xt(),t=Xt(),k=Math.abs(o),w=Math.abs(e);var A=0===m?0:s-k;m=z.allocAt(A,0),k=z.allocAt(k+A,u),t.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y)));var T=this.Bb;if(T.reset(),T.scale(l,l),1!==this.Ca&&T.scale(this.Ca),(0!==(l=this.pa).x||0!==l.y)&&isFinite(l.x)&&isFinite(l.y)&&T.translate(-l.x,-l.y),ui(m,T),ui(k,T),n.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y))),m.h(0,A=0===v?0:u-w),k.h(s,w+A),t.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y))),ui(m,T),ui(k,T),n.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y))),Va(this.Yf,this)&&(m.h(s=0<o?0:-o,u=0<e?0:-e),k.h(c+s,p+u),t.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y))),ui(m,T),ui(k,T),n.push(new q(Math.min(m.x,k.x),Math.min(m.y,k.y),Math.abs(m.x-k.x),Math.abs(m.y-k.y)))),z.free(m),z.free(k),Ou(this,!1,!0),null===this.Ka&&Q("No div specified"),null===this.ta&&Q("No canvas specified"),!this.animationManager.Ab&&(s=this.ib,this.Fc)){for(Ra(this),u=this.Nb,s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this.Aa*u,this.ya*u),s.drawImage(this.kw.Oa,0<o?0:Math.round(-o),0<e?0:Math.round(-e)),o=this.pa,l=this.Ca,c=Math.round(o.x*l)/l,p=Math.round(o.y*l)/l,(e=this.Bb).reset(),1!==l&&e.scale(l),0===o.x&&0===o.y||e.translate(-c,-p),s.save(),s.beginPath(),o=t.length,l=0;l<o;l++)0!==(c=t[l]).width&&0!==c.height&&s.rect(Math.floor(c.x),Math.floor(c.y),Math.ceil(c.width),Math.ceil(c.height));for(s.clip(),s.setTransform(u,0,0,u,0,0),s.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),s.yc(),this.Fd(e=this.Wa.s,o=e.length,this,this.viewportBounds),ju(this,s),s.globalAlpha=this.pb,u=0;u<o;u++)if(c=n,(l=e[u]).visible&&0!==l.pb){p=Jl(l,s),(v=l.Zq).length=0,m=this.scale,w=q.alloc(),T=(k=l.Pa.s).length,A=c.length;for(var j=0;j<T;j++){var I=k[j],B=Pr(I,I.actualBounds);t:{for(var R=2/m,H=4/m,K=0;K<A;K++){var J=c[K];if(0!==J.width&&0!==J.height&&B.Wu(J.x-R,J.y-R,J.width+H,J.height+H)){B=!0;break t}}B=!1}B&&l.Nj(s,I,this,v,m,w,!0)}q.free(w),s.globalAlpha=p}s.restore(),s.Vc(!0),this.Yf&&Va(this.Yf,this)&&this.Vp(),this.Fc=this.vd=!1,this.gk()}Zt(n),Zt(t),this.ld=!1}}else this.bd();i&&($l(this),this.bd(),Iu(this,!0))}else i?($l(this),this.bd(),Iu(this,!0)):this.bd()}},(L=$.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&Q("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Pj(t.layerName))&&(e=this.Pj("")),null===e&&Q('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.oi(99999999,t,t.diagram===this);0<=i&&this.cb(ze,"parts",e,null,t,null,i),e.isTemporary||this.Ya(),t.C(1),null!==(i=t.layerChanged)&&i(t,null,e)}},L.oi=function(t){this.partManager.oi(t);var e=this;Mr(t,function(i){vm(e,i)}),(t instanceof Bt||t instanceof At&&null!==t.placeholder)&&t.v(),null!==t.data&&Mr(t,function(i){zp(e.partManager,i)}),!0!==Bn(t)&&!0!==Ko(t)||this.De.add(t),Ey(t,!0,this),Dy(t)?(t.actualBounds.w()&&this.N(Pr(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Pr(t,t.actualBounds)),this.ac()},L.qc=function(t){t.Dj(),this.partManager.qc(t);var e=this;null!==t.data&&Mr(t,function(i){Bp(e.partManager,i,e)}),this.De.remove(t),Dy(t)?(t.actualBounds.w()&&this.N(Pr(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Pr(t,t.actualBounds)),this.ac()},L.remove=function(t){uf(this,t,!0)},L.Is=function(t,e){if(void 0===e&&(e=!1),Ge(t))for(var i=t.length,n=0;n<i;n++){var s=t[n];e&&!s.canDelete()||this.remove(s)}else for((i=new ht).addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},L.Jj=function(t,e,i){return void 0===i&&(i=!1),this.partManager.Jj(t,e,i)},$.prototype.moveParts=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=df(this)),null!==this.toolManager){var s=new kt;if(null!==t)if(Ge(t))for(var o=0;o<t.length;o++)go(this,s,t[o],i,n);else for(t=t.iterator;t.next();)go(this,s,t.value,i,n);else{for(t=this.parts;t.next();)go(this,s,t.value,i,n);for(t=this.nodes;t.next();)go(this,s,t.value,i,n);for(t=this.links;t.next();)go(this,s,t.value,i,n)}cf(this,s,e,n,i)}},$.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new z),n.assign(e),null===t)return n;var s=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&ff(this,t,e,s=z.alloc(),i),i=null!==t.dragComputation?t.dragComputation(t,e,s):s;var l=t.minLocation,u=l.x;isNaN(u)&&(u=o?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var c=t.maxLocation,p=c.x;return isNaN(p)&&(p=o?Math.round(1e3*t.location.x)/1e3:t.location.x),c=c.y,isNaN(c)&&(c=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(u,Math.min(i.x,p)),Math.max(l,Math.min(i.y,c))),s!==e&&z.free(s),n},(L=$.prototype).Pd=function(t,e,i){if(void 0===i)return new Go(_n);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(n=!1),new Go(n?new z(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3):i.copy())},L.Al=function(t){pf(this,t,null),t.Xe(this);var e=this.Wa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.M(i).isTemporary;)i--;return e.Hb(i+1,t),null!==this.dc&&this.cb(ze,"layers",this,null,t,null,i+1),this.N(),this.Ya(),this},L.Xw=function(t,e){pf(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.dc&&this.cb(Ue,"layers",this,t,null,n,null));var o,s=i.count;for(o=0;o<s;o++)if(i.M(o)===e){i.Hb(o,t);break}return null!==this.dc&&this.cb(ze,"layers",this,null,t,null,o),this.N(),0>n&&this.Ya(),this},L.Dy=function(t,e){pf(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.dc&&this.cb(Ue,"layers",this,t,null,n,null));var o,s=i.count;for(o=0;o<s;o++)if(i.M(o)===e){i.Hb(o+1,t);break}return null!==this.dc&&this.cb(ze,"layers",this,null,t,null,o+1),this.N(),0>n&&this.Ya(),this},L.lA=function(t){if(t.diagram!==this&&Q("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Wa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Pa.copy().iterator;e.next();){var n=e.value,s=n.layerName;n.layerName=s!==t.name?s:""}null!==this.dc&&this.cb(Ue,"layers",this,t,null,i,null),this.N(),this.Ya()}}},L.Pj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},L.Zw=function(t){return null===this.pf&&(this.pf=new dt),this.pf.add(t),this.model.Pe(t),this},L.nA=function(t){null!==this.pf&&(this.pf.remove(t),0===this.pf.count&&(this.pf=null)),this.model.hk(t)},L.Pe=function(t){return null===this.zg&&(this.zg=new dt),this.zg.add(t),this},L.hk=function(t){null!==this.zg&&(this.zg.remove(t),0===this.zg.count&&(this.zg=null))},L.ds=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Uu(t),t.change!==$n&&(this.isModified=!0),null!==this.zg)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.M(n)(t)},L.cb=function(t,e,i,n,s,o,l){void 0===o&&(o=null),void 0===l&&(l=null);var u=new ge;u.diagram=this,u.change=t,u.propertyName=e,u.object=i,u.oldValue=n,u.oldParam=o,u.newValue=s,u.newParam=l,this.ds(u)},L.g=function(t,e,i,n,s){this.cb(de,t,this,e,i,n,s)},$.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===de){var s=t.object;if(se(s,t.propertyName,t.I(e)),s instanceof yt){var o=s.part;null!==o&&o.Xb()}this.isModified=!0}else if(n===ze){var l=t.object,u=t.newParam,c=t.newValue;if(l instanceof nt)if("number"==typeof u&&c instanceof yt){e?l.qc(u):l.Hb(u,c);var p=l.part;null!==p&&p.Xb()}else"number"==typeof u&&c instanceof Fe&&(c.isRow?ay(l,u,e?void 0:c):ly(l,u,e?void 0:c));else if(l instanceof mi){var m=!0===t.oldParam;"number"==typeof u&&c instanceof vt&&(e?(c.isSelected=!1,c.isHighlighted=!1,c.Xb(),l.qc(m?u:-1,c,m)):l.oi(u,c,m))}else l instanceof $?"number"==typeof u&&c instanceof mi&&(e?this.Wa.mb(u):(c.Xe(this),this.Wa.Hb(u,c))):Q("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Ue){var v=t.object,w=t.oldParam,k=t.oldValue;if(v instanceof nt)"number"==typeof w&&k instanceof yt?e?v.Hb(w,k):v.qc(w):"number"==typeof w&&k instanceof Fe&&(k.isRow?ay(v,w,e?k:void 0):ly(v,w,e?k:void 0));else if(v instanceof mi){var A=!0===t.newParam;"number"==typeof w&&k instanceof vt&&(e?0>v.Pa.indexOf(k)&&v.oi(w,k,A):(k.isSelected=!1,k.isHighlighted=!1,k.Xb(),v.qc(A?w:-1,k,A)))}else v instanceof $?"number"==typeof w&&k instanceof mi&&(e?(k.Xe(this),this.Wa.Hb(w,k)):this.Wa.mb(w)):Q("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==$n&&Q("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},$.prototype.Ea=function(t){return this.undoManager.Ea(t)},$.prototype.eb=function(t){return this.undoManager.eb(t)},$.prototype.Kf=function(){return this.undoManager.Kf()},$.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},$.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},$.prototype.rp=function(){this.partManager.rp()},$.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.D(e)){void 0===n&&(n=!1),n||(this.Ee=!0),this.vd=!0;var s=this.layout;null===s||!s.isViewportSized||this.autoScale!==pn||t.width===e.width&&t.height===e.height||s.C(),s=this.currentTool,!0===this.Uk&&s instanceof me&&(this.lastInput.documentPoint=this.Ps(this.lastInput.viewPoint),Pg(s,this)),this.wb||this.invalidateViewport(t,e),mo(this),this.gc.scale=i,this.gc.position.x=t.x,this.gc.position.y=t.y,this.gc.bounds.assign(t),this.gc.canvasSize.width=Math.round(t.width*i),this.gc.canvasSize.height=Math.round(t.height*i),this.gc.newCanvasSize.width=this.Aa,this.gc.newCanvasSize.height=this.ya,this.gc.isScroll=n,this.S("ViewportBoundsChanged",this.gc,t),this.isVirtualized&&this.links.each(function(o){o.isAvoiding&&o.actualBounds.Yc(e)&&o.bb()})}},$.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.S("ChangingSelection",e);for(var i=e.Fa(),n=i.length,s=0;s<n;s++)i[s].isSelected=!1;e.ka(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},$.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},$.prototype.sA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),Ge(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof vt||Q("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof vt||Q("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},$.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Fa(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ka(),t.clear(),t.freeze()}},(L=$.prototype).Jz=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},L.Kz=function(t){t=(new ht).addAll(t);for(var e=this.highlighteds.copy().hp(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof vt||Q("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},L.scroll=function(t,e,i){void 0===i&&(i=1);var n="up"===e||"down"===e,s=0,o=z.alloc();if("pixel"===t)s=i;else if("line"===t)s=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=n?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(s=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return s=this.documentBounds,i=this.viewportBounds,"up"===e?this.position=o.h(i.x,s.y):"left"===e?this.position=o.h(s.x,i.y):"down"===e?this.position=o.h(i.x,s.bottom-i.height):"right"===e&&(this.position=o.h(s.right-i.width,i.y)),void z.free(o);Q("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}s/=this.scale,i=this.position,"up"===e?this.position=o.h(i.x,i.y-s):"down"===e?this.position=o.h(i.x,i.y+s):"left"===e?this.position=o.h(i.x-s,i.y):"right"===e?this.position=o.h(i.x+s,i.y):Q("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),z.free(o)},L.uv=function(t){var e=this.viewportBounds;e.Re(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},L.es=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},L.op=function(t){var e=this.Bb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var i=this.pa;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.Bb)},L.AA=function(t){var e=this.Bb,i=t.x,n=t.y,s=i+t.width,o=n+t.height,l=e.m11,u=e.m12,c=e.m21,p=e.m22,m=e.dx,v=e.dy,w=i*l+n*c+m;e=i*u+n*p+v;var k=s*l+n*c+m;return t=s*u+n*p+v,n=i*l+o*c+m,i=i*u+o*p+v,l=s*l+o*c+m,s=s*u+o*p+v,o=Math.min(w,k),w=Math.max(w,k),k=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),w=Math.max(w,n),k=Math.min(k,i),e=Math.max(e,i),o=Math.min(o,l),w=Math.max(w,l),new q(o,k=Math.min(k,s),w-o,(e=Math.max(e,s))-k)},L.Ps=function(t){var e=this.Bb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var i=this.pa;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),ui(t.copy(),this.Bb)},$.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===$n&&"S"===n[0])if("StartingFirstTransaction"===n){var s=this;(t=this.toolManager).mouseDownTools.each(function(c){return c.diagram=s}),t.mouseMoveTools.each(function(c){return c.diagram=s}),t.mouseUpTools.each(function(c){return c.diagram=s}),this.ld||this.hf||(this.Ik=!0,this.fn&&(this.kg=!0))}else"StartingUndo"===n||"StartingRedo"===n?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc(),this.S("ChangingSelection",this.selection)):"StartedTransaction"===n&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc();else if(this.aa){this.aa=!1;try{if(""===t.modelChange&&i===$n){("FinishedUndo"===n||"FinishedRedo"===n)&&(this.S("ChangedSelection",this.selection),Si(this));var o=this.animationManager;"RolledBackTransaction"===n&&o.Cc(),this.ex(),this.Ik=!0,this.bd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||$d(o),"CommittedTransaction"===n&&this.undoManager.isJustDiscarded&&(this.Ce=Math.min(this.Ce,this.undoManager.historyIndex-1)),"CommittedTransaction"!==n&&"RolledBackTransaction"!==n||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(ym(this),this.As.clear(),function M0(t){for(t=t.Ei.iterator;t.next();)t.value.Wk=!1}(this.animationManager)),!this.Rt&&l&&this.lastInput.targetDiagram){this.Rt=!0;var u=this;On(function(){u.currentTool.standardMouseOver(),u.Rt=!1},10)}}}finally{this.aa=!0}}}},$.prototype.Wd=function(){this.partManager.Wd()},$.prototype.Aj=function(t,e){this.Yd.Aj(t,e)},$.prototype.Cj=function(t,e){this.Yd.Cj(t,e)},$.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},$.prototype.Wb=function(t){return this.partManager.Wb(t)},$.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(L=$.prototype).Lc=function(t){return this.partManager.Lc(t)},L.ii=function(t){return this.partManager.ii(t)},L.Kc=function(t){return this.partManager.Kc(t)},L.ms=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ms.apply(this.partManager,e instanceof Array?e:zt(be(e)))},L.ls=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ls.apply(this.partManager,e instanceof Array?e:zt(be(e)))},L.Va=function(){if(this.Zi){var t=q.alloc();yf(this,this.computeBounds(t)),q.free(t)}},L.sz=function(){for(var t=new ht,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)(i=e.value).isTopLevel&&t.add(i);return t.iterator},L.rz=function(){return this.ai.iterator},L.Vz=function(t){Si(this),t&&zu(this,!0),this.ld?vf(this,!1):(this.Ik=!0,po(this))},L.zz=function(){for(var t=new dt,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&null===i.kh()&&t.add(i)}return t.iterator},L.Bj=function(t,e){return null!==(t=xf(this,t))&&t.add(e),this},L.am=function(t,e){null!==(t=xf(this,t))&&t.remove(e)},L.S=function(t,e,i){var n=xf(this,t),s=new Wr;if(s.diagram=this,null!==(t=bm(this,t))&&(s.name=t),void 0!==e&&(s.subject=e),void 0!==i&&(s.parameter=i),1===(e=n.length))n.M(0)(s);else if(0!==e)for(n=n.Fa(),i=0;i<e;i++)(0,n[i])(s)},L.Xj=function(t,e){return wf(this,!1,null,e||null).Xj(t.x,t.y,t.width,t.height)},$.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Zi?dm(this,t):t.assign(this.documentBounds)},$.prototype.gs=function(t){this.wp.assign(t),this.computeAutoScrollPosition(this.wp).Xa(this.position)?this.ug():Mm(this)},$.prototype.ug=function(){-1!==this.uk&&(St.clearTimeout(this.uk),this.uk=-1)},$.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.xp;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,s=this.scale;n=q.allocAt(0,0,n.width*s,n.height*s);var o=z.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);o.x-=l|=0,t.x<n.x+i.left/2&&(o.x-=l),t.x<n.x+i.left/4&&(o.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),o.x+=l|=0,t.x>n.x+n.width-i.right/2&&(o.x+=l),t.x>n.x+n.width-i.right/4&&(o.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),o.y-=l|=0,t.y<n.y+i.top/2&&(o.y-=l),t.y<n.y+i.top/4&&(o.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),o.y+=l|=0,t.y>n.y+n.height-i.bottom/2&&(o.y+=l),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*l)),o.Xa(_n)||(e=new z(e.x+o.x/s,e.y+o.y/s)),q.free(n),z.free(o),e},(L=$.prototype).Cs=function(){return null},L.bv=function(){return null},L.bs=function(t,e){this.pj.add(t,e)},L.Gu=function(t){(this.Qw=t)||this.nodes.each(function(e){e instanceof At&&(e.$p=null)})},L.Xz=function(t){return Dn?(void 0===t&&(t={}),t.returnType="Image",this.Kx(t)):null},L.Kx=function(t){return void 0===t&&(t={}),Cm(this,this.Yz,t)},L.Yz=function(t,e,i){var n=Am(i,t,"canvas",null);if(null===n)return null;var s=null;if(null!==(i=n.Z.canvas))switch(s=t.returnType,s=void 0===s?"string":s.toLowerCase(),s){case Ha+"data":s=n.getImageData(0,0,i.width,i.height);break;case Ha:(n=(t.document||document).createElement("img")).src=i.toDataURL(t.type,t.details),s=n;break;case"blob":return"function"!=typeof e&&Q('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof i.toBlob?(i.toBlob(e,t.type,t.details),"toBlob"):(e(null),null);default:s=i.toDataURL(t.type,t.details)}return"function"==typeof e?(e(s),null):s},Tt.Object.defineProperties($.prototype,{renderer:{get:function(){return this.nl},set:function(t){this instanceof Cs||(""===t&&(t="default"),(t=t.toLowerCase())!==this.nl&&(this.nl=t,"default"===t||"canvas"===t?(null!==(t=this.pj.get("svg"))&&t.Oa.remove(),this.ta&&(this.ib=this.ta.context)):"svg"===t?(this.pj.contains("svg")?t=this.pj.get("svg"):(t=new fs(this,St.document),this.bs("svg",t)),null!==this.div&&this.div.appendChild(t.Oa),this.ib=t.context,this.ta&&(this.ta.context.setTransform(this.Nb,0,0,this.Nb,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya))):"debug"!==t||this.pj.contains("SVG")||(t=new fs(this,St.document),this.bs("SVG",t),t.Oa.style.backgroundColor="whitesmoke",null!==this.div&&this.div.after(t.Oa)),this.gk()))}},div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;null!==e?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.ta&&(this.removeEventListener(e=this.ta.Oa,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.ta.nx()),this.ol&&(this.ol.disconnect(),this.ol=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.ta=null,this.removeEventListener(St,"resize",this.Pv,!1),this.removeEventListener(St,"wheel",this.Zj,!0),za===this&&(za=null)):null===this.ui&&(this.hf=!1),this.Ka=null,null!==t&&((e=t.H)&&(e.div=null),ef(this,t),this.gk())}}},ax:{get:function(){return this.Sq}},pi:{get:function(){return this.hf}},draggedLink:{get:function(){return this.nt},set:function(t){this.nt!==t&&(this.nt=t,null!==t&&(this.Vt=t.fromPort,this.Wt=t.toPort))}},Nx:{get:function(){return this.Vt},set:function(t){this.Vt=t}},Ox:{get:function(){return this.Wt},set:function(t){this.Wt=t}},animationManager:{get:function(){return this.Yd}},undoManager:{get:function(){return this.dc.undoManager}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t,this.dc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.lt},set:function(t){this.lt=t}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&ie(t,"0 <= value <= 1",$,"opacity"),this.pb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.wu},set:function(t){var e=this.wu;e!==t&&(this.wu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Wa.iterator}},isModelReadOnly:{get:function(){var t=this.dc;return null!==t&&t.isReadOnly},set:function(t){var e=this.dc;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Jd},set:function(t){var e=this.Jd;e!==t&&(this.Jd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(this.Us=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(this.Ys=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.Ee=!0,this.N(),this.g("hasVerticalScrollbar",e,t),qn(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.mn},set:function(t){var e=this.mn;e!==t&&(this.mn=t,this.Ee=!0,this.N(),this.g("hasHorizontalScrollbar",e,t),qn(this,!1))}},allowHorizontalScroll:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e!==t&&(this.Xs=t,this.g("allowHorizontalScroll",e,t),qn(this,!1))}},allowVerticalScroll:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("allowVerticalScroll",e,t),qn(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.iu},set:function(t){var e=this.iu;e!==t&&(0>t&&ie(t,">= 0",$,"scrollHorizontalLineChange"),this.iu=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.mu},set:function(t){var e=this.mu;e!==t&&(0>t&&ie(t,">= 0",$,"scrollVerticalLineChange"),this.mu=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.cj},set:function(t){this.cj=t}},previousInput:{get:function(){return this.Qg},set:function(t){this.Qg=t}},firstInput:{get:function(){return this.bq},set:function(t){this.bq=t}},currentCursor:{get:function(){return this.it},set:function(t){if(""===t&&(t=this.Op),this.it!==t){var e=this.ta,i=this.Ka;if(null!==e&&null!==i){this.it=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Op},set:function(t){""===t&&(t="auto");var e=this.Op;e!==t&&(this.Op=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.zh},set:function(t){var e=this.zh;e!==t&&(this.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Qt},set:function(t){var e=this.Qt;e!==t&&(this.Qt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t,t.Xe(this))}},toolManager:{get:function(){return this.te},set:function(t){this.te!==t&&(this.te=t,t.diagram=this)}},defaultTool:{get:function(){return this.ob},set:function(t){var e=this.ob;e!==t&&(this.ob=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hb},set:function(t){var e=this.hb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.hb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Iw}},maxSelectionCount:{get:function(){return this.Nt},set:function(t){var e=this.Nt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Nt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.S("ChangingSelection",this.selection),e=this.selection.Fa();for(var i=0;i<t;i++)e[i].isSelected=!1;this.S("ChangedSelection",this.selection)}}else ie(t,">= 0",$,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(this.St=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.wt},set:function(t){var e=this.wt;e!==t&&(this.wt=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Kt},set:function(t){var e=this.Kt;e!==t&&(this.Kt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.ow}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.rn&&this.Ce!==t.historyIndex:this.rn},set:function(t){if(this.rn!==t){this.rn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Ce=e.historyIndex),t||ym(this)}}},model:{get:function(){return this.dc},set:function(t){var e=this.dc;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&Q("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Cc(!0);var i=lm(this,!0);this.hf=!1,this.fn=!0,this.Ce=-2,this.kg=!1;var n=this.wb;this.wb=!0,fo(this.animationManager,"Model"),e&&(null!==this.pf&&this.pf.each(function(o){return e.hk(o)}),e.hk(this.Oc)),this.dc=t,this.partManager=function D0(t){return null!==(t=Bu.get(t))?new t:new Ut}(this.dc.type);for(var s=0;s<i.length;s++)this.add(i[s]);t.Pe(this.Ib),this.partManager.addAllModeledParts(),t.hk(this.Ib),t.Pe(this.Oc),null!==this.pf&&this.pf.each(function(o){return t.Pe(o)}),this.wb=n,this.Ya(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},aa:{get:function(){return this.sw},set:function(t){this.sw=t}},As:{get:function(){return this.ty}},skipsModelSourceBindings:{get:function(){return this.Jw},set:function(t){this.Jw=t}},Ns:{get:function(){return this.ou},set:function(t){this.ou=t}},nodeTemplate:{get:function(){return this.Lg.I("")},set:function(t){var e=this.Lg.I("");e!==t&&(this.Lg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},nodeTemplateMap:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplate:{get:function(){return this.Yi.I("")},set:function(t){var e=this.Yi.I("");e!==t&&(this.Yi.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplateMap:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplate:{get:function(){return this.Kh.I("")},set:function(t){var e=this.Kh.I("");e!==t&&(this.Kh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplateMap:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},isMouseCaptured:{get:function(){return this.rw},set:function(t){var e=this.ta;null!==e&&((e=e.Oa)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.addEventListener(St,"pointermove",this.ck,!0),this.addEventListener(St,"pointerdown",this.ui,!0),this.addEventListener(St,"pointerup",this.ek,!0),this.addEventListener(St,"pointerout",this.dk,!0),this.addEventListener(St,"pointercancel",this.bk,!0),this.removeEventListener(e,"wheel",this.Zj,!1),this.addEventListener(St,"wheel",this.Zj,!0),this.addEventListener(St,"selectstart",this.preventDefault,!1)):(this.removeEventListener(St,"pointermove",this.ck,!0),this.removeEventListener(St,"pointerdown",this.ui,!0),this.removeEventListener(St,"pointerup",this.ek,!0),this.removeEventListener(St,"pointerout",this.dk,!0),this.removeEventListener(St,"pointercancel",this.bk,!0),this.addEventListener(e,"pointermove",this.ck,!1),this.addEventListener(e,"pointerdown",this.ui,!1),this.addEventListener(e,"pointerup",this.ek,!1),this.addEventListener(e,"pointerout",this.dk,!1),this.addEventListener(e,"pointercancel",this.bk,!1),this.removeEventListener(St,"wheel",this.Zj,!0),this.removeEventListener(St,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Zj,!1)),this.rw=t))}},position:{get:function(){return this.pa},set:function(t){var e=z.alloc().assign(this.pa);if(!e.D(t)){var i=this.viewportBounds.copy();this.pa.assign(t),_g(this.animationManager,e,this.pa),this.wb||null===this.ta&&!this.wo.w()?yo(this):(this.wb=!0,sf(this,this.Sp,this.Aa/(t=this.scale),this.ya/t,this.yk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(i,this.viewportBounds,this.Ca,!1)}z.free(e)}},initialPosition:{get:function(){return this.zt},set:function(t){this.zt.D(t)||(this.zt=t.J())}},initialScale:{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t)}},grid:{get:function(){return null===this.fe&&(this.fe=cm(this)),this.fe},set:function(t){var e=this.fe;if(e!==t){null===e&&(e=this.fe=cm(this)),t.type!==nt.Grid&&Q("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;null!==i&&i.remove(e),this.fe=t,t.name="GRID",null!==i&&i.add(t),mo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.Sw}},viewSize:{get:function(){return this.wo},set:function(t){var e=this.viewSize;e.D(t)||(this.wo=t=t.J(),this.ya=this.Aa=0,t.w()?(this.Aa=t.width,this.ya=t.height):null!==this.Ka&&(this.Aa=this.Ka.clientWidth||1,this.ya=this.Ka.clientHeight||1),yo(this),this.Ya(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.ut},set:function(t){var e=this.ut;e.D(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||Q("fixedBounds width/height must not be Infinity"),this.ut=t=t.J(),this.Ya(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.rj},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.rj;e.D(t)||(this.rj=t=t.J(),this.g("scrollMargin",e,t),this.gk())}},scrollMode:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,t===vr&&qn(this,!1),this.g("scrollMode",e,t),this.Ee=!0,this.N())}},scrollsPageOnFocus:{get:function(){return this.nu},set:function(t){var e=this.nu;e!==t&&(this.nu=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Zt},set:function(t){var e=this.Zt;e!==t&&(this.Zt=t,qn(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.fu},set:function(t){var e=this.fu;e!==t&&(this.fu=t,mm(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Sp}},isVirtualized:{get:function(){return this.It},set:function(t){var e=this.It;e!==t&&(this.It=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&mm(this,e,t)}},defaultScale:{get:function(){return this.Pp},set:function(t){this.Pp=t}},autoScale:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("autoScale",e,t),t!==pn&&qn(this,!1))}},initialAutoScale:{get:function(){return this.Fg},set:function(t){var e=this.Fg;e!==t&&(this.Fg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Bt},set:function(t){var e=this.Bt;e!==t&&(t.sb()||Q("initialViewportSpot must be a specific Spot: "+t),this.Bt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.yt},set:function(t){var e=this.yt;e!==t&&(t.sb()||Q("initialViewportSpot must be a specific Spot: "+t),this.yt=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0<t?(this.Ot=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):ie(t,"> 0",$,"minScale"))}},maxScale:{get:function(){return this.Mt},set:function(t){var e=this.Mt;e!==t&&(0<t?(this.Mt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):ie(t,"> 0",$,"maxScale"))}},zoomPoint:{get:function(){return this.zu},set:function(t){this.zu.D(t)||(this.zu=t=t.J())}},contentAlignment:{get:function(){return this.yk},set:function(t){var e=this.yk;e.D(t)||(this.yk=t=t.J(),this.g("contentAlignment",e,t),qn(this,!1))}},initialContentAlignment:{get:function(){return this.pq},set:function(t){var e=this.pq;e.D(t)||(this.pq=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.zb},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.Ya(),this.g("padding",e,t))}},partManager:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(null!==t.diagram&&Q("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Xe(null),this.Pc=t,t.Xe(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Sc},set:function(t){var e=this.Sc;e!==t&&(this.Sc=t,t.diagram=this,t.group=null,this.xh=!0,this.g("layout",e,t),this.ac())}},isTreePathToChildren:{get:function(){return this.Ht},set:function(t){var e=this.Ht;if(e!==t&&(this.Ht=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)xh(t.value)}},treeCollapsePolicy:{get:function(){return this.uu},set:function(t){var e=this.uu;e!==t&&(t!==Jr&&t!==Cf&&t!==Af&&Q("Unknown Diagram.treeCollapsePolicy: "+t),this.uu=t,this.g("treeCollapsePolicy",e,t))}},Ue:{get:function(){return this.qw},set:function(t){this.qw=t}},avoidanceCellSize:{get:function(){return this.bw},set:function(t){this.Xh=null,this.bw=new Mt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.cw},set:function(t){this.cw=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.xp},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.xp;e.D(t)||(this.xp=t=t.J(),this.Ya(),this.g("autoScrollRegion",e,t))}}}),Tt.Object.defineProperties($,{licenseKey:{get:function(){return Pf.kc()},set:function(t){Pf.add(t.replace(/\s/g,""))}},version:{get:function(){return B0}}}),$.prototype.makeImageData=$.prototype.Kx,$.prototype.makeImage=$.prototype.Xz,$.prototype.cacheGroupExternalLinks=$.prototype.Gu,$.prototype.addRenderer=$.prototype.bs,$.prototype.makeSVG=$.prototype.bv,$.prototype.makeSvg=$.prototype.Cs,$.prototype.stopAutoScroll=$.prototype.ug,$.prototype.doAutoScroll=$.prototype.gs,$.prototype.isUnoccupied=$.prototype.Xj,$.prototype.raiseDiagramEvent=$.prototype.S,$.prototype.removeDiagramListener=$.prototype.am,$.prototype.addDiagramListener=$.prototype.Bj,$.prototype.findTreeRoots=$.prototype.zz,$.prototype.layoutDiagram=$.prototype.Vz,$.prototype.findTopLevelGroups=$.prototype.rz,$.prototype.findTopLevelNodesAndLinks=$.prototype.sz,$.prototype.ensureBounds=$.prototype.Va,$.prototype.findLinksByExample=$.prototype.ls,$.prototype.findNodesByExample=$.prototype.ms,$.prototype.findLinkForData=$.prototype.Kc,$.prototype.findNodeForData=$.prototype.ii,$.prototype.findPartForData=$.prototype.Lc,$.prototype.findLinkForKey=$.prototype.findLinkForKey,$.prototype.findNodeForKey=$.prototype.Wb,$.prototype.findPartForKey=$.prototype.findPartForKey,$.prototype.rebuildParts=$.prototype.Wd,$.prototype.transformViewToDoc=$.prototype.Ps,$.prototype.transformRectDocToView=$.prototype.AA,$.prototype.transformDocToView=$.prototype.op,$.prototype.centerRect=$.prototype.es,$.prototype.scrollToRect=$.prototype.uv,$.prototype.scroll=$.prototype.scroll,$.prototype.highlightCollection=$.prototype.Kz,$.prototype.highlight=$.prototype.Jz,$.prototype.selectCollection=$.prototype.sA,$.prototype.select=$.prototype.select,$.prototype.updateAllRelationshipsFromData=$.prototype.rp,$.prototype.updateAllTargetBindings=$.prototype.updateAllTargetBindings,$.prototype.commit=$.prototype.commit,$.prototype.rollbackTransaction=$.prototype.Kf,$.prototype.commitTransaction=$.prototype.eb,$.prototype.startTransaction=$.prototype.Ea,$.prototype.raiseChanged=$.prototype.g,$.prototype.raiseChangedEvent=$.prototype.cb,$.prototype.removeChangedListener=$.prototype.hk,$.prototype.addChangedListener=$.prototype.Pe,$.prototype.removeModelChangedListener=$.prototype.nA,$.prototype.addModelChangedListener=$.prototype.Zw,$.prototype.findLayer=$.prototype.Pj,$.prototype.removeLayer=$.prototype.lA,$.prototype.addLayerAfter=$.prototype.Dy,$.prototype.addLayerBefore=$.prototype.Xw,$.prototype.addLayer=$.prototype.Al,$.prototype.moveParts=$.prototype.moveParts,$.prototype.copyParts=$.prototype.Jj,$.prototype.removeParts=$.prototype.Is,$.prototype.remove=$.prototype.remove,$.prototype.add=$.prototype.add,$.prototype.clearDelayedGeometries=$.prototype.ex,$.prototype.setProperties=$.prototype.nm,$.prototype.attach=$.prototype.Eu,$.prototype.set=$.prototype.set,$.prototype.resetInputOptions=$.prototype.Tx,$.prototype.setInputOption=$.prototype.tA,$.prototype.getInputOption=$.prototype.Ql,$.prototype.resetRenderingHints=$.prototype.Ux,$.prototype.setRenderingHint=$.prototype.Yx,$.prototype.getRenderingHint=$.prototype.Gf,$.prototype.maybeUpdate=$.prototype.bd,$.prototype.requestUpdate=$.prototype.ac,$.prototype.delayInitialization=$.prototype.Yy,$.prototype.isUpdateRequested=$.prototype.Qz,$.prototype.invalidateDocumentBounds=$.prototype.Ya,$.prototype.findObjectsNear=$.prototype.og,$.prototype.findPartsNear=$.prototype.nz,$.prototype.findObjectsIn=$.prototype.Cf,$.prototype.findPartsIn=$.prototype.vx,$.prototype.findObjectsAt=$.prototype.ji,$.prototype.findPartsAt=$.prototype.mz,$.prototype.findObjectAt=$.prototype.jc,$.prototype.findPartAt=$.prototype.Ol,$.prototype.focusObject=$.prototype.Az,$.prototype.alignDocument=$.prototype.Ky,$.prototype.zoomToRect=$.prototype.CA,$.prototype.zoomToFit=$.prototype.zoomToFit,$.prototype.diagramScroll=$.prototype.lx,$.prototype.focus=$.prototype.focus;var Bu=new kt,Pm=null,Dn=void 0!==St.document,Ya=null,eh="",pn=new ut($,"None",0),Xa=new ut($,"Uniform",1),Ru=new ut($,"UniformToFill",2),kf=new ut($,"CycleAll",10),Lm=new ut($,"CycleNotDirected",11),Tm=new ut($,"CycleNotDirectedFast",12),Nm=new ut($,"CycleNotUndirected",13),Fm=new ut($,"CycleDestinationTree",14),Im=new ut($,"CycleSourceTree",15),vr=new ut($,"DocumentScroll",1),Mf=new ut($,"InfiniteScroll",2),Jr=new ut($,"TreeParentCollapsed",21),Cf=new ut($,"AllParentsCollapsed",22),Af=new ut($,"AnyParentsCollapsed",23),Pf=new dt,B0="2.3.13",Ha="image",Om=null,Em=!1;function jm(){this.xy=null,this.j="zz@orderNum",this.Rc="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function Va(t,e){if(e.ib.setTransform(e.Nb,0,0,e.Nb,0,0),e.ib.yc(),null===t.Rc)t:{e="f";var i=St[Jt("76a715b2f73f148a")][Jt("72ba13b5")]||"";if(t.Rc=!0,Dn){var n=$[Jt("76a115b6ed251eaf4692")];if(n)for(var s=Pf.iterator;s.next()&&!(6>(n=Jt(n=s.value).split(Jt("39e9"))).length);){var o=Jt(n[1]).split(".");if("7da71ca0"!==n[4])break;var l=Jt(dr[Jt("6cae19")]).split(".");if(o[0]>l[0]||o[0]===l[0]&&o[1]>=l[1]){var u=St[Jt("74a900bae4370f8b51")][Jt("6fbb13a1c2311e8a57")].toLowerCase();if(l=u[Jt("73a612b6fb191d")](Jt("3aad1ab6e022098b4dc4")),o=Jt(n[2]),-1<l&&(u=u[Jt("73a612b6fb191d")](o.toLowerCase()+"/"),t.Rc=!(-1<u&&u<l),!t.Rc))break;for(l=i[Jt("76ad18b4f73e")],u=i[Jt("73a612b6fb191d")](Jt("35e7"))+2;u<l;u++)e+=i[u];if(0>(l=e[Jt("73a612b6fb191d")](o))&&o!==Jt("7da71ca0ad381e90")&&(l=e[Jt("73a612b6fb191d")](Jt("76a715b2ef3e149757"))),0>l&&(l=e[Jt("73a612b6fb191d")](Jt("76a715b2ef3e149757"))),0>l&&(l=e[Jt("73a612b6fb191d")](Jt("2bfa41fdb3784bca12"))),0>l&&(l=i[Jt("73a612b6fb191d")](Jt("7baa19a6f76c1988428554"))),t.Rc=!(0<=l&&l<e[Jt("73a612b6fb191d")](Jt("35"))||-1===e[Jt("73a612b6fb191d")](Jt("35"))),!t.Rc||i[Jt("73a612b6fb191d")](Jt("7fb002b6ed25128b4da25b2e"))&&(t.Rc=!(-1<i[Jt("73a612b6fb191d")](o)),!t.Rc)||-1<(u=(l=St[Jt("76a715b2f73f148a")][Jt("69ad17a1e03e")])[Jt("73a612b6fb191d")](Jt("7fb002b6ed25128b4da25b2e")))&&(t.Rc=!(l[Jt("73a612b6fb191d")](o)>u),!t.Rc))break;if("#"===o[0]){l=St.document.createElement("div");for(var c=n[0].replace(/[A-Za-z]/g,"");4>c.length;)c+="9";if(u=c,c=c.substr(c.length-4),n="",n+=["gsh","gsf"][parseInt(c.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(c.substr(0,1),10)%4],l[Jt("79a417a0f0181a8946")]=n,St.document[Jt("78a712aa")]){St.document[Jt("78a712aa")][Jt("7bb806b6ed32388c4a875b")](l),c=St.getComputedStyle(l).getPropertyValue(Jt("78a704b7e62456904c9b12701b6532a8"));var p=St.getComputedStyle(l).getPropertyValue(Jt("75b817b0ea2202"));if(St.document[Jt("78a712aa")][Jt("68ad1bbcf533388c4a875b")](l),c){if(l=St[Jt("77a902b0eb1b1e804a8a")],p==="0."+parseInt(u,10)%100||-1!==c.indexOf(parseInt(o[1]+o[2],16))&&-1!==c.indexOf(parseInt(o[3]+o[4],16))){t.Rc=!1;break}if(l&&l(Jt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,o=0;o<document.styleSheets.length;o++)for(var m in l=document.styleSheets[o].rules||document.styleSheets[o].cssRules)if(n===l[m].selectorText){t.Rc=!1;break t}}}else t.Rc=null,t.Rc=!1}}}else{for(m=i[Jt("76ad18b4f73e")],s=i[Jt("73a612b6fb191d")](Jt("35e7"))+2;s<m;s++)e+=i[s];i=e[Jt("73a612b6fb191d")](Jt("7da71ca0ad381e90")),t.Rc=!(0<=i&&i<e[Jt("73a612b6fb191d")](Jt("35")))}}}return 0<t.Rc&&t!==t.xy}function Go(t){this.j=void 0===t?new z:t,this.o=new z}$.className="Diagram",$.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=St.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof $?e.H:null},$.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},$.useDOM=function(t){Dn=!!t&&void 0!==St.document},$.isUsingDOM=function(){return Dn},$.None=pn,$.Uniform=Xa,$.UniformToFill=Ru,$.CycleAll=kf,$.CycleNotDirected=Lm,$.CycleNotDirectedFast=Tm,$.CycleNotUndirected=Nm,$.CycleDestinationTree=Fm,$.CycleSourceTree=Im,$.DocumentScroll=vr,$.InfiniteScroll=Mf,$.TreeParentCollapsed=Jr,$.AllParentsCollapsed=Cf,$.AnyParentsCollapsed=Af,jm.className="DiagramHelper",Tt.Object.defineProperties(Go.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var Ce,Se,ds,ri,di,zn,nh,sh,oh,rh,Dm="DraggingInfo";function zm(t,e,i){this.node=t,this.info=e,this.Tu=i}function Ga(){this.reset()}function Yu(t,e){if("string"==typeof t||St.Element&&t instanceof Element)var i=$.call(this,t)||this;else i=$.call(this)||this,e=t;return Bm(i),e&&i.nm(e),i}function Bm(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=x,t.layout=new $e}function Cs(t,e){if("string"==typeof t||St.Element&&t instanceof Element)var i=$.call(this,t)||this;else i=$.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.wb=!0,i.V=null,i.mn=!1,i.nn=!1,i.F=!0,i.u=!0,i.ia=0,i.o=!1,i.ql=null,i.Yx("drawShadows",!1),t=new vt;var s=new Pt;return s.stroke="magenta",s.strokeWidth=2,s.fill="transparent",s.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(s),i.j=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new Gt(0,0,0,0),i.pa.h(0,0),i.toolManager.gb("Dragging",new $r,i.toolManager.mouseMoveTools),i.click=function(){var o=n.observed;if(null!==o){var l=o.viewportBounds,u=n.lastInput.documentPoint;o.position=new z(u.x-l.width/2,u.y-l.height/2)}},i.Pf=function(){n.Ya(),ih(n)},i.Xd=function(){null!==n.observed&&(n.Ya(),n.N())},i.Ha=function(){1>n.updateDelay?n.N():n.o||(n.o=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.Of=function(){null!==n.observed&&ih(n)},i.autoScale=Xa,i.wb=!1,e&&Object.assign(i,e),i}function Rm(t){var e=t.observed;if(null!==e){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,s=e.grid;n&&null!==s&&s.visible&&!isNaN(s.width)&&!isNaN(s.height)&&(mo(e,s=q.alloc().assign(t.viewportBounds).ed(e.viewportBounds)),q.free(s),Si(e));var o=t.Bb;o.reset(),1!==t.scale&&o.scale(t.scale),0===t.position.x&&0===t.position.y||o.translate(-t.position.x,-t.position.y),(s=t.ib).scale(t.Nb,t.Nb),s.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),s.yc(),o=(e=e.Wa.s).length;for(var l=0;l<o;l++){var u=e[l],c=t;if(u.visible&&0!==u.opacity){var p=u.diagram.grid.part;if(!i&&u.isTemporary)n&&p.layer===u&&(u=Jl(u,s),p.hc(s,c),s.globalAlpha=u);else{for(var m=Jl(u,s),v=c.scale,w=q.alloc(),k=u.Pa.s,A=k.length,T=0;T<A;T++){var j=k[T];(n||j!==p)&&u.Nj(s,j,c,null,v,w,!1)}q.free(w),s.globalAlpha=m}}}}}function ih(t){var e=t.box;if(null!==e){var i=t.observed;if(null!==i){t.Fc=!0,i=i.viewportBounds;var n=e.selectionObject,s=Mt.alloc();s.h(i.width,i.height),n.desiredSize=s,Mt.free(s),t=2/t.scale,n instanceof Pt&&(n.strokeWidth=t),e.location=new z(i.x-t/2,i.y-t/2),e.isSelected=!0}}}function $r(){ye.call(this),this.j=null}function $t(){Ye(this),this.H=za,this.Ha=this.u=this.o=!0,this.F=this.V=this.nb=this.ia=!1,this.ij=this.j=null,this.Ib=1.05,this.Jt=NaN,this.tw=null,this.Au=NaN,this.yu=Vr,this.hb=!0,this.cg=null,this.ob=200}function Qr(t,e,i){if(e.isVisible())return i;if(e instanceof Bt)Qr(t,e.adornedPart,i);else if(e instanceof st){var n=e.fromNode;null!==n&&Qr(t,n,i),null!==(e=e.toNode)&&Qr(t,e,i)}else e instanceof ct&&(null!==(n=e.labeledLink)&&Qr(t,n,i),null!==(n=e.pg())&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),Qr(t,n,i))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),Qr(t,e,i));return i}function Lf(t){var e=Xt();for(t=t.iterator;t.next();){var i=t.value;i instanceof st||e.push(i)}t=new ht,i=e.length;for(var n=0;n<i;n++){for(var s=e[n],o=!0,l=0;l<i;l++)if(s.Td(e[l])){o=!1;break}o&&t.add(s)}return Zt(e),t}function yt(){Ye(this),this.l=30723,this.pb=1,this.bn="",this.Ma=this.Me=null,this.pa=new z(NaN,NaN).freeze(),this.jd=Ca,this.Bb=new Ot,this.wh=new Ot,this.Mb=null,this.Ca=this.Jk=1,this.Lb=0,this.Kg=a,this.uc=new q(NaN,NaN,NaN,NaN).freeze(),this.Jb=new q(NaN,NaN,NaN,NaN).freeze(),this.ec=new q(0,0,NaN,NaN).freeze(),this.ba=this.Yn=this.Zn=null,this.rk=this.Kb=Nt,this.Ag=this.io=0,this.V=this.tb=this.Dh=this.A=this.Ua=null,this.Uc=!1,this.jo=this.Ng=null}function Be(t){null===t.A?t.A=new ta:t.A.oc&&(t.A=t.A.copy())}function xr(t,e,i){var n=t.ih();if(null!==n)for(var s=t.localBindings.iterator;s.next();){var o=s.value,l=null;if(null!==o.sourceName){if(null===(l=Mv(o,n,t)))continue;o.sp(t,l,i,null)}else if(o.isToModel){var u=e.diagram;null===u||u.skipsModelSourceBindings||o.sp(t,u.model.modelData,i,n)}else{if(null===(u=n.data))continue;var c=e.diagram;null===c||c.skipsModelSourceBindings||o.sp(t,u,i,n)}l===t&&null!==(u=n.ks(o.Ai))&&o.Nv(u,l,i)}}function Ym(t,e,i,n){return!1!==t.pickable&&(n.multiply(t.transform),i?t.Yc(e,n):t.fh(e,n))}function Tf(t,e,i,n,s){if(t.Jb.h(e,i,n,s),!t.desiredSize.w()){var o=t.uc,l=(i=t.Kg).top+i.bottom;switch(i=o.width+(e=i.right+i.left),o=o.height+l,n+=e,s+=l,e=ts(t,!0),i===n&&o===s&&(e=Se),e){case Se:(i>n||o>s)&&(gn(t,!0),t.measure(i>n?n:i,o>s?s:o,0,0));break;case Ce:gn(t,!0),t.measure(n,s,0,0);break;case ri:gn(t,!0),t.measure(n,o,0,0);break;case di:gn(t,!0),t.measure(i,s,0,0)}}}function Xu(t,e){return null!==e&&(bo(e)&&(e=e.panel),0!=(512&e.l)||(e.type===nt.Auto||e.type===nt.Spot)&&e.Qb()!==t)}function Nf(t,e,i,n){sn(t,e,t.areaBackground,!0,!0,i,n),t.areaBackground instanceof Wt&&t.areaBackground.type===yn?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.ng(t.areaBackground)):e.fillRect(n.x,n.y,n.width,n.height)}function Hu(t,e,i,n){var s=t.kq(),o=i.x,l=i.y,u=i.width+s,c=i.height+s;sn(t,e,t.Ma,!0,!1,i,n),t.Ma instanceof Wt&&t.Ma.type===yn?(e.beginPath(),e.rect(o-s/2,l-s/2,u,c),e.ng(t.Ma)):e.fillRect(o-s/2,l-s/2,u,c)}function Xm(t,e,i){for(var n=e.O.s,s=n.length,o=-1,l=0;l<s;l++)if(n[l]===t){o=l;break}if(-1!==(t=o))if(0===t)e.svg.gd?e.svg.gd.after(i):e.svg.Ma?e.svg.Ma.after(i):e.type===nt.Table?null!==(e=0!==(e=e.svg.getElementsByClassName("gojs-ts")).length?e[0]:null)&&e.after(i):e.svg.prepend(i);else{for(;0!==t&&!e.M(t-1).Ed();)t--;0===t?e.svg.prepend(i):null!==(t=e.M(t-1).svg)?t.after(i):e.svg.appendChild(i)}}function Hm(t,e){e=e.dataset,t instanceof yt&&(null!==t.portId&&(e.portId=t.portId),t instanceof nt&&(isNaN(t.itemIndex)||(e.itemIndex=t.itemIndex.toString()),t instanceof vt&&(e.className=ws(t),void 0!==t.key&&(e.key=t.key.toString()),t instanceof st&&(null!==t.fromNode&&void 0!==t.fromNode.key&&(e.fromKey=t.fromNode.key.toString()),""!==t.fromPortId&&(e.fromPortId=t.fromPortId),null!==t.toNode&&void 0!==t.toNode.key&&(e.toKey=t.toNode.key.toString()),""!==t.toPortId&&(e.toPortId=t.toPortId)))))}function Vm(t,e){null!==(e=e.getAttribute("clip-path"))&&null!==(t=t.svg.getElementById(e.split("#")[1].slice(0,-1)))&&t.remove()}function Ff(t){if(null!==t.svg){var e=t.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),i=t.svg.ownerDocument;if(null!==e)for(var n=(e=be(e)).next();!n.done;n=e.next())null!==(n=i.getElementById(n.value.split("#")[1].slice(0,-1)))&&n.remove();t.svg.remove()}}function sn(t,e,i,n,s,o,l){if(null!==i){var u=1,c=1;if("string"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===wo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var p=t.kq();if(u=o.width,c=o.height,s?(u=l.width,c=l.height):n||(u+=p,c+=p),(o=e instanceof kr)&&i.xe&&(i.type===qa||i.xk===u&&i.ft===c))var m=i.xe;else{var v=0,w=0,k=0,A=0,T=0,j=0;if(j=T=0,s?(T=l.x,j=l.y):n||(T-=p/2,j-=p/2),v=i.start.x*u+i.start.offsetX,w=i.start.y*c+i.start.offsetY,k=i.end.x*u+i.end.offsetX,A=i.end.y*c+i.end.offsetY,v+=T,k+=T,w+=j,A+=j,i.type===Zs)m=e.createLinearGradient(v,w,k,A);else if(i.type===yn)j=isNaN(i.endRadius)?Math.max(u,c)/2:i.endRadius,isNaN(i.startRadius)?(T=0,j=Math.max(u,c)/2):T=i.startRadius,m=e.createRadialGradient(v,w,T,k,A,j);else if(i.type===qa)try{m=e.createPattern(i.pattern,"repeat")}catch{m=null}if(i.type!==qa&&null!==(s=i.colorStops))for(s=s.iterator;s.next();)m.addColorStop(s.key,s.value);if(o&&(i.xe=m,null!==m&&(i.xk=u,i.ft=c),null===m&&i.type===qa&&-1!==i.xk)){i.xk=-1;var I=t.diagram;null!==I&&-1===i.xk&&On(function(){I.redraw()},600)}}n?e.fillStyle=m:e.strokeStyle=m}}}function Vu(t){if(2048&t.l){var e=t.Bb;if(e.reset(),!t.Jb.w()||!t.uc.w())return void Ua(t,!1);if(e.translate(t.Jb.x-t.uc.x,t.Jb.y-t.uc.y),1!==t.scale||0!==t.angle){var i=t.naturalBounds;t.no(e,i.x,i.y,i.width,i.height)}Ua(t,!1),Wo(t,!0)}4096&t.l&&(null===(e=t.panel)?(t.wh.set(t.Bb),t.Jk=t.scale,Wo(t,!1)):null!==e.oe&&((i=t.wh).reset(),e.se()?i.multiply(e.wh):null!==e.panel&&i.multiply(e.panel.wh),i.multiply(t.Bb),t.Jk=t.scale*e.Jk,Wo(t,!1)))}function Wa(t){if(!Bn(t)){var e=t.panel;null!==e?e.v():t.Dd()&&null!==(e=t.diagram)&&(e.De.add(t),t instanceof ct&&t.Bd(),e.ac()),wr(t,!0)}}function ts(t,e){var i=t.stretch,n=t.panel;return null!==n&&n.type===nt.Table?ah(t,n.Gb(t.row),n.Fb(t.column),e):null!==n&&n.type===nt.Auto&&n.Qb()===t?Us(t,Ce,e):i===zn?null!==n?n.type===nt.Spot&&n.Qb()===t?Us(t,Ce,e):Us(t,(i=n.defaultStretch)===zn?Se:i,e):Us(t,Se,e):Us(t,i,e)}function ah(t,e,i,n){var s=t.stretch;if(s!==zn)return Us(t,s,n);var o=s=null;switch(e.stretch){case di:case Ce:o=!0}switch(i.stretch){case ri:case Ce:s=!0}return e=t.panel.defaultStretch,null===s&&(s=e===ri||e===Ce),null===o&&(o=e===di||e===Ce),Us(t,!0===s&&!0===o?Ce:!0===s?ri:!0===o?di:Se,n)}function Us(t,e,i){if(i)return e;if(e===Se||(i=t.desiredSize).w())return Se;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===ri)return Se;if(e===Ce)return di}else{if(e===di)return Se;if(e===Ce)return ri}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===di)return Se;if(e===Ce)return ri}else{if(e===ri)return Se;if(e===Ce)return di}return e}function Gu(t,e){t.l=e?512|t.l:-513&t.l}function qr(t){return 0!=(1024&t.l)}function If(t,e){t.l=e?1024|t.l:-1025&t.l}function Ua(t,e){t.l=e?2048|t.l:-2049&t.l}function Wo(t,e){t.l=e?4096|t.l:-4097&t.l}function vo(t){return 0!=(8192&t.l)}function gn(t,e){t.l=e?8192|t.l:-8193&t.l}function Bn(t){return 0!=(16384&t.l)}function wr(t,e){t.l=e?16384|t.l:-16385&t.l}function br(t){var e=t.part;if(e instanceof ct&&(null!==t.portId||t===e.port)){var i=e.diagram;null===i||i.undoManager.isUndoingRedoing||Yy(e,t)}}function Gm(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof nt?t instanceof ct?t.Bd():t.qm(t,function(i){br(i)}):br(t))}function mn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,s=null;if("function"==typeof t)s=t;else if("string"==typeof t){var o=Ka.I(t);"function"==typeof o?le(n=o(i=Ro(arguments)))||Q('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):s=St.go[t]}if(null===n&&(null!=s&&s.constructor||Q("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new s),s=1,n instanceof $&&1<i.length){o=n;var l=i[1];("string"==typeof l||l instanceof HTMLDivElement)&&(ef(o,l),s++)}for(;s<i.length;s++)void 0===(o=i[s])?Q("Undefined value at argument "+s+" for object being constructed by GraphObject.make: "+n):Of(n,o);return n}function Of(t,e){if("string"==typeof e)if(t instanceof qt)t.text=e;else if(t instanceof Pt)t.figure=e;else if(t instanceof Ei)t.source=e;else if(t instanceof nt)null!==(e=Rn.I(e))&&(t.type=e);else if(t instanceof Wt){var i=Kn(Wt,e);null!==i?t.type=i:Q("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof rt?null!==(e=Kn(rt,e))&&(t.type=e):t instanceof Ht&&null!==(e=Kn(Ht,e))&&(t.type=e);else if(e instanceof yt)t instanceof nt||Q("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Fe){var n;e.isRow&&"function"==typeof t.getRowDefinition?n=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(n=t.getColumnDefinition(e.index)),n instanceof Fe?hc(n,e):Q("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof ut)"function"==typeof t.qb&&t.qb(e);else if(e instanceof je)t.type=e;else if(e instanceof Ae)t instanceof yt||t instanceof Fe?t.bind(e):Q("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Ms)t instanceof yt?t.Kv(e):Q("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Je)t instanceof rt&&t.type===rt.o?t.figures.add(e):Q("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof Ht)t instanceof Je?t.segments.add(e):Q("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof ae)t instanceof $||t instanceof At?t.layout=e:Q("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Of(t,e[i]);else if("object"==typeof e&&null!==e)if(t instanceof Wt){for(var s in i=new Wi,e)n=parseFloat(s),isNaN(n)?i[s]=e[s]:t.addColorStop(n,e[s]);ql(t,i)}else if(t instanceof Fe){for(i in void 0!==e.row?((null==(s=e.row)||s===1/0||isNaN(s)||0>s)&&Q("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+s),t.isRow=!0,t.index=s):void 0!==e.column&&((null==(s=e.column)||s===1/0||isNaN(s)||0>s)&&Q("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+s),t.isRow=!1,t.index=s),s=new Wi,e)"row"!==i&&"column"!==i&&(s[i]=e[i]);ql(t,s)}else ql(t,e);else Q('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function xo(t,e){Ka.add(t,e)}function Wu(t,e,i){void 0===i&&(i=null);var n=t[1];if("function"==typeof i?i(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Go.className="DraggingInfo",zm.className="DraggingNodeInfoPair",Ga.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Mt(NaN,NaN).freeze(),this.gridSnapCellSpot=y,this.gridSnapOrigin=new z(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Ga.className="DraggingOptions",Vt(Yu,$),Yu.prototype.reset=function(){$.prototype.reset.call(this),Bm(this)},Yu.className="Palette",Vt(Cs,$),Cs.prototype.computePixelRatio=function(){return 1},Cs.prototype.redraw=function(){if(this.o&&1<=this.updateDelay){this.o=!1;var t=this.ta,e=this.ib;if(null!==t&&null!==e){if(Ra(this),null===this.ql){var i=new Cn(null);i.width=t.width,i.height=t.height,this.ql=i}try{this.ta=this.ql,this.ib=this.ta.context,this.ib.Vc(!0),this.ib.setTransform(1,0,0,1,0,0),this.ib.clearRect(0,0,this.ta.width,this.ta.height),Rm(this)}finally{this.ta=t,this.ib=e}}}$.prototype.redraw.call(this)},Cs.prototype.hc=function(){if(null===this.Ka&&Q("No div specified"),null===this.ta&&Q("No canvas specified"),!(this.ta instanceof fs)&&(dp(this.box),this.Fc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.pi){Ra(this);var e=this.ta;(t=this.ib).Vc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Rm(this):null!==this.ql&&(t.drawImage(this.ql.Oa,0,0),(e=this.Bb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Nb,this.Nb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.yc());for(var i=(e=this.Wa.s).length,n=0;n<i;n++)e[n].hc(t,this);this.Fc=this.vd=!1}}},Cs.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Vr;var e=t.documentBounds.copy();return e.ed(t.viewportBounds),e},Cs.prototype.invalidateViewport=function(){!0!==this.Fc&&(this.Fc=!0,this.ac())},Cs.prototype.onViewportBoundsChanged=function(t,e,i,n){this.wb||(this.vd=!0,this.N(),this.Ee=!0,this.Ya(),ih(this),this.gc.scale=i,this.gc.position.x=t.x,this.gc.position.y=t.y,this.gc.bounds.assign(t),this.gc.Pz=n,this.S("ViewportBoundsChanged",this.gc,t))},Tt.Object.defineProperties(Cs.prototype,{observed:{get:function(){return this.V},set:function(t){var e=this.V;if(t instanceof Cs&&Q("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.am("ViewportBoundsChanged",this.Pf),e.am("DocumentBoundsChanged",this.Xd),e.am("InvalidateDraw",this.Ha),e.am("AnimationFinished",this.Of)),this.V=t,null!==t&&(t.Bj("ViewportBoundsChanged",this.Pf),t.Bj("DocumentBoundsChanged",this.Xd),t.Bj("InvalidateDraw",this.Ha),t.Bj("AnimationFinished",this.Of),this.add(this.box)),this.Ya(),null===t){this.ql=null;var i=this.ta,n=this.ib;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Ha(null),ih(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),ih(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ia},set:function(t){0>t&&(t=0),this.ia!==t&&(this.ia=t)}}}),Cs.className="Overview",Vt($r,ye),$r.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var i=t.lastInput;return!(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new z((i=e.viewportBounds).width/2,i.height/2),e.position=new z((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},$r.prototype.doActivate=function(){this.j=null,ye.prototype.doActivate.call(this)},$r.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},$r.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var i=t.box;if(null!==i){if(null===this.j){var n=t.firstInput.documentPoint;this.j=new z(n.x-(i=i.location).x,n.y-i.y)}e.position=new z((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},$r.className="OverviewDraggingTool",$t.prototype.toString=function(){return"CommandHandler"},$t.prototype.Xe=function(t){this.H=t},$t.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=wi?e.meta:e.control,n=e.shift,s=e.alt,o=e.key;!i||"C"!==o&&"Insert"!==o?i&&"X"===o||n&&"Del"===o?this.canCutSelection()&&this.cutSelection():i&&"V"===o||n&&"Insert"===o?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===o||s&&n&&"Backspace"===o?this.canRedo()&&this.redo():i&&"Z"===o||s&&"Backspace"===o?this.canUndo()&&this.undo():"Del"===o||"Backspace"===o?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===o?this.canSelectAll()&&this.selectAll():"Esc"===o?this.canStopCommand()&&this.stopCommand():"Up"===o?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","up"):"Down"===o?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","down"):"Left"===o?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","left"):"Right"===o?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","right"):"PageUp"===o?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===o?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===o?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===o?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===o?this.canScrollToPart()&&this.scrollToPart():"Subtract"===o?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===o?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===o?this.canResetZoom()&&this.resetZoom():n&&"Z"===o?this.canZoomToFit()&&this.zoomToFit():i&&!n&&"G"===o?this.canGroupSelection()&&this.groupSelection():i&&n&&"G"===o?this.canUngroupSelection()&&this.ungroupSelection():"F2"===o||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===o||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},$t.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},$t.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof me&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},$t.prototype.canStopCommand=function(){return!0},$t.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},$t.prototype.canSelectAll=function(){return this.diagram.allowSelect},$t.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new ht,i=t.selection.iterator;i.next();)Zo(e,i.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(n){return n.canDelete()});t.Is(e,!0),t.S("SelectionDeleted",e)}finally{t.eb("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},$t.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},$t.prototype.copySelection=function(){var t=this.diagram,e=new ht;for(t=t.selection.iterator;t.next();)Zo(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},$t.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},$t.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},$t.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},$t.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(null===t)Ya=null,eh="";else{i=e.model;var n=!1,s=!1,o=null;try{i.Tl()&&(n=i.Ij,i.Ij=this.copiesParentKey),i.Vj()&&(s=i.Hj,i.Hj=this.copiesGroupKey),o=e.Jj(t,null,!0)}finally{i.Tl()&&(i.Ij=n),i.Vj()&&(i.Hj=s),(i=new dt).addAll(o),Ya=i,eh=e.model.dataFormat}}e.S("ClipboardChanged",i)},$t.prototype.pasteFromClipboard=function(){var t=new ht,e=Ya;if(null===e)return t;var i=this.diagram;if(eh!==i.model.dataFormat)return t;var n=i.model,s=!1,o=!1,l=null;try{n.Tl()&&(s=n.Ij,n.Ij=this.copiesParentKey),n.Vj()&&(o=n.Hj,n.Hj=this.copiesGroupKey),l=i.Jj(e,i,!1)}finally{for(n.Tl()&&(n.Ij=s),n.Vj()&&(n.Hj=o),e=l.iterator;e.next();)n=e.key,(i=e.value).location.w()||(n.location.w()?i.location=n.location:!i.position.w()&&n.position.w()&&(i.position=n.position)),t.add(i)}return t},$t.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(null!==t){var s=e.computePartsBounds(e.selection);s.w()&&cf(e,this.computeEffectiveCollection(e.selection,e.Wm),new z(t.x-s.centerX,t.y-s.centerY),e.Wm,!1)}e.S("ClipboardPasted",i)}finally{e.eb("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},$t.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Ya||0===Ya.count||eh!==t.model.dataFormat)},$t.prototype.undo=function(){this.diagram.undoManager.undo()},$t.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},$t.prototype.redo=function(){this.diagram.undoManager.redo()},$t.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},$t.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===pn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},$t.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===pn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===pn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},$t.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===pn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},$t.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Cc(),t.redraw();var i=t.position,n=t.scale;fo(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Au&&!isNaN(this.Jt)&&t.documentBounds.D(this.yu)?(t.scale=this.Jt,t.position=this.tw,this.Au=NaN,this.yu=Vr):(this.Jt=n,this.tw=i.copy(),t.zoomToFit(),this.Au=t.scale,this.yu=t.documentBounds.copy()),$d(e)},$t.prototype.canZoomToFit=function(){return this.diagram.allowZoom},$t.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Va(),null===t){try{null!==this.cg&&(this.cg.next()?t=this.cg.value:this.cg=null)}catch{this.cg=null}null===t&&(0<e.highlighteds.count?this.cg=e.highlighteds.iterator:0<e.selection.count&&(this.cg=e.selection.iterator),null!==this.cg&&this.cg.next()&&(t=this.cg.value))}if(null!==t){var i=e.animationManager;fo(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var s=Qr(this,t,[t]);if(1===s.length)e.Ea(),e.es(t.actualBounds),e.eb("Scroll To Part");else{var o=function(){e.Ea();for(var c=s.pop();0<s.length&&c instanceof ct&&c.isTreeExpanded&&(!(c instanceof At)||c.isSubGraphExpanded);)c=s.pop();0<s.length?(c instanceof vt&&e.uv(c.actualBounds),c instanceof ct&&!c.isTreeExpanded&&(c.isTreeExpanded=!0),c instanceof At&&!c.isSubGraphExpanded&&(c.isSubGraphExpanded=!0)):(c instanceof vt&&e.es(c.actualBounds),e.am("LayoutCompleted",l)),e.eb("Scroll To Part")},l=function(){On(o,(i.isEnabled?i.duration:0)+n)};e.Bj("LayoutCompleted",l),o()}}else{var u=e.position.copy();e.es(t.actualBounds),u.Xa(e.position)&&i.Cc()}}},$t.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof vt)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},$t.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Collapse Tree"),fo(e.animationManager,"Collapse Tree");var i=new dt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var s=n.value;s instanceof ct&&s.isTreeExpanded&&(s.collapseTree(),i.add(s))}e.S("TreeCollapsed",i)}finally{e.eb("Collapse Tree")}},$t.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ct&&t.isTreeExpanded))return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof ct&&e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},$t.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Expand Tree"),fo(e.animationManager,"Expand Tree");var i=new dt;if(null===t||t.isTreeExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var s=n.value;s instanceof ct&&!s.isTreeExpanded&&(s.expandTree(),i.add(s))}}else t.expandTree(),i.add(t);e.S("TreeExpanded",i)}finally{e.eb("Expand Tree")}},$t.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ct)||t.isTreeExpanded)return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof ct&&!e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},$t.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Wj()){var i=this.archetypeGroupData;if(null!==i){var n=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Group");for(var s=new dt,o=t.selection.iterator;o.next();){var l=o.value;l.Zc()&&l.canGroup()&&s.add(l)}for(var u=new dt,c=s.iterator;c.next();){var p=c.value;o=!1;for(var m=s.iterator;m.next();)if(p.Td(m.value)){o=!0;break}o||u.add(p)}if(0<u.count){var v=u.first().containingGroup;if(null!==v)for(;null!==v;){s=!1;for(var w=u.iterator;w.next();)if(!w.value.Td(v)){s=!0;break}if(!s)break;v=v.containingGroup}if(i instanceof At)An(i),null!==(n=i.copy())&&t.add(n);else if(e.Zu(i)){var k=e.copyNodeData(i);le(k)&&(e.xf(k),n=t.ii(k))}if(null!==n){null!==v&&this.isValidMember(v,n)&&(n.containingGroup=v);for(var A=u.iterator;A.next();){var T=A.value;this.isValidMember(n,T)&&(T.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.S("SelectionGrouped",n)}finally{t.eb("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},$t.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Wj()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Zc()&&e.canGroup())return!0}return!1},$t.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof st)return!1;if(null!==t){if(t===e||t.Td(e))return!1;var i=t.memberValidation;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.memberValidation)||i(t,e)},$t.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.model;if(i.Wj())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Ungroup");var n=new dt;if(null!==t)n.add(t);else for(var s=e.selection.iterator;s.next();){var o=s.value;o instanceof At&&o.canUngroup()&&n.add(o)}var l=new dt;if(0<n.count){e.clearSelection(!0);for(var u=n.iterator;u.next();){var c=u.value;c.expandSubGraph();var p=c.containingGroup,m=null!==p&&null!==p.data?i.wa(p.data):void 0;l.addAll(c.memberParts);for(var v=l.iterator;v.next();){var w=v.value;if(w.isSelected=!0,!(w instanceof st)){var k=w.data;null!==k?i.mp(k,m):w.containingGroup=p}}e.remove(c)}}e.S("SelectionUngrouped",n,l)}finally{e.eb("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},$t.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Wj())return!1;if(null!==t){if(!(t instanceof At))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof At&&e.canUngroup())return!0;return!1},$t.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Lf(t).iterator;t.next();){var n=t.value;null!==n.containingGroup&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},$t.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Collapse SubGraph"),fo(e.animationManager,"Collapse SubGraph");var i=new dt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var s=n.value;s instanceof At&&s.isSubGraphExpanded&&(s.collapseSubGraph(),i.add(s))}e.S("SubGraphCollapsed",i)}finally{e.eb("Collapse SubGraph")}},$t.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof At&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof At&&e.isSubGraphExpanded)return!0;return!1},$t.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Expand SubGraph"),fo(e.animationManager,"Expand SubGraph");var i=new dt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var s=n.value;s instanceof At&&!s.isSubGraphExpanded&&(s.expandSubGraph(),i.add(s))}}else t.expandSubGraph(),i.add(t);e.S("SubGraphExpanded",i)}finally{e.eb("Expand SubGraph")}},$t.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof At&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof At&&!e.isSubGraphExpanded)return!0;return!1},$t.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(null!==i){if(null===t){t=null;for(var n=e.selection.iterator;n.next();){var s=n.value;if(s.canEdit()){t=s;break}}if(null===t)return;t=t.Nl(function(o){return o instanceof qt&&o.editable})}null!==t&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},$t.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof qt))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.Nl(function(i){return i instanceof qt&&i.editable})))return!0;return!1},$t.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=e.lastInput,s=null;t instanceof yt?s=t.ga(C):e.viewportBounds.ca(n.documentPoint)||(s=new z((s=e.viewportBounds).x+s.width/2,s.y+s.height/2)),null!==s&&(n.viewPoint=e.op(s),n.documentPoint=s,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,Vg(i,!1,t)}},$t.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},$t.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),s=i.currentTool===n;if(void 0===e&&(e=s?n.dragOptions:i.Wm),n=new kt,null===t)return n;for(var o=t.iterator;o.next();)go(i,n,o.value,s,e);if(null!==i.draggedLink&&e.dragsLink)return n;for(o=t.iterator;o.next();)(t=o.value)instanceof st&&((null===(e=t.fromNode)||n.contains(e))&&(null===(e=t.toNode)||n.contains(e))||n.remove(t));return n},Tt.Object.defineProperties($t.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesTree:{get:function(){return this.ia},set:function(t){this.ia=t}},deletesTree:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesParentKey:{get:function(){return this.V},set:function(t){this.V=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ij},set:function(t){this.ij=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Ib},set:function(t){1<t||Q("zoomFactor must be larger than 1.0, not: "+t),this.Ib=t}},isZoomToFitRestoreEnabled:{get:function(){return this.hb},set:function(t){this.hb=t}},scrollToPartPause:{get:function(){return this.ob},set:function(t){this.ob=t}}}),$t.className="CommandHandler",hm=function(){return new $t},yt.prototype.cloneProtected=function(t){t.l=6144|this.l,t.pb=this.pb,t.bn=this.bn,t.Ma=this.Ma,t.pa.assign(this.pa),t.jd=this.jd.J(),t.Mb=null!==this.Mb?this.Mb.copy():null,t.Ca=this.Ca,t.Lb=this.Lb,t.Kg=this.Kg.J(),t.uc.assign(this.uc),t.Jb.assign(this.Jb),t.ec.assign(this.ec),t.Yn=this.Yn,null!==this.ba&&(t.ba=this.ba.copy()),t.Kb=this.Kb.J(),t.rk=this.rk.J(),t.io=this.io,t.Ag=this.Ag,null!==this.Ua&&(t.Ua=this.Ua.copy()),null!==this.A&&(t.A=this.A.oc?this.A:this.A.copy()),null!==this.Dh&&(t.Dh=Ro(this.Dh)),null!==this.tb&&(t.tb=this.tb.copy())},yt.prototype.Ww=function(t){var e=this.Dh;if(Ge(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Dh=e=[];e.push(t)},yt.prototype.Af=function(t){t.Zn=null,t.Ng=null,t.v()},yt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Dh)for(var e=0;e<this.Dh.length;e++){var i=this.Dh[e];t[i]=this[i]}return t},yt.prototype.copy=function(){return this.clone()},(L=yt.prototype).qb=function(t){t.classType===st?0===t.name.indexOf("Orient")?this.segmentOrientation=t:Q("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===yt&&(this.stretch=t)},L.toString=function(){return ws(this.constructor)+"#"+pi(this)},L.th=function(){null!==this.A&&(this.A.oc=!0)},L.Xc=function(){if(null===this.ba){var t=new lh;t.Xi=g,t.yj=g,t.Vi=10,t.wj=10,t.Wi=0,t.xj=0,this.ba=t}},L.cb=function(t,e,i,n,s,o,l){var u=this.part;if(null!==u&&(u.fk(t,e,i,n,s,o,l),i===this&&t===de&&qr(this)&&xr(this,u,e),o=this.diagram,null===this.animationTriggers||null===o||!o.pi||o.undoManager.isUndoingRedoing||o.animationManager.Dm||null!==(t=this.animationTriggers.get(e))&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(null===this.jo&&(this.jo=new kt),l=0===o.undoManager.transactionLevel,t.startCondition===tf?l=!0:t.startCondition===om&&(l=!1),l?(function C0(t,e){null!==(t=t.tk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,o=new gi),null!==(l=this.jo.get(t))&&l.stop(),this.jo.add(t,o),o.vu=this,o.Ow=t,o.add(this,e,n,s),o.start()):(fo(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,n,s))),this instanceof nt&&i===u&&0!=(16777216&u.l)&&null!==u.data))for(n=(i=this.O.s).length,s=0;s<n;s++)(u=i[s])instanceof nt&&Mr(u,function(c){null!==c.data&&16777216&c.l&&c.La(e)})},L.ks=function(t){return this.bindingId===t?this:null},L.g=function(t,e,i){this.cb(de,t,this,e,i)},L.Ge=function(t,e,i,n){var s=this.uc;if(s.h(t,e,i,n),1!==this.Ca||0!==this.Lb){null===this.Mb&&(this.Mb=new Ot);var o=this.Mb;o.reset(),this.no(o,t,e,i,n),o.pp(s)}},L.ux=function(t,e,i){if(!1===this.pickable)return!1;var n=this.naturalBounds;return e=t.Bf(e),i?oi(t.x,t.y,0,0,0,n.height)<=e||oi(t.x,t.y,0,n.height,n.width,n.height)<=e||oi(t.x,t.y,n.width,n.height,n.width,0)<=e||oi(t.x,t.y,n.width,0,0,0)<=e:t.zd(0,0)<=e&&t.zd(0,n.height)<=e&&t.zd(n.width,0)<=e&&t.zd(n.width,n.height)<=e},L.se=function(){return!0},L.ca=function(t){var e=z.alloc();e.assign(t),this.transform.Ga(e);var i=this.actualBounds;if(!i.w())return z.free(e),!1;var n=this.diagram;if(null!==n&&n.wq){var s=n.Ql("extraTouchThreshold"),o=n.Ql("extraTouchArea"),l=o/2,u=this.naturalBounds,c=1/(n=this.Df()*n.scale);if(u.width*n<s&&u.height*n<s)return t=kn(i.x-l*c,i.y-l*c,i.width+o*c,i.height+o*c,e.x,e.y),z.free(e),t}return s=!1,(this instanceof Bt||this instanceof Pt?kn(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.ca(e))&&(s=!(this.tb&&!this.tb.ca(e))&&(!!(null!==this.areaBackground&&i.ca(e)||null!==this.Ma&&this.ec.ca(t))||this.gh(t))),z.free(e),s},L.gh=function(t){var e=this.naturalBounds;return kn(0,0,e.width,e.height,t.x,t.y)},L.Re=function(t){if(0===this.angle)return this.actualBounds.Re(t);var e=this.naturalBounds;e=q.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,s=z.allocAt(t.x,t.y);return e.ca(i.Cd(s))&&(s.h(t.x,t.bottom),e.ca(i.Cd(s))&&(s.h(t.right,t.bottom),e.ca(i.Cd(s))&&(s.h(t.right,t.y),e.ca(i.Cd(s))&&(n=!0)))),z.free(s),q.free(e),n},L.fh=function(t,e){if(void 0===e)return t.Re(this.actualBounds);var i=this.naturalBounds,n=!1,s=z.allocAt(0,0);return t.ca(e.Ga(s))&&(s.h(0,i.height),t.ca(e.Ga(s))&&(s.h(i.width,i.height),t.ca(e.Ga(s))&&(s.h(i.width,0),t.ca(e.Ga(s))&&(n=!0)))),z.free(s),n},L.Yc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Yc(this.actualBounds);var i=this.naturalBounds,n=z.allocAt(0,0),s=z.allocAt(0,i.height),o=z.allocAt(i.width,i.height),l=z.allocAt(i.width,0),u=!1;if(t.ca(e.Ga(n))||t.ca(e.Ga(s))||t.ca(e.Ga(o))||t.ca(e.Ga(l)))u=!0;else{i=q.allocAt(0,0,i.width,i.height);var c=z.allocAt(t.x,t.y);i.ca(e.Cd(c))?u=!0:(c.h(t.x,t.bottom),i.ca(e.Cd(c))?u=!0:(c.h(t.right,t.bottom),i.ca(e.Cd(c))?u=!0:(c.h(t.right,t.y),i.ca(e.Cd(c))&&(u=!0)))),z.free(c),q.free(i),!u&&(_.us(t,n,s)||_.us(t,s,o)||_.us(t,o,l)||_.us(t,l,n))&&(u=!0)}return z.free(n),z.free(s),z.free(o),z.free(l),u},L.ga=function(t,e){if(void 0===e&&(e=new z),t instanceof f){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},L.mi=function(t){void 0===t&&(t=new q);var e=this.naturalBounds,i=this.oe,n=z.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Ze(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Ze(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Ze(t,n.x,n.y,0,0),z.free(n),t},L.li=function(){var t=this.oe;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},L.Df=function(){if(!(4096&this.l))return this.Jk;var t=this.Ca;return null!==this.panel?t*this.panel.Df():t},L.qs=function(t,e){return void 0===e&&(e=new z),e.assign(t),this.oe.Cd(e),e},L.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},L.Rj=function(t,e,i,n,s){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*l,c=-o.m12*l,p=-o.m21*l,m=o.m11*l,v=l*(o.m21*o.dy-o.m22*o.dx),w=l*(o.m12*o.dx-o.m11*o.dy);return null!==this.areaBackground?_.Ff((o=this.actualBounds).left,o.top,o.right,o.bottom,t,e,i,n,s):(l=t*u+e*p+v,t=t*c+e*m+w,e=i*u+n*p+v,i=i*c+n*m+w,s.h(0,0),i=_.Ff(0,0,(n=this.naturalBounds).width,n.height,l,t,e,i,s),s.transform(o),i)},yt.prototype.measure=function(t,e,i,n){if(!1!==vo(this)){var s=this.Kg,o=s.right+s.left;s=s.top+s.bottom,t=Math.max(t-o,0),e=Math.max(e-s,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-s,0),o=this.angle,s=this.desiredSize;var l=this.kq();90===o||270===o?(t=isFinite(s.height)?s.height+l:t,e=isFinite(s.width)?s.width+l:e):(t=isFinite(s.width)?s.width+l:t,e=isFinite(s.height)?s.height+l:e),s=i||0,l=n||0;var u=this instanceof nt;switch(ts(this,!0)){case Se:l=s=0,u&&(e=t=1/0);break;case Ce:isFinite(t)&&t>i&&(s=t),isFinite(e)&&e>n&&(l=e);break;case ri:isFinite(t)&&t>i&&(s=t),l=0,u&&(e=1/0);break;case di:isFinite(e)&&e>n&&(l=e),s=0,u&&(t=1/0)}var c=this.minSize;s>(u=this.maxSize).width&&c.width<u.width&&(s=u.width),l>u.height&&c.height<u.height&&(l=u.height),i=Math.max(s,c.width),n=Math.max(l,c.height),u.width<i&&(i=Math.min(c.width,i)),u.height<n&&(n=Math.min(c.height,n)),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(i,t),e=Math.max(n,e),(90===o||270===o)&&(o=t,t=e,e=o,o=i,i=n,n=o),this.uc.ka(),this.Wl(t,e,i,n),this.uc.freeze(),this.uc.w()||Q("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.uc.toString()),gn(this,!1)}},yt.prototype.Wl=function(){},yt.prototype.Dd=function(){return!1},yt.prototype.arrange=function(t,e,i,n,s){this.Tk();var o=q.alloc();o.assign(this.Jb),this.Jb.ka(),!1===Bn(this)?this.Jb.h(t,e,i,n):this.eh(t,e,i,n),this.Jb.freeze(),this.tb=void 0===s?null:s,i=!1,void 0!==s?i=!0:(null!==(s=this.panel)&&bo(s)&&(s=s.panel),null!==s&&(s=s.ec,n=this.measuredBounds,null!==this.areaBackground&&(n=this.Jb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=s.width+.05&&0<=e+.05&&i<=s.height+.05),this instanceof qt&&(this.Lq>(t=this.naturalBounds).height||this.Db>t.width))&&(i=!0)),this.l=i?256|this.l:-257&this.l,this.Jb.w()||Q("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Jb.toString()),this.Xl(o,this.Jb),wr(this,!1),q.free(o)},(L=yt.prototype).eh=function(){},L.Xl=function(t,e){var i=this.part;null!==i&&null!==i.diagram&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||gp(i,!0),this.N(),hs(t,e)||(i.oh(),this.Pn(i)))},L.Pn=function(t){null!==this.portId&&(gp(t,!0),t instanceof ct&&Yy(t,this))},L.hc=function(t,e){if(!function Y0(t,e,i){if(!(e instanceof Ki))return!1;if(!t.visible||0===t.opacity||t.Dd()&&!t.isVisible())return null!==t.svg&&null!==t.svg.parentNode&&t.svg.remove(),!0;var n=t.panel,s=t.mk(e);if(t.jk(e,i,s))return Hm(t,t.svg),null!==t.svg.parentElement?(t.Dd()&&(e.ti=t.svg),!0):(t.Dd()?(null!==e.ti?e.ti.after(t.svg):e.Mj.prepend(t.svg),e.ti=t.svg):n&&Xm(t,n,t.svg),!0);if(t.Dd()&&t.isShadowed){var o=t.shadowOffset;e.Fv(o.x*i.scale*t.scale*i.Nb,o.y*i.scale*t.scale*i.Nb,t.shadowBlur),Ks(e),e.shadowColor=t.shadowColor}t instanceof qt&&(e.font=t.font),e.yd=null;var l=t.transform;o=t instanceof nt;var u=t instanceof nt&&bo(t);4096&t.l&&Vu(t);var c=t.Jb;if(e.rb.ha=[1,0,0,1,0,0],e.o=!1,s&&(e.o=!0,o&&u?(hh(e,1,0,0,1,0,0),t.svg=e.ad):o?(hh(e,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),t.svg=e.ad):hh(e,1,0,0,1,0,0)),s=t.naturalBounds,null!==t.areaBackground){var p=l.copy().Uj();e.rb.ha=[p.m11,p.m12,p.m21,p.m22,p.dx,p.dy],Nf(t,e,s,c),e.rb.ha=[1,0,0,1,0,0],e.yd.gd=e.ad,e.yd.prepend(e.ad)}return o||(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),null!==t.background&&(o?(u&&(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),Hu(t,e,s,c),u&&(e.rb.ha=[1,0,0,1,0,0])):(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Hu(t,e,s,c)),e.yd.Ma=e.ad,e.yd.prepend(e.ad)),l=e.yd,u=!1,(s=t.part)&&i.Gf("drawShadows")&&(u=s.isShadowed),e.clipInsteadOfFill&&(u=!1),t.Dd()&&u&&Ks(e),u&&!0===t.shadowVisible?Ks(e):u&&!1===t.shadowVisible&&As(e),s=t.panel,u&&Xu(t,s)&&null===t.shadowVisible&&As(e),e.Il&&(p=i.computePixelRatio(),p="drop-shadow("+e.shadowOffsetX/p+"px "+e.shadowOffsetY/p+"px "+e.shadowBlur/p/2+"px "+e.shadowColor+")",null!==t.background&&l.Ma.setAttributeNS(null,"filter",p),null!==t.areaBackground&&l.gd.setAttributeNS(null,"filter",p)),u&&(null!==t.Ma||null!==t.areaBackground||Xu(t,s))?(Gu(t,!0),null===t.shadowVisible&&As(e)):Gu(t,!1),s=u,t.hh(e,i),o&&e.nh.pop(),e.o&&e.nh.pop(),l=e.Hv.hs,u=o?t.svg:e.yd,p=t.svg,o||null===p||u===p||p.parentNode!==t.panel.svg?(t.svg=u,null!==l&&null===u&&(Uu(e),e.nh.pop()),null===u||(t.$o(e,n,c,u),e.Il&&(i=i.computePixelRatio(),t.Ev(u,"drop-shadow("+e.shadowOffsetX/i+"px "+e.shadowOffsetY/i+"px "+e.shadowBlur/i/2+"px "+e.shadowColor+")")),s&&512&t.l&&Ks(e),t.Dd()&&As(e),1!==(i=t.Dd()?t.opacity*e.globalAlpha:t.opacity)&&u.setAttributeNS(null,"opacity",i.toString()),""!==t.filter&&u.setAttributeNS(null,"filter",t.filter),t.Dd()?(e.ti?e.ti.after(u):e.Mj.prepend(u),e.ti=u):null!==n&&Xm(t,n,u),null!==l&&l(t,u),Hm(t,u)),!0):(t.svg.replaceWith(u),t.svg=u,null!==u&&t.$o(e,n,c,u),Vm(e,p),!0)}(this,t,e)&&this.visible){var i=this.opacity;if(0!==i){var n=1;1!==i&&(t.globalAlpha=(n=t.globalAlpha)*i);var s="";""!==this.filter&&(s=t.filter,t.filter=this.filter);var o=this instanceof nt&&bo(this),l=this.Jb;if(o){var u=this.Jb,c=this.ec,p=this.areaBackground,m=this.Ma;null===p&&null===m||t.yc(),null!==p&&(sn(this,t,p,!0,!0,c,u),p instanceof Wt&&p.type===yn?(t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.ng(p)):t.fillRect(u.x,u.y,u.width,u.height)),null!==m&&(sn(this,t,m,!0,!1,c,u),m instanceof Wt&&m.type===yn?(t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.ng(m)):t.fillRect(u.x,u.y,u.width,u.height)),this.hh(t,e)}if(!o&&(o||0!==l.width&&0!==l.height&&!isNaN(l.x)&&!isNaN(l.y))){o=this.transform,u=this.panel,4096&this.l&&Vu(this),c=!1;var w,v=0;if((p=this.part)&&e.Gf("drawShadows")&&(c=p.isShadowed)&&(m=p.shadowOffset,v=Math.max(m.y,m.x)*e.scale*e.Nb),m=this.Dd(),!(w=e.$i||!m)){var H,k=this.naturalBounds,A=(w=this.wh).m11,T=w.m21,j=w.dx,I=w.m12,B=w.m22,R=w.dy,K=H=0;w=H*A+K*T+j;var J=H*I+K*B+R,lt=(H=k.width+v)*A+(K=0)*T+j;H=H*I+K*B+R,K=Math.min(w,lt);var gt=Math.min(J,H),ft=Math.max(w+0,lt)-K,ot=Math.max(J+0,H)-gt;w=K,J=gt,lt=(H=k.width+v)*A+(K=k.height+v)*T+j,H=H*I+K*B+R,K=Math.min(w,lt),gt=Math.min(J,H),ft=Math.max(w+ft,lt)-K,ot=Math.max(J+ot,H)-gt,w=K,J=gt,lt=(H=0)*A+(K=k.height+v)*T+j,H=H*I+K*B+R,K=Math.min(w,lt),gt=Math.min(J,H),ft=Math.max(w+ft,lt)-K,ot=Math.max(J+ot,H)-gt,J=gt,A=(v=e.viewportBounds).y,w=!((w=K)>v.width+(k=v.x)||k>ft+w||J>v.height+A||A>ot+J)}if(w){if(w=0!=(256&this.l),t.clipInsteadOfFill&&(w=!1),this instanceof qt&&(t.font=this.font),w){if(J=u.se()?u.naturalBounds:u.actualBounds,ft=Math.max(l.x,J.x),ot=Math.max(l.y,J.y),v=Math.min(l.right,J.right)-ft,k=Math.min(l.bottom,J.bottom)-ot,null!==(A=this.tb)&&(ft=A.x,ot=A.y,v=A.width,k=A.height),ft>l.width+l.x||l.x>J.width+J.x)return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));t.save(),t.beginPath(),t.rect(ft,ot,v,k),t.clip()}if(m){if(!p.isVisible())return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));c&&(t.Fv((J=p.shadowOffset).x*e.scale*this.scale*e.Nb,J.y*e.scale*this.scale*e.Nb,p.shadowBlur),Ks(t),t.shadowColor=p.shadowColor)}c&&!0===this.shadowVisible?Ks(t):c&&!1===this.shadowVisible&&As(t),p=this.naturalBounds,null!==this.areaBackground&&(t.yc(),Nf(this,t,p,l)),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),c&&Xu(this,u)&&null===this.shadowVisible&&As(t),null!==this.Ma&&(t.yc(),Hu(this,t,p,l)),c&&(null!==this.Ma||null!==this.areaBackground||Xu(this,u))?(Gu(this,!0),null===this.shadowVisible&&As(t)):Gu(this,!1),this.hh(t,e),c&&512&this.l&&Ks(t),m&&c&&As(t),w&&(t.restore(),t.Vc(this instanceof nt)),o.ws()||t.transform(o.m22*(e=1/(o.m11*o.m22-o.m12*o.m21)),-o.m12*e,-o.m21*e,o.m11*e,e*(o.m21*o.dy-o.m22*o.dx),e*(o.m12*o.dx-o.m11*o.dy))}}1!==i&&(t.globalAlpha=n),""!==this.filter&&(t.filter=s)}}},L.Ev=function(){},L.$o=function(t,e,i,n){var s=0!=(256&this.l);if(t.clipInsteadOfFill&&(s=!1),s){var o=e.se()?e.naturalBounds:e.actualBounds;e=Math.max(i.x,o.x),s=Math.max(i.y,o.y);var l=Math.min(i.right,o.right)-e;i=Math.min(i.bottom,o.bottom)-s,null!==(o=this.tb)&&(e=o.x,s=o.y,l=o.width,i=o.height);var u=null;null!==(o=n.getAttribute("clip-path"))&&(u=t.svg.getElementById(o.split("#")[1].slice(0,-1))),null===u?(o="CLIP"+Ho++,u=t.Ud("clipPath",{id:o}),e=t.Ud("rect",{x:e,y:s,width:l,height:i}),this instanceof nt&&(s=this.transform.copy().Uj(),e.setAttribute("transform","matrix("+s.m11+", "+s.m12+", "+s.m21+", "+s.m22+", "+s.dx+", "+s.dy+")")),u.appendChild(e),t.svg.appendChild(u),n.setAttributeNS(null,"clip-path","url(#"+o+")")):((t=u.firstElementChild).setAttribute("x",e.toString()),t.setAttribute("y",s.toString()),t.setAttribute("width",l.toString()),t.setAttribute("height",i.toString()))}else n.removeAttributeNS(null,"clip-path"),Vm(t,n)},L.hh=function(){},L.mv=function(){this.Uc=!0},L.jk=function(t,e,i){if(this.Uc)return this.mv(),this.Uc=!1;if(null===(e=this.svg))return!1;if(!this.visible)return e.remove(),!1;if("g"!==e.nodeName&&i||"g"===e.nodeName&&!i)return!1;var n=this.transform,s=this instanceof nt&&bo(this);if(!(this instanceof nt&&s))if(this instanceof Ei){var o=this.bt;t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy],null!==o&&Um(t,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),i?e.lastElementChild.setAttributeNS(null,"transform",Km(t)):e.setAttributeNS(null,"transform",Km(t))}else if(!i||this instanceof nt)e.setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");else if(this instanceof Pt){o=e.getElementsByTagName("path");for(var l=0;l<o.length;l++)o[l].setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")")}else(e.lastElementChild||e).setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");return 1===(o=this.Dd()?this.opacity*t.globalAlpha:this.opacity)?e.removeAttribute("opacity"):e.setAttributeNS(null,"opacity",o.toString()),t.rb.ha=[1,0,0,1,0,0],(null!==this.areaBackground||void 0!==e.gd)&&(o=e.gd,null===this.areaBackground?(e.gd.remove(),e.gd=void 0):(l=n.copy().Uj(),t.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Nf(this,t,this.naturalBounds,this.actualBounds),t.rb.ha=[1,0,0,1,0,0],e.gd?(null!==(l=e.gd.getAttribute("filter"))&&t.ad.setAttribute("filter",l),e.gd.replaceWith(t.ad)):e.prepend(t.ad),e.gd=t.ad),o&&Ku(t,o)),(null!==this.background||void 0!==e.Ma)&&(o=e.Ma,null===this.background?(Ku(t,e.Ma),e.Ma.remove(),e.Ma=void 0):((s||i&&!(this instanceof nt))&&(t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy]),Hu(this,t,this.naturalBounds,this.actualBounds),e.Ma?(Ku(t,e.Ma),null!==(i=e.Ma.getAttribute("filter"))&&t.ad.setAttribute("filter",i),e.Ma.replaceWith(t.ad)):e.prepend(t.ad),e.Ma=t.ad),o&&Ku(t,o)),this.$o(t,this.panel,this.actualBounds,e),!0},L.mk=function(t){if(null!==this.background||null!==this.areaBackground)return!0;var e=0!=(256&this.l);return t.clipInsteadOfFill&&(e=!1),!!e},L.rg=function(t){if(t instanceof nt)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},L.Ed=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ed()},L.If=function(){for(var t=this instanceof nt?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},L.no=function(t,e,i,n,s){if(1!==this.Ca&&t.scale(this.Ca),0!==this.Lb){var o=z.alloc();o.yi(e,i,n,s,C),t.rotate(this.Lb,o.x,o.y),z.free(o)}},L.v=function(t){if(!vo(this)){void 0===t&&(t=!1),gn(this,!0),wr(this,!0);var e=this.panel;null===e||t||e.v()}},L.Tj=function(){vo(this)||(gn(this,!0),wr(this,!0))},L.Tk=function(){!(2048&this.l)&&(Ua(this,!0),Wo(this,!0))},L.Xu=function(){Wo(this,!0)},L.N=function(){var t=this.part;null!==t&&t.N()},L.Fj=function(){this.svg=null},L.wi=function(t){this.Me=t,null!==this.svg&&this.svg.remove()},L.Bv=function(){},L.Av=function(t){return this.pa=t,Wa(this),!0},L.mm=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Tk())},L.kq=function(){return 0},L.bind=function(t,e,i,n){var s=null;return(s="string"==typeof t?new Ae(t,e,i,n):t).xd=this,null!==(t=this.ih())&&hy(t)&&Q("Cannot add a Binding to a template that has already been copied: "+s),null===this.localBindings&&(this.localBindings=new dt),this.localBindings.add(s),this},L.set=function(t){return Object.assign(this,t),this},L.Eu=function(t){return Of(this,t),this},L.apply=function(t){return t(this),this},L.nm=function(t){return ql(this,t),this},L.qz=function(){return this.ih()},L.ih=function(){for(var t=this instanceof nt?this:this.panel;null!==t;){if(null!==t.allBindings)return t;t=t.panel}return null},L.Kv=function(t){return t.xd=this,null===this.animationTriggers&&(this.animationTriggers=new kt),this.animationTriggers.add(t.propertyName,t),this},Tt.Object.defineProperties(yt.prototype,{bindingId:{get:function(){return null!==this.A?this.A.zp:-1},set:function(t){this.bindingId!==t&&(null===this.A&&(this.A=new ta),this.A.zp=t)}},localBindings:{get:function(){return null!==this.A?this.A.te:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new ta),this.A.te=t)}},srcBindings:{get:function(){return null!==this.A?this.A.wm:null},set:function(t){this.srcBindings!==t&&(null===this.A&&(this.A=new ta),this.A.wm=t)}},shadowVisible:{get:function(){return null!==this.A?this.A.Ci:null},set:function(t){var e=this.shadowVisible;e!==t&&(Be(this),this.A.Ci=t,this.Uc=!0,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.A?this.A.Ib:null},set:function(t){var e=this.enabledChanged;e!==t&&(Be(this),this.A.Ib=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return null!==this.Ua?this.Ua.rr:Ci},set:function(t){var e=this.segmentOrientation;e!==t&&(null===this.Ua&&(this.Ua=new Uo),this.Ua.rr=t,this.v(),this.g("segmentOrientation",e,t),t===Ci&&(this.angle=0))}},segmentIndex:{get:function(){return null!==this.Ua?this.Ua.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(null===this.Ua&&(this.Ua=new Uo),this.Ua.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return null!==this.Ua?this.Ua.o:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(null===this.Ua&&(this.Ua=new Uo),this.Ua.o=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return null!==this.Ua?this.Ua.F:_n},set:function(t){var e=this.segmentOffset;e.D(t)||(t=t.J(),null===this.Ua&&(this.Ua=new Uo),this.Ua.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return null!==this.A?this.A.hg:zn},set:function(t){var e=this.stretch;e!==t&&(Be(this),this.A.hg=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return null!==this.A?this.A.xa:""},set:function(t){var e=this.name;e!==t&&(Be(this),this.A.xa=t,null!==this.part&&(this.part.Rh=null),this.g("name",e,t))}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&ie(t,"0 <= value <= 1",yt,"opacity"),this.pb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Pr(e,e.actualBounds)))}},filter:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.Uc=!0,this.g("filter",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Pr(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.l)},set:function(t){var e=0!=(1&this.l);e!==t&&(this.l^=1,this.g("visible",e,t),null!==(e=this.panel)?e.v():this.Dd()&&this.$b(t),this.N(),Gm(this))}},pickable:{get:function(){return 0!=(2&this.l)},set:function(t){var e=0!=(2&this.l);e!==t&&(this.l^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.l)},set:function(t){var e=0!=(4&this.l);e!==t&&(this.l^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.l)},set:function(t){var e=0!=(8&this.l);e!==t&&(this.l^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.l)},set:function(t){var e=0!=(16&this.l);e!==t&&(this.l^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.l)},set:function(t){var e=0!=(32&this.l);e!==t&&(this.l^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.l)},set:function(t){var e=0!=(64&this.l);e!==t&&(this.l^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.l)},set:function(t){var e=0!=(128&this.l);e!==t&&(this.l^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return null!==this.A?this.A.gd:null},set:function(t){var e=this.areaBackground;e!==t&&(null!==t&&ia(t,"GraphObject.areaBackground"),t instanceof Wt&&t.freeze(),Be(this),this.A.gd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(null!==t&&ia(t,"GraphObject.background"),t instanceof Wt&&t.freeze(),this.Ma=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Dd())return this;if(null!==this.Ng)return this.Ng;var t;for(t=this.panel;t;){if(t instanceof vt)return this.Ng=t;t=t.panel}return null}},svg:{get:function(){return this.V},set:function(t){this.V=t}},panel:{get:function(){return this.Me}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,i=t.y,n=this.pa,s=n.x;n=n.y,(s===e||isNaN(s)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Bv():(t=t.copy(),this.Av(t,s,n)&&this.g("position",new z(s,n),t))}},actualBounds:{get:function(){return this.Jb}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&(0>=t&&Q("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Ca=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Lb},set:function(t){var e=this.Lb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Lb=t,Gm(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.jd},set:function(t){var e=t.width,i=t.height,n=this.jd,s=n.width,o=n.height;(s===e||isNaN(s)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.jd=t=t.J(),this.v(),this instanceof Pt&&this.rc(),this.g("desiredSize",n,t),qr(this)&&null!==(t=this.part)&&(xr(this,t,"width"),xr(this,t,"height")))}},width:{get:function(){return this.jd.width},set:function(t){var e=this.jd.width;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new Mt(t,this.jd.height).freeze(),this.v(),this instanceof Pt&&this.rc(),this.g("desiredSize",e,t),qr(this)&&null!==(t=this.part)&&xr(this,t,"width"))}},height:{get:function(){return this.jd.height},set:function(t){var e=this.jd.height;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new Mt(this.jd.width,t).freeze(),this.v(),this instanceof Pt&&this.rc(),this.g("desiredSize",e,t),qr(this)&&null!==(t=this.part)&&xr(this,t,"height"))}},minSize:{get:function(){return null!==this.A?this.A.u:Gs},set:function(t){var e=this.minSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),Be(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return null!==this.A?this.A.o:Yl},set:function(t){var e=this.maxSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),Be(this),this.A.o=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.uc}},naturalBounds:{get:function(){return this.ec}},margin:{get:function(){return this.Kg},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.Kg;e.D(t)||(this.Kg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return 2048&this.l&&Vu(this),this.Bb}},oe:{get:function(){return 4096&this.l&&Vu(this),this.wh}},animationTriggers:{get:function(){return null!==this.A?this.A.hb:null},set:function(t){this.animationTriggers!==t&&(Be(this),this.A.hb=t)}},reshapingBehavior:{get:function(){return null!==this.A?this.A.Pf:Se},set:function(t){this.reshapingBehavior!==t&&(Be(this),this.A.Pf=t)}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(t.Mc()&&!t.Yb()&&Q("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Kb=t=t.J(),Wa(this),this.g("alignment",e,t))}},column:{get:function(){return this.Ag},set:function(t){t=Math.round(t);var e=this.Ag;e!==t&&(0>t&&ie(t,">= 0",yt,"column"),this.Ag=t,this.v(),this.g("column",e,t),null!==this.svg&&this.svg.remove())}},columnSpan:{get:function(){return null!==this.A?this.A.ob:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&ie(t,">= 1",yt,"columnSpan"),Be(this),this.A.ob=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.io},set:function(t){t=Math.round(t);var e=this.io;e!==t&&(0>t&&ie(t,">= 0",yt,"row"),this.io=t,this.v(),this.g("row",e,t),null!==this.svg&&this.svg.remove())}},rowSpan:{get:function(){return null!==this.A?this.A.Bi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&ie(t,">= 1",yt,"rowSpan"),Be(this),this.A.Bi=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return null!==this.A?this.A.Di:null},set:function(t){var e=this.spanAllocation;e!==t&&(Be(this),this.A.Di=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.rk},set:function(t){var e=this.rk;e.D(t)||(this.rk=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Yn},set:function(t){var e=this.Yn;if(e!==t){var i=this.part;null===i||i instanceof ct||Q("Cannot set portID on a Link: "+t),null!==e&&null!==i&&xp(i,this),this.Yn=t,null!==t&&null!==i&&(i.Te=!0,Vy(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.ba?this.ba.yj:g},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.yj=t,this.g("toSpot",e,t),br(this))}},toEndSegmentLength:{get:function(){return null!==this.ba?this.ba.wj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&ie(t,">= 0",yt,"toEndSegmentLength"),this.Xc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),br(this))}},toShortLength:{get:function(){return null!==this.ba?this.ba.xj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.xj=t,this.g("toShortLength",e,t),br(this))}},toLinkable:{get:function(){return null!==this.ba?this.ba.Tr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Xc(),this.ba.Tr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.ba?this.ba.Ur:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&ie(t,">= 0",yt,"toMaxLinks"),this.Xc(),this.ba.Ur=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.ba?this.ba.Xi:g},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Xi=t,this.g("fromSpot",e,t),br(this))}},fromEndSegmentLength:{get:function(){return null!==this.ba?this.ba.Vi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&ie(t,">= 0",yt,"fromEndSegmentLength"),this.Xc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),br(this))}},fromShortLength:{get:function(){return null!==this.ba?this.ba.Wi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Wi=t,this.g("fromShortLength",e,t),br(this))}},fromLinkable:{get:function(){return null!==this.ba?this.ba.hq:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Xc(),this.ba.hq=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.ba?this.ba.iq:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&ie(t,">= 0",yt,"fromMaxLinks"),this.Xc(),this.ba.iq=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return null!==this.A?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(Be(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.A?this.A.zh:null},set:function(t){var e=this.click;e!==t&&(Be(this),this.A.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.A?this.A.Fh:null},set:function(t){var e=this.doubleClick;e!==t&&(Be(this),this.A.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.A?this.A.Bh:null},set:function(t){var e=this.contextClick;e!==t&&(Be(this),this.A.Bh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.A?this.A.Mh:null},set:function(t){var e=this.mouseEnter;e!==t&&(Be(this),this.A.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.A?this.A.Ph:null},set:function(t){var e=this.mouseLeave;e!==t&&(Be(this),this.A.Ph=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.A?this.A.Qh:null},set:function(t){var e=this.mouseOver;e!==t&&(Be(this),this.A.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.A?this.A.Oh:null},set:function(t){var e=this.mouseHover;e!==t&&(Be(this),this.A.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.A?this.A.Nh:null},set:function(t){var e=this.mouseHold;e!==t&&(Be(this),this.A.Nh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.A?this.A.Of:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(Be(this),this.A.Of=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.A?this.A.Xd:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(Be(this),this.A.Xd=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.A?this.A.Lh:null},set:function(t){var e=this.mouseDrop;e!==t&&(Be(this),this.A.Lh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.A?this.A.V:null},set:function(t){var e=this.actionDown;e!==t&&(Be(this),this.A.V=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.A?this.A.ia:null},set:function(t){var e=this.actionMove;e!==t&&(Be(this),this.A.ia=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.A?this.A.Ha:null},set:function(t){var e=this.actionUp;e!==t&&(Be(this),this.A.Ha=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.A?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(Be(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.A?this.A.$h:null},set:function(t){var e=this.toolTip;e!==t&&(Be(this),this.A.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.A?this.A.Ch:null},set:function(t){var e=this.contextMenu;e!==t&&(Be(this),this.A.Ch=t,this.g("contextMenu",e,t))}}}),yt.prototype.trigger=yt.prototype.Kv,yt.prototype.findBindingPanel=yt.prototype.ih,yt.prototype.findTemplateBinder=yt.prototype.qz,yt.prototype.setProperties=yt.prototype.nm,yt.prototype.apply=yt.prototype.apply,yt.prototype.attach=yt.prototype.Eu,yt.prototype.set=yt.prototype.set,yt.prototype.isEnabledObject=yt.prototype.If,yt.prototype.isVisibleObject=yt.prototype.Ed,yt.prototype.isContainedBy=yt.prototype.rg,yt.prototype.getNearestIntersectionPoint=yt.prototype.rs,yt.prototype.getLocalPoint=yt.prototype.qs,yt.prototype.getDocumentScale=yt.prototype.Df,yt.prototype.getDocumentAngle=yt.prototype.li,yt.prototype.getDocumentBounds=yt.prototype.mi,yt.prototype.getDocumentPoint=yt.prototype.ga,yt.prototype.intersectsRect=yt.prototype.Yc,yt.prototype.containedInRect=yt.prototype.fh,yt.prototype.containsRect=yt.prototype.Re,yt.prototype.containsPoint=yt.prototype.ca,yt.prototype.raiseChanged=yt.prototype.g,yt.prototype.raiseChangedEvent=yt.prototype.cb,yt.prototype.addCopyProperty=yt.prototype.Ww;var Ka=null;function ta(){this.oc=!1,this.xa="",this.zp=-1,this.nb=this.wm=this.te=null,this.j="",this.hb=this.Di=this.Ib=this.Ch=this.$h=this.F=this.Ha=this.ia=this.V=this.Lh=this.Xd=this.Of=this.Nh=this.Oh=this.Qh=this.Ph=this.Mh=this.Bh=this.Fh=this.zh=null,this.u=Gs,this.o=Yl,this.hg=zn,this.ob=this.Bi=1,this.Pf=Se,this.Pc=this.Ci=this.gd=null,this.Oc="category"}function Uo(){this.u=-1/0,this.o=0,this.F=_n,this.rr=Ci,this.j=this.V="None"}function lh(){this.yj=this.Xi=Nt,this.xj=this.Wi=this.wj=this.Vi=NaN,this.Tr=this.hq=null,this.Ur=this.iq=1/0}function Sr(){this.ha=[1,0,0,1,0,0]}function ea(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.hx=[],this.pattern=null}function fs(t,e,i){this.ownerDocument=t=void 0===e?St.document:e,this.dA="http://www.w3.org/2000/svg",void 0!==t&&(this.Oa=this.Ud("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.hs=null,this.context=new Ki(this,i)}function Ki(t,e){this.Hv=t,this.svg=t.Oa,this.stack=[],this.nh=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.Il=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Vg=this.Br=this.Ar=0,this.yd=this.ad=null,this.path=[],this.Yl={},this.Ct=!1,this.Yg=null,this.uj=0,this.rb=new Sr,this.j=Uu(this),this.Mj=Uu(this,"gojs-diagram"),this.Hl=this.ti=null;var i=Ho++,n=this.Ud("clipPath",{id:"mainClip"+i});n.appendChild(this.Ud("rect",{x:0,y:0,width:t.width,height:t.height})),this.xw=n,this.svg.appendChild(this.j),this.j.appendChild(this.Mj),this.svg.appendChild(n),this.j.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.fA={},this.isTemporary=!!e,this.filter="",this.ak=null}function Wm(t,e,i,n,s,o,l){void 0===t.Mj?hh(t,e,i,n,s,o,l):t.Mj.setAttribute("transform","matrix("+e+", "+i+", "+n+", "+s+", "+o+", "+l+")")}function Um(t,e,i,n,s,o,l,u,c){n=u/n,s=c/s,0===o&&0===l||t.rb.translate(o,l),1===n&&1===s||t.rb.scale(n,s),0===e&&0===i||t.rb.translate(-e,-i)}function Km(t){return"matrix("+(t=t.rb.ha)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function _a(t,e,i,n){"fill"===e?Ef(t,i):"stroke"===e&&Zm(t,i),null!==n&&(i.transform="matrix("+(t=n.ha)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")")}function Ef(t,e){t.fillStyle instanceof ea?e.fill=jf(t,t.fillStyle,!0):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle}function _m(t,e,i){i=i?"fill":"stroke",t.fillStyle instanceof ea?e.setAttributeNS(null,"fill",jf(t,t.fillStyle,!0)):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.setAttributeNS(null,i,"rgb("+t[1]+","+t[2]+","+t[3]+")"),e.setAttributeNS(null,i+"-opacity",t[4])):e.setAttributeNS(null,i,t.fillStyle)}function Zm(t,e){if(t.strokeStyle instanceof ea)e.stroke=jf(t,t.strokeStyle,!1);else if(/^rgba\(/.test(t.strokeStyle)){var i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle);e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]}else e.stroke=t.strokeStyle;e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit,t.Ct&&(e["stroke-dasharray"]=t.Yg.toString(),e["stroke-dashoffset"]=t.uj)}function jf(t,e,i){var n="";if(null!==(n=null!==t.Hl?t.Hl.getAttribute(i?"fill":"stroke"):null)&&-1!==n.indexOf("GRAD")?(n=n.split("#")[1].slice(0,-1),null!==(i=t.svg.getElementById(n))&&i.remove()):n="GRAD"+Ho++,"linear"===e.type)i=t.Ud("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.Ud("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var s=e.hx;e=s.length;for(var o=[],l=0;l<e;l++){var u=s[l],c=u.color;u={offset:u.offset,"stop-color":c},/^rgba\(/.test(c)&&(c=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(c),u["stop-color"]="rgb("+c[1]+","+c[2]+","+c[3]+")",u["stop-opacity"]=c[4]),o.push(u)}for(o.sort(function(p,m){return p.offset>m.offset?1:-1}),s=0;s<e;s++)i.appendChild(t.Ud("stop",o[s]));return t.svg.appendChild(i),"url(#"+n+")"}function hh(t,e,i,n,s,o,l){var u=new Sr;u.ha=[e,i,n,s,o,l],_a(t,"g",e={},u),u=t.addElement("g",e),t.nh.push(u)}function Uu(t,e){var i={};return e&&(i.class=e),e=t.addElement("g",i),t.nh.push(e),e}function As(t){t.Il=!1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Ks(t){t.Il=!0,t.shadowOffsetX=t.Ar,t.shadowOffsetY=t.Br,t.shadowBlur=t.Vg}function Ku(t,e){null!==(e=e.getAttribute("fill"))&&1!==(e=e.split("#")).length&&null!==(e=t.svg.getElementById(e[1].slice(0,-1)))&&1===t.svg.innerHTML.match(new RegExp(e.id,"g")).length&&e.remove()}function Cn(t,e,i,n){this.ownerDocument=e=void 0===e?St.document:e,this.hs=null,(e=e.createElement("canvas")).tabIndex=0,this.Oa=e,this.context=new kr(e,i,n),e.H=t}function kr(t,e,i){this.Z=t.getContext?t.getContext("2d",e):null,null===this.Z&&Q("Browser does not support HTML Canvas Element"),this.ct=this.et=this.dt="",this.Hm=!1,this.Vg=this.Br=this.Ar=0,this.Il=!1,this.El=new Ot,this.isTemporary=!!i}yt.className="GraphObject",Ka=new kt,xo("Button",function(){function t(i,n){return null!==i.diagram.jc(i.documentPoint,function(s){for(;null!==s.panel&&!s.isActionable;)s=s.panel;return s},function(s){return s===n})}var e=mn(nt,nt.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof nt){var s=i.fb("ButtonBorder");null!==s&&(s.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},mn(Pt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new f(0,0,2.76142374915397,2.761423749153969),spot2:new f(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.If()&&n instanceof nt&&(i=n.fb("ButtonBorder"))instanceof Pt){var s=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=s,s=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=s}},e.mouseLeave=function(i,n){n.If()&&n instanceof nt&&(i=n.fb("ButtonBorder"))instanceof Pt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal)},e.actionDown=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed&&0===i.button){var s=n.fb("ButtonBorder");if(s instanceof Pt){var o=(i=i.diagram).skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=s.fill,s.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=s.stroke,s.stroke=l,i.skipsUndoManager=o}}},e.actionUp=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed&&0===i.button){var s=n.fb("ButtonBorder");if(s instanceof Pt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(s.fill=n._buttonFillOver,s.stroke=n._buttonStrokeOver):(s.fill=n._buttonFillNormal,s.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed){var s=n.fb("ButtonBorder");if(s instanceof Pt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(s.fill=n._buttonFillOver,s.stroke=n._buttonStrokeOver):(s.fill=n._buttonFillNormal,s.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed){var s=i.diagram;if(0===s.firstInput.button&&(s.currentTool.standardMouseOver(),t(i,n)&&(i=n.fb("ButtonBorder"))instanceof Pt)){var o=s.skipsUndoManager;s.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),i.stroke!==(l=n._buttonStrokePressed)&&(i.stroke=l),s.skipsUndoManager=o}}},e}),xo("TreeExpanderButton",function(){var t=mn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},mn(Pt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:lo},new Ae("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).cp()),{visible:!1},new Ae("visible","isTreeLeaf",function(e){return!e}).cp());return t.click=function(e,i){if((i=i.part)instanceof Bt&&(i=i.adornedPart),i instanceof ct){var n=i.diagram;if(null!==n){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),xo("SubGraphExpanderButton",function(){var t=mn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},mn(Pt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:lo},new Ae("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).cp()));return t.click=function(e,i){if((i=i.part)instanceof Bt&&(i=i.adornedPart),i instanceof At){var n=i.diagram;if(null!==n){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),xo("ToolTip",function(){return mn(Bt,nt.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new z(0,3),shadowBlur:5},mn(Pt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new f(0,0,4,6),spot2:new f(1,1,-4,-4)}))}),xo("ContextMenu",function(){return mn(Bt,nt.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new z(0,3),shadowBlur:5},new Ae("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),xo("ContextMenuButton",function(){var t=mn("Button");t.stretch=ri;var e=t.fb("ButtonBorder");return e instanceof Pt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new f(0,0,2,3),e.spot2=new f(1,1,-2,-2)),t}),xo("PanelExpanderButton",function(t){var e=Wu(t,"COLLAPSIBLE"),i=mn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},mn(Pt,{name:"ButtonIcon",strokeWidth:2},new Ae("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).cp(e)));return(t=i.fb("ButtonBorder"))instanceof Pt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,s){var o=s.diagram;if(null!==o&&!o.isReadOnly){var l=s.ih();null===l&&(l=s.part),null!==l&&null!==(s=l.fb(e))&&(n.handled=!0,o.Ea("Collapse/Expand Panel"),s.visible=!s.visible,o.eb("Collapse/Expand Panel"))}},i}),xo("CheckBoxButton",function(t){var e=Wu(t);return(t=mn("Button",{desiredSize:new Mt(14,14)},mn(Pt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ce,geometryStretch:ds,visible:!1},""!==e?new Ae("visible",e).Lx():[]))).click=function(i,n){if(n instanceof nt){var s=i.diagram;if(!(null===s||s.isReadOnly||""!==e&&s.model.isReadOnly)){i.handled=!0;var o=n.fb("ButtonIcon");s.Ea("checkbox"),o.visible=!o.visible,"function"==typeof n._doClick&&n._doClick(i,n),s.eb("checkbox")}}},t}),xo("CheckBox",function(t){t=mn("CheckBoxButton",t=Wu(t),{name:"Button",isActionable:!1,margin:new Gt(0,1,0,0)});var e=mn(nt,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:new Gt(1),_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),yt.None=Se=new ut(yt,"None",0),yt.Default=zn=new ut(yt,"Default",0),yt.Vertical=di=new ut(yt,"Vertical",4),yt.Horizontal=ri=new ut(yt,"Horizontal",5),yt.Fill=Ce=new ut(yt,"Fill",3),yt.Uniform=ds=new ut(yt,"Uniform",1),yt.UniformToFill=nh=new ut(yt,"UniformToFill",2),yt.FlipVertical=sh=new ut(yt,"FlipVertical",1),yt.FlipHorizontal=oh=new ut(yt,"FlipHorizontal",2),yt.FlipBoth=rh=new ut(yt,"FlipBoth",3),yt.make=mn,yt.getBuilders=function(){var e,t=new kt;for(e in Ka)if(e!==e.toLowerCase()){var i=Ka.I(e);"function"==typeof i&&t.add(e,i)}return t.freeze(),t},yt.defineBuilder=xo,yt.build=function(t,e,i){for(var n=[],s=2;s<arguments.length;++s)n[s-2]=arguments[s];if("function"==typeof(s=Ka.I(t))&&(n=s([t].concat(n)))instanceof yt)return e&&n.set(e),n;Q('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},yt.takeBuilderArgument=Wu,ta.prototype.copy=function(){var t=new ta;return t.xa=this.xa,t.zp=this.zp,t.te=this.te,t.nb=this.nb,t.j=this.j,t.zh=this.zh,t.Fh=this.Fh,t.Bh=this.Bh,t.Mh=this.Mh,t.Ph=this.Ph,t.Qh=this.Qh,t.Oh=this.Oh,t.Nh=this.Nh,t.Of=this.Of,t.Xd=this.Xd,t.Lh=this.Lh,t.V=this.V,t.ia=this.ia,t.Ha=this.Ha,t.F=this.F,t.$h=this.$h,t.Ch=this.Ch,t.Ib=this.Ib,t.Di=this.Di,t.hb=this.hb,t.u=this.u.J(),t.o=this.o.J(),t.hg=this.hg,t.Bi=this.Bi,t.ob=this.ob,t.Pf=this.Pf,t.gd=this.gd,t.Ci=this.Ci,t.Pc=this.Pc,t.Oc=this.Oc,t},Uo.prototype.copy=function(){var t=new Uo;return t.u=this.u,t.o=this.o,t.F=this.F.J(),t.rr=this.rr,t.V=this.V,t.j=this.j,t},Uo.className="LinkElementSettings",lh.prototype.copy=function(){var t=new lh;return t.Xi=this.Xi.J(),t.yj=this.yj.J(),t.Vi=this.Vi,t.wj=this.wj,t.Wi=this.Wi,t.xj=this.xj,t.hq=this.hq,t.Tr=this.Tr,t.iq=this.iq,t.Ur=this.Ur,t},lh.className="LinkSettings",Sr.prototype.copy=function(){var t=new Sr;return t.ha[0]=this.ha[0],t.ha[1]=this.ha[1],t.ha[2]=this.ha[2],t.ha[3]=this.ha[3],t.ha[4]=this.ha[4],t.ha[5]=this.ha[5],t},Sr.prototype.translate=function(t,e){this.ha[4]+=this.ha[0]*t+this.ha[2]*e,this.ha[5]+=this.ha[1]*t+this.ha[3]*e},Sr.prototype.scale=function(t,e){this.ha[0]*=t,this.ha[1]*=t,this.ha[2]*=e,this.ha[3]*=e},Sr.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0!==t){if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var s=this.ha[1]*t+this.ha[3]*n,o=this.ha[0]*-n+this.ha[2]*t,l=this.ha[1]*-n+this.ha[3]*t;this.ha[0]=this.ha[0]*t+this.ha[2]*n,this.ha[1]=s,this.ha[2]=o,this.ha[3]=l,this.translate(-e,-i)}},Sr.className="STransform",ea.prototype.addColorStop=function(t,e){this.hx.push({offset:t,color:e})},ea.className="SGradient",fs.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.Oa.setAttributeNS(null,"width",i+"px"),this.Oa.setAttributeNS(null,"height",n+"px"),this.Oa.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.xw.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.xw.firstElementChild.setAttributeNS(null,"height",n+"px"),!0)},fs.prototype.Ud=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.dA,t),le(e))for(var n in e)t.setAttributeNS("href"===n?"http://www.w3.org/1999/xlink":"",n,e[n]);return void 0!==i&&(t.textContent=i),t},fs.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},fs.prototype.focus=function(){this.Oa.focus()},fs.prototype.nx=function(){this.ownerDocument=null},Tt.Object.defineProperties(fs.prototype,{width:{get:function(){return this.Oa.width.baseVal.value},set:function(t){this.Oa.setAttribute("width",t+"px")}},height:{get:function(){return this.Oa.height.baseVal.value},set:function(t){this.Oa.setAttribute("height",t+"px")}},style:{get:function(){return this.Oa.style}}}),fs.className="SVGSurface",(L=Ki.prototype).arc=function(t,e,i,n,s,o,l,u){var c=2*Math.PI,p=c-1e-6,m=i*Math.cos(n),v=i*Math.sin(n),w=t+m,k=e+v,A=o?0:1;n=o?n-s:s-n,(1e-6<Math.abs(l-w)||1e-6<Math.abs(u-k))&&this.path.push(["L",w,+k]),0>n&&(n=n%c+c),n>p?(this.path.push(["A",i,i,0,1,A,t-m,e-v]),this.path.push(["A",i,i,0,1,A,w,k])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),A,t+i*Math.cos(s),e+i*Math.sin(s)])},L.beginPath=function(){this.path=[],this.Yl={stroke:"none",fill:"none"}},L.Se=function(t){this.addPath(this.path,this.rb,t||0)},L.bezierCurveTo=function(t,e,i,n,s,o){this.path.push(["C",t,e,i,n,s,o])},L.clearRect=function(){},L.clip=function(){this.Yl.clipPath=!0},L.closePath=function(){this.path.push(["z"])},L.createLinearGradient=function(t,e,i,n){var s=new ea("linear");return s.x1=t,s.y1=e,s.x2=i,s.y2=n,s},L.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.fA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+Ho++,s={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Ud("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"})).appendChild(this.Ud(Ha,s)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},L.createRadialGradient=function(t,e,i,n,s,o){var l=new ea("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=s,l.r2=o,l},L.drawImage=function(t,e,i,n,s,o,l,u,c){var p="";t instanceof HTMLCanvasElement&&(p=t.toDataURL()),t instanceof HTMLImageElement&&(p=t.getAttribute("src"));var m=t instanceof HTMLImageElement?t.naturalWidth:t.width;t=t instanceof HTMLImageElement?t.naturalHeight:t.height,void 0===n&&(o=e,l=i,u=n=m,c=s=t),Um(this,e,i,n=n||0,s=s||0,o||0,l||0,u=u||0,c=c||0),o={x:0,y:0,width:m||n,height:t||s,href:p},_.$(n,u)&&_.$(s,c)?-1===p.toLowerCase().indexOf(".svg")&&-1===p.toLowerCase().indexOf("data:image/svg")&&(o.preserveAspectRatio="xMidYMid slice"):o.preserveAspectRatio="none",(0!==e||0!==i||n!==m||s!==t)&&(o["clip-path"]="path('M "+e+","+i+" L "+(n+=e)+" "+i+" L "+n+" "+(s+=i)+" L "+e+" "+s+" z')"),_a(this,Ha,o,this.rb),this.addElement(Ha,o)},L.fill=function(t){t&&(this.Yl["fill-rule"]="evenodd"),Ef(this,this.Yl)},L.ng=function(t,e){this.clipInsteadOfFill?this.clip():this.fill(e)},L.fillRect=function(t,e,i,n){_a(this,"fill",t={x:(t=[t,e,i,n])[0],y:t[1],width:t[2],height:t[3]},this.rb),this.addElement("rect",t)},L.px=function(t,e,i,n){_a(this,"fill",t={x:t,y:e,width:i,height:n},this.rb),Ef(this,t),this.svg.prepend(this.Ud("rect",t))},L.fillText=function(t,e,i){t=[t,e,i],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),_a(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.rb),this.addElement("text",e,t[0])},L.lineTo=function(t,e){this.path.push(["L",t,e])},L.moveTo=function(t,e){this.path.push(["M",t,e])},L.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},L.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},L.restore=function(){this.rb=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.ak=t.ak},L.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,ak:this.ak});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.rb.copy())},L.setTransform=function(t,e,i,n,s,o){1===t&&0===e&&0===i&&1===n&&0===s&&0===o||hh(this,t,e,i,n,s,o)},L.scale=function(t,e){this.rb.scale(t,e)},L.translate=function(t,e){this.rb.translate(t,e)},L.transform=function(){},L.yc=function(){},L.stroke=function(){Zm(this,this.Yl)},L.ik=function(){this.clipInsteadOfFill||this.stroke()},L.Ud=function(t,e,i){return this.Hv.Ud(t,e,i)},L.addElement=function(t,e,i){return t=this.Ud(t,e,i),null!==this.yd?this.yd.appendChild(t):this.yd=t,this.ad=t},L.addPath=function(t,e,i){for(var n=[],s=0;s<t.length;s++){var o=Ro(t[s]),l=[o.shift()];if("A"===l[0])l.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)l.push(o.shift()+","+o.shift());n.push(l.join(" "))}if(n=n.join(" "),(t=this.Yl).clipPath)0<this.nh.length&&this.nh[this.nh.length-1].setAttributeNS(null,"clip-path",'path("'+n+'")');else if(t.d=n,_a(this,"",t,e),null!==this.Hl)if("g"!==(e=this.Hl).nodeName)for(var u in t)"transform"!==u&&e.setAttributeNS(null,u,t[u]);else for(var c in u=e.getElementsByTagName("path"),t)"transform"!==c&&u[i].setAttributeNS(null,c,t[c]);else this.addElement("path",t)},L.Fv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},L.js=function(t,e){this.Ct=!0,this.Yg=t,this.uj=e},L.fs=function(){this.Ct=!1},L.Vc=function(){},L.Xx=function(){},Ki.prototype.rotate=function(t){this.rb.rotate(57.2958*t,0,0)},Ki.prototype.getImageData=function(){return null},Ki.prototype.measureText=function(){return null},Ki.prototype.Hs=function(t){null!==t.svg&&t.svg.parentNode===this.Mj&&t.svg.remove()},Ki.className="SVGContext",$.prototype.makeSvg=$.prototype.Cs=function(t){this.pj.contains("SVG")||this.bs("SVG",new fs(this,St.document));var e=new fs(this,St.document,!0);void 0===t&&(t=new Wi);var i=this;return Cm(this,function(n,s){return n=null!==(n=Am(i,n,"SVG",e))?n.svg:null,"function"==typeof s?(s(n),null):n},t)},$.prototype.makeSVG=$.prototype.bv=function(t){return this.Cs(t)},Cn.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0)},Cn.prototype.toDataURL=function(t,e){return this.Oa.toDataURL(t,e)},Cn.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},Cn.prototype.focus=function(){this.Oa.focus()},Cn.prototype.nx=function(){this.ownerDocument=this.Oa.H=null},Tt.Object.defineProperties(Cn.prototype,{width:{get:function(){return this.Oa.width},set:function(t){this.Oa.width=t}},height:{get:function(){return this.Oa.height},set:function(t){this.Oa.height=t}},style:{get:function(){return this.Oa.style}}}),Cn.className="CanvasSurface",(L=kr.prototype).Xx=function(t){this.Z.imageSmoothingEnabled=t},L.arc=function(t,e,i,n,s,o){this.Z.arc(t,e,i,n,s,o)},L.beginPath=function(){this.Z.beginPath()},L.Se=function(){},L.bezierCurveTo=function(t,e,i,n,s,o){this.Z.bezierCurveTo(t,e,i,n,s,o)},L.clearRect=function(t,e,i,n){this.yc(),this.Z.clearRect(t,e,i,n)},L.clip=function(){this.Z.clip()},L.closePath=function(){this.Z.closePath()},L.createLinearGradient=function(t,e,i,n){return this.Z.createLinearGradient(t,e,i,n)},L.createPattern=function(t,e){return this.Z.createPattern(t,e)},L.createRadialGradient=function(t,e,i,n,s,o){return this.Z.createRadialGradient(t,e,i,n,s,o)},L.drawImage=function(t,e,i,n,s,o,l,u,c){void 0===n?this.Z.drawImage(t,e,i):this.Z.drawImage(t,e,i,n,s,o,l,u,c)},L.fill=function(t){this.Z.fill(t?"evenodd":"nonzero")},L.fillRect=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},L.px=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},L.fillText=function(t,e,i){this.Z.fillText(t,e,i)},L.getImageData=function(t,e,i,n){return this.Z.getImageData(t,e,i,n)},L.lineTo=function(t,e){this.Z.lineTo(t,e)},L.measureText=function(t){return this.Z.measureText(t)},L.moveTo=function(t,e){this.Z.moveTo(t,e)},L.quadraticCurveTo=function(t,e,i,n){this.Z.quadraticCurveTo(t,e,i,n)},L.rect=function(t,e,i,n){this.Z.rect(t,e,i,n)},L.restore=function(){this.Z.restore()},L.save=function(){this.yc(),this.Z.save()},kr.prototype.rotate=function(t){this.El.rotate(57.2958*t,0,0)},(L=kr.prototype).setTransform=function(t,e,i,n,s,o){this.El.setTransform(t,e,i,n,s,o)},L.scale=function(t,e){this.El.scale(t,e)},L.translate=function(t,e){this.El.translate(t,e)},L.stroke=function(){this.Z.stroke()},L.transform=function(t,e,i,n,s,o){if(1!==t||0!==e||0!==i||1!==n||0!==s||0!==o){var l=this.El,u=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*s+l.m21*o+l.dx,l.dy=l.m12*s+l.m22*o+l.dy,l.m11=u,l.m12=t,l.m21=e,l.m22=i}},L.yc=function(){var t=this.El;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},L.ng=function(t,e){if(t instanceof Wt&&t.type===yn){var i=t.xk;(t=t.ft)>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.Hm?this.clip():this.fill(e),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.Hm?this.clip():this.fill(e)},L.ik=function(){this.Hm||this.stroke()},L.Fv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},L.js=function(t,e){var i=this.Z;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)},L.fs=function(){var t=this.Z;void 0!==t.setLineDash&&(t.setLineDash(X0),t.lineDashOffset=0)},L.Vc=function(t){t&&(this.dt=""),this.ct=this.et=""},L.Hs=function(){},Tt.Object.defineProperties(kr.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.ct!==t&&(this.ct=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.dt!==t&&(this.dt=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.et!==t&&(this.et=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},filter:{get:function(){return this.Z.filter},set:function(t){this.Z.filter=""===t?"none":t}},clipInsteadOfFill:{get:function(){return this.Hm},set:function(t){this.Hm=t}}});var X0=Object.freeze([]);function uh(){this.F=this.o=this.u=this.j=0}function Wt(t,e){Qa||(Xf(),Qa=!0),Ye(this),this._isFrozen=!1,void 0===t?(this.na=wo,this.wk="black"):"string"==typeof t?(this.na=wo,this.wk=t):(this.na=t,this.wk="black"),(t=this.na)===Zs?(this.Qd=x,this.Kk=O):this.Kk=this.Qd=t===yn?C:g,this.Gr=0,this.Xp=NaN,this.xe=this.cr=this.we=null,this.ft=this.xk=0,e&&Object.assign(this,e)}function Jm(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?tl:i,_s(t),Ja(e,i)}function $m(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?tl:i,_s(t),Ja(-e,i)}function Df(t,e,i){_s(t),t=ee.j;var n=ee.u,s=ee.o,o=ee.F;return _s(e),void 0===i&&(i=.5),"rgba("+Math.round((ee.j-t)*i+t)+", "+Math.round((ee.u-n)*i+n)+", "+Math.round((ee.o-s)*i+s)+", "+Math.round((ee.F-o)*i+o)+")"}function Za(t){return!!t&&(t instanceof Wt?t.Hx():(_s(t),128>(299*ee.j+587*ee.u+114*ee.o)/1e3))}function Ja(t,e){switch(e){case tl:e=100*Bf(ee.j);var i=100*Bf(ee.u),n=100*Bf(ee.o);return ki.j=.4124564*e+.3575761*i+.1804375*n,ki.u=.2126729*e+.7151522*i+.072175*n,ki.o=.0193339*e+.119192*i+.9503041*n,ki.F=ee.F,e=Yf(ki.j/$a[0]),i=Yf(ki.u/$a[1]),n=Yf(ki.o/$a[2]),Ps.j=116*i-16,Ps.u=500*(e-i),Ps.o=200*(i-n),Ps.F=ki.F,Ps.j=Math.min(100,Math.max(0,Ps.j+100*t)),e=(t=(Ps.j+16)/116)-Ps.o/200,ki.j=$a[0]*Qm(Ps.u/500+t),ki.u=$a[1]*(Ps.j>_u*Hf?Math.pow(t,3):Ps.j/_u),ki.o=$a[2]*Qm(e),ki.F=Ps.F,t=-.969266*ki.j+1.8760108*ki.u+.041556*ki.o,e=.0556434*ki.j+-.2040259*ki.u+1.0572252*ki.o,ee.j=255*Rf((3.2404542*ki.j+-1.5371385*ki.u+-.4985314*ki.o)/100),ee.u=255*Rf(t/100),ee.o=255*Rf(e/100),ee.F=ki.F,ee.j=Math.round(ee.j),255<ee.j?ee.j=255:0>ee.j&&(ee.j=0),ee.u=Math.round(ee.u),255<ee.u?ee.u=255:0>ee.u&&(ee.u=0),ee.o=Math.round(ee.o),255<ee.o?ee.o=255:0>ee.o&&(ee.o=0),"rgba("+ee.j+", "+ee.u+", "+ee.o+", "+ee.F+")";case qm:return zf(),on.o=Math.min(100,Math.max(0,on.o+100*t)),"hsla("+on.j+", "+on.u+"%, "+on.o+"%, "+on.F+")";default:Q("Unknown color space: "+e)}}function _s(t){Qa||(Xf(),Qa=!0);var e=Vf;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,ee.j=t[0],ee.u=t[1],ee.o=t[2],ee.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,ee.j=0,ee.u=0,ee.o=0,ee.F=1)}}function zf(){var t=ee.j/255,e=ee.u/255,i=ee.o/255,n=Math.max(t,e,i),s=Math.min(t,e,i),o=n-s;if(s=(n+s)/2,0===o)var l=t=0;else{switch(n){case t:l=(e-i)/o%6;break;case e:l=(i-t)/o+2;break;case i:l=(t-e)/o+4}0>(l*=60)&&(l+=360),t=o/(1-Math.abs(2*s-1))}on.j=Math.round(l),on.u=Math.round(100*t),on.o=Math.round(100*s),on.F=ee.F}function Bf(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Rf(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Yf(t){return t>Hf?Math.pow(t,1/3):(_u*t+16)/116}function Qm(t){var e=t*t*t;return e>Hf?e:(116*t-16)/_u}function ia(t,e){"string"!=typeof t&&(t instanceof Wt||Q("Value for "+e+" must be a color string or a Brush, not "+t))}function Xf(){Vf=Dn?new Cn(null,void 0,{willReadFrequently:!0}).context:null}kr.className="CanvasSurfaceContext",uh.className="ColorNumbers",Wt.prototype.copy=function(){var t=new Wt;return t.na=this.na,t.wk=this.wk,t.Qd=this.Qd.J(),t.Kk=this.Kk.J(),t.Gr=this.Gr,t.Xp=this.Xp,null!==this.we&&(t.we=this.we.copy()),t.cr=this.cr,t},(L=Wt.prototype).freeze=function(){return this._isFrozen=!0,null!==this.we&&this.we.freeze(),this},L.ka=function(){return Object.isFrozen(this)&&Q("cannot thaw constant: "+this),this._isFrozen=!1,null!==this.we&&this.we.ka(),this},L.qb=function(t){t.classType===Wt&&(this.type=t)},L.toString=function(){var t="Brush(";if(this.type===wo)t+=this.color;else if(t=this.type===Zs?t+"Linear ":this.type===yn?t+"Radial ":this.type===qa?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},L.addColorStop=function(t,e){return this._isFrozen&&Lt(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&ie(t,"0 <= loc <= 1",Wt,"addColorStop:loc"),null===this.we&&(this.we=new kt),this.we.add(t,e),this.na===wo&&(this.type=Zs),this.xe=null,this},L.Wz=function(t,e){if(this._isFrozen&&Lt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?tl:e,this.type===wo)_s(this.color),this.color=Ja(t,e);else if((this.type===Zs||this.type===yn)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)_s(i.value),this.addColorStop(i.key,Ja(t,e));return this},L.Xy=function(t,e){if(this._isFrozen&&Lt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?tl:e,this.type===wo)_s(this.color),this.color=Ja(-t,e);else if((this.type===Zs||this.type===yn)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)_s(i.value),this.addColorStop(i.key,Ja(-t,e));return this},L.Hx=function(){if(this.type===wo)return Za(this.color);if((this.type===Zs||this.type===yn)&&null!==this.colorStops){var t=this.colorStops;if(this.type===yn)return Za(t.first().value);if(null!==t.get(.5))return Za(t.get(.5));if(2===t.count)return Za(Df((t=t.Fa())[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,s=1,o=1;e.next();){var l=e.key,u=Math.abs(.5-e.key);s>o&&u<s?(i=l,s=u):o>=s&&u<o&&(n=l,o=u)}return i>n&&(o=i,i=n,n=o,o=s),s=n-i,Za(Df(t.get(i),t.get(n),1-o/s))}return!1},Tt.Object.defineProperties(Wt.prototype,{type:{get:function(){return this.na},set:function(t){this._isFrozen&&Lt(this,t),this.na=t,this.start.Mc()&&(t===Zs?this.start=x:t===yn&&(this.start=C)),this.end.Mc()&&(t===Zs?this.end=O:t===yn&&(this.end=C)),this.xe=null}},color:{get:function(){return this.wk},set:function(t){this._isFrozen&&Lt(this,t),this.wk=t,this.xe=null}},start:{get:function(){return this.Qd},set:function(t){this._isFrozen&&Lt(this,t),this.Qd=t.J(),this.xe=null}},end:{get:function(){return this.Kk},set:function(t){this._isFrozen&&Lt(this,t),this.Kk=t.J(),this.xe=null}},startRadius:{get:function(){return this.Gr},set:function(t){this._isFrozen&&Lt(this,t),0>t&&ie(t,">= zero",Wt,"startRadius"),this.Gr=t,this.xe=null}},endRadius:{get:function(){return this.Xp},set:function(t){this._isFrozen&&Lt(this,t),0>t&&ie(t,">= zero",Wt,"endRadius"),this.Xp=t,this.xe=null}},colorStops:{get:function(){return this.we},set:function(t){this._isFrozen&&Lt(this,t),this.we=t,this.xe=null}},pattern:{get:function(){return this.cr},set:function(t){this._isFrozen&&Lt(this,t),this.cr=t,this.xe=null}}}),Wt.prototype.isDark=Wt.prototype.Hx,Wt.prototype.darkenBy=Wt.prototype.Xy,Wt.prototype.lightenBy=Wt.prototype.Wz,Wt.prototype.addColorStop=Wt.prototype.addColorStop;var wo,Zs,yn,qa,tl,qm,Hf=216/24389,_u=24389/27,$a=[95.047,100,108.883],Vf=null,ee=new uh,on=new uh,ki=new uh,Ps=new uh,Qa=!1;function je(){this.xa="Base"}function Zu(){this.xa="Base"}function Ju(){this.xa="Base"}function $u(){this.xa="Base"}function Qu(){this.xa="Base"}function Gf(t,e,i){var n=null;if(t instanceof nt&&""!==t.$e&&(n=t.fb(t.$e))===t&&(n=null),null!==n)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.pp(e),n=n.panel}function qu(){this.xa="Base"}function tc(){this.xa="Base",this.name="Table"}function ec(){this.xa="Base"}function ic(){this.xa="Base"}function nc(){this.xa="Base"}function ch(){this.xa="Base"}function sc(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var s=0;s<e;s++)if(t%n[s]===i)return!1;return!0}function oc(){this.xa="Base"}function ty(t,e,i,n){if(!1!==vo(n)){var s=n.strokeWidth;0===s&&t instanceof Bt&&t.type===nt.Link&&t.adornedObject instanceof Pt&&(s=t.adornedObject.strokeWidth),s*=n.Ca,t instanceof st&&null!==t.ua?n.Ge((t=t.geometry.bounds).x-s/2,t.y-s/2,t.width+s,t.height+s):t instanceof Bt&&null!==t.adornedPart.ua?n.Ge((t=t.adornedPart.ua.bounds).x-s/2,t.y-s/2,t.width+s,t.height+s):n.Ge(-s/2,-s/2,e+s,i+s),(s=n.desiredSize).w()||null===n.ua?n.ec.h(0,0,s.width,s.height):n.ec.assign(n.ua.bounds),gn(n,!1)}}function dh(){this.xa="Base"}function nt(t,e){if(yt.call(this),this.na=null,void 0===t)this.na=nt.Position;else if("string"==typeof t){var i=Rn.I(t);null!==i&&(this.na=i)}else t instanceof je?this.na=t:t&&(this.na=nt.Position,e=t);null===this.na&&Q("Panel type not specified or PanelLayout not loaded: "+t),this.l=4194304|this.l|(this.na===nt.Grid?1048576:0),this.O=new dt,this.zb=a,this.Tm=Nt,this.Uf=zn,this.$g=null,this.$e="",this.jg=new q(NaN,NaN,NaN,NaN),this.U=this.F=null,this.xo=ds,this.jn=Rl,this.kn=_n,this.ub=this.ra=null,this.zn=NaN,this.ge=this.Hh=null,e&&Object.assign(this,e)}function Wf(t,e){e.lineCap="butt";var i=0<t.rowCount?t.rowDefs:null,n=0<t.columnCount?t.colDefs:null;null!==i&&rc(t,e,!0,i,!0),null!==n&&rc(t,e,!1,n,!0),null!==i&&ey(t,e,!0,i),null!==n&&ey(t,e,!1,n),null!==i&&rc(t,e,!0,i,!1),null!==n&&rc(t,e,!1,n,!1)}function ey(t,e,i,n){for(var s=n.length,o=t.actualBounds,l=t.naturalBounds,u=!0,c=0;c<s;c++){var p=n[c];if(void 0!==p&&0!==p.actual)if(u)u=!1;else{if(i){if(p.position>l.height)continue}else if(p.position>l.width)continue;var m=p.separatorStrokeWidth;isNaN(m)&&(m=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var v=p.separatorStroke;if(null===v&&(v=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),0!==m&&null!==v){sn(t,e,v,!1,!1,l,o),v=!1;var w=p.separatorDashArray;null===w&&(w=i?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),null!==w&&(v=!0,e.js(w,0)),e.beginPath(),w=p.position+m,i?w>l.height&&(m-=w-l.height):w>l.width&&(m-=w-l.width),p=p.position+m/2,e.lineWidth=m,m=t.zb,i?(w=l.width-m.right,e.moveTo(m.left,p+=m.top),e.lineTo(w,p)):(w=l.height-m.bottom,e.moveTo(p+=m.left,m.top),e.lineTo(p,w)),e.stroke(),e.Se(),v&&e.fs()}}}}function rc(t,e,i,n,s){for(var o=n.length,l=t.actualBounds,u=t.naturalBounds,c=iy(t,!0),p=iy(t,!1),m=0;m<o;m++){var v=n[m];if(void 0!==v&&null!==v.background&&v.coversSeparators!==s&&0!==v.actual){var w=i?l.height:l.width;if(!(v.position>w)){var k=v.Wc(),A=v.separatorStrokeWidth;isNaN(A)&&(A=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var T=v.separatorStroke;null===T&&(T=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(null===T||v.index===(i?c:p))&&(A=0),k-=A,(A=v.position+A)+(k+=v.actual)>w&&(k=w-A),0>=k||(w=t.zb,sn(t,e,v.background,!0,!1,u,l),i?e.fillRect(w.left,A+w.top,l.width-(w.left+w.right),k):e.fillRect(A+w.left,w.top,k,l.height-(w.top+w.bottom)))}}}}function iy(t,e){for(var i=e?t.rowCount:t.columnCount,n=0;n<i;n++){var s=e?t.rowDefs[n]:t.colDefs[n];if(void 0!==s)return s.index}return 0}function Uf(t){return"LineV"===t||"BarV"===t}function Js(t){return null!==t.part?t.part.locationObject:null}function Mr(t,e){ny(t,t,e)}function ny(t,e,i){i(e);for(var n=(e=e.O.s).length,s=0;s<n;s++){var o=e[s];o instanceof nt&&ny(t,o,i)}}function H0(t,e){sy(t,t,e)}function sy(t,e,i){if(i(e),e instanceof nt)for(var n=(e=e.O.s).length,s=0;s<n;s++)sy(t,e[s],i)}function oy(t,e,i){if(i(e))return e;if(e instanceof nt)for(var n=(e=e.O.s).length,s=0;s<n;s++){var o=oy(t,e[s],i);if(null!==o)return o}return null}function ry(t){for(var e=(t=t.O.s).length,i=0,n=0;n<e;n++){var s=t[n];s instanceof nt?i=Math.max(i,ry(s)):s instanceof Pt&&(i=Math.max(i,s.ig/2*s.strokeMiterLimit*s.Df()))}return i}function bo(t){return t.type===nt.TableRow||t.type===nt.TableColumn}function Kf(t,e,i,n){for(var s=t.O.s,o=s.length;o--;){var l=s[o];if(l.visible){var u=l.actualBounds,c=t.naturalBounds;u.x>c.width||u.y>c.height||0>u.x+u.width||0>u.y+u.height||(l instanceof nt&&Kf(l,e,i,n),null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||n.add(l))}}}function _f(t){var e=null;return t instanceof Pt&&((e=t.spot1)===Nt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=y),e}function Zf(t){var e=null;return t instanceof Pt&&((e=t.spot2)===Nt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=D),e}function Jf(t,e){t.l=e?16777216|t.l:-16777217&t.l}function ay(t,e,i){var n=t.rowDefs;if(!(0>e)){if(n[e]=i instanceof Fe?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.v()}}function ly(t,e,i){var n=t.colDefs;if(!(0>e)){if(n[e]=i instanceof Fe?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.v()}}function hy(t){return null!==(t=t.allBindings)&&t._isFrozen}function An(t){var e=t.allBindings;if(null===e)null!==t.data&&Q("Template cannot have .data be non-null: "+t),t.allBindings=e=new dt;else if(e._isFrozen)return;var i=new dt;Jf(t,!1),t.qm(t,function(p,m){m.th();var v=m.localBindings;if(null!==v)for(If(m,!1),v=v.iterator;v.next();){var w=v.value;w.mode===jh&&If(m,!0);var k=w.sourceName;null!==k&&("/"===k&&Jf(p,!0),null!==(k=Mv(w,p,m))&&(i.add(k),null===k.srcBindings&&(k.srcBindings=new dt),k.srcBindings.add(w))),e.add(w)}if(m instanceof nt&&m.type===nt.Table){if(0<m.rowCount)for(v=(p=m.rowDefs).length,w=0;w<v;w++)if(void 0!==(k=p[w])&&null!==k.be)for(var A=k.be.iterator;A.next();){var T=A.value;T.xd=k,T.to=2,T.wl=k.index,e.add(T)}if(0<m.columnCount)for(p=(m=m.colDefs).length,v=0;v<p;v++)if(void 0!==(w=m[v])&&null!==w.be)for(k=w.be.iterator;k.next();)(A=k.value).xd=w,A.to=1,A.wl=w.index,e.add(A)}});for(var n=i.iterator;n.next();){var s=n.value;if(null!==s.srcBindings){If(s,!0);for(var o=s.srcBindings.iterator;o.next();){var l=o.value;null===s.localBindings&&(s.localBindings=new dt),s.localBindings.add(l)}}s.srcBindings=null}for(n=e.iterator;n.next();)if(null!==(o=(s=n.value).xd)){s.xd=null;var u=s.targetProperty,c=u.indexOf(".");0<c&&o instanceof nt&&(l=u.substring(0,c),u=u.substr(c+1),null!==(c=o.fb(l))?(o=c,s.targetProperty=u):Fi('Warning: unable to find GraphObject named "'+l+'" for Binding: '+s.toString())),o instanceof Fe?(l=pi(o.panel),s.Ai=void 0===l?-1:l,o.panel.bindingId=s.Ai):o instanceof yt?(l=pi(o),s.Ai=void 0===l?-1:l,o.bindingId=s.Ai):Q("Unknown type of binding target: "+o)}e.freeze(),t instanceof vt&&t.Zc()&&t.Va()}function fh(t){if(t.type===nt.Spot||t.type===nt.Auto)return Math.min(t.O.length,1);if(t.type===nt.Link){for(var e=(t=t.O).length,i=0;i<e;i++){var n=t.M(i);if(!(n instanceof Pt&&n.isPanelMain))break}return i}return t.type===nt.Table&&0<t.O.length&&(t=t.O.M(0)).isPanelMain&&t instanceof nt&&bo(t)?1:0}function uy(t,e){var i=fh(t);if(null===e||0===e.length)for(;t.O.length>i;)t.qc(t.O.length-1,!1);else if(t.O.length<=i){i=e.length;for(var n=0;n<i;n++)ac(t,e[n],n,!0)}else{n=i;for(var s=0;s<e.length;s++,n++){var o=e[s],l=n<t.O.length?t.O.M(n):null;if(l instanceof nt){if(l.data!==o){var u=Qf(t,l.data),c=Qf(t,o),p=c!==u;p||(u=qf(t,u),p=qf(t,c)!==u),p?(t.qc(n,!1),ac(t,o,s,!1)):l.data=o}}else ac(t,o,s,!1)}for(;n<t.O.length;)t.qc(n,!1);t.$g=null,$f(t,i,0),vo(t)||t.v(),t.graduatedIntervals=null,t.If()||lc(t,t,!1),null!==(e=t.part)&&(e.Rh=null,e.ag=NaN,t.Te&&e instanceof ct&&(e.Te=!0),e.Te&&e instanceof ct&&(e.wc=null))}}function ac(t,e,i,n){if(!(null==e||0>i)){var s=Qf(t,e);if(null!==(s=qf(t,s))){if(An(s),16777216&(s=s.copy()).l){var o=t.ih();null!==o&&Jf(o,!0)}"object"==typeof e&&(null===t.ge&&(t.ge=new kt),t.ge.add(e,s)),o=i+fh(t),t.Hb(o,s),n&&(s.ub=e,$f(t,o,i),s.ub=null),s.data=e}}}function $f(t,e,i){for(t=t.O;e<t.length;){var n=t.M(e);if(n instanceof nt){var s=e,o=i;n.type===nt.TableRow?n.row=s:n.type===nt.TableColumn&&(n.column=s),n.itemIndex=o}e++,i++}}function Qf(t,e){if(null===e)return"";if("function"==typeof(t=t.itemCategoryProperty))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=ke(e,t)}return void 0===t?"":"string"==typeof t?t:void Q("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function qf(t,e){var i=t.itemTemplateMap,n=null;return null!==i&&(n=i.I(e)),null===n&&(null!==i&&(n=i.I("")),null===n&&(cy||(cy=!0,Fi('No item template Panel found for category "'+e+'" on '+t),Fi("  Using default item template."),t=new nt,(e=new qt).bind(new Ae("text","",Vi)),t.add(e),dy=t),n=dy)),n}function lc(t,e,i){var n=e.enabledChanged;if(null!==n&&n(e,i),e instanceof nt){n=(e=e.O.s).length;for(var s=0;s<n;s++){var o=e[s];i&&o instanceof nt&&!o.isEnabled||lc(t,o,i)}}}function ps(t,e){e.name=t,Rn.add(t,e)}Wt.className="Brush",Wt.Solid=wo=new ut(Wt,"Solid",0),Wt.Linear=Zs=new ut(Wt,"Linear",1),Wt.Radial=yn=new ut(Wt,"Radial",2),Wt.Pattern=qa=new ut(Wt,"Pattern",4),Wt.Lab=tl=new ut(Wt,"Lab",5),Wt.HSL=qm=new ut(Wt,"HSL",6),Wt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Wt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;Qa||(Xf(),Qa=!0);var e=Vf;if(null===e)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i||(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Wt.lighten=function(t){return Jm(t)},Wt.lightenBy=Jm,Wt.darken=function(t){return $m(t)},Wt.darkenBy=$m,Wt.mix=Df,Wt.isDark=Za,je.prototype.measure=function(){},je.prototype.Zz=function(t,e,i,n,s){t.measure(e,i,n,s)},je.prototype.arrange=function(){},je.prototype.My=function(t,e,i,n,s,o){t.arrange(e,i,n,s,o)},je.prototype.jA=function(t){t.Tj()},je.prototype.hc=function(){},Tt.Object.defineProperties(je.prototype,{name:{get:function(){return this.xa},set:function(t){this.xa=t}},classType:{get:function(){return nt}}}),je.prototype.remeasureObject=je.prototype.jA,je.prototype.arrangeElement=je.prototype.My,je.prototype.measureElement=je.prototype.Zz,je.className="PanelLayout",Vt(Zu,je),Zu.prototype.measure=function(t,e,i,n,s,o,l){var u=n.length;t=Js(t);for(var c=0;c<u;c++){var p=n[c];if(p.visible||p===t){var m=p.margin,v=m.right+m.left;m=m.top+m.bottom,p.measure(e,i,o,l);var w=p.measuredBounds;v=Math.max(w.width+v,0),m=Math.max(w.height+m,0),w=p.position.x;var k=p.position.y;isFinite(w)||(w=0),isFinite(k)||(k=0),p instanceof Pt&&p.isGeometryPositioned&&(w-=p=p.strokeWidth/2,k-=p),Ze(s,w,k,v,m)}}},Zu.prototype.arrange=function(t,e,i){var n=e.length,s=t.padding;for(t=i.x-s.left,i=i.y-s.top,s=0;s<n;s++){var o=e[s],l=o.measuredBounds,u=o.margin,c=o.position.x,p=o.position.y;if(c=isNaN(c)?-t:c-t,p=isNaN(p)?-i:p-i,o instanceof Pt&&o.isGeometryPositioned){var m=o.strokeWidth/2;c-=m,p-=m}o.visible&&o.arrange(c+u.left,p+u.top,l.width,l.height)}},Vt(Ju,je),Ju.prototype.measure=function(t,e,i,n,s,o,l){var u=n.length;e=Xt(),o=Js(t);for(var c=0;c<u;c++){var p=n[c];if(p.visible||p===o){var m=ts(p,!1);if(m!==Se&&m!==ri)e.push(p);else{p.measure(1/0,i,0,l),m=p.margin,p=p.measuredBounds;var v=Math.max(p.height+m.top+m.bottom,0);s.width+=Math.max(p.width+m.right+m.left,0),s.height=Math.max(s.height,v)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):0!==s.height&&(i=Math.min(s.height,t.maxSize.height)),t=0;t<n;t++)((c=e[t]).visible||c===o)&&(u=(m=c.margin).right+m.left,m=m.top+m.bottom,c.measure(1/0,i,0,l),c=c.measuredBounds,m=Math.max(c.height+m,0),s.width+=Math.max(c.width+u,0),s.height=Math.max(s.height,m));Zt(e)},Ju.prototype.arrange=function(t,e,i){for(var n=e.length,s=t.padding,o=s.top,l=t.isOpposite,u=l?i.width:s.left,c=0;c<n;c++){var p=o,m=e[c];if(m.visible){var v=m.measuredBounds,w=m.margin,k=w.top+w.bottom,A=o+s.bottom,T=v.height,j=ts(m,!1);(isNaN(m.desiredSize.height)&&j===Ce||j===di)&&(T=Math.max(i.height-k-A,0)),k=T+k+A,(A=m.alignment).Yb()&&(A=t.defaultAlignment),A.sb()||(A=C),l&&(u-=v.width+w.left+w.right),m.arrange(u+A.offsetX+w.left,p+A.offsetY+w.top+(i.height*A.y-k*A.y),v.width,T),l||(u+=v.width+w.left+w.right)}}},Vt($u,je),$u.prototype.measure=function(t,e,i,n,s,o){var l=n.length;i=Xt();for(var u=Js(t),c=0;c<l;c++){var p=n[c];if(p.visible||p===u){var m=ts(p,!1);if(m!==Se&&m!==di)i.push(p);else{var v=p.margin;m=v.right+v.left,v=v.top+v.bottom,p.measure(e,1/0,o,0),p=p.measuredBounds,Zn(s,Math.max(s.width,Math.max(p.width+m,0)),s.height+Math.max(p.height+v,0))}}}if(0!==(n=i.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==s.width&&(e=Math.min(s.width,t.maxSize.width)),t=0;t<n;t++)((c=i[t]).visible||c===u)&&(l=(p=c.margin).right+p.left,p=p.top+p.bottom,c.measure(e,1/0,o,0),c=c.measuredBounds,p=Math.max(c.height+p,0),s.width=Math.max(s.width,Math.max(c.width+l,0)),s.height+=p);Zt(i)}},$u.prototype.arrange=function(t,e,i){for(var n=e.length,s=t.padding,o=s.left,l=t.isOpposite,u=l?i.height:s.top,c=0;c<n;c++){var p=o,m=e[c];if(m.visible){var v=m.measuredBounds,w=m.margin,k=w.left+w.right,A=o+s.right,T=v.width,j=ts(m,!1);(isNaN(m.desiredSize.width)&&j===Ce||j===ri)&&(T=Math.max(i.width-k-A,0)),k=T+k+A,(A=m.alignment).Yb()&&(A=t.defaultAlignment),A.sb()||(A=C),l&&(u-=v.height+w.bottom+w.top),m.arrange(p+A.offsetX+w.left+(i.width*A.x-k*A.x),u+A.offsetY+w.top,T,v.height),l||(u+=v.height+w.bottom+w.top)}}},Vt(Qu,je),Qu.prototype.measure=function(t,e,i,n,s,o,l){var u=n.length,c=t.Qb(),p=c.margin,m=p.right+p.left,v=p.top+p.bottom;c.measure(e,i,o,l);var w=c.measuredBounds;o=w.width,l=w.height;var k=Math.max(o+m,0),A=Math.max(l+v,0),T=t.isClipping,j=q.allocAt(-p.left,-p.top,k,A),I=q.allocAt(0,0,o,l);Gf(c,I,!0),o=I.width,l=I.height;for(var B=!0,R=Js(t),H=0;H<u;H++){var K=n[H];w=e;var J=i;if(K!==c&&(K.visible||K===R)){var lt=(p=K.margin).left,gt=p.top;switch(k=p.right+p.left,A=p.top+p.bottom,p=ts(K,!1)){case Ce:w=o,J=l,gt=lt=A=k=0;break;case ri:w=o,lt=k=0;break;case di:J=l,gt=A=0}K.measure(w,J,0,0),w=K.measuredBounds,k=Math.max(w.width+k,0),A=Math.max(w.height+A,0),(p=K.alignment).Yb()&&(p=t.defaultAlignment),p.sb()||(p=C);var ft=K.alignmentFocus;if(ft.Yb()&&(ft=C),J=null,K instanceof nt&&""!==K.$e&&(J=K.fb(K.$e))===K&&(J=null),lt=I.x-lt,gt=I.y-gt,null!==J){for(K.arrange(0,0,w.width,w.height),w=z.allocAt((w=J.actualBounds).x+(ft.x*w.width-ft.offsetX),w.y+(ft.y*w.height-ft.offsetY)),J=J.panel;J!==K;)J.transform.Ga(w),J=J.panel;lt+=p.x*o+p.offsetX-w.x,gt+=p.y*l+p.offsetY-w.y,z.free(w)}else lt+=p.x*o+p.offsetX-(ft.x*w.width+ft.offsetX),gt+=p.y*l+p.offsetY-(ft.y*w.height+ft.offsetY);B?(B=!1,s.h(lt,gt,k,A)):Ze(s,lt,gt,k,A)}}switch(B?s.assign(j):T?s.Vu(I.x,I.y,I.width,I.height):Ze(s,j.x,j.y,j.width,j.height),q.free(j),q.free(I),(p=c.stretch)===zn&&(p=ts(c,!1)),p){case Se:return;case Ce:if(!isFinite(e)&&!isFinite(i))return;break;case ri:if(!isFinite(e))return;break;case di:if(!isFinite(i))return}for(o=(w=c.measuredBounds).width,l=w.height,k=Math.max(o+m,0),A=Math.max(l+v,0),Gf(c,I=q.allocAt(-(p=c.margin).left,-p.top,k,A),!0),o=I.width,l=I.height,e=0;e<u;e++)(i=n[e])===c||!i.visible&&i!==R||(k=(p=i.margin).right+p.left,A=p.top+p.bottom,w=i.measuredBounds,k=Math.max(w.width+k,0),A=Math.max(w.height+A,0),(m=i.alignment).Yb()&&(m=t.defaultAlignment),m.sb()||(m=C),(i=i.alignmentFocus).Yb()&&(i=C),B?(B=!1,s.h(m.x*o+m.offsetX-(i.x*w.width+i.offsetX)-p.left,m.y*l+m.offsetY-(i.y*w.height+i.offsetY)-p.top,k,A)):Ze(s,m.x*o+m.offsetX-(i.x*w.width+i.offsetX)-p.left,m.y*l+m.offsetY-(i.y*w.height+i.offsetY)-p.top,k,A));B?s.assign(j):T?s.Vu(I.x,I.y,I.width,I.height):Ze(s,j.x,j.y,j.width,j.height),q.free(I)},Qu.prototype.arrange=function(t,e,i){var n=e.length,s=t.Qb(),o=s.measuredBounds,l=o.width,u=o.height,c=t.padding,p=(o=c.left)-i.x,m=(c=c.top)-i.y;for(s.arrange(p,m,l,u),Gf(s,l=q.allocAt(0,0,l,u),!1),u=0;u<n;u++){var v=e[u];if(v!==s){var w=(p=v.measuredBounds).width,k=p.height;(m=v.alignment).Yb()&&(m=t.defaultAlignment),m.sb()||(m=C);var A=v.alignmentFocus;if(A.Yb()&&(A=C),p=null,v instanceof nt&&""!==v.$e&&(p=v.fb(v.$e))===v&&(p=null),null!==p){var T=p.actualBounds;for(A=z.allocAt(T.x+(A.x*T.width-A.offsetX),T.y+(A.y*T.height-A.offsetY)),p=p.panel;p!==v;)p.transform.Ga(A),p=p.panel;p=m.x*l.width+m.offsetX-A.x,m=m.y*l.height+m.offsetY-A.y,z.free(A)}else p=m.x*l.width+m.offsetX-(A.x*w+A.offsetX),m=m.y*l.height+m.offsetY-(A.y*k+A.offsetY);p+=l.x-i.x,m+=l.y-i.y,v.visible&&v.arrange(o+p,c+m,w,k)}}q.free(l)},Vt(qu,je),qu.prototype.measure=function(t,e,i,n,s,o,l){var u=n.length,c=t.Qb(),p=c.margin,m=e,v=i,w=p.right+p.left,k=p.top+p.bottom;c.measure(e,i,o,l),p=c.measuredBounds;var A=0,T=null;c instanceof Pt&&(A=(T=c).strokeWidth*T.scale);var j=Math.max(p.width+w,0);p=Math.max(p.height+k,0);var I=_f(c),B=I.x*j+I.offsetX;I=I.y*p+I.offsetY;var R=Zf(c),H=R.x*j+R.offsetX;for(R=R.y*p+R.offsetY,isFinite(e)&&(m=Math.max(Math.abs(B-H)-A,0)),isFinite(i)&&(v=Math.max(Math.abs(I-R)-A,0)),(A=Mt.alloc()).h(0,0),t=Js(t),R=0;R<u;R++)(I=n[R])===c||!I.visible&&I!==t||(j=(p=I.margin).right+p.left,B=p.top+p.bottom,I.measure(m,v,0,0),p=I.measuredBounds,j=Math.max(p.width+j,0),p=Math.max(p.height+B,0),A.h(Math.max(j,A.width),Math.max(p,A.height)));if(1===u)s.width=j,s.height=p,Mt.free(A);else{switch(I=_f(c),u=n=0,(R=Zf(c)).x!==I.x&&R.y!==I.y&&(n=A.width/Math.abs(R.x-I.x),u=A.height/Math.abs(R.y-I.y)),Mt.free(A),A=0,null!==T&&(A=T.strokeWidth*T.scale,ep(T)===ds&&(n=u=Math.max(n,u))),n+=Math.abs(I.offsetX)+Math.abs(R.offsetX)+A,u+=Math.abs(I.offsetY)+Math.abs(R.offsetY)+A,(T=c.stretch)===zn&&(T=ts(c,!1)),T){case Se:l=o=0;break;case Ce:isFinite(e)&&(n=e),isFinite(i)&&(u=i);break;case ri:isFinite(e)&&(n=e),l=0;break;case di:o=0,isFinite(i)&&(u=i)}c.Tj(),c.measure(n,u,o,l),s.width=c.measuredBounds.width+w,s.height=c.measuredBounds.height+k}},qu.prototype.arrange=function(t,e){var i=e.length,n=t.Qb(),s=n.measuredBounds,o=q.alloc();o.h(0,0,1,1);var l=n.margin,u=l.left,c=t.padding,p=c.left;n.arrange(p+u,(c=c.top)+(l=l.top),s.width,s.height);var m=_f(n),v=Zf(n),w=m.y*s.height+m.offsetY,k=v.x*s.width+v.offsetX;for(v=v.y*s.height+v.offsetY,o.x=m.x*s.width+m.offsetX,o.y=w,Ze(o,k,v,0,0),o.x+=u+p,o.y+=l+c,s=0;s<i;s++)(u=e[s])!==n&&(p=u.measuredBounds,l=u.margin,c=Math.max(p.width+l.right+l.left,0),m=Math.max(p.height+l.top+l.bottom,0),(w=u.alignment).Yb()&&(w=t.defaultAlignment),w.sb()||(w=C),c=o.width*w.x+w.offsetX-c*w.x+l.left+o.x,l=o.height*w.y+w.offsetY-m*w.y+l.top+o.y,u.visible&&(kn(o.x,o.y,o.width,o.height,c,l,p.width,p.height)?u.arrange(c,l,p.width,p.height):u.arrange(c,l,p.width,p.height,new q(o.x,o.y,o.width,o.height))));q.free(o)},Vt(tc,je),tc.prototype.measure=function(t,e,i,n,s){for(var o=n.length,l=Xt(),u=Xt(),c=0;c<o;c++){var p=n[c],m=p instanceof nt?p:null;if(null!==m&&bo(m)&&p.visible){u.push(m);for(var v=m.O.s,w=v.length,k=0;k<w;k++){var A=v[k];m.type===nt.TableRow?A.row=p.row:m.type===nt.TableColumn&&(A.column=p.column),l.push(A)}}else l.push(p)}0===(o=l.length)&&(t.Gb(0),t.Fb(0));for(var T=[],j=0;j<o;j++){var I=l[j];I.visible&&(gn(I,!0),wr(I,!0),T[I.row]||(T[I.row]=[]),T[I.row][I.column]||(T[I.row][I.column]=[]),T[I.row][I.column].push(I))}Zt(l);var B=Xt(),R=Xt(),H=Xt(),K={count:0},J={count:0},lt=e,gt=i,ft=t.rowDefs,ot=t.colDefs,tt=null;o=ft.length;for(var Ct=0;Ct<o;Ct++)void 0!==(tt=ft[Ct])&&(tt.actual=0);o=ot.length;for(var bt=0;bt<o;bt++)void 0!==(tt=ot[bt])&&(tt.actual=0);for(var Rt=T.length,Qt=0,Xe=0;Xe<Rt;Xe++)T[Xe]&&(Qt=Math.max(Qt,T[Xe].length));var _e=Math.min(t.topIndex,Rt-1),yi=Math.min(t.leftIndex,Qt-1),He=0;Rt=T.length;for(var Fo=Js(t),Pe=0;Pe<Rt;Pe++)if(T[Pe]){Qt=T[Pe].length;var os=t.Gb(Pe);os.actual=0;for(var vi=os.pc=0;vi<Qt;vi++)if(T[Pe][vi]){var Io=t.Fb(vi);void 0===B[vi]&&(Io.actual=0,Io.pc=0,B[vi]=!0);for(var ln=T[Pe][vi],Tn=ln.length,Ji=0;Ji<Tn;Ji++){var Yi=ln[Ji];if(Yi.visible||Yi===Fo){var Oo=1<Yi.rowSpan,rs=1<Yi.columnSpan;(Oo||rs)&&(Pe<_e||vi<yi||R.push(Yi));var rr=Yi.margin,$i=rr.right+rr.left,kd=rr.top+rr.bottom,xi=ah(Yi,os,Io,!1),Ir=Yi.desiredSize,ms=!isNaN(Ir.height),Qi=!isNaN(Ir.width)&&ms;if(xi===Se||Qi||Pe<_e||vi<yi||(rs||void 0!==K[vi]||xi!==Ce&&xi!==ri||(K[vi]=-1,K.count++),Oo||void 0!==J[Pe]||xi!==Ce&&xi!==di||(J[Pe]=-1,J.count++),Oo&&rs||H.push(Yi)),Yi.measure(1/0,1/0,0,0),!(Pe<_e||vi<yi)){var ar=Yi.measuredBounds,qi=Math.max(ar.width+$i,0),pa=Math.max(ar.height+kd,0);if(1===Yi.rowSpan&&(xi===Se||xi===ri)){var kl=(tt=t.Gb(Pe)).Wc();(He=Math.max(pa-tt.actual,0))+kl>gt&&(He=Math.max(gt-kl,0));var mg=0===tt.oa;tt.pc=tt.pc+He,tt.actual=tt.oa+He,gt=Math.max(gt-(He+(mg?kl:0)),0)}if(1===Yi.columnSpan&&(xi===Se||xi===di)){var $h=(tt=t.Fb(vi)).Wc();(He=Math.max(qi-tt.actual,0))+$h>lt&&(He=Math.max(lt-$h,0));var Md=0===tt.oa;tt.pc=tt.pc+He,tt.actual=tt.oa+He,lt=Math.max(lt-(He+(Md?$h:0)),0)}(Oo||rs)&&Yi.Tj()}}}}}Zt(B);var qs=0,ys=0;o=t.columnCount;for(var Ml=0;Ml<o;Ml++){var lr=ot[Ml];void 0!==lr&&(qs+=isNaN(lr.Hc)?lr.pc:lr.Hc,0!==lr.pc&&(qs+=lr.Wc()))}o=t.rowCount;for(var Cl=0;Cl<o;Cl++){var Wn=ft[Cl];void 0!==Wn&&(ys+=isNaN(Wn.Hc)?Wn.pc:Wn.Hc,0!==Wn.pc&&(ys+=Wn.Wc()))}lt=Math.max(e-qs,0);var Eo=gt=Math.max(i-ys,0),Xi=lt;o=H.length;for(var Al=0;Al<o;Al++){var vs=H[Al],to=t.Gb(vs.row),Qh=t.Fb(vs.column),Ds=vs.measuredBounds,eo=vs.margin,qh=eo.top+eo.bottom;K[vs.column]=0===Qh.pc&&void 0!==K[vs.column]?Math.max(Ds.width+(eo.right+eo.left),K[vs.column]):null,J[vs.row]=0===to.pc&&void 0!==J[vs.row]?Math.max(Ds.height+qh,J[vs.row]):null}var hr,Pl=0,zs=0;for(hr in J)"count"!==hr&&(Pl+=J[hr]);for(hr in K)"count"!==hr&&(zs+=K[hr]);for(var ti=Mt.alloc(),Or=0;Or<o;Or++){var Me=H[Or];if(Me.visible||Me===Fo){var Ni=t.Gb(Me.row),tn=t.Fb(Me.column),jo=0;isFinite(tn.width)?jo=tn.width:(jo=isFinite(lt)&&null!==K[Me.column]?0===zs?tn.actual+lt:K[Me.column]/zs*Xi:null!==K[Me.column]?lt:tn.actual||lt,jo=Math.max(0,jo-tn.Wc()));var Bs=0;switch(isFinite(Ni.height)?Bs=Ni.height:(Bs=isFinite(gt)&&null!==J[Me.row]?0===Pl?Ni.actual+gt:J[Me.row]/Pl*Eo:null!==J[Me.row]?gt:Ni.actual||gt,Bs=Math.max(0,Bs-Ni.Wc())),ti.h(Math.max(tn.minimum,Math.min(jo,tn.maximum)),Math.max(Ni.minimum,Math.min(Bs,Ni.maximum))),xi=ah(Me,Ni,tn,!1)){case ri:ti.height=Math.max(ti.height,Ni.actual+gt);break;case di:ti.width=Math.max(ti.width,tn.actual+lt)}var Ll=Me.margin,Cd=Ll.right+Ll.left,tu=Ll.top+Ll.bottom;Me.Tj(),Me.measure(ti.width,ti.height,tn.minimum,Ni.minimum);var Tl=Me.measuredBounds,ga=Math.max(Tl.width+Cd,0),Hi=Math.max(Tl.height+tu,0);isFinite(lt)&&(ga=Math.min(ga,ti.width)),isFinite(gt)&&(Hi=Math.min(Hi,ti.height));var ur=0;ur=Ni.actual,Ni.actual=Math.max(Ni.actual,Hi),Ni.pc=Math.max(Ni.pc,Hi),He=Ni.actual-ur,gt=Math.max(gt-He,0),null===J[Me.row]&&(Eo=Math.max(Eo-He,0)),ur=tn.actual,tn.actual=Math.max(tn.actual,ga),tn.pc=Math.max(tn.pc,ga),He=tn.actual-ur,lt=Math.max(lt-He,0),null===K[Me.column]&&(Xi=Math.max(Xi-He,0))}}Zt(H);var io=Mt.alloc(),Sn=Xt(),no=Xt();if(0!==(o=R.length))for(var Rs=0;Rs<Rt;Rs++)if(T[Rs]){Qt=T[Rs].length;var eu=t.Gb(Rs);Sn[Rs]=eu.actual;for(var Er=0;Er<Qt;Er++)if(T[Rs][Er]){var Ad=t.Fb(Er);no[Er]=Ad.actual}}for(var Nl=0;Nl<o;Nl++){var xe=R[Nl];if(xe.visible||xe===Fo){var Nn=t.Gb(xe.row),Ys=t.Fb(xe.column);switch(ti.h(Math.max(Ys.minimum,Math.min(e,Ys.maximum)),Math.max(Nn.minimum,Math.min(i,Nn.maximum))),xi=ah(xe,Nn,Ys,!1)){case Ce:0!==no[Ys.index]&&(ti.width=Math.min(ti.width,no[Ys.index])),0!==Sn[Nn.index]&&(ti.height=Math.min(ti.height,Sn[Nn.index]));break;case ri:0!==no[Ys.index]&&(ti.width=Math.min(ti.width,no[Ys.index]));break;case di:0!==Sn[Nn.index]&&(ti.height=Math.min(ti.height,Sn[Nn.index]))}isFinite(Ys.width)&&(ti.width=Ys.width),isFinite(Nn.height)&&(ti.height=Nn.height),io.h(0,0);for(var en=Ys.minimum,Fl=Nn.minimum,Fn=1;Fn<xe.rowSpan&&!(xe.row+Fn>=t.rowCount);Fn++)tt=t.Gb(xe.row+Fn),He=0,He=xi===Ce||xi===di?Math.max(tt.minimum,0===Sn[xe.row+Fn]?tt.maximum:Math.min(Sn[xe.row+Fn],tt.maximum)):Math.max(tt.minimum,isNaN(tt.Hc)?tt.maximum:Math.min(tt.Hc,tt.maximum)),io.height+=He,Fl+=tt.minimum;for(var jr=1;jr<xe.columnSpan&&!(xe.column+jr>=t.columnCount);jr++)tt=t.Fb(xe.column+jr),He=0,He=xi===Ce||xi===ri?Math.max(tt.minimum,0===no[xe.column+jr]?tt.maximum:Math.min(no[xe.column+jr],tt.maximum)):Math.max(tt.minimum,isNaN(tt.Hc)?tt.maximum:Math.min(tt.Hc,tt.maximum)),io.width+=He,en+=tt.minimum;ti.width+=io.width,ti.height+=io.height;var Xs=xe.margin,iu=Xs.right+Xs.left,nu=Xs.top+Xs.bottom;xe.measure(ti.width,ti.height,en,Fl);for(var Hs=xe.measuredBounds,Dr=Math.max(Hs.width+iu,0),zr=Math.max(Hs.height+nu,0),Il=0,cr=0;cr<xe.rowSpan&&!(xe.row+cr>=t.rowCount);cr++)Il+=(tt=t.Gb(xe.row+cr)).total||0;if(Il<zr){var In=zr-Il,Do=zr-Il;if(null!==xe.spanAllocation)for(var Br=xe.spanAllocation,so=0;so<xe.rowSpan&&!(0>=In)&&!(xe.row+so>=t.rowCount);so++){var zo=(tt=t.Gb(xe.row+so)).oa||0,oo=Br(xe,tt,Do);tt.actual=Math.min(tt.maximum,zo+oo),tt.oa!==zo&&(In-=tt.oa-zo)}for(;0<In;){var ma=tt.oa||0;if(isNaN(tt.height)&&tt.maximum>ma&&(tt.actual=Math.min(tt.maximum,ma+In),tt.oa!==ma&&(In-=tt.oa-ma)),0===tt.index)break;tt=t.Gb(tt.index-1)}}for(var Bo=0,Ol=0;Ol<xe.columnSpan&&!(xe.column+Ol>=t.columnCount);Ol++)Bo+=(tt=t.Fb(xe.column+Ol)).total||0;if(Bo<Dr){var ya=Dr-Bo,ro=Dr-Bo;if(null!==xe.spanAllocation)for(var su=xe.spanAllocation,El=0;El<xe.columnSpan&&!(0>=ya)&&!(xe.column+El>=t.columnCount);El++){var ou=(tt=t.Fb(xe.column+El)).oa||0,kx=su(xe,tt,ro);tt.actual=Math.min(tt.maximum,ou+kx),tt.oa!==ou&&(ya-=tt.oa-ou)}for(;0<ya;){var Pd=tt.oa||0;if(isNaN(tt.width)&&tt.maximum>Pd&&(tt.actual=Math.min(tt.maximum,Pd+ya),tt.oa!==Pd&&(ya-=tt.oa-Pd)),0===tt.index)break;tt=t.Fb(tt.index-1)}}}}Zt(R),Mt.free(io),Mt.free(ti),void 0!==Sn&&Zt(Sn),void 0!==no&&Zt(no);var va=0,xa=0,Ld=t.desiredSize,f0=t.maxSize;xi=ts(t,!0);var ru=ys=qs=0,au=0;o=t.columnCount;for(var Td=0;Td<o;Td++)void 0!==ot[Td]&&(tt=t.Fb(Td),isFinite(tt.width)?(ru+=tt.width,ru+=tt.Wc()):uc(tt)===ph?(ru+=tt.oa,ru+=tt.Wc()):0!==tt.oa&&(qs+=tt.oa,qs+=tt.Wc()));va=isFinite(Ld.width)?Math.min(Ld.width,f0.width):xi!==Se&&isFinite(e)?e:qs,va=Math.max(va,t.minSize.width),va=Math.max(va-ru,0);for(var Mx=0===qs?1:Math.max(va/qs,1),Nd=0;Nd<o;Nd++)void 0!==ot[Nd]&&(tt=t.Fb(Nd),isFinite(tt.width)||uc(tt)===ph||(tt.actual=tt.oa*Mx),tt.position=s.width,0!==tt.oa&&(s.width+=tt.oa,s.width+=tt.Wc()));o=t.rowCount;for(var Fd=0;Fd<o;Fd++)void 0!==ft[Fd]&&(tt=t.Gb(Fd),isFinite(tt.height)?(au+=tt.height,au+=tt.Wc()):uc(tt)===ph?(au+=tt.oa,au+=tt.Wc()):0!==tt.oa&&(ys+=tt.oa,ys+=tt.Wc()));xa=isFinite(Ld.height)?Math.min(Ld.height,f0.height):xi!==Se&&isFinite(i)?i:ys,xa=Math.max(xa,t.minSize.height),xa=Math.max(xa-au,0);for(var Cx=0===ys?1:Math.max(xa/ys,1),Id=0;Id<o;Id++)void 0!==ft[Id]&&(tt=t.Gb(Id),isFinite(tt.height)||uc(tt)===ph||(tt.actual=tt.oa*Cx),tt.position=s.height,0!==tt.oa&&(s.height+=tt.oa,s.height+=tt.Wc()));o=u.length;for(var yg=0;yg<o;yg++){var lu=u[yg],vg=0,xg=0;lu.type===nt.TableRow?(vg=s.width,xg=(tt=t.Gb(lu.row)).actual):(vg=(tt=t.Fb(lu.column)).actual,xg=s.height),lu.measuredBounds.h(0,0,vg,xg),gn(lu,!1)}Zt(u),t.inRowsCols=T},tc.prototype.arrange=function(t,e,i){var n=e.length,s=t.padding,o=s.left;s=s.top;var l=t.inRowsCols;if(null!==l){for(var u,c,p=l.length,m=0,v=0;v<p;v++)l[v]&&(m=Math.max(m,l[v].length));c=t.rowDefs,u=t.colDefs;var w=v=0,k=Math.min(t.topIndex,p-1);if(0<c.length){for(;k!==p&&(void 0===c[k]||0===c[k].oa);)k++;v=-c[k=Math.max(Math.min(k,p-1),0)].position}var A=Math.min(t.leftIndex,m-1);if(0<u.length){for(;A!==m&&(void 0===u[A]||0===u[A].oa);)A++;w=-u[A=Math.max(Math.min(A,m-1),0)].position}for(var T=0,j=0;T!==p&&void 0===c[T];)T++;for(;j!==p&&void 0===u[j];)j++;m=t.part,t.Gb(T),t.Fb(j);for(var I=0;I<e.length;I++){var B=e[I];if(B instanceof nt&&B.visible&&bo(B)){if(B.type===nt.TableRow){u=t.Gb(B.row);var R=t.Fb(j)}else u=t.Gb(T),R=t.Fb(B.column);c=u.position+v+s,0!==u.oa&&(c+=u.Io(Math.max(T,k))),u=R.position+w+o,0!==R.oa&&(u+=R.Io(Math.max(j,A))),R=B.measuredBounds,B.Tk(),B.actualBounds.ka();var H=B.actualBounds,K=q.allocAt(H.x,H.y,H.width,H.height);H.x=B.type===nt.TableRow?o:u,H.y=B.type===nt.TableColumn?s:c,H.width=R.width,H.height=R.height,B.actualBounds.freeze(),wr(B,!1),hs(K,H)||null===m||(m.oh(),B.Pn(m)),q.free(K)}}for(I=Mt.alloc(),B=0;B<p;B++)if(l[B])for(m=l[B].length,c=(R=t.Gb(B)).position+v+s,0!==R.oa&&(c+=R.Io(Math.max(T,k))),H=0;H<m;H++)if(l[B][H]){u=(K=t.Fb(H)).position+w+o,0!==K.oa&&(u+=K.Io(Math.max(j,A)));for(var J=l[B][H],lt=J.length,gt=0;gt<lt;gt++){var ft=J[gt],ot=ft.measuredBounds;I.h(0,0);for(var tt=1;tt<ft.rowSpan&&!(B+tt>=t.rowCount);tt++){var Ct=t.Gb(B+tt);0!==Ct.oa&&(I.height+=Ct.total)}for(tt=1;tt<ft.columnSpan&&!(H+tt>=t.columnCount);tt++)0!==(Ct=t.Fb(H+tt)).oa&&(I.width+=Ct.total);var bt=K.oa+I.width,Rt=R.oa+I.height;tt=u,Ct=c;var Qt=bt,Xe=Rt,_e=u,yi=c,He=bt,Fo=Rt;u+bt>i.width&&(He=Math.max(i.width-u,0)),c+Rt>i.height&&(Fo=Math.max(i.height-c,0));var Pe=ft.alignment;if(Pe.Yb()){(Pe=t.defaultAlignment).sb()||(Pe=C);var os=Pe.x,vi=Pe.y,Io=Pe.offsetX;Pe=Pe.offsetY;var ln=K.alignment,Tn=R.alignment;ln.sb()&&(os=ln.x,Io=ln.offsetX),Tn.sb()&&(vi=Tn.y,Pe=Tn.offsetY)}else os=Pe.x,vi=Pe.y,Io=Pe.offsetX,Pe=Pe.offsetY;(isNaN(os)||isNaN(vi))&&(vi=os=.5,Pe=Io=0),ln=ot.width,Tn=ot.height;var Ji=ft.margin,Yi=Ji.left+Ji.right,Oo=Ji.top+Ji.bottom,rs=ah(ft,R,K,!1);!isNaN(ft.desiredSize.width)||rs!==Ce&&rs!==ri||(ln=Math.max(bt-Yi,0)),!isNaN(ft.desiredSize.height)||rs!==Ce&&rs!==di||(Tn=Math.max(Rt-Oo,0)),bt=ft.maxSize,Rt=ft.minSize,ln=Math.min(bt.width,ln),Tn=Math.min(bt.height,Tn),ln=Math.max(Rt.width,ln),Tn=Math.max(Rt.height,Tn),tt+=Qt*os-(ln+Yi)*os+Io+Ji.left,Ct+=Xe*vi-(bt=Tn+Oo)*vi+Pe+Ji.top,ft.visible&&(kn(_e,yi,He,Fo,tt,Ct,ot.width,ot.height)?ft.arrange(tt,Ct,ln,Tn):ft.arrange(tt,Ct,ln,Tn,new q(_e,yi,He,Fo)))}}for(Mt.free(I),t=0;t<n;t++)null!==(o=(i=e[t])instanceof nt?i:null)&&bo(o)&&(o=i.actualBounds,i.naturalBounds.ka(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())}},Vt(ec,je),ec.prototype.measure=function(){},ec.prototype.arrange=function(){},Vt(ic,je),ic.prototype.measure=function(){},ic.prototype.arrange=function(){},Vt(nc,je),nc.prototype.measure=function(t,e,i,n,s,o,l){1<n.length&&Q("Viewbox Panel cannot contain more than one GraphObject."),(n=n[0]).Ca=1,n.Tj(),n.measure(1/0,1/0,o,l);var u=n.measuredBounds,c=n.margin,p=c.right+c.left;if(c=c.top+c.bottom,isFinite(e)||isFinite(i)){var m=n.scale,v=u.width;u=u.height;var w=Math.max(e-p,0),k=Math.max(i-c,0),A=1;t.viewboxStretch===ds?0!==v&&0!==u&&(A=Math.min(w/v,k/u)):0!==v&&0!==u&&(A=Math.max(w/v,k/u)),0===A&&(A=1e-4),n.Ca*=A,m!==n.scale&&(gn(n,!0),n.measure(1/0,1/0,o,l))}u=n.measuredBounds,s.width=isFinite(e)?e:Math.max(u.width+p,0),s.height=isFinite(i)?i:Math.max(u.height+c,0)},nc.prototype.arrange=function(t,e,i){var n=(e=e[0]).measuredBounds,s=e.margin,o=Math.max(n.width+(s.right+s.left),0);s=Math.max(n.height+(s.top+s.bottom),0);var l=e.alignment;l.Yb()&&(l=t.defaultAlignment),l.sb()||(l=C),e.arrange(i.width*l.x-o*l.x+l.offsetX,i.height*l.y-s*l.y+l.offsetY,n.width,n.height)},Vt(ch,je),ch.prototype.measure=function(){},ch.prototype.arrange=function(){},ch.prototype.hc=function(t,e,i){0>=(i=t.Df()*i.scale)&&(i=1);var n=t.gridCellSize,s=n.width;n=n.height;var o=t.naturalBounds,l=t.actualBounds,u=o.width,c=o.height,p=Math.ceil(u/s),m=Math.ceil(c/n),v=t.gridOrigin,w=v.x;v=v.y,e.save(),e.beginPath(),e.rect(0,0,u,c),e.clip(),e.Se();for(var k=[],A=t.O.s,T=A.length,j=0;j<T;j++){var I=A[j],B=[];if(k.push(B),I.visible){var R=I.interval;if(!(0>R)){I=Uf(I.figure);for(var H=0;H<T;H++)if(H!==j){var K=A[H];K.visible&&Uf(K.figure)===I&&(K=K.interval)>R&&B.push(K)}}}}for(T=(A=t.O.s).length,j=0;j<T;j++){var J=A[j];if(J.visible&&(B=J.interval||1,!(2>s*(I=Math.abs(B))*i))){if(R=J.segmentIndex,(!isFinite(R)||isNaN(R))&&(R=0),0>R&&(R=I-Math.min(-R,I)),R=Math.round(R%I),H=1,1!==(I=J.opacity)){if(0===I)continue;e.globalAlpha=(H=e.globalAlpha)*I}K=k[j];var lt=!1,gt=J.strokeDashArray;if(null!==gt&&(lt=!0,e.js(gt,J.strokeDashOffset)),"LineV"===J.figure&&null!==J.stroke&&0<J.strokeWidth){for(e.lineWidth=J.strokeWidth,sn(t,e,J.stroke,!1,!1,o,l),e.beginPath(),gt=J=Math.floor((w-s)/s);gt<=J+p;gt++){var ft=gt*s+w;0<=ft&&ft<=u&&sc(gt,B,R,K)&&(e.moveTo(ft,0),e.lineTo(ft,c))}e.stroke(),e.Se()}else if("LineH"===J.figure&&null!==J.stroke&&0<J.strokeWidth){for(e.lineWidth=J.strokeWidth,sn(t,e,J.stroke,!1,!1,o,l),e.beginPath(),gt=J=Math.floor((v-n)/n);gt<=J+m;gt++)0<=(ft=gt*n+v)&&ft<=c&&sc(gt,B,R,K)&&(e.moveTo(0,ft),e.lineTo(u,ft));e.stroke(),e.Se()}else if("BarV"===J.figure&&null!==J.fill)for(sn(t,e,J.fill,!0,!1,o,l),J=J.width,isNaN(J)&&(J=s),ft=gt=Math.floor((w-s)/s);ft<=gt+p;ft++){var ot=ft*s+w;0<=ot+J&&ot<=u&&sc(ft,B,R,K)&&e.fillRect(ot,0,J,c)}else if("BarH"===J.figure&&null!==J.fill)for(sn(t,e,J.fill,!0,!1,o,l),J=J.height,isNaN(J)&&(J=n),ft=gt=Math.floor((v-n)/n);ft<=gt+m;ft++)0<=(ot=ft*n+v)+J&&ot<=c&&sc(ft,B,R,K)&&e.fillRect(0,ot,u,J);lt&&e.fs(),1!==I&&(e.globalAlpha=H)}}e.restore(),e.Vc(!1)},Vt(oc,je),oc.prototype.measure=function(t,e,i,n,s){var o=n.length;if(t instanceof Bt||t instanceof st){var l=null,u=null;if(t instanceof st&&(l=t),t instanceof Bt&&(l=(u=t).adornedPart,null===t.j&&(t.j=[])),l instanceof st){var c=l;if(0===o)Zn(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var p=t instanceof Bt?null:l.path;(i=t.jg).h(0,0,(e=l.routeBounds).width,e.height);var m=c.points,v=l.pointsCount;null!==u?u.Ul(!1):null!==l&&l.Ul(!1),u=e.width;var w=e.height,k=t.j;if(k.length=0,null!==p){ty(t,u,w,p);var A=p.measuredBounds;i.ed(A),k.push(A)}A=Ot.alloc();for(var T=z.alloc(),j=z.alloc(),I=0;I<o;I++){var B=n[I];if(B!==p)if(B.isPanelMain&&B instanceof Pt){ty(t,u,w,B);var R=B.measuredBounds;i.ed(R),k.push(R)}else if(2>v)B.measure(1/0,1/0,0,0),i.ed(R=B.measuredBounds),k.push(R);else{var H=B.segmentIndex,K=B.segmentFraction,J=B.alignmentFocus;J.Mc()&&(J=C);var lt=B.segmentOrientation,gt=B.segmentOffset;if(isNaN(H)){var ft=c.ua;R=Xt(),ft.Ru(K,R);var ot=z.allocAt(R[0],R[1]);if(ot.add(c.i(0)),(ft.type===rt.j||null!==(ft=ft.figures.first()))&&ot.offset(-ft.startX,-ft.startY),ft=R[2],lt!==Ci){var tt=c.computeAngle(B,lt,ft);B.Lb=tt}tt=ot.x-e.x;var Ct=ot.y-e.y;z.free(ot),Zt(R)}else if(H<-v||H>=v)R=z.alloc(),c.vg(),c.computeMidPoint(R),ft=c.midAngle,lt!==Ci&&(tt=c.computeAngle(B,lt,ft),B.Lb=tt),tt=R.x-e.x,Ct=R.y-e.y,z.free(R);else{if(tt=0,0<=H?(Ct=m.M(H),R=H<v-1?m.M(H+1):Ct):(Ct=m.M(tt=v+H),R=0<tt?m.M(tt-1):Ct),Ct.Xa(R)){0<=H?(ft=0<H?m.M(H-1):Ct,tt=H<v-2?m.M(H+2):R):(ft=tt<v-1?m.M(tt+1):Ct,tt=1<tt?m.M(tt-2):R),ot=ft.Bf(Ct);var bt=R.Bf(tt);ft=ot>bt+10?0<=H?ft.ab(Ct):Ct.ab(ft):bt>ot+10?0<=H?R.ab(tt):tt.ab(R):0<=H?ft.ab(tt):tt.ab(ft)}else ft=0<=H?Ct.ab(R):R.ab(Ct);lt!==Ci&&(tt=c.computeAngle(B,lt,ft),B.Lb=tt),tt=Ct.x+(R.x-Ct.x)*K-e.x,Ct=Ct.y+(R.y-Ct.y)*K-e.y}B.measure(1/0,1/0,0,0),R=B.measuredBounds;var Rt=0;B instanceof Pt&&(Rt=B.strokeWidth),bt=(ot=B.naturalBounds).width+Rt;var Qt=ot.height+Rt;A.reset(),A.translate(-R.x,-R.y),A.scale(B.scale,B.scale),A.rotate(lt===Ci?B.angle:ft,bt/2,Qt/2),lt!==Mh&&lt!==Ah||A.rotate(90,bt/2,Qt/2),lt!==Ch&&lt!==Ph||A.rotate(-90,bt/2,Qt/2),lt===jc&&(45<ft&&135>ft||225<ft&&315>ft)&&A.rotate(-ft,bt/2,Qt/2),ot=new q(0,0,bt,Qt),T.xi(ot,J),A.Ga(T),J=Rt/2*B.scale-T.x,B=Rt/2*B.scale-T.y,j.assign(gt),Rt=isNaN(gt.x);var Xe=isNaN(gt.y);if(Rt||Xe){bt=bt/2+3,Qt=Qt/2+3;var _e=45<=ft&&135>=ft,yi=225<=ft&&315>=ft;lt===Ci&&(_e||yi)?(j.x=Xe?bt:gt.y,j.y=Rt?Qt:gt.x,_e?0<=H||isNaN(H)&&.5>K||!Rt||(j.y=-Qt):yi&&((0<=H||isNaN(H)&&.5>K)&&Rt&&(j.y=-Qt),Xe&&(j.x=-bt))):(Rt&&(j.x=0<=H||isNaN(H)&&.5>K?bt:-bt),Xe&&(j.y=-Qt),j.rotate(ft))}else j.rotate(ft);tt+=j.x,Ct+=j.y,ot.set(R),ot.h(tt+J,Ct+B,R.width,R.height),k.push(ot),i.ed(ot)}}if(null!==l)for(n=l.labelNodes;n.next();)n.value.measure(1/0,1/0);t.jg=i,t.position.h(e.x+i.x,e.y+i.y),Zn(s,i.width||0,i.height||0),Ot.free(A),z.free(T),z.free(j)}}}},oc.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Bt||t instanceof st){var n=t,s=null;t instanceof Bt&&(n=(s=t).adornedPart);var o=t instanceof Bt?null:n.path,l=t.j;if(0!==l.length){var u=0;if(null!==o&&u<l.length){var c=l[u];u++,o.arrange(c.x-t.jg.x,c.y-t.jg.y,c.width,c.height)}for(c=0;c<i;c++){var p=e[c];if(p!==o&&u<l.length){var m=l[u];u++,p.arrange(m.x-t.jg.x,m.y-t.jg.y,m.width,m.height)}}}if(2<=(i=(e=n.points).count)&&t instanceof st)for(o=t.labelNodes;o.next();){var v=t;u=(l=o.value).segmentIndex,c=l.segmentFraction;var w=l.alignmentFocus;if(p=l.segmentOrientation,m=l.segmentOffset,isNaN(u)){var k=v.ua,A=Xt();k.Ru(c,A);var T=z.allocAt(A[0],A[1]);T.add(v.i(0)),k.type===rt.j||(k=k.figures.first()),T.offset(-k.startX,-k.startY),k=A[2],p!==Ci&&(v=v.computeAngle(l,p,k),l.angle=v),v=T.x;var j=T.y;z.free(T),Zt(A)}else if(u<-i||u>=i)j=A=z.alloc(),(k=v).vg(),k.computeMidPoint(j),k=v.midAngle,p!==Ci&&(v=v.computeAngle(l,p,k),l.angle=v),v=A.x,j=A.y,z.free(A);else{if(T=0,0<=u?(A=e.s[u],j=u<i-1?e.s[u+1]:A):(A=e.s[T=i+u],j=0<T?e.s[T-1]:A),A.Xa(j)){0<=u?(k=0<u?e.s[u-1]:A,T=u<i-2?e.s[u+2]:j):(k=T<i-1?e.s[T+1]:A,T=1<T?e.s[T-2]:j);var I=k.Bf(A),B=j.Bf(T);k=I>B+10?0<=u?k.ab(A):A.ab(k):B>I+10?0<=u?j.ab(T):T.ab(j):0<=u?k.ab(T):T.ab(k)}else k=0<=u?A.ab(j):j.ab(A);p!==Ci&&(v=v.computeAngle(l,p,k),l.angle=v),v=A.x+(j.x-A.x)*c,j=A.y+(j.y-A.y)*c}if(w.ys())l.location=new z(v,j);else{w.Mc()&&(w=C),(A=Ot.alloc()).reset(),A.scale(l.scale,l.scale),A.rotate(l.angle,0,0);var R=l.naturalBounds;T=q.allocAt(0,0,R.width,R.height),(I=z.alloc()).xi(T,w),A.Ga(I),w=-I.x,B=-I.y;var H=R.width,K=R.height;(R=z.alloc()).assign(m);var J=isNaN(m.x),lt=isNaN(m.y);if(J||lt){H=H/2+3,K=K/2+3;var gt=45<=k&&135>=k,ft=225<=k&&315>=k;p===Ci&&(gt||ft)?(R.x=lt?H:m.y,R.y=J?K:m.x,gt?0<=u||isNaN(u)&&.5>c||!J||(R.y=-K):ft&&((0<=u||isNaN(u)&&.5>c)&&J&&(R.y=-K),lt&&(R.x=-H))):(J&&(R.x=0<=u||isNaN(u)&&.5>c?H:-H),lt&&(R.y=-K),R.rotate(k))}else R.rotate(k);v+=R.x,j+=R.y,A.pp(T),u=z.allocAt(v+(w+=T.x),j+(B+=T.y)),l.move(u),z.free(u),z.free(R),z.free(I),q.free(T),Ot.free(A)}}null!==s?s.Ul(!1):n.Ul(!1),n=Ty(t),t.location.h(t.position.x+n.x,t.position.y+n.y),z.free(n)}},Vt(dh,je),dh.prototype.measure=function(t,e,i,n,s,o,l){var u=t.Qb();t.graduatedBounds=[];var c=u.margin,p=c.right+c.left,m=c.top+c.bottom;u.measure(e,i,o,l);var v=u.measuredBounds,w=new q(-c.left,-c.top,Math.max(v.width+p,0),Math.max(v.height+m,0));t.graduatedBounds.push(w),s.assign(w);for(var k=u.geometry,A=u.strokeWidth,T=k.flattenedSegments,j=k.flattenedLengths,I=k.flattenedTotalLength,B=T.length,R=0,H=0,K=Xt(),J=0;J<B;J++){var lt=T[J],gt=[];H=R=0;for(var ft=lt.length,ot=0;ot<ft;ot+=2){var tt=lt[ot],Ct=lt[ot+1];if(0!==ot){var bt=180*Math.atan2(Ct-H,tt-R)/Math.PI;0>bt&&(bt+=360),gt.push(bt)}R=tt,H=Ct}K.push(gt)}if(null===t.graduatedIntervals){for(var Rt=[],Qt=t.O.s,Xe=Qt.length,_e=0;_e<Xe;_e++){var yi=Qt[_e],He=[];if(Rt.push(He),yi.visible){var Fo=yi.interval;if(!(0>Fo))for(var Pe=0;Pe<Xe;Pe++)if(Pe!==_e){var os=Qt[Pe];if(os.visible&&yi.constructor===os.constructor){var vi=os.interval;vi>Fo&&He.push(vi)}}}}t.graduatedIntervals=Rt}var Io=t.graduatedIntervals,ln=t.O.s,Tn=ln.length,Ji=0,Yi=0,Oo=I;t.graduatedMarks=[];for(var rs,rr=0;rr<Tn;rr++){var $i=ln[rr];if(rs=[],$i.visible&&$i!==u){var kd=Math.abs($i.interval),xi=t.graduatedTickUnit;if(!(2>xi*kd*I/t.graduatedRange&&null===$i.graduatedSkip)){var Ir=j[0][0],ms=0,Qi=0;Yi=I*$i.graduatedStart-1e-4,Oo=I*$i.graduatedEnd+1e-4;var ar=xi*kd,qi=t.graduatedTickBase;if(qi<t.graduatedMin){var pa=(t.graduatedMin-qi)/ar;qi+=(pa=pa%1==0?pa:Math.floor(pa+1))*ar}else qi>t.graduatedMin+ar&&(qi-=Math.floor((qi-t.graduatedMin)/ar)*ar);for(var kl=Io[rr],mg=qi,$h=1e-6*t.graduatedMax,Md=1;qi<=t.graduatedMax+$h;Md++){t:{for(var qs=kl.length,ys=0;ys<qs;ys++){var Ml=(qi-t.graduatedTickBase)%(kl[ys]*t.graduatedTickUnit),lr=1e-6*t.graduatedTickUnit;if(Ml<lr&&Ml>-lr){var Cl=!1;break t}}Cl=!0}if(Cl&&(qi>t.graduatedMax&&(qi=t.graduatedMax),null===$i.graduatedSkip||$i instanceof qt&&!$i.graduatedSkip(qi,$i)||$i instanceof Pt&&!$i.graduatedSkip(qi,$i))&&((Ji=(qi-t.graduatedMin)*I/t.graduatedRange)>I&&(Ji=I),Yi<=Ji&&Ji<=Oo)){for(var Wn=K[ms][Qi],Eo=j[ms][Qi];ms<j.length;){for(;Ji>Ir&&Qi<j[ms].length-1;)Qi++,Wn=K[ms][Qi],Ir+=Eo=j[ms][Qi];if(Ji<=Ir)break;Wn=K[++ms][Qi=0],Ir+=Eo=j[ms][Qi]}var Xi=T[ms],Al=Xi[2*Qi],vs=Xi[2*Qi+1],to=(Ji-(Ir-Eo))/Eo,Qh=new z(Al+(Xi[2*Qi+2]-Al)*to+A/2-k.bounds.x,vs+(Xi[2*Qi+3]-vs)*to+A/2-k.bounds.y);Qh.scale(u.scale,u.scale);t:{var Ds=Wn,eo=K[ms];if(!(.5005>to&&.4995<to)){var xs=Ds;if(.5>to?0<Qi?xs=eo[Qi-1]:_.$(Xi[0],Xi[Xi.length-2])&&_.$(Xi[1],Xi[Xi.length-1])&&(xs=eo[eo.length-1]):.5<to&&(Qi+1<eo.length?xs=eo[Qi+1]:_.$(Xi[0],Xi[Xi.length-2])&&_.$(Xi[1],Xi[Xi.length-1])&&(xs=eo[0])),Ds!==xs){var qh=Math.abs(Ds-xs);if(180<qh&&(Ds<xs?Ds+=360:xs+=360,qh=Math.abs(Ds-xs)),5e-4>to||.9995<to){Wn=(Ds+xs)/2%360;break t}if(10>qh){var Pl=1-Math.abs(.5-to);Wn=(Ds*Pl+xs*(1-Pl))%360;break t}}}Wn=Ds}if($i instanceof qt){var zs="";""!==(zs=null!==$i.graduatedFunction?null!=(zs=$i.graduatedFunction(qi,$i))?zs.toString():"":(+qi.toFixed(2)).toString())&&rs.push({$l:Qh,angle:Wn,text:zs})}else rs.push({$l:Qh,angle:Wn})}qi=mg+Md*ar}}}t.graduatedMarks.push(rs)}Zt(K);var hr=t.graduatedMarks;if(null!==hr)for(var ti=n.length,Or=0;Or<ti;Or++){var Me=n[Or],Ni=hr[Or];if(Me.visible&&Me!==u&&0!==Ni.length){if(Me instanceof Pt){var tn=t,jo=s,Bs=Me.alignmentFocus;Bs.Mc()&&(Bs=x);var Ll=Me.angle;Me.Lb=0,Me.measure(1/0,1/0,0,0),Me.Lb=Ll;var Cd=Me.measuredBounds,tu=Cd.width,Tl=Cd.height,ga=q.allocAt(0,0,tu,Tl),Hi=z.alloc();Hi.xi(ga,Bs),q.free(ga);for(var ur=-Hi.x,io=-Hi.y,Sn=new q,no=Ni.length,Rs=0;Rs<no;Rs++)for(var eu=Ni[Rs],Er=eu.$l.x,Ad=eu.$l.y,Nl=eu.angle,xe=0;4>xe;xe++){switch(xe){case 0:Hi.h(ur,io);break;case 1:Hi.h(ur+tu,io);break;case 2:Hi.h(ur,io+Tl);break;case 3:Hi.h(ur+tu,io+Tl)}Hi.rotate(Nl+Me.angle),Hi.offset(Er,Ad),0===Rs&&0===xe?Sn.h(Hi.x,Hi.y,0,0):Sn.Ye(Hi),Hi.offset(-Er,-Ad),Hi.rotate(-Nl-Me.angle)}z.free(Hi),null!==tn.graduatedBounds&&tn.graduatedBounds.push(Sn),Ze(jo,Sn.x,Sn.y,Sn.width,Sn.height)}else if(Me instanceof qt){var Nn=t,Ys=s;null===Nn.temporaryTextBlock&&(Nn.temporaryTextBlock=new qt);var en=Nn.temporaryTextBlock;gy(en,Me);var Fl=Me.alignmentFocus;Fl.Mc()&&(Fl=x);for(var Fn=Me.segmentOrientation,jr=Me.segmentOffset,Xs=new q,iu=0,nu=0,Hs=0,Dr=0,zr=0,Il=Ni.length,cr=0;cr<Il;cr++){var In=Ni[cr];iu=In.$l.x,nu=In.$l.y,Hs=In.angle,zr=Dr=Me.angle,Fn!==Ci&&(Dr=st.computeAngle(Fn,zr=Fn===kh||Fn===Ec?Hs+Me.angle:Hs)),en.Lb=Dr,en.text=In.text||"",en.measure(1/0,1/0,0,0);var Do=en.measuredBounds,Br=en.naturalBounds,so=Br.width,zo=Br.height,oo=Ot.alloc();oo.reset(),oo.translate(-Do.x,-Do.y),oo.scale(en.scale,en.scale),oo.rotate(zr,so/2,zo/2),Fn!==Mh&&Fn!==Ah||oo.rotate(90,so/2,zo/2),Fn!==Ch&&Fn!==Ph||oo.rotate(-90,so/2,zo/2),Fn===jc&&(45<Hs&&135>Hs||225<Hs&&315>Hs)&&oo.rotate(-Hs,so/2,zo/2);var ma=q.allocAt(0,0,so,zo),Bo=z.alloc();Bo.xi(ma,Fl),oo.Ga(Bo);var Ol=-Bo.x,ya=-Bo.y,ro=z.alloc();ro.assign(jr),isNaN(ro.x)&&(ro.x=so/2+3),isNaN(ro.y)&&(ro.y=-(zo/2+3)),ro.rotate(Hs);var su=new q(iu+=ro.x+Ol,nu+=ro.y+ya,Do.width,Do.height),El=new q(Do.x,Do.y,Do.width,Do.height),ou=new q(Br.x,Br.y,Br.width,Br.height);In.Tz=Dr,In.lineCount=en.lineCount,In.lines=[en.Db,en.Ih,en.df,en.Le,en.Qc,en.Rb,en.ze],In.actualBounds=su,In.measuredBounds=El,In.naturalBounds=ou,0===cr?Xs.assign(su):Xs.ed(su),z.free(ro),z.free(Bo),q.free(ma),Ot.free(oo)}null!==Nn.graduatedBounds&&Nn.graduatedBounds.push(Xs),Ze(Ys,Xs.x,Xs.y,Xs.width,Xs.height)}gn(Me,!1)}}},dh.prototype.arrange=function(t,e,i){if(null!==t.graduatedBounds){var n=t.Qb(),s=t.graduatedMarks;if(null!==s){var o=t.graduatedBounds,l=0,u=o[l];l++,null!==n&&n.arrange(u.x-i.x,u.y-i.y,u.width,u.height);for(var c=e.length,p=0;p<c;p++){var m=e[p];u=s[p],m.visible&&m!==n&&0!==u.length&&(u=o[l],l++,m.arrange(u.x-i.x,u.y-i.y,u.width,u.height))}t.graduatedBounds=null}}},dh.prototype.hc=function(t,e,i){var n=i.$i;i.$i=!0;var s=t.naturalBounds,o=s.width,l=s.height;s=e instanceof Ki,e.save(),e.beginPath(),e.rect(-1,-1,o+1,l+1),e.clip(),e.Se(),(o=t.Qb()).hc(e,i),0>=(l=t.Df()*i.scale)&&(l=1);for(var u=o.actualBounds,c=t.O.s,p=t.graduatedMarks,m=c.length,v=0;v<m;v++){var w=c[v],k=p[v],A=k.length;if(w.visible&&w!==o&&0!==k.length)if(w instanceof Pt){if(!(2>t.graduatedTickUnit*w.interval*o.geometry.flattenedTotalLength/t.graduatedRange*l&&null===w.graduatedSkip)){var T=w.measuredBounds,j=w.strokeWidth*w.scale,I=w.alignmentFocus;I.Mc()&&(I=x);for(var B=0;B<A;B++){var R=k[B].$l,H=k[B].angle,K=I,J=w.Bb;J.reset(),J.translate(R.x+u.x,R.y+u.y),J.rotate(H+w.angle,0,0),J.translate(-T.width*K.x+K.offsetX+j/2,-T.height*K.y+K.offsetY+j/2),J.scale(w.scale,w.scale),Ua(w,!1),w.wh.set(w.Bb),w.Jk=w.scale,Wo(w,!1),w.hc(e,i),s&&(t.svg.appendChild(w.svg),w.svg=null),w.Bb.reset()}}}else if(w instanceof qt)for(null===t.temporaryTextBlock&&(t.temporaryTextBlock=new qt),gy(T=t.temporaryTextBlock,w),j=0;j<A;j++)(I=k[j]).actualBounds&&I.measuredBounds&&I.naturalBounds&&(T.fc=I.text||"",T.Lb=I.Tz||0,T.Gc=I.lineCount||0,void 0!==(B=I.lines)&&(T.Db=B[0],T.Ih=B[1],T.df=B[2],T.Le=B[3],T.Qc=B[4],T.Rb=B[5],T.ze=B[6]),I.naturalBounds&&(T.ec=I.naturalBounds),I.actualBounds&&T.arrange((B=I.actualBounds).x,B.y,B.width,B.height),T.arrange((B=I.actualBounds).x,B.y,B.width,B.height),R=I.measuredBounds,I=I.naturalBounds,(H=T.Bb).reset(),H.translate(B.x+u.x,B.y+u.y),H.translate(-R.x,-R.y),T.no(H,I.x,I.y,I.width,I.height),Ua(T,!1),T.wh.set(T.Bb),T.Jk=T.scale,Wo(T,!1),T.Ng=w.part,T.Me=w.panel,T.hc(e,i),T.Me=null,T.Ng=null,s&&(t.svg.appendChild(T.svg),T.svg=null))}i.$i=n,e.restore(),e.Vc(!0)},Vt(nt,yt),nt.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.na=this.na,t.zb=this.zb.J(),t.Tm=this.Tm.J(),t.Uf=this.Uf,t.$e=this.$e,t.jg.assign(this.jg),null!==this.U&&(t.U=this.U.copy(t)),t.xo=this.xo,t.jn=this.jn.J(),t.kn=this.kn.J(),null!==this.ra&&(t.ra=this.ra.copy()),t.ub=this.ub,t.zn=this.zn,t.Hh=this.Hh},nt.prototype.Af=function(t){yt.prototype.Af.call(this,t),t.O=this.O;for(var e=t.O.s,i=e.length,n=0;n<i;n++)e[n].Me=t;t.$g=null},nt.prototype.copy=function(){var t=yt.prototype.copy.call(this);if(null!==t){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n].copy();s.wi(t),s.Ng=null;var o=t.O,l=o.count;if(o.Hb(l,s),null!==(o=t.part)){o.Rh=null,null!==s.portId&&o instanceof ct&&(o.Te=!0);var u=t.diagram;null!==u&&u.undoManager.isUndoingRedoing||o.cb(ze,"elements",t,null,s,null,l)}}return t}return null},(L=nt.prototype).toString=function(){return"Panel("+this.type.name+")#"+pi(this)},L.Pn=function(t){yt.prototype.Pn.call(this,t);for(var e=this.O.s,i=e.length,n=0;n<i;n++)e[n].Pn(t)},L.hh=function(t,e){if(this.na===nt.Grid)t.yc(),this.na.hc(this,t,e);else if(this.na===nt.Graduated)t.yc(),this.na.hc(this,t,e);else{if(this.na===nt.Table)if(t.yc(),t instanceof Ki){var i=t.yd;t.yd=Uu(t,"gojs-ts"),Wf(this,t),t.nh.pop(),t.yd=i}else Wf(this,t);(i=this.isClipping&&this.na===nt.Spot)&&t.save();for(var n=this.Qb(),s=this.O.s,o=s.length,l=0;l<o;l++){var u=s[l];i&&u===n&&(t.clipInsteadOfFill=!0),u.hc(t,e),i&&u===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Vc(!0))}},L.mv=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].mv();this.Uc=!0},L.jk=function(t,e,i){if(!yt.prototype.jk.call(this,t,e,i))return!1;if(this.type===nt.Table)null!==(i=0!==(i=this.svg.getElementsByClassName("gojs-ts")).length?i[0]:null)&&(i.innerHTML=""),t.yd=i,Wf(this,t),t.yd=null;else if(this.na===nt.Grid||this.na===nt.Graduated)return this.svg.innerHTML="",this.svg.remove(),!1;for(var n=(i=this.O.s).length,s=0;s<n;s++)i[s].hc(t,e);return!0},L.mk=function(){return!0},L.$o=function(t,e,i,n){if(!this.isClipping)if(this.Dd()&&null!==t.ak){t=t.ak,e=this.O.s;for(var s=0,o=0,l=0;l<e.length;l++)if(e[l].Ed()){var u=e[l].actualBounds;s=0===l?u.x:Math.min(u.x,s),o=0===l?u.y:Math.min(u.y,o)}n.setAttributeNS(null,"clip-path","path('M "+(t.x-i.x-s)+","+(t.y-i.y-o)+" l "+t.width+" 0 l 0 "+t.height+" l -"+t.width+" 0 z')")}else yt.prototype.$o.call(this,t,e,i,n)},L.Rj=function(t,e,i,n,s){var o=this.se(),l=this.transform,u=1/(l.m11*l.m22-l.m12*l.m21),c=l.m22*u,p=-l.m12*u,m=-l.m21*u,v=l.m11*u,w=u*(l.m21*l.dy-l.m22*l.dx),k=u*(l.m12*l.dx-l.m11*l.dy);if(null!==this.areaBackground)return _.Ff((l=this.actualBounds).left,l.top,l.right,l.bottom,t,e,i,n,s);if(null!==this.background)return o=t*c+e*m+w,u=t*p+e*v+k,t=i*c+n*m+w,c=i*p+n*v+k,s.h(0,0),o=_.Ff(0,0,(i=this.naturalBounds).width,i.height,o,u,t,c,s),s.transform(l),o;o||(c=1,m=p=0,v=1,k=w=0),u=t*c+e*m+w,t=t*p+e*v+k,s.h(c=i*c+n*m+w,i=i*p+n*v+k),n=(c-u)*(c-u)+(i-t)*(i-t),p=!1,k=(v=this.O.s).length,m=z.alloc(),w=null,e=1/0;var A=null,T=this.isClipping&&this.na===nt.Spot;T&&(A=z.alloc(),(p=(w=this.Qb()).Rj(u,t,c,i,A))&&(e=(u-A.x)*(u-A.x)+(t-A.y)*(t-A.y)));for(var j=0;j<k;j++){var I=v[j];I.visible&&I!==w&&I.Rj(u,t,c,i,m)&&(p=!0,(I=(u-m.x)*(u-m.x)+(t-m.y)*(t-m.y))<n&&(n=I,s.set(m)))}return T&&(e>n&&s.set(A),z.free(A)),z.free(m),o&&s.transform(l),p},L.Fj=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Fj();yt.prototype.Fj.call(this)},L.v=function(t){if(!vo(this)){yt.prototype.v.call(this,t),t=null,(this.na===nt.Auto||this.na===nt.Link)&&(t=this.Qb());for(var e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n];if((s===t||s.isPanelMain)&&s.v(!0),!s.desiredSize.w()){var o=ts(s,!1);(s instanceof Mi||s instanceof nt||s instanceof qt||o!==Se)&&s.v(!0)}}}},L.Tj=function(){if(!vo(this)){gn(this,!0),wr(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Tj()}},L.Tk=function(){if(!(2048&this.l)){Ua(this,!0),Wo(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Xu()}},L.Xu=function(){Wo(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Xu()},L.Wl=function(t,e,i,n){var s=this.jg;s.h(0,0,0,0);var o=this.desiredSize,l=this.minSize;void 0===i&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var u=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,u.width)),isNaN(o.height)||(e=Math.min(o.height,u.height)),t=Math.max(i,t),e=Math.max(n,e);var c=this.zb;t=Math.max(t-c.left-c.right,0),e=Math.max(e-c.top-c.bottom,0);var p=this.O.s;0!==p.length&&this.na.measure(this,t,e,p,s,i,n),t=s.width+c.left+c.right,c=s.height+c.top+c.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(c=o.height),t=Math.min(u.width,t),c=Math.min(u.height,c),t=Math.max(l.width,t),c=Math.max(l.height,c),Zn(s,t=Math.max(i,t),c=Math.max(n,c)),Zn(this.naturalBounds,t,c),this.Ge(0,0,t,c)},L.Qb=function(){if(null===this.$g){var t=this.O.s,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.isPanelMain)return this.$g=n}this.$g=t[0]}return this.$g},L.eh=function(t,e,i,n){var s=this.O.s;if(this.actualBounds.h(t,e,i,n),0!==s.length){if(!this.desiredSize.w()){t=ts(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var l=this.Kg,u=l.left+l.right;switch(l=l.top+l.bottom,e===i&&o===n&&(t=Se),t){case Se:(e>i||o>n)&&(this.v(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case Ce:this.v(!0),this.measure(i+u,n+l,0,0);break;case ri:this.v(!0),this.measure(i+u,o+l,0,0);break;case di:this.v(!0),this.measure(e+u,n+l,0,0)}}this.na.arrange(this,s,this.jg)}},L.gh=function(t){var e=this.naturalBounds,i=Js(this);if(kn(0,0,e.width,e.height,t.x,t.y)){for(var n=(e=this.O.s).length,s=z.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(ui(s.set(t),o.transform),o.ca(s)))return z.free(s),!0}return z.free(s),!(null===this.Ma&&null===this.areaBackground)}return!1},L.ks=function(t){if(this.bindingId===t)return this;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n].ks(t);if(null!==s)return s}return null},L.qm=function(t,e){if(e(this,t),t instanceof nt)for(var i=(t=t.O.s).length,n=0;n<i;n++)this.qm(t[n],e)},L.Nl=function(t){return oy(this,this,t)},L.fb=function(t){if(this.name===t)return this;var e=this.O.s,i=e.length;null===this.Hh&&null===this.itemTemplateMap||(i=fh(this));for(var n=0;n<i;n++){var s=e[n];if(s instanceof nt){var o=s.fb(t);if(null!==o)return o}if(s.name===t)return s}return null},L.se=function(){return!(this.type===nt.TableRow||this.type===nt.TableColumn)},L.jc=function(t,e,i){if(!1===this.pickable||(void 0===e&&(e=null),void 0===i&&(i=null),Bn(this)))return null;var n=this.naturalBounds,s=1/this.Df(),o=this.se(),l=o?t:ui(z.allocAt(t.x,t.y),this.transform),u=this.diagram,c=10,p=5;if(null!==u&&(p=(c=u.Ql("extraTouchArea"))/2),kn(-p*s,-p*s,n.width+c*s,n.height+c*s,l.x,l.y)){if(!this.isAtomic){var m=(s=this.O.s).length;if(u=z.alloc(),p=(c=this.isClipping&&this.na===nt.Spot)?this.Qb():null,c&&(p.se()?ui(u.set(t),p.transform):u.set(t),!p.ca(u)))return z.free(u),o||z.free(l),null;for(var v=Js(this);m--;){var w=s[m];if((w.visible||w===v)&&(w.se()?ui(u.set(t),w.transform):u.set(t),!c||w!==p)){var k=null;if(w instanceof nt?k=w.jc(u,e,i):!0===w.pickable&&w.ca(u)&&(k=w),null!==k&&(null!==e&&(k=e(k)),null!==k&&(null===i||i(k))))return z.free(u),o||z.free(l),k}}z.free(u)}return null===this.background&&null===this.areaBackground?(o||z.free(l),null):(t=kn(0,0,n.width,n.height,l.x,l.y)?this:null,o||z.free(l),t)}return o||z.free(l),null},L.ji=function(t,e,i,n){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var s=this.naturalBounds,o=this.se(),l=o?t:ui(z.allocAt(t.x,t.y),this.transform);if(s=kn(0,0,s.width,s.height,l.x,l.y),bo(this)||s){if(!this.isAtomic){for(var u=this.O.s,c=u.length,p=z.alloc(),m=Js(this);c--;){var v=u[c];if(v.visible||v===m){v.se()?ui(p.set(t),v.transform):p.set(t);var w=v;(null!==(v=v instanceof nt?v:null)?v.ji(p,e,i,n):w.ca(p))&&!1!==w.pickable&&(null!==e&&(w=e(w)),null===w||null!==i&&!i(w)||n.add(w))}}z.free(p)}return o||z.free(l),s&&(null!==this.background||null!==this.areaBackground)}return o||z.free(l),!1},L.Cf=function(t,e,i,n,s,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var l=o;if(void 0===o&&(l=Ot.alloc()).reset(),l.multiply(this.transform),this.fh(t,l))return Kf(this,e,i,s),void 0===o&&Ot.free(l),!0;if(this.Yc(t,l)){if(!this.isAtomic)for(var u=Js(this),c=this.O.s,p=c.length;p--;){var m=c[p];if(m.visible||m===u){var v=m.actualBounds,w=this.naturalBounds;v.x>w.width||v.y>w.height||0>v.x+v.width||0>v.y+v.height||(v=m,m=m instanceof nt?m:null,(w=Ot.alloc()).set(l),(null!==m?m.Cf(t,e,i,n,s,w):Ym(v,t,n,w))&&(null!==e&&(v=e(v)),null===v||null!==i&&!i(v)||s.add(v)),Ot.free(w))}}return void 0===o&&Ot.free(l),n}return void 0===o&&Ot.free(l),!1},L.og=function(t,e,i,n,s,o){if(!1===this.pickable)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var l=this.naturalBounds,u=this.se(),c=u?t:ui(z.allocAt(t.x,t.y),this.transform),p=u?e:ui(z.allocAt(e.x,e.y),this.transform),m=c.Bf(p),v=0<c.x&&c.x<l.width&&0<c.y&&c.y<l.height||oi(c.x,c.y,0,0,0,l.height)<=m||oi(c.x,c.y,0,l.height,l.width,l.height)<=m||oi(c.x,c.y,l.width,l.height,l.width,0)<=m||oi(c.x,c.y,l.width,0,0,0)<=m;if(l=c.zd(0,0)<=m&&c.zd(0,l.height)<=m&&c.zd(l.width,0)<=m&&c.zd(l.width,l.height)<=m,u||(z.free(c),z.free(p)),v){if(!this.isAtomic){c=z.alloc(),p=z.alloc(),m=Js(this);for(var w=this.O.s,k=w.length;k--;){var A=w[k];if(A.visible||A===m){var T=A.actualBounds,j=this.naturalBounds;(!u||!(T.x>j.width||T.y>j.height||0>T.x+T.width||0>T.y+T.height))&&(A.se()?(T=A.transform,ui(c.set(t),T),ui(p.set(e),T)):(c.set(t),p.set(e)),T=A,(null!==(A=A instanceof nt?A:null)?A.og(c,p,i,n,s,o):T.ux(c,p,s))&&(null!==i&&(T=i(T)),null===T||null!==n&&!n(T)||o.add(T)))}}z.free(c),z.free(p)}return s?v:l}return!1},L.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.Hb(this.O.count,e[i]);return this},L.M=function(t){return this.O.M(t)},L.Hb=function(t,e){e instanceof vt&&Q("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.rg(e))&&(this===e&&Q("Cannot make a Panel contain itself: "+this.toString()),Q("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(null!==i&&i!==this&&Q("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==nt.Grid||e instanceof Pt||Q("Can only add Shapes to a Grid Panel, not: "+e),this.na!==nt.Graduated||e instanceof Pt||e instanceof qt||Q("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.wi(this),e.Ng=null,null!==this.itemArray){var n=e.data;null!==n&&"object"==typeof n&&(null===this.ge&&(this.ge=new kt),this.ge.add(n,e))}var s=this.O;if(n=-1,i===this){for(var o=-1,l=this.O.s,u=l.length,c=0;c<u;c++)if(l[c]===e){o=c;break}if(-1!==o){if(o===t||o+1>=s.count&&t>=s.count)return;s.mb(o),n=o}else Q("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>s.count)&&(t=s.count),s.Hb(t,e),(0===t||e.isPanelMain)&&(this.$g=null),vo(this)||this.v(),e.v(!1),(null!==e.portId||e instanceof nt&&!0===e.Te)&&(this.Te=!0),this.graduatedIntervals=null,this.If()||lc(this,e,!1),null!==(i=this.part)&&(i.Rh=null,i.ag=NaN,this.Te&&i instanceof ct&&(i.Te=!0),i.Te&&i instanceof ct&&(i.wc=null),null!==(s=this.diagram)&&s.undoManager.isUndoingRedoing||(-1!==n&&i.cb(Ue,"elements",this,e,null,n,null),i.cb(ze,"elements",this,null,e,null,t)))},L.remove=function(t){for(var e=this.O.s,i=e.length,n=-1,s=0;s<i;s++)if(e[s]===t){n=s;break}-1!==n&&this.qc(n,!0)},L.mb=function(t){0<=t&&this.qc(t,!0)},L.qc=function(t,e){var i=this.O,n=i.M(t);if(n.Ng=null,n.wi(null),null!==this.ge){var s=n.data;"object"==typeof s&&this.ge.remove(s)}i.mb(t),gn(this,!1),this.v(),this.$g===n&&(this.$g=null),this.graduatedIntervals=null;var o=this.part;null!==o&&(o.Rh=null,o.ag=NaN,o.Xb(),o instanceof ct&&(n instanceof nt?n.qm(n,function(l,u){xp(o,u,e)}):xp(o,n,e)),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||o.cb(Ue,"elements",this,n,null,t,null))},L.Gb=function(t){0>t&&ie(t,">= 0",nt,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(void 0===e[t]){var i=new Fe;i.wi(this),i.isRow=!0,i.index=t,e[t]=i,this.cb(ze,"rowdefs",this,null,i,null,t)}return e[t]},L.pA=function(t){if(0>t&&ie(t,">= 0",nt,"removeRowDefinition:idx"),0!==this.rowCount){t=Math.round(t);var e=this.rowDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.cb(Ue,"rowdefs",this,i,null,t,null),this.v()}}},L.Fb=function(t){0>t&&ie(t,">= 0",nt,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(void 0===e[t]){var i=new Fe;i.wi(this),i.isRow=!1,i.index=t,e[t]=i,this.cb(ze,"coldefs",this,null,i,null,t)}return e[t]},L.kA=function(t){if(0>t&&ie(t,">= 0",nt,"removeColumnDefinition:idx"),0!==this.columnCount){t=Math.round(t);var e=this.colDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.cb(Ue,"coldefs",this,i,null,t,null),this.v()}}},L.Hy=function(t){var e=null;return t.isRow?e=this.Gb(t.index):t.isRow||(e=this.Fb(t.index)),e&&hc(e,t),this},L.Iy=function(t,e){return(t=this.Gb(t))&&hc(t,new Fe(e)),this},L.Cy=function(t,e){return(t=this.Fb(t))&&hc(t,new Fe(e)),this},L.oz=function(t){if(0>t||this.type!==nt.Table||0===this.rowCount)return-1;for(var e=0,i=this.rowDefs,n=i.length,s=this.topIndex;s<n;s++){var o=i[s];if(void 0!==o&&t<(e+=o.total))break}return s},L.gz=function(t){if(0>t||this.type!==nt.Table||0===this.columnCount)return-1;for(var e=0,i=this.colDefs,n=i.length,s=this.leftIndex;s<n;s++){var o=i[s];if(void 0!==o&&t<(e+=o.total))break}return s},L.Gz=function(t,e){if(void 0===e&&(e=new z(NaN,NaN)),this.type!==nt.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.Qb();return i.geometry.Qu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Ga(e)},L.Hz=function(t){if(this.type!==nt.Graduated)return NaN;var e=this.Qb();return e.transform.Cd(t),e.geometry.yx(t)*this.graduatedRange+this.graduatedMin},L.Vy=function(t){void 0===t&&(t=!1);var e=this.copy();return H0(e,function(i){i instanceof nt&&(i.allBindings=null,i.ub=null);var n=i.localBindings;null!==n&&(i.localBindings=null,n.each(function(s){i.bind(s.copy())})),null!==(n=i.animationTriggers)&&(i.animationTriggers=null,n.each(function(s){i.Kv(s.value.copy())}))}),t&&An(e),e},L.La=function(t){var e=this.allBindings;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((""===t||""===n||n===t)&&(n=i.targetProperty,null!==i.converter||""!==n)){n=this.data;var s=i.sourceName;if(null!==s){if(""===s)n=this;else if("/"===s)n=this;else if("."===s)n=this;else if(".."===s)n=this;else if(null===(n=this.fb(s)))continue}else if(i.isToModel){if(null===(n=this.diagram))continue;n=n.model.modelData}var o=this,l=i.Ai;if(-1!==l){if(null===(o=this.ks(l)))continue}else null!==i.xd&&(o=i.xd);if("/"===s?n=o.part:"."===s?n=o:".."===s&&(n=o.panel),0!==(s=i.to)){if(!(o instanceof nt))continue;1===s?o=o.Fb(i.wl):2===s&&(o=o.Gb(i.wl))}void 0!==o&&i.Nv(o,n)}}},L.tx=function(t){return null==t||null===this.ge?null:this.ge.I(t)},L.nv=function(){for(var t=fh(this);this.O.length>t;)this.qc(this.O.length-1,!1);uy(this,this.itemArray)},Tt.Object.defineProperties(nt.prototype,{type:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.isAtomic=this.na===nt.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.O.iterator}},naturalBounds:{get:function(){return this.ec}},padding:{get:function(){return this.zb},set:function(t){"number"==typeof t?(0>t&&ie(t,">= 0",nt,"padding"),t=new Gt(t)):(0>t.left&&ie(t.left,">= 0",nt,"padding:value.left"),0>t.right&&ie(t.right,">= 0",nt,"padding:value.right"),0>t.top&&ie(t.top,">= 0",nt,"padding:value.top"),0>t.bottom&&ie(t.bottom,">= 0",nt,"padding:value.bottom"));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e.D(t)||(this.Tm=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return null!==this.U?this.U.Qp:a},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.defaultSeparatorPadding;e.D(t)||(t=t.J(),null===this.U&&(this.U=new vn),this.U.Qp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return null!==this.U?this.U.ia:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Wt)&&(t instanceof Wt&&t.freeze(),null===this.U&&(this.U=new vn),this.U.ia=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return null!==this.U?this.U.Ha:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.U&&(this.U=new vn),this.U.Ha=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return null!==this.U?this.U.V:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(null!==t){for(var i=t.length,n=0,s=0;s<i;s++){var o=t[s];"number"==typeof o&&0<=o&&isFinite(o)||Q("defaultRowSeparatorDashArray value "+o+" at index "+s+" must be a positive number or zero."),n+=o}if(0===n){if(null===e)return;t=null}}null===this.U&&(this.U=new vn),this.U.V=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return null!==this.U?this.U.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Wt)&&(t instanceof Wt&&t.freeze(),null===this.U&&(this.U=new vn),this.U.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return null!==this.U?this.U.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.U&&(this.U=new vn),this.U.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return null!==this.U?this.U.o:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(null!==t){for(var i=t.length,n=0,s=0;s<i;s++){var o=t[s];"number"==typeof o&&0<=o&&isFinite(o)||Q("defaultColumnSeparatorDashArray value "+o+" at index "+s+" must be a positive number or zero."),n+=o}if(0===n){if(null===e)return;t=null}}null===this.U&&(this.U=new vn),this.U.o=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return null!==this.U?this.U.nb:null},set:function(t){null===this.U&&(this.U=new vn),this.U.nb=t}},viewboxStretch:{get:function(){return this.xo},set:function(t){var e=this.xo;e!==t&&(this.xo=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.jn},set:function(t){var e=this.jn;if(!e.D(t)){t.w()&&0!==t.width&&0!==t.height||Q("Invalid Panel.gridCellSize: "+t),this.jn=t.J();var i=this.diagram;null!==i&&this===i.grid&&mo(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.kn},set:function(t){var e=this.kn;if(!e.D(t)){t.w()||Q("Invalid Panel.gridOrigin: "+t),this.kn=t.J();var i=this.diagram;null!==i&&this===i.grid&&mo(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return null!==this.ra?this.ra.lq:0},set:function(t){var e=this.graduatedMin;e!==t&&(null===this.ra&&(this.ra=new $s),this.ra.lq=t,this.v(),this.g("graduatedMin",e,t),qr(this)&&null!==(t=this.part)&&xr(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return null!==this.ra?this.ra.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(null===this.ra&&(this.ra=new $s),this.ra.F=t,this.v(),this.g("graduatedMax",e,t),qr(this)&&null!==(t=this.part)&&xr(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return null!==this.ra?this.ra.ia:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(null===this.ra&&(this.ra=new $s),this.ra.ia=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return null!==this.ra?this.ra.V:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(null===this.ra&&(this.ra=new $s),this.ra.V=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return null!==this.ra?this.ra.u:null},set:function(t){null!==this.ra?this.ra.u=t:null!==t&&(this.ra=new $s,this.ra.u=t)}},graduatedBounds:{get:function(){return null!==this.ra?this.ra.j:null},set:function(t){null!==this.ra?this.ra.j=t:null!==t&&(this.ra=new $s,this.ra.j=t)}},graduatedIntervals:{get:function(){return null!==this.ra?this.ra.o:null},set:function(t){null!==this.ra?this.ra.o=t:null!==t&&(this.ra=new $s,this.ra.o=t)}},temporaryTextBlock:{get:function(){return null!==this.ra?this.ra.Zh:null},set:function(t){null!==this.ra?this.ra.Zh=t:null!==t&&(this.ra=new $s,this.ra.Zh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Te:{get:function(){return 0!=(8388608&this.l)},set:function(t){0!=(8388608&this.l)!==t&&(this.l^=8388608)}},rowDefs:{get:function(){return null===this.U&&(this.U=new vn),this.U.Pc}},rowCount:{get:function(){return null===this.U?0:this.rowDefs.length}},colDefs:{get:function(){return null===this.U&&(this.U=new vn),this.U.Oc}},columnCount:{get:function(){return null===this.U?0:this.colDefs.length}},rowSizing:{get:function(){return null!==this.U?this.U.ob:cc},set:function(t){var e=this.rowSizing;e!==t&&(null===this.U&&(this.U=new vn),this.U.ob=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return null!==this.U?this.U.j:cc},set:function(t){var e=this.columnSizing;e!==t&&(null===this.U&&(this.U=new vn),this.U.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return null!==this.U?this.U.Ib:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&Q("Panel.topIndex must be greater than zero and a real number, not: "+t),null===this.U&&(this.U=new vn),this.U.Ib=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return null!==this.U?this.U.hb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&Q("Panel.leftIndex must be greater than zero and a real number, not: "+t),null===this.U&&(this.U=new vn),this.U.hb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.ub},set:function(t){var e=this.ub;if(e!==t){var i=this instanceof vt&&!(this instanceof Bt);An(this),this.ub=t;var n=this.diagram;null!==n&&(i?(i=n.partManager,this instanceof st?(null!==e&&i.bf.remove(e),null!==t&&i.bf.add(t,this)):this instanceof vt&&(null!==e&&i.cf.remove(e),null!==t&&i.cf.add(t,this))):null!==(i=this.panel)&&null!==i.ge&&(null!==e&&i.ge.remove(e),null!==t&&i.ge.add(t,this))),this.g("data",e,t),null!==n&&n.undoManager.isUndoingRedoing||null!==t&&this.La()}}},itemIndex:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return null!==this.A?this.A.nb:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new ta),this.A.nb=t)}},itemArray:{get:function(){return this.Hh},set:function(t){var e=this.Hh;if(e!==t||null!==t&&function V0(t,e){for(var i=(t=t.O.s).length,n=e.length,s=0,o=null;s<i&&!((o=t[s])instanceof nt&&null!==o.data);)o=t[++s];if(i-s!==n)return!0;if(null===o)return 0<n;for(var l=0;s<i&&l<n;){if(!((o=t[s])instanceof nt)||o.data!==e[l])return!0;s++,l++}return!1}(this,t)){var i=this.diagram;e!==t&&(null!==i&&null!==e&&Bp(i.partManager,this,i),this.Hh=t,null!==i&&null!==t&&zp(i.partManager,this)),this.g("itemArray",e,t),null!==i&&i.undoManager.isUndoingRedoing||uy(this,t)}}},itemTemplate:{get:function(){return null===this.itemTemplateMap?null:this.itemTemplateMap.I("")},set:function(t){if(null===this.itemTemplateMap){if(null===t)return;this.itemTemplateMap=new kt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof vt||t.isPanelMain)&&Q("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.nv())}},itemTemplateMap:{get:function(){return null!==this.A?this.A.Pc:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var i=t.iterator;i.next(););Be(this),this.A.Pc=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.nv()}}},itemCategoryProperty:{get:function(){return null!==this.A?this.A.Oc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(Be(this),this.A.Oc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.l)},set:function(t){var e=0!=(2097152&this.l);e!==t&&(this.l^=2097152,this instanceof At&&(this.tb=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.l)},set:function(t){var e=0!=(33554432&this.l);e!==t&&(this.l^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.l)},set:function(t){var e=0!=(4194304&this.l);if(e!==t){var i=null===this.panel||this.panel.If();this.l^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||i&&lc(this,this,t)}}},alignmentFocusName:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.v(),this.g("alignmentFocusName",e,t))}}}),Tt.Object.defineProperties(nt,{Position:{get:function(){return Rn.I("Position")}},Horizontal:{get:function(){return Rn.I("Horizontal")}},Vertical:{get:function(){return Rn.I("Vertical")}},Spot:{get:function(){return Rn.I("Spot")}},Auto:{get:function(){return Rn.I("Auto")}},Table:{get:function(){return Rn.I("Table")}},Viewbox:{get:function(){return Rn.I("Viewbox")}},TableRow:{get:function(){return Rn.I("TableRow")}},TableColumn:{get:function(){return Rn.I("TableColumn")}},Link:{get:function(){return Rn.I("Link")}},Grid:{get:function(){return Rn.I("Grid")}},Graduated:{get:function(){return Rn.I("Graduated")}}}),nt.prototype.rebuildItemElements=nt.prototype.nv,nt.prototype.findItemPanelForData=nt.prototype.tx,nt.prototype.updateTargetBindings=nt.prototype.La,nt.prototype.copyTemplate=nt.prototype.Vy,nt.prototype.graduatedValueForPoint=nt.prototype.Hz,nt.prototype.graduatedPointForValue=nt.prototype.Gz,nt.prototype.findColumnForLocalX=nt.prototype.gz,nt.prototype.findRowForLocalY=nt.prototype.oz,nt.prototype.addColumnDefinition=nt.prototype.Cy,nt.prototype.addRowDefinition=nt.prototype.Iy,nt.prototype.addRowColumnDefinition=nt.prototype.Hy,nt.prototype.removeColumnDefinition=nt.prototype.kA,nt.prototype.getColumnDefinition=nt.prototype.Fb,nt.prototype.removeRowDefinition=nt.prototype.pA,nt.prototype.getRowDefinition=nt.prototype.Gb,nt.prototype.removeAt=nt.prototype.mb,nt.prototype.remove=nt.prototype.remove,nt.prototype.insertAt=nt.prototype.Hb,nt.prototype.elt=nt.prototype.M,nt.prototype.add=nt.prototype.add,nt.prototype.findObject=nt.prototype.fb,nt.prototype.findInVisualTree=nt.prototype.Nl,nt.prototype.walkVisualTreeFrom=nt.prototype.qm,nt.prototype.findMainElement=nt.prototype.Qb;var cy=!1,dy=null,Rn=new kt;function $s(){this.lq=0,this.F=100,this.ia=10,this.V=0,this.Zh=this.o=this.j=this.u=null}function vn(){this.Pc=[],this.Oc=[],this.j=this.ob=cc,this.hb=this.Ib=0,this.Qp=a,this.Ha=1,this.V=this.ia=null,this.F=1,this.nb=this.o=this.u=null}function Fe(t){Ye(this),this.Me=null,this.uq=!0,this.Za=0,this.Hc=NaN,this.jj=0,this.hj=1/0,this.Kb=Nt,this.pa=this.pc=this.oa=0,this.be=null,this.oo=tp,this.hg=zn,this.lo=this.dg=null,this.mo=NaN,this.Ma=this.tj=null,this.Pm=!1,t&&(Object.assign(this,t),void 0!==t.column?(this.isRow=!1,this.index=t.column):void 0!==t.row&&(this.isRow=!0,this.index=t.row))}function hc(t,e){e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.dg=null===e.separatorPadding?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.tj=null,e.separatorDashArray&&(t.tj=Ro(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.be=e.be}function uc(t){if(t.sizing===tp){var e=t.Me;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}nt.className="Panel",nt.definePanelLayout=ps,ps("Position",new Zu),ps("Vertical",new $u),ps("Auto",new qu),ps("Link",new oc),$s.prototype.copy=function(){var t=new $s;return t.lq=this.lq,t.F=this.F,t.ia=this.ia,t.V=this.V,t.u=this.u,t.j=this.j,t.o=this.o,t.Zh=this.Zh,t},$s.className="GradPanelSettings",vn.prototype.copy=function(t){for(var e=new vn,i=this.Pc,n=i.length,s=e.Pc,o=0;o<n;o++)if(void 0!==i[o]){var l=i[o].copy();l.wi(t),s[o]=l}for(n=(i=this.Oc).length,s=e.Oc,o=0;o<n;o++)void 0!==i[o]&&((l=i[o].copy()).wi(t),s[o]=l);return e.ob=this.ob,e.j=this.j,e.Ib=this.Ib,e.hb=this.hb,e.Qp=this.Qp.J(),e.Ha=this.Ha,e.ia=this.ia,e.V=this.V,e.F=this.F,e.u=this.u,e.o=this.o,e.nb=this.nb,e},vn.className="TablePanelSettings",Fe.prototype.copy=function(){var t=new Fe;return t.uq=this.uq,t.Za=this.Za,t.Hc=this.Hc,t.jj=this.jj,t.hj=this.hj,t.Kb=this.Kb,t.oa=this.oa,t.pc=this.pc,t.pa=this.pa,t.hg=this.hg,t.oo=this.oo,t.dg=null===this.dg?null:this.dg.J(),t.lo=this.lo,t.mo=this.mo,t.tj=null,null!==this.tj&&(t.separatorDashArray=Ro(this.separatorDashArray)),t.Ma=this.Ma,t.Pm=this.Pm,t.be=this.be,t},(L=Fe.prototype).qb=function(t){t.classType===Fe&&(this.sizing=t)},L.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+pi(this)},L.wi=function(t){this.Me=t},L.Io=function(t){var e=0,i=this.Me;if(this.index!==t&&(null===(t=this.separatorStroke)&&null!==i&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==i?this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:0))),null===(t=this.dg)){if(null===i)return e;t=i.defaultSeparatorPadding}return e+(this.isRow?t.top:t.left)},L.Wc=function(){var t=0,e=this.Me,i=0,n=this.isRow;if(null!==e&&e.type===nt.Table)for(var s=n?e.rowDefs.length:e.colDefs.length,o=0;o<s;o++){var l=n?e.rowDefs[o]:e.colDefs[o];if(void 0!==l&&0!==l.oa){i=l.index;break}}if(this.index!==i&&(null===(i=this.separatorStroke)&&null!==e&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==i&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(n=this.dg)){if(null===e)return t;n=e.defaultSeparatorPadding}return t+(this.isRow?n.top+n.bottom:n.left+n.right)},L.Pb=function(t,e,i){var n=this.Me;if(null!==n&&(n.cb(de,t,this,e,i,void 0,void 0),null!==this.be&&null!==(e=n.diagram)&&!e.skipsModelSourceBindings&&null!==(n=n.ih())&&null!==(e=n.data)))for(i=this.be.iterator;i.next();)i.value.sp(this,e,t,n)},L.bind=function(t,e,i,n){var s=null;return(s="string"==typeof t?new Ae(t,e,i,n):t).xd=this,null!==(t=this.panel)&&null!==(e=t.ih())&&hy(e)&&Q("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+s+" on "+t),null===this.be&&(this.be=new dt),this.be.add(s),this},Tt.Object.defineProperties(Fe.prototype,{panel:{get:function(){return this.Me}},isRow:{get:function(){return this.uq},set:function(t){this.uq=t}},index:{get:function(){return this.Za},set:function(t){this.Za=t}},height:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(0>t&&ie(t,">= 0",Fe,"height"),this.Hc=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("height",e,t))}},width:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(0>t&&ie(t,">= 0",Fe,"width"),this.Hc=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("width",e,t))}},minimum:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&((0>t||!isFinite(t))&&ie(t,">= 0",Fe,"minimum"),this.jj=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("minimum",e,t))}},maximum:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(0>t&&ie(t,">= 0",Fe,"maximum"),this.hj=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("maximum",e,t))}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(this.Kb=t.J(),null!==this.panel&&this.panel.v(),this.Pb("alignment",e,t))}},stretch:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,null!==this.panel&&this.panel.v(),this.Pb("stretch",e,t))}},separatorPadding:{get:function(){return this.dg},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.dg;null!==t&&null!==e&&e.D(t)||(null!==t&&(t=t.J()),this.dg=t,null!==this.panel&&this.panel.v(),this.Pb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(null!==t&&ia(t,"RowColumnDefinition.separatorStroke"),t instanceof Wt&&t.freeze(),this.lo=t,null!==this.panel&&this.panel.v(),this.Pb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,null!==this.panel&&this.panel.v(),this.Pb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.tj},set:function(t){var e=this.tj;if(e!==t){if(null!==t){for(var i=t.length,n=0,s=0;s<i;s++){var o=t[s];"number"==typeof o&&0<=o&&isFinite(o)||Q("separatorDashArray value "+o+" at index "+s+" must be a positive number or zero."),n+=o}if(0===n){if(null===e)return;t=null}}this.tj=t,null!==this.panel&&this.panel.N(),this.Pb("separatorDashArray",e,t)}}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(null!==t&&ia(t,"RowColumnDefinition.background"),t instanceof Wt&&t.freeze(),this.Ma=t,null!==this.panel&&this.panel.N(),this.Pb("background",e,t))}},coversSeparators:{get:function(){return this.Pm},set:function(t){var e=this.Pm;e!==t&&(this.Pm=t,null!==this.panel&&this.panel.N(),this.Pb("coversSeparators",e,t))}},sizing:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,null!==this.panel&&this.panel.v(),this.Pb("sizing",e,t))}},actual:{get:function(){return this.oa},set:function(t){this.oa=isNaN(this.Hc)?Math.max(Math.min(this.hj,t),this.jj):Math.max(Math.min(this.hj,this.Hc),this.jj)}},measured:{get:function(){return this.pc},set:function(t){this.pc=t}},total:{get:function(){return this.oa+this.Wc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),Fe.prototype.computeEffectiveSpacing=Fe.prototype.Wc,Fe.prototype.computeEffectiveSpacingTop=Fe.prototype.Io;var tp=new ut(Fe,"Default",0),ph=new ut(Fe,"None",1),cc=new ut(Fe,"ProportionalExtra",2);function Pt(t,e){yt.call(this),this.Rd=this.ua=null,this.an="None",this.xc=this.Ui="black",this.ig=1,this.Na=this.Yg=null,this.Vn=this.Un=NaN,this.fa=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Cr(t){null===t.Na?t.Na=new np:t.Na.oc&&(t.Na=t.Na.copy())}function el(t,e,i,n){var s=i.length;if(!(4>s)){var o=n.measuredBounds,l=Math.max(1,o.width);o=o.height;for(var p,m,v,w,k,A,u=i[0],c=i[1],T=0,j=Xt(),I=2;I<s;I+=2)0==(v=(p=i[I])-u)&&(v=.001),w=(u=(m=i[I+1])-c)/v,k=Math.atan2(u,v),A=Math.sqrt(v*v+u*u),j.push([v,k,w,A]),T+=A,u=p,c=m;u=i[0],c=i[1],v=n.measuredBounds.width,n instanceof Pt&&(v-=n.strokeWidth),1>v&&(v=1),s=i=v,m=0!=(p=l/2),v=(A=j[I=0])[0],k=A[1],w=A[2],A=A[3];for(var B=0;.1<=T;){if(0===B&&(m?(s=i,s-=p,T-=p,m=!1):s=i,0===s&&(s=1)),s>T)return void Zt(j);s>A?(B=s-A,s=A):B=0;var R=Math.sqrt(s*s/(1+w*w));if(0>v&&(R=-R),t.translate(u+=R,c+=w*R),t.rotate(k),t.translate(-l/2,-o/2),0===B&&n.hh(t,e),t.translate(l/2,o/2),t.rotate(-k),t.translate(-u,-c),T-=s,A-=s,0!==B){if(++I===j.length)return void Zt(j);v=(A=j[I])[0],k=A[1],w=A[2],A=A[3],s=B}}Zt(j)}}function ep(t){var e=t.geometryStretch;return null!==t.Rd?e===zn?Ce:e:e===zn?ip[t.figure].defaultStretch:e}function dc(t,e,i,n,s){return(e=(t=i.x-t)*t+(e=i.y-e)*e)<n?(s.x=i.x,s.y=i.y,e):n}function fc(t,e,i,n,s,o,l,u,c){if(_.$(t,i)&&_.$(e,n)||_.$(s,l)&&_.$(o,u))return!1;var p=!1,m=(s-l)*(e-n)-(o-u)*(t-i);return 0!==m&&(c.x=((s*u-o*l)*(t-i)-(s-l)*(t*n-e*i))/m,c.y=((s*u-o*l)*(e-n)-(o-u)*(t*n-e*i))/m,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(c.y>t||_.$(c.y,t))&&(c.y<e||_.$(c.y,e))&&(p=!0)):(e=t<i?t:i,t=t<i?i:t,(c.x>e||_.$(c.x,e))&&(c.x<t||_.$(c.x,t))&&(p=!0)),p)}function Ar(t,e,i,n){if(!t.rs(e,i,n))return!1;t=e.x,e=e.y;var s=i.x,o=i.y;return i=n.x,n=n.y,t===s?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<s?(n=t,t=s):n=s,i>=n&&i<=t)}function fy(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=kh,"None"!==t.toArrow?(t.segmentIndex=-1,t.alignmentFocus=Le):"None"!==t.fromArrow&&(t.segmentIndex=0,t.alignmentFocus=new f(1-Le.x,Le.y)))}function py(t){var e=Ls[t];if(void 0===e){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(e=Ls[i])){var s,n=null;for(s in _.um)if(s.toLowerCase()===i){n=s;break}if(null!==n)return t=rt.parse(_.um[n],!1),Ls[n]=t,i!==n&&(Ls[i]=n),n}}return"string"==typeof e?e:e instanceof rt?t:null}Fe.className="RowColumnDefinition",Fe.Default=tp,Fe.None=ph,Fe.ProportionalExtra=cc,Vt(Pt,yt),Pt.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.ua=this.ua,t.Rd=this.Rd,t.an=this.an,t.Ui=this.Ui,t.xc=this.xc,t.ig=this.ig,null!==this.Yg&&(t.Yg=Ro(this.Yg)),null!==this.Na&&(t.Na=this.Na.oc?this.Na:this.Na.copy()),t.Un=this.Un,t.Vn=this.Vn,null!==this.fa&&(t.fa=this.fa.copy())},(L=Pt.prototype).th=function(){yt.prototype.th.call(this),null!==this.Na&&(this.Na.oc=!0)},L.qb=function(t){t===Se||t===ds||t===nh||t===zn?this.geometryStretch=t:yt.prototype.qb.call(this,t)},L.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+pi(this)},L.hh=function(t,e){var i=this.xc,n=this.Ui;if(null!==i||null!==n){var s=this.ua;if(null!==s){t.yc();var o=this.actualBounds,l=this.naturalBounds;null!==n&&sn(this,t,n,!0,!1,l,o);var u=this.part,c=this.ig;if(null===i||0!==c||null===u||!this.isPanelMain&&u.Qb()!==this||(c=u.type===nt.Link&&u instanceof Bt&&"Selection"===u.category&&u.adornedObject instanceof Pt&&u.adornedPart.Qb()===u.adornedObject?u.adornedObject.strokeWidth:0),0===c&&(i=null),null!==i&&0!==c&&(sn(this,t,i,!1,!1,l,o),t.lineWidth=c,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),o=!1,u&&e.Gf("drawShadows")&&(o=u.isShadowed),!1===t.Il&&(o=!1),u=!0,null===i||null!==n&&"transparent"!==n||(u=!1),l=!1,null!==(c=this.strokeDashArray)&&(l=!0,t.js(c,this.strokeDashOffset)),s.type===rt.j)t.beginPath(),t.moveTo(s.startX,s.startY),t.lineTo(s.endX,s.endY),null!==i&&t.ik(),t.Se();else if(s.type===rt.u){var p=s.startX;c=s.startY;var m=s.endX,v=s.endY;s=Math.min(p,m);var w=Math.min(c,v);p=Math.abs(m-p),c=Math.abs(v-c),t.beginPath(),t.rect(s,w,p,c),null!==n&&t.ng(n),null!==i&&(u&&o&&As(t),t.ik(),u&&o&&Ks(t)),t.Se()}else if(s.type===rt.F)p=s.startX,c=s.startY,m=s.endX,v=s.endY,s=Math.abs(m-p)/2,w=Math.abs(v-c)/2,p=Math.min(p,m)+s,c=Math.min(c,v)+w,t.beginPath(),t.moveTo(p,c-w),t.bezierCurveTo(p+_.wg*s,c-w,p+s,c-_.wg*w,p+s,c),t.bezierCurveTo(p+s,c+_.wg*w,p+_.wg*s,c+w,p,c+w),t.bezierCurveTo(p-_.wg*s,c+w,p-s,c+_.wg*w,p-s,c),t.bezierCurveTo(p-s,c-_.wg*w,p-_.wg*s,c-w,p,c-w),t.closePath(),null!==n&&t.ng(n),null!==i&&(u&&o&&As(t),t.ik(),u&&o&&Ks(t)),t.Se();else if(s.type===rt.o)for(c=(s=s.figures).length,w=0;w<c;w++){p=s.s[w],t.beginPath(),t.moveTo(p.startX,p.startY),v=(m=p.segments.s).length;for(var k=null,A=0;A<v;A++){var T=m[A];switch(T.type){case jn:t.moveTo(T.endX,T.endY);break;case pe:t.lineTo(T.endX,T.endY);break;case cn:t.bezierCurveTo(T.point1X,T.point1Y,T.point2X,T.point2Y,T.endX,T.endY);break;case cs:t.quadraticCurveTo(T.point1X,T.point1Y,T.endX,T.endY);break;case Oe:if(T.radiusX===T.radiusY){var j=Math.PI/180;t.arc(T.point1X,T.point1Y,T.radiusX,T.startAngle*j,(T.startAngle+T.sweepAngle)*j,0>T.sweepAngle,null!==k?k.endX:p.startX,null!==k?k.endY:p.startY)}else if(0===(j=(k=Ws(T,p)).length))t.lineTo(T.centerX,T.centerY);else for(var I=0;I<j;I++){var B=k[I];0===I&&t.lineTo(B[0],B[1]),t.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7])}break;case Jn:if(I=j=0,null!==k&&k.type===Oe){if(0===(B=(k=Ws(k,p)).length)){t.lineTo(T.endX,T.endY);break}null!==(k=k[B-1]||null)&&(j=k[6],I=k[7])}else j=null!==k?k.endX:p.startX,I=null!==k?k.endY:p.startY;if(0===(j=(k=pr(T,p,j,I)).length)){t.lineTo(T.endX,T.endY);break}for(I=0;I<j;I++)t.bezierCurveTo((B=k[I])[2],B[3],B[4],B[5],B[6],B[7]);break;default:Q("Segment not of valid type: "+T.type)}T.isClosed&&t.closePath(),k=T}m=p.isFilled,o?p.isShadowed?(!0===m&&"transparent"!==n&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&(m&&u&&As(t),t.ik(),m&&u&&Ks(t))):(As(t),m&&"transparent"!==n&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&t.ik(),Ks(t)):(m&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&t.ik()),t.Se(w)}if(l&&t.fs(),null!==this.pathPattern){if((i=this.pathPattern).measure(1/0,1/0),i.arrange(0,0,(n=i.measuredBounds).width,n.height),o=this.geometry,t.save(),t.beginPath(),n=Xt(),o.type===rt.j)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.endY),el(t,e,n,i);else if(o.type===rt.o)for(o=o.figures.iterator;o.next();){for(u=o.value,n.length=0,n.push(u.startX),n.push(u.startY),c=l=u.startX,w=s=u.startY,m=(p=u.segments.s).length,v=0;v<m;v++){switch((A=p[v]).type){case jn:el(t,e,n,i),n.length=0,n.push(A.endX),n.push(A.endY),c=l=A.endX,w=s=A.endY;break;case pe:n.push(A.endX),n.push(A.endY),l=A.endX,s=A.endY;break;case cn:_.Qe(l,s,A.point1X,A.point1Y,A.point2X,A.point2Y,A.endX,A.endY,.5,n),l=A.endX,s=A.endY;break;case cs:_.ep(l,s,A.point1X,A.point1Y,A.endX,A.endY,.5,n),l=A.endX,s=A.endY;break;case Oe:if(0===(k=(T=Ws(A,u)).length)){n.push(A.centerX),n.push(A.centerY),l=A.centerX,s=A.centerY;break}for(j=0;j<k;j++)_.Qe(l,s,(I=T[j])[2],I[3],I[4],I[5],I[6],I[7],.5,n),l=I[6],s=I[7];break;case Jn:if(0===(k=(T=pr(A,u,l,s)).length)){n.push(A.endX),n.push(A.endY),l=A.endX,s=A.endY;break}for(j=0;j<k;j++)_.Qe(l,s,(I=T[j])[2],I[3],I[4],I[5],I[6],I[7],.5,n),l=I[6],s=I[7];break;default:Q("Segment not of valid type: "+A.type)}A.isClosed&&(n.push(c),n.push(w),el(t,e,n,i))}el(t,e,n,i)}else if(o.type===rt.u)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.startY),n.push(o.endX),n.push(o.endY),n.push(o.startX),n.push(o.endY),n.push(o.startX),n.push(o.startY),el(t,e,n,i);else if(o.type===rt.F){if((s=new Je).startX=o.endX,s.startY=(o.startY+o.endY)/2,(l=new Ht(Oe)).startAngle=0,l.sweepAngle=360,l.centerX=(o.startX+o.endX)/2,l.centerY=(o.startY+o.endY)/2,l.radiusX=Math.abs(o.startX-o.endX)/2,l.radiusY=Math.abs(o.startY-o.endY)/2,s.add(l),0===(u=(o=Ws(l,s)).length))n.push(l.centerX),n.push(l.centerY);else for(l=s.startX,s=s.startY,c=0;c<u;c++)_.Qe(l,s,(w=o[c])[2],w[3],w[4],w[5],w[6],w[7],.5,n),l=w[6],s=w[7];el(t,e,n,i)}Zt(n),t.restore(),t.Vc(!1)}}}},L.jk=function(t,e,i){return!(!yt.prototype.jk.call(this,t,e,i)||null===this.xc&&null===this.Ui||null===this.ua||null!==this.pathPattern||this.geometry.figures.length!==this.svg.getElementsByTagName("path").length||(t.Hl=this.svg,this.hh(t,e),t.Hl=null,0))},L.mk=function(t){return null!==this.geometry&&1<this.geometry.figures.length||null!==this.pathPattern||yt.prototype.mk.call(this,t)},L.Ev=function(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("path");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},L.ga=function(t,e){if(void 0===e&&(e=new z),t instanceof f){t.Mc()&&Q("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},L.mi=function(t){void 0===t&&(t=new q);var e=this.naturalBounds,i=this.oe;e=q.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Bc(n/2,n/2),n=z.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Ze(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Ze(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Ze(t,n.x,n.y,0,0),q.free(e),z.free(n),t},L.gh=function(t,e){var i=this.geometry;if(null===i||null===this.fill&&null===this.stroke)return!1;var n=i.bounds,s=this.strokeWidth/2;i.type!==rt.j||e||(s+=2);var o=q.alloc();if(o.assign(n),o.Bc(s+2,s+2),!o.ca(t))return q.free(o),!1;if(n=s+1e-4,i.type===rt.j)return!(null===this.stroke||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n))&&(q.free(o),_.Zb(i.startX,i.startY,i.endX,i.endY,s,t.x,t.y));if(i.type===rt.u){e=i.startX;var l=i.startY,u=i.endX;if(i=i.endY,o.x=Math.min(e,u),o.y=Math.min(l,i),o.width=Math.abs(u-e),o.height=Math.abs(i-l),null===this.fill){if(o.Bc(-n,-n),o.ca(t))return q.free(o),!1;o.Bc(n,n)}return null!==this.stroke&&o.Bc(s,s),t=o.ca(t),q.free(o),t}if(i.type===rt.F){l=i.startX,s=i.startY,u=i.endX;var c=i.endY;if(i=Math.min(l,u),e=Math.min(s,c),l=Math.abs(u-l)/2,s=Math.abs(c-s)/2,i=t.x-(i+l),e=t.y-(e+s),null===this.fill){if(s-=n,0>=(l-=n)||0>=s||1>=i*i/(l*l)+e*e/(s*s))return q.free(o),!1;l+=n,s+=n}return null!==this.stroke&&(l+=n,s+=n),q.free(o),!(0>=l||0>=s)&&1>=i*i/(l*l)+e*e/(s*s)}if(i.type===rt.o)return q.free(o),null===this.fill?Mg(i,t.x,t.y,s):Ed(i,t,s,1<this.strokeWidth,e);Q("Unknown Geometry type: "+i.type)},L.Wl=function(t,e,i,n){var s=this.desiredSize,o=this.ig;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Rd)var l=this.geometry.bounds;else{var u=this.figure,c=ip[u];if(void 0===c){var p=_.Ze[u];"string"==typeof p&&(p=_.Ze[p]),"function"==typeof p?(c=p(null,100,100),ip[u]=c):Q("Unsupported Figure: "+u)}l=c.bounds}u=l.width,c=l.height,p=l.width;var m=l.height;switch(ts(this,!0)){case Se:n=i=0;break;case Ce:p=Math.max(t-o,0),m=Math.max(e-o,0);break;case ri:p=Math.max(t-o,0),n=0;break;case di:i=0,m=Math.max(e-o,0)}isFinite(s.width)&&(p=s.width),isFinite(s.height)&&(m=s.height);var v=this.maxSize,w=this.minSize;switch(i=Math.max(i-o,w.width),n=Math.max(n-o,w.height),p=Math.min(v.width,p),m=Math.min(v.height,m),p=isFinite(p)?Math.max(i,p):Math.max(u,i),m=isFinite(m)?Math.max(n,m):Math.max(c,n),i=ep(this)){case Se:break;case Ce:u=p,c=m;break;case ds:i=Math.min(p/u,m/c),isFinite(i)||(i=1),u*=i,c*=i;break;default:Q(i+" is not a valid geometryStretch.")}null!==this.Rd?(0===u&&(u=.001),0===c&&(c=.001),n=u/(l=(i=null!==this.Rd?this.Rd:this.ua).bounds).width,l=c/l.height,isFinite(n)||(n=1),isFinite(l)||(l=1),this.ua=1===n&&1===l?i:i.copy().scale(n,l)):null!==this.ua&&_.$(this.ua.Rk,t-o)&&_.$(this.ua.Qk,e-o)||(this.ua=Pt.makeGeometry(this,u,c)),l=this.ua.bounds,t===1/0||e===1/0?this.Ge(l.x-o/2,l.y-o/2,0===t&&0===u?0:l.width+o,0===e&&0===c?0:l.height+o):this.Ge(-o/2,-o/2,p+o,m+o),s.w()?(p=s.width,m=s.height,p=Math.min(v.width,p),m=Math.min(v.height,m),p=Math.max(w.width,p),m=Math.max(w.height,m),this.ec.h(0,0,p,m)):this.ec.assign(l)},L.eh=function(t,e,i,n){Tf(this,t,e,i,n)},L.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},L.Rj=function(t,e,i,n,s){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*l,c=-o.m12*l,p=-o.m21*l,m=o.m11*l,v=l*(o.m21*o.dy-o.m22*o.dx),w=l*(o.m12*o.dx-o.m11*o.dy);o=t*u+e*p+v,l=t*c+e*m+w,u=i*u+n*p+v,c=i*c+n*m+w,v=this.ig/2,null===(p=this.ua)&&(this.measure(1/0,1/0),p=this.ua);var k=p.bounds;if(m=!1,p.type===rt.j)if(1.5>=this.strokeWidth)m=_.Ve(p.startX,p.startY,p.endX,p.endY,o,l,u,c,s);else{if(p.startX===p.endX?(n=v,m=0):(e=(p.endY-p.startY)/(p.endX-p.startX),n=(m=v/Math.sqrt(1+e*e))*e),e=Xt(),t=new z,_.Ve(p.startX+n,p.startY+m,p.endX+n,p.endY+m,o,l,u,c,t)&&e.push(t),t=new z,_.Ve(p.startX-n,p.startY-m,p.endX-n,p.endY-m,o,l,u,c,t)&&e.push(t),t=new z,_.Ve(p.startX+n,p.startY+m,p.startX-n,p.startY-m,o,l,u,c,t)&&e.push(t),t=new z,_.Ve(p.endX+n,p.endY+m,p.endX-n,p.endY-m,o,l,u,c,t)&&e.push(t),0===(u=e.length))return Zt(e),!1;for(m=!0,c=1/0,n=0;n<u;n++)(i=((t=e[n]).x-o)*(t.x-o)+(t.y-l)*(t.y-l))<c&&(c=i,s.x=t.x,s.y=t.y);Zt(e)}else if(p.type===rt.u)m=_.Ff(k.x-v,k.y-v,k.x+k.width+v,k.y+k.height+v,o,l,u,c,s);else if(p.type===rt.F){t:if(0===(e=q.allocAt(k.x,k.y,k.width,k.height).Bc(v,v)).width)m=_.Ve(e.x,e.y,e.x,e.y+e.height,o,l,u,c,s);else if(0===e.height)m=_.Ve(e.x,e.y,e.x+e.width,e.y,o,l,u,c,s);else{if(n=e.x+(t=e.width/2),m=e.y+(p=e.height/2),i=9999,o!==u&&(i=(l-c)/(o-u)),9999>Math.abs(i)){if(0>t*t*i*i+p*p-(c=l-m-i*(o-n))*c){s.x=NaN,s.y=NaN,m=!1;break t}u=(-t*t*i*c+t*p*(v=Math.sqrt(t*t*i*i+p*p-c*c)))/(p*p+t*t*i*i)+n,t=(-t*t*i*c-t*p*v)/(p*p+t*t*i*i)+n,p=i*(u-n)+c+m,c=i*(t-n)+c+m,Math.abs((o-u)*(o-u))+Math.abs((l-p)*(l-p))<Math.abs((o-t)*(o-t))+Math.abs((l-c)*(l-c))?(s.x=u,s.y=p):(s.x=t,s.y=c)}else{if(u=p*p,0>(u-=u/(t*t)*(c=o-n)*c)){s.x=NaN,s.y=NaN,m=!1;break t}u=m+(c=Math.sqrt(u)),c=m-c,Math.abs(u-l)<Math.abs(c-l)?(s.x=o,s.y=u):(s.x=o,s.y=c)}m=!0}q.free(e)}else if(p.type===rt.o){w=z.alloc();var A=u-o,T=c-l,j=A*A+T*T,I=o,B=l;if(0<j&&k.contains(I,B)&&(w.x=I,w.y=B,this.ca(w)))for(0!==A&&.5>Math.abs(A)?(T*=.5/A,A=.5):0!==T&&.5>Math.abs(T)&&(A*=.5/T,T=.5),I-=A,B-=T;k.contains(I,B);)I-=A,B-=T;for(s.x=u,s.y=c,T=0;T<p.figures.count;T++)for(var R=p.figures.s[T],H=R.isFilled?I:o,K=R.isFilled?B:l,J=R.segments,lt=k=R.startX,gt=A=R.startY,ft=0;ft<J.count;ft++){var ot=J.s[ft],tt=ot.type,Ct=ot.endX,bt=ot.endY,Rt=!1;switch(tt){case jn:lt=Ct,gt=bt;break;case pe:Rt=fc(k,A,Ct,bt,H,K,u,c,w);break;case cn:Rt=_.Eo(k,A,ot.point1X,ot.point1Y,ot.point2X,ot.point2Y,Ct,bt,H,K,u,c,.6,w);break;case cs:Rt=_.Eo(k,A,k+2/3*(ot.point1X-k),A+2/3*(ot.point1Y-A),Ct+2/3*(ot.point1X-Ct),bt+2/3*(ot.point1Y-bt),Ct,bt,H,K,u,c,.6,w);break;case Oe:case Jn:var Qt=(tt=ot.type===Oe?Ws(ot,R):pr(ot,R,k,A)).length;if(0===Qt){Rt=fc(k,A,ot.type===Oe?ot.centerX:ot.endX,ot.type===Oe?ot.centerY:ot.endY,H,K,u,c,w);break}for(bt=null,Ct=0;Ct<Qt;Ct++){if(bt=tt[Ct],0===Ct&&fc(k,A,bt[0],bt[1],H,K,u,c,w)){var Xe=dc(H,K,w,j,s);Xe<j&&(j=Xe,m=!0)}_.Eo(bt[0],bt[1],bt[2],bt[3],bt[4],bt[5],bt[6],bt[7],H,K,u,c,.6,w)&&(Xe=dc(H,K,w,j,s))<j&&(j=Xe,m=!0)}Ct=bt[6],bt=bt[7];break;default:Q("Unknown Segment type: "+tt)}k=Ct,A=bt,Rt&&(Rt=dc(H,K,w,j,s))<j&&(j=Rt,m=!0),ot.isClosed&&fc(k,A,Ct=lt,bt=gt,H,K,u,c,w)&&(ot=dc(H,K,w,j,s))<j&&(j=ot,m=!0)}o=i-t,l=n-e,0!==(u=Math.sqrt(o*o+l*l))&&(o/=u,l/=u),s.x-=o*v,s.y-=l*v,z.free(w)}else Q("Unknown Geometry type: "+p.type);return!!m&&(this.transform.Ga(s),!0)},L.fh=function(t,e){if(void 0===e)return t.Re(this.actualBounds);var i=this.ua;null===i&&(this.measure(1/0,1/0),i=this.ua),i=i.bounds;var n=this.strokeWidth/2,s=!1,o=z.alloc();return o.h(i.x-n,i.y-n),t.ca(e.Ga(o))&&(o.h(i.x-n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.y-n),t.ca(e.Ga(o))&&(s=!0)))),z.free(o),s},L.Yc=function(t,e){if(this.fh(t,e)||void 0===e&&(e=this.transform,t.Re(this.actualBounds)))return!0;var i=Ot.alloc();i.set(e),i.Uj();var n=t.left,s=t.right,o=t.top;t=t.bottom;var l=z.alloc();if(l.h(n,o),i.Ga(l),this.gh(l,!0)||(l.h(s,o),i.Ga(l),this.gh(l,!0))||(l.h(n,t),i.Ga(l),this.gh(l,!0))||(l.h(s,t),i.Ga(l),this.gh(l,!0)))return z.free(l),!0;var u=z.alloc(),c=z.alloc();return i.set(e),i.cv(this.transform),i.Uj(),u.x=s,u.y=o,u.transform(i),l.x=n,l.y=o,l.transform(i),e=!1,Ar(this,l,u,c)?e=!0:(l.x=s,l.y=t,l.transform(i),Ar(this,l,u,c)?e=!0:(u.x=n,u.y=t,u.transform(i),Ar(this,l,u,c)?e=!0:(l.x=n,l.y=o,l.transform(i),Ar(this,l,u,c)&&(e=!0)))),z.free(l),Ot.free(i),z.free(u),z.free(c),e},L.ux=function(t,e,i){function n(j,I){for(var B=j.length,R=0;R<B;R+=2)if(I.zd(j[R],j[R+1])>s)return!0;return!1}if(i&&null!==this.fill&&this.gh(t,!0))return!0;var s=t.Bf(e),o=s;if(1.5<this.strokeWidth&&(s=this.strokeWidth/2+Math.sqrt(s),s*=s),null===(e=this.ua)&&(this.measure(1/0,1/0),null===(e=this.ua)))return!1;if(!i){var l=e.bounds,u=l.x,c=l.y,p=l.x+l.width;if(l=l.y+l.height,ls(t.x,t.y,u,c)<=s&&ls(t.x,t.y,p,c)<=s&&ls(t.x,t.y,u,l)<=s&&ls(t.x,t.y,p,l)<=s)return!0}if(u=e.startX,c=e.startY,p=e.endX,l=e.endY,e.type===rt.j){if(i=(u-p)*(t.x-p)+(c-l)*(t.y-l),oi(t.x,t.y,u,c,p,l)<=(0<=(p-u)*(t.x-u)+(l-c)*(t.y-c)&&0<=i?s:o))return!0}else{if(e.type===rt.u)return e=!1,i&&(e=oi(t.x,t.y,u,c,u,l)<=s||oi(t.x,t.y,u,c,p,c)<=s||oi(t.x,t.y,p,c,p,l)<=s||oi(t.x,t.y,u,l,p,l)<=s),e;if(e.type===rt.F){e=t.x-(u+p)/2,o=t.y-(c+l)/2;var m=Math.abs(p-u)/2,v=Math.abs(l-c)/2;if(0===m||0===v)return oi(t.x,t.y,u,c,p,l)<=s;if(!i)return!(ls(e,o,-m,0)>=s||ls(e,o,0,-v)>=s||ls(e,o,0,v)>=s||ls(e,o,m,0)>=s);if((t=_.az(m,v,e,o))*t<=s)return!0}else if(e.type===rt.o){if(o=(p=e.bounds).x,u=p.y,c=p.x+p.width,p=p.y+p.height,t.x>c&&t.x<o&&t.y>p&&t.y<u&&oi(t.x,t.y,o,u,o,p)>s&&oi(t.x,t.y,o,u,c,u)>s&&oi(t.x,t.y,c,p,o,p)>s&&oi(t.x,t.y,c,p,c,u)>s)return!1;if(o=Math.sqrt(s),!i){for(i=e.figures,e=0;e<i.count;e++){if(t.zd(l=(o=i.s[e]).startX,m=o.startY)>s)return!1;for(c=(u=o.segments.s).length,p=0;p<c;p++)switch(v=u[p],v.type){case jn:case pe:if(t.zd(l=v.endX,m=v.endY)>s)return!1;break;case cn:var w=Xt();if(_.Qe(l,m,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.8,w),l=n(w,t),Zt(w),l||t.zd(l=v.endX,m=v.endY)>s)return!1;break;case cs:if(w=Xt(),_.ep(l,m,v.point1X,v.point1Y,v.endX,v.endY,.8,w),l=n(w,t),Zt(w),l||t.zd(l=v.endX,m=v.endY)>s)return!1;break;case Oe:case Jn:var k=(w=v.type===Oe?Ws(v,o):pr(v,o,l,m)).length;if(0===k){if(t.zd(l=v.type===Oe?v.centerX:v.endX,m=v.type===Oe?v.centerY:v.endY)>s)return!1;break}v=null;for(var A=Xt(),T=0;T<k;T++)if(v=w[T],A.length=0,_.Qe(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.8,A),n(A,t))return Zt(A),!1;Zt(A),null!==v&&(l=v[6],m=v[7]);break;default:Q("Unknown Segment type: "+v.type)}}return!0}if(null===this.fill?Mg(e,t.x,t.y,o):Ed(e,t,o,!0,!1))return!0}}return!1},L.rc=function(){this.ua=null},L.kq=function(){return this.ig},Pt.makeGeometry=function(t,e,i){if("None"!==t.toArrow)var n=Ls[t.toArrow];else"None"!==t.fromArrow?n=Ls[t.fromArrow]:("string"==typeof(n=_.Ze[t.figure])&&(n=_.Ze[n]),void 0===n&&Q("Unknown Shape.figure: "+t.figure),(n=n(t,e,i)).Rk=e,n.Qk=i);if(null===n){var s=_.Ze.Rectangle;"function"==typeof s&&(n=s(t,e,i))}return n},Tt.Object.defineProperties(Pt.prototype,{geometry:{get:function(){return null!==this.ua?this.ua:this.Rd},set:function(t){var e=this.ua,i=this.Rd;if(e!==t){this.Rd=this.ua=null!==t?t.freeze():null;var n=this.part;null!==n&&(n.ag=NaN),this.v(),this.g("geometry",e||i,t),qr(this)&&null!==(t=this.part)&&xr(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=rt.parse(t)).normalize();this.geometry=t,this.position=t=z.allocAt(-e.x,-e.y),z.free(t)}},isGeometryPositioned:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e!==t&&(null!==t&&ia(t,"Shape.fill"),t instanceof Wt&&t.freeze(),this.Ui=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(null!==t&&ia(t,"Shape.stroke"),t instanceof Wt&&t.freeze(),this.xc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ig},set:function(t){var e=this.ig;if(e!==t)if(0<=t){this.ig=t,this.v();var i=this.part;null!==i&&(i.ag=NaN),this.g("strokeWidth",e,t)}else ie(t,"value >= 0",Pt,"strokeWidth:value")}},strokeCap:{get:function(){return null!==this.Na?this.Na.Hr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?ie(t,'"butt", "round", or "square"',Pt,"strokeCap"):(Cr(this),this.Na.Hr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return null!==this.Na?this.Na.Ir:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?ie(t,'"miter", "bevel", or "round"',Pt,"strokeJoin"):(Cr(this),this.Na.Ir=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return null!==this.Na?this.Na.Jr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){Cr(this),this.Na.Jr=t,this.N();var i=this.part;null!==i&&(i.ag=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Yg},set:function(t){var e=this.Yg;if(e!==t){if(null!==t){for(var i=t.length,n=0,s=0;s<i;s++){var o=t[s];0<=o&&isFinite(o)||Q("strokeDashArray:value "+o+" at index "+s+" must be a positive number or zero."),n+=o}if(0===n){if(null===e)return;t=null}}this.Yg=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return null!==this.Na?this.Na.uj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(Cr(this),this.Na.uj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.an},set:function(t){var e=this.an;if(e!==t){var i=_.Ze[t];"function"==typeof i?i=t:(i=_.Ze[t.toLowerCase()])||Q("Unknown Shape.figure: "+t),e!==i&&(null!==(t=this.part)&&(t.ag=NaN),this.an=i,this.Rd=null,this.rc(),this.v(),this.g("figure",e,i))}}},toArrow:{get:function(){return null!==this.Ua?this.Ua.V:"None"},set:function(t){var e=this.toArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=py(t);null===i?Q("Unknown Shape.toArrow: "+t):e!==i&&(null===this.Ua&&(this.Ua=new Uo),this.Ua.V=i,this.Rd=null,this.rc(),this.v(),fy(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return null!==this.Ua?this.Ua.j:"None"},set:function(t){var e=this.fromArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=py(t);null===i?Q("Unknown Shape.fromArrow: "+t):e!==i&&(null===this.Ua&&(this.Ua=new Uo),this.Ua.j=i,this.Rd=null,this.rc(),this.v(),fy(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return null!==this.Na?this.Na.fg:Nt},set:function(t){var e=this.spot1;e.D(t)||(t=t.J(),Cr(this),this.Na.fg=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return null!==this.Na?this.Na.gg:Nt},set:function(t){var e=this.spot2;e.D(t)||(t=t.J(),Cr(this),this.Na.gg=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Un},set:function(t){var e=this.Un;e!==t&&(this.Un=t,this.rc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Vn},set:function(t){var e=this.Vn;e!==t&&(this.Vn=t,this.rc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.ec}},pathPattern:{get:function(){return null!==this.Na?this.Na.br:null},set:function(t){var e=this.pathPattern;e!==t&&(Cr(this),this.Na.br=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return null!==this.Na?this.Na.jq:zn},set:function(t){var e=this.geometryStretch;e!==t&&(Cr(this),this.Na.jq=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Sk:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new Ts),this.fa.Sk=t;var i=this.diagram;null!==i&&this.panel===i.grid&&mo(i),this.v(),null!==(i=this.panel)&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new Ts),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new Ts),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new Ts),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}}}),Pt.prototype.intersectsRect=Pt.prototype.Yc,Pt.prototype.containedInRect=Pt.prototype.fh,Pt.prototype.getNearestIntersectionPoint=Pt.prototype.rs,Pt.prototype.getDocumentBounds=Pt.prototype.mi,Pt.prototype.getDocumentPoint=Pt.prototype.ga;var Ls=new Wi,ip=new Wi;function np(){this.oc=!1,this.Hr="butt",this.Ir="miter",this.Jr=10,this.uj=0,this.br=null,this.jq=zn,this.gg=this.fg=Nt}function qt(t,e){return yt.call(this),vc||(Oi=Dn?new Cn(null).context:null,vc=!0),this.l|=2097152,this.fc="",this.xc="black",this.Ae="13px sans-serif",this.Lq=this.Db=this.Gc=0,this.da=this.fa=this.Gm=null,this.Ih=0,this.df=null,this.Le=0,this.ze=this.Rb=this.Qc=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function gs(t){null===t.da?t.da=new up:t.da.oc&&(t.da=t.da.copy())}function gy(t,e){t.l=6144|e.l,t.pb=e.opacity,t.Ma=e.background,t.areaBackground=e.areaBackground,t.jd=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),t.Mb=null!==e.Mb?e.Mb.copy():null,t.Ca=e.scale,t.Lb=e.angle,t.stretch=e.stretch,t.Kg=e.margin.J(),t.Kb=e.alignment.J(),t.rk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,null!==e.tb&&(t.tb=e.tb.copy()),t.shadowVisible=e.shadowVisible,t.fc=e.fc,t.xc=e.xc,t.Ae=e.Ae,null!==t.fa&&(t.fa=e.fa.copy()),null!==e.da&&(t.da=e.da.oc?e.da:e.da.copy()),t.Ih=e.Ih}function gh(t,e,i){null===t.ze?(t.ze=e,t.Db=i):((null===t.Rb||null===t.Qc)&&(t.Rb=[],t.Qc=[],t.Rb.push(t.ze),t.Qc.push(t.Db)),t.Rb.push(e),t.Qc.push(i),t.Rb.length>t.maxLines&&(t.l|=16777216))}function sp(t,e,i,n){var s=t.formatting===yh;s&&(e=e.trim());var o=0,l=t.Ae,u=t.spacingAbove+t.spacingBelow;u=Math.max(0,mh(t)+u);var c=t.overflow===mc?my(l):0;if(t.Gc>=t.maxLines)null!==n&&n.h(0,u);else if(l=e,t.wrap===op){t.Le=1;var p=Yn(e);if(0===c||p<=i)t.Db=Math.max(t.Db,p),gh(t,e,t.Db),null!==n&&n.h(p,u);else{for(p=Yn((o=il(t,l))+(e=il(t,l=l.substr(o.length))));0<e.length&&p<=i;)p=(o+=e)+(e=il(t,l=l.substr(e.length))),s&&(p=p.trim()),p=Yn(p);for(s&&(e=e.trim()),o+=e,i=Math.max(1,i-c);Yn(o)>i&&1<o.length;)o=o.substr(0,o.length-1);t.l|=16777216;var m=Yn(o+=vh);t.Db=m,gh(t,o,m),null!==n&&n.h(m,u)}}else{for(c=0,0===l.length&&(c=1,gh(t,l,0));0<l.length;){for(e=il(t,l),l=l.substr(e.length);Yn(e)>i;){var v=1;for(p=Yn(e.substr(0,v)),m=0;p<=i;)v++,m=p,p=Yn(e.substr(0,v));if(1===v){var w=p;o=Math.max(o,p)}else w=m,o=Math.max(o,m);if(1>--v&&(v=1),gh(t,e.substr(0,v),w),c++,e=e.substr(v),t.Gc+c>t.maxLines)break}for(p=Yn(e+(m=il(t,l)));0<m.length&&p<=i;)p=(e+=m)+(m=il(t,l=l.substr(m.length))),s&&(p=p.trim()),p=Yn(p);if(s&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===m.length?(v=p,o=Math.max(o,p)):(v=m=Yn(e),o=Math.max(o,m)),gh(t,e,v),c++,t.Gc+c>t.maxLines))break}t.Le=Math.min(t.maxLines,c),t.Db=Math.max(t.Db,o),null!==n&&n.h(t.Db,u*t.Le)}}function il(t,e){if(t.wrap===xy)return e.substr(0,1);for(var i=e.length,n=0,s=G0;n<i&&!s.test(e.charAt(n));)n++;for(t.formatting===wy&&(i=Math.min(i,n+1));n<i&&s.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function Yn(t){return null===Oi?8*t.length:Oi.measureText(t).width}function mh(t){if(null!==t.df)return t.df;var e=t.Ae;if(null===Oi){var i=16;return t.df=i}return void 0!==lp[e]&&5e3>by?i=lp[e]:(i=1.3*Oi.measureText("M").width,lp[e]=i,by++),t.df=i}function my(t){if(null===Oi)return 6;if(void 0!==yc[t]&&5e3>hp)var e=yc[t];else e=Oi.measureText(vh).width,yc[t]=e,hp++;return e}function yy(t,e){var i=t.fc.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n=t.spacingAbove+t.spacingBelow;if(n=Math.max(0,mh(t)+n),0===i.length)return t.Db=0,t.Gc=1,n;if(!t.isMultiline){var s=i.indexOf("\n",0);0<=s&&(i=i.substr(0,s))}s=0;for(var l,o=t.Gc=0,u=!1;!u;){if(-1===(l=i.indexOf("\n",o))&&(l=i.length,u=!0),o<=l){if(o=i.substr(o,l-o),t.wrap!==op){t.Le=0;var c=Mt.alloc();sp(t,o,e,c),s+=c.height,Mt.free(c),t.Gc+=t.Le}else sp(t,o,e,null),s+=n,t.Gc++;t.Gc===t.maxLines&&(u=!0)}o=l+1}return t.Lq=s}Pt.className="Shape",Pt.getFigureGenerators=function(){var e,t=new kt;for(e in _.Ze)e!==e.toLowerCase()&&t.add(e,_.Ze[e]);return t.freeze(),t},Pt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=_.Ze;n[t]=e,n[i]=t},Pt.getArrowheadGeometries=function(){var t=new kt;for(n in _.um)if(void 0===Ls[n]){var e=rt.parse(_.um[n],!1);Ls[n]=e,(e=n.toLowerCase())!==n&&(Ls[e]=n)}for(var i in Ls)if(i!==i.toLowerCase()){var n=Ls[i];n instanceof rt&&t.add(i,n)}return t.freeze(),t},Pt.defineArrowheadGeometry=function(t,e){var i;i="string"==typeof e?rt.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||Q("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=Ls;n[t]=i,n[e]=t},np.prototype.copy=function(){var t=new np;return t.Hr=this.Hr,t.Ir=this.Ir,t.Jr=this.Jr,t.uj=this.uj,t.br=this.br,t.jq=this.jq,t.fg=this.fg.J(),t.gg=this.gg.J(),t},Vt(qt,yt),qt.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.fc=this.fc,t.xc=this.xc,t.Ae=this.Ae,t.Gc=this.Gc,t.Db=this.Db,t.Lq=this.Lq,t.Gm=this.Gm,null!==this.fa&&(t.fa=this.fa.copy()),null!==this.da&&(t.da=this.da.oc?this.da:this.da.copy()),t.Ih=this.Ih,t.df=this.df,t.Le=this.Le,t.Qc=this.Qc,t.Rb=this.Rb,t.ze=this.ze},(L=qt.prototype).th=function(){yt.prototype.th.call(this),null!==this.da&&(this.da.oc=!0)},L.qb=function(t){t.classType===qt?this.wrap=t:yt.prototype.qb.call(this,t)},L.toString=function(){return 22<this.fc.length?'TextBlock("'+this.fc.substring(0,20)+'"...)':'TextBlock("'+this.fc+'")'},L.v=function(){yt.prototype.v.call(this)},L.hh=function(t,e){if(null!==this.xc&&0!==this.fc.length&&null!==this.Ae){var i=this.naturalBounds,n=this.actualBounds,s=i.width,o=i.height,l=mh(this),u=t.textAlign=this.textAlign,c=e.tn;"start"===u?u=c?"right":"left":"end"===u&&(u=c?"left":"right"),c=this.isUnderline;var p=this.isStrikethrough;sn(this,t,this.xc,!0,!1,i,n),(c||p)&&sn(this,t,this.xc,!1,!1,i,n),n=0,i=!1;var m=this.oe,v=m.dx-(l*m.m21+m.dx),w=e.scale;switch(8>(v*v+(m=m.dy-(l*m.m22+m.dy))*m)*w*w&&(i=!0),e.ib!==t&&(i=!1),e.ib instanceof Ki&&(i=!1),!1===e.Gf("textGreeking")&&(i=!1),e=this.spacingAbove,v=this.spacingBelow,this.flip){case oh:t.translate(s,0),t.scale(-1,1);break;case sh:t.translate(0,o),t.scale(1,-1);break;case rh:t.translate(s,o),t.scale(-1,-1)}if(t.yc(),o>(w=(e+l+v)*(m=this.Gc))&&(n=(n=this.verticalAlignment).y*o-n.y*w+n.offsetY),1===m&&null!==this.ze)(v=this.Db)>s&&(v=s),this.Nj(this.ze,t,0,n+e,s,l,v,i,u,c,p);else if(null!==this.Qc&&null!==this.Rb)for(w=0;w<m;w++){var k=this.Qc[w];k>s&&(k=s),this.Nj(this.Rb[w],t,0,n+=e,s,l,k,i,u,c,p),n+=l+v}switch(this.flip){case oh:t.scale(-1,1),t.translate(-s,0);break;case sh:t.scale(1,-1),t.translate(0,-o);break;case rh:t.scale(-1,-1),t.translate(-s,-o)}}},L.Nj=function(t,e,i,n,s,o,l,u,c,p,m){var v=0;if(u)"left"===c?v=0:"right"===c?v=s-l:"center"===c&&(v=(s-l)/2),e.fillRect(i+v,n+.25*o,l,1);else{if("left"===c?v=0:"right"===c?v=s:"center"===c&&(v=s/2),s=null!==pc?pc(this,o):.75*o,e.fillText(t,i+v,n+s),0==(t=o/20|0)&&(t=1),"right"===c?v-=l:"center"===c&&(v-=l/2),p){c=i+v,p=n+(u=null!==gc?gc(this,o):.8*o),s=i+v+l,u=n+u;var w=t;e.beginPath(),e.lineWidth=w,e.moveTo(c,p),e.lineTo(s,u),e.stroke(),e.Se(),e instanceof Ki&&e.ad.classList.add("gojs-td")}m&&(m=n+o-o/2.2|0,t%2!=0&&(m+=.5),n=i+v,o=m,i=i+v+l,l=m,v=t,e.beginPath(),e.lineWidth=v,e.moveTo(n,o),e.lineTo(i,l),e.stroke(),e.Se(),e instanceof Ki&&e.ad.classList.add("gojs-td"))}},L.jk=function(t,e,i){if(!yt.prototype.jk.call(this,t,e,i))return!1;if(sn(this,t,this.xc,!0,!1,this.naturalBounds,this.actualBounds),i){if(0===this.svg.getElementsByTagName("text").length)return!0;for(e=this.svg.getElementsByClassName("gojs-td"),i=0;i<e.length;i++)_m(t,e[i],!1)}else(e=this.svg).innerHTML=this.text,_m(t,e,!0);return!0},L.mk=function(t){return!!(1<this.lineCount||this.isUnderline||this.isStrikethrough)||yt.prototype.mk.call(this,t)},L.Ev=function(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("text");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},L.Wl=function(t,e,i,n){var s=this.Gc;this.Ih=t,this.l&=-16777217;var l,o=this.Ae;if(null!==Oi&&Sy!==o&&(Sy=Oi.font=o),this.Db=this.Le=0,this.ze=this.Rb=this.Qc=this.df=null,isNaN(this.desiredSize.width)){if(0===(o=this.fc.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)o=8;else if(this.isMultiline){for(var u=l=0,c=!1;!c;){var p=o.indexOf("\n",u);-1===p&&(p=o.length,c=!0),u=o.substr(u,p-u),this.formatting===yh&&(u=u.trim()),l=Math.max(l,Yn(u)),u=p+1}o=l}else 0<=(l=o.indexOf("\n",0))&&(o=o.substr(0,l)),o=Yn(o);o=Math.min(o,t/this.scale)}else o=this.desiredSize.width;if(null!==this.panel&&(o=Math.min(o,this.panel.maxSize.width)),l=yy(this,o),c=l=isNaN(this.desiredSize.height)?Math.min(l,e/this.scale):this.desiredSize.height,0!==this.Db&&null!==this.Qc&&null!==this.Rb&&this.overflow===mc&&(e=this.Ae,e=this.overflow===mc?my(e):0,p=this.spacingAbove+this.spacingBelow,p=Math.max(0,mh(this)+p),!((c=Math.min(this.maxLines-1,Math.max(Math.floor(c/p+.01)-1,0)))+1>=this.Rb.length))){for(this.l|=16777216,p=this.Rb[c],e=Math.max(1,t-e);Yn(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=Yn(p+=vh),this.Rb[c]=p,this.Rb=this.Rb.slice(0,c+1),this.Qc[c]=e,this.Qc=this.Qc.slice(0,c+1),this.Le=this.Rb.length,this.Db=Math.max(this.Db,e),this.Gc=this.Le,1===this.Gc&&(this.ze=this.Rb[0])}(this.wrap===vy||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.Db:Math.min(t,this.Db)),o=Math.max(i,o),l=Math.max(n,l),Zn(this.ec,o,l),this.Ge(0,0,o,l),null!==this.svg&&s!==this.Gc&&(this.Uc=!0)},L.eh=function(t,e,i,n){Tf(this,t,e,i,n)},Tt.Object.defineProperties(qt.prototype,{font:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.df=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.fc},set:function(t){var e=this.fc;e!==(t=null!=t?t.toString():"")&&(this.fc=t,this.v(),this.g("text",e,t),this.Uc=!0)}},textAlign:{get:function(){return null!==this.da?this.da.Or:"start"},set:function(t){var e=this.textAlign;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(gs(this),this.da.Or=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return null!==this.da?this.da.Xf:Se},set:function(t){var e=this.flip;e!==t&&(gs(this),this.da.Xf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return null!==this.da?this.da.Yr:oe},set:function(t){var e=this.verticalAlignment;e.D(t)||(t=t.J(),gs(this),this.da.Yr=t,Wa(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.ec.w()){var t=Mt.alloc();sp(this,this.fc,999999,t);var e=t.width;Mt.free(t),t=yy(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),Zn(this.ec,e,t)}return this.ec}},isMultiline:{get:function(){return 0!=(2097152&this.l)},set:function(t){var e=0!=(2097152&this.l);e!==t&&(this.l^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return 0!=(4194304&this.l)},set:function(t){var e=0!=(4194304&this.l);e!==t&&(this.l^=4194304,this.Uc=!0,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return 0!=(8388608&this.l)},set:function(t){var e=0!=(8388608&this.l);e!==t&&(this.l^=8388608,this.Uc=!0,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return null!==this.da?this.da.$r:rp},set:function(t){var e=this.wrap;e!==t&&(gs(this),this.da.$r=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return null!==this.da?this.da.$q:ap},set:function(t){var e=this.overflow;e!==t&&(gs(this),this.da.$q=t,this.v(),this.g("overflow",e,t))}},isOverflowed:{get:function(){return 0!=(16777216&this.l)}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(null!==t&&ia(t,"TextBlock.stroke"),t instanceof Wt&&t.freeze(),this.xc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Gc}},lineHeight:{get:function(){return mh(this)}},editable:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return null!==this.da?this.da.Qr:null},set:function(t){var e=this.textEditor;e!==t&&(gs(this),this.da.Qr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return null!==this.da?this.da.Hd:null},set:function(t){var e=this.errorFunction;e!==t&&(gs(this),this.da.Hd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Sk:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new Ts),this.fa.Sk=t,this.v();var i=this.panel;null!==i&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new Ts),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new Ts),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return null!==this.fa?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(null===this.fa&&(this.fa=new Ts),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new Ts),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return null!==this.da?this.da.vj:null},set:function(t){var e=this.textValidation;e!==t&&(gs(this),this.da.vj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return null!==this.da?this.da.Pr:null},set:function(t){var e=this.textEdited;e!==t&&(gs(this),this.da.Pr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return null!==this.da?this.da.Dr:0},set:function(t){var e=this.spacingAbove;e!==t&&(gs(this),this.da.Dr=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return null!==this.da?this.da.Er:0},set:function(t){var e=this.spacingBelow;e!==t&&(gs(this),this.da.Er=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return null!==this.da?this.da.gq:yh},set:function(t){var e=this.formatting;e!==t&&(gs(this),this.da.gq=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return null!==this.da?this.da.Jq:1/0},set:function(t){var e=this.maxLines;e!==t&&(0>=(t=Math.floor(t))&&ie(t,"> 0",qt,"maxLines"),gs(this),this.da.Jq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Qc?this.Qc:[this.Db],arrText:null!==this.Rb?this.Rb:[this.ze],maxLineWidth:this.Db,fontHeight:this.df}}},choices:{get:function(){return this.Gm},set:function(t){var e=this.Gm;e!==t&&(this.Gm=t,this.g("choices",e,t))}}});var nl,pc=null,gc=null,op=new ut(qt,"None",0),vy=new ut(qt,"WrapFit",1),rp=new ut(qt,"WrapDesiredSize",2),xy=new ut(qt,"WrapBreakAll",3),ap=new ut(qt,"OverflowClip",0),mc=new ut(qt,"OverflowEllipsis",1),yh=new ut(qt,"FormatTrim",0),wy=new ut(qt,"FormatNone",0),G0=/[ \u200b\u00ad]/,lp=new Wi,by=0,yc=new Wi,hp=0,vh="...",Sy="",Oi=null,vc=!1;function up(){this.oc=!1,this.Hd=null,this.Xf=Se,this.gq=yh,this.Jq=1/0,this.$q=ap,this.Er=this.Dr=0,this.Or="start",this.vj=this.Qr=this.Pr=null,this.Yr=oe,this.$r=rp}function Ts(){this.Sk=1,this.u=0,this.j=1,this.o=this.F=null}function Ei(t,e){yt.call(this),this.Eg=null,this.qo="",this.Xg=Xl,this.Mk=Ce,this.Zg=this.Hd=null,this.Lk=C,this.Xf=Se,this.vl=null,this.qn=!1,this.en=!0,this.$k=!1,this.bt=this.rl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function sl(t){void 0===t&&(t=""),""!==t?nl[t]&&(delete nl[t],xc--):(nl=new Wi,xc=0)}function ky(t,e){e.sy||(e.Fq=function(i){e.sq=!0,e.ln=!1;var n=e.Bg.copy();if(null!=n){for(n=n.iterator;n.next();){var s=n.value;s.N();var o=e.getAttribute("src")||"",l=s.Og.I(o);if(null!==l)for(var u=l.length,c=0;c<u;c++)s.Xn.add(o=l[c]),o.Uc=!0,s.ac(),e.hn&&(void 0===e.eu&&(e.eu=i),null!==o.Zg&&o.Zg(o,i))}e.Bg.clear()}t.desiredSize.w()||(gn(t,!1),t.v())},e.Yp=function(i){e.ln=i;var n=e.Bg.copy();if(null!=n){for(n=n.iterator;n.next();){var s=n.value,o=e.getAttribute("src")||"",l=s.Og.I(o);if(null!==l){s=l.length,o=Xt();for(var u=0;u<s;u++)o.push(l[u]);if(e.hn)for(u=0;u<s;u++)null!==(l=o[u]).Hd&&l.Hd(l,i);Zt(o)}}e.Bg.clear()}},e.addEventListener("load",e.Fq),e.addEventListener("error",e.Yp),e.sy=!0)}qt.className="TextBlock",up.prototype.copy=function(){var t=new up;return t.Hd=this.Hd,t.Xf=this.Xf,t.gq=this.gq,t.Jq=this.Jq,t.$q=this.$q,t.Dr=this.Dr,t.Er=this.Er,t.Or=this.Or,t.Pr=this.Pr,t.Qr=this.Qr,t.vj=this.vj,t.Yr=this.Yr,t.$r=this.$r,t},qt.getEllipsis=function(){return vh},qt.setEllipsis=function(t){vh=t,yc=new Wi,hp=0},qt.getBaseline=function(){return pc},qt.setBaseline=function(t){pc=t},qt.getUnderline=function(){return gc},qt.setUnderline=function(t){gc=t},qt.isValidFont=function(t){if(vc||(Oi=Dn?new Cn(null).context:null,vc=!0),null===Oi)return!0;var e=Oi.font;if(t===e||"10px sans-serif"===t)return!0;Oi.font="10px sans-serif",Oi.font=t;var i=Oi.font;if("10px sans-serif"!==i)return Oi.font=e,!0;Oi.font="19px serif";var n=Oi.font;return Oi.font=t,i=Oi.font,Oi.font=e,i!==n},qt.FormatNone=wy,qt.FormatTrim=yh,qt.None=op,qt.OverflowClip=ap,qt.OverflowEllipsis=mc,qt.WrapBreakAll=xy,qt.WrapDesiredSize=rp,qt.WrapFit=vy,Ts.prototype.copy=function(){var t=new Ts;return t.Sk=this.Sk,t.u=this.u,t.j=this.j,t.F=this.F,t.o=this.o,t},Ts.className="GradElementSettings",Vt(Ei,yt),Ei.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.qo=this.qo,t.element=this.Eg,t.Xg=this.Xg.J(),t.Mk=this.Mk,t.Xf=this.Xf,t.Hd=this.Hd,t.Zg=this.Zg,t.Lk=this.Lk.J(),t.en=this.en,t.rl=this.rl},Ei.prototype.qb=function(t){t===Se||t===ds||t===nh?this.imageStretch=t:yt.prototype.qb.call(this,t)},Ei.prototype.toString=function(){return"Picture("+this.source+")#"+pi(this)},Ei.prototype.iA=function(){if(""!==this.source){sl(this.source);var t=this.source;this.source="",this.source=t}},Ei.prototype.redraw=function(){this.N(),this.Uc=!0},Ei.prototype.hh=function(t,e){var i=this.Eg;if(null!==i){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(null===n||""===n)||i.ln instanceof Event&&t instanceof kr)){var s=t instanceof Ki;n=this.naturalBounds;var o=0,l=0,u=this.qn,c=u?+i.width:i.naturalWidth;if(void 0===c&&i.videoWidth&&(c=i.videoWidth),void 0===(u=u?+i.height:i.naturalHeight)&&i.videoHeight&&(u=i.videoHeight),u=u||n.height,0!==(c=c||n.width)&&0!==u){var p=c,m=u;this.sourceRect.w()&&(o=this.Xg.x,l=this.Xg.y,c=this.Xg.width,u=this.Xg.height);var v=c,w=u,k=this.Mk,A=this.Lk;switch(k){case Se:if(this.sourceRect.w())break;v>=n.width&&(o=o+A.offsetX+(v*A.x-n.width*A.x)),w>=n.height&&(l=l+A.offsetY+(w*A.y-n.height*A.y)),c=Math.min(n.width,v),u=Math.min(n.height,w);break;case Ce:v=n.width,w=n.height;break;case ds:case nh:k===ds?(v*=k=Math.min(n.height/w,n.width/v),w*=k):k===nh&&((v*=k=Math.max(n.height/w,n.width/v))>=n.width&&(o=(o+A.offsetX+(v*A.x-n.width*A.x)/v)*c),(w*=k)>=n.height&&(l=(l+A.offsetY+(w*A.y-n.height*A.y)/w)*u),c*=1/(v/n.width),u*=1/(w/n.height),v=n.width,w=n.height)}var T=v*(k=this.Df()*e.scale)*w*k,j=c*u/T,I=i.__goCache;if(k=null,!s){if(i.sq&&void 0!==I&&4<T&&j>W0*W0)for(null===I.gi&&(Cy(I,4,p,m,i),Cy(I,16,p,m,i)),p=(s=I.gi).length,m=0;m<p&&s[m].ratio*s[m].ratio<j;m++)k=s[m];if(!e.Xm){if(null===this.vl)if(null===this.Eg)this.vl=!1;else{s=new Cn(null).context;try{s.drawImage(this.Eg,0,0)}catch{this.en=!1}try{s.getImageData(0,0,1,1).data[3]&&(this.vl=!1),this.vl=!1}catch{this.vl=!0}}if(this.vl)return}}switch(s=v<n.width?A.offsetX+(n.width*A.x-v*A.x):0,A=w<n.height?A.offsetY+(n.height*A.y-w*A.y):0,this.flip){case oh:t.translate(Math.min(n.width,v),0),t.scale(-1,1);break;case sh:t.translate(0,Math.min(n.height,w)),t.scale(1,-1);break;case rh:t.translate(Math.min(n.width,v),Math.min(n.height,w)),t.scale(-1,-1)}if(t.yc(),e.Gf("pictureRatioOptimization")&&!e.$i&&void 0!==I&&null!==k&&1!==k.ratio){t.save(),e=k.ratio;try{t.drawImage(k.source,o/e,l/e,Math.min(k.source.width,c/e),Math.min(k.source.height,u/e),s,A,Math.min(n.width,v),Math.min(n.height,w)),t instanceof Ki&&(this.bt=[o/e,l/e,Math.min(k.source.width,c/e),Math.min(k.source.height,u/e),s,A,Math.min(n.width,v),Math.min(n.height,w)])}catch{this.en=!1}t.restore()}else try{t.drawImage(i,o,l,c,u,s,A,Math.min(n.width,v),Math.min(n.height,w)),t instanceof Ki&&(this.bt=[o,l,c,u,s,A,Math.min(n.width,v),Math.min(n.height,w)])}catch{this.en=!1}switch(this.flip){case oh:t.scale(-1,1),t.translate(-Math.min(n.width,v),0);break;case sh:t.scale(1,-1),t.translate(0,-Math.min(n.height,w));break;case rh:t.scale(-1,-1),t.translate(-Math.min(n.width,v),-Math.min(n.height,w))}}}}},Ei.prototype.Wl=function(t,e,i,n){var s=this.desiredSize,o=ts(this,!0),l=this.Eg,u=this.qn,c=0,p=0;(u||!this.$k&&l&&l.complete)&&(this.$k=!0),null===l?(isFinite(s.width)||(t=0),isFinite(s.height)||(e=0)):(c=u?+l.width:l.naturalWidth,p=u?+l.height:l.naturalHeight),isFinite(s.width)||o===Ce||o===ri?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:null!==l&&(t=c)),i=0):null!==l&&!1!==this.$k&&(t=this.sourceRect.w()?this.sourceRect.width:c),isFinite(s.height)||o===Ce||o===di?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:null!==l&&(e=p)),n=0):null!==l&&!1!==this.$k&&(e=this.sourceRect.w()?this.sourceRect.height:p),isFinite(s.width)&&(t=s.width),isFinite(s.height)&&(e=s.height),s=this.maxSize,o=this.minSize,i=Math.max(i||0,o.width),n=Math.max(n||0,o.height),t=Math.min(s.width,t),e=Math.min(s.height,e),t=Math.max(i,t),e=Math.max(n,e),null===l||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Zn(this.ec,t,e),this.Ge(0,0,t,e)},Ei.prototype.eh=function(t,e,i,n){Tf(this,t,e,i,n)},Tt.Object.defineProperties(Ei.prototype,{element:{get:function(){return this.Eg},set:function(t){var e=this.Eg;if(this.Uc=!0,e!==t){this.qn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;null===t||i||t instanceof HTMLVideoElement||this.qn||Q("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;null!==n&&mf(n,this),this.Eg=t,null!==t&&i&&void 0===t.Bg&&(t.Bg=new ht),null!==n&&i&&gf(n,this),null!==t&&(this.qn||!0===t.complete?(t.hn&&(t.ln instanceof Event&&null!==this.Hd?this.Hd(this,t.ln):!0===t.sq&&!t.ln&&null!==this.Zg&&t.eu&&this.Zg(this,t.eu)),t.sq=!0,this.desiredSize.w()||(gn(this,!1),this.v())):i&&ky(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.qo},set:function(t){var e=this.qo;if(e!==t){this.Uc=!0,this.qo=t;var i=nl;if(Dn){var n=null;if(void 0!==i[t])n=i[t];else if(""!==t){30<xc&&(sl(),i=nl),(n=Ve("img")).hn=!0,ky(this,n);var s=this.rl;null!==s&&(n.crossOrigin=s(this)),n.src=t,i[t]=n,xc++}this.element=n,null!==n&&void 0===n.__goCache&&(n.__goCache=new My),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.rl},set:function(t){if(this.rl!==t&&(this.rl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e.D(t)||(this.Xg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Mk},set:function(t){var e=this.Mk;e!==t&&(this.Mk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Xf},set:function(t){var e=this.Xf;e!==t&&(this.Xf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Lk},set:function(t){var e=this.Lk;e.D(t)||(this.Lk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(this.Hd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.ec}}}),Ei.prototype.redraw=Ei.prototype.redraw,Ei.prototype.reloadSource=Ei.prototype.iA;var xc=0,W0=4;function My(){this.gi=null}function Cy(t,e,i,n,s){null===t.gi&&(t.gi=[]);var o=new Cn(null),l=o.context,u=1/e;o.width=i/e,o.height=n/e,0!==o.width&&0!==o.height&&(e=new Ay(o.Oa,e),i=1,0<t.gi.length&&(s=(i=t.gi[t.gi.length-1]).source,i=i.ratio),l.setTransform(u*i,0,0,u*i,0,0),l.yc(),l.drawImage(s,0,0),t.gi.push(e))}function Ay(t,e){this.source=t,this.ratio=e}function ol(){this.os=new rt,this.nc=null}function rl(t,e,i,n,s,o){t.nc=new Je,t.nc.startX=e,t.nc.startY=i,t.nc.isFilled=n,t.nc.isEvenOdd=o||!1,t.os.figures.add(t.nc),void 0!==s&&(t.nc.isShadowed=s)}function U0(t){var e=t.nc.segments.length;0<e&&t.nc.segments.M(e-1).close()}function So(t,e,i,n,s,o,l){var u;void 0===u&&(u=!1);var c=new Ht(cn);c.point1X=e,c.point1Y=i,c.point2X=n,c.point2Y=s,c.endX=o,c.endY=l,u&&c.close(),t.nc.segments.add(c)}function wc(t,e,i,n,s){var o;void 0===o&&(o=!1);var l=new Ht(cs);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=s,o&&l.close(),t.nc.segments.add(l)}function K0(t,e,i,n,s,o,l,u){var c;void 0===c&&(c=!1),e=new Ht(Jn,l,u,e,i,n,s,o),c&&e.close(),t.nc.segments.add(e)}function Py(t){var e=bc;return null!==e?(bc=null,e.reset(t),e):((e=new ol).reset(t),e)}Ei.className="Picture",nl=new Wi,Ei.clearCache=sl,My.className="PictureCacheArray",Ay.className="PictureCacheInstance",ol.prototype.reset=function(t){null!==t?(t.ka(),this.os=t,t.figures.clear()):this.os=new rt,this.nc=null},ol.prototype.moveTo=function(t,e,i){void 0===i&&(i=!1);var n=new Ht(jn);n.endX=t,n.endY=e,i&&n.close(),this.nc.segments.add(n)},ol.prototype.lineTo=function(t,e,i){void 0===i&&(i=!1);var n=new Ht(pe);n.endX=t,n.endY=e,i&&n.close(),this.nc.segments.add(n)},ol.prototype.arcTo=function(t,e,i,n,s,o,l){void 0===o&&(o=0),void 0===l&&(l=!1);var u=new Ht(Oe);u.startAngle=t,u.sweepAngle=e,u.centerX=i,u.centerY=n,u.radiusX=s,u.radiusY=0!==o?o:s,l&&u.close(),this.nc.segments.add(u)};var bc=null;function fi(t,e){var i=t.toLowerCase(),n=_.Ze;n[t]=e,n[i]=t}function cp(){this.oc=!1,this.tr=this.Kp=this.zq=null,this.vr="",this.fr=this.oq=this.ur=null,this.hr="",this.gr=Ca,this.ir=null,this.jr="",this.lr=Nt,this.Gq="",this.Hq=y,this.Pq=Sa,this.Kq=jl,this.Up=null,this.Cq=127,this.zr=ka,this.yr="gray",this.Vg=4}function vt(t,e){void 0===t||t instanceof je||"string"==typeof t?nt.call(this,t):(nt.call(this),t&&(e=t)),this.G=2408959,this.Tf="",this.P=null,this.Jg="",this.Qf=this.Ug=null,this.fc="",this.Ah=this.Ig=null,this.ke=new z(NaN,NaN).freeze(),this.nf=null,this.Ao=NaN,this.ww=-1,this.qy=new q,this.Rh=null,this.ag=NaN,e&&Object.assign(this,e)}function ji(t){null===t.P?t.P=new cp:t.P.oc&&(t.P=t.P.copy())}function dp(t){16384&t.G&&(t.updateAdornments(),t.G&=-16385)}function Sc(t){if(!1===Ko(t)){pp(t,!0),t.Tk();var e=t.diagram;null!==e&&(e.De.add(t),e.ac())}}function Ly(t){if(t.G|=2097152,!1!==Ko(t)){var e=t.position,i=t.location;i.w()&&e.w()||Fy(t,e,i),i=t.Jb;var n=q.alloc().assign(i);i.ka(),i.x=e.x,i.y=e.y,i.freeze(),t.Xl(n,i),q.free(n),pp(t,!1)}}function ko(t,e,i,n){void 0===n&&(n=new z),i=i.Mc()?C:i;var s=e.naturalBounds;if(n.h(s.width*i.x+i.offsetX,s.height*i.y+i.offsetY),null===e||e===t)return n;for(e.transform.Ga(n),e=e.panel;null!==e&&e!==t;)e.transform.Ga(n),e=e.panel;return null!==t.Mb&&t.Mb.Ga(n),n.offset(-t.uc.x,-t.uc.y),n}function Ty(t){var e=z.alloc(),i=t.locationObject,n=i.naturalBounds,s=i instanceof Pt?i.strokeWidth:0;if(e.yi(0,0,n.width+s,n.height+s,t.locationSpot),i!==t)for(e.offset(-s/2,-s/2),i.transform.Ga(e),i=i.panel;null!==i&&i!==t;)i.transform.Ga(e),i=i.panel;return null!==t.Mb&&t.Mb.Ga(e),e.offset(-t.uc.x,-t.uc.y),e}function Pr(t,e){var i=t.qy;isNaN(t.ag)&&(t.ag=ry(t));var n=t.ag,s=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+s,e.height+2+s),i;n=e.x,s=e.y;var o=e.width;e=e.height;var l=t.shadowBlur;return o+=l,e+=l,n-=l/2,s-=l/2,0<(t=t.shadowOffset).x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(s+=t.y,e-=t.y),i.h(n-1,s-1,o+2,e+2),i}function Ny(t,e,i,n,s){null===e||t instanceof Bt||(e=e.animationManager).Ab&&Kg(e,t,new z(n,s),i)}function Fy(t,e,i){var n=Ty(t),s=t.diagram,o=i.w(),l=e.w();o&&l?2097152&t.G?Iy(t,e,i,s,n):Oy(t,e,i,s,n):o?Iy(t,e,i,s,n):l&&Oy(t,e,i,s,n),t.G|=2097152,z.free(n),t.Tk()}function Iy(t,e,i,n,s){var o=e.x,l=e.y;e.h(i.x-s.x,i.y-s.y),null!==n&&((n=(i=n.animationManager).defaultAnimation.isAnimating)||!i.Ab||t instanceof Bt||Kg(i,t,new z(o,l),e),n||e.x===o&&e.y===l||t.g("position",new z(o,l),e.copy()))}function Oy(t,e,i,n,s){var o=i.copy();i.h(e.x+s.x,e.y+s.y),i.D(o)||null===n||t.g("location",o,i.copy())}function Ey(t,e,i){gp(t,!1),t instanceof ct&&Sf(i,t),t.layer.isTemporary||e||i.Ya(),e=t.Jb;var n=i.viewportBounds;n.w()?_o(t)?(yu(e,n)||t.Fd(!1),t.updateAdornments()):t.isVisible()&&e.Yc(n)?(t.Fd(!0),t.updateAdornments()):t.Xb():i.vd=!0}function fp(t,e,i,n){e.constructor===t.constructor||zy||(zy=!0,Fi('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),Fi("  Old class: "+ws(t.constructor)+", new class: "+ws(e.constructor)+", part: "+t.toString())),t.Dj();var s=t.data;i=t.layerName;var o=t.isSelected,l=t.isHighlighted,u=!0,c=!0,p=!1;t instanceof ct&&(u=t.isTreeLeaf,c=t.isTreeExpanded,p=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Tf=n,null!==t.svg&&(t.svg.remove(),t.svg=null,t.Uc=!0),t.v(),t.N(),n=!0,null!==(e=t.diagram)&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ub=s,t.G=o?4096|t.G:-4097&t.G,t.G=l?524288|t.G:-524289&t.G,t instanceof ct&&(t.R=u?4|t.R:-5&t.R,t.R=c?1|t.R:-2&t.R,t.R=p?2|t.R:-3&t.R),null!==s&&t.La(),(s=t.layerName)!==i&&(t.Jg=i,t.layerName=s),null!==e&&(e.skipsUndoManager=n),t.Zc()&&t.C(64)}function Ko(t){return 0!=(32768&t.G)}function pp(t,e){t.G=e?32768|t.G:-32769&t.G}function gp(t,e){t.G=e?65536|t.G:-65537&t.G}function _o(t){return 0!=(131072&t.G)}function kc(t,e){t.G=e?1048576|t.G:-1048577&t.G}function mp(t,e){var i=e.containingGroup;return null!==i?1+mp(t,i):e instanceof ct&&null!==(e=e.labeledLink)?mp(t,e):0}function jy(t,e){var i=e.containingGroup;return null!==i||e instanceof ct&&null!==(i=e.labeledLink)?jy(t,i):e}function yp(t,e,i){if(e===i||null===i)return!1;var n=e.containingGroup;return!(null===n||n!==i&&!yp(t,n,i))||e instanceof ct&&null!==(e=e.labeledLink)&&yp(t,e,i)}function Dy(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Zo(t,e,i,n,s,o){if(void 0===o&&(o=null),!(t.contains(e)||null!==o&&!o(e)||e instanceof Bt))if(t.add(e),e instanceof ct){if(i&&e instanceof At)for(var l=e.memberParts;l.next();)Zo(t,l.value,i,n,s,o);if(!1!==s)for(l=e.linksConnected;l.next();){var u=l.value;if(!t.contains(u)){var c=u.fromNode,p=u.toNode;c=null===c||t.contains(c),p=null===p||t.contains(p),(s?c&&p:c||p)&&Zo(t,u,i,n,s,o)}}if(1<n)for(e=e.Pu();e.next();)Zo(t,e.value,i,n-1,s,o)}else if(e instanceof st)for(e=e.labelNodes;e.next();)Zo(t,e.value,i,n,s,o)}ol.className="StreamGeometryContext",fi("Rectangle",function(t,e,i){var n=_.Mf[t="r"+e+","+i];return void 0!==n||((n=new rt(rt.u)).endX=e,n.endY=i,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),fi("Square",function(t,e,i){var n=_.Mf[t="s"+e+","+i];return void 0!==n||((n=new rt(rt.u)).endX=e,n.endY=i,n.defaultStretch=ds,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),fi("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var n="rr"+e+","+i+","+(t=Math.min(t,i/3)),s=_.Mf[n];if(void 0!==s)return s;var o=t*_.wg;return s=(new rt).add(new Je(t,0,!0).add(new Ht(pe,e-t,0)).add(new Ht(cn,e,t,e-o,0,e,o)).add(new Ht(pe,e,i-t)).add(new Ht(cn,e-t,i,e,i-o,e-o,i)).add(new Ht(pe,t,i)).add(new Ht(cn,0,i-t,o,i,0,i-o)).add(new Ht(pe,0,t)).add(new Ht(cn,t,0,0,o,o,0).close())),1<o&&(s.spot1=new f(0,0,o,o),s.spot2=new f(1,1,-o,-o)),_.Nf<_.vm&&(_.Mf[n]=s,_.Nf++),s}),fi("Border","RoundedRectangle"),fi("Ellipse",function(t,e,i){var n=_.Mf[t="e"+e+","+i];return void 0!==n||((n=new rt(rt.F)).endX=e,n.endY=i,n.spot1=En,n.spot2=us,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),fi("Circle",function(t,e,i){var n=_.Mf[t="c"+e+","+i];return void 0!==n||((n=new rt(rt.F)).endX=e,n.endY=i,n.spot1=En,n.spot2=us,n.defaultStretch=ds,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),fi("TriangleRight",function(t,e,i){return(new rt).add(new Je(0,0).add(new Ht(pe,e,.5*i)).add(new Ht(pe,0,i).close())).pm(0,.25,.5,.75)}),fi("TriangleDown",function(t,e,i){return(new rt).add(new Je(0,0).add(new Ht(pe,e,0)).add(new Ht(pe,.5*e,i).close())).pm(.25,0,.75,.5)}),fi("TriangleLeft",function(t,e,i){return(new rt).add(new Je(e,i).add(new Ht(pe,0,.5*i)).add(new Ht(pe,e,0).close())).pm(.5,.25,1,.75)}),fi("TriangleUp",function(t,e,i){return(new rt).add(new Je(e,i).add(new Ht(pe,0,i)).add(new Ht(pe,.5*e,0).close())).pm(.25,.5,.75,1)}),fi("Triangle","TriangleUp"),fi("Diamond",function(t,e,i){return(new rt).add(new Je(.5*e,0).add(new Ht(pe,0,.5*i)).add(new Ht(pe,.5*e,i)).add(new Ht(pe,e,.5*i).close())).pm(.25,.25,.75,.75)}),fi("LineH",function(t,e,i){return(t=new rt(rt.j)).startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),fi("LineV",function(t,e,i){return(t=new rt(rt.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),fi("None","Rectangle"),fi("BarH","Rectangle"),fi("BarV","Rectangle"),fi("MinusLine","LineH"),fi("PlusLine",function(t,e,i){return(new rt).add(new Je(0,i/2,!1).add(new Ht(pe,e,i/2)).add(new Ht(jn,e/2,0)).add(new Ht(pe,e/2,i)))}),fi("XLine",function(t,e,i){return(new rt).add(new Je(0,i,!1).add(new Ht(pe,e,0)).add(new Ht(jn,0,0)).add(new Ht(pe,e,i)))}),fi("LineRight",function(t,e,i){return(new rt).add(new Je(.25*e,0,!1).add(new Ht(pe,.75*e,.5*i)).add(new Ht(pe,.25*e,i)))}),fi("LineDown",function(t,e,i){return(new rt).add(new Je(0,.25*i,!1).add(new Ht(pe,.5*e,.75*i)).add(new Ht(pe,e,.25*i)))}),fi("LineLeft",function(t,e,i){return(new rt).add(new Je(.75*e,0,!1).add(new Ht(pe,.25*e,.5*i)).add(new Ht(pe,.75*e,i)))}),fi("LineUp",function(t,e,i){return(new rt).add(new Je(0,.75*i,!1).add(new Ht(pe,.5*e,.25*i)).add(new Ht(pe,e,.75*i)))}),_.um={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},cp.prototype.copy=function(){var t=new cp;return t.zq=this.zq,t.Kp=this.Kp,t.tr=this.tr,t.vr=this.vr,t.ur=this.ur,t.oq=this.oq,t.fr=this.fr,t.hr=this.hr,t.gr=this.gr.J(),t.ir=this.ir,t.jr=this.jr,t.lr=this.lr.J(),t.Gq=this.Gq,t.Hq=this.Hq.J(),t.Pq=this.Pq.J(),t.Kq=this.Kq.J(),t.Up=this.Up,t.Cq=this.Cq,t.zr=this.zr.J(),t.yr=this.yr,t.Vg=this.Vg,t},Vt(vt,nt),vt.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.G=-4097&this.G|49152,t.Tf=this.Tf,null!==this.P&&(t.P=this.P.oc?this.P:this.P.copy()),t.Jg=this.Jg,t.Qf=null,t.fc=this.fc,t.ke.assign(this.ke),t.Ao=this.Ao},(L=vt.prototype).Af=function(t){nt.prototype.Af.call(this,t),t.oh(),t.Ug=null,t.nf=null,t.Rh=null},L.toString=function(){var t=ws(this.constructor)+"#"+pi(this);return null!==this.data&&(t+="("+Vi(this.data)+")"),t},L.th=function(){nt.prototype.th.call(this),null!==this.P&&(this.P.oc=!0)},L.fk=function(t,e,i,n,s,o,l){var u=this.diagram;null!==u&&(t===ze&&"elements"===e?s instanceof nt?Mr(s,function(c){zp(u.partManager,c),vm(u,c)}):gf(u,s):t===Ue&&"elements"===e&&(s instanceof nt?Mr(s,function(c){Bp(u.partManager,c,u)}):mf(u,s)),u.cb(t,e,i,n,s,o,l))},L.La=function(t){if(nt.prototype.La.call(this,t),null!==this.data){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n];s instanceof nt&&Mr(s,function(o){null!==o.data&&o.La()})}for(e=this.adornments;e.next();)e.value.La(t)}},vt.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},vt.prototype.Oj=function(t){var e=this.Qf;return null===e?null:e.I(t)},vt.prototype.bh=function(t,e){if(null!==e){var i=null,n=this.Qf;if(null!==n&&(i=n.I(t)),i!==e){if(null!==i){var s=i.diagram;null!==s&&s.remove(i)}null===n&&(this.Qf=n=new kt),e.Tf!==t&&(e.category=t),n.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.ih())&&(e.data=t.data))}}},vt.prototype.Jf=function(t){var e=this.Qf;if(null!==e){var i=e.I(t);if(null!==i){var n=i.diagram;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.Qf=null)}},vt.prototype.Dj=function(){var t=this.Qf;if(null!==t){var e=Xt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Jf(e[i]);Zt(e)}},vt.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var i=e.value;i.v(),i.placeholder&&i.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.w()&&this.isVisible()&&e.Ed()&&e.actualBounds.w()){if(null===(i=this.Oj("Selection"))){if(null===(i=this.selectionAdornmentTemplate)&&(i=this.ph()?t.linkSelectionAdornmentTemplate:this instanceof At?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Bt))break t;An(i),null!==(i=i.copy())&&(this.ph()&&this.selectionObject===this.path&&(i.type=nt.Link),i.adornedObject=e)}if(null!==i){i.type===nt.Link&&i.v(),this.bh("Selection",i);break t}}this.Jf("Selection")}for(function _0(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.La()}},vt.prototype.Xb=function(){var t=this.diagram;null!==t&&(t.vd=!0,!(16384&this.G)&&(this.G|=16384))},vt.prototype.Ge=function(t,e,i,n){var s=this.uc;s.h(t,e,i,n),null===this.Mb&&(this.Mb=new Ot);var o=this.Mb;o.reset(),this.no(o,t,e,i,n),this.Mb=o,o.ws()||o.pp(s)},vt.prototype.no=function(t,e,i,n,s){if(1!==this.Ca&&t.scale(this.Ca),0!==this.Lb){var o=C;this.locationSpot.sb()&&(o=this.locationSpot);var l=z.alloc();if(this.locationObject!==this)for(l.yi((i=(e=this.locationObject).naturalBounds).x,i.y,i.width,i.height,o),null!==e.Mb&&e.Mb.Ga(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),o=e.panel;null!==o&&o!==this;)null!==o.Mb&&o.Mb.Ga(l),l.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else l.yi(e,i,n,s,o);t.rotate(this.Lb,l.x,l.y),z.free(l)}},vt.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},vt.prototype.moveTo=function(t,e,i){t=z.allocAt(t,e),this.move(t,i),z.free(t)},vt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.gv(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},vt.prototype.$b=function(t){var e=this.diagram;t?(this.C(4),this.Xb(),null!==e&&e.De.add(this)):(this.C(8),this.Dj()),this.oh(),null!==e&&(e.Ya(),e.N())},vt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Rh;if(null===e&&(this.Rh=e=new kt),null!==e.I(t))return e.I(t);var i=nt.prototype.fb.call(this,t);return null!==i?(e.set(t,i),i):(e.set(t,null),null)},vt.prototype.mi=function(t){return void 0===t&&(t=new q),t.assign(this.actualBounds)},vt.prototype.Va=function(){this.measure(1/0,1/0),this.arrange()},vt.prototype.arrange=function(){if(!1===Bn(this))Ly(this);else{wr(this,!1);var t=this.Jb,e=q.alloc();e.assign(t);var i=_o(this);this.eh(0,0,this.uc.width,this.uc.height);var n=this.position;Fy(this,n,this.location),t.ka(),t.x=n.x,t.y=n.y,t.freeze(),this.Xl(e,t),e.D(t)?this.Fd(i):!this.Zc()||_.B(e.width,t.width)&&_.B(e.height,t.height)||0<=this.ww&&this.C(16),q.free(e),pp(this,!1)}},(L=vt.prototype).Xl=function(t,e){var i=this.diagram;if(null!==i){var n=!1;if(!1===i.Zi&&t.w()){var s=q.alloc();s.assign(i.documentBounds),s.Gv(i.padding),t.x>s.x&&t.y>s.y&&t.right<s.right&&t.bottom<s.bottom&&e.x>s.x&&e.y>s.y&&e.right<s.right&&e.bottom<s.bottom&&(n=!0),q.free(s)}!(65536&this.G)&&t.D(e)||Ey(this,n,i),i.N(),!t.w()&&!e.w()||hs(t,e)||(this instanceof ct&&!i.undoManager.isUndoingRedoing&&this.Bd(),this.oh())}},L.Av=function(t,e,i){if(this.ph()||!t.w())return!1;var n=this.diagram;return null!==n&&Ny(this,n,t,e,i),this.pa=t,this.G&=-2097153,!this.ke.w()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(this.ke=new z((n=this.ke).x+(t.x-e),n.y+(t.y-i)),this.g("location",n,this.ke.copy())),!1===Ko(this)&&!1===Bn(this)&&(Sc(this),Ly(this)),!0},L.mm=function(t,e,i){var n=this.ke,s=this.pa;if(i){if(n.x===t&&n.y===e)return;Ko(this)||Bn(this)?s.h(NaN,NaN):s.h(s.x+t-n.x,s.y+e-n.y),n.h(t,e)}else{if(s.x===t&&s.y===e)return;n.h(n.x+t-s.x,n.y+e-s.y),s.h(t,e)}Sc(this)},L.Bv=function(){this.G&=-2097153,Sc(this)},L.si=function(){return!0},L.Zc=function(){return!0},L.ph=function(){return!1},L.Dd=function(){return!0},vt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},vt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},vt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},vt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},vt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},vt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},vt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},vt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},vt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(L=vt.prototype).Fd=function(t){this.G=t?131072|this.G:-131073&this.G},L.oh=function(){var t=this.containingGroup;null!==t&&(t.v(),null!==t.placeholder&&t.placeholder.v(),t.Bd())},L.N=function(){var t=this.diagram;null!==t&&!Bn(this)&&!Ko(this)&&this.isVisible()&&this.Jb.w()&&t.N(Pr(this,this.Jb))},L.v=function(){nt.prototype.v.call(this);var t=this.diagram;null!==t&&(t.De.add(this),this instanceof ct&&null!==this.labeledLink&&Wa(this.labeledLink),t.ac(!0))},L.Vo=function(t){t||null!==(t=this.Ah)&&bp(t,this)},L.Wo=function(t){t||null!==(t=this.Ah)&&Sp(t,this)},L.Kj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.cm(t)}},L.pz=function(){return mp(this,this)},L.uz=function(){return jy(this,this)},L.Td=function(t){return t instanceof At&&yp(this,this,t)},L.qx=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof At&&kc(e,!0),e instanceof ct){var i=e.labeledLink;null!==i&&(e=i)}e=e.containingGroup}for(i=null,e=t;null!==e;){if(1048576&e.G){i=e;break}e instanceof ct&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof At&&kc(e,!1),e instanceof ct&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return i},vt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof ct&&this.isLinkLabel)},vt.prototype.C=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&t&this.layoutConditions){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof ct&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.Ah)){var i=e.layout;null!==i?i.C():e.C(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.C()},Tt.Object.defineProperties(vt.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.wa(this.data)}},adornments:{get:function(){return null===this.Qf?Ii:this.Qf.iteratorValues}},layer:{get:function(){return this.Ig}},diagram:{get:function(){var t=this.Ig;return null==t?null:t.diagram}},layerName:{get:function(){return this.Jg},set:function(t){var e=this.Jg;if(e!==t){var i=this.diagram;if((null===i||null!==i.Pj(t)&&!i.partManager.addsToTemporaryLayer)&&(this.Jg=t,null!==i&&i.Ya(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(i=e.diagram)&&null!==(t=i.Pj(t))&&t!==e)){var n=e.qc(-1,this,!0);if(0<=n&&i.cb(Ue,"parts",e,this,null,n,!0),n=t.oi(99999999,this,!0),e.visible!==t.visible&&this.$b(t.visible),0<=n&&i.cb(ze,"parts",t,null,this,!0,n),null!==(n=this.layerChanged)){var s=i.aa;i.aa=!0,n(this,e,t),i.aa=s}}}}},layerChanged:{get:function(){return null!==this.P?this.P.zq:null},set:function(t){var e=this.layerChanged;e!==t&&(ji(this),this.P.zq=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Ao},set:function(t){var e=this.Ao;if(e!==t){this.Ao=t;var i=this.layer;null!==i&&Fu(i,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.nf){var t=this.locationObjectName;""!==t?(t=this.fb(t),this.nf=null!==t?t:this):this.nf=this instanceof Bt&&this.type!==nt.Link&&null!==this.placeholder?this.placeholder:this}return this.nf.visible?this.nf:this}},minLocation:{get:function(){return null!==this.P?this.P.Pq:Sa},set:function(t){var e=this.minLocation;e.D(t)||(t=t.J(),ji(this),this.P.Pq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return null!==this.P?this.P.Kq:jl},set:function(t){var e=this.maxLocation;e.D(t)||(t=t.J(),ji(this),this.P.Kq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return null!==this.P?this.P.Gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(ji(this),this.P.Gq=t,this.nf=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return null!==this.P?this.P.Hq:y},set:function(t){var e=this.locationSpot;e.D(t)||(t=t.J(),ji(this),this.P.Hq=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ke},set:function(t){var e=t.x,i=t.y,n=this.ke;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(e=t=t.copy(),this.ph())e=!1;else{if(this.ke=e,this.G|=2097152,!1===Bn(this)&&(Sc(this),(i=this.pa).w())){var s=this.diagram;if(null===s||s.animationManager.isTicking||!s.undoManager.isUndoingRedoing){var o=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),Ny(this,s,i,o.x,o.y),this.g("position",o,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Tf},set:function(t){var e=this.Tf;if(e!==t){null!==this.svg&&(this.svg.remove(),this.Uc=!0);var i=this.diagram,n=this.data,s=null;if(null!==i&&null!==n&&!(this instanceof Bt)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(s=this.clone()).O.addAll(this.O)}this.Tf=t,this.g("category",e,t),null===i||null===n||this instanceof Bt?this instanceof Bt&&null!==(s=this.adornedPart)&&(null!==(t=s.Qf)&&t.remove(e),s.bh(this.category,this)):(o=i.model).undoManager.isUndoingRedoing||(this.ph()?(i.partManager.setLinkCategoryForData(n,t),null!==(i=i.partManager.findLinkTemplateForCategory(t))&&(An(i),null!==(i=i.copy())&&fp(this,i,e,t))):(null!==o&&o.jm(n,t),null!==(i=hv(i.partManager,n,t))&&(An(i),null===(i=i.copy())||i instanceof st||(n=this.location.copy(),fp(this,i,e,t),this.location.w()||(this.location=n)))),null!==s&&((e=this.clone()).O.addAll(this.O),this.g("self",s,e)))}}},self:{get:function(){return this},set:function(t){fp(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Xb())}},groupable:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Xb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);if(e!==t){this.G^=64;var i=this.diagram;null!==i&&i.Ya(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.G)},set:function(t){var e=0!=(256&this.G);e!==t&&(this.G^=256,this.g("selectable",e,t),this.Xb())}},reshapable:{get:function(){return 0!=(512&this.G)},set:function(t){var e=0!=(512&this.G);e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Xb())}},resizable:{get:function(){return 0!=(1024&this.G)},set:function(t){var e=0!=(1024&this.G);e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Xb())}},rotatable:{get:function(){return 0!=(2048&this.G)},set:function(t){var e=0!=(2048&this.G);e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Xb())}},isSelected:{get:function(){return 0!=(4096&this.G)},set:function(t){var e=0!=(4096&this.G);if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.maxSelectionCount)){this.G^=4096;var n=!1;if(null!==i){n=i.skipsUndoManager,i.skipsUndoManager=!0;var s=i.selection;s.ka(),t?s.add(this):s.remove(this),s.freeze()}this.g("isSelected",e,t),this.Xb(),null!==(t=this.selectionChanged)&&t(this),null!==i&&(i.ac(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return 0!=(524288&this.G)},set:function(t){var e=0!=(524288&this.G);if(e!==t){this.G^=524288;var i=this.diagram;null!==i&&((i=i.highlighteds).ka(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.G)},set:function(t){var e=0!=(8192&this.G);e!==t&&(this.G^=8192,this.Uc=!0,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.G)},set:function(t){var e=0!=(262144&this.G);e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return null!==this.P?this.P.oq:null},set:function(t){var e=this.highlightedChanged;e!==t&&(ji(this),this.P.oq=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return null!==this.P?this.P.vr:""},set:function(t){var e=this.selectionObjectName;e!==t&&(ji(this),this.P.vr=t,this.Ug=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return null!==this.P?this.P.tr:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(ji(this),this.P.tr=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.Ug){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.fb(t),this.Ug=null!==t?t:this):this.Ug=this instanceof st&&null!==(t=this.path)?t:this}return this.Ug}},selectionChanged:{get:function(){return null!==this.P?this.P.ur:null},set:function(t){var e=this.selectionChanged;e!==t&&(ji(this),this.P.ur=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return null!==this.P?this.P.fr:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(ji(this),this.P.fr=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return null!==this.P?this.P.hr:""},set:function(t){var e=this.resizeObjectName;e!==t&&(ji(this),this.P.hr=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},resizeCellSize:{get:function(){return null!==this.P?this.P.gr:Ca},set:function(t){var e=this.resizeCellSize;e.D(t)||(t=t.J(),ji(this),this.P.gr=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return null!==this.P?this.P.ir:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(ji(this),this.P.ir=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return null!==this.P?this.P.jr:""},set:function(t){var e=this.rotateObjectName;e!==t&&(ji(this),this.P.jr=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},rotationSpot:{get:function(){return null!==this.P?this.P.lr:Nt},set:function(t){var e=this.rotationSpot;e.D(t)||(t=t.J(),ji(this),this.P.lr=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.fc},set:function(t){var e=this.fc;e!==t&&(this.fc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Ah},set:function(t){if(this.Zc()){var e=this.Ah;if(e!==t){null===t||this!==t&&!t.Td(this)||(this===t&&Q("Cannot make a Group a member of itself: "+this.toString()),Q("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(null!==e?Sp(e,this):this instanceof At&&null!==i&&i.ai.remove(this),this.Ah=t,null!==t?bp(t,this):this instanceof At&&null!==i&&i.ai.add(this),this.C(1),null!==i&&i.aa){var n=this.data,s=i.model;if(null!==n&&s.Wj()){var o=s.wa(null!==t?t.data:null);s.mp(n,o)}}if(null!==(n=this.containingGroupChanged)&&(s=!0,null!==i&&(s=i.aa,i.aa=!0),n(this,e,t),null!==i&&(i.aa=s)),this instanceof At)for(Zo(i=new ht,this,!0,0,!0),i=i.iterator;i.next();)if((n=i.value)instanceof ct)for(n=n.linksConnected;n.next();)al(n.value);if(this instanceof ct){for(i=this.linksConnected;i.next();)al(i.value);null!==(i=this.labeledLink)&&al(i)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&Fu(e,-1,t)}}else Q("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return null!==this.P?this.P.Kp:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(ji(this),this.P.Kp=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof ct&&null!==this.labeledLink)}},layoutConditions:{get:function(){return null!==this.P?this.P.Cq:127},set:function(t){var e=this.layoutConditions;e!==t&&(ji(this),this.P.Cq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return null!==this.P?this.P.Up:null},set:function(t){var e=this.dragComputation;e!==t&&(ji(this),this.P.Up=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return null!==this.P?this.P.zr:ka},set:function(t){var e=this.shadowOffset;e.D(t)||(t=t.J(),ji(this),this.P.zr=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return null!==this.P?this.P.yr:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(ji(this),this.P.yr=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return null!==this.P?this.P.Vg:4},set:function(t){var e=this.shadowBlur;e!==t&&(ji(this),this.P.Vg=t,this.N(),this.g("shadowBlur",e,t))}}}),vt.prototype.invalidateLayout=vt.prototype.C,vt.prototype.findCommonContainingGroup=vt.prototype.qx,vt.prototype.isMemberOf=vt.prototype.Td,vt.prototype.findTopLevelPart=vt.prototype.uz,vt.prototype.findSubGraphLevel=vt.prototype.pz,vt.prototype.ensureBounds=vt.prototype.Va,vt.prototype.getDocumentBounds=vt.prototype.mi,vt.prototype.findObject=vt.prototype.fb,vt.prototype.moveTo=vt.prototype.moveTo,vt.prototype.invalidateAdornments=vt.prototype.Xb,vt.prototype.clearAdornments=vt.prototype.Dj,vt.prototype.removeAdornment=vt.prototype.Jf,vt.prototype.addAdornment=vt.prototype.bh,vt.prototype.findAdornment=vt.prototype.Oj,vt.prototype.updateTargetBindings=vt.prototype.La;var zy=!1;function Bt(t,e){void 0===t||t instanceof je||"string"==typeof t?vt.call(this,t):(vt.call(this),t&&(e=t)),this.G&=-257,this.Jg="Adornment",this.ue=null,this.Bw=0,this.Vw=!1,this.j=this.$a=null,e&&Object.assign(this,e)}function vp(){this.oc=!1,this.Vr=this.gj=this.Eq=this.Dq=null,this.yp=h,this.er=Ac,this.Kr=this.ij=this.Nq=this.Mq=null}function ct(t,e){void 0===t||t instanceof je||"string"==typeof t?vt.call(this,t):(vt.call(this),t&&(e=t)),this.R=13,this.Ba=null,this.jb=new dt,this.wc=this.af=this.Xk=null,this.ci=!1,e&&Object.assign(this,e)}function Mo(t){null===t.Ba?t.Ba=new vp:t.Ba.oc&&(t.Ba=t.Ba.copy())}function By(t,e){null!==e&&(null===t.af&&(t.af=new ht),t.af.add(e))}function Ry(t,e,i,n){if(null===e||null===t.af)return null;for(var s=t.af.iterator;s.next();){var o=s.value;if(o.Ds===t&&o.dv===e&&o.Px===i&&o.Qx===n||o.Ds===e&&o.dv===t&&o.Px===n&&o.Qx===i)return o}return null}function Yy(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(_i(i.fromPort),_i(i.toPort),i.bb())}}function _i(t){if(null!==t){var e=t.Zn;null!==e&&e.Sl(),null===(e=(t=t.part).containingGroup)||t.isVisible()||_i(e.port)}}function Xy(t,e,i,n){if(null!==e&&!i.has(e)){i.add(e);var s=!0,o=t.diagram;null!==o&&(s=o.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(s?l.fromNode===e:l.toNode===e)&&Xy(t,s?l.toNode:l.fromNode,i,n):n.add(l)})}}function Mc(t,e,i){_i(i);var n=t.jb.contains(e);if(n||t.jb.add(e),!n||e.fromNode===e.toNode){var s=t.linkConnected;if(null!==s){var o=!0,l=t.diagram;null!==l&&(o=l.aa,l.aa=!0),s(t,e,i),null!==l&&(l.aa=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,null!==i&&null!==e&&i!==e&&(n=!0,null!==(t=t.diagram)&&(n=t.isTreePathToChildren),o=n?i:e,(s=n?e:i).ci||(s.ci=o),!o.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function Cc(t,e,i){_i(i);var n=t.jb.remove(e),s=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(s=t.diagram,null!==o){var l=!0;null!==s&&(l=s.aa,s.aa=!0),o(t,e,i),null!==s&&(s.aa=l)}}n&&e.isTreeLink&&(i=!0,null!==s&&(i=s.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,null!==t&&(t.ci=!1),null===e||e.isTreeLeaf||(0===e.jb.count?(e.ci=null,null!==s&&s.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):xh(e)))}function xh(t){if(t.ci=!1,0!==t.jb.count){var e=!0,i=t.diagram;if(null===i||!i.undoManager.isUndoingRedoing){for(null!==i&&(e=i.isTreePathToChildren),i=t.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink)if(e){if(n.fromNode===t)return void(t.isTreeLeaf=!1)}else if(n.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Hy(t){null===t.wc?t.wc=new kt:t.wc.clear(),t.qm(t,function(e,i){Vy(e,i)}),0===t.wc.count&&t.wc.add("",t)}function Vy(t,e){var i=e.portId;null!==i&&null!==t.wc&&t.wc.add(i,e)}function xp(t,e,i){var n=e.portId;if(null!==n&&(null!==t.wc&&t.wc.remove(n),null!==(e=t.diagram)&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,null===i&&(i=Xt()),i.push(n);if(null!==i){for(t=0;t<i.length;t++)e.remove(i[t]);Zt(i)}}}function Gy(t,e){return null===(e=e.pg())?0:1+Gy(t,e)}function Wy(t,e,i,n,s,o,l){if(1<n)for(var u=i?t.Mo():t.Sd();u.next();){var c=u.value;c.isTreeLink&&(null===(c=c.To(t))||c===t||e.contains(c)||(e.add(c),Wy(c,e,i,n-1,s,o,l)))}else Uy(t,e,i,s,o,l)}function Uy(t,e,i,n,s,o){for(var l=s===t||t.isTreeExpanded,u=i?t.Mo():t.Sd(),c={};u.next();){var p=u.value;if(p.isTreeLink&&null!==(p=p.To(t))&&p!==t){var m=e.contains(p);if(m||e.add(p),l){var v=i?p.Oo():p.Po();c.vv=t,v.all(function(w){return function(k){return k===w.vv||!k.isTreeExpanded}}(c))&&n.Aj(p,s),p.oh(),p.$b(!1)}p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,m||Uy(p,e,i,n,s,o))}c={vv:c.vv}}t.isTreeExpanded=!1}function Ky(t,e,i,n,s,o,l){for(var u=o!==t&&t.isTreeExpanded,c=i?t.Mo():t.Sd(),p={};c.next();){var m=c.value;if(m.isTreeLink&&(u||m.fd||m.bb(),null!==(m=m.To(t))&&m!==t&&!e.contains(m))){if(e.add(m),!u){m.$b(!0),m.oh();var v=i?m.Oo():m.Po();p.wv=t,v.all(function(w){return function(k){return k===w.wv||!k.isTreeExpanded}}(p))&&s.Cj(m,o)}(2<n||m.wasTreeExpanded)&&(m.wasTreeExpanded=!1,Ky(m,e,i,n-1,s,o,l))}p={wv:p.wv}}t.isTreeExpanded=!0}vt.className="Part",vt.LayoutNone=0,vt.LayoutAdded=1,vt.LayoutRemoved=2,vt.LayoutShown=4,vt.LayoutHidden=8,vt.LayoutNodeSized=16,vt.LayoutGroupLayout=32,vt.LayoutNodeReplaced=64,vt.LayoutStandard=127,vt.LayoutAll=16777215,Vt(Bt,vt),Bt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Bt.prototype.updateRelationshipsFromData=function(){},Bt.prototype.Ul=function(t){var e=this.adornedObject,i=e?.part;if(i instanceof st&&e instanceof Pt){e=i.path,i.Ul(t),t=e.geometry,e=(i=this.O.s).length;for(var n=0;n<e;n++){var s=i[n];s.isPanelMain&&s instanceof Pt&&(s.ua=t)}}},Bt.prototype.si=function(){var t=this.ue;return null===t||null===(t=t.part)||!Bn(t)},Bt.prototype.Zc=function(){return!1},Bt.prototype.fk=function(t,e,i,n,s,o,l){if(t===ze&&"elements"===e){if(s instanceof Mi)null===this.$a&&(this.$a=s);else if(s instanceof nt){var u=s.Nl(function(c){return c instanceof Mi});u instanceof Mi&&null===this.$a&&(this.$a=u)}}else t===Ue&&"elements"===e&&null!==this.$a&&(n===this.$a||n instanceof nt&&this.$a.rg(n))&&(this.$a=null);vt.prototype.fk.call(this,t,e,i,n,s,o,l)},Bt.prototype.updateAdornments=function(){},Bt.prototype.Kj=function(){},Tt.Object.defineProperties(Bt.prototype,{placeholder:{get:function(){return this.$a}},adornedObject:{get:function(){return this.ue},set:function(t){var e=this.adornedPart,i=null;null!==t&&(i=t.part),null===e||null!==t&&e===i||e.Jf(this.category),this.ue=t,null!==i&&i.bh(this.category,this)}},adornedPart:{get:function(){var t=this.ue;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),Bt.className="Adornment",vp.prototype.copy=function(){var t=new vp;return t.Dq=this.Dq,t.Eq=this.Eq,t.gj=this.gj,t.Vr=this.Vr,t.yp=this.yp.J(),t.er=this.er,t.Mq=this.Mq,t.Nq=this.Nq,t.ij=this.ij,t.Kr=this.Kr,t},Vt(ct,vt),ct.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.R=this.R,null!==this.Ba&&(t.Ba=this.Ba.oc?this.Ba:this.Ba.copy())},(L=ct.prototype).Af=function(t){vt.prototype.Af.call(this,t),t.Bd(),t.af=this.af,t.wc=null},L.th=function(){vt.prototype.th.call(this),null!==this.Ba&&(this.Ba.oc=!0)},L.Mz=function(t,e,i){null==e&&(e=""),null==i&&(i=""),null!==(t=Ry(this,t,e,i))&&t.Sl()},L.fk=function(t,e,i,n,s,o,l){(t===ze&&"elements"===e||t===Ue&&"elements"===e)&&(this.wc=null),vt.prototype.fk.call(this,t,e,i,n,s,o,l)},L.Bd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;void 0!==t&&t.contains(i)||(_i(i.fromPort),_i(i.toPort),i.bb())}},L.si=function(){return!0},ct.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Co(this.avoidableMargin),t},ct.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},ct.prototype.isVisible=function(){if(!vt.prototype.isVisible.call(this))return!1;var t=!0,e=Jr,i=this.diagram;if(null!==i&&(t=i.isTreePathToChildren,e=i.treeCollapsePolicy),e===Jr){if(null!==(t=this.pg())&&!t.isTreeExpanded)return!1}else if(e===Cf){if(0<(t=t?this.Oo():this.Po()).count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===Af&&0<(t=t?this.Oo():this.Po()).count&&t.any(function(n){return!n.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},ct.prototype.$b=function(t){vt.prototype.$b.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&null!==this.containingGroup){var n=i.To(this);null===n||n.Td(this.containingGroup)||i.bb()}i.$b(t)}},ct.prototype.sx=function(){var t=new ht,e=new ht;return Xy(this,this,t,e),e.iterator},ct.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.jb.iterator;var e=new Re(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},(L=ct.prototype).Mo=function(t){void 0===t&&(t=null);var e=new Re(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&(null===t||n.fromPortId===t)},e},L.Sd=function(t){void 0===t&&(t=null);var e=new Re(this.jb),i=this;return e.predicate=function(n){return n.toNode===i&&(null===t||n.toPortId===t)},e},L.Nu=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var s=n.value;s.fromNode===this?(null===t||s.fromPortId===t)&&(s=s.toNode,null!==e?e.add(s):null!==i&&i!==s?((e=new ht).add(i),e.add(s)):i=s):s.toNode!==this||null!==t&&s.toPortId!==t||(s=s.fromNode,null!==e?e.add(s):null!==i&&i!==s?((e=new ht).add(i),e.add(s)):i=s)}return null!==e?e.iterator:null!==i?new We(i):Ii},L.Po=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var s=n.value;s.fromNode!==this||null!==t&&s.fromPortId!==t||(s=s.toNode,null!==e?e.add(s):null!==i&&i!==s?((e=new ht).add(i),e.add(s)):i=s)}return null!==e?e.iterator:null!==i?new We(i):Ii},L.Oo=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var s=n.value;s.toNode!==this||null!==t&&s.toPortId!==t||(s=s.fromNode,null!==e?e.add(s):null!==i&&i!==s?((e=new ht).add(i),e.add(s)):i=s)}return null!==e?e.iterator:null!==i?new We(i):Ii},L.kz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Re(this.jb),s=this;return n.predicate=function(o){return!((o.fromNode!==s||o.toNode!==t||null!==e&&o.fromPortId!==e||null!==i&&o.toPortId!==i)&&(o.fromNode!==t||o.toNode!==s||null!==i&&o.fromPortId!==i||null!==e&&o.toPortId!==e))},n},L.lz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Re(this.jb),s=this;return n.predicate=function(o){return!(o.fromNode!==s||o.toNode!==t||null!==e&&o.fromPortId!==e||null!==i&&o.toPortId!==i)},n},ct.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(L=ct.prototype).Vo=function(t){vt.prototype.Vo.call(this,t),t||(xh(this),null!==(t=this.Xk)&&Jy(t,this))},L.Wo=function(t){vt.prototype.Wo.call(this,t),t||null!==(t=this.Xk)&&null!==t.wd&&(t.wd.remove(this),t.v())},L.Kj=function(){if(0<this.jb.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,i=this.jb.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,vt.prototype.Kj.call(this)},L.ns=function(t){if(null===this.wc){if(""===t&&!1===this.Te)return this;Hy(this)}var e=this.wc.I(t);return null!==e||""!==t&&null!==(e=this.wc.I(""))?e:this},L.Oz=function(t){if(null===t||t===this)return!1;var e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.jb.iterator;n.next();){var s=n.value;if(s.isTreeLink&&(e=s.fromNode)!==i&&e!==this)break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.jb.iterator;n.next()&&(!(s=n.value).isTreeLink||(e=s.toNode)===i||e===this););if(e===this||null===e||e===i)return!1;i=e}return!0},L.yz=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.jb.iterator;i.next()&&(!(n=i.value).isTreeLink||(t=n.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},L.hz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)kc(e,!0),e=e.pg();var i=null;for(e=t;null!==e;){if(1048576&e.G){i=e;break}e=e.pg()}for(e=this;null!==e;)kc(e,!1),e=e.pg();return i},L.kh=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},L.pg=function(){var t=this.ci;if(null===t)return null;if(t instanceof ct)return t;t=null===(t=this.diagram)||t.isTreePathToChildren;for(var e=this.jb.iterator;e.next();){var i=e.value;if(i.isTreeLink&&(i=t?i.fromNode:i.toNode)!==this)return this.ci=i}return this.ci=null},L.wz=function(){var e=new ht;return function t(i,n){n.add(i);var s=i.kh();null!==s&&(n.add(s),null!==(i=i.pg())&&t(i,n))}(this,e),e},L.vz=function(){return Gy(this,this)},L.Qo=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new Re(this.jb);var i=this;return e.predicate=t?function(n){return!(!n.isTreeLink||n.fromNode!==i)}:function(n){return!(!n.isTreeLink||n.toNode!==i)},e},L.Pu=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var i=e=null,n=this.jb.iterator;if(t)for(;n.next();)(t=n.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==i&&i!==t?((e=new dt).add(i),e.add(t)):i=t);else for(;n.next();)(t=n.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==i&&i!==t?((e=new dt).add(i),e.add(t)):i=t);return null!==e?e.iterator:null!==i?new We(i):Ii},L.xz=function(t){void 0===t&&(t=1/0);var e=new ht;return Zo(e,this,!1,t,!0),e},ct.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ue){e.Ue=!0;var i=new ht;i.add(this),Wy(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Jr),e.Ue=!1}},ct.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ue){e.Ue=!0;var i=new ht;i.add(this),Ky(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Jr),e.Ue=!1}},Tt.Object.defineProperties(ct.prototype,{portSpreading:{get:function(){return null!==this.Ba?this.Ba.er:Ac},set:function(t){var e=this.portSpreading;e!==t&&(Mo(this),this.Ba.er=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Bd())}},avoidable:{get:function(){return 0!=(8&this.R)},set:function(t){var e=0!=(8&this.R);if(e!==t){this.R^=8;var i=this.diagram;null!==i&&Sf(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return null!==this.Ba?this.Ba.yp:h},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.avoidableMargin;if(!e.D(t)){t=t.J(),Mo(this),this.Ba.yp=t;var i=this.diagram;null!==i&&Sf(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return null!==this.Ba?this.Ba.Dq:null},set:function(t){var e=this.linkConnected;e!==t&&(Mo(this),this.Ba.Dq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return null!==this.Ba?this.Ba.Eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(Mo(this),this.Ba.Eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return null!==this.Ba?this.Ba.gj:null},set:function(t){var e=this.linkValidation;e!==t&&(Mo(this),this.Ba.gj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Xk}},labeledLink:{get:function(){return this.Xk},set:function(t){var e=this.Xk;if(e!==t){var i=this.diagram,n=this.data;if(null!==e){if(null!==e.wd&&(e.wd.remove(this),e.v()),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){var s=e.data,o=i.model;if(null!==s&&o.ri()){var l=o.wa(n);void 0!==l&&o.Rx(s,l)}}this.containingGroup=null}this.Xk=t,null!==t&&(Jy(t,this),null===i||null===n||i.undoManager.isUndoingRedoing||(i=i.model,null!==(s=t.data)&&i.ri()&&void 0!==(n=i.wa(n))&&i.Bu(s,n)),this.containingGroup=t.containingGroup),Wa(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.ns("")}},ports:{get:function(){return null===this.wc&&Hy(this),this.wc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.R)},set:function(t){var e=0!=(1&this.R);if(e!==t){this.R^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var n=!0;null!==i&&(n=i.aa,i.aa=!0),e(this),null!==i&&(i.aa=n)}null!==i&&i.undoManager.isUndoingRedoing?this.$b(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.R)},set:function(t){var e=0!=(2&this.R);e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return null!==this.Ba?this.Ba.Vr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(Mo(this),this.Ba.Vr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.R)},set:function(t){var e=0!=(4&this.R);e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),ct.prototype.expandTree=ct.prototype.expandTree,ct.prototype.collapseTree=ct.prototype.collapseTree,ct.prototype.findTreeParts=ct.prototype.xz,ct.prototype.findTreeChildrenNodes=ct.prototype.Pu,ct.prototype.findTreeChildrenLinks=ct.prototype.Qo,ct.prototype.findTreeLevel=ct.prototype.vz,ct.prototype.findTreeParentChain=ct.prototype.wz,ct.prototype.findTreeParentNode=ct.prototype.pg,ct.prototype.findTreeParentLink=ct.prototype.kh,ct.prototype.findCommonTreeParent=ct.prototype.hz,ct.prototype.findTreeRoot=ct.prototype.yz,ct.prototype.isInTreeOf=ct.prototype.Oz,ct.prototype.findPort=ct.prototype.ns,ct.prototype.findLinksTo=ct.prototype.lz,ct.prototype.findLinksBetween=ct.prototype.kz,ct.prototype.findNodesInto=ct.prototype.Oo,ct.prototype.findNodesOutOf=ct.prototype.Po,ct.prototype.findNodesConnected=ct.prototype.Nu,ct.prototype.findLinksInto=ct.prototype.Sd,ct.prototype.findLinksOutOf=ct.prototype.Mo,ct.prototype.findExternalTreeLinksConnected=ct.prototype.sx,ct.prototype.invalidateConnectedLinks=ct.prototype.Bd,ct.prototype.invalidateLinkBundle=ct.prototype.Mz;var Z0=new ut(ct,"SpreadingNone",10),Ac=new ut(ct,"SpreadingEvenly",11),wp=new ut(ct,"SpreadingPacked",12);function At(t,e){void 0===t||t instanceof je||"string"==typeof t?ct.call(this,t):(ct.call(this),t&&(e=t)),this.R|=4608,this.Gn=new ht,this.$a=null,this.Sc=new ae,this.Sc.group=this,this.fl=new ht,this.tb=this.$p=null,e&&Object.assign(this,e)}function bp(t,e){if(t.Gn.add(e)){e instanceof At&&t.fl.add(e);var i=t.memberAdded;if(null!==i){var n=!0,s=t.diagram;null!==s&&(n=s.aa,s.aa=!0),i(t,e),null!==s&&(s.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.$b(!1)}e instanceof st&&!t.computesBoundsIncludingLinks||(null===(e=t.$a)&&(e=t),e.v())}function Sp(t,e){if(t.Gn.remove(e)){e instanceof At&&t.fl.remove(e);var i=t.memberRemoved;if(null!==i){var n=!0,s=t.diagram;null!==s&&(n=s.aa,s.aa=!0),i(t,e),null!==s&&(s.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.$b(!0)}e instanceof st&&!t.computesBoundsIncludingLinks||(null===(e=t.$a)&&(e=t),e.v())}function _y(t,e,i,n){for(var s=t.memberParts;s.next();){var o=s.value;if(o.$b(!1),o instanceof At&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,_y(o,e,i,n)),o instanceof ct)o.Bd(e),i.Aj(o,n);else if(o instanceof st)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!1}function Zy(t,e,i,n){for(var s=t.memberParts;s.next();){var o=s.value;if(o.$b(!0),o instanceof At&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,Zy(o,e,i,n)),o instanceof ct)o.Bd(e),i.Cj(o,n);else if(o instanceof st)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!0}function Mi(t){yt.call(this),this.zb=a,this.ko=new q(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function st(t){vt.call(this,nt.Link),this.Qa=8,this.ef=null,this.ff="",this.uf=this.gn=null,this.vf="",this.uo=null,this.pk=Ci,this.Om=0,this.Qm=Ci,this.Rm=NaN,this.qj=Ap,this.po=.5,this.wd=null,this.Ob=(new dt).freeze(),this.Tg=this.Mg=null,this.ml=new q,this.ua=new rt,this.u=this.o=this.Sf=this.Wf=null,this.su=new z,this.cq=this.Nw=this.Mw=null,this.vt=NaN,this.ba=null,this.j=[],t&&Object.assign(this,t)}function al(t){var n,e=t.fromNode,i=t.toNode;if(n=null!==e?null!==i?e.qx(i):e.containingGroup:null!==i?i.containingGroup:null,(i=t.Ah)!==(e=n)){null!==i&&Sp(i,t),t.Ah=e,null!==e&&bp(e,t);var s=t.containingGroupChanged;if(null!==s){var o=!0,l=t.diagram;null!==l&&(o=l.aa,l.aa=!0),s(t,i,e),null!==l&&(l.aa=o)}!t.fd||t.Mw!==i&&t.Nw!==i||t.bb()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}function Jy(t,e){null===t.wd&&(t.wd=new ht),t.wd.add(e),t.v()}function Co(t,e,i){if(0!==e||0!==i)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.fd,s=new dt,o=t.Ob.iterator;o.next();){var l=o.value;s.add(new z(l.x+e,l.y+i).freeze())}s.freeze(),o=t.Ob,t.Ob=s,l=t.diagram,isNaN(e)||isNaN(i)||null!==l&&l.animationManager.Ab?t.v():(t.ke.h(t.ke.x+e,t.ke.y+i),t.pa.h(t.pa.x+e,t.pa.y+i),Wa(t)),n?Pc(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==l&&l.animationManager.Ab&&Qd(l.animationManager,t,s),t.g("points",o,s)}}function Pc(t){0===t.Ob.count?t.fd=!1:(t.fd=!0,t.cq=null,t.vt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),Fc(t,!1))}function kp(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Lc(t,e){var i=e.Zn;return null===i&&((i=new aa).port=e,i.node=e.part,e.Zn=i),ov(i,t)}function ll(t){return t===g||.5===t.x&&.5===t.y}function Tc(t){return.5===t.x&&.5===t.y?t:C}function $y(t){if(null===t.diagram||!t.isAvoiding||!Sm(t.diagram))return!1;var e=t.points.s,i=e.length;if(4>i)return!1;t=wf(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var s=e[n],o=e[n+1];if(!t.Xj(Math.min(s.x,o.x),Math.min(s.y,o.y),Math.abs(s.x-o.x),Math.abs(s.y-o.y)))return!0}return!1}function Mp(t,e,i,n,s,o,l){var u=e.Ho,c=e.Go,p=Ns(e,i,n),m=i,v=n;for(0===s?m+=u:90===s?v+=c:180===s?m-=u:v-=c,s!==l&&p>Tr&&Ns(e,m,v)!==p-1&&(Ns(e,i-u,n)===p-1?(s=180,m=i-u,v=n):Ns(e,i+u,n)===p-1?(s=0,m=i+u,v=n):Ns(e,i,n-c)===p-1?(s=270,m=i,v=n-c):Ns(e,i,n+c)===p-1&&(s=90,m=i,v=n+c));p>Tr&&Ns(e,m,v)===p-1;)i=m,n=v,0===s?m+=u:90===s?v+=c:180===s?m-=u:v-=c,--p;o?p>Tr&&(180===s||0===s?i=Math.floor(i/u)*u+u/2:(90===s||270===s)&&(n=Math.floor(n/c)*c+c/2)):(i=Math.floor(i/u)*u+u/2,n=Math.floor(n/c)*c+c/2),p>Tr&&(o=s,l=i,m=n,0===s?(o=90,m+=c):90===s?(o=180,l-=u):180===s?(o=270,m-=c):270===s&&(o=0,l+=u),Ns(e,l,m)===p-1?Mp(t,e,l,m,o,!1,o):(l=i,m=n,0===s?(o=270,m-=c):90===s?(o=0,l+=u):180===s?(o=90,m+=c):270===s&&(o=180,l-=u),Ns(e,l,m)===p-1&&Mp(t,e,l,m,o,!1,o))),t.yf(i,n)}function Nc(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),_.$(t,0)?e:_.$(e,0)?t:Math.sqrt(t*t+e*e)))}function na(t,e,i,n){var s=t.pointsCount;if(2>s)return e;if(i){var o=t.i(1);if(0===(n=Nc(e.x,e.y,i=o.x-n.x,o=o.y-n.y)))return e;s=2===s?.5*n:n,(t=t.computeShortLength(!0))>s&&(t=s),s=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=s}else{if(o=t.i(s-2),0===(n=Nc(e.x,e.y,i=o.x-n.x,o=o.y-n.y)))return e;s=2===s?.5*n:n,(t=t.computeShortLength(!1))>s&&(t=s),s=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=s}return e}function Cp(t,e,i,n){for(var s=t.pointsCount,o=e;_.$(e.x,o.x)&&_.$(e.y,o.y);){if(i>=s)return s-1;o=t.i(i++)}if(!_.$(e.x,o.x)&&!_.$(e.y,o.y))return i-1;for(var l=o;_.$(e.x,o.x)&&_.$(o.x,l.x)&&(!n||(e.y>=o.y?o.y>=l.y:o.y<=l.y))||_.$(e.y,o.y)&&_.$(o.y,l.y)&&(!n||(e.x>=o.x?o.x>=l.x:o.x<=l.x));){if(i>=s)return s-1;l=t.i(i++)}return i-2}function sa(t,e,i,n,s,o,l){if(!l&&Lr(t)){var u=(l=t.computeJumpLength())/2,c=[],p=0;if(t.isVisible()&&(p=function J0(t,e,i,n){var s=t.diagram;if(null===s||e.D(i))return 0;for(s=s.layers;s.next();){var o=s.value;if(null!==o&&o.visible)for(var l=(o=o.Pa.s).length,u=0;u<l;u++){var c=o[u];if(c instanceof st){if(c===t)return 0<n.length&&n.sort(function(m,v){return m-v}),n.length;if(c.isVisible()&&Lr(c)){var p=c.routeBounds;p.w()&&t.routeBounds.Yc(p)&&!t.usesSamePort(c)&&null!==(p=c.path)&&p.Ed()&&$0(e,i,n,c)}}}}return 0<n.length&&n.sort(function(m,v){return m-v}),n.length}(t,s,o,c)),0<p)if(_.B(s.y,o.y))if(s.x<o.x)for(var m=0;m<p;){var v=Math.max(s.x,Math.min(c[m++]-u,o.x-l));e.lineTo(v+i,o.y+n);for(var w=v+i,k=Math.min(v+l,o.x);m<p&&(v=c[m])<k+l;)m++,k=Math.min(v+u,o.x);v=o.y-l+n,k+=i;var A=o.y+n;t.curve===Ao?rl(e,k,A,!1):So(e,w,v,k,v,k,A)}else for(--p;0<=p;){for(m=Math.min(s.x,Math.max(c[p--]+u,o.x+l)),e.lineTo(m+i,o.y+n),w=m+i,v=Math.max(m-l,o.x);0<=p&&(m=c[p])>v-l;)p--,v=Math.max(m-u,o.x);m=o.y-l+n,v+=i,k=o.y+n,t.curve===Ao?rl(e,v,k,!1):So(e,w,m,v,m,v,k)}else if(_.B(s.x,o.x))if(s.y<o.y)for(m=0;m<p;){for(v=Math.max(s.y,Math.min(c[m++]-u,o.y-l)),e.lineTo(o.x+i,v+n),w=v+n,v=Math.min(v+l,o.y);m<p&&(k=c[m])<v+l;)m++,v=Math.min(k+u,o.y);k=o.x-l+i,A=o.x+i,v+=n,t.curve===Ao?rl(e,A,v,!1):So(e,k,w,k,v,A,v)}else for(--p;0<=p;){for(m=Math.min(s.y,Math.max(c[p--]+u,o.y+l)),e.lineTo(o.x+i,m+n),w=m+n,m=Math.max(m-l,o.y);0<=p&&(v=c[p])>m-l;)p--,m=Math.max(v-u,o.y);v=o.x-l+i,k=o.x+i,m+=n,t.curve===Ao?rl(e,k,m,!1):So(e,v,w,v,m,k,m)}}e.lineTo(o.x+i,o.y+n)}function $0(t,e,i,n){for(var s=_.B(t.y,e.y),o=n.pointsCount,l=n.i(0),u=z.alloc(),c=1;c<o;c++){var p=n.i(c);if(c<o-1){var m=n.i(c+1);if(l.y===p.y&&p.y===m.y){if(p.x>l.x&&m.x>=p.x||p.x<l.x&&m.x<=p.x)continue}else if(l.x===p.x&&p.x===m.x&&(p.y>l.y&&m.y>=p.y||p.y<l.y&&m.y<=p.y))continue}t:{var v=t.y,w=e.x,k=e.y,A=l.x;l=l.y;var T=p.x,j=p.y;if(_.B(m=t.x,w)){if(!_.B(v,k)&&_.B(l,j)&&Math.min(v,k)<l&&Math.max(v,k)>l&&Math.min(A,T)<m&&Math.max(A,T)>m&&!_.B(A,T)){u.x=m,u.y=l,m=!0;break t}}else if(_.B(v,k)&&_.B(A,T)&&Math.min(m,w)<A&&Math.max(m,w)>A&&Math.min(l,j)<v&&Math.max(l,j)>v&&!_.B(l,j)){u.x=A,u.y=v,m=!0;break t}u.x=0,u.y=0,m=!1}m&&i.push(s?u.x:u.y),l=p}z.free(u)}function Lr(t){return(t=t.curve)===hl||t===Ao}function Fc(t,e){(e||Lr(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Eh.contains(t)||0===t.ml.width&&0===t.ml.height||e.Eh.add(t,t.ml.copy()))}function Qy(t,e,i){if(null!==e&&e.kk&&e.fd&&Lr(e)){var n=e.routeBounds;n.w()&&(t.routeBounds.Yc(n)||i.Yc(n))&&(t.usesSamePort(e)||e.rc())}}function wh(t){var e=t.ef;if(null!==e){var i=t.uf;if(null!==i&&isNaN(t.curviness)){for(var n=t.ff,s=t.vf,o=t=null,l=e.jb.s,u=l.length,c=0;c<u;c++){var p=l[c];(p.ef===e&&p.ff===n&&p.uf===i&&p.vf===s||p.ef===i&&p.ff===s&&p.uf===e&&p.vf===n)&&(null===o?o=p:(null===t&&(t=[]).push(o),t.push(p)))}if(null!==t){for(null===(o=Ry(e,i,n,s))&&(By(e,o=new Dc(e,n,i,s)),By(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Sf=o;o.Sl()}}}}function bh(t){var e=t.Sf;null!==e&&isNaN(t.curviness)&&(t.Sf=null,0<=(t=e.links.indexOf(t))&&(Yo(e.links,t),e.Sl()))}ct.className="Node",ct.SpreadingNone=Z0,ct.SpreadingEvenly=Ac,ct.SpreadingPacked=wp,Vt(At,ct),At.prototype.cloneProtected=function(t){ct.prototype.cloneProtected.call(this,t),this.R=-32769&this.R;var e=t.Nl(function(i){return i instanceof Mi});t.$a=e instanceof Mi?e:null,null!==this.Sc?(t.Sc=this.Sc.copy(),t.Sc.group=t):(null!==t.Sc&&(t.Sc.group=null),t.Sc=null),null!==this.tb&&(t.tb=this.tb.copy())},(L=At.prototype).Af=function(t){ct.prototype.Af.call(this,t);var e=t.Qj();for(t=t.memberParts;t.next();){var i=t.value;if(i.v(),i.C(8),i.Dj(),i instanceof ct)i.Bd(e);else if(i instanceof st)for(i=i.labelNodes;i.next();)i.value.Bd(e)}},L.fk=function(t,e,i,n,s,o,l){if(t===ze&&"elements"===e){if(s instanceof Mi)null===this.$a?this.$a=s:this.$a!==s&&Q("Cannot insert a second Placeholder into the visual tree of a Group.");else if(s instanceof nt){var u=s.Nl(function(c){return c instanceof Mi});u instanceof Mi&&(null===this.$a?this.$a=u:this.$a!==u&&Q("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ue&&"elements"===e&&null!==this.$a&&(n===this.$a||n instanceof nt&&this.$a.rg(n))&&(this.$a=null);ct.prototype.fk.call(this,t,e,i,n,s,o,l)},L.Xl=function(t,e){ct.prototype.Xl.call(this,t,e),this.isClipping&&this.type!==nt.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof nt&&(t=t.Qb()),null===this.tb&&(this.tb=new q),t.mi(this.tb),t instanceof Pt&&this.tb.Bc(-t.strokeWidth,-t.strokeWidth))},L.eh=function(t,e,i,n){this.nf=this.$a,ct.prototype.eh.call(this,t,e,i,n)},L.Va=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof st||e.Va()}),ct.prototype.Va.call(this)},L.si=function(){if(!ct.prototype.si.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof ct){if(e.isVisible()&&Bn(e))return!1}else if(e instanceof st&&e.isVisible()&&Bn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},L.Kj=function(){if(0<this.Gn.count){var t=this.diagram;if(null!==t)for(var e=this.Gn.copy().iterator;e.next();)t.remove(e.value)}ct.prototype.Kj.call(this)},At.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Lf(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},At.prototype.addMembers=function(t,e){var i=this.diagram;if(null===i)return!1;i=i.commandHandler;var n=!0;for(t=Lf(t).iterator;t.next();){var s=t.value;!e||i.isValidMember(this,s)?s.containingGroup=this:n=!1}return n},At.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null===t||!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(L=At.prototype).Bd=function(t){var e=0!=(65536&this.R);if(ct.prototype.Bd.call(this,t),!e)for(!(65536&this.R)&&(this.R=65536^this.R),e=this.Mu();e.next();){var i=e.value;if(void 0===t||!t.contains(i)){var n=i.fromNode;(null!==n&&n!==this&&n.Td(this)&&!n.isVisible()||null!==(n=i.toNode)&&n!==this&&n.Td(this)&&!n.isVisible())&&(_i(i.fromPort),_i(i.toPort),i.bb())}}},L.Mu=function(){var t=null!==this.diagram&&this.diagram.Qw;if(t&&null!==this.$p)return this.$p.iterator;var e=this.Qj();e.add(this);for(var i=new ht,n=e.iterator;n.next();){var s=n.value;if(s instanceof ct)for(s=s.linksConnected;s.next();){var o=s.value;e.contains(o)||i.add(o)}}return t&&(this.$p=i),i.iterator},L.jz=function(){var t=this.Qj();t.add(this);for(var e=new ht,i=t.iterator;i.next();){var n=i.value;if(n instanceof ct)for(n=n.linksConnected;n.next();){var s=n.value,o=s.fromNode;null===o||t.contains(o)&&o!==this||e.add(o),null===(s=s.toNode)||t.contains(s)&&s!==this||e.add(s)}}return e.iterator},L.iz=function(){var e=new ht;return function t(i,n){null!==i&&(n.add(i),t(i.containingGroup,n))}(this,e),e},L.Qj=function(){var t=new ht;return Zo(t,this,!0,0,!0),t.remove(this),t},L.$b=function(t){ct.prototype.$b.call(this,t);for(var e=this.memberParts;e.next();)e.value.$b(t)},At.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ue||(t.Ue=!0,_y(this,this.Qj(),t,this),t.Ue=!1)},At.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ue||(t.Ue=!0,Zy(this,this.Qj(),t,this),t.Ue=!1)},At.prototype.move=function(t,e){void 0===e&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var s=t.x,o=t.y;if(!(n===s||isNaN(n)&&isNaN(s))||!(i===o||isNaN(i)&&isNaN(o))){for(n=s-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=z.alloc(),ct.prototype.move.call(this,t,e),t=new ht,e=this.Qj().iterator;e.next();)(s=e.value)instanceof st&&(s.suspendsRouting&&t.add(s),s.fd||s.fromNode!==this&&s.toNode!==this)&&(s.suspendsRouting=!0);for(e.reset();e.next();)if(!((s=e.value).ph()||s instanceof ct&&s.isLinkLabel)){var l=s.position,u=s.location;l.w()?(o.x=l.x+n,o.y=l.y+i,s.position=o):u.w()&&(o.x=u.x+n,o.y=u.y+i,s.location=o)}for(e.reset();e.next();)(s=e.value)instanceof st&&(s.suspendsRouting=t.contains(s),s.fd||s.fromNode!==this&&s.toNode!==this)&&(o.x=(l=s.position).x+n,o.y=l.y+i,o.w()?s.move(o):s.bb());z.free(o)}},Tt.Object.defineProperties(At.prototype,{placeholder:{get:function(){return this.$a}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.R)},set:function(t){var e=0!=(2048&this.R);e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.R)},set:function(t){var e=0!=(4096&this.R);e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.R)},set:function(t){var e=0!=(8192&this.R);e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.R)},set:function(t){var e=0!=(16384&this.R);e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},avoidableMembers:{get:function(){return 0!=(131072&this.R)},set:function(t){var e=0!=(131072&this.R);e!==t&&(this.R^=131072,this.g("avoidableMembers",e,t))}},memberParts:{get:function(){return this.Gn.iterator}},layout:{get:function(){return this.Sc},set:function(t){var e=this.Sc;if(e!==t){null!==t&&null!==t.diagram&&t.diagram.layout===t&&Q("A layout cannot be both the Diagram.layout and a Group.layout: "+t),null!==e&&(e.diagram=null,e.group=null),this.Sc=t;var i=this.diagram;null!==t&&(t.diagram=i,t.group=this),null!==i&&(i.xh=!0),this.g("layout",e,t),null!==i&&i.ac()}}},memberAdded:{get:function(){return null!==this.Ba?this.Ba.Mq:null},set:function(t){var e=this.memberAdded;e!==t&&(Mo(this),this.Ba.Mq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return null!==this.Ba?this.Ba.Nq:null},set:function(t){var e=this.memberRemoved;e!==t&&(Mo(this),this.Ba.Nq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return null!==this.Ba?this.Ba.ij:null},set:function(t){var e=this.memberValidation;e!==t&&(Mo(this),this.Ba.ij=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.R)},set:function(t){var e=0!=(256&this.R);e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.R)},set:function(t){var e=0!=(512&this.R);if(e!==t){this.R^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var n=!0;null!==i&&(n=i.aa,i.aa=!0),e(this),null!==i&&(i.aa=n)}null!==i&&i.undoManager.isUndoingRedoing?(null!==this.$a&&this.$a.v(),this.memberParts.each(function(s){s.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.R)},set:function(t){var e=0!=(1024&this.R);e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return null!==this.Ba?this.Ba.Kr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(Mo(this),this.Ba.Kr=t,this.g("subGraphExpandedChanged",e,t))}},rh:{get:function(){return 0!=(32768&this.R)},set:function(t){0!=(32768&this.R)!==t&&(this.R^=32768)}}}),At.prototype.expandSubGraph=At.prototype.expandSubGraph,At.prototype.collapseSubGraph=At.prototype.collapseSubGraph,At.prototype.findSubGraphParts=At.prototype.Qj,At.prototype.findContainingGroupChain=At.prototype.iz,At.prototype.findExternalNodesConnected=At.prototype.jz,At.prototype.findExternalLinksConnected=At.prototype.Mu,At.prototype.ensureBounds=At.prototype.Va,At.className="Group",Vt(Mi,yt),Mi.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.zb=this.zb.J(),t.ko=this.ko.copy()},Mi.prototype.gh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return kn(0,0,e.width,e.height,t.x,t.y)},Mi.prototype.Wl=function(){var t=this.part;if(null!==t&&(t instanceof At||t instanceof Bt)||Q("Placeholder is not inside a Group or Adornment."),t instanceof At){var e=this.computeBorder(this.ko),i=this.minSize,n=this.ec;for(Zn(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.Ge(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||null===n||n.animationManager.Yu(t)||isNaN(e.x)||isNaN(e.y)||((i=z.alloc()).xi(e,t.locationSpot),i.D(t.location)||(t.location=i),z.free(i))}else{e=this.ec,n=(i=this.zb).left+i.right;var s=i.top+i.bottom,o=t.adornedObject;t.angle=o.li();var l=0;o instanceof Pt&&(l=o.strokeWidth);var u=o.Df(),c=o.naturalBounds,p=(c.width+l)*u;l=(c.height+l)*u,t.type!==nt.Link&&(u=o.ga("Selection"===t.category?y:t.locationSpot,z.alloc()),t.location=u,z.free(u)),isNaN(p)||isNaN(l)?(t=o.ga(y,z.alloc()),(p=q.allocAt(t.x,t.y,0,0)).Ye(o.ga(D,t)),p.Ye(o.ga(S,t)),p.Ye(o.ga(F,t)),Zn(e,p.width+n||0,p.height+s||0),this.Ge(-i.left,-i.top,e.width,e.height),z.free(t),q.free(p)):(Zn(e,p+n||0,l+s||0),this.Ge(-i.left,-i.top,e.width,e.height))}},Mi.prototype.eh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},Mi.prototype.computeBorder=function(t){var e=this.part,i=e.diagram,n=null===i||!i.animationManager.isAnimating;if(null!==i&&e instanceof At&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.ko.w()){var s=i.toolManager.findTool("Dragging");if(s===i.currentTool&&null!==(i=s.computeBorder(e,this.ko,t)))return i}i=q.alloc(),s=this.computeMemberBounds(i);var o=this.zb;return e instanceof At&&!e.isSubGraphExpanded?t.h(s.x-o.left,s.y-o.top,0,0):t.h(s.x-o.left,s.y-o.top,Math.max(s.width+o.left+o.right,0),Math.max(s.height+o.top+o.bottom,0)),q.free(i),n&&e instanceof At&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ye(e.location),t},Mi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof At))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,s=-1/0,o=-1/0,l=e.memberParts;l.next();){var u=l.value;if(u.isVisible()){if(u instanceof st&&(!e.computesBoundsIncludingLinks||vo(u)||u.fromNode===e||u.toNode===e))continue;(u=u.actualBounds).left<i&&(i=u.left),u.top<n&&(n=u.top),u.right>s&&(s=u.right),u.bottom>o&&(o=u.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,s-i,o-n):t.h((e=e.location).x,e.y,0,0),t},Tt.Object.defineProperties(Mi.prototype,{padding:{get:function(){return this.zb},set:function(t){"number"==typeof t&&(t=new Gt(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.g("padding",e,t),this.v())}}}),Mi.className="Placeholder",Vt(st,vt),st.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.Qa=-113&this.Qa,t.ff=this.ff,t.gn=this.gn,t.vf=this.vf,t.uo=this.uo,t.pk=this.pk,t.Om=this.Om,t.Qm=this.Qm,t.Rm=this.Rm,t.qj=this.qj,t.po=this.po,null!==this.ba&&(t.ba=this.ba.copy())},(L=st.prototype).Af=function(t){vt.prototype.Af.call(this,t),this.ff=t.ff,this.vf=t.vf,t.Mg=null,t.bb(),t.Sf=this.Sf;var e=t.fromPort;null!==e&&_i(e),null!==(t=t.toPort)&&_i(t)},L.qb=function(t){t.classType===st?2==(2&t.value)?this.routing=t:t===rn||t===Ao||t===hl?this.curve=t:t===Sh||t===Ic||t===Oc?this.adjusting=t:t!==Ap&&t!==Ci&&Q("Unknown Link enum value for a Link property: "+t):vt.prototype.qb.call(this,t)},L.Xc=function(){null===this.ba&&(this.ba=new lh)},L.si=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Bn(t)||Ko(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),Bn(t)||Ko(t)))},L.Av=function(){return!1},L.Bv=function(){},L.Zc=function(){return!1},st.prototype.computeAngle=function(t,e,i){return st.computeAngle(e,i)},st.computeAngle=function(t,e){switch(t){default:case Ci:t=0;break;case kh:t=e;break;case Mh:t=e+90;break;case Ch:t=e-90;break;case Pp:t=e+180;break;case Ec:90<(t=_.bp(e))&&270>t&&(t-=180);break;case Ah:90<(t=_.bp(e+90))&&270>t&&(t-=180);break;case Ph:90<(t=_.bp(e-90))&&270>t&&(t-=180);break;case jc:if(45<(t=_.bp(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return _.bp(t)},(L=st.prototype).oh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&vt.prototype.oh.call(this)},L.To=function(t){var e=this.fromNode;return t===e?this.toNode:e},L.Dz=function(t){var e=this.fromPort;return t===e?this.toPort:e},L.Vo=function(t){if(vt.prototype.Vo.call(this,t),Lr(this)&&this.Xo(this.actualBounds),!t){var e=null;null!==(t=this.ef)&&Mc(t,this,e=this.fromPort);var i=this.uf;if(null!==i){var n=this.toPort;i===t&&n===e||Mc(i,this,n)}wh(this)}},L.Wo=function(t){if(vt.prototype.Wo.call(this,t),Lr(this)&&this.Xo(this.actualBounds),!t){var e=null;null!==(t=this.ef)&&Cc(t,this,e=this.fromPort);var i=this.uf;if(null!==i){var n=this.toPort;i===t&&n===e||Cc(i,this,n)}bh(this)}},L.Kj=function(){if(this.fd=!0,null!==this.wd){var t=this.diagram;if(null!==t)for(var e=this.wd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},st.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},st.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var s=i.y;for(isNaN(s)&&(s=0),n=t.x-n,s=t.y-s,!0===e?vt.prototype.move.call(this,t,!1):(t=z.allocAt(i.x+n,i.y+s),vt.prototype.move.call(this,t,!1),z.free(t)),Co(this,n,s),t=this.labelNodes;t.next();)(e=t.value).moveTo((i=e.position).x+n,i.y+s)},st.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},st.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},st.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Ma),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===rn))return this.ua.Qu(.5,t),t.add(this.i(0)),i=this.ua.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===rn){if(3===e){i=this.i(0),n=this.i(1);var s=this.i(2);return _.bx(i.x,i.y,n.x,n.y,n.x,n.y,s.x,s.y,t),t}if(i=3*((n=(e-1)/3|0)/2|0),n%2==1){n=this.i(i),s=this.i(i+1);var o=this.i(i+2);i=this.i(i+3),_.bx(n.x,n.y,s.x,s.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,s=o=n=0;n<i/2&&o<e&&!(n+(s=l[o])>i/2);)n+=s,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?t.h(e.x,e.y>o.y?e.y-(i/2-n):e.y+(i/2-n)):1>Math.abs(e.y-o.y)?t.h(e.x>o.x?e.x-(i/2-n):e.x+(i/2-n),e.y):t.h(e.x+(i=(i/2-n)/s)*(o.x-e.x),e.y+i*(o.y-e.y)),t},st.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).ab(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===rn))return this.ua.xx(.5);if(this.computeCurve()===rn&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2==1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),_.Ny(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).ab(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var o,s=0;for(i=0;s<n/2&&i<t&&!(s+(o=e[i])>n/2);)s+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).ab(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.ab(n)},(L=st.prototype).i=function(t){return this.Ob.s[t]},L.dd=function(t,e){this.Ob.cd(t,e)},L.L=function(t,e,i){this.Ob.cd(t,new z(e,i))},L.Lz=function(t,e){this.Ob.Hb(t,e)},L.m=function(t,e,i){this.Ob.Hb(t,new z(e,i))},L.ne=function(t){this.Ob.add(t)},L.yf=function(t,e){this.Ob.add(new z(t,e))},L.qv=function(t){this.Ob.mb(t)},L.Ej=function(){this.Ob.clear()},L.uh=function(){null===this.Mg&&(this.Mg=this.Ob,this.Ob=this.Ob.copy())},L.zf=function(){if(null!==this.Mg){for(var t=this.Mg,e=this.Ob,i=1/0,n=1/0,s=t.s,o=s.length,l=0;l<o;l++){var u=s[l];i=Math.min(u.x,i),n=Math.min(u.y,n)}u=l=1/0;for(var c=e.s,p=c.length,m=0;m<p;m++){var v=c[m];l=Math.min(v.x,l),u=Math.min(v.y,u),v.freeze()}if(e.freeze(),p===o){for(o=0;o<p;o++)if((m=s[o]).x-i!=(v=c[o]).x-l||m.y-n!=v.y-u){this.rc();break}}else this.rc();this.Mg=null,null!==(i=this.diagram)&&i.animationManager.Ab&&Qd(i.animationManager,this,e),Pc(this),this.g("points",t,e)}},L.sv=function(){null!==this.Mg&&(this.Ob=this.Mg,this.Mg=null)},L.bb=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.As.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null===this.Tg||t.isTicking||(this.Tg=null)}null!==(t=this.path)&&(this.fd=!1,this.v(),t.v())}},L.vg=function(){if(!this.fd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.uh(),t=this.computePoints()}catch{this.computingPoints=!1,this.sv()}finally{this.computingPoints=!1,t?this.zf():this.sv()}}},st.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(oa||((oa=new ct).desiredSize=Gs,oa.Va()),this.defaultFromPoint&&(oa.location=this.defaultFromPoint,oa.Va(),e=t=oa)):e=this.fromPort,null!==e&&!t.isVisible()){var i=t.findVisibleNode();null!==i&&i!==t?(t=i,e=i.port):t=i}if(this.Mw=t,null===t||!t.location.w())return!1;for(;!(null===e||e.actualBounds.w()&&e.Ed());)e=e.panel;if(null===e)return!1;var n=this.toNode,s=null;if(null===n?(ra||((ra=new ct).desiredSize=Gs,ra.Va()),this.defaultToPoint&&(ra.location=this.defaultToPoint,ra.Va(),s=n=ra)):s=this.toPort,null===s||n.isVisible()||(null!==(i=n.findVisibleNode())&&i!==n?(n=i,s=i.port):n=i),this.Nw=n,null===n||!n.location.w())return!1;for(;!(null===s||s.actualBounds.w()&&s.Ed());)s=s.panel;if(null===s)return!1;var o=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,s);var u=ll(l),c=ll(i),p=e===s&&null!==e,m=this.isOrthogonal,v=this.curve===rn;this.Wf=!(!p||m)&&(v=!0);var w=this.computeAdjusting()===Ci||p;if(!m&&!p&&u&&c){if(u=!1,!w&&3<=o&&(w=this.getLinkPoint(t,e,l,!0,!1,n,s),c=this.getLinkPoint(n,s,i,!1,!1,t,e),u=this.adjustPoints(0,w,o-1,c))&&(w=this.getLinkPoint(t,e,l,!0,!1,n,s),c=this.getLinkPoint(n,s,i,!1,!1,t,e),this.adjustPoints(0,w,o-1,c)),!u)if(this.Ej(),v){o=this.getLinkPoint(t,e,l,!0,!1,n,s),u=(w=this.getLinkPoint(n,s,i,!1,!1,t,e)).x-o.x,c=w.y-o.y,p=this.computeCurviness(),v=m=0;var k=o.x+u/3,A=o.y+c/3,T=k,j=A;_.B(c,0)?j=0<u?j-p:j+p:(m=-u/c,v=Math.sqrt(p*p/(m*m+1)),0>p&&(v=-v),j=m*((T=(0>c?-1:1)*v+k)-k)+A);var I=k=o.x+2*u/3,B=A=o.y+2*c/3;B=_.B(c,0)?0<u?B-p:B+p:m*((I=(0>c?-1:1)*v+k)-k)+A,this.Ej(),this.ne(o),this.yf(T,j),this.yf(I,B),this.ne(w),this.dd(0,this.getLinkPoint(t,e,l,!0,!1,n,s)),this.dd(3,this.getLinkPoint(n,s,i,!1,!1,t,e))}else n=this.getLinkPoint(t,e,l,!0,!1,o=n,w=s),s=this.getLinkPoint(o,w,i,!1,!1,t,e),this.hasCurviness()?(w=s.x-n.x,i=s.y-n.y,l=this.computeCurviness(),o=t=n.x+w/2,u=e=n.y+i/2,_.B(i,0)?u=0<w?u-l:u+l:(w=-w/i,o=Math.sqrt(l*l/(w*w+1)),0>l&&(o=-o),u=w*((o=(0>i?-1:1)*o+t)-t)+e),this.ne(n),this.yf(o,u),this.ne(s)):(this.ne(n),this.ne(s),u=q.alloc(),e.mi(u),c=u.ca(s),w.mi(u),p=u.ca(n),(c||p)&&(l=e.ga(Tc(l),new z),this.dd(0,this.getLinkPointFromPoint(t,e,l,s,!0,l)),i=w.ga(Tc(i),new z),this.dd(1,this.getLinkPointFromPoint(o,w,i,n,!1,i))),q.free(u))}else{v=this.isAvoiding,w&&(m&&v||p)&&this.Ej();var R=p?this.computeCurviness():0;v=this.getLinkPoint(t,e,l,!0,m,n,s),k=T=A=0,(m||!u||p)&&(j=this.computeEndSegmentLength(t,e,l,!0),k=this.getLinkDirection(t,e,v,l,!0,m,n,s),p&&(u||l.D(i)||!m&&l.x+i.x===1&&l.y+i.y===1)&&(k-=m?90:30,0>R&&(k-=180)),0>k?k+=360:360<=k&&(k-=360),p&&(j+=Math.abs(R)*(m?1:2)),0===k?A=j:90===k?T=j:180===k?A=-j:270===k?T=-j:(A=j*Math.cos(k*Math.PI/180),T=j*Math.sin(k*Math.PI/180)),l.Mc()&&p&&(j=e.ga(C,z.alloc()),I=z.allocAt(j.x+1e3*A,j.y+1e3*T),this.getLinkPointFromPoint(t,e,j,I,!0,v),z.free(j),z.free(I))),j=this.getLinkPoint(n,s,i,!1,m,t,e);var H=B=I=0;if(m||!c||p){var K=this.computeEndSegmentLength(n,s,i,!1);H=this.getLinkDirection(n,s,j,i,!1,m,t,e),p&&(c||l.D(i)||!m&&l.x+i.x===1&&l.y+i.y===1)&&(H+=m?0:30,0>R&&(H+=180)),0>H?H+=360:360<=H&&(H-=360),p&&(K+=Math.abs(R)*(m?1:2)),0===H?I=K:90===H?B=K:180===H?I=-K:270===H?B=-K:(I=K*Math.cos(H*Math.PI/180),B=K*Math.sin(H*Math.PI/180)),i.Mc()&&p&&(i=s.ga(C,z.alloc()),l=z.allocAt(i.x+1e3*I,i.y+1e3*B),this.getLinkPointFromPoint(n,s,i,l,!1,j),z.free(i),z.free(l))}i=v,(m||!u||p)&&(i=new z(v.x+A,v.y+T)),l=j,(m||!c||p)&&(l=new z(j.x+I,j.y+B)),!w&&!m&&u&&3<o&&this.adjustPoints(0,v,o-2,l)?this.dd(o-1,j):!w&&!m&&c&&3<o&&this.adjustPoints(1,i,o-1,j)?this.dd(0,v):!w&&(m?6<=o:4<o)&&this.adjustPoints(1,i,o-2,l)?(this.dd(0,v),this.dd(o-1,j)):(this.Ej(),this.ne(v),(m||!u||p)&&this.ne(i),m&&this.addOrthoPoints(i,k,l,H,t,n),(m||!c||p)&&this.ne(l),this.ne(j))}return!0},st.prototype.getLinkPointFromPoint=function(t,e,i,n,s,o){if(void 0===o&&(o=new z),null===t||null===e)return o.assign(i),o;if(t.isVisible()||null!==(s=t.findVisibleNode())&&s!==t&&(e=s.port),t=null,null===(s=e.panel)||s.se()||(s=s.panel),null===s){s=n.x,n=n.y;var l=i.x;i=i.y}else{var u=-(t=s.oe).m12*(s=1/(t.m11*t.m22-t.m12*t.m21)),c=-t.m21*s,p=t.m11*s,m=s*(t.m21*t.dy-t.m22*t.dx),v=s*(t.m12*t.dx-t.m11*t.dy);s=n.x*(l=t.m22*s)+n.y*c+m,n=n.x*u+n.y*p+v,l=i.x*l+i.y*c+m,i=i.x*u+i.y*p+v}return e.Rj(s,n,l,i,o),null!==t&&o.transform(t),o},st.prototype.getLinkPoint=function(t,e,i,n,s,o,l,u){if(void 0===u&&(u=new z),i.sb()&&!ll(i))return e.ga(i,u),u;if(i.$c()){var c=Lc(this,e);if(null!==c){if(u.assign(c.Zo),s&&this.routing===qy){var p=Lc(this,l);if(null!==p&&c.Gl<p.Gl){c=z.alloc(),p=z.alloc();var m=new q(e.ga(y,c),e.ga(D,p)),v=this.computeSpot(!n,l);t=this.getLinkPoint(o,l,v,!n,s,t,e,p),(i.Hf(G)||i.Hf(U))&&t.y>=m.y&&t.y<=m.y+m.height?u.y=t.y:(i.Hf(Y)||i.Hf(b))&&t.x>=m.x&&t.x<=m.x+m.width&&(u.x=t.x),z.free(c),z.free(p)}}return u}}return i=e.ga(Tc(i),z.alloc()),this.pointsCount>(s?6:2)?(l=this.i(n?1:this.pointsCount-2),s&&(l=kp(i,l.copy()))):(c=this.computeSpot(!n,l),o=z.alloc(),l=l.ga(Tc(c),o),s&&(l=kp(i,l)),z.free(o)),this.getLinkPointFromPoint(t,e,i,l,n,u),z.free(i),u},st.prototype.getLinkDirection=function(t,e,i,n,s,o,l,u){t:if(n.sb())var c=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.$c()&&null!==(c=Lc(this,e)))switch(c.Nc){case 1:c=270;break t;case 2:c=180;break t;default:case 4:c=0;break t;case 8:c=90;break t}c=e.ga(C,z.alloc()),this.pointsCount>(o?6:2)?(u=this.i(s?1:this.pointsCount-2),u=o?kp(c,u.copy()):i):(i=z.alloc(),u=u.ga(C,i),z.free(i)),i=Math.abs(u.x-c.x)>Math.abs(u.y-c.y)?u.x>=c.x?0:180:u.y>=c.y?90:270,z.free(c),c=i}return l&&n.Mc()&&l.Td(t)&&360<=(c+=180)&&(c-=360),ll(n)||0===(t=e.li())||(45<=t&&135>t?c+=90:135<=t&&225>t?c+=180:225<=t&&315>t&&(c+=270),360<=c&&(c-=360)),c},st.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.$c()&&null!==(t=Lc(this,e))?t.Ku:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},st.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=C:((e=this.fromSpot).Yb()&&(e=t.fromSpot),t=e===Nt?g:e):null===(t=e||this.toPort)?t=C:((e=this.toSpot).Yb()&&(e=t.toSpot),t=e===Nt?g:e),t},st.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Ci&&4<this.pointsCount?this.computeMidPoint(new z):null!==(t=null!==(t=e.Zn)?ov(t,this):null)?t.Zo:e.ga(C)},st.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},st.prototype.Cf=function(t,e,i,n,s,o){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var l=o;if(void 0===o&&(l=Ot.alloc()).reset(),l.multiply(this.transform),this.fh(t,l))return Kf(this,e,i,s),void 0===o&&Ot.free(l),!0;if(this.Yc(t,l)){var u=!1;if(!this.isAtomic)for(var c=this.O.s,p=c.length;p--;){var m=c[p];if(m.visible||m===this.locationObject){var v=m.actualBounds,w=this.naturalBounds;if(!(v.x>w.width||v.y>w.height||0>v.x+v.width||0>v.y+v.height)){if((v=Ot.alloc()).set(l),m instanceof nt)u=m.Cf(t,e,i,n,s,v);else if(this.path===m){if(m instanceof Pt)if(u=t,w=n,!1===m.pickable)u=!1;else if(v.multiply(m.transform),w)t:{var k=u,A=v;if(m.fh(k,A))u=!0;else{if(void 0===A&&(A=m.transform,k.Re(m.actualBounds))){u=!0;break t}u=k.left,w=k.right;var T=k.top;k=k.bottom;var j=z.alloc(),I=z.alloc(),B=z.alloc(),R=Ot.alloc();R.set(A),R.cv(m.transform),R.Uj(),I.x=w,I.y=T,I.transform(R),j.x=u,j.y=T,j.transform(R),A=!1,Ar(m,j,I,B)?A=!0:(j.x=w,j.y=k,j.transform(R),Ar(m,j,I,B)?A=!0:(I.x=u,I.y=k,I.transform(R),Ar(m,j,I,B)?A=!0:(j.x=u,j.y=T,j.transform(R),Ar(m,j,I,B)&&(A=!0)))),Ot.free(R),z.free(j),z.free(I),z.free(B),u=A}}else u=m.fh(u,v)}else u=Ym(m,t,n,v);u&&(w=m,null!==e&&(w=e(m)),w&&(null===i||i(w))&&s.add(w)),Ot.free(v)}}}return void 0===o&&Ot.free(l),u||null!==this.background||null!==this.areaBackground}return void 0===o&&Ot.free(l),!1},st.prototype.computeCurve=function(){if(null===this.Wf){var t=this.fromPort;this.Wf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Wf?rn:this.curve},st.prototype.computeCorner=function(){if(this.curve===rn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},st.prototype.findMidLabel=function(){for(var t=this.path,e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n];if(s!==t&&!s.isPanelMain&&(s.segmentIndex===-1/0||isNaN(s.segmentIndex)))return s}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},st.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=ev;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(null!==e&&null!==i){var n=this.findMidLabel();if(null!==n){var s=n.naturalBounds,o=n.margin,l=isNaN(s.width)?30:s.width*n.scale+o.left+o.right;s=isNaN(s.height)?14:s.height*n.scale+o.top+o.bottom,(n=n.segmentOrientation)===kh||n===Ec||n===Pp?t=Math.max(t,s):n===Ch||n===Ph||n===Mh||n===Ah?t=Math.max(t,l):(e=e.ga(C).ab(i.ga(C))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*s)+1)),this.curve===rn&&(t*=1.333)}}return t},st.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Ci&&i.bb()}},st.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=tv;var e=this.Sf;if(null!==e){for(var i=Xt(),n=0,s=e.links,o=0;o<s.length;o++){var l=s[o].computeSpacing();i.push(l),n+=l}for(n=-n/2,o=0;o<s.length;o++){if(s[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Ds===this.fromNode&&(t=-t),Zt(i)}}return t},st.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},st.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Sf},st.prototype.adjustPoints=function(t,e,i,n){var s=this.computeAdjusting();if(this.isOrthogonal){if(s===Ic)return!1;s===Oc&&(s=Sh)}switch(s){case Ic:var o=this.i(t),l=this.i(i);if(!o.Xa(e)||!l.Xa(n)){var u=l.x-(s=o.x),c=l.y-(o=o.y),p=Math.sqrt(u*u+c*c);if(!_.$(p,0)){if(_.$(u,0))var m=0>c?-Math.PI/2:Math.PI/2;else m=Math.atan(c/Math.abs(u)),0>u&&(m=Math.PI-m);var v=e.y;u=n.x-(l=e.x);var w=n.y-v;for(c=Math.sqrt(u*u+w*w),_.$(u,0)?w=0>w?-Math.PI/2:Math.PI/2:(w=Math.atan(w/Math.abs(u)),0>u&&(w=Math.PI-w)),p=c/p,m=w-m,this.dd(t,e),t+=1;t<i;t++)u=(e=this.i(t)).x-s,c=e.y-o,e=Math.sqrt(u*u+c*c),_.$(e,0)||(_.$(u,0)?c=0>c?-Math.PI/2:Math.PI/2:(c=Math.atan(c/Math.abs(u)),0>u&&(c=Math.PI-c)),u=c+m,this.L(t,l+(e*=p)*Math.cos(u),v+e*Math.sin(u)));this.dd(i,n)}}return!0;case Oc:if(o=this.i(t),v=this.i(i),!o.Xa(e)||!v.Xa(n)){p=((l=v.x)-(s=o.x))*(l-s)+((v=v.y)-(o=o.y))*(v-o),m=e.y,w=n.y;var k=1;if((c=n.x)-(u=e.x)!=0){var A=(w-m)/(c-u);k=Math.sqrt(1+1/(A*A))}else A=9e9;for(this.dd(t,e),t+=1;t<i;t++){var T=(e=this.i(t)).x,j=e.y,I=.5;0!==p&&(I=((s-T)*(s-l)+(o-j)*(o-v))/p);var B=s+I*(l-s),R=o+I*(v-o);e=Math.sqrt((T-B)*(T-B)+(j-R)*(j-R)),j<A*(T-B)+R&&(e=-e),0<A&&(e=-e),T=u+I*(c-u),I=m+I*(w-m),0!==A?this.L(t,e=T+e/k,I-(e-T)/A):this.L(t,T,I+e)}this.dd(i,n)}return!0;case Sh:return this.isOrthogonal&&(s=this.i(t),o=this.i(t+1),l=this.i(t+2),v=u=o.x,p=m=o.y,_.B(s.y,o.y)?_.B(o.x,l.x)?m=e.y:_.B(o.y,l.y)&&(u=e.x):_.B(s.x,o.x)&&(_.B(o.y,l.y)?u=e.x:_.B(o.x,l.x)&&(m=e.y)),this.L(t+1,u,m),s=this.i(i),o=this.i(i-1),l=this.i(i-2),c=u=o.x,w=m=o.y,_.B(s.y,o.y)?_.B(o.x,l.x)?m=n.y:_.B(o.y,l.y)&&(u=n.x):_.B(s.x,o.x)&&(_.B(o.y,l.y)?u=n.x:_.B(o.x,l.x)&&(m=n.y)),this.L(i-1,u,m),$y(this))?(this.L(t+1,v,p),this.L(i-1,c,w),i=!1):(this.dd(t,e),this.dd(i,n),i=!0),i;default:return!1}},st.prototype.addOrthoPoints=function(t,e,i,n,s,o){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var u=s.actualBounds.copy(),c=o.actualBounds.copy();if(u.w()&&c.w()){u.Bc(Lh,Lh),c.Bc(Lh,Lh),u.Ye(t),c.Ye(i);var p=z.alloc(),m=z.alloc();0===e?i.x>t.x||270===n&&i.y<t.y&&c.right>t.x||90===n&&i.y>t.y&&c.right>t.x?(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),180===n?(p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),m.x=p.x,m.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(p.x=t.x<c.left?this.computeMidOrthoPosition(t.x,t.y,c.left,i.y,!1):t.x<c.right&&(270===n&&t.y<c.top||90===n&&t.y>c.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):c.right,m.x=p.x,m.y=i.y):0===n&&t.x<c.left&&t.y>c.top&&t.y<c.bottom&&(p.x=t.x,p.y=t.y<i.y?Math.min(i.y,c.top):Math.max(i.y,c.bottom),m.y=p.y)):(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<u.top||270===n&&i.y>u.bottom)&&(180===n&&(c.ca(t)||u.ca(i))?p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(180===n||90===n)?p.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,c.bottom),!0):i.y>t.y&&(180===n||270===n)&&(p.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,c.top),!0)),m.x=i.x,m.y=p.y),p.y>u.top&&p.y<u.bottom&&(i.x>=u.left&&i.x<=t.x||t.x<=c.right&&t.x>=i.x?(90===n||270===n)&&(p.h(Math.max((t.x+i.x)/2,t.x),t.y),m.h(p.x,i.y)):(p.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?u.top:Math.min(u.top,c.top)):Math.max(i.y,0===n?u.bottom:Math.max(u.bottom,c.bottom)),m.x=i.x,m.y=p.y))):180===e?i.x<t.x||270===n&&i.y<t.y&&c.left<t.x||90===n&&i.y>t.y&&c.left<t.x?(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),0===n?(p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),m.x=p.x,m.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(p.x=t.x>c.right?this.computeMidOrthoPosition(t.x,t.y,c.right,i.y,!1):t.x>c.left&&(270===n&&t.y<c.top||90===n&&t.y>c.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):c.left,m.x=p.x,m.y=i.y):180===n&&t.x>c.right&&t.y>c.top&&t.y<c.bottom&&(p.x=t.x,p.y=t.y<i.y?Math.min(i.y,c.top):Math.max(i.y,c.bottom),m.y=p.y)):(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<u.top||270===n&&i.y>u.bottom)&&(0===n&&(c.ca(t)||u.ca(i))?p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(0===n||90===n)?p.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,c.bottom),!0):i.y>t.y&&(0===n||270===n)&&(p.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,c.top),!0)),m.x=i.x,m.y=p.y),p.y>u.top&&p.y<u.bottom&&(i.x<=u.right&&i.x>=t.x||t.x>=c.left&&t.x<=i.x?(90===n||270===n)&&(p.h(Math.min((t.x+i.x)/2,t.x),t.y),m.h(p.x,i.y)):(p.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?u.top:Math.min(u.top,c.top)):Math.max(i.y,180===n?u.bottom:Math.max(u.bottom,c.bottom)),m.x=i.x,m.y=p.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&c.bottom>t.y||0===n&&i.x>t.x&&c.bottom>t.y?(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),270===n?(p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),m.x=i.x,m.y=p.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(p.y=t.y<c.top?this.computeMidOrthoPosition(t.x,t.y,i.x,c.top,!0):t.y<c.bottom&&(180===n&&t.x<c.left||0===n&&t.x>c.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):c.bottom,m.x=i.x,m.y=p.y):90===n&&t.y<c.top&&t.x>c.left&&t.x<c.right&&(p.x=t.x<i.x?Math.min(i.x,c.left):Math.max(i.x,c.right),p.y=t.y,m.x=p.x)):(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<u.left||180===n&&i.x>u.right)&&(270===n&&(c.ca(t)||u.ca(i))?p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(270===n||0===n)?p.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,c.right),i.y,!1):i.x>t.x&&(270===n||180===n)&&(p.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,c.left),i.y,!1)),m.x=p.x,m.y=i.y),p.x>u.left&&p.x<u.right&&(i.y>=u.top&&i.y<=t.y||t.y<=c.bottom&&t.y>=i.y?(0===n||180===n)&&(p.h(t.x,Math.max((t.y+i.y)/2,t.y)),m.h(i.x,p.y)):(p.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?u.left:Math.min(u.left,c.left)):Math.max(i.x,90===n?u.right:Math.max(u.right,c.right)),m.x=p.x,m.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&c.top<t.y||0===n&&i.x>t.x&&c.top<t.y?(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),90===n?(p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),m.x=i.x,m.y=p.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(p.y=t.y>c.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,c.bottom,!0):t.y>c.top&&(180===n&&t.x<c.left||0===n&&t.x>c.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):c.top,m.x=i.x,m.y=p.y):270===n&&t.y>c.bottom&&t.x>c.left&&t.x<c.right&&(p.x=t.x<i.x?Math.min(i.x,c.left):Math.max(i.x,c.right),p.y=t.y,m.x=p.x)):(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<u.left||180===n&&i.x>u.right)&&(90===n&&(c.ca(t)||u.ca(i))?p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(90===n||0===n)?p.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,c.right),i.y,!1):i.x>t.x&&(90===n||180===n)&&(p.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,c.left),i.y,!1)),m.x=p.x,m.y=i.y),p.x>u.left&&p.x<u.right&&(i.y<=u.bottom&&i.y>=t.y||t.y>=c.top&&t.y<=i.y?(0===n||180===n)&&(p.h(t.x,Math.min((t.y+i.y)/2,t.y)),m.h(i.x,p.y)):(p.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?u.left:Math.min(u.left,c.left)):Math.max(i.x,270===n?u.right:Math.max(u.right,c.right)),m.x=p.x,m.y=i.y)));var v=i;if(this.isAvoiding){var w=this.diagram;if(null===w||s===o||this.layer.isTemporary||!Sm(w)||u.ca(v)&&!o.Td(s)||c.ca(t)&&!s.Td(o))e=!1;else{var k=wf(w,!0,this.containingGroup,null);if(17!==this.segmentIndex&&k.Xj(Math.min(t.x,p.x),Math.min(t.y,p.y),Math.abs(t.x-p.x),Math.abs(t.y-p.y))&&k.Xj(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))&&k.Xj(Math.min(m.x,v.x),Math.min(m.y,v.y),Math.abs(m.x-v.x),Math.abs(m.y-v.y)))e=!1;else{s=t,o=v;var A=i=null;if(w.isVirtualized){(w=k.bounds.copy()).Bc(-k.Ho,-k.Go);var T=z.alloc();ul(k,t.x,t.y)||(_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,t.x,t.y,p.x,p.y,T)?(i=t=T.copy(),e=T.ab(p)):_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,p.x,p.y,m.x,m.y,T)?(i=t=T.copy(),e=T.ab(m)):_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,m.x,m.y,v.x,v.y,T)&&(i=t=T.copy(),e=T.ab(v))),ul(k,v.x,v.y)||(_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,v.x,v.y,m.x,m.y,T)?(A=v=T.copy(),n=m.ab(T)):_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,m.x,m.y,p.x,p.y,T)?(A=v=T.copy(),n=p.ab(T)):_.Ff(w.x,w.y,w.x+w.width,w.y+w.height,p.x,p.y,t.x,t.y,T)&&(A=v=T.copy(),n=t.ab(T))),z.free(T)}(u=u.copy().ed(c)).Bc(k.Ho*k.Os,k.Go*k.Os),nv(k,t,e,v,n,u,!0),c=Ns(k,v.x,v.y),!k.abort&&c>=cl&&(iv(k),u.Bc(k.Ho*k.Ix,k.Go*k.Jx),nv(k,t,e,v,n,u,!1),c=Ns(k,v.x,v.y)),!k.abort&&c<cl&&Ns(k,v.x,v.y)!==Po?(Mp(this,k,v.x,v.y,n,!0,l),u=this.i(2),4>this.pointsCount?(0===e||180===e?(u.x=t.x,u.y=v.y):(u.x=v.x,u.y=t.y),this.L(2,u.x,u.y),this.m(3,u.x,u.y)):(l=this.i(3),0===e||180===e?_.B(u.x,l.x)?(u=0===e?Math.max(u.x,t.x):Math.min(u.x,t.x),this.L(2,u,t.y),this.L(3,u,l.y)):_.B(u.y,l.y)?(Math.abs(t.y-u.y)<=k.Go/2&&(this.L(2,u.x,t.y),this.L(3,l.x,t.y)),this.m(2,u.x,t.y)):this.L(2,t.x,u.y):(90===e||270===e)&&(_.B(u.y,l.y)?(u=90===e?Math.max(u.y,t.y):Math.min(u.y,t.y),this.L(2,t.x,u),this.L(3,l.x,u)):_.B(u.x,l.x)?(Math.abs(t.x-u.x)<=k.Ho/2&&(this.L(2,t.x,u.y),this.L(3,t.x,l.y)),this.m(2,t.x,u.y)):this.L(2,u.x,t.y))),null!==i&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?0===e||180===e?this.m(2,t.x,l.y):this.m(2,l.x,t.y):0===e||180===e?this.m(2,s.x,i.y):this.m(2,i.x,s.y)),null!==A&&(0===n||180===n?this.yf(o.x,A.y):this.yf(A.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.ne(p.copy()),this.ne(m.copy())),z.free(p),z.free(m)}},st.prototype.computeMidOrthoPosition=function(t,e,i,n,s){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).$c()||this.computeSpot(!1,this.toPort).$c()||(o=this.computeCurviness()),s?(e+n)/2+o:(t+i)/2+o},st.prototype.fz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),s=oi(e,t,i.x,i.y,n.x,n.y),o=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var u=oi(e,t,n.x,n.y,i.x,i.y);n=i,u<s&&(o=l,s=u)}return o},st.prototype.rc=function(){this.kk=!1,this.v()},st.prototype.Ul=function(t){if((t||!1!==this.fd&&(t=this.Qb(),!this.kk||null!==t&&null===t.geometry))&&(2>this.pointsCount?this.kk=!0:this.ua=this.makeGeometry(),null!==(t=this.path))){t.ua=this.ua;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var s=e[n];s!==t&&s.isPanelMain&&s instanceof Pt&&(s.ua=this.ua)}}},st.prototype.makeGeometry=function(){var t=this.ua,e=this.pointsCount,i=!1,n=this.diagram;null!==n&&Lr(this)&&n.Eh.contains(this)&&(0!==this.ml.width||0!==this.ml.height)&&(n.animationManager.isAnimating||n.currentTool!==n.toolManager)&&(i=!0);var s=this.i(0).copy(),o=s.copy();n=this.Ob.s;var l=this.computeCurve();if(l===rn&&3<=e&&!_.$(this.smoothness,0))if(3===e){var u=this.i(1);n=Math.min(s.x,u.x);var c=Math.min(s.y,u.y);u=this.i(2),n=Math.min(n,u.x),c=Math.min(c,u.y)}else{if(this.isOrthogonal)for(c=0;c<e;c++)u=n[c],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),c=this.i(n),o.x=Math.min(c.x,o.x),o.y=Math.min(c.y,o.y);n=o.x,c=o.y}else{for(c=0;c<e;c++)u=n[c],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);n=o.x,c=o.y}if(c-=this.su.y,s.x-=n-=this.su.x,s.y-=c,2!==e||Lr(this)){if(t.type=rt.o,u=Py(t),0!==this.computeShortLength(!0)&&(s=na(this,s,!0,o)),rl(u,s.x,s.y,!1),l===rn&&3<=e&&!_.$(this.smoothness,0))if(3===e)e=(i=this.i(1)).x-n,i=i.y-c,(s=this.i(2).copy()).x-=n,s.y-=c,0!==this.computeShortLength(!1)&&(s=na(this,s,!1,o)),So(u,e,i,e,i,s.x,s.y);else if(this.isOrthogonal){e=z.allocAt(n,c),(i=z.alloc()).assign(this.i(1)),o=z.allocAt(n,c),s=z.allocAt(n,c),l=this.i(0);for(var p,m=this.smoothness/3,v=1;v<this.pointsCount-1;v++){var w=l,k=p=this.i(v),A=this.i(Cp(this,p,v,!1));if(!(_.$(w.x,k.x)&&_.$(k.x,A.x)||_.$(w.y,k.y)&&_.$(k.y,A.y))){var T=m;isNaN(T)&&(T=this.smoothness/3);var j=w.x,I=k.x,B=A.x;A=A.y;var R=T*Nc(j,w=w.y,I,k=k.y);T*=Nc(I,k,B,A),_.$(w,k)&&_.$(I,B)&&(I>j?A>k?(o.x=I-R,o.y=k-R,s.x=I+T,s.y=k+T):(o.x=I-R,o.y=k+R,s.x=I+T,s.y=k-T):A>k?(o.x=I+R,o.y=k-R,s.x=I-T,s.y=k+T):(o.x=I+R,o.y=k+R,s.x=I-T,s.y=k-T)),_.$(j,I)&&_.$(k,A)&&(k>w?(B>I?(o.x=I-R,o.y=k-R,s.x=I+T):(o.x=I+R,o.y=k-R,s.x=I-T),s.y=k+T):(B>I?(o.x=I-R,o.y=k+R,s.x=I+T):(o.x=I+R,o.y=k+R,s.x=I-T),s.y=k-T)),(_.$(j,I)&&_.$(I,B)||_.$(w,k)&&_.$(k,A))&&(w=.5*(w+A),o.x=j=.5*(j+B),o.y=w,s.x=j,s.y=w),(1===v||2===v&&_.$(l.x,this.i(0).x)&&_.$(l.y,this.i(0).y))&&(i.x=.5*(l.x+p.x),i.y=.5*(l.y+p.y)),So(u,i.x-n,i.y-c,o.x-n,o.y-c,p.x-n,p.y-c),e.set(o),i.set(s),l=p}}p=l.x,l=l.y,m=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(m=na(this,m.copy(),!1,_n)),So(u,s.x-n,s.y-c,(p=.5*(p+m.x))-n,(l=.5*(l+m.y))-c,m.x-n,m.y-c),z.free(e),z.free(i),z.free(o),z.free(s)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),s=this.i(i-1),l=this.i(i),i===e-1&&0!==this.computeShortLength(!1)&&(l=na(this,l.copy(),!1,_n)),So(u,o.x-n,o.y-c,s.x-n,s.y-c,l.x-n,l.y-c);else{for((o=z.alloc()).assign(this.i(0)),(s=z.alloc()).assign(o),l=this.computeCorner(),v=1,p=0;v<e;){if(v=Cp(this,o,v,1<v),m=this.i(v),v>=e-1){if(o.D(m)){if(0===p)for(v=1;v<e;)s.assign(o),sa(this,u,-n,-c,o,m=this.i(v++),i),o.assign(m)}else 0!==this.computeShortLength(!1)&&(m=na(this,m.copy(),!1,_n)),sa(this,u,-n,-c,o,m,i);break}if(p=Cp(this,m,v+1,v<e-3),v=-n,j=-c,w=m,I=this.i(p),T=i,_.B(o.y,w.y)&&_.B(w.x,I.x))if(A=Math.min(l,Math.abs(w.x-s.x)/2),A=R=Math.min(A,Math.abs(I.y-w.y)/2),_.B(A,0))sa(this,u,v,j,o,w,T),o.assign(w);else{var H=w.x,K=w.y;k=H,B=K,B=I.y>w.y?w.y+R:w.y-R,sa(this,u,v,j,o,I=z.allocAt(H=w.x>o.x?w.x-A:w.x+A,K),T),z.free(I),wc(u,w.x+v,w.y+j,k+v,B+j),o.h(k,B)}else _.B(o.x,w.x)&&_.B(w.y,I.y)?(A=Math.min(l,Math.abs(w.y-s.y)/2),A=R=Math.min(A,Math.abs(I.x-w.x)/2),_.B(R,0)?(sa(this,u,v,j,o,w,T),o.assign(w)):(k=H=w.x,B=K=w.y,k=I.x>w.x?w.x+R:w.x-R,sa(this,u,v,j,o,I=z.allocAt(H,K=w.y>o.y?w.y-A:w.y+A),T),z.free(I),wc(u,w.x+v,w.y+j,k+v,B+j),o.h(k,B))):(sa(this,u,v,j,o,w,T),o.assign(w));s.assign(m),v=p}z.free(o)}bc=u}else(u=this.i(1).copy()).x-=n,u.y-=c,0!==this.computeShortLength(!0)&&(s=na(this,s,!0,o)),0!==this.computeShortLength(!1)&&(u=na(this,u,!1,o)),t.type=rt.j,t.startX=s.x,t.startY=s.y,t.endX=u.x,t.endY=u.y;return this.kk=!0,t},st.prototype.computeJumpLength=function(){return 10},st.prototype.Xo=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var i=e.diagram;if(null!==i&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var s=i.value;if(s.visible)if(s===e){n=!0;for(var o=!1,l=(s=s.Pa.s).length,u=0;u<l;u++){var c=s[u];c instanceof st&&(c===this?o=!0:o&&Qy(this,c,t))}}else if(n)for(s=(o=s.Pa.s).length,l=0;l<s;l++)(u=o[l])instanceof st&&Qy(this,u,t)}}}},st.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),s=t.i(0);if(n.Xa(s)||(e=this.i(e-1),t=t.i(i-1),e.Xa(t)||n.Xa(t)||e.Xa(s)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},st.prototype.isVisible=function(){if(!vt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),null!==(i=this.fromNode)){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;null!==n;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(null===(i=i.findVisibleNode())||i===t)return!1}if(null!==(i=this.toNode)){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=i.findVisibleNode())||e===t)return!1}return!0},st.prototype.$b=function(t){if(vt.prototype.$b.call(this,t),t&&Fc(this,!1),null!==this.Sf&&this.Sf.Sl(),null!==this.wd)for(var e=this.wd.iterator;e.next();)e.value.$b(t)},st.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Sh:this.pk},st.prototype.ph=function(){return!0},Tt.Object.defineProperties(st.prototype,{fromNode:{get:function(){return this.ef},set:function(t){var e=this.ef;if(e!==t){var i=this.fromPort;null!==e&&(this.uf!==e&&Cc(e,this,i),bh(this),this.C(2)),this.ef=t,null!==t&&this.$b(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;null!==n&&n.aa&&n.partManager.setFromNodeForLink(this,t,e);var s=this.fromPort,o=this.fromPortChanged;if(null!==o){var l=!0;null!==n&&(l=n.aa,n.aa=!0),o(this,i,s),null!==n&&(n.aa=l)}null!==t&&(this.uf!==t&&Mc(t,this,s),wh(this),this.C(1)),this.g("fromNode",e,t),al(this)}}},fromPortId:{get:function(){return this.ff},set:function(t){var e=this.ff;if(e!==t){var i=this.fromPort;null!==i&&_i(i),bh(this),this.ff=t;var n=this.fromPort;null!==n&&_i(n);var s=this.diagram;if(null!==s){var o=this.data,l=s.model;null!==o&&l.ri()&&l.yv(o,t)}i!==n&&(this.Wf=null,this.bb(),null!==(o=this.fromPortChanged)&&(l=!0,null!==s&&(l=s.aa,s.aa=!0),o(this,i,n),null!==s&&(s.aa=l))),wh(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.ef;return null===t?null:t.ns(this.ff)}},fromPortChanged:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var i=this.toPort;null!==e&&(this.ef!==e&&Cc(e,this,i),bh(this),this.C(2)),this.uf=t,null!==t&&this.$b(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;null!==n&&n.aa&&n.partManager.setToNodeForLink(this,t,e);var s=this.toPort,o=this.toPortChanged;if(null!==o){var l=!0;null!==n&&(l=n.aa,n.aa=!0),o(this,i,s),null!==n&&(n.aa=l)}null!==t&&(this.ef!==t&&Mc(t,this,s),wh(this),this.C(1)),this.g("toNode",e,t),al(this)}}},toPortId:{get:function(){return this.vf},set:function(t){var e=this.vf;if(e!==t){var i=this.toPort;null!==i&&_i(i),bh(this),this.vf=t;var n=this.toPort;null!==n&&_i(n);var s=this.diagram;if(null!==s){var o=this.data,l=s.model;null!==o&&l.ri()&&l.Dv(o,t)}i!==n&&(this.Wf=null,this.bb(),null!==(o=this.toPortChanged)&&(l=!0,null!==s&&(l=s.aa,s.aa=!0),o(this,i,n),null!==s&&(s.aa=l))),wh(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.uf;return null===t?null:t.ns(this.vf)}},toPortChanged:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.ba?this.ba.Xi:Nt},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Xi=t,this.g("fromSpot",e,t),(e.$c()||t.$c())&&null!==this.fromNode&&_i(this.fromPort),this.bb())}},fromEndSegmentLength:{get:function(){return null!==this.ba?this.ba.Vi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&ie(t,">= 0",st,"fromEndSegmentLength"),this.Xc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),this.bb())}},fromShortLength:{get:function(){return null!==this.ba?this.ba.Wi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Wi=t,this.rc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.ba?this.ba.yj:Nt},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.yj=t,this.g("toSpot",e,t),(e.$c()||t.$c())&&null!==this.toNode&&_i(this.toPort),this.bb())}},toEndSegmentLength:{get:function(){return null!==this.ba?this.ba.wj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&ie(t,">= 0",st,"toEndSegmentLength"),this.Xc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),this.bb())}},toShortLength:{get:function(){return null!==this.ba?this.ba.xj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.xj=t,this.rc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.wd&&0<this.wd.count}},labelNodes:{get:function(){return null===this.wd?Ii:this.wd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Qa)},set:function(t){var e=0!=(1&this.Qa);e!==t&&(this.Qa^=1,this.g("relinkableFrom",e,t),this.Xb())}},relinkableTo:{get:function(){return 0!=(2&this.Qa)},set:function(t){var e=0!=(2&this.Qa);e!==t&&(this.Qa^=2,this.g("relinkableTo",e,t),this.Xb())}},resegmentable:{get:function(){return 0!=(4&this.Qa)},set:function(t){var e=0!=(4&this.Qa);e!==t&&(this.Qa^=4,this.g("resegmentable",e,t),this.Xb())}},isTreeLink:{get:function(){return 0!=(8&this.Qa)},set:function(t){var e=0!=(8&this.Qa);e!==t&&(this.Qa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&xh(this.fromNode),null!==this.toNode&&xh(this.toNode))}},path:{get:function(){var t=this.Qb();return t instanceof Pt?t:null}},routeBounds:{get:function(){this.vg();var t=this.ml,e=1/0,i=1/0,n=this.pointsCount;if(0===n)t.h(NaN,NaN,0,0);else{if(1===n)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(2===n){n=this.i(0);var s=this.i(1);e=Math.min(n.x,s.x),i=Math.min(n.y,s.y),t.h(n.x,n.y,0,0),t.Ye(s)}else if(this.computeCurve()===rn&&3<=n&&!this.isOrthogonal)if(s=this.i(0),t.h(e=s.x,i=s.y,0,0),3===n){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),_.Dl(s.x,s.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var l=this.i(o-2);o+3>=n&&(o=n-1);var u=this.i(o-1),c=this.i(o);_.Dl(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y,.5,t),e=Math.min(c.x,e),i=Math.min(c.y,i),s=c}else for(s=this.i(0),o=this.i(1),e=Math.min(s.x,o.x),i=Math.min(s.y,o.y),t.h(s.x,s.y,0,0),t.Ye(o),s=2;s<n;s++)o=this.i(s),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Ye(o);this.su.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.vg(),this.computeMidPoint(new z)}},midAngle:{get:function(){return this.vg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.cq){this.fd||Pc(this);for(var t=this.cq=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),s=this.i(i+1);_.$(n.x,s.x)?0>(n=s.y-n.y)&&(n=-n):_.$(n.y,s.y)?0>(n=s.x-n.x)&&(n=-n):n=Math.sqrt(n.Bf(s)),t.push(n)}}return this.cq}},flattenedTotalLength:{get:function(){var t=this.vt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.vt=t}return t}},points:{get:function(){return this.Ob},set:function(t){var e=this.Ob;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2==0;if(n)for(var s=0;s<t.length;s++)if("number"!=typeof t[s]||isNaN(t[s])){n=!1;break}if(n)for(i=new dt,n=0;n<t.length/2;n++)s=new z(t[2*n],t[2*n+1]).freeze(),i.add(s);else{for(n=!0,s=0;s<t.length;s++){var o=t[s];if(!le(o)||"number"!=typeof o.x||isNaN(o.x)||"number"!=typeof o.y||isNaN(o.y)){n=!1;break}}if(n)for(i=new dt,n=0;n<t.length;n++)i.add(new z((s=t[n]).x,s.y).freeze())}}else if(t instanceof dt)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else Q("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Ob=i,this.rc(),Pc(this),null!==(t=this.diagram)&&(t.pi||t.undoManager.isUndoingRedoing||t.As.add(this),t.animationManager.Ab&&Qd(t.animationManager,this,i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Ob.count}},fd:{get:function(){return 0!=(16&this.Qa)},set:function(t){0!=(16&this.Qa)!==t&&(this.Qa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Qa)},set:function(t){0!=(32&this.Qa)!==t&&(this.Qa^=32)}},computingPoints:{get:function(){return 0!=(64&this.Qa)},set:function(t){0!=(64&this.Qa)!==t&&(this.Qa^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.qj.value)}},isAvoiding:{get:function(){return 4==(4&this.qj.value)}},kk:{get:function(){return 0!=(128&this.Qa)},set:function(t){0!=(128&this.Qa)!==t&&(this.Qa^=128)}},geometry:{get:function(){if(!this.kk){if(this.vg(),2>this.pointsCount)return this.kk=!0,this.ua;this.ua=this.makeGeometry()}return this.ua}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!ll(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!ll(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.rc(),this.g("corner",e,t))}},curve:{get:function(){return this.Qm},set:function(t){var e=this.Qm;e!==t&&(this.Qm=t,this.bb(),this.rc(),Fc(this,e===Ao||e===hl||t===Ao||t===hl),this.g("curve",e,t))}},curviness:{get:function(){return this.Rm},set:function(t){var e=this.Rm;e!==t&&(this.Rm=t,this.bb(),this.rc(),this.g("curviness",e,t))}},routing:{get:function(){return this.qj},set:function(t){var e=this.qj;e!==t&&(this.qj=t,this.Wf=null,this.bb(),Fc(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.rc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.ri())return t.model.Ac(this.data)}}}),st.prototype.invalidateOtherJumpOvers=st.prototype.Xo,st.prototype.findClosestSegment=st.prototype.fz,st.prototype.updateRoute=st.prototype.vg,st.prototype.invalidateRoute=st.prototype.bb,st.prototype.rollbackRoute=st.prototype.sv,st.prototype.commitRoute=st.prototype.zf,st.prototype.startRoute=st.prototype.uh,st.prototype.clearPoints=st.prototype.Ej,st.prototype.removePoint=st.prototype.qv,st.prototype.addPointAt=st.prototype.yf,st.prototype.addPoint=st.prototype.ne,st.prototype.insertPointAt=st.prototype.m,st.prototype.insertPoint=st.prototype.Lz,st.prototype.setPointAt=st.prototype.L,st.prototype.setPoint=st.prototype.dd,st.prototype.getPoint=st.prototype.i,st.prototype.getOtherPort=st.prototype.Dz,st.prototype.getOtherNode=st.prototype.To;var oa=null,ra=null,Ap=new ut(st,"Normal",1),Q0=new ut(st,"Orthogonal",2),q0=new ut(st,"AvoidsNodes",6),qy=new ut(st,"AvoidsNodesStraight",7),Ci=new ut(st,"None",0),rn=new ut(st,"Bezier",9),Ao=new ut(st,"JumpGap",10),hl=new ut(st,"JumpOver",11),Sh=new ut(st,"End",17),Ic=new ut(st,"Scale",18),Oc=new ut(st,"Stretch",19),kh=new ut(st,"OrientAlong",21),Mh=new ut(st,"OrientPlus90",22),Ch=new ut(st,"OrientMinus90",23),Pp=new ut(st,"OrientOpposite",24),Ec=new ut(st,"OrientUpright",25),Ah=new ut(st,"OrientPlus90Upright",26),Ph=new ut(st,"OrientMinus90Upright",27),jc=new ut(st,"OrientUpright45",28),tv=16,ev=14,Lh=8;function Dc(t,e,i,n){Ye(this),this.Fe=this.qq=!1,this.Ds=t,this.Px=e,this.dv=i,this.Qx=n,this.links=[]}function Th(t){Ye(this),this.Zx=this.group=null,this.vs=!0,this.abort=!1,this.Od=this.Nd=1,this.Fn=this.En=-1,this.sc=t.width,this.tc=t.height,this.bc=null,this.ei=this.di=0,this.Os=11,this.Jx=this.Ix=22}function ul(t,e,i){return t.Nd<=e&&e<=t.En&&t.Od<=i&&i<=t.Fn}function Ns(t,e,i){return ul(t,e,i)?(e-=t.Nd,i-=t.Od,t.bc[0|(e/=t.sc)][0|(i/=t.tc)]):Lp}function iv(t){if(null!==t.bc)for(var e=0;e<=t.di;e++)for(var i=t.bc[e],n=0;n<=t.ei;n++)i[n]>=Tr&&(i[n]=Lp)}function Fs(t,e,i,n,s,o,l,u,c){if(!(e<o||e>l||i<u||i>c)){var p=0|e,m=0|i,v=t.bc[p][m];if(v>=Tr&&v<cl)for(s?m+=n:p+=n,v+=1;o<=p&&p<=l&&u<=m&&m<=c&&!(v>=t.bc[p][m]);)t.bc[p][m]=v,v+=1,s?m+=n:p+=n;if(p=s?m:p,s)if(0<n)for(i+=n;i<p;i+=n)Fs(t,e,i,1,!s,o,l,u,c),Fs(t,e,i,-1,!s,o,l,u,c);else for(i+=n;i>p;i+=n)Fs(t,e,i,1,!s,o,l,u,c),Fs(t,e,i,-1,!s,o,l,u,c);else if(0<n)for(e+=n;e<p;e+=n)Fs(t,e,i,1,!s,o,l,u,c),Fs(t,e,i,-1,!s,o,l,u,c);else for(e+=n;e>p;e+=n)Fs(t,e,i,1,!s,o,l,u,c),Fs(t,e,i,-1,!s,o,l,u,c)}}function zc(t,e,i,n,s,o,l,u,c){var p=Po,m=Tr;for(t.bc[e|=0][i|=0]=m;p===Po&&e>o&&e<l&&i>u&&i<c;)t.bc[e][i]=m+=1,s?i+=n:e+=n,p=t.bc[e][i]}function Bc(t,e,i,n,s,o,l,u,c){var p=Po,m=cl;for(t.bc[e|=0][i|=0]=m;p===Po&&e>o&&e<l&&i>u&&i<c;)t.bc[e][i]=m,s?i+=n:e+=n,p=t.bc[e][i]}function nv(t,e,i,n,s,o,l){if(null!==t.bc){t.abort=!1;var u=e.x,c=e.y;if(ul(t,u,c)){u-=t.Nd,u/=t.sc,c-=t.Od,c/=t.tc;var p=n.x,m=n.y;if(ul(t,p,m))if(p-=t.Nd,p/=t.sc,m-=t.Od,m/=t.tc,1>=Math.abs(u-p)&&1>=Math.abs(c-m))t.abort=!0;else{var v=o.x;n=o.y,e=o.x+o.width;var w=o.y+o.height;v-=t.Nd,v/=t.sc,n-=t.Od,n/=t.tc,e-=t.Nd,e/=t.sc,w-=t.Od,w/=t.tc,o=Math.max(0,Math.min(t.di,0|v)),e=Math.min(t.di,Math.max(0,0|e)),v=Math.max(0,Math.min(t.ei,0|n)),w=Math.min(t.ei,Math.max(0,0|w)),p|=0,m|=0;var k=0===i||90===i?1:-1;if(i=90===i||270===i,(n=t.bc)[u|=0][c|=0]===Po?(zc(t,u,c,k,i,o,e,v,w),zc(t,u,c,1,!i,o,e,v,w),zc(t,u,c,-1,!i,o,e,v,w)):zc(t,u,c,k,i,u,c,u,c),n[p][m]===Po?(Bc(t,p,m,0===s||90===s?1:-1,90===s||270===s,o,e,v,w),Bc(t,p,m,1,!(90===s||270===s),o,e,v,w),Bc(t,p,m,-1,!(90===s||270===s),o,e,v,w)):Bc(t,p,m,k,i,p,m,p,m),i=Xt(),l&&sv(t,p,m,s,u,c,i))for((i[0]!==p||i[1]!==m)&&(i.unshift(m),i.unshift(p)),(i[i.length-2]!==u||i[i.length-1]!==c)&&(i.push(u),i.push(c)),t=Tr,n[s=i[i.length-2]][l=i[i.length-1]]=t++,o=i.length-4;0<=o;o-=2)for(s=i[o+2],l=i[o+3],e=i[o],p=i[o+1];e>s?s++:e<s?s--:p>l?l++:p<l&&l--,n[s][l]=t++,s!==e||l!==p;);else Fs(t,u,c,1,!1,o,e,v,w),Fs(t,u,c,-1,!1,o,e,v,w),Fs(t,u,c,1,!0,o,e,v,w),Fs(t,u,c,-1,!0,o,e,v,w);Zt(i)}}}}function sv(t,e,i,n,s,o,l){for(var u=t.bc,c=e,p=i;;){if(c===s&&p===o)return!0;var m=c,v=p;if(0===n){if(!(m<s))break;m++}else if(90===n){if(!(v<o))break;v++}else if(180===n){if(!(m>s))break;m--}else{if(!(v>o))break;v--}var w=u[m][v];if(0===w||w===Tp)break;c=m,p=v}for(;;){if(m=n,v=c,w=p,0===n?w<o?(m=90,w++):w>o&&(m=270,w--):90===n?v<s?(m=0,v++):v>s&&(m=180,v--):180===n?w<o?(m=90,w++):w>o&&(m=270,w--):v<s?(m=0,v++):v>s&&(m=180,v--),v=u[v][w],m!==n&&0!==v&&v!==Tp){if(l.push(c),l.push(p),sv(t,c,p,m,s,o,l))return!0;l.pop(),l.pop()}if(u[c][p]=Tp,0===n){if(c===e)return!1;c--}else if(90===n){if(p===i)return!1;p--}else if(180===n){if(c===e)return!1;c++}else{if(p===i)return!1;p++}}}st.className="Link",st.Normal=Ap,st.Orthogonal=Q0,st.AvoidsNodes=q0,st.AvoidsNodesStraight=qy,st.None=Ci,st.Bezier=rn,st.JumpGap=Ao,st.JumpOver=hl,st.End=Sh,st.Scale=Ic,st.Stretch=Oc,st.OrientAlong=kh,st.OrientPlus90=Mh,st.OrientMinus90=Ch,st.OrientOpposite=Pp,st.OrientUpright=Ec,st.OrientPlus90Upright=Ah,st.OrientMinus90Upright=Ph,st.OrientUpright45=jc,st.EndSegmentStep=8,st.CurvinessStart=tv,st.SpacingMin=ev,st.OrthoShortCut=Lh,Dc.prototype.Sl=function(){if(!this.qq){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.pw.add(this),this.Fe=t.undoManager.isUndoingRedoing)}this.qq=!0},Dc.prototype.Ov=function(){if(this.qq){this.qq=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=null===i||i.pi&&!this.Fe,this.Fe=!1,e.arrangeBundledLinks(t,i),1===t.length&&(e.Sf=null,t.length=0)}0===t.length&&(t=this.Ds,null!==this&&null!==t.af&&t.af.remove(this),t=this.dv,null!==this&&null!==t.af&&t.af.remove(this))}},Dc.className="LinkBundle",Th.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Nd=Math.floor((t.x-this.sc)/this.sc)*this.sc,this.Od=Math.floor((e-this.tc)/this.tc)*this.tc,this.En=Math.ceil((i+2*this.sc)/this.sc)*this.sc,this.Fn=Math.ceil((n+2*this.tc)/this.tc)*this.tc,t=1+(0|Math.ceil((this.En-this.Nd)/this.sc)),e=1+(0|Math.ceil((this.Fn-this.Od)/this.tc)),null===this.bc||this.di<t-1||this.ei<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.bc=i,this.di=t-1,this.ei=e-1}if(t=Lp,null!==this.bc)for(e=0;e<=this.di;e++)if((i=this.bc[e]).fill)i.fill(t);else for(n=0;n<=this.ei;n++)i[n]=t}},Th.prototype.Xj=function(t,e,i,n){if(t>this.En||t+i<this.Nd||e>this.Fn||e+n<this.Od)return!0;t=(t-this.Nd)/this.sc|0,e=(e-this.Od)/this.tc|0,i=Math.max(0,i)/this.sc+1|0;var s=Math.max(0,n)/this.tc+1|0;if(0>t&&(i+=t,t=0),0>e&&(s+=e,e=0),0>i||0>s)return!0;for(n=0|Math.min(t+i-1,this.di),i=0|Math.min(e+s-1,this.ei);t<=n;t++){s=this.bc[t];for(var o=e;o<=i;o++)if(s[o]===Po)return!1}return!0},Tt.Object.defineProperties(Th.prototype,{bounds:{get:function(){return new q(this.Nd,this.Od,this.En-this.Nd,this.Fn-this.Od)}},Ho:{get:function(){return this.sc},set:function(t){0<t&&t!==this.sc&&(this.sc=t,this.initialize(this.bounds))}},Go:{get:function(){return this.tc},set:function(t){0<t&&t!==this.tc&&(this.tc=t,this.initialize(this.bounds))}}});var Po=0,Tr=1,cl=999999,Lp=cl+1,Tp=cl+2;function aa(){Ye(this),this.port=this.node=null,this.pe=[],this.ap=!1}function tx(t,e,i,n){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&15!==e&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function ov(t,e){var i=t.pe;if(0===i.length){t:if(!t.ap){i=t.ap,t.ap=!0;var n=null,s=t.node,o=s instanceof At?s:null;if(null===o||o.isSubGraphExpanded)var l=s.isTreeExpanded?s.findLinksConnected(t.port.portId):s.sx();else{if(!o.actualBounds.w()){t.ap=i;break t}l=(n=o).Mu()}o=t.pe.length=0;var u=t.port.ga(y,z.alloc()),c=t.port.ga(D,z.alloc());for((s=q.allocAt(u.x,u.y,0,0)).Ye(c),z.free(u),z.free(c),u=z.allocAt(s.x+s.width/2,s.y+s.height/2),c=t.port.li(),l=l.iterator;l.next();){var p=l.value;if(p.isVisible()&&p.fromPort!==p.toPort){var m=p.fromPort===t.port||null!==p.fromNode&&p.fromNode.Td(n),v=p.computeSpot(m,t.port);if(v.$c()&&null!==(m=m?p.toPort:p.fromPort)){var w=m.part;if(null!==w){var k=w.findVisibleNode();null!==k&&k!==w&&(m=(w=k).port),m=p.computeOtherPoint(w,m),w=u.ab(m),0>(w-=c)?w+=360:360<=w&&(w-=360),0===(v=tx(s,v,w,p.isOrthogonal))?(v=4,180<w&&(w-=360)):90===v?(v=8,270<w&&(w-=360)):180===v?v=2:(v=1,90>w&&(w+=360)),void 0===(k=t.pe[o])?(k=new Np(p,w,v),t.pe[o]=k):(k.link=p,k.angle=w,k.Nc=v),k.iv.set(m),o++}}}}for(z.free(u),t.pe.sort(aa.prototype.j),c=t.pe.length,n=-1,o=u=0;o<c;o++)void 0!==(l=t.pe[o])&&(l.Nc!==n&&(n=l.Nc,u=0),l.Uo=u,u++);for(n=-1,u=0,o=c-1;0<=o;o--)void 0!==(c=t.pe[o])&&(c.Nc!==n&&(n=c.Nc,u=c.Uo+1),c.Gl=u);if(o=t.pe,v=t.port,n=t.node.portSpreading,u=z.alloc(),c=z.alloc(),l=z.alloc(),p=z.alloc(),v.ga(y,u),v.ga(S,c),v.ga(D,l),v.ga(F,p),k=w=m=v=0,n===wp)for(var A=0;A<o.length;A++){var T=o[A];if(null!==T){var j=T.link.computeThickness();switch(T.Nc){case 8:w+=j;break;case 2:k+=j;break;case 1:v+=j;break;default:m+=j}}}var I=A=0,B=1,R=T=0;for(j=0;j<o.length;j++){var H=o[j];if(null!==H){if(A!==H.Nc){switch(A=H.Nc){case 8:var K=l;I=p;break;case 2:K=p,I=u;break;case 1:K=u,I=c;break;default:K=c,I=l}switch(T=I.x-K.x,R=I.y-K.y,A){case 8:w>Math.abs(T)?(B=Math.abs(T)/w,w=Math.abs(T)):B=1;break;case 2:k>Math.abs(R)?(B=Math.abs(R)/k,k=Math.abs(R)):B=1;break;case 1:v>Math.abs(T)?(B=Math.abs(T)/v,v=Math.abs(T)):B=1;break;default:m>Math.abs(R)?(B=Math.abs(R)/m,m=Math.abs(R)):B=1}I=0}var J=H.Zo;if(n===wp){switch(H=H.link.computeThickness(),H*=B,J.set(K),A){case 8:J.x=K.x+T/2+w/2-I-H/2;break;case 2:J.y=K.y+R/2+k/2-I-H/2;break;case 1:J.x=K.x+T/2-v/2+I+H/2;break;default:J.y=K.y+R/2-m/2+I+H/2}I+=H}else{var lt=.5;n===Ac&&(lt=(H.Uo+1)/(H.Gl+1)),J.x=K.x+T*lt,J.y=K.y+R*lt}}}for(z.free(u),z.free(c),z.free(l),z.free(p),K=t.pe,o=0;o<K.length;o++)null!==(n=K[o])&&(n.Ku=t.computeEndSegmentLength(n));t.ap=i,q.free(s)}i=t.pe}for(t=0;t<i.length;t++)if(null!==(s=i[t])&&s.link===e)return s;return null}function Np(t,e,i){this.link=t,this.angle=e,this.Nc=i,this.iv=new z,this.Gl=this.Uo=0,this.Zo=new z,this.Ku=0}function ae(t){Ye(this),this.o=this.H=null,this.Gh=this.sn=!0,this.yn=!1,this.Am=new z(0,0).freeze(),this.vn=!0,this.Em=this.un=null,this.xn=!1,this.j=null,t&&Object.assign(this,t)}function Jo(t,e,i,n,s,o,l,u){for(i=i.iterator;i.next();){var c=i.value;n&&!c.isTopLevel||null!==s&&!s(c)||!c.canLayout()||(o&&c instanceof ct?c.isLinkLabel||(c instanceof At&&null===c.layout?Jo(t,e,c.memberParts,!1,s,o,l,u):(Nh(c),e.add(c))):l&&c instanceof st?e.add(c):!u||!c.Zc()||c instanceof ct||(Nh(c),e.add(c)))}}function Nh(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Va()}function te(t){Ye(this),this.Sc=t,this.wf=new ht,this.ye=new ht,this.Es=new kt,this.zs=new kt}function rv(t,e){if(null===e)return!1;var i=t.wf.remove(e);return i&&null!==(e=e.node)&&t.Es.remove(e),i}function Fp(t,e){if(null!==e){t.ye.add(e);var i=e.link;null!==i&&null===t.Lo(i)&&t.zs.add(i,e),e.network=t}}function Ip(t,e){null!==e&&t.ye.remove(e)&&null!==(e=e.link)&&t.zs.remove(e)}function Op(t,e,i){if(null!==i&&i.network!==e){rv(t,i),e.dh(i);for(var n=i.sourceEdges;n.next();){var s=n.value;s.network!==e&&(Ip(t,s),Fp(e,s),Op(t,e,s.fromVertex))}for(n=i.destinationEdges;n.next();)(i=n.value).network!==e&&(Ip(t,i),Fp(e,i),Op(t,e,i.toVertex))}}function De(t){Ye(this),this.ob=t,this.j=new q(0,0,10,10).freeze(),this.o=new z(5,5).freeze(),this.Sh=this.ub=null,this.tg=new dt,this.mg=new dt}function Ep(t,e){return e=e.Sh,(t=t.Sh)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Zi(t){Ye(this),this.nb=t,this.qd=this.kd=this.Zk=this.ub=null}function $e(t){ae.call(this),this.isViewportSized=!0,this.yo=this.zo=NaN,this.yg=new Mt(NaN,NaN).freeze(),this.tf=new Mt(10,10).freeze(),this.Kb=Fh,this.Sb=Yc,this.nd=Ih,this.hd=av,t&&Object.assign(this,t)}function av(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Th.className="PositionArray",aa.prototype.toString=function(){for(var t=this.pe,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+="\n  "+n.toString())}return e},aa.prototype.Sl=function(){this.pe.length=0},aa.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Nc<e.Nc?-1:t.Nc>e.Nc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},aa.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,g,e.fromPort===this.port),n=t.Uo;if(0>n)return i;var s=t.Gl;if(1>=s||!e.isOrthogonal)return i;e=t.iv;var o=t.Zo;return(2===t.Nc||8===t.Nc)&&(n=s-1-n),((t=2===t.Nc||4===t.Nc)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(s-1-n)},aa.className="Knot",Np.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Nc.toString()+":"+this.Uo.toString()+"/"+this.Gl.toString()+" "+this.Zo.toString()+" "+this.Ku.toString()+" "+this.iv.toString()},Np.className="LinkInfo",ae.prototype.cloneProtected=function(t){t.sn=this.sn,t.Gh=this.Gh,t.yn=this.yn,t.Am.assign(this.Am),t.vn=this.vn,t.un=this.un,t.Em=this.Em,t.xn=!0},ae.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},ae.prototype.qb=function(){},ae.prototype.toString=function(){var t=ws(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},ae.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Cc(),this.isOngoing&&t.pi||this.isInitial&&!t.pi)&&(this.isValidLayout=!1,t.ac())}}},ae.prototype.createNetwork=function(){return new te(this)},ae.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof $?(e.lg(t.nodes,!0),e.lg(t.links,!0)):e.lg(t instanceof At?t.memberParts:t.iterator),e},ae.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(null!==i&&null!==(t=i.diagram))break}try{null!==t&&t.Ea("Layout"),this.commitLayout()}finally{null!==t&&t.eb("Layout")}},ae.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},ae.prototype.doLayout=function(t){var e=new ht;t instanceof $?(Jo(this,e,t.nodes,!0,this.rh,!0,!1,!0),Jo(this,e,t.parts,!0,this.rh,!0,!1,!0)):t instanceof At?Jo(this,e,t.memberParts,!1,this.rh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.Ea("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.eb("Layout")),this.isValidLayout=!0},ae.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,s=this.arrangementOrigin.y,o=0,l=0;for(t=t.iterator;t.next();){var u=t.value;Nh(u);var c=u.measuredBounds,p=c.width;c=c.height,u.moveTo(n,s),u instanceof At&&(u.rh=!1),n+=Math.max(p,50)+20,l=Math.max(l,Math.max(c,50)),o>=e-1?(o=0,n=i,s+=l+20,l=0):o++}},ae.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,s=0,o=0,l=this.network.vertexes.iterator;l.next();){var u=l.value.node;if(!(null===u||u instanceof st)&&(Nh(u),this.rh(u))){var c=u.measuredBounds,p=c.width;c=c.height,u.moveTo(i,n),u instanceof At&&(u.rh=!1),i+=Math.max(p,50)+20,o=Math.max(o,Math.max(c,50)),s>=t-1?(s=0,i=e,n+=o+20,o=0):s++}}},ae.prototype.rh=function(t){return!(t.location.w()&&!(t instanceof At&&t.rh))},ae.prototype.ni=function(t,e){var i=this.boundsComputation;return null!==i?(e||(e=new q),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},ae.prototype.gx=function(t){var e=new ht;return t instanceof $?(Jo(this,e,t.nodes,!0,null,!0,!0,!0),Jo(this,e,t.links,!0,null,!0,!0,!0),Jo(this,e,t.parts,!0,null,!0,!0,!0)):Jo(this,e,t instanceof At?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},ae.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),null!==(e=e.placeholder)&&(i=e.ga(y),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=(t=e.padding).left,i.y+=t.top),i}return t},Tt.Object.defineProperties(ae.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,null!==t&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.sn},set:function(t){this.sn!==t&&(this.sn=t)}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t,t||(this.xn=!0)}},isViewportSized:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t)&&this.C()}},isRouting:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t)}},isRealtime:{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t)}},isValidLayout:{get:function(){return this.xn},set:function(t){this.xn!==t&&(this.xn=t,t||null!==(t=this.diagram)&&(t.xh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.Em},set:function(t){this.Em!==t&&(this.Em=t,this.C())}},arrangementOrigin:{get:function(){return this.Am},set:function(t){this.Am.D(t)||(this.Am.assign(t),this.C())}}}),ae.prototype.collectParts=ae.prototype.gx,ae.prototype.getLayoutBounds=ae.prototype.ni,ae.prototype.invalidateLayout=ae.prototype.C,ae.className="Layout",te.prototype.clear=function(){if(this.wf)for(var t=this.wf.iterator;t.next();)t.value.clear();if(this.ye)for(t=this.ye.iterator;t.next();)t.value.clear();this.wf=new ht,this.ye=new ht,this.Es=new kt,this.zs=new kt},te.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.wf.count+" edges: "+this.ye.count,1<t){for(var i=this.wf.iterator;i.next();)e+="\n    "+i.value.toString(t-1);for(i=this.ye.iterator;i.next();)e+="\n    "+i.value.toString(t-1)}return e},te.prototype.createVertex=function(){return new De(this)},te.prototype.createEdge=function(){return new Zi(this)},te.prototype.lg=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),void 0===i&&(i=null),null===i&&(i=function(l){if(l instanceof ct)return!l.isLinkLabel;if(l instanceof st){var u=l.fromNode;return null!==u&&!u.isLinkLabel&&!(null===(l=l.toNode)||l.isLinkLabel)}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof ct&&(!e||n.isTopLevel)&&n.canLayout()&&i(n))if(n instanceof At&&null===n.layout)this.lg(n.memberParts,!1);else if(null===this.ki(n)){var s=this.createVertex();s.node=n,this.dh(s)}}for(t.reset();t.next();)if((n=t.value)instanceof st&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&null===this.Lo(n)){var o=n.fromNode;s=n.toNode,null!==o&&null!==s&&o!==s&&(o=this.findGroupVertex(o),s=this.findGroupVertex(s),null!==o&&null!==s&&this.Yj(o,s,n))}}},te.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.ki(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.ki(e)))return t;e=e.containingGroup}return null},(L=te.prototype).dh=function(t){if(null!==t){this.wf.add(t);var e=t.node;null!==e&&this.Es.add(e,t),t.network=this}},L.Bl=function(t){if(null===t)return null;var e=this.ki(t);return null===e&&((e=this.createVertex()).node=t,this.dh(e)),e},L.Ju=function(t){if(null!==t&&rv(this,t)){for(var e=t.tg,i=e.count-1;0<=i;i--){var n=e.M(i);this.Lj(n)}for(t=(e=t.mg).count-1;0<=t;t--)i=e.M(t),this.Lj(i)}},L.$y=function(t){null!==t&&null!==(t=this.ki(t))&&this.Ju(t)},L.ki=function(t){return null===t?null:this.Es.I(t)},L.Bo=function(t){if(null!==t){Fp(this,t);var e=t.toVertex;null!==e&&e.Cl(t),null!==(e=t.fromVertex)&&e.zl(t)}},L.Ey=function(t){if(null===t)return null;var e=t.fromNode,i=t.toNode,n=this.Lo(t);return null===n?((n=this.createEdge()).link=t,null!==e&&(n.fromVertex=this.Bl(e)),null!==i&&(n.toVertex=this.Bl(i)),this.Bo(n)):(n.fromVertex=null!==e?this.Bl(e):null,n.toVertex=null!==i?this.Bl(i):null),n},L.Lj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Kl(t),null!==(e=t.fromVertex)&&e.Jl(t),Ip(this,t)}},L.Zy=function(t){null!==t&&null!==(t=this.Lo(t))&&this.Lj(t)},L.Lo=function(t){return null===t?null:this.zs.I(t)},L.Yj=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Bo(n),n}return null},L.gm=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.Jl(t),i.Kl(t),t.gm(),e.Cl(t),i.zl(t))}},L.Ko=function(){for(var t=Xt(),e=this.ye.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Lj(t[i]);Zt(t)},te.prototype.deleteArtificialVertexes=function(){for(var t=Xt(),e=this.wf.iterator;e.next();){var i=e.value;null===i.node&&null===i.data&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Ju(t[e]);for(e=Xt(),i=this.ye.iterator;i.next();){var n=i.value;null===n.link&&null===n.data&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Lj(e[n]);Zt(t),Zt(e)},te.prototype.$x=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function ex(t){for(var e=Xt(),i=t.ye.iterator;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Lj(e[n]);Zt(e)}(this),this.Ko()),t=new dt;for(var e=!0;e;){e=!1;for(var i=this.wf.iterator;i.next();){var n=i.value;if(0<n.tg.count||0<n.mg.count){e=this.layout.createNetwork(),t.add(e),Op(this,e,n),e=!0;break}}}return t.sort(function(s,o){return null===s||null===o||s===o?0:o.vertexes.count-s.vertexes.count}),t},te.prototype.ez=function(){for(var t=new ht,e=this.wf.iterator;e.next();)t.add(e.value.node);for(e=this.ye.iterator;e.next();)t.add(e.value.link);return t},Tt.Object.defineProperties(te.prototype,{layout:{get:function(){return this.Sc},set:function(t){null!==t&&(this.Sc=t)}},vertexes:{get:function(){return this.wf}},edges:{get:function(){return this.ye}}}),te.prototype.findAllParts=te.prototype.ez,te.prototype.splitIntoSubNetworks=te.prototype.$x,te.prototype.deleteSelfEdges=te.prototype.Ko,te.prototype.reverseEdge=te.prototype.gm,te.prototype.linkVertexes=te.prototype.Yj,te.prototype.findEdge=te.prototype.Lo,te.prototype.deleteLink=te.prototype.Zy,te.prototype.deleteEdge=te.prototype.Lj,te.prototype.addLink=te.prototype.Ey,te.prototype.addEdge=te.prototype.Bo,te.prototype.findVertex=te.prototype.ki,te.prototype.deleteNode=te.prototype.$y,te.prototype.deleteVertex=te.prototype.Ju,te.prototype.addNode=te.prototype.Bl,te.prototype.addVertex=te.prototype.dh,te.prototype.addParts=te.prototype.lg,te.className="LayoutNetwork",De.prototype.clear=function(){this.Sh=this.ub=null,this.tg=new dt,this.mg=new dt},De.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+pi(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.tg.iterator;n.next();){var s=n.value;i?i=!1:t+=",",t+=s.toString(0)}for(s="",i=!0,n=this.mg.iterator;n.next();)i?i=!1:s+=",",s+=n.value.toString(0);e+=" sources: "+t+" destinations: "+s}return e},De.prototype.commit=function(){var t=this.ub;if(null!==t){var e=this.bounds,i=t.bounds;le(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof At)){i=q.alloc(),t.Va();var n=this.network.layout.ni(t,i),s=t.locationObject.ga(C);if(n.w()&&s.w())return t.moveTo(e.x+this.focusX-(s.x-n.x),e.y+this.focusY-(s.y-n.y)),void q.free(i);q.free(i)}t.moveTo(e.x,e.y)}},De.prototype.Cl=function(t){null!==t&&(this.tg.contains(t)||this.tg.add(t))},De.prototype.Kl=function(t){null!==t&&this.tg.remove(t)},De.prototype.zl=function(t){null!==t&&(this.mg.contains(t)||this.mg.add(t))},De.prototype.Jl=function(t){null!==t&&this.mg.remove(t)},Tt.Object.defineProperties(De.prototype,{sourceEdgesArrayAccess:{get:function(){return this.tg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.mg._dataArray}},data:{get:function(){return this.ub},set:function(t){if(this.ub=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;this.o.h(n/2,(e=e.height)/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.Sh},set:function(t){if(this.Sh!==t){this.Sh=t,t.Va();var e=this.network.layout,i=q.alloc(),n=e.ni(t,i);e=n.x;var s=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(s)&&(s=0),this.j.h(e,s,o,n),q.free(i),!(t instanceof At)&&(t=t.locationObject.ga(C)).w())return void this.o.h(t.x-e,t.y-s);this.o.h(o/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.D(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.D(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ka(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ka(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ka(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ka(),e.height=t,e.freeze())}},network:{get:function(){return this.ob},set:function(t){this.ob=t}},sourceVertexes:{get:function(){for(var t=new ht,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new ht,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new ht,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.tg.iterator}},destinationEdges:{get:function(){return this.mg.iterator}},edges:{get:function(){for(var t=new dt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.tg.count+this.mg.count}}}),De.prototype.deleteDestinationEdge=De.prototype.Jl,De.prototype.addDestinationEdge=De.prototype.zl,De.prototype.deleteSourceEdge=De.prototype.Kl,De.prototype.addSourceEdge=De.prototype.Cl,De.className="LayoutVertex",De.standardComparer=Ep,De.smartComparer=function(t,e){if(null!==t){if(null!==e){var i=e.Sh;if(null!==(t=t.Sh)){if(null!==i){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(""!==t[i]&&void 0!==t[i]){var n=parseFloat(e[i]),s=parseFloat(t[i]);if(isNaN(n)){if(!isNaN(s))return 1;if(0!==e[i].localeCompare(t[i]))return e[i].localeCompare(t[i])}else{if(isNaN(s))return-1;if(n-s!=0)return n-s}}else if(""!==e[i])return 1;return""!==t[i]&&void 0!==t[i]?-1:0}return 1}return null!==i?-1:0}return 1}return null!==e?-1:0},Zi.prototype.clear=function(){this.qd=this.kd=this.Zk=this.ub=null},Zi.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+pi(this);return 0<t&&(e+=null!==this.Zk?"("+this.Zk.toString()+")":"",1<t&&(e+=" "+(this.kd?this.kd.toString():"null")+" --\x3e "+(this.qd?this.qd.toString():"null"))),e},Zi.prototype.gm=function(){var t=this.kd;this.kd=this.qd,this.qd=t},Zi.prototype.commit=function(){},Zi.prototype.Bx=function(t){return this.qd===t?this.kd:this.kd===t?this.qd:null},Tt.Object.defineProperties(Zi.prototype,{network:{get:function(){return this.nb},set:function(t){this.nb=t}},data:{get:function(){return this.ub},set:function(t){this.ub!==t&&(this.ub=t)}},link:{get:function(){return this.Zk},set:function(t){this.Zk!==t&&(this.Zk=t)}},fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}}}),Zi.prototype.getOtherVertex=Zi.prototype.Bx,Zi.className="LayoutEdge",Vt($e,ae),$e.prototype.cloneProtected=function(t){ae.prototype.cloneProtected.call(this,t),t.zo=this.zo,t.yo=this.yo,t.yg.assign(this.yg),t.tf.assign(this.tf),t.Kb=this.Kb,t.Sb=this.Sb,t.nd=this.nd,t.hd=this.hd},$e.prototype.qb=function(t){t.classType===$e?t===Ih||t===Hc||t===jp||t===Xc?this.sorting=t:t===Yc||t===es?this.arrangement=t:t===Fh||t===Rc?this.alignment=t:Q("Unknown enum value: "+t):ae.prototype.qb.call(this,t)},$e.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.gx(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.ph()||null===n.fromNode&&null===n.toNode){if(n.Va(),n instanceof At)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var s=e.Fa();if(0!==s.length){switch(this.sorting){case Xc:s.reverse();break;case Ih:s.sort(this.comparer);break;case Hc:s.sort(this.comparer),s.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var l=this.wrappingWidth;switch(isNaN(l)&&null!==t?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=o&&0>=l&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),null!==t&&t.Ea("Layout"),n=[],this.alignment){case Rc:var u=e,c=i,p=q.alloc(),m=Math.max(this.cellSize.width,1);if(!isFinite(m))for(var v=m=0;v<s.length;v++){var w=this.ni(s[v],p);m=Math.max(m,w.width)}if(m=Math.max(m+u,1),v=Math.max(this.cellSize.height,1),!isFinite(v))for(w=v=0;w<s.length;w++){var k=this.ni(s[w],p);v=Math.max(v,k.height)}v=Math.max(v+c,1),w=this.arrangement;for(var A=k=this.arrangementOrigin.x,T=this.arrangementOrigin.y,j=0,I=0,B=0;B<s.length;B++){var R=s[B],H=this.ni(R,p),K=Math.ceil((H.width+u)/m)*m,J=Math.ceil((H.height+c)/v)*v;if(w===es)var lt=Math.abs(A-H.width);else lt=A+H.width;(0<o&&j>o-1||0<l&&0<j&&lt-k>l)&&(n.push(new q(0,T,l+u,I)),j=0,A=k,T+=I,I=0),I=Math.max(I,J),R.moveTo(A+(H=w===es?-H.width:0),T),w===es?A-=K:A+=K,j++}n.push(new q(0,T,l+u,I)),q.free(p);break;case Fh:for(c=l,m=o,v=e,w=i,l=q.alloc(),k=Math.max(this.cellSize.width,1),o=T=p=0,u=z.alloc(),A=0;A<s.length;A++)j=this.ni(I=s[A],l),I=ko(I,I.locationObject,I.locationSpot,u),p=Math.max(p,I.x),T=Math.max(T,j.width-I.x),o=Math.max(o,I.y);(A=this.arrangement)===es?p+=v:T+=v,k=isFinite(k)?Math.max(k+v,1):Math.max(p+T,1);var gt=I=this.arrangementOrigin.x;for(B=this.arrangementOrigin.y,T=0,c>=p&&(c-=p),p=R=0,K=Math.max(this.cellSize.height,1),H=o=0,J=!0,j=z.alloc(),lt=0;lt<s.length;lt++){var ft=s[lt],ot=this.ni(ft,l),tt=ko(ft,ft.locationObject,ft.locationSpot,u);if(0<T?A===es?(gt=(gt-I-(ot.width-tt.x))/k,gt=(gt=_.$(Math.round(gt),gt)?Math.round(gt):Math.floor(gt))*k+I):(gt=(gt-I+tt.x)/k,gt=(gt=_.$(Math.round(gt),gt)?Math.round(gt):Math.ceil(gt))*k+I):R=A===es?gt+tt.x+ot.width:gt-tt.x,A===es)var Ct=-(gt+tt.x)+R;else Ct=gt+ot.width-tt.x-R;if(0<m&&T>m-1||0<c&&0<T&&Ct>c){for(n.push(new q(0,J?B-o:B,c+v,H+o+w)),gt=0;gt<T&&lt!==T;gt++){var bt=ko(Ct=s[lt-T+gt],Ct.locationObject,Ct.locationSpot,j);Ct.moveTo(Ct.position.x,Ct.position.y+o-bt.y)}H+=w,B=J?B+H:B+(H+o),T=H=o=0,gt=I,J=!1}gt===I&&(p=A===es?Math.max(p,ot.width-tt.x):Math.min(p,-tt.x)),o=Math.max(o,tt.y),H=Math.max(H,ot.height-tt.y),isFinite(K)&&(H=Math.max(H,Math.max(ot.height,K)-tt.y)),ft.moveTo(gt-tt.x,J?B-tt.y:B),A===es?gt-=tt.x+v:gt+=ot.width-tt.x+v,T++}if(n.push(new q(0,B,c+v,(J?H:H+o)+w)),s.length!==T)for(c=0;c<T;c++)v=ko(m=s[s.length-T+c],m.locationObject,m.locationSpot,u),m.moveTo(m.position.x,m.position.y+o-v.y);if(z.free(u),z.free(j),A===es)for(s=0;s<n.length;s++)(o=n[s]).width+=p,o.x-=p;else for(s=0;s<n.length;s++)(o=n[s]).x>p&&(o.width+=o.x-p,o.x=p);q.free(l)}for(u=o=l=s=0;u<n.length;u++)c=n[u],s=Math.min(s,c.x),l=Math.min(l,c.y),o=Math.max(o,c.x+c.width);this.commitLayers(n,new z(this.arrangement===es?s+e/2-(o+s):s-e/2,l-i/2)),null!==t&&t.eb("Layout"),this.isValidLayout=!0}},$e.prototype.commitLayers=function(){},Tt.Object.defineProperties($e.prototype,{wrappingWidth:{get:function(){return this.zo},set:function(t){this.zo!==t&&(0<t||isNaN(t))&&(this.zo=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.yo},set:function(t){this.yo!==t&&(0<t||isNaN(t))&&(this.yo=t,this.C())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||(this.yg.assign(t),this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf.D(t)||(this.tf.assign(t),this.C())}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb===t||t!==Fh&&t!==Rc||(this.Kb=t,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==Yc&&t!==es||(this.Sb=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==jp&&t!==Xc&&t!==Ih&&t!==Hc||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}}});var Rc=new ut($e,"Position",0),Fh=new ut($e,"Location",1),Yc=new ut($e,"LeftToRight",2),es=new ut($e,"RightToLeft",3),jp=new ut($e,"Forward",4),Xc=new ut($e,"Reverse",5),Ih=new ut($e,"Ascending",6),Hc=new ut($e,"Descending",7);function Ut(){this.On=new ht,this.Dn=new ht,this.Pa=new ht,this.cf=new kt,this.bf=new kt,this.aj=new kt,this.H=null,this.tp=!1}function lv(t,e,i){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.cf.contains(e)){void 0===i&&(i=!0);t:{if(null!=e&&!t.H.undoManager.isUndoingRedoing&&!t.cf.contains(e)){var n=t.Ro(e),s=hv(t,e,n);if(null!==s&&(An(s),null!==(s=s.copy()))){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,s.Tf=n,s.ub=e,t.tp&&(s.Jg="Tool"),t.diagram.add(s),s.ub=null,s.data=e,t.diagram.skipsModelSourceBindings=o,n=s;break t}}n=null}null!==n&&i&&t.resolveReferencesForData(e)}}function hv(t,e,i){var n=(t=t.H).model;return n.Wj()&&n.Zu(e)?null===(e=t.groupTemplateMap.I(i))&&null===(e=t.groupTemplateMap.I(""))&&(dv||(dv=!0,Fi('No Group template found for category "'+i+'"'),Fi("  Using default group template")),e=t.my):null===(e=t.nodeTemplateMap.I(i))&&null===(e=t.nodeTemplateMap.I(""))&&(cv||(cv=!0,Fi('No Node template found for category "'+i+'"'),Fi("  Using default node template")),e=t.oy),e}function Dp(t,e,i){for(var n in i){var s=e[n],o=i[n];if(Ge(o)){if(!Ge(s)||s.length<o.length)return!1;for(var l=0;l<s.length;l++){var u=o[l];if(void 0!==u&&!uv(t,s[l],u))return!1}}else if(!uv(t,s,o))return!1}return!0}function uv(t,e,i){if("function"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(le(e)&&le(i)){if(!Dp(t,e,i))return!1}else if(e!==i)return!1;return!0}function zp(t,e){var i=e.Hh;if(Ge(i)){var n=t.aj.I(i);if(null===n)(n=[]).push(e),t.aj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function Bp(t,e,i){Mr(e,function(l){for(var u=(l=l.O.s).length,c=0;c<u;c++)mf(i,l[c])});var n=e.Hh;if(Ge(n)){var s=t.aj.I(n);if(null!==s)for(var o=0;o<s.length;o++)if(s[o]===e){s.splice(o,1),0===s.length&&t.aj.remove(n);break}}}function Vc(t,e,i,n,s){if(null===e||s&&!e.canCopy())return null;if(n.contains(e))return n.I(e);var o=t.copyPartData(e,i);if(!(o instanceof vt))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof ct){for(var l=e.linksConnected;l.next();){var u=l.value;if(u.fromNode===e){var c=n.I(u);null!==c&&(c.fromNode=o)}u.toNode===e&&null!==(u=n.I(u))&&(u.toNode=o)}if(e instanceof At&&o instanceof At)for(e=e.memberParts;e.next();)(l=Vc(t,e.value,i,n,s))instanceof st||null===l||(l.containingGroup=o)}else if(e instanceof st&&o instanceof st)for(null!==(l=e.fromNode)&&null!==(l=n.I(l))&&(o.fromNode=l),null!==(l=e.toNode)&&null!==(l=n.I(l))&&(o.toNode=l),e=e.labelNodes;e.next();)null!==(l=Vc(t,e.value,i,n,s))&&l instanceof ct&&(l.labeledLink=o);return o}$e.className="GridLayout",$e.standardComparer=av,$e.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(""!==e[i]&&void 0!==e[i]){var n=parseFloat(t[i]),s=parseFloat(e[i]);if(isNaN(n)){if(!isNaN(s))return 1;if(0!==t[i].localeCompare(e[i]))return t[i].localeCompare(e[i])}else{if(isNaN(s))return-1;if(n-s!=0)return n-s}}else if(""!==t[i])return 1;return""!==e[i]&&void 0!==e[i]?-1:0}return 1}return null!==e?-1:0},$e.Position=Rc,$e.Location=Fh,$e.LeftToRight=Yc,$e.RightToLeft=es,$e.Forward=jp,$e.Reverse=Xc,$e.Ascending=Ih,$e.Descending=Hc,(L=Ut.prototype).clear=function(){this.On.clear(),this.Dn.clear(),this.Pa.clear(),this.cf.clear(),this.bf.clear(),this.aj.clear()},L.Xe=function(t){this.H=t},L.oi=function(t){if(t instanceof ct){if(this.On.add(t),t instanceof At){var e=t.containingGroup;null===e?this.H.ai.add(t):e.fl.add(t),null!==(e=t.layout)&&(e.diagram=this.H)}}else t instanceof st?this.Dn.add(t):t instanceof Bt||this.Pa.add(t);null===(e=t.data)||t instanceof Bt||(t instanceof st?this.bf.add(e,t):this.cf.add(e,t))},L.qc=function(t){if(t.Dj(),t instanceof ct){if(this.On.remove(t),t instanceof At){var e=t.containingGroup;null===e?this.H.ai.remove(t):e.fl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof st?this.Dn.remove(t):t instanceof Bt||this.Pa.remove(t);null===(e=t.data)||t instanceof Bt||(t instanceof st?this.bf.remove(e):this.cf.remove(e))},L.Wd=function(){var t=this.H;if(null!==t){for(var e=t.nodeTemplateMap.iterator;e.next();){var i=e.value,n=e.key;(!i.Zc()||i instanceof At)&&Q('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(e=t.groupTemplateMap.iterator;e.next();)n=e.key,(i=e.value)instanceof At||Q('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(e=t.linkTemplateMap.iterator;e.next();)n=e.key,(i=e.value)instanceof st||Q('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(e=Xt(),i=t.selection.iterator;i.next();)(n=i.value.data)&&e.push(n);for(i=Xt(),t=t.highlighteds.iterator;t.next();)(n=t.value.data)&&i.push(n);for(t=Xt(),n=this.nodes.iterator;n.next();){var s=n.value;null!==s.data&&(t.push(s.data),t.push(s.location))}for(n=this.links.iterator;n.next();)null!==(s=n.value).data&&(t.push(s.data),t.push(s.location));for(n=this.parts.iterator;n.next();)null!==(s=n.value).data&&(t.push(s.data),t.push(s.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<e.length;n++)null!==(s=this.Lc(e[n]))&&(s.isSelected=!0);for(n=0;n<i.length;n++)null!==(s=this.Lc(i[n]))&&(s.isHighlighted=!0);for(n=0;n<t.length;n+=2)null!==(s=this.Lc(t[n]))&&(s.location=t[n+1]);Zt(e),Zt(i),Zt(t)}},Ut.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Ut.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(s){n.lb(s)&&lv(i,s,!1)}),t.forEach(function(s){n.lb(s)&&i.resolveReferencesForData(s)}),!1!==e&&zu(this.diagram,!1)},Ut.prototype.insertLink=function(){return null},Ut.prototype.resolveReferencesForData=function(){},Ut.prototype.Ro=function(t){return this.H.model.Ro(t)},Ut.prototype.getLinkCategoryForData=function(){return""},Ut.prototype.setLinkCategoryForData=function(){},Ut.prototype.setFromNodeForLink=function(){},Ut.prototype.setToNodeForLink=function(){},Ut.prototype.findLinkTemplateForCategory=function(t){var e=this.H,i=e.linkTemplateMap.I(t);return null===i&&null===(i=e.linkTemplateMap.I(""))&&(fv||(fv=!0,Fi('No Link template found for category "'+t+'"'),Fi("  Using default link template")),i=e.ny),i},Ut.prototype.removeAllModeledParts=function(){this.Gs(this.diagram.model.nodeDataArray)},Ut.prototype.Gs=function(t){var e=this;t.forEach(function(i){e.ip(i)})},Ut.prototype.ip=function(t){null!==(t=this.Lc(t))&&(uf(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Ut.prototype.unresolveReferencesForPart=function(){},Ut.prototype.removeDataForLink=function(){},Ut.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.H.model.ic(t))?this.cf.I(t):null},Ut.prototype.Wb=function(t){return null==t||null===(t=this.H.model.ic(t))?null:(t=this.cf.I(t))instanceof ct?t:null},Ut.prototype.findLinkForKey=function(){return null},(L=Ut.prototype).Lc=function(t){if(null===t)return null;var e=this.cf.I(t);return null!==e?e:e=this.bf.I(t)},L.ii=function(t){return null===t?null:(t=this.cf.I(t))instanceof ct?t:null},L.Kc=function(t){return null===t?null:this.bf.I(t)},L.ms=function(t){for(var e=0;e<arguments.length;++e);e=new ht;for(var i=this.On.iterator;i.next();){var n=i.value,s=n.data;if(null!==s)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(le(l)&&Dp(this,s,l)){e.add(n);break}}}return e.iterator},L.ls=function(t){for(var e=0;e<arguments.length;++e);e=new ht;for(var i=this.Dn.iterator;i.next();){var n=i.value,s=n.data;if(null!==s)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(le(l)&&Dp(this,s,l)){e.add(n);break}}}return e.iterator},Ut.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.aa){e.aa=!1;try{var n=t.modelChange;if(""!==n)if(i===de){if("nodeCategory"===n){var s=this.Lc(t.object),o=t.newValue;null!==s&&"string"==typeof o&&(s.category=o)}else"nodeDataArray"===n&&(this.Gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===ze){var l=t.newValue;"nodeDataArray"===n&&le(l)&&lv(this,l),e.isModified=!0}else if(i===Ue){var u=t.oldValue;"nodeDataArray"===n&&le(u)&&this.ip(u),e.isModified=!0}else i===$n&&("SourceChanged"===n?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.rp(),this.updateAllTargetBindings()):"ModelDisplaced"===n&&this.Wd());else if(i===de){var c=t.propertyName,p=t.object;p===e.model?("nodeKeyProperty"===c||"nodeCategoryProperty"===c)&&(e.undoManager.isUndoingRedoing||this.Wd()):this.updateDataBindings(p,c),e.isModified=!0}else if(i===ze||i===Ue){var m=t.change===ze,v=m?t.newParam:t.oldParam,w=m?t.newValue:t.oldValue,k=this.aj.I(t.object);if(Array.isArray(k))for(t=0;t<k.length;t++){var A=k[t];if(m)ac(A,w,v,!0);else if(!(0>v)){var T=v+fh(A);A.qc(T,!0),$f(A,T,v)}}e.isModified=!0}}finally{e.aa=!0}}}}},Ut.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.La(t);for(e=this.nodes.iterator;e.next();)e.value.La(t);for(e=this.links.iterator;e.next();)e.value.La(t)},Ut.prototype.rp=function(){for(var t=this.H.model,e=new ht,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var s=[];for(this.nodes.each(function(l){null===l.data||e.contains(l.data)||s.push(l.data)}),this.parts.each(function(l){null===l.data||e.contains(l.data)||s.push(l.data)}),s.forEach(function(l){Sv(t,l,!1)}),n=0;n<i.length;n++){var o=i[n];null===this.Lc(o)&&bv(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Ut.prototype.refreshDataBoundLinks=function(){},Ut.prototype.updateRelationshipsFromData=function(){},Ut.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var i=this.Lc(t);if(null!==i)i.La(e);else{i=null;for(var n=this.aj.iterator;n.next();){for(var s=n.value,o=0;o<s.length;o++){var l=s[o].tx(t);null!==l&&(null===i&&(i=Xt()),i.push(l))}if(null!==i)break}if(null!==i){for(n=0;n<i.length;n++)i[n].La(e);Zt(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Ut.prototype.Jj=function(t,e,i){void 0===i&&(i=!1);var n=new kt;if(Ge(t))for(var s=0;s<t.length;s++)Vc(this,t[s],e,n,i);else for(t=t.iterator;t.next();)Vc(this,t.value,e,n,i);if(null!==e){i=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Wm.dragsLink,s=new ht;for(var o=new kt,l=n.iterator;l.next();){var u=l.value;if(u instanceof st)t||null!==u.fromNode&&null!==u.toNode||s.add(u);else if(u instanceof ct&&null!==u.data&&i.Tl()){var c=u,p=(u=l.key).pg();null!==p&&(null!==(p=n.I(p))?(i.qe(c.data,i.wa(p.data)),c=e.Kc(c.data),null!==(u=u.kh())&&null!==c&&o.add(u,c)):i.qe(c.data,void 0))}}if(0<s.count&&e.Is(s,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.H&&null!==(i=(e=e.model).afterCopyFunction)){var m=new kt;n.each(function(v){null!==v.key.data&&m.add(v.key.data,v.value.data)}),i(m,e,this.H.model)}for(e=n.iterator;e.next();)e.value.La();return n},Ut.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(null!==n&&null!==e){var s=e.model;t instanceof st||le(n=s.copyNodeData(n))&&(s.xf(n),i=e.Lc(n))}else An(t),null!==(i=t.copy())&&(s=this.H,null!==e?e.add(i):null!==n&&null!==s&&null!==s.commandHandler&&s.commandHandler.copiesClipboardData&&(e=s.model,s=null,i instanceof st||(s=e.copyNodeData(n)),le(s)&&(i.data=s)));return i},Tt.Object.defineProperties(Ut.prototype,{nodes:{get:function(){return this.On}},links:{get:function(){return this.Dn}},parts:{get:function(){return this.Pa}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.tp},set:function(t){this.tp=t}}}),Ut.prototype.updateAllRelationshipsFromData=Ut.prototype.rp,Ut.prototype.findLinksByExample=Ut.prototype.ls,Ut.prototype.findNodesByExample=Ut.prototype.ms,Ut.prototype.findLinkForData=Ut.prototype.Kc,Ut.prototype.findNodeForData=Ut.prototype.ii,Ut.prototype.findPartForData=Ut.prototype.Lc,Ut.prototype.findNodeForKey=Ut.prototype.Wb,Ut.prototype.removeModeledPart=Ut.prototype.ip,Ut.prototype.removeModeledParts=Ut.prototype.Gs,Ut.prototype.rebuildParts=Ut.prototype.Wd;var cv=!1,dv=!1,fv=!1;function Ke(t){Ut.apply(this,arguments)}function pv(t,e){e.forEach(function(i){gv(t,i)}),zu(t.diagram,!1)}function gv(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.bf.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(null!==n){An(n);var s=n.copy();if(null!==s){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,s.Tf=i,s.ub=e;var o=Kc(i=t.diagram.model,e,!0);""!==o&&(s.fromPortId=o),void 0!==(o=an(i,e,!0))&&(o=t.Wb(o))instanceof ct&&(s.fromNode=o),""!==(o=Kc(i,e,!1))&&(s.toPortId=o),void 0!==(o=an(i,e,!1))&&(o=t.Wb(o))instanceof ct&&(s.toNode=o),i=i.Ef(e),Array.isArray(i)&&i.forEach(function(l){null!==(l=t.Wb(l))&&(l.labeledLink=s)}),t.tp&&(s.Jg="Tool"),t.diagram.add(s),s.ub=null,s.data=e,t.diagram.skipsModelSourceBindings=n}}}}function mv(t,e){e.forEach(function(i){t.ip(i)})}function xn(){Ut.apply(this,arguments),this.Sg=null}function Gc(t,e,i){if(null!==e&&null!==i&&null===i.kh()){var n=t.diagram.toolManager.findTool("Linking"),s=e,o=i;if(t.diagram.isTreePathToChildren||(s=i,o=e),(null===n||!Gl(n,s,o,null,!0))&&(e=t.getLinkCategoryForData(i.data),null!==(n=t.findLinkTemplateForCategory(e))&&(An(n),null!==(n=n.copy())))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,n.Tf=e,n.ub=i.data,n.fromNode=s,n.toNode=o,t.diagram.add(n),n.ub=null,n.data=i.data,t.diagram.skipsModelSourceBindings=l}}}function mt(t,e){this.jl=new ht,this.hl=new ht,this.Xv=',\n  "insertedNodeKeys": ',this.ky=',\n  "modifiedNodeData": ',this.Zv=',\n  "removedNodeKeys": ',this.vh=null,Ye(this),this.Sm=this.xa="",this.Gg=!1,this.j={},this.Tc=[],this.kb=new kt,this.Th="key",this.Ak=this.al=null,this.Jm=this.Km=!1,this.Mm=!0,this.xm=null,this.lj="category",this.Vf=new kt,this.Lt=new dt,this.Wg=!1,this.o=null,this.undoManager=new we,void 0!==t&&(Ge(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}function dl(t,e,i,n,s,o){function l(v,w){u?(void 0===v.__gohashid&&o.push(v),n.set(v,w)):(v=Ho++,n.set(v,w),s.set(v,e))}if(!le(e))return e;o||(o=[]);var u=Object.isExtensible(e);if(n||(n=new kt),u){var c=n.get(e);if(c)return c}else for(s||(s=new kt),c=s.iterator;c.next();){var p=c.key;if(c.value===e&&(p=n.get(p)))return p}if(Array.isArray(e)){l(e,c=[]);for(var m=0;m<e.length;m++)c.push(dl(t,e[m],!1,n,s,o))}else if(e instanceof z||e instanceof Mt||e instanceof q||e instanceof Gt||e instanceof f)c=e.copy(),l(e,c);else{if(e instanceof Wt||e instanceof rt||e instanceof ut)return e;if(e instanceof dt)c=(new dt).addAll(dl(t,e.Fa(),!1,n,s,o)),l(e,c);else if(e instanceof ht)c=(new ht).addAll(dl(t,e.Fa(),!1,n,s,o)),l(e,c);else if(e instanceof kt)c=(new kt).addAll(dl(t,e.Fa(),!1,n,s,o)),l(e,c);else if(e instanceof Date)c=new Date(e.getTime()),l(e,c);else if(e instanceof RegExp)c=new RegExp(e),l(e,c),c.lastIndex=e.lastIndex;else if("function"==typeof e.copy)c=e.copy(),l(e,c);else for(m in l(e,c={}),e)"__gohashid"!==m&&(c[m]=dl(t,e[m],!1,n,s,o))}return i&&o.forEach(function(v){delete v.__gohashid}),c}function yv(t,e){le(e=e.modelData)&&(t.dm(e),t.modelData=e)}function vv(t,e){function i(s,o){if((o=o.part)&&s!==(o=o.data)){var l=n.get(s);null===l?((l=new ht).add(o),n.add(s,l)):l.add(o)}}var n=t.vh;null===n&&(n=new kt,e.changes.each(function(s){if(null!==s.diagram){var o=s.change;o===de?(s=s.object.panel)&&(o=s.data)&&i(o,s):(o===ze||o===Ue)&&(o=(s=s.object).itemArray)&&i(o,s)}}),t.vh=n)}function xv(t,e){for(var i=new ht,n=0;n<t.nodeDataArray.length;n++){var s=t.nodeDataArray[n];Wc(t,e,s,s,i)}return i}function Wc(t,e,i,n,s){if(Array.isArray(i))for(var o=0;o<i.length;o++){var l=i[o];if(l===e)return s.add(n),!0;if(Wc(t,e,l,n,s))return!0}else if(le(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if((l=i[o])===e)return s.add(n),!0;if(Wc(t,e,l,n,s))return!0}return!1}function $o(t,e,i){void 0===i&&(i=!1);var n=e.length;if(0>=n)return"[]";var s=new un;s.add("["),i&&1<n&&s.add("\n");for(var o=0;o<n;o++){var l=e[o];void 0!==l&&(0<o&&(s.add(","),i&&s.add("\n")),s.add(t.sm(l)))}return i&&1<n&&s.add("\n"),s.add("]"),s.toString()}function wv(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function Ai(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Rp(t,e){var i=e;if(i instanceof z)e={class:"go.Point",x:Ai(i.x),y:Ai(i.y)};else if(i instanceof Mt)e={class:"go.Size",width:Ai(i.width),height:Ai(i.height)};else if(i instanceof q)e={class:"go.Rect",x:Ai(i.x),y:Ai(i.y),width:Ai(i.width),height:Ai(i.height)};else if(i instanceof Gt)e={class:"go.Margin",top:Ai(i.top),right:Ai(i.right),bottom:Ai(i.bottom),left:Ai(i.left)};else if(i instanceof f)e=i.sb()?{class:"go.Spot",x:Ai(i.x),y:Ai(i.y),offsetX:Ai(i.offsetX),offsetY:Ai(i.offsetY)}:{class:"go.Spot",enum:i.toString()};else if(i instanceof Wt){if(e={class:"go.Brush",type:i.type.name},i.type===wo?e.color=i.color:(i.type===Zs||i.type===yn)&&(e.start=i.start,e.end=i.end,i.type===yn&&(0!==i.startRadius&&(e.startRadius=Ai(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=Ai(i.endRadius)))),null!==i.colorStops){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof rt?(e={class:"go.Geometry",type:i.type.name},0!==i.startX&&(e.startX=Ai(i.startX)),0!==i.startY&&(e.startY=Ai(i.startY)),0!==i.endX&&(e.endX=Ai(i.endX)),0!==i.endY&&(e.endY=Ai(i.endY)),i.spot1.D(y)||(e.spot1=i.spot1),i.spot2.D(D)||(e.spot2=i.spot2),i.type===rt.o&&(e.path=rt.ia(i))):i instanceof ut&&(e={class:"go.EnumValue",classType:Eh(t,i.classType),name:i.name});for(var s in n="{",i=!0,e){var o=ke(e,s);if(!wv(s,o))if(i?i=!1:n+=",",n+=t.quote(s)+":","points"===s&&o instanceof dt){var l="[";for(o=o.iterator;o.next();){var u=o.value;1<l.length&&(l+=","),l+=t.sm(u.x),l+=",",l+=t.sm(u.y)}n+=l+="]"}else n+=t.sm(o)}return n+"}"}function Pi(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Ie(t,e,i,n,s,o,l,u,c){void 0===u&&(u=null),void 0===c&&(c=null);var p=new ge;p.model=t,p.change=i,p.modelChange=e,p.propertyName=n,p.object=s,p.oldValue=o,p.oldParam=u,p.newValue=l,p.newParam=c,t.ds(p)}function Qo(t){return"number"==typeof t||"string"==typeof t}function bv(t,e,i){var n=t.wa(e);(void 0===n||t.kb.I(n)!==e)&&(t.av(e),void 0===(n=t.wa(e))&&Q("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(n,e),n=null,i&&Un(t.Tc,n=t.Tc.length,e),Ie(t,"nodeDataArray",ze,"nodeDataArray",t,null,e,null,n),t.fm(e),t.em(e))}function Sv(t,e,i){var n=t.wa(e);if(void 0!==n&&t.kb.remove(n),n=null,i){t:if(i=t.Tc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var s=0;s<n;s++)if(i[s]===e){n=s;break t}n=-1}if(0>n)return;Yo(t.Tc,n)}Ie(t,"nodeDataArray",Ue,"nodeDataArray",t,e,null,n,null),t.qp(e)}function is(t,e,i){if(void 0!==e){var n=t.Vf.I(e);null===n&&(n=new ht,t.Vf.add(e,n)),n.add(i)}}function ns(t,e,i){if(void 0!==e){var n=t.Vf.I(e);n instanceof ht&&(null==i?t.Vf.remove(e):(n.remove(i),0===n.count&&t.Vf.remove(e)))}}function Oh(t,e){return void 0===e?null:(t=t.Vf.I(e))instanceof ht?t:null}function Uc(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var s=Uc(t,e[i],t.copiesArrayObjects);n.push(s)}return Ye(n),n}if(i&&le(e)){for(n in i=(i=e.constructor)?new i:{},s=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===n)i.__gohashid=void 0;else if(n===s)i[s]=void 0;else{var o=ke(e,n),l=Eh(t,o);"GraphObject"===l||"Diagram"===l||"Layer"===l||"RowColumnDefinition"===l||"AnimationManager"===l||"Tool"===l||"CommandHandler"===l||"Layout"===l||"InputEvent"===l||"DiagramEvent"===l||o instanceof mt||o instanceof we||o instanceof qe||o instanceof ge||(o=Uc(t,o,!1)),se(i,n,o)}return Ye(i),i}return e instanceof z||e instanceof Mt||e instanceof q||e instanceof f||e instanceof Gt?e.copy():e}function Yp(){return new mt}function Eh(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Eh(t,e.constructor);return typeof e}function Xp(t){return Xn[t]?Xn[t]:void 0!==St.go&&St.go[t]?St.go[t]:null}function ke(t,e){if(!t||!e)return null;try{if("function"==typeof e)var i=e(t);else"function"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch{}return i}function se(t,e,i){if(t&&e)try{"function"==typeof e?e(t,i):"function"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch{}}Ut.className="PartManager",Vt(Ke,Ut),Ke.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),pv(this,t.linkDataArray)},Ke.prototype.addModeledParts=function(t){for(Ut.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)al(t.value);zu(this.diagram,!1)},Ke.prototype.removeAllModeledParts=function(){var t=this.diagram.model;mv(this,t.linkDataArray),this.Gs(t.nodeDataArray)},Ke.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ps(t)},Ke.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.lp(t,e)},Ke.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.xv(t.data,i.wa(null!==e?e.data:null))},Ke.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Cv(t.data,i.wa(null!==e?e.data:null))},Ke.prototype.removeDataForLink=function(t){this.diagram.model.bm(t.data)},Ke.prototype.findPartForKey=function(t){var e=Ut.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.jh(t))?this.bf.I(t):e},Ke.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.jh(t))?this.bf.I(t):null},Ke.prototype.doModelChanged=function(t){var e=this;if(Ut.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.aa){i.aa=!1;try{var s=t.modelChange;if(""!==s){if(n===de){if("linkFromKey"===s){var o=this.Kc(t.object);if(null!==o){var l=this.Wb(t.newValue);o.fromNode=l}}else if("linkToKey"===s){var u=this.Kc(t.object);if(null!==u){var c=this.Wb(t.newValue);u.toNode=c}}else if("linkFromPortId"===s){var p=this.Kc(t.object);if(null!==p){var m=t.newValue;"string"==typeof m&&(p.fromPortId=m)}}else if("linkToPortId"===s){var v=this.Kc(t.object);if(null!==v){var w=t.newValue;"string"==typeof w&&(v.toPortId=w)}}else if("nodeGroupKey"===s){var k=this.Lc(t.object);if(null!==k){var A=t.newValue;if(void 0!==A){var T=this.Wb(A);k.containingGroup=T instanceof At?T:null}else k.containingGroup=null}}else if("linkLabelKeys"===s){var j=this.Kc(t.object);if(null!==j){var I=t.oldValue,B=t.newValue;Array.isArray(I)&&I.forEach(function(tt){0<=B.indexOf(tt)||null!==(tt=e.Wb(tt))&&(tt.labeledLink=null)}),Array.isArray(B)&&B.forEach(function(tt){null!==(tt=e.Wb(tt))&&(tt.labeledLink=j)})}}else if("linkCategory"===s){var R=this.Kc(t.object),H=t.newValue;null!==R&&"string"==typeof H&&(R.category=H)}else"linkDataArray"===s&&(mv(this,t.oldValue),pv(this,t.newValue));i.isModified=!0}else if(n===ze){var K=t.newValue;if("linkDataArray"===s&&"object"==typeof K&&null!==K)gv(this,K);else if("linkLabelKeys"===s&&Qo(K)){var J=this.Kc(t.object),lt=this.Wb(K);null!==J&&null!==lt&&(lt.labeledLink=J)}i.isModified=!0}else if(n===Ue){var gt=t.oldValue;if("linkDataArray"===s&&"object"==typeof gt&&null!==gt)this.ip(gt);else if("linkLabelKeys"===s&&Qo(gt)){var ft=this.Wb(gt);null!==ft&&(ft.labeledLink=null)}i.isModified=!0}}else if(n===de){var ot=t.propertyName;t.object!==i.model||"linkFromKeyProperty"!==ot&&"linkToKeyProperty"!==ot&&"linkFromPortIdProperty"!==ot&&"linkToPortIdProperty"!==ot&&"linkLabelKeysProperty"!==ot&&"nodeIsGroupProperty"!==ot&&"nodeGroupKeyProperty"!==ot&&"linkCategoryProperty"!==ot||i.undoManager.isUndoingRedoing||this.Wd(),i.isModified=!0}}finally{i.aa=!0}}}}},Ke.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new ht,n=e.linkDataArray;n.forEach(function(o){i.add(o)});var s=[];this.links.each(function(o){null===o.data||i.contains(o.data)||s.push(o.data)}),s.forEach(function(o){Lv(e,o,!1)}),n.forEach(function(o){null===t.Kc(o)&&Pv(e,o,!1)})},Ke.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;if(t instanceof st){var s=an(n,e,!0);if(s=i.Wb(s),t.fromNode=s,s=an(n,e,!1),s=i.Wb(s),t.toNode=s,0<(e=n.Ef(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){s=e[0];var o=t.labelNodes.first();if(n.wa(o.data)===s)return}s=(new ht).addAll(e);var l=new ht;t.labelNodes.each(function(u){null!==u.data&&void 0!==(u=n.wa(u.data))&&l.add(u)}),(e=l.copy()).hp(s),(s=s.copy()).hp(l),(0<e.count||0<s.count)&&(e.each(function(u){null!==(u=i.Wb(u))&&u.labeledLink===t&&(u.labeledLink=null)}),s.each(function(u){null!==(u=i.Wb(u))&&u.labeledLink!==t&&(u.labeledLink=t)}))}}else!(t instanceof Bt)&&(e=n.lh(e),null===(e=i.findPartForKey(e))||e instanceof At)&&(t.containingGroup=e)}}},Ke.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(void 0!==i){var n=Oh(e,i),s=this.Lc(t);if(null!==n&&null!==s){n=n.iterator;for(var o={};n.next();){var l=n.value;e.lb(l)?s instanceof At&&e.lh(l)===i&&null!==(l=this.Lc(l))&&(l.containingGroup=s):(o.link=this.Kc(l),null!==o.link&&s instanceof ct&&(an(e,l,!0)===i&&(o.link.fromNode=s),an(e,l,!1)===i&&(o.link.toNode=s),l=e.Ef(l),Array.isArray(l)&&l.some(function(u){return function(c){return c===i&&(s.labeledLink=u.link,!0)}}(o)))),o={link:o.link}}ns(e,i)}void 0!==(t=e.lh(t))&&(t=this.Wb(t))instanceof At&&(s.containingGroup=t)}},Ke.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof ct){var i=e.wa(t.data);if(void 0!==i){for(var n=t.linksConnected;n.next();)is(e,i,n.value.data);if(t.isLinkLabel&&null!==(n=t.labeledLink)&&is(e,i,n.data),t instanceof At)for(t=t.memberParts;t.next();)e.lb(n=t.value.data)&&is(e,i,n)}}},Ke.prototype.copyPartData=function(t,e){var i=Ut.prototype.copyPartData.call(this,t,e);if(t instanceof st)if(null!==(t=t.data)&&null!==e){var n=e.model;"object"==typeof(t=n.Jo(t))&&null!==t&&(n.fi(t),i=e.Kc(t))}else null!==i&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.Jo(t))&&null!==e&&(i.data=e));return i},Ke.prototype.insertLink=function(t,e,i,n){var s=this.diagram,o=s.model,l=s.toolManager.findTool("Linking"),u="";if(null!==t&&(null===e&&(e=t),null===(u=e.portId)&&(u="")),e="",null!==i&&(null===n&&(n=i),null===(e=n.portId)&&(e="")),(n=l.archetypeLinkData)instanceof st){if(An(n),null!==(o=n.copy()))return o.fromNode=t,o.fromPortId=u,o.toNode=i,o.toPortId=e,s.add(o),(t=l.archetypeLabelNodeData)instanceof ct&&(An(t),null!==(t=t.copy())&&(t.labeledLink=o,s.add(t))),o}else if(null!==n&&"object"==typeof(n=o.Jo(n))&&null!==n)return null!==t&&fl(o,n,o.wa(t.data),!0),pl(o,n,u,!0),null!==i&&fl(o,n,o.wa(i.data),!1),pl(o,n,e,!1),o.fi(n),null===(t=l.archetypeLabelNodeData)||t instanceof ct||"object"==typeof(t=o.copyNodeData(t))&&null!==t&&(o.xf(t),void 0!==(t=o.wa(t))&&o.Bu(n,t)),s.Kc(n);return null},Ke.prototype.findLinkForKey=Ke.prototype.findLinkForKey,Ke.prototype.findPartForKey=Ke.prototype.findPartForKey,Ke.prototype.removeAllModeledParts=Ke.prototype.removeAllModeledParts,Ke.prototype.addModeledParts=Ke.prototype.addModeledParts,Ke.prototype.addAllModeledParts=Ke.prototype.addAllModeledParts,Ke.className="GraphLinksPartManager",Vt(xn,Ut),xn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ss(t)},xn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ms(t,e)},xn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)n.qe(t.data,n.wa(e));else{var s=this.Sg;this.Sg=t,null!==i&&n.qe(i.data,void 0),n.qe(e,n.wa(null!==t.toNode?t.toNode.data:null)),this.Sg=s}},xn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var s=this.Sg;this.Sg=t,null!==i&&n.qe(i.data,void 0),n.qe(e,n.wa(null!==t.fromNode?t.fromNode.data:null)),this.Sg=s}else n.qe(t.data,n.wa(e))},xn.prototype.removeDataForLink=function(t){this.diagram.model.qe(t.data,void 0)},xn.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.ic(t))?this.bf.I(t):null},xn.prototype.doModelChanged=function(t){if(Ut.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.aa){e.aa=!1;try{var n=t.modelChange;if(""!==n){if(i===de){if("nodeParentKey"===n){var s=t.object,o=this.Wb(t.newValue),l=this.ii(s);if(null!==this.Sg)null!==o&&(this.Sg.data=s,this.Sg.category=this.getLinkCategoryForData(s));else if(null!==l){var u=l.kh();null!==u?null===o?e.remove(u):e.isTreePathToChildren?u.fromNode=o:u.toNode=o:Gc(this,o,l)}}else if("parentLinkCategory"===n){var c=this.ii(t.object),p=t.newValue;if(null!==c&&"string"==typeof p){var m=c.kh();null!==m&&(m.category=p)}}e.isModified=!0}}else i===de&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Wd()),e.isModified=!0)}finally{e.aa=!0}}}}},xn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;t instanceof ct&&(e=n.mh(e),(e=i.Wb(e))!==(n=t.pg())&&(n=t.kh(),null!==e?null!==n?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:Gc(this,e,t):null!==n&&uf(i,n,!1)))}}},xn.prototype.updateDataBindings=function(t,e){Ut.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.Lc(t)&&null!==(t=this.Kc(t))&&t.La(e)},xn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(void 0!==i){var n=Oh(e,i),s=this.Lc(t);if(null!==n&&null!==s){for(n=n.iterator;n.next();){var o=n.value;e.lb(o)&&s instanceof ct&&e.mh(o)===i&&Gc(this,s,this.ii(o))}ns(e,i)}void 0!==(t=e.mh(t))&&s instanceof ct&&Gc(this,t=this.Wb(t),s)}},xn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof ct){var i=e.wa(t.data),n=this.Kc(t.data);if(null!==n){n.isSelected=!1,n.isHighlighted=!1;var s=n.layer;if(null!==s){var o=s.qc(-1,n,!1);0<=o&&this.diagram.cb(Ue,"parts",s,n,null,o,null),null!==(o=n.layerChanged)&&o(n,s,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)s=t.value,e.lb(s=(n?s.toNode:s.fromNode).data)&&is(e,i,s)}},xn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,s=i;return this.diagram.isTreePathToChildren||(n=i,s=t),null!==n&&null!==s?(e.qe(s.data,e.wa(n.data)),s.kh()):null},xn.prototype.findLinkForKey=xn.prototype.findLinkForKey,xn.className="TreePartManager",mt.prototype.cloneProtected=function(t){t.xa=this.xa,t.Sm=this.Sm,t.Gg=this.Gg,t.Th=this.Th,t.al=this.al,t.Ak=this.Ak,t.Km=this.Km,t.Jm=this.Jm,t.Mm=this.Mm,t.xm=this.xm,t.lj=this.lj},mt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},mt.prototype.clear=function(){this.Tc=[],this.kb.clear(),this.Vf.clear(),this.undoManager.clear()},mt.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.np();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var s=t[n];e+=" "+this.wa(s)+":"+Vi(s)}}return e},mt.prototype.yA=function(t){t.change!==$n&&Q("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof qe?(vv(this,e),t=this.Rv(e,"FinishedUndo"===t.propertyName),this.vh=null,t):null},mt.prototype.Rv=function(t,e){var i=this,n=!1,s=new ht,o=new ht,l=new ht,u=this.vh;t.changes.each(function(v){v.model===i&&("nodeDataArray"===v.modelChange?v.change===ze?s.add(v.newValue):v.change===Ue&&l.add(v.oldValue):i.lb(v.object)?o.add(v.object):v.change!==de||i.modelData!==v.object&&"modelData"!==v.propertyName?null!==v.object&&(u&&u.contains(v.object)?u.get(v.object).each(function(w){i.lb(w)&&o.add(w)}):v.object instanceof mt||i.ri()&&i.Jc(v.object)||xv(i,v.object).each(function(w){o.add(w)})):n=!0)});var c=this.hl;c.clear(),s.each(function(v){c.add(i.wa(v)),e||o.add(v)});var p=this.jl;p.clear(),l.each(function(v){p.add(i.wa(v)),e&&o.add(v)}),t=i.cloneDeep(o.Fa());var m=null;return n&&(null===m&&(m={}),m.modelData=this.cloneDeep(this.modelData)),0<c.count&&(null===m&&(m={}),e?m.removedNodeKeys=c.Fa():m.insertedNodeKeys=c.Fa()),0<t.length&&(null===m&&(m={}),m.modifiedNodeData=t),0<p.count&&(null===m&&(m={}),e?m.insertedNodeKeys=p.Fa():m.removedNodeKeys=p.Fa()),p.clear(),c.clear(),m},mt.prototype.cloneDeep=function(t){return dl(this,t,!0)},(L=mt.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},L.rm=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},L.gp=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},L.Sv=function(){var i,t=this.modelData,e=!1;for(i in t)if(!wv(i,t[i])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+Rp(this,this.modelData)),t+',\n  "nodeDataArray": '+$o(this,this.nodeDataArray,!0)},L.lv=function(t){yv(this,t),Ge(t=t.nodeDataArray)&&(this.dm(t),this.nodeDataArray=t)},L.Qv=function(t,e){var i=this,n=!1,s=new ht,o=new ht,l=new ht,u=this.vh;t.changes.each(function(m){m.model===i&&("nodeDataArray"===m.modelChange?m.change===ze?s.add(m.newValue):m.change===Ue&&l.add(m.oldValue):i.lb(m.object)?o.add(m.object):m.change!==de||i.modelData!==m.object&&"modelData"!==m.propertyName?null!==m.object&&(u&&u.contains(m.object)?u.get(m.object).each(function(v){i.lb(v)&&o.add(v)}):m.object instanceof mt||i.ri()&&i.Jc(m.object)||xv(i,m.object).each(function(v){o.add(v)})):n=!0)});var c=this.hl;c.clear(),s.each(function(m){c.add(i.wa(m)),e||o.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(i.wa(m)),e&&o.add(m)}),t="",n&&(t+=',\n  "modelData": '+Rp(this,this.modelData)),0<c.count&&(t+=(e?this.Zv:this.Xv)+$o(this,c.Fa(),!0)),0<o.count&&(t+=this.ky+$o(this,o.Fa(),!0)),0<p.count&&(t+=(e?this.Xv:this.Zv)+$o(this,p.Fa(),!0)),p.clear(),c.clear(),t},L.fp=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&Q("applyIncrementalJson cannot change Model properties"),yv(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new kt;if(Array.isArray(i))for(var s=0;s<i.length;s++){var o=i[s],l=this.wa(o);null!=l&&n.set(l,o)}if(Array.isArray(e))for(s=e.length,o=0;o<s;o++){var u=this.ic(l=e[o]);null===u&&(u=(u=n.get(l))?u:this.copyNodeData({}),this.km(u,l),this.xf(u))}if(Array.isArray(i))for(e=i.length,n=0;n<e;n++)if(o=this.wa(s=i[n]),null!==(o=this.ic(o))){for(var c in s)"__gohashid"===c||c===this.nodeKeyProperty||this.Vj()&&c===this.nodeIsGroupProperty||this.setDataProperty(o,c,s[c]);this.lm(s,o)}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,c=0;c<i;c++)null!==(e=this.ic(t[c]))&&this.cm(e)},L.ay=function(t,e){t.change!==$n&&Q("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof qe?(void 0===e&&(e=Eh(this,this)),vv(this,i),t=this.Qv(i,"FinishedUndo"===t.propertyName),this.vh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.rm()+t+"}"):'{ "incremental": 0 }'},L.zA=function(t,e){return this.ay(t,e)},L.np=function(t){return void 0===t&&(t=Eh(this,this)),'{ "class": '+this.quote(t)+this.rm()+this.Sv()+"}"},L.toJSON=function(t){return this.np(t)},L.$w=function(t){var e=null;if("string"==typeof t)try{e=St.JSON.parse(t)}catch{}else"object"==typeof t?e=t:Q("Unable to modify a Model from: "+t);var i=e.incremental;"number"!=typeof i&&Q("Unable to apply non-incremental changes to Model: "+t),0!==i&&(this.Ea("applyIncrementalJson"),this.fp(e),this.eb("applyIncrementalJson"))},L.Ly=function(t){return this.$w(t)},mt.constructGraphLinksModel=function(){return new mt},(L=mt.prototype).dm=function(t){if(Ge(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(le(n)){var s=i;n=this.dm(n),Array.isArray(t)?t[s]=n:Q("Cannot replace an object in an HTMLCollection or NodeList at "+s)}}else if(le(t)){for(e in t)if(le(i=t[e])&&(i=this.dm(i),t[e]=i,"points"===e&&Array.isArray(i))){for(s=i.length%2==0,n=0;n<i.length;n++)if("number"!=typeof i[n]){s=!1;break}if(s){for(s=new dt,n=0;n<i.length/2;n++)s.add(new z(i[2*n],i[2*n+1]));s.freeze(),t[e]=s}}return function ix(t){if("object"!=typeof t)return t;var e=t.class||"";if("string"!=typeof e||!e)return t;if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var i=t;if("Point"===(e=e.substr(3)))i=new z(Pi(t.x),Pi(t.y));else if("Size"===e)i=new Mt(Pi(t.width),Pi(t.height));else if("Rect"===e)i=new q(Pi(t.x),Pi(t.y),Pi(t.width),Pi(t.height));else if("Margin"===e)i=new Gt(Pi(t.top),Pi(t.right),Pi(t.bottom),Pi(t.left));else if("Spot"===e)i="string"==typeof t.enum?zi(t.enum):new f(Pi(t.x),Pi(t.y),Pi(t.offsetX),Pi(t.offsetY));else if("Brush"===e){if((i=new Wt).type=Kn(Wt,t.type),"string"==typeof t.color&&(i.color=t.color),t.start instanceof f&&(i.start=t.start),t.end instanceof f&&(i.end=t.end),"number"==typeof t.startRadius&&(i.startRadius=Pi(t.startRadius)),"number"==typeof t.endRadius&&(i.endRadius=Pi(t.endRadius)),le(t=t.colorStops))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else"Geometry"===e?(i=null,(i="string"==typeof t.path?rt.parse(t.path):new rt).type=Kn(rt,t.type),"number"==typeof t.startX&&(i.startX=Pi(t.startX)),"number"==typeof t.startY&&(i.startY=Pi(t.startY)),"number"==typeof t.endX&&(i.endX=Pi(t.endX)),"number"==typeof t.endY&&(i.endY=Pi(t.endY)),t.spot1 instanceof f&&(i.spot1=t.spot1),t.spot2 instanceof f&&(i.spot2=t.spot2)):"EnumValue"===e&&(0===(n=t.classType).indexOf("go.")&&(n=n.substr(3)),"function"==typeof(n=Xp(n))&&(i=Kn(n,t.name)));return i}(t)}return t},L.sm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.sm(t.valueOf()):Ge(t)?$o(this,t):le(t)?Rp(this,t):"function"==typeof t?"null":t.toString()},L.Pe=function(t){return this.Lt.add(t),this},L.hk=function(t){this.Lt.remove(t)},L.ds=function(t){this.skipsUndoManager||this.undoManager.Uu(t);for(var e=this.Lt,i=e.length,n=0;n<i;n++)e.M(n)(t)},L.cb=function(t,e,i,n,s,o,l){Ie(this,"",t,e,i,n,s,o,l)},L.g=function(t,e,i,n,s){Ie(this,"",de,t,this,e,i,n,s)},L.Fs=function(t,e,i,n,s,o){Ie(this,"",de,e,t,i,n,s,o)},mt.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===de){var i=t.object,n=t.propertyName,s=t.I(e);n===this.nodeKeyProperty&&this.lb(i)&&(void 0!==(e=t.I(!e))&&this.kb.remove(e),void 0!==s&&this.kb.add(s,i)),se(i,n,s)}else t.change===ze?(i=t.newParam,"nodeDataArray"===t.modelChange?le(t=t.newValue)&&"number"==typeof i&&(n=this.wa(t),e?(this.Tc[i]===t&&Yo(this.Tc,i),void 0!==n&&this.kb.remove(n)):(this.Tc[i]!==t&&Un(this.Tc,i,t),void 0!==n&&this.kb.add(n,t))):""===t.modelChange?((n=t.object)&&!Ge(n)&&t.propertyName&&(n=ke(t.object,t.propertyName)),Ge(n)&&"number"==typeof i&&(t=t.newValue,e?Yo(n,i):Un(n,i,t))):Q("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Ue?(i=t.oldParam,"nodeDataArray"===t.modelChange?le(t=t.oldValue)&&"number"==typeof i&&(n=this.wa(t),e?(this.Tc[i]!==t&&Un(this.Tc,i,t),void 0!==n&&this.kb.add(n,t)):(this.Tc[i]===t&&Yo(this.Tc,i),void 0!==n&&this.kb.remove(n))):""===t.modelChange?((n=t.object)&&!Ge(n)&&t.propertyName&&(n=ke(t.object,t.propertyName)),Ge(n)&&"number"==typeof i&&(t=t.oldValue,e?Un(n,i,t):Yo(n,i))):Q("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==$n&&Q("unknown ChangedEvent: "+t.toString())},mt.prototype.Ea=function(t){return this.undoManager.Ea(t)},mt.prototype.eb=function(t){return this.undoManager.eb(t)},mt.prototype.Kf=function(){return this.undoManager.Kf()},mt.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},(L=mt.prototype).La=function(t,e){void 0===e&&(e=""),Ie(this,"SourceChanged",$n,e,t,null,null)},L.wa=function(t){if(null!==t){var e=this.Th;if(""!==e&&void 0!==(e=ke(t,e))){if(Qo(e))return e;Q("Key value for node data "+t+" is not a number or a string: "+e)}}},L.km=function(t,e){if(null!==t){var i=this.Th;if(""!==i)if(this.lb(t)){var n=ke(t,i);n!==e&&null===this.ic(e)&&(se(t,i,e),void 0!==n&&this.kb.remove(n),this.kb.add(e,t),Ie(this,"nodeKey",de,i,t,n,e),"string"==typeof i&&this.La(t,i),this.jp(n,e))}else se(t,i,e)}},L.lb=function(t){var e=this.wa(t);return void 0!==e&&this.kb.I(e)===t},L.ic=function(t){return null===t&&Q("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Qo(t)?this.kb.I(t):null},L.av=function(t){if(null!==t){var e=this.Th;if(""!==e){var i=this.wa(t);if(void 0===i||this.kb.contains(i)){var n=this.al;if(null!==n&&null!=(i=n(this,t))&&!this.kb.contains(i))return void se(t,e,i);if("string"==typeof i){for(n=2;this.kb.contains(i+n);)n++;se(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.kb.count-1;this.kb.contains(i);)i--;se(t,e,i)}}}}},L.xf=function(t){null!==t&&(Vs(t),this.lb(t)||bv(this,t,!0))},L.Gy=function(t){if(Ge(t))for(var e=t.length,i=0;i<e;i++)this.xf(t[i]);else for(t=t.iterator;t.next();)this.xf(t.value)},L.cm=function(t){null!==t&&Sv(this,t,!0)},L.oA=function(t){if(Ge(t))for(var e=t.length,i=0;i<e;i++)this.cm(t[i]);else for(t=t.iterator;t.next();)this.cm(t.value)},L.aA=function(t){if(t!==this.nodeDataArray&&Ge(t)){var e=this.jl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,s=0;s<n;s++){var o=t[s],l=this.wa(o);if(void 0!==l){i.add(l);var u=this.ic(l);u!==o&&(null!==u?(this.Do(u,o),this.lm(o,u)):(o=this.cloneDeep(o),this.km(o,l),this.xf(o)))}else l=this.cloneDeep(o),this.xf(l),i.add(this.wa(l))}for(t=e.iterator;t.next();)i.contains(n=t.value)||(n=this.ic(n))&&this.cm(n);e.clear(),i.clear()}},L.jp=function(t,e){void 0!==e&&(t=Oh(this,t))instanceof ht&&this.Vf.add(e,t)},L.Mv=function(){},L.fm=function(){},L.em=function(){},L.qp=function(){},L.Ry=function(t){void 0===t?this.Vf.clear():this.Vf.remove(t)},mt.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Ak;return le(t=null!==e?e(t,this):Uc(this,t,!0))&&Ye(t),t},mt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i)}else!kv&&t instanceof yt&&(kv=!0,Fi('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Fi("  Is that really your intent?"));var n=ke(t,e);n!==i&&(se(t,e,i),this.Fs(t,e,n,i))},(L=mt.prototype).set=function(t,e,i){this.setDataProperty(t,e,i)},L.Do=function(t,e){if(e){var n,i=this.lb(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},L.By=function(t,e){this.ts(t,-1,e)},L.ts=function(t,e,i){0>e&&(e=t.length),Un(t,e,i),Ie(this,"",ze,"",t,null,i,null,e)},L.pv=function(t,e){void 0===e&&(e=-1),t===this.Tc&&Q("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var i=t[e];Yo(t,e),Ie(this,"",Ue,"",t,i,null,e,null)},L.Ro=function(t){if(null===t)return"";var e=this.lj;return""===e||void 0===(e=ke(t,e))?"":"string"==typeof e?e:void Q("getCategoryForNodeData found a non-string category for "+t+": "+e)},L.jm=function(t,e){if(null!==t){var i=this.lj;if(""!==i)if(this.lb(t)){var n=ke(t,i);void 0===n&&(n=""),n!==e&&(se(t,i,e),Ie(this,"nodeCategory",de,i,t,n,e))}else se(t,i,e)}},L.lm=function(t,e){this.jm(e,this.Ro(t))},L.Tl=function(){return!1},L.Vj=function(){return!1},L.ri=function(){return!1},L.xs=function(){return!1},L.Wj=function(){return!1},Tt.Object.defineProperties(mt.prototype,{name:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(this.xa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.La(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(null!==e&&e.Sx(this),this.o=t,null!==t&&t.Yw(this))}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t}},nodeKeyProperty:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(""===t&&Q("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&Q("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Th=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.al},set:function(t){var e=this.al;e!==t&&(this.al=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Tc},set:function(t){var e=this.Tc;if(e!==t){this.kb.clear(),this.Mv();for(var i=t.length,n=0;n<i;n++){var s=t[n];le(s)||Q("Model.nodeDataArray must only contain Objects, not: "+s),Vs(s)}for(this.Tc=t,n=new dt,s=0;s<i;s++){var o=t[s],l=this.wa(o);void 0===l||null!==this.kb.I(l)?n.add(o):this.kb.add(l,o)}for(n=n.iterator;n.next();)this.av(s=n.value),void 0!==(o=this.wa(s))&&this.kb.add(o,s);for(Ie(this,"nodeDataArray",de,"nodeDataArray",this,e,t),e=0;e<i;e++)this.fm(n=t[e]),this.em(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(this.Ak=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Km},set:function(t){var e=this.Km;e!==t&&(this.Km=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Jm},set:function(t){var e=this.Jm;e!==t&&(this.Jm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Mm},set:function(t){var e=this.Mm;e!==t&&(this.Mm=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),mt.prototype.setCategoryForNodeData=mt.prototype.jm,mt.prototype.getCategoryForNodeData=mt.prototype.Ro,mt.prototype.removeArrayItem=mt.prototype.pv,mt.prototype.insertArrayItem=mt.prototype.ts,mt.prototype.addArrayItem=mt.prototype.By,mt.prototype.assignAllDataProperties=mt.prototype.Do,mt.prototype.set=mt.prototype.set,mt.prototype.clearUnresolvedReferences=mt.prototype.Ry,mt.prototype.mergeNodeDataArray=mt.prototype.aA,mt.prototype.removeNodeDataCollection=mt.prototype.oA,mt.prototype.removeNodeData=mt.prototype.cm,mt.prototype.addNodeDataCollection=mt.prototype.Gy,mt.prototype.addNodeData=mt.prototype.xf,mt.prototype.makeNodeDataKeyUnique=mt.prototype.av,mt.prototype.findNodeDataForKey=mt.prototype.ic,mt.prototype.containsNodeData=mt.prototype.lb,mt.prototype.setKeyForNodeData=mt.prototype.km,mt.prototype.getKeyForNodeData=mt.prototype.wa,mt.prototype.updateTargetBindings=mt.prototype.La,mt.prototype.commit=mt.prototype.commit,mt.prototype.rollbackTransaction=mt.prototype.Kf,mt.prototype.commitTransaction=mt.prototype.eb,mt.prototype.startTransaction=mt.prototype.Ea,mt.prototype.raiseDataChanged=mt.prototype.Fs,mt.prototype.raiseChanged=mt.prototype.g,mt.prototype.raiseChangedEvent=mt.prototype.cb,mt.prototype.removeChangedListener=mt.prototype.hk,mt.prototype.addChangedListener=mt.prototype.Pe,mt.prototype.writeJsonValue=mt.prototype.sm,mt.prototype.replaceJsonObjects=mt.prototype.dm,mt.prototype.applyIncrementalJSON=mt.prototype.Ly,mt.prototype.applyIncrementalJson=mt.prototype.$w,mt.prototype.toJSON=mt.prototype.toJSON,mt.prototype.toJson=mt.prototype.np,mt.prototype.toIncrementalJSON=mt.prototype.zA,mt.prototype.toIncrementalJson=mt.prototype.ay,mt.prototype.toIncrementalData=mt.prototype.yA,mt.prototype.clear=mt.prototype.clear;var kv=!1,Xn={};function Ae(t,e,i,n){Ye(this),this._isFrozen=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===i&&(i=null),this.j=-1,this.xd=null,this.xl=t,this.wl=this.to=0,this.Cr=null,this.wn=!1,this.sl=e,this.Im=i,void 0===n?(this.dl=Cv,this.vk=null):(this.dl=jh,this.vk=n),this.st=new ht}function Mv(t,e,i){return null===(t=t.sourceName)||""===t?e:"/"===t?i.part:"."===t?i:".."===t?i.panel:e.fb(t)}mt.className="Model",mt.fromJSON=mt.fromJson=function(t,e){void 0===e&&(e=null);var i=null;if("string"==typeof t)try{i=St.JSON.parse(t)}catch{}else"object"==typeof t?i=t:Q("Unable to construct a Model from: "+t);if(null===e){t=null;var n=i.class;if("string"==typeof n)try{var s=null;0===n.indexOf("go.")?s=Xp(n=n.substr(3)):null===(s=Xp(n))&&(s=St[n]),"function"==typeof s&&(t=new s)}catch{}null===t||t instanceof mt?e=t:Q("Unable to construct a Model of declared class: "+i.class)}return null===e&&(e=mt.constructGraphLinksModel()),e.gp(i),e.lv(i),e},mt.safePropertyValue=ke,mt.safePropertySet=se,Xn.Brush=Wt,Xn.ChangedEvent=ge,Xn.Geometry=rt,Xn.Margin=Gt,Xn.Panel=nt,Xn.Point=z,Xn.Rect=q,Xn.Size=Mt,Xn.Spot=f,Xn.Transaction=qe,Xn.UndoManager=we,Ae.prototype.copy=function(){var t=new Ae;return t.xl=this.xl,t.to=this.to,t.wl=this.wl,t.Cr=this.Cr,t.wn=this.wn,t.sl=this.sl,t.Im=this.Im,t.dl=this.dl,t.vk=this.vk,t},(L=Ae.prototype).qb=function(t){t.classType===Ae&&(this.mode=t)},L.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.Ai?" "+this.Ai:"")+" "+this.mode.name+")"},L.freeze=function(){return this._isFrozen=!0,this},L.ka=function(){return this._isFrozen=!1,this},L.Lx=function(t){return void 0===t&&(t=null),this.mode=jh,this.backConverter=t,this},L.cp=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},L.eA=function(){return this.sourceName=null,this.isToModel=!0,this},L.Nv=function(t,e,i){var n=this.sl;if(void 0===i||""===n||n===i){i=this.xl;var s=this.Im;if(null===s&&""===i)Fi("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(""!==n&&(o=ke(e,n)),void 0!==o)if(null===s)""!==i&&se(t,i,o);else try{""!==i?se(t,i,s(o,t)):s(o,t)}catch{}}}},L.sp=function(t,e,i,n){if(this.dl===jh){var s=this.xl;if(void 0===i||s===i){i=this.sl;var o=this.vk,l=t;if(""!==s&&(l=ke(t,s)),void 0!==l&&!this.st.contains(t))try{this.st.add(t);var u=null!==n?n.diagram:null,c=null!==u?u.model:null;if(null===o){if(""!==i)null!==c?c.setDataProperty(e,i,l):se(e,i,l);else if(null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var p=n.itemIndex,m=n.panel.itemArray;c.pv(m,p),c.ts(m,p,l)}}else try{if(""!==i){var v=o(l,e,c);null!==c?c.setDataProperty(e,i,v):se(e,i,v)}else{var w=o(l,e,c);if(void 0!==w&&null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var k=n.itemIndex,A=n.panel.itemArray;c.pv(A,k),c.ts(A,k,w)}}}catch{}}finally{this.st.remove(t)}}}},Tt.Object.defineProperties(Ae.prototype,{Ai:{get:function(){return this.j},set:function(t){this._isFrozen&&Lt(this),this.j=t}},targetProperty:{get:function(){return this.xl},set:function(t){this._isFrozen&&Lt(this),this.xl=t}},sourceName:{get:function(){return this.Cr},set:function(t){this._isFrozen&&Lt(this),this.Cr=t,null!==t&&(this.wn=!1)}},isToModel:{get:function(){return this.wn},set:function(t){this._isFrozen&&Lt(this),this.wn=t}},sourceProperty:{get:function(){return this.sl},set:function(t){this._isFrozen&&Lt(this),this.sl=t}},converter:{get:function(){return this.Im},set:function(t){this._isFrozen&&Lt(this),this.Im=t}},backConverter:{get:function(){return this.vk},set:function(t){this._isFrozen&&Lt(this),this.vk=t}},mode:{get:function(){return this.dl},set:function(t){this._isFrozen&&Lt(this),this.dl=t}}}),Ae.prototype.updateSource=Ae.prototype.sp,Ae.prototype.updateTarget=Ae.prototype.Nv,Ae.prototype.ofModel=Ae.prototype.eA,Ae.prototype.ofObject=Ae.prototype.cp,Ae.prototype.makeTwoWay=Ae.prototype.Lx;var nx="Binding",Cv=new ut(Ae,"OneWay",1),jh=new ut(Ae,"TwoWay",2);function jt(t,e,i){mt.call(this),this.Wv=',\n  "insertedLinkKeys": ',this.jy=',\n  "modifiedLinkData": ',this.Yv=',\n  "removedLinkKeys": ',this.md=[],this.$f=new ht,this.xb=new kt,this.Jh="",this.Ri=this.zk=this.bl=null,this.lf="from",this.mf="to",this.fj=this.ej="",this.dj="category",this.je="",this.il="isGroup",this.Je="group",this.Lm=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(Ge(t)?this.nodeDataArray=t:i=t),i&&(Object.assign(this,i),t=i.Changed)&&(delete this.Changed,this.Pe(t))}function Av(t,e){for(var i=new ht,n=0;n<t.linkDataArray.length;n++){var s=t.linkDataArray[n];Wc(t,e,s,s,i)}return i}function an(t,e,i){if(null!==e&&""!==(t=i?t.lf:t.mf)&&void 0!==(t=ke(e,t))){if(Qo(t))return t;Q((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function fl(t,e,i,n){if(null===i&&(i=void 0),null!==e){var s=n?t.lf:t.mf;if(""!==s)if(i=t.Vl(i),t.Jc(e)){var o=ke(e,s);o!==i&&(ns(t,o,e),se(e,s,i),null===t.ic(i)&&is(t,i,e),Ie(t,n?"linkFromKey":"linkToKey",de,s,e,o,i),"string"==typeof s&&t.La(e,s))}else se(e,s,i)}}function Kc(t,e,i){return null===e||""===(t=i?t.ej:t.fj)||void 0===(e=ke(e,t))?"":e}function pl(t,e,i,n){if(null!==e){var s=n?t.ej:t.fj;if(""!==s)if(t.Jc(e)){var o=ke(e,s);void 0===o&&(o=""),o!==i&&(se(e,s,i),Ie(t,n?"linkFromPortId":"linkToPortId",de,s,e,o,i),"string"==typeof s&&t.La(e,s))}else se(e,s,i)}}function Pv(t,e,i){if(""!==t.linkKeyProperty){var n=t.Ac(e);if(void 0!==n&&t.xb.I(n)===e)return;t.Bs(e),void 0===(n=t.Ac(e))&&Q("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.xb.add(n,e)}t.$f.add(e),n=null,i&&t.md.splice(n=t.md.length,0,e),Ie(t,"linkDataArray",ze,"linkDataArray",t,null,e,null,n),Hp(t,e)}function Lv(t,e,i){t.$f.remove(e);var n=t.Ac(e);if(void 0!==n&&t.xb.remove(n),n=null,i){if(0>(n=t.md.indexOf(e)))return;t.md.splice(n,1)}if(Ie(t,"linkDataArray",Ue,"linkDataArray",t,e,null,n,null),ns(t,i=an(t,e,!0),e),ns(t,i=an(t,e,!1),e),n=t.Ef(e),Array.isArray(n))for(var s=n.length,o=0;o<s;o++)ns(t,i=n[o],e)}function Hp(t,e){var i=an(t,e,!0);i=t.Vl(i),null===t.ic(i)&&is(t,i,e),i=an(t,e,!1),i=t.Vl(i),null===t.ic(i)&&is(t,i,e);var n=t.Ef(e);if(Array.isArray(n))for(var s=n.length,o=0;o<s;o++)null===t.ic(i=n[o])&&is(t,i,e)}function Tv(t,e,i){t.lp(i,t.ps(e)),t.xv(i,t.zx(e)),t.Cv(i,t.Cx(e)),t.Ls(i,t.Ef(e)),t.yv(i,t.Ax(e)),t.Dv(i,t.Ex(e))}Ae.className="Binding",Ae.parseEnum=function(t,e){return function(i){return null===(i=Kn(t,i))?e:i}},Ae.toString=Vi,Ae.OneWay=Cv,Ae.TwoWay=jh,Vt(jt,mt),jt.constructGraphLinksModel=mt.constructGraphLinksModel,jt.prototype.cloneProtected=function(t){mt.prototype.cloneProtected.call(this,t),t.Jh=this.Jh,t.bl=this.bl,t.zk=this.zk,t.lf=this.lf,t.mf=this.mf,t.ej=this.ej,t.fj=this.fj,t.dj=this.dj,t.je=this.je,t.il=this.il,t.Je=this.Je,t.Lm=this.Lm},(L=jt.prototype).clear=function(){mt.prototype.clear.call(this),this.md=[],this.xb.clear(),this.$f.clear()},L.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.np();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var n,i=(t=this.nodeDataArray).length;for(n=0;n<i;n++){var s=t[n];e+=" "+this.wa(s)+":"+Vi(s)}for(e+="\n link data:",i=(t=this.linkDataArray).length,n=0;n<i;n++)e+=" "+an(this,s=t[n],!0)+"--\x3e"+an(this,s,!1)}return e},L.Rv=function(t,e){""===this.linkKeyProperty&&Q("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=mt.prototype.Rv.call(this,t,e),n=this,s=new ht,o=new ht,l=new ht,u=this.vh;t.changes.each(function(m){m.model===n&&("linkDataArray"===m.modelChange?m.change===ze?s.add(m.newValue):m.change===Ue&&l.add(m.oldValue):n.Jc(m.object)?o.add(m.object):null!==m.object&&(null!==m.object&&u&&u.contains(m.object)?u.get(m.object).each(function(v){n.Jc(v)&&o.add(v)}):m.object instanceof mt||n.lb(m.object)||Av(n,m.object).each(function(v){o.add(v)})))});var c=this.hl;c.clear(),s.each(function(m){c.add(n.Ac(m)),e||o.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(n.Ac(m)),e&&o.add(m)}),t=n.cloneDeep(o.Fa()),0<c.count&&(null===i&&(i={}),e?i.removedLinkKeys=c.Fa():i.insertedLinkKeys=c.Fa()),0<t.length&&(null===i&&(i={}),i.modifiedLinkData=t),0<p.count&&(null===i&&(i={}),e?i.insertedLinkKeys=p.Fa():i.removedLinkKeys=p.Fa()),p.clear(),c.clear(),i},L.rm=function(){var t=mt.prototype.rm.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},L.gp=function(t){mt.prototype.gp.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},L.Sv=function(){return mt.prototype.Sv.call(this)+',\n  "linkDataArray": '+$o(this,this.linkDataArray,!0)},L.lv=function(t){mt.prototype.lv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.dm(t),this.linkDataArray=t)},L.Qv=function(t,e){""===this.linkKeyProperty&&Q("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=mt.prototype.Qv.call(this,t,e),n=this,s=new ht,o=new ht,l=new ht,u=this.vh;t.changes.each(function(m){m.model===n&&("linkDataArray"===m.modelChange?m.change===ze?s.add(m.newValue):m.change===Ue&&l.add(m.oldValue):n.Jc(m.object)?o.add(m.object):null!==m.object&&(null!==m.object&&u&&u.contains(m.object)?u.get(m.object).each(function(v){n.Jc(v)&&o.add(v)}):m.object instanceof mt||n.lb(m.object)||Av(n,m.object).each(function(v){o.add(v)})))});var c=this.hl;c.clear(),s.each(function(m){c.add(n.Ac(m)),e||o.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(n.Ac(m)),e&&o.add(m)}),t=i,0<c.count&&(t+=(e?this.Yv:this.Wv)+$o(this,c.Fa(),!0)),0<o.count&&(t+=this.jy+$o(this,o.Fa(),!0)),0<p.count&&(t+=(e?this.Wv:this.Yv)+$o(this,p.Fa(),!0)),p.clear(),c.clear(),t},L.fp=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&Q("applyIncrementalJson cannot change Model properties"),mt.prototype.fp.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var s=e[n],o=this.jh(s);null===o&&(o=this.Jo({}),this.Ks(o,s),this.fi(o))}if(e=t.modifiedLinkData,Array.isArray(e))for(i=e.length,n=0;n<i;n++)if(o=this.Ac(s=e[n]),null!==(o=this.jh(o))){for(var l in s)"__gohashid"!==l&&l!==this.linkKeyProperty&&this.setDataProperty(o,l,s[l]);Tv(this,s,o)}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)null!==(i=this.jh(t[e]))&&this.bm(i)},jt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===de){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.Jc(i)){var s=t.I(e);return void 0!==(e=t.I(!e))&&this.xb.remove(e),void 0!==s&&this.xb.add(s,i),void se(i,n,s)}}else if(t.change===ze){if(i=t.newParam,"linkDataArray"===t.modelChange)return void(le(t=t.newValue)&&"number"==typeof i&&(n=this.Ac(t),e?(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),void 0!==n&&this.xb.remove(n)):(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),void 0!==n&&this.xb.add(n,t))));if("linkLabelKeys"===t.modelChange)return n=this.Ef(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue)))}else if(t.change===Ue){if(i=t.oldParam,"linkDataArray"===t.modelChange)return void(le(t=t.oldValue)&&"number"==typeof i&&(n=this.Ac(t),e?(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),void 0!==n&&this.xb.add(n,t)):(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),void 0!==n&&this.xb.remove(n))));if("linkLabelKeys"===t.modelChange)return n=this.Ef(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1))))}mt.prototype.changeState.call(this,t,e)}},(L=jt.prototype).Vl=function(t){if(void 0!==t){var e=this.Ri;if(null!==e){var i=this.ic(t);null===i&&(se(i=this.copyNodeData(e),this.nodeKeyProperty,t),this.xf(i))}return t}},L.zx=function(t){return an(this,t,!0)},L.xv=function(t,e){fl(this,t,e,!0)},L.Cx=function(t){return an(this,t,!1)},L.Cv=function(t,e){fl(this,t,e,!1)},L.Ax=function(t){return Kc(this,t,!0)},L.yv=function(t,e){pl(this,t,e,!0)},L.Ex=function(t){return Kc(this,t,!1)},L.Dv=function(t,e){pl(this,t,e,!1)},L.Ef=function(t){if(null===t)return _c;var e=this.je;return""===e||void 0===(t=ke(t,e))?_c:t},L.Ls=function(t,e){if(null!==t){var i=this.je;if(""!==i)if(this.Jc(t)){var n=ke(t,i);if(void 0===n&&(n=_c),n!==e){if(Array.isArray(n))for(var s=n.length,o=0;o<s;o++)ns(this,n[o],t);for(se(t,i,e),s=e.length,o=0;o<s;o++){var l=e[o];null===this.ic(l)&&is(this,l,t)}Ie(this,"linkLabelKeys",de,i,t,n,e),"string"==typeof i&&this.La(t,i)}}else se(t,i,e)}},L.Bu=function(t,e){if(null!=e&&null!==t){var i=this.je;if(""!==i){var n=ke(t,i);if(void 0===n)(i=[]).push(e),this.Ls(t,i);else if(Array.isArray(n)){var s=n.indexOf(e);0<=s||(s=n.length,n.push(e),this.Jc(t)&&(null===this.ic(e)&&is(this,e,t),Ie(this,"linkLabelKeys",ze,i,t,null,e,null,s)))}else Q(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},L.Rx=function(t,e){if(null!=e&&null!==t){var i=this.je;if(""!==i){var n=ke(t,i);if(Array.isArray(n)){var s=n.indexOf(e);0>s||(n.splice(s,1),this.Jc(t)&&(ns(this,e,t),Ie(this,"linkLabelKeys",Ue,i,t,e,null,s,null)))}else void 0!==n&&Q(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},L.Ac=function(t){if(null!==t){var e=this.Jh;if(""!==e&&void 0!==(e=ke(t,e))){if(Qo(e))return e;Q("Key value for link data "+t+" is not a number or a string: "+e)}}},L.Ks=function(t,e){if(null!==t){var i=this.Jh;if(""!==i)if(this.Jc(t)){var n=ke(t,i);n!==e&&null===this.jh(e)&&(se(t,i,e),void 0!==n&&this.xb.remove(n),this.xb.add(e,t),Ie(this,"linkKey",de,i,t,n,e),"string"==typeof i&&this.La(t,i))}else se(t,i,e)}},L.jh=function(t){return null===t&&Q("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Qo(t)?this.xb.I(t):null},L.Bs=function(t){if(null!==t){var e=this.Jh;if(""!==e){var i=this.Ac(t);if(void 0===i||this.xb.contains(i)){var n=this.bl;if(null!==n&&null!=(i=n(this,t))&&!this.xb.contains(i))return void se(t,e,i);if("string"==typeof i){for(n=2;this.xb.contains(i+n);)n++;se(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.xb.count-1;this.xb.contains(i);)i--;se(t,e,i)}}}}},L.Jc=function(t){return null!==t&&this.$f.contains(t)},L.fi=function(t){null!==t&&(Vs(t),this.Jc(t)||Pv(this,t,!0))},L.Fy=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.fi(t[i]);else for(t=t.iterator;t.next();)this.fi(t.value)},L.bm=function(t){null!==t&&Lv(this,t,!0)},L.mA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.bm(t[i]);else for(t=t.iterator;t.next();)this.bm(t.value)},L.$z=function(t){if(""===this.linkKeyProperty&&Q("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Ge(t)){var e=this.jl;e.clear(),e.addAll(this.xb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,s=0;s<n;s++){var o=t[s],l=this.Ac(o);if(void 0!==l){i.add(l);var u=this.jh(l);u!==o&&(null!==u?(this.Do(u,o),Tv(this,o,u)):(o=this.cloneDeep(o),this.Ks(o,l),this.fi(o)))}else l=this.cloneDeep(o),this.fi(l),i.add(this.Ac(l))}for(t=e.iterator;t.next();)i.contains(n=t.value)||(n=this.jh(n))&&this.bm(n);e.clear(),i.clear()}},L.Jo=function(t){if(null===t)return null;var e=this.zk;return le(t=null!==e?e(t,this):Uc(this,t,!0))&&(Ye(t),""!==this.lf&&se(t,this.lf,void 0),""!==this.mf&&se(t,this.mf,void 0),""!==this.je&&se(t,this.je,[])),t},L.Zu=function(t){if(null===t)return!1;var e=this.il;return""!==e&&!!ke(t,e)},L.lh=function(t){if(null!==t){var e=this.Je;if(""!==e&&void 0!==(e=ke(t,e))){if(Qo(e))return e;Q("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},L.mp=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Je;if(""!==i)if(this.lb(t)){var n=ke(t,i);n!==e&&(ns(this,n,t),se(t,i,e),null===this.ic(e)&&is(this,e,t),Ie(this,"nodeGroupKey",de,i,t,n,e),"string"==typeof i&&this.La(t,i))}else se(t,i,e)}},jt.prototype.copyNodeData=function(t){return null===t?null:(t=mt.prototype.copyNodeData.call(this,t),this.Hj||""===this.Je||void 0===ke(t,this.Je)||se(t,this.Je,void 0),t)},jt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i);if(e===this.nodeGroupKeyProperty)return void this.mp(t,i)}else if(this.Jc(t)){if(e===this.linkFromKeyProperty)return void fl(this,t,i,!0);if(e===this.linkToKeyProperty)return void fl(this,t,i,!1);if(e===this.linkFromPortIdProperty)return void pl(this,t,i,!0);if(e===this.linkToPortIdProperty)return void pl(this,t,i,!1);if(e===this.linkKeyProperty)return void this.Ks(t,i);if(e===this.linkCategoryProperty)return void this.lp(t,i);if(e===this.linkLabelKeysProperty)return void this.Ls(t,i)}var n=ke(t,e);n!==i&&(se(t,e,i),this.Fs(t,e,n,i))},(L=jt.prototype).Do=function(t,e){if(e){var s,i=this.lb(t),n=this.Jc(t);for(s in e)"__gohashid"===s||i&&s===this.nodeKeyProperty||i&&s===this.nodeIsGroupProperty&&ke(t,s)===e[s]||n&&s===this.linkKeyProperty||this.setDataProperty(t,s,e[s])}},L.jp=function(t,e){mt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.rv(i.value,t,e);for(i=this.$f.iterator;i.next();){var n=i.value,s=t,o=e;if(an(this,n,!0)===s){var l=this.lf;se(n,l,o),Ie(this,"linkFromKey",de,l,n,s,o),"string"==typeof l&&this.La(n,l)}if(an(this,n,!1)===s&&(se(n,l=this.mf,o),Ie(this,"linkToKey",de,l,n,s,o),"string"==typeof l&&this.La(n,l)),l=this.Ef(n),Array.isArray(l))for(var u=l.length,c=this.je,p=0;p<u;p++)l[p]===s&&(l[p]=o,Ie(this,"linkLabelKeys",ze,c,n,s,o,p,p))}},L.rv=function(t,e,i){if(this.lh(t)===e){var n=this.Je;se(t,n,i),Ie(this,"nodeGroupKey",de,n,t,e,i),"string"==typeof n&&this.La(t,n)}},L.Mv=function(){mt.prototype.Mv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Hp(this,t[i])},L.fm=function(t){mt.prototype.fm.call(this,t);var e=Oh(this,t=this.wa(t));if(null!==e){var i=Xt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)){if(this.lh(n)===t){var s=this.Je;Ie(this,"nodeGroupKey",de,s,n,t,t),"string"==typeof s&&this.La(n,s),i.push(n)}}else if(an(this,n,!0)===t&&(Ie(this,"linkFromKey",de,s=this.lf,n,t,t),"string"==typeof s&&this.La(n,s),i.push(n)),an(this,n,!1)===t&&(Ie(this,"linkToKey",de,s=this.mf,n,t,t),"string"==typeof s&&this.La(n,s),i.push(n)),s=this.Ef(n),Array.isArray(s))for(var o=s.length,l=this.je,u=0;u<o;u++)s[u]===t&&(Ie(this,"linkLabelKeys",ze,l,n,t,t,u,u),i.push(n))}for(e=0;e<i.length;e++)ns(this,t,i[e]);Zt(i)}},L.em=function(t){mt.prototype.em.call(this,t);var e=this.lh(t);null===this.ic(e)&&is(this,e,t)},L.qp=function(t){mt.prototype.qp.call(this,t),ns(this,this.lh(t),t)},L.ps=function(t){if(null===t)return"";var e=this.dj;return""===e||void 0===(e=ke(t,e))?"":"string"==typeof e?e:void Q("getCategoryForLinkData found a non-string category for "+t+": "+e)},jt.prototype.getLinkCategoryForData=function(t){return this.ps(t)},jt.prototype.lp=function(t,e){if(null!==t){var i=this.dj;if(""!==i)if(this.Jc(t)){var n=ke(t,i);void 0===n&&(n=""),n!==e&&(se(t,i,e),Ie(this,"linkCategory",de,i,t,n,e),"string"==typeof i&&this.La(t,i))}else se(t,i,e)}},jt.prototype.setLinkCategoryForData=function(t,e){this.lp(t,e)},(L=jt.prototype).lm=function(t,e){mt.prototype.lm.call(this,t,e),this.mp(e,this.lh(t))},L.Vj=function(){return!0},L.ri=function(){return!0},L.xs=function(){return!0},L.Wj=function(){return!0},Tt.Object.defineProperties(jt.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.md},set:function(t){var e=this.md;if(e!==t){this.xb.clear();for(var i=t.length,n=0;n<i;n++){var s=t[n];le(s)||Q("GraphLinksModel.linkDataArray must only contain Objects, not: "+s),Vs(s)}if(this.md=t,""!==this.linkKeyProperty){for(n=new dt,s=0;s<i;s++){var o=t[s],l=this.Ac(o);void 0===l||null!==this.xb.I(l)?n.add(o):this.xb.add(l,o)}for(n=n.iterator;n.next();)this.Bs(s=n.value),void 0!==(o=this.Ac(s))&&this.xb.add(o,s)}for(n=new ht,s=0;s<i;s++)n.add(t[s]);for(this.$f=n,Ie(this,"linkDataArray",de,"linkDataArray",this,e,t),e=0;e<i;e++)Hp(this,t[e])}}},linkKeyProperty:{get:function(){return this.Jh},set:function(t){var e=this.Jh;if(e!==t){this.Jh=t,this.xb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var s=this.linkDataArray[n],o=this.Ac(s);void 0===o&&(this.Bs(s),o=this.Ac(s)),void 0!==o&&this.xb.add(o,s)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.zk},set:function(t){var e=this.zk;e!==t&&(this.zk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.il},set:function(t){var e=this.il;e!==t&&(this.il=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Je},set:function(t){var e=this.Je;e!==t&&(this.Je=t,this.g("nodeGroupKeyProperty",e,t))}},Hj:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},linkCategoryProperty:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),jt.prototype.setCategoryForLinkData=jt.prototype.lp,jt.prototype.getCategoryForLinkData=jt.prototype.ps,jt.prototype.assignAllDataProperties=jt.prototype.Do,jt.prototype.setGroupKeyForNodeData=jt.prototype.mp,jt.prototype.getGroupKeyForNodeData=jt.prototype.lh,jt.prototype.isGroupForNodeData=jt.prototype.Zu,jt.prototype.copyLinkData=jt.prototype.Jo,jt.prototype.mergeLinkDataArray=jt.prototype.$z,jt.prototype.removeLinkDataCollection=jt.prototype.mA,jt.prototype.removeLinkData=jt.prototype.bm,jt.prototype.addLinkDataCollection=jt.prototype.Fy,jt.prototype.addLinkData=jt.prototype.fi,jt.prototype.containsLinkData=jt.prototype.Jc,jt.prototype.makeLinkDataKeyUnique=jt.prototype.Bs,jt.prototype.findLinkDataForKey=jt.prototype.jh,jt.prototype.setKeyForLinkData=jt.prototype.Ks,jt.prototype.getKeyForLinkData=jt.prototype.Ac,jt.prototype.removeLabelKeyForLinkData=jt.prototype.Rx,jt.prototype.addLabelKeyForLinkData=jt.prototype.Bu,jt.prototype.setLabelKeysForLinkData=jt.prototype.Ls,jt.prototype.getLabelKeysForLinkData=jt.prototype.Ef,jt.prototype.setToPortIdForLinkData=jt.prototype.Dv,jt.prototype.getToPortIdForLinkData=jt.prototype.Ex,jt.prototype.setFromPortIdForLinkData=jt.prototype.yv,jt.prototype.getFromPortIdForLinkData=jt.prototype.Ax,jt.prototype.setToKeyForLinkData=jt.prototype.Cv,jt.prototype.getToKeyForLinkData=jt.prototype.Cx,jt.prototype.setFromKeyForLinkData=jt.prototype.xv,jt.prototype.getFromKeyForLinkData=jt.prototype.zx,jt.prototype.clear=jt.prototype.clear;var _c=Object.freeze([]);function Li(t,e){mt.call(this),this.Ke="parent",this.Nm=!1,this.nj="parentLinkCategory",void 0!==t&&(Ge(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}function fe(t){ae.call(this),this.mw=this.Zm=this.mc=0,this.Wp=360,this.lw=Hn,this.Ti=0,this.$v=new z,this.Jp=this.me=0,this.Xr=new Rh,this.gt=this.mj=0,this.uy=600,this.eo=NaN,this.Cm=1,this.ro=0,this.ul=360,this.Sb=Hn,this.K=Ti,this.nd=ml,this.hd=Ep,this.tf=6,this.Nn=ed,t&&Object.assign(this,t)}function Dh(t,e,i,n,s){var o=t.Wp,l=t.mc;t=t.me,n=n*Math.PI/180,i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=n+(s===Ti?c*i/(360<=o?u:u-1):-c*i/u),m=e.M(c),v=l*Math.tan(p)/t;v=Math.sqrt((l*l+t*t*v*v)/(1+v*v)),m.centerX=v*Math.cos(p),m.centerY=v*Math.sin(p),m.actualAngle=180*p/Math.PI}}function zh(t,e,i,n){var s=t.mc,o=t.me,l=t.Ti;i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=e.M(c),m=e.M(c===u-1?0:c+1),v=o*Math.sin(i);p.centerX=s*Math.cos(i),p.centerY=v,p.actualAngle=180*i/Math.PI,isNaN(p.diameter)&&er(p,0),isNaN(m.diameter)&&er(m,0),p=Jc(t,s,o,n===Ti?i:-i,(p.diameter+m.diameter)/2+l),i+=n===Ti?p:-p}}function Bh(t,e,i,n){var s=t.mc,o=t.me,l=t.Jp;i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=e.M(c);p.centerX=s*Math.cos(i),p.centerY=o*Math.sin(i),p.actualAngle=180*i/Math.PI,p=Jc(t,s,o,n===Ti?i:-i,l),i+=n===Ti?p:-p}}function Nv(t,e,i,n,s){var o=t.Wp;if(t.mj=0,t.Xr=new Rh,360>i){for(o=n+(s===Ti?o:-o);0>o;)o+=360;180<(o%=360)&&(o-=360),o*=Math.PI/180,t.gt=o,Iv(t,e,i,n,s)}else Fv(t,e,i,n,s);t.Xr.commit(e)}function Fv(t,e,i,n,s){var o=t.mc,l=t.Ti,u=t.Zm,c=o*Math.cos(n*Math.PI/180),p=t.me*Math.sin(n*Math.PI/180),m=e.Fa();if(3===m.length)m[0].centerX=o,m[0].centerY=0,m[1].centerX=m[0].centerX-m[0].width/2-m[1].width/2-l,m[1].y=m[0].y,m[2].centerX=(m[0].centerX+m[1].centerX)/2,m[2].y=m[0].y-m[2].height-l;else if(4===m.length)m[0].centerX=o,m[0].centerY=0,m[2].centerX=-m[0].centerX,m[2].centerY=m[0].centerY,m[1].centerX=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-l,m[3].centerX=0,m[3].y=Math.max(m[0].y+m[0].height+l,m[2].y+m[2].height+l);else{o=z.alloc();for(var v=0;v<m.length&&(m[v].centerX=c,m[v].centerY=p,!(v>=m.length-1));v++)Ov(t,c,p,m,v,s,o)||Ev(t,c,p,m,v,s,o),c=o.x,p=o.y;if(z.free(o),t.mj++,!(23<t.mj)){c=m[0].centerX,p=m[0].centerY,o=m[m.length-1].centerX,v=m[m.length-1].centerY;var w=Math.abs(c-o)-((m[0].width+m[m.length-1].width)/2+l),k=Math.abs(p-v)-((m[0].height+m[m.length-1].height)/2+l);l=0,1>Math.abs(k)?Math.abs(c-o)<(m[0].width+m[m.length-1].width)/2&&(l=0):l=0<k?k:1>Math.abs(w)?0:w,c=Math.abs(o)>Math.abs(v)?0<o!=p>v:0<v!=c<o,(c=s===Ti?c:!c)&&(l=-Math.abs(l),l=Math.min(l,-m[m.length-1].width),l=Math.min(l,-m[m.length-1].height)),t.Xr.compare(l,m),1<Math.abs(l)&&(t.mc=8>t.mj?t.mc-l/(2*Math.PI):5>m.length&&10<l?t.mc/2:t.mc-(0<l?1.7:-2.3),t.me=t.mc*u,Fv(t,e,i,n,s))}}}function Iv(t,e,i,n,s){for(var o=t.mc,l=t.me,u=t.Zm,c=o*Math.cos(n*Math.PI/180),p=l*Math.sin(n*Math.PI/180),m=z.alloc(),v=e.Fa(),w=0;w<v.length&&(v[w].centerX=c,v[w].centerY=p,!(w>=v.length-1));w++)Ov(t,c,p,v,w,s,m)||Ev(t,c,p,v,w,s,m),c=m.x,p=m.y;if(z.free(m),t.mj++,!(23<t.mj)){if(c=Math.atan2(p,c),c=s===Ti?t.gt-c:c-t.gt,o=(c=Math.abs(c)<Math.abs(c-2*Math.PI)?c:c-2*Math.PI)*(o+l)/2,l=t.Xr,Math.abs(o)<Math.abs(l.Pl))for(l.Pl=o,l.lk=[],l.tm=[],c=0;c<v.length;c++)l.lk[c]=v[c].bounds.x,l.tm[c]=v[c].bounds.y;1<Math.abs(o)&&(t.mc=8>t.mj?t.mc-o/(2*Math.PI):t.mc-(0<o?1.7:-2.3),t.me=t.mc*u,Iv(t,e,i,n,s))}}function Ov(t,e,i,n,s,o,l){var u=t.mc,c=t.me,p=0;t=(n[s].width+n[s+1].width)/2+t.Ti;var m=!1;if(0<=i!=(o===Ti)){if((o=e+t)>u){if((o=e-t)<-u)return l.x=o,l.y=p,!1;m=!0}}else if((o=e-t)<-u){if((o=e+t)>u)return l.x=o,l.y=p,!1;m=!0}return p=Math.sqrt(1-Math.min(1,o*o/(u*u)))*c,0>i!==m&&(p=-p),Math.abs(i-p)>(n[s].height+n[s+1].height)/2?(l.x=o,l.y=p,!1):(l.x=o,l.y=p,!0)}function Ev(t,e,i,n,s,o,l){var u=t.mc,c=t.me,p=0;if(t=(n[s].height+n[s+1].height)/2+t.Ti,n=!1,0<=e!=(o===Ti)){if((o=i-t)<-c){if((o=i+t)>c)return l.x=p,void(l.y=o);n=!0}}else if((o=i+t)>c){if((o=i-t)<-c)return l.x=p,void(l.y=o);n=!0}p=Math.sqrt(1-Math.min(1,o*o/(c*c)))*u,0>e!==n&&(p=-p),l.x=p,l.y=o}function Vp(t,e,i,n,s){var o=t.uy;if(.001>Math.abs(t.Zm-1))return void 0!==n&&void 0!==s?s*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,u=void 0!==n&&void 0!==s?s/(o+1):Math.PI/(2*(o+1)),c=0,p=0;p<=o;p++){c=void 0!==n&&void 0!==s?n+p*s/o:p*Math.PI/(2*o);var m=Math.sin(c);l+=Math.sqrt(1-t*t*m*m)*u}return void 0!==n&&void 0!==s?(e>i?e:i)*l:4*(e>i?e:i)*l}function Zc(t,e,i,n,s){return e/(void 0!==n&&void 0!==s?Vp(t,1,i,n,s):Vp(t,1,i))}function Jc(t,e,i,n,s){if(.001>Math.abs(t.Zm-1))return s/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var u=0;;u++){var c=Math.sin(n+u*t);if((l+=(e>i?e:i)*Math.sqrt(1-o*o*c*c)*t)>=s)return u*t}}jt.className="GraphLinksModel",Xn.GraphLinksModel=jt,mt.constructGraphLinksModel=mt.constructGraphLinksModel=function(){return new jt},mt.initDiagramModel=Yp=function(){return new jt},Vt(Li,mt),Li.constructGraphLinksModel=mt.constructGraphLinksModel,Li.prototype.cloneProtected=function(t){mt.prototype.cloneProtected.call(this,t),t.Ke=this.Ke,t.Nm=this.Nm,t.nj=this.nj},(L=Li.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.np();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var s=t[n];e+=" "+this.wa(s)+":"+Vi(s)}}return e},L.rm=function(){var t=mt.prototype.rm.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},L.gp=function(t){mt.prototype.gp.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},L.fp=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&Q("applyIncrementalJson cannot change Model properties"),mt.prototype.fp.call(this,t)},L.Vl=function(t){return t},L.mh=function(t){if(null!==t){var e=this.Ke;if(""!==e&&void 0!==(e=ke(t,e))){if(Qo(e))return e;Q("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},L.qe=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Ke;if(""!==i)if(e=this.Vl(e),this.lb(t)){var n=ke(t,i);n!==e&&(ns(this,n,t),se(t,i,e),null===this.ic(e)&&is(this,e,t),Ie(this,"nodeParentKey",de,i,t,n,e),"string"==typeof i&&this.La(t,i))}else se(t,i,e)}},L.ss=function(t){if(null===t)return"";var e=this.nj;return""===e||void 0===(e=ke(t,e))?"":"string"==typeof e?e:(Q("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Li.prototype.getLinkCategoryForData=function(t){return this.ss(t)},Li.prototype.Ms=function(t,e){if(null!==t){var i=this.nj;if(""!==i)if(this.lb(t)){var n=ke(t,i);void 0===n&&(n=""),n!==e&&(se(t,i,e),Ie(this,"parentLinkCategory",de,i,t,n,e),"string"==typeof i&&this.La(t,i))}else se(t,i,e)}},Li.prototype.setLinkCategoryForData=function(t,e){this.Ms(t,e)},Li.prototype.copyNodeData=function(t){return null===t?null:(t=mt.prototype.copyNodeData.call(this,t),this.Ij||""===this.Ke||void 0===ke(t,this.Ke)||se(t,this.Ke,void 0),t)},Li.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i);if(e===this.nodeParentKeyProperty)return void this.qe(t,i)}var n=ke(t,e);n!==i&&(se(t,e,i),this.Fs(t,e,n,i))},(L=Li.prototype).jp=function(t,e){mt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.rv(i.value,t,e)},L.rv=function(t,e,i){if(this.mh(t)===e){var n=this.Ke;se(t,n,i),Ie(this,"nodeParentKey",de,n,t,e,i),"string"==typeof n&&this.La(t,n)}},L.fm=function(t){mt.prototype.fm.call(this,t);var e=Oh(this,t=this.wa(t));if(null!==e){var i=Xt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)&&this.mh(n)===t){var s=this.Ke;Ie(this,"nodeParentKey",de,s,n,t,t),"string"==typeof s&&this.La(n,s),i.push(n)}}for(e=0;e<i.length;e++)ns(this,t,i[e]);Zt(i)}},L.em=function(t){mt.prototype.em.call(this,t);var e=this.mh(t);e=this.Vl(e),null===this.ic(e)&&is(this,e,t)},L.qp=function(t){mt.prototype.qp.call(this,t),ns(this,this.mh(t),t)},L.lm=function(t,e){mt.prototype.lm.call(this,t,e),this.Ms(e,this.ss(t)),this.qe(e,this.mh(t))},L.Tl=function(){return!0},L.xs=function(){return!0},Tt.Object.defineProperties(Li.prototype,{nodeParentKeyProperty:{get:function(){return this.Ke},set:function(t){var e=this.Ke;e!==t&&(this.Ke=t,this.g("nodeParentKeyProperty",e,t))}},Ij:{get:function(){return this.Nm},set:function(t){this.Nm!==t&&(this.Nm=t)}},parentLinkCategoryProperty:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Li.prototype.setParentLinkCategoryForNodeData=Li.prototype.Ms,Li.prototype.getParentLinkCategoryForNodeData=Li.prototype.ss,Li.prototype.setParentKeyForNodeData=Li.prototype.qe,Li.prototype.getParentKeyForNodeData=Li.prototype.mh,Li.className="TreeModel",Xn.TreeModel=Li,Vt(fe,ae),fe.prototype.cloneProtected=function(t){ae.prototype.cloneProtected.call(this,t),t.eo=this.eo,t.Cm=this.Cm,t.ro=this.ro,t.ul=this.ul,t.Sb=this.Sb,t.K=this.K,t.nd=this.nd,t.hd=this.hd,t.tf=this.tf,t.Nn=this.Nn},fe.prototype.qb=function(t){t.classType===fe?t===qc||t===td||t===$c||t===Qc||t===ml?this.sorting=t:t===Nr||t===gl||t===Ti||t===tr?this.direction=t:t===Lo||t===qo||t===Hn||t===Vn?this.arrangement=t:(t===la||t===ed)&&(this.nodeDiameterFormula=t):ae.prototype.qb.call(this,t)},fe.prototype.createNetwork=function(){return new yl(this)},fe.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new dt;e.addAll(t.iterator),t=new dt;var s,o,i=new dt,n=this.sort(e),l=this.Jp,u=this.arrangement,c=this.nodeDiameterFormula,p=this.radius;(!isFinite(p)||0>=p)&&(p=NaN);var m=this.aspectRatio;(!isFinite(m)||0>=m)&&(m=1);var v=this.startAngle;isFinite(v)||(v=0);var w=this.sweepAngle;if((!isFinite(w)||360<w||1>w)&&(w=360),e=this.spacing,isFinite(e)||(e=NaN),u===Vn&&c===la?u=Hn:u===Vn&&c!==la&&(u=this.arrangement),(this.direction===Nr||this.direction===gl)&&this.sorting!==ml){for(c=0;!(c>=n.length||(t.add(n.M(c)),c+1>=n.length));c+=2)i.add(n.M(c+1));this.direction===Nr?(this.arrangement===Vn&&t.reverse(),(n=new dt).addAll(t),n.addAll(i)):(this.arrangement===Vn&&i.reverse(),(n=new dt).addAll(i),n.addAll(t))}c=n.length;for(var k=o=s=0;k<n.length;k++){var A=v+w*o*(this.direction===Ti?1:-1)/c,T=n.M(k).diameter;isNaN(T)&&(T=er(n.M(k),A)),360>w&&(0===k||k===n.length-1)&&(T/=2),s+=T,o++}if(isNaN(p)||u===Vn){if(isNaN(e)&&(e=6),u!==Hn&&u!==Vn){for(o=-1/0,l=0;l<c;l++)k=n.M(l),s=n.M(l===c-1?0:l+1),isNaN(k.diameter)&&er(k,0),isNaN(s.diameter)&&er(s,0),o=Math.max(o,(k.diameter+s.diameter)/2);l=o+e,p=u===Lo?(o+e)/(2*Math.PI/c):Zc(this,l*(360<=w?c:c-1),m,v*Math.PI/180,w*Math.PI/180)}else p=Zc(this,s+(360<=w?c:c-1)*(u!==Vn?e:1.6*e),m,v*Math.PI/180,w*Math.PI/180);o=p*m}else if(k=Vp(this,p,o=p*m,v*Math.PI/180,w*Math.PI/180),isNaN(e))(u===Hn||u===Vn)&&(e=(k-s)/(360<=w?c:c-1));else if(u===Hn||u===Vn)(k=(k-s)/(360<=w?c:c-1))<e?o=(p=Zc(this,s+e*(360<=w?c:c-1),m,v*Math.PI/180,w*Math.PI/180))*m:e=k;else{for(l=-1/0,s=0;s<c;s++)A=n.M(s),T=n.M(s===c-1?0:s+1),isNaN(A.diameter)&&er(A,0),isNaN(T.diameter)&&er(T,0),l=Math.max(l,(A.diameter+T.diameter)/2);(s=Zc(this,(l+=e)*(360<=w?c:c-1),m,v*Math.PI/180,w*Math.PI/180))>p?o=(p=s)*m:l=k/(360<=w?c:c-1)}if(this.lw=u,this.mc=p,this.Zm=m,this.mw=v,this.Wp=w,this.Ti=e,this.me=o,this.Jp=l,e=n,n=this.lw,u=this.mc,p=this.mw,m=this.Wp,v=this.Ti,w=this.me,c=this.Jp,this.direction!==Nr&&this.direction!==gl||n!==Vn)if(this.direction===Nr||this.direction===gl){switch(l=0,n){case qo:l=180*Jc(this,u,w,p,c)/Math.PI;break;case Hn:c=e=0,null!==(l=t.first())&&(e=er(l,Math.PI/2)),null!==(l=i.first())&&(c=er(l,Math.PI/2)),l=180*Jc(this,u,w,p,v+(e+c)/2)/Math.PI;break;case Lo:l=m/e.length}if(this.direction===Nr){switch(n){case qo:Bh(this,t,p,tr);break;case Hn:zh(this,t,p,tr);break;case Lo:Dh(this,t,m/2,p,tr)}switch(n){case qo:Bh(this,i,p+l,Ti);break;case Hn:zh(this,i,p+l,Ti);break;case Lo:Dh(this,i,m/2,p+l,Ti)}}else{switch(n){case qo:Bh(this,i,p,tr);break;case Hn:zh(this,i,p,tr);break;case Lo:Dh(this,i,m/2,p,tr)}switch(n){case qo:Bh(this,t,p+l,Ti);break;case Hn:zh(this,t,p+l,Ti);break;case Lo:Dh(this,t,m/2,p+l,Ti)}}}else switch(n){case qo:Bh(this,e,p,this.direction);break;case Hn:zh(this,e,p,this.direction);break;case Lo:Dh(this,e,m,p,this.direction);break;case Vn:Nv(this,e,m,p,this.direction)}else Nv(this,e,m,p-m/2,Ti)}this.updateParts(),this.network=null,this.isValidLayout=!0},fe.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},fe.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new z(0,0):(i.x=this.arrangementOrigin.x+this.mc,i.y=this.arrangementOrigin.y+this.me);for(var n=this.network.vertexes.iterator;n.next();){var s=n.value;s.x+=i.x,s.y+=i.y,s.commit()}t&&(this.group.Va(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.re(i.re(t)),this.group.move(e),this.$v=e.re(t))},fe.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},fe.prototype.sort=function(t){switch(this.sorting){case $c:break;case Qc:t.reverse();break;case qc:t.sort(this.comparer);break;case td:t.sort(this.comparer),t.reverse();break;case ml:return this.$j(function sx(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new dt;for(var n=0;n<t.length;n++){var s=-1,o=-1;if(0===n)for(var l=0;l<t.length;l++){var u=t.M(l).edgesCount;u>s&&(s=u,o=l)}else for(l=0;l<t.length;l++)(u=e[l])>s&&(s=u,o=l);for(i.add(t.M(o)),e[o]=-1,l=(o=t.M(o)).sourceEdges;l.next();)0>(s=t.indexOf(l.value.fromVertex))||0<=e[s]&&e[s]++;for(o=o.destinationEdges;o.next();)0>(s=t.indexOf(o.value.toVertex))||0<=e[s]&&e[s]++}return i}(t));default:Q("Invalid sorting type.")}return t},fe.prototype.$j=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.M(i);e[i]=[];for(var s,o=n.destinationEdges;o.next();)(s=t.indexOf(o.value.toVertex))!==i&&0>e[i].indexOf(s)&&e[i].push(s);for(n=n.sourceEdges;n.next();)(s=t.indexOf(n.value.fromVertex))!==i&&0>e[i].indexOf(s)&&e[i].push(s)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var l=[],u=[];n=[],s=new dt;for(var c=0,p=0;p<e.length;p++){var m=e[p].length;if(1===m)n.push(p);else if(0===m)s.add(t.M(p));else{if(0===c)i.push(p);else{for(var v=m=1/0,w=-1,k=[],A=0;A<i.length;A++)0>e[i[A]].indexOf(i[A===i.length-1?0:A+1])&&k.push(A===i.length-1?0:A+1);if(0===k.length)for(A=0;A<i.length;A++)k.push(A);for(A=0;A<k.length;A++){for(var T=k[A],j=e[p],I=0,B=0;B<l.length;B++){var R=o[l[B]],H=o[u[B]];if(R<H){var K=R;R=H}else K=H;if(K<T&&T<=R)for(H=0;H<j.length;H++){var J=j[H];0>i.indexOf(J)||K<o[J]&&o[J]<R||K===o[J]||R===o[J]||I++}else for(H=0;H<j.length;H++)0>i.indexOf(J=j[H])||K<o[J]&&o[J]<R&&K!==o[J]&&R!==o[J]&&I++}for(j=I,B=I=0;B<e[p].length;B++)0<=(K=i.indexOf(e[p][B]))&&(I+=(K=Math.abs(T-(K>=T?K+1:K)))<i.length+1-K?K:i.length+1-K);for(B=0;B<l.length;B++)(K=o[l[B]])>=T&&K++,(R=o[u[B]])>=T&&R++,K>R&&(H=R,R=K,K=H),R-K<(i.length+2)/2==(K<T&&T<=R)&&I++;(j<m||j===m&&I<v)&&(m=j,v=I,w=T)}for(i.splice(w,0,p),m=0;m<i.length;m++)o[i[m]]=m;for(m=0;m<e[p].length;m++)0<=i.indexOf(v=e[p][m])&&(l.push(p),u.push(v))}c++}}for(l=i.length;;){for(o=!0,u=0;u<n.length;u++)if(0<=(m=i.indexOf(p=e[c=n[u]][0]))){for(w=v=0;w<e[p].length;w++)0>(k=i.indexOf(e[p][w]))||k===m||(v+=k<m!=(A=k>m?k-m:m-k)>l-A?1:-1);i.splice(0>v?m:m+1,0,c),n.splice(u,1),u--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)s.add(t.M(i[e]));return s},Tt.Object.defineProperties(fe.prototype,{radius:{get:function(){return this.eo},set:function(t){this.eo!==t&&(0<t||isNaN(t))&&(this.eo=t,this.C())}},aspectRatio:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&0<t&&(this.Cm=t,this.C())}},startAngle:{get:function(){return this.ro},set:function(t){this.ro!==t&&(this.ro=t,this.C())}},sweepAngle:{get:function(){return this.ul},set:function(t){this.ul!==t&&(this.ul=0<t&&360>=t?t:360,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==Vn&&t!==Hn&&t!==qo&&t!==Lo||(this.Sb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Ti&&t!==tr&&t!==Nr&&t!==gl||(this.K=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==$c&&t!==Qc&&t!==qc&&!td&&t!==ml||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf!==t&&(this.tf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.Nn},set:function(t){this.Nn===t||t!==ed&&t!==la||(this.Nn=t,this.C())}},actualXRadius:{get:function(){return this.mc}},actualYRadius:{get:function(){return this.me}},actualSpacing:{get:function(){return this.Ti}},actualCenter:{get:function(){return this.$v}}});var Hn=new ut(fe,"ConstantSpacing",0),qo=new ut(fe,"ConstantDistance",1),Lo=new ut(fe,"ConstantAngle",2),Vn=new ut(fe,"Packed",3),Ti=new ut(fe,"Clockwise",4),tr=new ut(fe,"Counterclockwise",5),Nr=new ut(fe,"BidirectionalLeft",6),gl=new ut(fe,"BidirectionalRight",7),$c=new ut(fe,"Forwards",8),Qc=new ut(fe,"Reverse",9),qc=new ut(fe,"Ascending",10),td=new ut(fe,"Descending",11),ml=new ut(fe,"Optimized",12),ed=new ut(fe,"Pythagorean",13),la=new ut(fe,"Circular",14);function Rh(){this.Pl=-1/0,this.tm=this.lk=null}function yl(t){te.call(this,t)}function Yh(t){De.call(this,t),this.u=this.Si=NaN}function er(t,e){var i=t.network;if(null===i)return NaN;if(null===(i=i.layout))return NaN;if(i.arrangement===Vn)if(i.nodeDiameterFormula===la)t.Si=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===i)return t.width;if(0===e)return t.height;t.Si=Math.min(t.height/i,t.width/e)}else t.Si=i.nodeDiameterFormula===la?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Si}function id(t){Zi.call(this,t)}function ni(t){ae.call(this),this.ah=null,this.An=0,this.$d=new Mt(100,100).freeze(),this.Bm=!1,this.sf=!0,this.td=!1,this.cl=100,this.$m=1,this.Zf=1e3,this.In=10,this.fo=Math,this.Gk=.05,this.Fk=50,this.Dk=150,this.Ek=0,this.Vm=10,this.Um=5,t&&Object.assign(this,t)}function jv(t,e,i){if(function ox(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.ah=t.network.vertexes.Fa(),(t=t.ah).sort(function(i,n){return null===i||null===n||i===n?0:n.Vd-i.Vd}),e=t.length-1;0<=e&&1>=t[e].Vd;)e--;return 1<t.length-e}(t,e)){var n=t.Zf;t.Zf*=1+1/(e+1);var s=function rx(t,e){for(var i=t.network,n=new ha(t),s=0;s<t.ah.length;s++){var o=t.ah[s];if(!(1<o.Vd))break;n.dh(o);var l=new Rv;l.Rs=o.Vd,l.Ss=o.width,l.Qs=o.height,l.Tv=o.focus.x,l.Uv=o.focus.y,null===o.We&&(o.We=new dt),o.We.add(l),o.tv=o.We.count-1}for(o=i.edges.iterator;o.next();){var u=o.value;l=u.toVertex,(s=u.fromVertex).network===n&&l.network===n?n.Bo(u):s.network===n?(null===(u=s.Gj)&&(u=new dt,s.Gj=u),u.add(l),s.Vd--,s.sh+=l.sh):l.network===n&&(null===(u=l.Gj)&&(u=new dt,l.Gj=u),u.add(s),l.Vd--,l.sh+=s.sh)}for(s=n.edges.iterator;s.next();)(o=s.value).length*=Math.max(1,_.sqrt((o.fromVertex.sh+o.toVertex.sh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){var c=(s=e.value).Gj;if(null!==c&&0<c.count&&!(0>=(l=s.We.M(s.We.count-1).Rs-s.Vd))){for(var p=u=0,m=c.count-l;m<c.count;m++){var v=c.M(m),w=null;for(o=v.edges.iterator;o.next();){var k=o.value;if(k.Bx(v)===s){w=k;break}}null!==w&&(p+=w.length,u+=v.width*v.height)}o=s.centerX,c=s.centerY,w=s.focus,1>(k=(m=s.width)*(v=s.height))&&(k=1),u=_.sqrt((u+k+p*p*4/(l*l))/k),s.bounds=new q(o-w.x-(l=(u-1)*m/2),c-w.y-(u=(u-1)*v/2),m+2*l,v+2*u),s.focus=new z(w.x+l,w.y+u)}}return t.network=n,i}(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,jv(t,e+1,i),Bv(t,o),function ax(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,null!==n.We){var s=n.We.M(n.tv);n.Vd=s.Rs;var o=s.Tv,l=s.Uv;n.bounds=new q(n.centerX-o,n.centerY-l,s.Ss,s.Qs),n.focus=new z(o,l),n.tv--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}(t,s),(e=s.vertexes.Fa()).sort(function(l,u){return null===l||null===u||l===u?0:u.Vd-l.Vd}),i=0;i<e.length;i++)lx(t,e[i]);t.Zf=n}}function lx(t,e){var i=e.Gj;if(null!==i&&0!==i.count){var n=e.centerX,s=e.centerY,o=e.width,l=e.height;null!==e.We&&0<e.We.count&&(o=(l=e.We.M(0)).Ss,l=l.Qs),o=_.sqrt(o*o+l*l)/2;for(var u=!1,c=l=0,p=0,m=e.vertexes.iterator;m.next();){var v=m.value;1>=v.Vd?c++:(u=!0,p++,l+=Math.atan2(e.centerY-v.centerY,e.centerX-v.centerX))}if(0!==c)for(0<p&&(l/=p),p=e=0,e=u?2*Math.PI/(c+1):2*Math.PI/c,c%2==0&&(p=e/2),1<i.count&&i.sort(function(k,A){return null===k||null===A||k===A?0:A.width*A.height-k.width*k.height}),u=c%2==0?0:1,i=i.iterator;i.next();)if(!(1<(c=i.value).Vd||t.isFixed(c))){for(m=null,v=c.edges.iterator;v.next();){m=v.value;break}var w=c.height;v=_.sqrt((v=c.width)*v+w*w)/2,m=o+m.length+v,v=l+(e*(u/2>>1)+p)*(u%2==0?1:-1),c.centerX=n+m*Math.cos(v),c.centerY=s+m*Math.sin(v),u++}}}function Dv(t,e,i,n,s,o,l){var u=9e19,c=-1,p=0;t:for(;p<e;p++){var m=t[p],v=m.x-i,w=m.y-n;if((v=v*v+w*w)<u){for(w=p-1;0<=w;w--)if(t[w].y>m.y&&t[w].x-m.x<s+l.width)continue t;for(w=p+1;w<e;w++)if(t[w].x>m.x&&t[w].y-m.y<o+l.height)continue t;c=p,u=v}}return c}function zv(t,e){var i=t.bounds,n=i.x;t=i.y;var s=i.width;i=i.height;var o=e.bounds,l=o.x;e=o.y;var u=o.width;return o=o.height,n+s<l?t>e+o?_.sqrt((i=n+s-l)*i+(t=t-e-o)*t):t+i<e?_.sqrt((n=n+s-l)*n+(t=t+i-e)*t):l-(n+s):n>l+u?t>e+o?_.sqrt((i=n-l-u)*i+(t=t-e-o)*t):t+i<e?_.sqrt((n=n-l-u)*n+(t=t+i-e)*t):n-(l+u):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function Bv(t,e){for(t.ah=null,e=t.An+e;t.An<e&&(t.An++,hx(t)););t.ah=null}function hx(t){null===t.ah&&(t.ah=t.network.vertexes.Fa());var e=t.ah;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,s=n,o=i=i.centerY,l=1;l<e.length;l++){var u=e[l];u.forceX=0,u.forceY=0;var c=u.centerX;u=u.centerY,n=Math.min(n,c),s=Math.max(s,c),i=Math.min(i,u),o=Math.max(o,u)}(s=s-n>o-i)?e.sort(function(T,j){return null===T||null===j||T===j?0:T.centerX-j.centerX}):e.sort(function(T,j){return null===T||null===j||T===j?0:T.centerY-j.centerY}),i=t.Zf;var p=n=u=0;for(o=0;o<e.length;o++){var m=(n=(l=e[o]).bounds).y+(u=l.focus).y;n=l.charge*t.electricalFieldX(c=n.x+u.x,m),p=l.charge*t.electricalFieldY(c,m),n+=l.mass*t.gravitationalFieldX(c,m),p+=l.mass*t.gravitationalFieldY(c,m),l.forceX+=n,l.forceY+=p;for(var v=o+1;v<e.length;v++){var w=e[v];if(w!==l){var k=(n=w.bounds).y+(u=w.focus).y;if(c-(p=n.x+u.x)>i||p-c>i){if(s)break}else if(m-k>i||k-m>i){if(!s)break}else{var A=zv(l,w);1>A?(null===(n=t.randomNumberGenerator)&&(t.randomNumberGenerator=n=new nd),A=n.random(),u=n.random(),n=c>p?(1+(n=Math.abs(w.bounds.right-l.bounds.x)))*A:c<p?-(1+(n=Math.abs(w.bounds.x-l.bounds.right)))*A:(1+(n=Math.max(w.width,l.width)))*A-n/2,p=m>k?(1+(p=Math.abs(w.bounds.bottom-l.bounds.y)))*u:c<p?-(1+(p=Math.abs(w.bounds.y-l.bounds.bottom)))*u:(1+(p=Math.max(w.height,l.height)))*u-p/2):(n=(p-c)/A*(u=-l.charge*w.charge/(A*A)),p=(k-m)/A*u),l.forceX+=n,l.forceY+=p,w.forceX-=n,w.forceY-=p}}}}for(s=t.network.edges.iterator;s.next();)n=(l=(i=(u=s.value).fromVertex).bounds).x+(c=i.focus).x,l=l.y+c.y,c=(m=(o=u.toVertex).bounds).x+(v=o.focus).x,m=m.y+v.y,1>(v=zv(i,o))?(null===(v=t.randomNumberGenerator)&&(t.randomNumberGenerator=v=new nd),u=v.random(),v=v.random(),n=(n>c?1:-1)*(1+(o.width>i.width?o.width:i.width))*u,p=(l>m?1:-1)*(1+(o.height>i.height?o.height:i.height))*v):(n=(c-n)/v*(u=u.stiffness*(v-u.length)),p=(m-l)/v*u),i.forceX+=n,i.forceY+=p,o.forceX-=n,o.forceY-=p;for(s=n=0;s<e.length;s++)t.isFixed(i=e[s])?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}function Rv(){this.Uv=this.Tv=this.Qs=this.Ss=this.Rs=0}function ha(t){te.call(this,t)}function Xh(t){De.call(this,t),this.ia=!1,this.Ha=this.u=NaN,this.sh=this.Vd=this.V=this.F=0,this.We=this.Gj=null,this.tv=0}function Hh(t){Zi.call(this,t),this.j=this.o=NaN}function nd(){var t=0;void 0===t&&(t=42),this.seed=t,this.by=48271,this.gy=2147483647,this.Q=44488.07041494893,this.hy=3399,this.ey=1/2147483647,this.random()}function Kt(t){ae.call(this),this.lc=this.ie=25,this.K=0,this.Ck=ld,this.Yk=hd,this.Pk=ud,this.bj=4,this.qk=cd,this.bg=15,this.kl=10,this.sf=!0,this.Cn=4,this.Ra=this.Iq=this.Ia=-1,this.Md=this.Hn=0,this.Ta=this.Kd=this.Ld=this.he=this.vb=null,this.Kn=0,this.Jn=this.kj=null,this.le=0,this.el=null,this.Rf=new z,this.He=[],this.He.length=100,this.yw=this.ve=0,t&&Object.assign(this,t)}function Gp(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Di(t){null===t.kj&&(t.kj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.kj[e]=n.layer,e++,t.kj[e]=n.column,e++,t.kj[e]=n.index,e++}return t.kj}function wn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function Yv(t,e,i){var n=ir(t,e),s=t.vb[e];(null===t.Jn||t.Jn.length<s*s)&&(t.Jn=[]);for(var o=t.Jn,l=0;l<s;l++){var m,u=0,c=n[l],p=c.near;if(null!==p&&p!==c&&p.layer===c.layer&&(u+=Math.max(0,Math.abs(p.index-c.index)-1)),0<=i){var v=n[l].sourceEdgesArrayAccess;for(c=0;c<v.length;c++){var w=v[c];if(w.valid&&w.fromVertex.layer!==e){p=w.fromVertex.index;var k=w.portToPos;for(w=w.portFromPos,m=c+1;m<v.length;m++){var A=v[m];if(A.valid&&A.fromVertex.layer!==e){var T=A.fromVertex.index,j=A.portToPos;A=A.portFromPos,k<j&&(p>T||p===T&&w>A)&&u++,j<k&&(T>p||T===p&&A>w)&&u++}}}}}if(0>=i)for(v=n[l].destinationEdgesArrayAccess,c=0;c<v.length;c++)if((w=v[c]).valid&&w.toVertex.layer!==e)for(p=w.toVertex.index,k=w.portToPos,w=w.portFromPos,m=c+1;m<v.length;m++)(A=v[m]).valid&&A.toVertex.layer!==e&&(T=A.toVertex.index,j=A.portToPos,w<(A=A.portFromPos)&&(p>T||p===T&&k>j)&&u++,A<w&&(T>p||T===p&&j>k)&&u++);for(o[l*s+l]=u,u=l+1;u<s;u++){var I=0,B=0;if(0<=i){v=n[l].sourceEdgesArrayAccess;var R=n[u].sourceEdgesArrayAccess;for(c=0;c<v.length;c++)if((w=v[c]).valid&&w.fromVertex.layer!==e)for(p=w.fromVertex.index,w=w.portFromPos,m=0;m<R.length;m++)(A=R[m]).valid&&A.fromVertex.layer!==e&&(T=A.fromVertex.index,A=A.portFromPos,(p<T||p===T&&w<A)&&B++,(T<p||T===p&&A<w)&&I++)}if(0>=i)for(v=n[l].destinationEdgesArrayAccess,R=n[u].destinationEdgesArrayAccess,c=0;c<v.length;c++)if((w=v[c]).valid&&w.toVertex.layer!==e)for(p=w.toVertex.index,k=w.portToPos,m=0;m<R.length;m++)(A=R[m]).valid&&A.toVertex.layer!==e&&(j=A.portToPos,(p<(T=A.toVertex.index)||p===T&&k<j)&&B++,(T<p||T===p&&j<k)&&I++);o[l*s+u]=I,o[u*s+l]=B}}return nr(t,e,n),o}function sd(t){for(var e=0,i=0;i<=t.Ia;i++){for(var n=t,s=i,o=ir(n,s),l=n.vb[s],u=0,c=0;c<l;c++){var p=o[c].destinationEdgesArrayAccess;if(null!==p)for(var m=0;m<p.length;m++){var v=p[m];v.valid&&v.toVertex.layer!==s&&(u+=(Math.abs(v.fromVertex.column+v.portFromColOffset-(v.toVertex.column+v.portToColOffset))+1)*Gp(v))}}nr(n,s,o),e+=u}return e}function Wp(t,e,i){for(var n=ir(t,e),s=t.vb[e],o=[],l=0;l<s;l++){var u=n[l],c=null;0>=i&&(c=u.sourceEdgesArrayAccess);var p=null;0<=i&&(p=u.destinationEdgesArrayAccess);var m=0,v=0,w=u.near;if(null!==w&&w.layer===u.layer&&(m+=w.column-1,v++),null!==c)for(w=0;w<c.length;w++){var k=(u=c[w]).fromVertex;u.valid&&!u.rev&&k.layer!==e&&(m+=k.column,v++)}if(null!==p)for(c=0;c<p.length;c++)w=(u=p[c]).toVertex,u.valid&&!u.rev&&w.layer!==e&&(m+=w.column,v++);o[l]=0===v?-1:m/v}return nr(t,e,n),o}function Xv(t,e,i){for(var n=ir(t,e),s=t.vb[e],o=[],l=0;l<s;l++){var u=n[l],c=null;0>=i&&(c=u.sourceEdgesArrayAccess);var p=null;0<=i&&(p=u.destinationEdgesArrayAccess);var m=0,v=[],w=u.near;if(null!==w&&w.layer===u.layer&&(v[m]=w.column-1,m++),u=void 0,null!==c)for(w=0;w<c.length;w++){var k=(u=c[w]).fromVertex;u.valid&&!u.rev&&k.layer!==e&&(v[m]=k.column+u.portFromColOffset,m++)}if(null!==p)for(c=0;c<p.length;c++)w=(u=p[c]).toVertex,u.valid&&!u.rev&&w.layer!==e&&(v[m]=w.column+u.portToColOffset,m++);0===m?o[l]=-1:(v.sort(function(A,T){return A-T}),p=m>>1,o[l]=1&m?v[p]:v[p-1]+v[p]>>1)}return nr(t,e,n),o}function Vh(t,e,i,n,s,o){if(e.component===n){if(e.component=i,s)for(var l=e.destinationEdges;l.next();){var u=l.value,c=u.toVertex,p=e.layer-c.layer;p===(u=t.linkMinLength(u))&&Vh(t,c,i,n,s,o)}if(o)for(l=e.sourceEdges;l.next();)(p=(c=(u=l.value).fromVertex).layer-e.layer)===(u=t.linkMinLength(u))&&Vh(t,c,i,n,s,o)}}function Up(t,e,i,n,s,o){if(e.component===n){if(e.component=i,s)for(var l=e.destinationEdges;l.next();)Up(t,l.value.toVertex,i,n,s,o);if(o)for(e=e.sourceEdges;e.next();)Up(t,e.value.fromVertex,i,n,s,o)}}function ux(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Hv(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function Vv(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Kp(t,e){e.Ll=t.Kn,t.Kn++;for(var i=e.destinationEdges;i.next();){var n=i.value,s=n.toVertex;-1===s.Ll&&(n.forest=!0,Kp(t,s))}e.finish=t.Kn,t.Kn++}function Gv(t){for(var e=t.network.vertexes.iterator;e.next();){var i=Wv(t,e.value);t.Ia=Math.max(i,t.Ia)}}function Wv(t,e){var i=0;if(-1===e.layer){for(var n=e.destinationEdges;n.next();){var s=n.value,o=s.toVertex;s=t.linkMinLength(s),i=Math.max(i,Wv(t,o)+s)}e.layer=i}else i=e.layer;return i}function Uv(t,e){var i=0;if(-1===e.layer){for(var n=e.sourceEdges;n.next();){var s=n.value,o=s.fromVertex;s=t.linkMinLength(s),i=Math.max(i,Uv(t,o)+s)}e.layer=i}else i=e.layer;return i}function Kv(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)Kv(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,s=n.length,o=0;o<s;o++){var l=n[o],u=l.fromVertex,c=l.toVertex;l=t.linkMinLength(l),u.layer-c.layer>l&&Vh(t,u,0,-1,!0,!1)}for(Vh(t,e,1,-1,!0,!0);0!==e.component;){for(o=0,n=1/0,u=0,c=null,l=t.network.vertexes.iterator;l.next();){var p=l.value;if(1===p.component){var m=0,v=!1,w=p.sourceEdgesArrayAccess;s=w.length;for(var k=0;k<s;k++){var A=w[k],T=A.fromVertex;m+=1,1!==T.component&&(o+=1,T=T.layer-p.layer,A=t.linkMinLength(A),n=Math.min(n,T-A))}for(s=(w=p.destinationEdgesArrayAccess).length,k=0;k<s;k++)--m,1!==(A=w[k].toVertex).component?--o:v=!0;(null===c||m<u)&&!v&&(c=p,u=m)}}if(0<o){for(i.reset();i.next();)1===(s=i.value).component&&(s.layer+=n);e.component=0}else c.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(Vh(t,e,1,-1,!0,!1);0!==e.component;){for(n=0,s=1/0,o=0,u=null,c=t.network.vertexes.iterator;c.next();)if(1===(l=c.value).component){for(p=0,m=!1,v=(w=l.sourceEdgesArrayAccess).length,k=0;k<v;k++)p+=1,1!==(A=w[k].fromVertex).component?n+=1:m=!0;for(v=(w=l.destinationEdgesArrayAccess).length,k=0;k<v;k++)--p,1!==(T=(A=w[k]).toVertex).component&&(--n,T=l.layer-T.layer,A=t.linkMinLength(A),s=Math.min(s,T-A));(null===u||p>o)&&!m&&(u=l,o=p)}if(0>n){for(i.reset();i.next();)1===(n=i.value).component&&(n.layer-=s);e.component=0}else u.component=0}}}function _v(t,e,i){return 90===t.K?i&&!e.rev||!i&&e.rev?270:90:180===t.K?i&&!e.rev||!i&&e.rev?0:180:270===t.K?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function Zv(t,e,i){for(var n=i[i.length-1].sourceEdges.iterator;n.next();){var s=n.value;if(!s.rev&&s.valid){if(i.push(s=s.fromVertex),s===e||Zv(t,e,i))return!0;i.pop()}}return!1}function Jv(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var s=i.get(e);Array.isArray(s)&&s.forEach(function(c){c.index=t.vb[n],t.vb[n]++})}for(e=e.destinationEdgesArrayAccess,s=!0;s;){s=!1;for(var o=0;o<e.length-1;o++){var l=e[o],u=e[o+1];l.portFromColOffset>u.portFromColOffset&&(s=!0,e[o]=u,e[o+1]=l)}}for(s=0;s<e.length;s++)(o=e[s]).valid&&-1===(o=o.toVertex).index&&Jv(t,o,i)}}function $v(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var s=i.get(e);Array.isArray(s)&&s.forEach(function(c){c.index=t.vb[n],t.vb[n]++})}e=e.sourceEdgesArrayAccess;var o=!0;for(s=0;o;)for(o=!1,s=0;s<e.length-1;s++){var l=e[s],u=e[s+1];l.portToColOffset>u.portToColOffset&&(o=!0,e[s]=u,e[s+1]=l)}for(s=0;s<e.length;s++)(o=e[s]).valid&&-1===(o=o.fromVertex).index&&$v(t,o,i)}}function od(t,e,i){var n=ir(t,e),s=t.vb[e],o=Xv(t,e,i),l=Wp(t,e,i);for(i=0;i<s;i++)-1===l[i]&&(l[i]=n[i].column),-1===o[i]&&(o[i]=n[i].column);for(var c,u=!0;u;)for(u=!1,i=0;i<s-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&l[i+1]<l[i])&&(u=!0,c=o[i],o[i]=o[i+1],o[i+1]=c,c=l[i],l[i]=l[i+1],l[i+1]=c,c=n[i],n[i]=n[i+1],n[i+1]=c);for(i=o=0;i<s;i++)(c=n[i]).index=i,o+=t.nodeMinColumnSpace(c,!0),c.column=o,o+=1,o+=t.nodeMinColumnSpace(c,!1);nr(t,e,n)}function Pn(t,e,i){var n=ir(t,e),s=t.vb[e];i=Yv(t,e,i);var o,l=[];for(o=0;o<s;o++)l[o]=-1;var u=[];for(o=0;o<s;o++)u[o]=-1;for(var c=!1,p=!0;p;)for(p=!1,o=0;o<s-1;o++){var m=i[n[o].index*s+n[o+1].index],v=i[n[o+1].index*s+n[o].index],w=0,k=0,A=n[o].column,T=n[o+1].column,j=t.nodeMinColumnSpace(n[o],!0),I=t.nodeMinColumnSpace(n[o],!1),B=t.nodeMinColumnSpace(n[o+1],!0),R=t.nodeMinColumnSpace(n[o+1],!1);j=A-j+B,I=T-I+R;var H=n[o].sourceEdges.iterator;for(H.reset();H.next();)if(R=(B=H.value).fromVertex,B.valid&&R.layer===e){for(B=0;B<n.length&&n[B]!==R;)B++;B<o&&(w+=2*(o-B),k+=2*(o+1-B)),B===o+1&&(w+=1),B>o+1&&(w+=4*(B-o),k+=4*(B-(o+1)))}for((H=n[o].destinationEdges.iterator).reset();H.next();)if(R=(B=H.value).toVertex,B.valid&&R.layer===e){for(B=0;B<n.length&&n[B]!==R;)B++;B===o+1&&(k+=1)}for((H=n[o+1].sourceEdges.iterator).reset();H.next();)if(R=(B=H.value).fromVertex,B.valid&&R.layer===e){for(B=0;B<n.length&&n[B]!==R;)B++;B<o&&(w+=2*(o+1-B),k+=2*(o-B)),B===o&&(k+=1),B>o+1&&(w+=4*(B-(o+1)),k+=4*(B-o))}for((H=n[o+1].destinationEdges.iterator).reset();H.next();)if(R=(B=H.value).toVertex,B.valid&&R.layer===e){for(B=0;B<n.length&&n[B]!==R;)B++;B===o&&(w+=1)}B=R=0;var K=u[n[o].index],J=l[n[o+1].index],lt=u[n[o+1].index];-1!==(H=l[n[o].index])&&(R+=Math.abs(H-A),B+=Math.abs(H-I)),-1!==K&&(R+=Math.abs(K-A),B+=Math.abs(K-I)),-1!==J&&(R+=Math.abs(J-T),B+=Math.abs(J-j)),-1!==lt&&(R+=Math.abs(lt-T),B+=Math.abs(lt-j)),(k<w-.5||k===w&&v<m-.5||k===w&&v===m&&B<R-.5)&&(p=c=!0,n[o].column=I,n[o+1].column=j,m=n[o],n[o]=n[o+1],n[o+1]=m)}for(o=0;o<s;o++)n[o].index=o;return nr(t,e,n),c}function vl(t,e,i){for(var n=!1;dx(t,e,i);)n=!0;return n}function dx(t,e,i){var n,s=ir(t,e),o=t.vb[e],l=Wp(t,e,-1);if(0<i)for(n=0;n<o;n++)l[n]=-1;var u=Wp(t,e,1);if(0>i)for(n=0;n<o;n++)u[n]=-1;for(var c=!1,p=!0;p;)for(p=!1,n=0;n<o;n++){var k,m=s[n].column,v=t.nodeMinColumnSpace(s[n],!0),w=t.nodeMinColumnSpace(s[n],!1);k=0>n-1||m-s[n-1].column-1>v+t.nodeMinColumnSpace(s[n-1],!1)?m-1:m,v=n+1>=o||s[n+1].column-m-1>w+t.nodeMinColumnSpace(s[n+1],!0)?m+1:m;var A=w=0,T=0;if(0>=i)for(var j=s[n].sourceEdges.iterator;j.next();){var I=j.value,B=I.fromVertex;if(I.valid&&B.layer!==e){var R=Gp(I),H=I.portFromColOffset;I=I.portToColOffset,B=B.column,w+=(Math.abs(m+I-(B+H))+1)*R,A+=(Math.abs(k+I-(B+H))+1)*R,T+=(Math.abs(v+I-(B+H))+1)*R}}if(0<=i)for(j=s[n].destinationEdges.iterator;j.next();)B=(I=j.value).toVertex,I.valid&&B.layer!==e&&(R=Gp(I),H=I.portFromColOffset,I=I.portToColOffset,B=B.column,w+=(Math.abs(m+H-(B+I))+1)*R,A+=(Math.abs(k+H-(B+I))+1)*R,T+=(Math.abs(v+H-(B+I))+1)*R);I=H=R=0,B=u[s[n].index],-1!==(j=l[s[n].index])&&(R+=Math.abs(j-m),H+=Math.abs(j-k),I+=Math.abs(j-v)),-1!==B&&(R+=Math.abs(B-m),H+=Math.abs(B-k),I+=Math.abs(B-v)),A<w||A===w&&H<R?(p=c=!0,s[n].column=k):(T<w||T===w&&I<R)&&(p=c=!0,s[n].column=v)}return nr(t,e,s),t.normalize(),c}function _p(t,e,i){var n=ir(t,e),s=t.vb[e],o=Xv(t,e,i),l=[];for(i=0;i<s;i++)l[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<s;i++){var u=n[i].column,c=t.nodeMinColumnSpace(n[i],!0),p=t.nodeMinColumnSpace(n[i],!1),m=0;if(-1===l[i])if(0===i&&i===s-1)m=u;else if(0===i){var v=n[i+1].column;m=v-u===p+t.nodeMinColumnSpace(n[i+1],!0)?u-1:u}else m=i===s-1?u-(v=n[i-1].column)===c+t.nodeMinColumnSpace(n[i-1],!1)?u+1:u:((c=(v=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1)+(p=(v=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1))/2|0;else 0===i&&i===s-1?m=l[i]:0===i?(p=(v=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1,m=Math.min(l[i],p)):i===s-1?(c=(v=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,m=Math.max(l[i],c)):(c=(v=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,p=(v=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1,c<l[i]&&l[i]<p?m=l[i]:c>=l[i]?m=c:p<=l[i]&&(m=p));m!==u&&(o=!0,n[i].column=m)}nr(t,e,n),t.normalize()}function fx(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var s=n.value,o=t.nodeMinColumnSpace(s,!0),l=t.nodeMinColumnSpace(s,!1);if(s.column-o<=e&&s.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)(i=n.value).column>e&&(--i.column,t=!0);return t}function px(t,e){var n,i=e+1,s=[],o=[];for(n=0;n<=t.Ia;n++)s[n]=!1,o[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){var u=(n=l.value).column-t.nodeMinColumnSpace(n,!0),c=n.column+t.nodeMinColumnSpace(n,!1);u<=e&&c>=e&&(s[n.layer]=!0),u<=i&&c>=i&&(o[n.layer]=!0)}for(u=!0,i=!1,n=0;n<=t.Ia;n++)u=u&&!(s[n]&&o[n]);if(u)for(l.reset();l.next();)(t=l.value).column>e&&(--t.column,i=!0);return i}function Qv(t,e){for(var i=0;i<=t.Ra;i++)for(;fx(t,i););for(t.normalize(),i=0;i<t.Ra;i++)for(;px(t,i););var n;if(t.normalize(),0<e)for(i=0;i<=t.Ra;i++){var s=Di(t),o=sd(t);for(n=o+1;o<n;){n=o,qv(t,i,1);var l=sd(t);l>o?wn(t,s):l<o&&(o=l,s=Di(t))}}if(0>e)for(i=t.Ra;0<=i;i--)for(s=Di(t),n=(o=sd(t))+1;o<n;)n=o,qv(t,i,-1),(l=sd(t))>o?wn(t,s):l<o&&(o=l,s=Di(t));t.normalize()}function qv(t,e,i){t.le=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var s=n.value;s.column-t.nodeMinColumnSpace(s,!0)<=e&&(s.component=t.le)}if(0>i)for(n.reset();n.next();)(s=n.value).column+t.nodeMinColumnSpace(s,!1)>=e&&(s.component=t.le);for(t.le++,n.reset();n.next();)-1===(e=n.value).component&&(Up(t,e,t.le,-1,!0,!0),t.le++);var o;for(e=[],o=0;o<t.le*t.le;o++)e[o]=!1;for(s=[],o=0;o<(t.Ia+1)*(t.Ra+1);o++)s[o]=-1;for(n.reset();n.next();)for(var l=(o=n.value).layer,u=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),c=Math.min(t.Ra,o.column+t.nodeMinColumnSpace(o,!1));u<=c;u++)s[l*(t.Ra+1)+u]=o.component;for(o=0;o<=t.Ia;o++){if(0<i)for(l=0;l<t.Ra;l++)-1!==s[o*(t.Ra+1)+l]&&-1!==s[o*(t.Ra+1)+l+1]&&s[o*(t.Ra+1)+l]!==s[o*(t.Ra+1)+l+1]&&(e[s[o*(t.Ra+1)+l]*t.le+s[o*(t.Ra+1)+l+1]]=!0);if(0>i)for(l=t.Ra;0<l;l--)-1!==s[o*(t.Ra+1)+l]&&-1!==s[o*(t.Ra+1)+l-1]&&s[o*(t.Ra+1)+l]!==s[o*(t.Ra+1)+l-1]&&(e[s[o*(t.Ra+1)+l]*t.le+s[o*(t.Ra+1)+l-1]]=!0)}for(s=[],o=0;o<t.le;o++)s[o]=!0;for((l=[]).push(0);0!==l.length;)if(c=l[l.length-1],l.pop(),s[c])for(s[c]=!1,o=0;o<t.le;o++)e[c*t.le+o]&&l.splice(0,0,o);if(0<i)for(n.reset();n.next();)s[(t=n.value).component]&&--t.column;if(0>i)for(n.reset();n.next();)s[(i=n.value).component]&&(i.column+=1)}function rd(t,e,i,n){for(var s=90===t.K||270===t.K,o=be(e),l=o.next();!l.done;l=o.next()){var u=be(l.value);for(l=u.next();!l.done;l=u.next())(l=l.value).sd=l,l.shift=1/0,l.zc=NaN,l.qg=0}for(l=90===t.K||270===t.K,u=(o=be(e)).next();!u.done;u=o.next())for(var c=(u=be(u.value)).next();!c.done;c=u.next())if((c=c.value).root===c){for(var p=0,m=c;m.align!==c;){var v=m.align,w=l?m.width:m.height,k=l?v.width:v.height;if(i){var A=dd(m,v),T=A.portFromPos,j=A.portToPos;null!==A.link&&(m.node&&m.node!==A.link.fromNode&&(T=l?m.focusX:m.focusY),v.node&&v.node!==A.link.toNode&&(j=l?v.focusX:v.focusY))}else T=(A=dd(v,m)).portToPos,j=A.portFromPos,null!==A.link&&(m.node&&m.node!==A.link.toNode&&(T=l?m.focusX:m.focusY),v.node&&v.node!==A.link.fromNode&&(j=l?v.focusX:v.focusY));v.qg=w=n?m.qg+(w-T)-(k-j):m.qg+T-j,p=Math.min(p,w),m=m.align}m=c;do{m.qg=m.qg-p,m=m.align}while(m!==c)}for(l=(i=be(e)).next();!l.done;l=i.next())for(l=(o=be(l.value)).next();!l.done;l=o.next())(l=l.value).root===l&&t0(t,l,e);for(i=0;i<e.length;i++)if(!(0>=e[i].length)&&(l=e[i][0]).sd===l){l.sd.shift===1/0&&(l.sd.shift=0),l=i,u=0;do{for(o=e[l][u];o.align!==o.root;)l++,0<(o=o.align).vi&&((u=e0(o,e)).sd.shift=Math.min(u.sd.shift,o.sd.shift+o.zc+o.qg-(u.zc+u.qg+(s?u.width:u.height)+t.columnSpacing)));u=o.vi+1}while(l<e.length&&u<e[l].length&&o.sd===e[l][u].sd)}for(t=new kt,l=(e=be(e)).next();!l.done;l=e.next())for(l=(i=be(l.value)).next();!l.done;l=i.next())(l=l.value).zc=l.zc+l.sd.shift+l.qg,o=s?l.width:l.height,t.add(l,n?-l.zc-o:l.zc);return t}function t0(t,e,i){if(isNaN(e.zc)){e.zc=0;var n=e;do{if(0<n.vi){var s=e0(n,i),o=s.root;t0(t,o,i),e.sd===e&&(e.sd=o.sd),e.sd===o.sd&&(e.zc=Math.max(e.zc,o.zc+s.qg+(90===t.K||270===t.K?s.width:s.height)-n.qg+t.columnSpacing))}n=n.align}while(n!==e);for(;n.align!==e;)(n=n.align).zc=e.zc,n.sd=e.sd}}function e0(t,e){var i=t.Uz;return 1>(t=t.vi)&&Q("Could not determine previous vertex in layer"),e[i][t-1]}function vx(t,e,i,n,s){if(!e||0===e.count)return i[s]=0,n[s]=0,1/0;var o=1/0,l=-1/0;return e.each(function(u){var c=u.key;(u=u.value)<o&&(o=u),u+(c=90===t.K||270===t.K?c.width:c.height)>l&&(l=u+c)}),i[s]=o,n[s]=l,l-o}function ad(t,e){return 270===t.K?e?re:Te:90===t.K?e?Te:re:180===t.K?e?ce:Le:e?Le:ce}function ir(t,e){var i=t.vb[e];if(i>=t.He.length){for(var n=[],s=0;s<t.He.length;s++)n[s]=t.He[s];t.He=n}for(null==t.He[i]?n=[]:(n=t.He[i],t.He[i]=null),t=t.el[e],e=0;e<t.length;e++)n[(i=t[e]).index]=i;return n}function nr(t,e,i){t.He[t.vb[e]]=i}fe.className="CircularLayout",fe.ConstantSpacing=Hn,fe.ConstantDistance=qo,fe.ConstantAngle=Lo,fe.Packed=Vn,fe.Clockwise=Ti,fe.Counterclockwise=tr,fe.BidirectionalLeft=Nr,fe.BidirectionalRight=gl,fe.Forwards=$c,fe.Reverse=Qc,fe.Ascending=qc,fe.Descending=td,fe.Optimized=ml,fe.Pythagorean=ed,fe.Circular=la,Rh.prototype.compare=function(t,e){if(0<t&&0>this.Pl||Math.abs(t)<Math.abs(this.Pl)&&!(0>t&&0<this.Pl))for(this.Pl=t,this.lk=[],this.tm=[],t=0;t<e.length;t++)this.lk[t]=e[t].bounds.x,this.tm[t]=e[t].bounds.y},Rh.prototype.commit=function(t){if(null!==this.lk&&null!==this.tm)for(var e=0;e<this.lk.length;e++){var i=t.M(e);i.x=this.lk[e],i.y=this.tm[e]}},Rh.className="VertexArrangement",Vt(yl,te),yl.prototype.createVertex=function(){return new Yh(this)},yl.prototype.createEdge=function(){return new id(this)},yl.className="CircularNetwork",Vt(Yh,De),Tt.Object.defineProperties(Yh.prototype,{diameter:{get:function(){return this.Si},set:function(t){this.Si!==t&&(this.Si=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),Yh.className="CircularVertex",Vt(id,Zi),id.className="CircularEdge",Vt(ni,ae),ni.prototype.cloneProtected=function(t){ae.prototype.cloneProtected.call(this,t),t.$d.assign(this.$d),t.Bm=this.Bm,t.sf=this.sf,t.td=this.td,t.cl=this.cl,t.$m=this.$m,t.Zf=this.Zf,t.In=this.In,t.fo=this.fo,t.Gk=this.Gk,t.Fk=this.Fk,t.Dk=this.Dk,t.Ek=this.Ek,t.Vm=this.Vm,t.Um=this.Um},ni.prototype.createNetwork=function(){return new ha(this)},ni.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Ko();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)(i=e.value).stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Cu(),this.An=0,this.needsClusterLayout()){for(var n=(i=(e=this.network).$x()).iterator;n.next();){this.network=n.value;for(var s=this.network.vertexes.iterator;s.next();){var o=s.value;o.Vd=o.vertexes.count,o.sh=1,o.Gj=null,o.We=null}jv(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var u=l.count,c=!0;o=s=0;for(var p=Xt(),m=0;m<u+e.vertexes.count+2;m++)p[m]=null;u=0,l.reset();for(var v=q.alloc();l.next();)if(this.computeBounds(m=l.value,v),c)c=!1,s=v.x+v.width/2,o=v.y+v.height/2,p[0]=new z(v.x+v.width+n.width,v.y),p[1]=new z(v.x,v.y+v.height+n.height),u=2;else{var w=Dv(p,u,s,o,v.width,v.height,n),k=p[w],A=new z(k.x+v.width+n.width,k.y),T=new z(k.x,k.y+v.height+n.height);for(w+1<u&&p.splice(w+1,0,null),p[w]=A,p[w+1]=T,u++,w=k.x-v.x,k=k.y-v.y,m=m.vertexes.iterator;m.next();)(A=m.value).centerX+=w,A.centerY+=k}for(q.free(v),m=e.vertexes.iterator;m.next();)w=(l=m.value).bounds,2>u?(s=w.x+w.width/2,o=w.y+w.height/2,p[0]=new z(w.x+w.width+n.width,w.y),p[1]=new z(w.x,w.y+w.height+n.height),u=2):(k=new z((v=p[c=Dv(p,u,s,o,w.width,w.height,n)]).x+w.width+n.width,v.y),w=new z(v.x,v.y+w.height+n.height),c+1<u&&p.splice(c+1,0,null),p[c]=k,p[c+1]=w,u++,l.centerX=v.x+l.width/2,l.centerY=v.y+l.height/2);for(Zt(p),n=i.iterator;n.next();){for(s=(i=n.value).vertexes.iterator;s.next();)e.dh(s.value);for(i=i.edges.iterator;i.next();)e.Bo(i.value)}}Bv(this,t),this.updateParts()}this.cl=t,this.network=null,this.isValidLayout=!0},ni.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Yc(i)&&2<++t)return!0;if(10<e)break;e++}return!1},ni.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.ed(n.bounds)}return e},ni.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},ni.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Nu();e.next();){var i=e.value;if("Comment"===i.category&&i.isVisible()){var n=this.network.ki(i);null===n&&(n=this.network.Bl(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var s=n.destinationEdges;s.next();){var o=s.value;if(o.toVertex===t){i=o;break}}if(null===i)for(s=n.sourceEdges;s.next();)if((o=s.value).fromVertex===t){i=o;break}null===i&&(i=this.network.Yj(t,n,null)),i.length=this.defaultCommentSpringLength}}},ni.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},ni.prototype.moveFixedVertex=function(){},ni.prototype.commitLayout=function(){this.zv(),this.commitNodes(),this.isRouting&&this.commitLinks()},ni.prototype.zv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Nt,e.toSpot=Nt)}},ni.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=q.alloc();this.computeBounds(this.network,i),t=(e=this.arrangementOrigin).x-i.x,e=e.y-i.y,q.free(i)}i=q.alloc();for(var n=this.network.vertexes.iterator;n.next();){var s=n.value;(0!==t||0!==e)&&(i.assign(s.bounds),i.x+=t,i.y+=e,s.bounds=i),s.commit()}q.free(i)},ni.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},ni.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Gk:t},ni.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Fk:t},ni.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Dk:t},ni.prototype.electricalFieldX=function(){return 0},ni.prototype.electricalFieldY=function(){return 0},ni.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Ek:t},ni.prototype.gravitationalFieldX=function(){return 0},ni.prototype.gravitationalFieldY=function(){return 0},ni.prototype.isFixed=function(t){return t.isFixed},Tt.Object.defineProperties(ni.prototype,{currentIteration:{get:function(){return this.An}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.Bm},set:function(t){this.Bm!==t&&(this.Bm=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},maxIterations:{get:function(){return this.cl},set:function(t){this.cl!==t&&0<=t&&(this.cl=t,this.C())}},epsilonDistance:{get:function(){return this.$m},set:function(t){this.$m!==t&&0<t&&(this.$m=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.In},set:function(t){this.In!==t&&1<t&&(this.In=t,this.C())}},randomNumberGenerator:{get:function(){return this.fo},set:function(t){this.fo!==t&&(null!==t&&"function"!=typeof t.random&&Q('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.fo=t)}},defaultSpringStiffness:{get:function(){return this.Gk},set:function(t){this.Gk!==t&&(this.Gk=t,this.C())}},defaultSpringLength:{get:function(){return this.Fk},set:function(t){this.Fk!==t&&(this.Fk=t,this.C())}},defaultElectricalCharge:{get:function(){return this.Dk},set:function(t){this.Dk!==t&&(this.Dk=t,this.C())}},defaultGravitationalMass:{get:function(){return this.Ek},set:function(t){this.Ek!==t&&(this.Ek=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,this.C())}}}),ni.className="ForceDirectedLayout",Rv.className="ForceDirectedSubnet",Vt(ha,te),ha.prototype.createVertex=function(){return new Xh(this)},ha.prototype.createEdge=function(){return new Hh(this)},ha.className="ForceDirectedNetwork",Vt(Xh,De),Tt.Object.defineProperties(Xh.prototype,{isFixed:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}}}),Xh.className="ForceDirectedVertex",Vt(Hh,Zi),Tt.Object.defineProperties(Hh.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Hh.className="ForceDirectedEdge",nd.prototype.random=function(){var t=this.seed%this.Q*this.by-this.seed/this.Q*this.hy;return this.seed=0<t?t:t+this.gy,this.seed*this.ey},nd.className="RandomNumberGenerator",Vt(Kt,ae),Kt.prototype.cloneProtected=function(t){ae.prototype.cloneProtected.call(this,t),t.ie=this.ie,t.lc=this.lc,t.K=this.K,t.Ck=this.Ck,t.Yk=this.Yk,t.Pk=this.Pk,t.bj=this.bj,t.qk=this.qk,t.bg=this.bg,t.kl=this.kl,t.sf=this.sf,t.Cn=this.Cn,t.ve=this.ve},Kt.prototype.qb=function(t){t.classType===Kt?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:Q("Unknown enum value: "+t):ae.prototype.qb.call(this,t)},Kt.prototype.createNetwork=function(){return new xl(this)},Kt.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Iq=-1,this.Md=this.Hn=0,this.el=this.Jn=this.kj=null,t=0;t<this.He.length;t++)this.He[t]=null;if(0<this.network.vertexes.count){for(this.network.Ko(),this.cycleRemoveOption!==Gh&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ia=-1,this.assignLayers(),t.reset();t.next();)this.Ia=Math.max(this.Ia,t.value.layer);this.cycleRemoveOption===Gh&&this.removeCycles();for(var e=[],i=(t=this.network).edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){var s=(n=e[i]).fromVertex,o=n.toVertex;if(!(n.valid||(null===s.node&&null===s.data||null===o.node&&null===o.data)&&s.layer===o.layer)){var l=0,u=0,c=0,p=0;if(null!==n.link){if(null===(u=n.link))continue;var m=s.node;if(l=o.node,null===m||null===l)continue;var v=u.fromNode;c=u.toNode;for(var w=u.fromPort;null!==w&&!w.Ed();)w=w.panel;for(u=u.toPort;null!==u&&!u.Ed();)u=u.panel;if(n.rev){p=v;var k=w;v=c,w=u,c=p,u=k}var A=s.focus;p=o.focus;var T=n.rev?o.bounds:s.bounds;k=z.alloc(),m!==v?T.w()&&v.isVisible()?v.actualBounds.w()?(ko(v,w,C,k),k.x+=v.actualBounds.x-T.x,k.y+=v.actualBounds.y-T.y):(ko(v,w,C,k),k.w()||k.assign(A)):k.assign(A):T.w()?(ko(v,w,C,k),k.w()||k.assign(A)):k.assign(A),v=n.rev?s.bounds:o.bounds,m=z.alloc(),l!==c?v.w()&&c.isVisible()?c.actualBounds.w()?(ko(c,u,C,m),m.x+=c.actualBounds.x-v.x,m.y+=c.actualBounds.y-v.y):(ko(c,u,C,m),m.w()||m.assign(p)):m.assign(p):v.w()?(ko(c,u,C,m),m.w()||m.assign(p)):m.assign(p),90===this.K||270===this.K?(l=Math.round((k.x-A.x)/this.lc),c=k.x,u=Math.round((m.x-p.x)/this.lc),p=m.x):(l=Math.round((k.y-A.y)/this.lc),c=k.y,u=Math.round((m.y-p.y)/this.lc),p=m.y),z.free(k),z.free(m),n.portFromColOffset=l,n.portFromPos=c,n.portToColOffset=u,n.portToPos=p}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(k=s.layer,m=o.layer,v=0,null!==(T=n.link)){var j=T.fromPort,I=T.toPort;if(null!==j&&null!==I){var B=T.fromNode;if(w=T.toNode,null!==B&&null!==w){var R=ad(this,!0),H=ad(this,!1),K=this.setsPortSpots?R:T.computeSpot(!0,j);A=this.setsPortSpots?H:T.computeSpot(!1,I);var J=T.isOrthogonal;K.$c()&&K.Hf(H)&&A.$c()&&A.Hf(R)?v=0:(R=T.getLinkPoint(B,j,K,!0,J,w,I,z.alloc()),H=T.getLinkDirection(B,j,R,K,!0,J,w,I),z.free(R),K.ys()||H!==_v(this,n,!0)?this.setsPortSpots&&null!==B&&1===B.ports.count&&n.rev&&(v+=1):v+=1,K=T.getLinkPoint(w,I,A,!1,J,B,j,z.alloc()),T=T.getLinkDirection(w,I,K,A,!1,J,B,j),z.free(K),A.ys()||T!==_v(this,n,!1)?this.setsPortSpots&&null!==w&&1===w.ports.count&&n.rev&&(v+=2):v+=2)}}}if(v=1===(w=v)||3===w,T=null,j=void 0,(w=2===w||3===w)&&(this._experimental&&(A=s,(T=[]).push(o),T=Zv(this,A,T)?T.reverse():[],j=1),(A=t.createVertex()).node=null,A.Du=1,A.layer=k,A.near=s,t.dh(A),(s=t.Yj(s,A,n.link)).valid=!1,s.rev=n.rev,s.portFromColOffset=l,s.portToColOffset=0,s.portFromPos=c,s.portToPos=0,s=A),I=1,v&&I--,k-m>I&&0<k){for(n.valid=!1,(A=t.createVertex()).node=null,A.Du=2,A.layer=k-1,T&&j<T.length&&A.layer===T[j].layer&&(A.near=T[j++]),t.dh(A),(s=t.Yj(s,A,n.link)).valid=!0,s.rev=n.rev,s.portFromColOffset=w?0:l,s.portToColOffset=0,s.portFromPos=w?0:c,s.portToPos=0,s=A,k--;k-m>I&&0<k;)(A=t.createVertex()).node=null,A.Du=3,A.layer=k-1,T&&j<T.length&&A.layer===T[j].layer&&(A.near=T[j++]),t.dh(A),(s=t.Yj(s,A,n.link)).valid=!0,s.rev=n.rev,s.portFromColOffset=0,s.portToColOffset=0,s.portFromPos=0,s.portToPos=0,s=A,k--;(s=t.Yj(A,o,n.link)).valid=!v,v&&(A.near=o),s.rev=n.rev,s.portFromColOffset=0,s.portToColOffset=u,s.portFromPos=0,s.portToPos=p}else n.valid=!0}}for(t=this.vb=[],e=0;e<=this.Ia;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Iq=-1,i=this.Md=this.Hn=0;i<=this.Ia;i++)t[i]>t[this.Md]&&(this.Iq=t[i]-1,this.Md=i),t[i]<t[this.Hn]&&(this.Hn=i);for(this.el=[],i=0;i<t.length;i++)this.el[i]=[];for(e.reset();e.next();)this.el[(t=e.value).layer][t.index]=t;for(this.Ra=-1,t=0;t<=this.Ia;t++){for(e=ir(this,t),i=0,n=this.vb[t],o=0;o<n;o++)i+=this.nodeMinColumnSpace(s=e[o],!0),s.column=i,i+=1,i+=this.nodeMinColumnSpace(s,!1);this.Ra=Math.max(this.Ra,i-1),nr(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Kt.prototype.linkMinLength=function(){return 1},Kt.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Kt.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var i=e?t.fv:t.ev;return null!==i?i:90===(i=this.K)||270===i?e?t.fv=t.focus.x/this.lc+1|0:t.ev=(t.bounds.width-t.focus.x)/this.lc+1|0:e?t.fv=t.focus.y/this.lc+1|0:t.ev=(t.bounds.height-t.focus.y)/this.lc+1|0},Kt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ia;e++)for(var i=Yv(this,e,1),n=this.vb[e],s=0;s<n;s++)for(var o=s;o<n;o++)t+=i[s*n+o];return t},Kt.prototype.normalize=function(){var t=1/0;this.Ra=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ra=Math.max(this.Ra,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ra-=t},Kt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Ck){default:case Zp:var e=0,i=(t=this.network).vertexes.count-1,n=[];n.length=i+1;for(var s=t.vertexes.iterator;s.next();)s.value.valid=!0;for(;null!==ux(t);){for(s=Hv(t);null!==s;)n[i]=s,i--,s.valid=!1,s=Hv(t);for(s=Vv(t);null!==s;)n[e]=s,e++,s.valid=!1,s=Vv(t);s=null;for(var o=0,l=this.network.vertexes.iterator;l.next();){var u=l.value;if(u.valid){for(var c=0,p=u.destinationEdges;p.next();)p.value.toVertex.valid&&c++;p=0;for(var m=u.sourceEdges;m.next();)m.value.fromVertex.valid&&p++;(null===s||o<c-p)&&(s=u,o=c-p)}}null!==s&&(n[e]=s,e++,s.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.index>e.toVertex.index&&(t.gm(e),e.rev=!0);break;case ld:for(n=this.network.vertexes.iterator;n.next();)(t=n.value).Ll=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Kn=0,n.reset();n.next();)0===(e=n.value).sourceEdges.count&&Kp(this,e);for(n.reset();n.next();)-1===(e=n.value).Ll&&Kp(this,e);for(t.reset();t.next();)(n=t.value).forest||(i=(e=n.fromVertex).finish,o=(s=n.toVertex).finish,s.Ll<e.Ll&&i<o&&(this.network.gm(n),n.rev=!0));break;case Gh:for(e=(t=this.network).vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)void 0===(s=n[(i=e.value).layer])?n[i.layer]=[i]:s.push(i);for(i=e=0;i<n.length;i++)if((s=n[i])&&0!==s.length){if(0<i)for(o=0;o<s.length;o++)s[o].layer-=e}else e++;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.layer<e.toVertex.layer&&(t.gm(e),e.rev=!0)}}},Kt.prototype.assignLayers=function(){switch(this.Yk){case Jp:Gv(this);break;case $p:for(var t,e=this.network.vertexes.iterator;e.next();)t=Uv(this,e.value),this.Ia=Math.max(t,this.Ia);for(e.reset();e.next();)(t=e.value).layer=this.Ia-t.layer;break;default:for(Gv(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Kv(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ia=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.Ia=Math.max(this.Ia,i.layer)}}},Kt.prototype.initializeIndices=function(){switch(this.Pk){default:case qp:!function cx(t){var e=null,i=t.network.vertexes.iterator;if(t._experimental){for(;i.next();){var n=i.value;if(n.near&&(null===e&&(e=new kt),n.layer===n.near.layer)){var s=e.get(n.near)||[];s.push(n),e.set(n.near,s)}}i.reset()}for(n={};i.next();)s=i.value,e&&s.near||(n.layer=s.layer,s.index=t.vb[n.layer],t.vb[n.layer]++,e&&(s=e.get(s),Array.isArray(s)&&s.forEach(function(o){return function(l){l.index=t.vb[o.layer],t.vb[o.layer]++}}(n)))),n={layer:n.layer}}(this);break;case ud:var t=null,e=this.network.vertexes.iterator;if(this._experimental)for(;e.next();){var i=e.value;if(i.near&&(null===t&&(t=new kt),i.layer===i.near.layer)){var n=t.get(i.near)||[];n.push(i),t.set(i.near,n)}}for(i=this.Ia;0<=i;i--)for(e.reset();e.next();)(n=e.value).layer===i&&-1===n.index&&Jv(this,n,t);break;case Qp:if(t=null,e=this.network.vertexes.iterator,this._experimental)for(;e.next();)(i=e.value).near&&(null===t&&(t=new kt),i.layer===i.near.layer&&((n=t.get(i.near)||[]).push(i),t.set(i.near,n)));for(i=0;i<=this.Ia;i++)for(e.reset();e.next();)(n=e.value).layer===i&&-1===n.index&&$v(this,n,t)}},Kt.prototype.reduceCrossings=function(){var i,n,o,l,u,t=this.countCrossings(),e=Di(this);for(i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)od(this,n,1),Pn(this,n,1);var s=this.countCrossings();for(s<t&&(t=s,e=Di(this)),n=this.Ia;0<=n;n--)od(this,n,-1),Pn(this,n,-1);(s=this.countCrossings())<t&&(t=s,e=Di(this))}for(wn(this,e),i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)od(this,n,0),Pn(this,n,0);for((s=this.countCrossings())<t&&(t=s,e=Di(this)),n=this.Ia;0<=n;n--)od(this,n,0),Pn(this,n,0);(s=this.countCrossings())<t&&(t=s,e=Di(this))}switch(wn(this,e),this.qk){case tg:break;case eg:for(u=t+1;(n=this.countCrossings())<u;)for(u=n,i=this.Ia;0<=i;i--)for(l=0;l<=i;l++){for(o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,-1)||o;for((s=this.countCrossings())>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,1)||o;for((s=this.countCrossings())>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,1)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,-1)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,0)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,0)||o;s>=t?wn(this,e):(t=s,e=Di(this))}break;default:for(i=this.Ia,l=0,u=t+1;(n=this.countCrossings())<u;){for(u=n,o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,-1)||o;for((s=this.countCrossings())>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,1)||o;for((s=this.countCrossings())>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,1)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,-1)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=Pn(this,n,0)||o;for(s>=t?wn(this,e):(t=s,e=Di(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=Pn(this,n,0)||o;s>=t?wn(this,e):(t=s,e=Di(this))}}wn(this,e)},Kt.prototype.straightenAndPack=function(){if(0===this.ve){var t=0!=(1&this.bg),e=0!=(this.bg&xx);if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.Ia;e++)i[e]=0;for(var n,s=this.network.vertexes.iterator;s.next();){var o=s.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(s.reset();s.next();)(o=s.value).column=(8*(this.Ra-i[e=o.layer])>>1)+8*(n=o.column);this.Ra*=8}if(2&this.bg)for(i=!0,n=0;i&&n<this.kl;){for(i=!1,e=this.Md+1;e<=this.Ia;e++)i=vl(this,e,1)||i;for(e=this.Md-1;0<=e;e--)i=vl(this,e,-1)||i;i=vl(this,this.Md,0)||i,n++}if(4&this.bg){for(e=this.Md+1;e<=this.Ia;e++)_p(this,e,1);for(e=this.Md-1;0<=e;e--)_p(this,e,-1);_p(this,this.Md,0)}if(t&&(Qv(this,-1),Qv(this,1)),2&this.bg)for(i=!0,t=0;i&&t<this.kl;){for(i=!1,i=vl(this,this.Md,0)||i,e=this.Md+1;e<=this.Ia;e++)i=vl(this,e,0)||i;for(e=this.Md-1;0<=e;e--)i=vl(this,e,0)||i;t++}}else!function gx(t){for(var e=Xt(),i=t.el.length,n=0;n<=i;n++)e[n]=[];for(n=t.network.vertexes.iterator;n.next();){var s=n.value;e[i-s.layer][s.index]=s}(function mx(t,e){for(var i=t.length,n=1;n<i-1;n++)for(var s=0,o=0,l=t[n],u=t[n+1],c=0;o<u.length;c++){var p=u[c];t:{if(null===p.node){var m=ig(p);if(0<m.length){m=null===m[0].node;break t}}m=!1}var v=m;if(c===u.length-1||v){for(m=l.length-1,v&&(m=ig(p)[0].index);o<=c;){if(!(p=u[o]).bo){v=[];for(var w=be(p.sourceEdgesArrayAccess),k=w.next();!k.done;k=w.next())(k=k.value).valid&&v.push(k);p.bo=v}for(v=(p=be(p.bo)).next();!v.done;v=p.next())((w=(v=v.value).fromVertex.index)<s||w>m)&&e.add(v);o++}s=m}}})(e,i=new ht);var o=null,l=null,u=null,c=null,p=0!=(1&t.ve),m=0!=(2&t.ve),v=0!=(4&t.ve),w=0!=(8&t.ve);for(p&&(t.verticalAlignment(e,i,!0),o=rd(t,e,!0,!1)),e.reverse(),v&&(t.verticalAlignment(e,i,!1),u=rd(t,e,!1,!1)),s=(n=be(e)).next();!s.done;s=n.next())s.value.reverse();w&&(t.verticalAlignment(e,i,!1),c=rd(t,e,!1,!0)),e.reverse(),m&&(t.verticalAlignment(e,i,!0),l=rd(t,e,!0,!0)),Zt(e),t.u(o,l,u,c),t.network.vertexes.each(function(k){var A=Xt();p&&A.push(o.get(k)),m&&A.push(l.get(k)),v&&A.push(u.get(k)),w&&A.push(c.get(k)),A.sort(function(j,I){return j-I});var T=A.length;T=(A[Math.floor((T-1)/2)]+A[Math.ceil((T-1)/2)])/2,Zt(A),k.zc=T})}(this)},Kt.prototype.verticalAlignment=function(t,e,i){!function yx(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++){var s=i[n];s.root=s,s.align=s,s.Uz=e,s.vi=n}}(t);for(var n=(t=be(t)).next();!n.done;n=t.next())for(var s=-1,o=(n=be(n.value)).next();!o.done;o=n.next()){o=o.value;var l=i?ig(o):wx(o),u=l.length;if(0<u){l.sort(function(v,w){return v.vi-w.vi});var c=(u-1)/2;for(u=Math.floor(c),c=Math.ceil(c);u<=c;u++)if(o.align===o){var m,p=l[u];m=i?dd(p,o):dd(o,p),!e.contains(m)&&s<p.vi&&(p.align=o,o.root=p.root,o.align=p.root,s=p.vi)}}}},Kt.prototype.u=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];i=-1;for(var n=Xt(),s=Xt(),o=1/0,l=0;4>l;l++)if(e[l]){var u=vx(this,e[l],n,s,l);u<o&&(i=l,o=u)}for(o={},l=0;4>l;o={delta:o.delta},l++)e[l]&&(o.delta=0===l||2===l?n[i]-n[l]:s[i]-s[l],0!==o.delta&&e[l].each(function(c){return function(p){p.value+=c.delta}}(o)));Zt(n),Zt(s)},Kt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=ad(this,!0),e=ad(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;null!==n&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Hu(),this.isRouting&&this.commitLinks()},Kt.prototype.commitNodes=function(){this.he=[],this.Ld=[],this.Kd=[],this.Ta=[];for(var t=0;t<=this.Ia;t++)this.he[t]=0,this.Ld[t]=0,this.Kd[t]=0,this.Ta[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.he[i]=Math.max(this.he[i],this.nodeMinLayerSpace(e,!0)),this.Ld[i]=Math.max(this.Ld[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.ie;for(var n=0;n<=this.Ia;n++){var s=i;0>=this.he[n]+this.Ld[n]&&(s=0),0<n&&(e+=s/2),90===this.K||0===this.K?(this.Kd[n]=e+=this.Ld[n],e+=this.he[n]):(this.Kd[n]=e+=this.he[n],e+=this.Ld[n]),n<this.Ia&&(e+=s/2),this.Ta[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.Ia;n++)270===this.K?this.Kd[n]=e.y+this.Kd[n]:90===this.K?(this.Kd[n]=e.y+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]):180===this.K?this.Kd[n]=e.x+this.Kd[n]:(this.Kd[n]=e.x+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]);i=0!==this.ve,t.reset(),n=270===this.K||90===this.K;for(var o=1/0,l=s=1/0,u=-1/0;t.next();){var c=t.value,p=c.layer,m=0|c.column;n?(l=e.x+this.lc*m,p=this.Kd[p]):(l=this.Kd[p],p=e.y+this.lc*m),c.centerX=l,c.centerY=p,i&&isFinite(c.zc)&&(n?c.node?c.x=e.x+c.zc:c.centerX=e.x+c.zc:c.node?c.y=e.y+c.zc:c.centerY=e.y+c.zc),o=Math.min(c.x,o),s=Math.min(c.y,s),n?(l=o,u=Math.max(u,c.bounds.right)):(l=s,u=Math.max(u,c.bounds.bottom))}for(this.yw=u-l,o=e.x-o,e=e.y-s,this.Rf=new z(i&&n?0:o,i&&!n?0:e),t.reset();t.next();)(i=t.value).x+=o,i.y+=e,i.commit()},Kt.prototype.Hu=function(){for(var t=0,e=this.ie,i=0;i<=this.Ia;i++)t+=this.he[i],t+=this.Ld[i];t+=this.Ia*e,e=[],i=0!==this.ve?this.yw:this.lc*this.Ra;for(var n=this.maxLayer;0<=n;n--)e.push(270===this.K?0===n?new q(0,0,i,Math.abs(this.Ta[0])):new q(0,this.Ta[n-1],i,Math.abs(this.Ta[n-1]-this.Ta[n])):90===this.K?0===n?new q(0,this.Ta[0],i,Math.abs(this.Ta[0]-t)):new q(0,this.Ta[n],i,Math.abs(this.Ta[n-1]-this.Ta[n])):180===this.K?0===n?new q(0,0,Math.abs(this.Ta[0]),i):new q(this.Ta[n-1],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i):0===n?new q(this.Ta[0],0,Math.abs(this.Ta[0]-t),i):new q(this.Ta[n],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i));this.commitLayers(e,this.Rf)},Kt.prototype.commitLayers=function(){},Kt.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.uh(),e.Ej(),e.zf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.vg();for(t.reset();t.next();){var i=t.value;if(null!==(e=i.link)){e.uh();var n=e,s=n.fromNode,o=n.toNode,l=n.fromPort,u=n.toPort;if(null!==s){var c=s.findVisibleNode();null!==c&&c!==s&&(s=c,l=c.port)}null!==o&&null!==(c=o.findVisibleNode())&&c!==o&&(o=c,u=c.port);var p=e.computeSpot(!0,l);c=e.computeSpot(!1,u);var m=i.fromVertex,v=i.toVertex;if(i.valid)e.curve===rn&&4===e.pointsCount&&(m.column===v.column&&0===this.alignOption?(i=e.getLinkPoint(s,l,p,!0,!1,o,u),u=e.getLinkPoint(o,u,c,!1,!1,s,l),i.w()||i.set(s.actualBounds.center),u.w()||u.set(o.actualBounds.center),e.Ej(),e.yf(i.x,i.y),e.yf((2*i.x+u.x)/3,(2*i.y+u.y)/3),e.yf((i.x+2*u.x)/3,(i.y+2*u.y)/3),e.yf(u.x,u.y)):(i=n=!1,null!==l&&p===g&&(n=!0),null!==u&&c===g&&(i=!0),(n||i)&&(c=null,n&&((c=e.getLinkPointFromPoint(s,l,l.ga(C),e.i(3),!0)).w()||c.set(s.actualBounds.center),e.L(0,c.x,c.y)),s=null,i&&((s=e.getLinkPointFromPoint(o,u,u.ga(C),e.i(0),!1)).w()||s.set(o.actualBounds.center),e.L(3,s.x,s.y)),c&&(o=e.i(2),e.L(1,(2*c.x+o.x)/3,(2*c.y+o.y)/3)),s&&(o=e.i(1),e.L(2,(2*s.x+o.x)/3,(2*s.y+o.y)/3))))),e.zf();else if(m.layer===v.layer)e.zf();else{var w=!1,k=!1,A=this.ie,T=e.firstPickIndex+1;if(e.isOrthogonal){k=!0;var j=e.pointsCount;4<j&&e.points.removeRange(2,j-3)}else if(e.curve===rn)w=!0,4<(j=e.pointsCount)&&e.points.removeRange(2,j-3),4===j&&(T=2);else{var I=p===g,B=c===g;2<(j=e.pointsCount)&&I&&B?e.points.removeRange(1,j-2):3<j&&I&&!B?e.points.removeRange(1,j-3):3<j&&!I&&B?e.points.removeRange(2,j-2):4<j&&!I&&!B&&e.points.removeRange(2,j-3)}if(i.rev){for(;null!==v&&m!==v;){var R=j=null;for(I=v.sourceEdges.iterator;I.next()&&((B=I.value).link!==i.link||(R=B.toVertex,null!==(j=B.fromVertex).node)););if(null===j)break;if(j!==m){I=e.i(T-1).x,B=e.i(T-1).y;var H=j.centerX,K=j.centerY;if(k)180===this.K||0===this.K?T===e.firstPickIndex+1?(e.m(T++,I,B),e.m(T++,I,K)):(null!==R?R.centerY:B)!==K&&(e.m(T++,R=this.Ta[j.layer-1]+this.Rf.x,B),e.m(T++,R,K)):T===e.firstPickIndex+1?(e.m(T++,I,B),e.m(T++,H,B)):(null!==R?R.centerX:I)!==H&&(e.m(T++,I,R=this.Ta[j.layer-1]+this.Rf.y),e.m(T++,H,R));else if(T===e.firstPickIndex+1){R=Math.max(10,this.he[v.layer]);var J=Math.max(10,this.Ld[v.layer]);if(w)180===this.K?H<=v.bounds.x?(e.m(T++,(v=v.bounds.x)-R,K),e.m(T++,v,K),e.m(T++,v+J,K)):(e.m(T++,H-R,K),e.m(T++,H,K),e.m(T++,H+J,K)):90===this.K?K>=v.bounds.bottom?(e.m(T++,H,(v=v.bounds.y+v.bounds.height)+J),e.m(T++,H,v),e.m(T++,H,v-R)):(e.m(T++,H,K+J),e.m(T++,H,K),e.m(T++,H,K-R)):270===this.K?K<=v.bounds.y?(e.m(T++,H,(v=v.bounds.y)-R),e.m(T++,H,v),e.m(T++,H,v+J)):(e.m(T++,H,K-R),e.m(T++,H,K),e.m(T++,H,K+J)):0===this.K&&(H>=v.bounds.right?(e.m(T++,(v=v.bounds.x+v.bounds.width)+J,K),e.m(T++,v,K),e.m(T++,v-R,K)):(e.m(T++,H+J,K),e.m(T++,H,K),e.m(T++,H-R,K)));else{e.m(T++,I,B);var lt=0;180===this.K||0===this.K?((180===this.K?H>=v.bounds.right:H<=v.bounds.x)&&(lt=(0===this.K?-R:J)/2),e.m(T++,I+lt,K)):((270===this.K?K>=v.bounds.bottom:K<=v.bounds.y)&&(lt=(90===this.K?-R:J)/2),e.m(T++,H,B+lt)),e.m(T++,H,K)}}else R=Math.max(10,this.he[j.layer]),J=Math.max(10,this.Ld[j.layer]),w?180===this.K?(e.m(T++,H-R-A,K),e.m(T++,Math.min(H-R+A/2,H),K),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,Math.max(H+J-A/2,H),K),e.m(T++,H+J+A,K)):90===this.K?(e.m(T++,H,K+J+A),e.m(T++,H,Math.max(K+J-A/2,K)),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,H,Math.min(K-R+A/2,K)),e.m(T++,H,K-R-A)):270===this.K?(e.m(T++,H,K-R-A),e.m(T++,H,Math.min(K-R+A/2,K)),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,H,Math.max(K+J-A/2,K)),e.m(T++,H,K+J+A)):(e.m(T++,H+J+A,K),e.m(T++,Math.max(H+J-A/2,H),K),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,Math.min(H-R+A/2,H),K),e.m(T++,H-R-A,K)):e.m(T++,H,K)}v=j}(null===u||p!==g||k)&&(I=e.i(T-1).x,B=e.i(T-1).y,H=e.i(T).x,K=e.i(T).y,k?(A=this.Ld[m.layer],180===this.K||0===this.K?((k=B)>=m.bounds.y&&k<=m.bounds.bottom&&(180===this.K?H>=m.bounds.x:H<=m.bounds.right)&&(k=k<m.bounds.y+m.bounds.height/2?m.bounds.y-this.lc/2:m.bounds.bottom+this.lc/2,e.m(T++,v=m.centerX+(180===this.K?-A:A),B),e.m(T++,v,k)),e.m(T++,H,k)):((k=I)>=m.bounds.x&&k<=m.bounds.right&&(270===this.K?K>=m.bounds.y:K<=m.bounds.bottom)&&(k=k<m.bounds.x+m.bounds.width/2?m.bounds.x-this.lc/2:m.bounds.right+this.lc/2,e.m(T++,I,v=m.centerY+(270===this.K?-A:A)),e.m(T++,k,v)),e.m(T++,k,K)),e.m(T++,H,K)):w?(R=Math.max(10,this.he[m.layer]),J=Math.max(10,this.Ld[m.layer]),180===this.K&&H>=m.bounds.x?(e.L(T-2,v=m.bounds.x+m.bounds.width,B),e.L(T-1,v+J,B)):90===this.K&&K<=m.bounds.bottom?(e.L(T-2,I,v=m.bounds.y),e.L(T-1,I,v-R)):270===this.K&&K>=m.bounds.y?(e.L(T-2,I,v=m.bounds.y+m.bounds.height),e.L(T-1,I,v+J)):0===this.K&&H<=m.bounds.right&&(e.L(T-2,v=m.bounds.x,B),e.L(T-1,v-R,B))):(R=Math.max(10,this.he[m.layer]),J=Math.max(10,this.Ld[m.layer]),k=0,180===this.K||0===this.K?((180===this.K?H<=m.bounds.x:H>=m.bounds.right)&&(k=(0===this.K?J:-R)/2),e.m(T++,H+k,B)):((270===this.K?K<=m.bounds.y:K>=m.bounds.bottom)&&(k=(90===this.K?J:-R)/2),e.m(T++,I,K+k)),e.m(T++,H,K)))}else{for(;null!==m&&m!==v;){for(R=j=null,m=m.destinationEdges.iterator;m.next()&&((I=m.value).link!==i.link||(null!==(R=I.fromVertex).node&&(R=null),null!==(j=I.toVertex).node)););if(null===j)break;j!==v&&(I=e.i(T-1).x,B=e.i(T-1).y,H=j.centerX,K=j.centerY,k?180===this.K||0===this.K?(null!==R?R.centerY:B)!==K&&(R=this.Ta[j.layer]+this.Rf.x,T===e.firstPickIndex+1&&(R=0===this.K?Math.max(R,I):Math.min(R,I)),e.m(T++,R,B),e.m(T++,R,K)):(null!==R?R.centerX:I)!==H&&(R=this.Ta[j.layer]+this.Rf.y,T===e.firstPickIndex+1&&(R=90===this.K?Math.max(R,B):Math.min(R,B)),e.m(T++,I,R),e.m(T++,H,R)):(R=Math.max(10,this.he[j.layer]),J=Math.max(10,this.Ld[j.layer]),w?180===this.K?(e.m(T++,H+J+A,K),e.m(T++,Math.max(H+J-A/2,H),K),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,Math.min(H-R+A/2,H),K),e.m(T++,H-R-A,K)):90===this.K?(e.m(T++,H,K-R-A),e.m(T++,H,Math.min(K-R+A/2,K)),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,H,Math.max(K+J-A/2,K)),e.m(T++,H,K+J+A)):270===this.K?(e.m(T++,H,K+J+A),e.m(T++,H,Math.max(K+J-A/2,K)),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,H,Math.min(K-R+A/2,K)),e.m(T++,H,K-R-A)):(e.m(T++,H-R-A,K),e.m(T++,Math.min(H-R+A/2,H),K),e.m(T++,H,K),e.m(T++,H,K),e.m(T++,Math.max(H+J-A/2,H),K),e.m(T++,H+J+A,K)):180===this.K?(e.m(T++,H+J,K),e.m(T++,H-R,K)):90===this.K?(e.m(T++,H,K-R),e.m(T++,H,K+J)):270===this.K?(e.m(T++,H,K+J),e.m(T++,H,K-R)):(e.m(T++,H-R,K),e.m(T++,H+J,K)))),m=j}k&&(I=e.i(T-1).x,B=e.i(T-1).y,H=e.i(T).x,K=e.i(T).y,180===this.K||0===this.K?B!==K&&(R=0===this.K?Math.min(Math.max((H+I)/2,this.Ta[v.layer]+this.Rf.x),H):Math.max(Math.min((H+I)/2,this.Ta[v.layer]+this.Rf.x),H),e.m(T++,R,B),e.m(T++,R,K)):I!==H&&(R=90===this.K?Math.min(Math.max((K+B)/2,this.Ta[v.layer]+this.Rf.y),K):Math.max(Math.min((K+B)/2,this.Ta[v.layer]+this.Rf.y),K),e.m(T++,I,R),e.m(T++,H,R)))}null!==n&&w&&4<=e.pointsCount&&(null!==l&&(l=p===g?e.getLinkPointFromPoint(s,l,l.ga(C),e.i(3),!0):e.i(0),p===g&&(p=e.i(2),n=e.i(3),90===this.direction||270===this.direction?(e.L(1,(l.x+p.x)/2,p.y),e.L(2,n.x,(p.y+n.y)/2)):(e.L(1,p.x,(l.y+p.y)/2),e.L(2,(p.x+n.x)/2,n.y))),l.w()||l.set(s.actualBounds.center),e.L(0,l.x,l.y)),null!==u&&(s=c===g?e.getLinkPointFromPoint(o,u,u.ga(C),e.i(e.pointsCount-4),!1):e.i(e.pointsCount-1),c===g&&(u=e.i(e.pointsCount-3),c=e.i(e.pointsCount-4),90===this.direction||270===this.direction?(e.L(e.pointsCount-2,(s.x+u.x)/2,u.y),e.L(e.pointsCount-2,c.x,(u.y+c.y)/2)):(e.L(e.pointsCount-2,u.x,(s.y+u.y)/2),e.L(e.pointsCount-3,(u.x+c.x)/2,c.y))),s.w()||s.set(o.actualBounds.center),e.L(e.pointsCount-1,s.x,s.y))),e.zf(),i.commit()}}}this.avoidOrthogonalOverlaps()},Kt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new dt,e=this.network.edges.iterator;e.next();){var i=e.value.link;null!==i&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(null!==n&&n.isOrthogonal)for(var s=2;s<n.pointsCount-3;s++){var o=n.i(s),l=n.i(s+1);if(this.B(o.y,l.y)&&!this.B(o.x,l.x)){var u=new sr;u.layer=Math.floor(o.y/2);var c=n.i(0),p=n.i(n.pointsCount-1);if(u.first=c.x*c.x+c.y,u.kc=p.x*p.x+p.y,u.rd=Math.min(o.x,l.x),u.Ic=Math.max(o.x,l.x),u.index=s,u.link=n,s+2<n.pointsCount){c=n.i(s-1),p=n.i(s+2);var m=0;c.y<o.y?m=p.y<o.y?3:o.x<l.x?2:1:c.y>o.y&&(m=p.y>o.y?0:l.x<o.x?2:1),u.j=m}i.push(u)}}}if(1<i.length)for(i.sort(this.Wx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Ic,s=t+1;s<n&&i[s].rd<l;)l=Math.max(l,i[s].Ic),s++;if(1<(l=s-o)){for(this.zi(i,this.Js,o,o+l),m=1,u=i[o].kc,c=o;c<s;c++)(p=i[c]).kc!==u&&(m++,u=p.kc);this.zi(i,this.Vx,o,o+l);var v=1;for(u=i[o].first,c=o;c<s;c++)(p=i[c]).first!==u&&(v++,u=p.first);for(c=!0,p=v,m<v?(c=!1,p=m,u=i[o].kc,this.zi(i,this.Js,o,o+l)):u=i[o].first,m=0,v=o;v<s;v++){var w=i[v];(c?w.first:w.kc)!==u&&(m++,u=c?w.first:w.kc);var k=w.link;o=k.i(w.index),l=k.i(w.index+1);var A=this.linkSpacing*(m-(p-1)/2);e++,k.uh(),k.L(w.index,o.x,o.y+A),k.L(w.index+1,l.x,l.y+A),k.zf()}}o=s}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(null!==(n=t.value)&&n.isOrthogonal)for(s=2;s<n.pointsCount-3;s++)o=n.i(s),l=n.i(s+1),this.B(o.x,l.x)&&!this.B(o.y,l.y)&&((u=new sr).layer=Math.floor(o.x/2),c=n.i(0),p=n.i(n.pointsCount-1),u.first=c.x+c.y*c.y,u.kc=p.x+p.y*p.y,u.rd=Math.min(o.y,l.y),u.Ic=Math.max(o.y,l.y),u.index=s,u.link=n,s+2<n.pointsCount&&(c=n.i(s-1),p=n.i(s+2),m=0,c.x<o.x?m=p.x<o.x?3:o.y<l.y?2:1:c.x>o.x&&(m=p.x>o.x?0:l.y<o.y?2:1),u.j=m),i.push(u));if(1<i.length)for(i.sort(this.Wx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Ic,s=t+1;s<n&&i[s].rd<l;)l=Math.max(l,i[s].Ic),s++;if(1<(l=s-o)){for(this.zi(i,this.Js,o,o+l),m=1,u=i[o].kc,c=o;c<s;c++)(p=i[c]).kc!==u&&(m++,u=p.kc);for(this.zi(i,this.Vx,o,o+l),v=1,u=i[o].first,c=o;c<s;c++)(p=i[c]).first!==u&&(v++,u=p.first);for(c=!0,p=v,m<v?(c=!1,p=m,u=i[o].kc,this.zi(i,this.Js,o,o+l)):u=i[o].first,m=0,v=o;v<s;v++)w=i[v],(c?w.first:w.kc)!==u&&(m++,u=c?w.first:w.kc),o=(k=w.link).i(w.index),l=k.i(w.index+1),A=this.linkSpacing*(m-(p-1)/2),e++,k.uh(),k.L(w.index,o.x+A,o.y),k.L(w.index+1,l.x+A,l.y),k.zf()}o=s}t=n}}}},(L=Kt.prototype).Wx=function(t,e){return t instanceof sr&&e instanceof sr&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},L.Vx=function(t,e){return t instanceof sr&&e instanceof sr&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},L.Js=function(t,e){return t instanceof sr&&e instanceof sr&&t!==e?t.kc<e.kc?-1:t.kc>e.kc||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},L.B=function(t,e){return-1<(t-=e)&&1>t},L.zi=function(t,e,i,n){var s=t.length,o=n-i;if(!(1>=o))if((0>i||i>=s-1)&&Q("not in range 0 <= from < length: "+i),2===o)0<e(n=t[i],s=t[i+1])&&(t[i]=s,t[i+1]=n);else if(0===i)if(n>=s)t.sort(e);else for((i=t.slice(0,n)).sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=s)for((n=t.slice(i)).sort(e),e=i;e<s;e++)t[e]=n[e-i];else for((s=t.slice(i,n)).sort(e),e=i;e<n;e++)t[e]=s[e-i]},Tt.Object.defineProperties(Kt.prototype,{layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&0<=t&&(this.ie=t,this.C())}},columnSpacing:{get:function(){return this.lc},set:function(t){this.lc!==t&&0<t&&(this.lc=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.C()):Q("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Ck},set:function(t){this.Ck===t||t!==Zp&&t!==ld&&t!==Gh||(this.Ck=t,this.C())}},layeringOption:{get:function(){return this.Yk},set:function(t){this.Yk===t||t!==hd&&t!==Jp&&t!==$p||(this.Yk=t,this.C())}},initializeOption:{get:function(){return this.Pk},set:function(t){this.Pk===t||t!==ud&&t!==Qp&&t!==qp||(this.Pk=t,this.C())}},iterations:{get:function(){return this.bj},set:function(t){this.bj!==t&&0<=t&&(this.bj=t,this.C())}},aggressiveOption:{get:function(){return this.qk},set:function(t){this.qk===t||t!==tg&&t!==cd&&t!==eg||(this.qk=t,this.C())}},packOption:{get:function(){return this.bg},set:function(t){this.bg!==t&&0<=t&&8>t&&(this.bg=t,this.C())}},packIterations:{get:function(){return this.kl},set:function(t){this.kl=t}},alignOption:{get:function(){return this.ve},set:function(t){this.ve!==t&&0<=t&&16>t&&(this.ve=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},linkSpacing:{get:function(){return this.Cn},set:function(t){this.Cn!==t&&0<=t&&(this.Cn=t,this.C())}},maxLayer:{get:function(){return this.Ia}},maxIndex:{get:function(){return this.Iq}},maxColumn:{get:function(){return this.Ra}},minIndexLayer:{get:function(){return this.Hn}},maxIndexLayer:{get:function(){return this.Md}}});var ld=new ut(Kt,"CycleDepthFirst",0),Zp=new ut(Kt,"CycleGreedy",1),Gh=new ut(Kt,"CycleFromLayers",2),hd=new ut(Kt,"LayerOptimalLinkLength",0),Jp=new ut(Kt,"LayerLongestPathSink",1),$p=new ut(Kt,"LayerLongestPathSource",2),ud=new ut(Kt,"InitDepthFirstOut",0),Qp=new ut(Kt,"InitDepthFirstIn",1),qp=new ut(Kt,"InitNaive",2),tg=new ut(Kt,"AggressiveNone",0),cd=new ut(Kt,"AggressiveLess",1),eg=new ut(Kt,"AggressiveMore",2),xx=8;function sr(){this.index=this.Ic=this.rd=this.kc=this.first=this.layer=0,this.link=null,this.j=0}function xl(t){te.call(this,t)}function bn(t){De.call(this,t),this.$n=this.bo=this.ao=this.co=null,this.Za=this.Ag=this.Ig=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.Ll=NaN,this.Du=0,this.ev=this.fv=null}function i0(t,e){return t.index-e.index}function dd(t,e){if(!t.$n){for(var i=[],n=be(t.destinationEdgesArrayAccess),s=n.next();!s.done;s=n.next())(s=s.value).valid&&i.push(s);t.$n=i}for(i=(t=be(t.$n)).next();!i.done;i=t.next())if((i=i.value).toVertex===e)return i;Q("Unable to find destination edge to given vertex")}function ig(t){if(!t.co){for(var e=[],i=be(t.sourceEdgesArrayAccess),n=i.next();!n.done;n=i.next())!(n=n.value).valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.fromVertex);e.sort(i0),t.co=e}return t.co}function wx(t){if(!t.ao){for(var e=[],i=be(t.destinationEdgesArrayAccess),n=i.next();!n.done;n=i.next())!(n=n.value).valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.toVertex);e.sort(i0),t.ao=e}return t.ao}function Wh(t){Zi.call(this,t),this.j=this.ia=this.Ha=!1,this.V=this.u=NaN,this.F=this.o=0}function It(t){ae.call(this),this.Vb=new ht,this.Wn=md,this.ud=Is,this.vo=vd,this.Bq=fg,this.aw=[],this.td=!0,this.Sb=xd,this.$d=new Mt(10,10).freeze();var e=new fa(this);this.W=new Ln(e),this.Y=new Ln(e),this.ru=[],t&&Object.assign(this,t)}function bx(t){var e=new ht;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function n0(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var s=e.value;switch(t.ud){case Is:s.sourceEdges.count<i&&(i=s.sourceEdges.count,n=s);break;case ca:s.destinationEdges.count<i&&(i=s.destinationEdges.count,n=s);break;default:Q("Unhandled path value "+t.ud.toString())}}return n}function ng(t,e){if(null!==e){switch(t.ud){case Is:if(0<e.destinationEdges.count){for(var i=new dt,n=e.destinationVertexes;n.next();){var s=n.value;s0(t,e,s)&&i.add(s)}0<i.count&&(e.children=i.Fa())}break;case ca:if(0<e.sourceEdges.count){for(i=new dt,n=e.sourceVertexes;n.next();)s0(t,e,s=n.value)&&i.add(s);0<i.count&&(e.children=i.Fa())}break;default:Q("Unhandled path value"+t.ud.toString())}for(n=(i=e.children).length,s=0;s<n;s++){var o=i[s];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Vb.remove(o)}for(e=0;e<n;e++)ng(t,i[e])}}function s0(t,e,i){if(i.initialized){if(null===e)var n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function o0(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===js&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,s=0,o=e.children,l=o.length,u=0;u<l;u++){var c=o[u];o0(t,c),i+=c.descendantCount+1,n=Math.max(n,c.maxChildrenCount),s=Math.max(s,c.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?s+1:0}}function r0(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=(e=e.children).length,n=0;n<i;n++)r0(t,e[n])}}function a0(t,e){if(null!==e){e.alignment!==js&&t.sortTreeVertexChildren(e);for(var i=(e=e.children).length,n=0;n<i;n++)a0(t,e[n])}}function or(t){return t===To||t===js||t===No||t===Qs}function Uh(t){return t===To||t===js}function sg(t){var e=t.parent;if(null!==e){var i=e.alignment;if(or(i)){if(Uh(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2==0}if(i===No)return!0}}return!1}function l0(t,e){if(0===e.childrenCount){var i=!1,n=0;null!==e.parent&&(n=e.parent.angle,i=or(i=e.parent.alignment));var s=sg(e);e.T.h(0,0),e.Da.h(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!s?e.la.h(0,0):180===n&&!i||(90===n||270===n)&&s?e.la.h(e.width-2*e.focus.x,0):e.la.h(0,e.height-2*e.focus.y)}else{i=90===(n=Gn(e))||270===n;for(var o=0,l=(s=e.children).length,u=0;u<l;u++){var c=s[u];o=Math.max(o,i?c.Da.width:c.Da.height)}var p=e.alignment,m=p===Os,v=p===Es;u=or(p);var w=Math.max(0,e.breadthLimit);c=t.computeLayerSpacing(e);var k=e.nodeSpacing,A=t.computeNodeIndent(e),T=m||v?0:A/2,j=e.rowSpacing,I=0;(m||v||e.hm||e.im&&1===e.maxGenerationCount)&&(I=Math.max(0,e.rowIndent)),m=e.width;var B=e.height,R=0,H=0,K=0,J=0,lt=0,gt=0,ft=0,ot=0,tt=0,Ct=0;if(u&&!Uh(p)&&135<n&&s.reverse(),Uh(p))if(1<l)for(var bt=0;bt<l;bt++){var Rt=s[bt],Qt=Rt.Da;bt%2==0&&bt!==l-1?tt=Math.max(tt,(i?Qt.width:Qt.height)+t.computeBusNodeSpacing(Rt)-k):bt%2!=0&&(Ct=Math.max(Ct,(i?Qt.width:Qt.height)+t.computeBusNodeSpacing(Rt)-k))}else 1===l&&(tt=i?s[0].Da.width:s[0].Da.height);if(u)switch(p){case To:case js:tt=(H=135>n?h0(t,e,s,tt,R,H):u0(t,e,s,tt,R,H)).x,R=H.width,H=H.height;break;case No:for(w=0;w<l;w++)K=(T=s[w]).Da,Ct=0===ft?0:j,i?(T.T.h(o-K.width,lt+Ct),R=Math.max(R,K.width),H=Math.max(H,lt+Ct+K.height),lt+=Ct+K.height):(T.T.h(J+Ct,o-K.height),R=Math.max(R,J+Ct+K.width),H=Math.max(H,K.height),J+=Ct+K.width),ft++;break;case Qs:for(o=0;o<l;o++)T=(w=s[o]).Da,K=0===ft?0:j,i?(w.T.h(k/2+e.focus.x,lt+K),R=Math.max(R,T.width),H=Math.max(H,lt+K+T.height),lt+=K+T.height):(w.T.h(J+K,k/2+e.focus.y),R=Math.max(R,J+K+T.width),H=Math.max(H,T.height),J+=K+T.width),ft++}else for(Ct=0;Ct<l;Ct++)Rt=(bt=s[Ct]).Da,i?(0<w&&0<ft&&J+k+Rt.width>w&&(J<o&&Fr(e,p,o-J,0,ot,Ct-1),gt++,ft=0,ot=Ct,K=H,J=0,lt=135<n?-H-j:H+j),Qt=0===ft?T:k,pd(t,bt,0,lt),bt.T.h(J+Qt,lt),R=Math.max(R,J+Qt+Rt.width),H=Math.max(H,K+(0===gt?0:j)+Rt.height),J+=Qt+Rt.width):(0<w&&0<ft&&lt+k+Rt.height>w&&(lt<o&&Fr(e,p,0,o-lt,ot,Ct-1),gt++,ft=0,ot=Ct,K=R,lt=0,J=135<n?-R-j:R+j),Qt=0===ft?T:k,pd(t,bt,J,0),bt.T.h(J,lt+Qt),H=Math.max(H,lt+Qt+Rt.height),R=Math.max(R,K+(0===gt?0:j)+Rt.width),lt+=Qt+Rt.height),ft++;switch(0<gt&&(i?(H+=Math.max(0,c),J<R&&Fr(e,p,R-J,0,ot,l-1),0<I&&(v||ua(e,I,0,0,l-1),R+=I)):(R+=Math.max(0,c),lt<H&&Fr(e,p,0,H-lt,ot,l-1),0<I&&(v||ua(e,0,I,0,l-1),H+=I))),I=v=0,p){case bl:i?v+=R/2-e.focus.x-A/2:I+=H/2-e.focus.y-A/2;break;case da:0<gt?i?v+=R/2-e.focus.x-A/2:I+=H/2-e.focus.y-A/2:i?v+=(t=s[0].T.x+s[0].la.x)+(s[l-1].T.x+s[l-1].la.x+2*s[l-1].focus.x-t)/2-e.focus.x-A/2:I+=(t=s[0].T.y+s[0].la.y)+(s[l-1].T.y+s[l-1].la.y+2*s[l-1].focus.y-t)/2-e.focus.y-A/2;break;case Os:i?(v-=A,R+=A):(I-=A,H+=A);break;case Es:i?(v+=R-e.width+A,R+=A):(I+=H-e.height+A,H+=A);break;case To:case js:i?v+=1<l?tt+k/2-e.focus.x:s[0].focus.x-e.focus.x+s[0].la.x:I+=1<l?tt+k/2-e.focus.y:s[0].focus.y-e.focus.y+s[0].la.y;break;case No:i?v+=R+k/2-e.focus.x:I+=H+k/2-e.focus.y;break;case Qs:break;default:v=(t=t.customAlignment(e,v,I,R,H))[0],I=t[1],R=t[2],H=t[3]}for(t=0;t<l;t++)A=s[t],i?A.T.h(A.T.x+A.la.x-v,A.T.y+(135<n?(u?-H:-A.Da.height)+A.la.y-c:B+c+A.la.y)):A.T.h(A.T.x+(135<n?(u?-R:-A.Da.width)+A.la.x-c:m+c+A.la.x),A.T.y+A.la.y-I);i?(R=og(e,R,v),0>v&&(v=0),135<n&&(I+=H+c),H=Math.max(Math.max(H,B),H+B+c)):(135<n&&(v+=R+c),R=Math.max(Math.max(R,m),R+m+c),H=rg(e,H,I),0>I&&(I=0)),e.la.h(v,I),e.Da.h(R,H)}}function h0(t,e,i,n,s,o){var l=i.length;if(0===l)return new q(n,0,s,o);if(1===l)return new q(n,0,s=(e=i[0]).Da.width,o=e.Da.height);for(var u=e.nodeSpacing,c=e.rowSpacing,p=90===Gn(e),m=0,v=0,w=0,k=0;k<l;k++)if(!(k%2!=0||1<l&&k===l-1)){var A=i[k],T=A.Da,j=0===m?0:c;if(p){var I=t.computeBusNodeSpacing(A)-u;A.T.h(n-(T.width+I),w+j),s=Math.max(s,T.width+I),o=Math.max(o,w+j+T.height),w+=j+T.height}else I=t.computeBusNodeSpacing(A)-u,A.T.h(v+j,n-(T.height+I)),o=Math.max(o,T.height+I),s=Math.max(s,v+j+T.width),v+=j+T.width;m++}for(m=0,A=v,k=w,p?(v=n+u,w=0):(v=0,w=n+u),T=0;T<l;T++)if(T%2!=0){I=(j=i[T]).Da;var B=0===m?0:c;if(p){var R=t.computeBusNodeSpacing(j)-u;j.T.h(v+R,w+B),s=Math.max(s,v+I.width+R),o=Math.max(o,w+B+I.height),w+=B+I.height}else R=t.computeBusNodeSpacing(j)-u,j.T.h(v+B,w+R),s=Math.max(s,v+B+I.width),o=Math.max(o,w+I.height+R),v+=B+I.width;m++}return 1<l&&l%2==1&&(l=(i=i[l-1]).Da,t=t.computeBusLastRowSpacing(i,p?Math.max(Math.abs(k),Math.abs(w)):Math.max(Math.abs(A),Math.abs(v))),p?(i.T.h(n+u/2-i.focus.x-i.la.x,o+t),p=n+u/2-i.focus.x-i.la.x,s=Math.max(s,p+l.width),0>p&&(s-=p),o=Math.max(o,Math.max(k,w)+t+l.height),0>i.T.x&&(n=fd(e,i.T.x,!1,n,u))):(i.T.h(s+t,n+u/2-i.focus.y-i.la.y),s=Math.max(s,Math.max(A,v)+t+l.width),w=n+u/2-i.focus.y-i.la.y,o=Math.max(o,w+l.height),0>w&&(o-=w),0>i.T.y&&(n=fd(e,i.T.y,!0,n,u)))),new q(n,0,s,o)}function u0(t,e,i,n,s,o){var l=i.length;if(0===l)return new q(n,0,s,o);if(1===l)return new q(n,0,s=(i=i[0]).Da.width,o=i.Da.height);for(var u=e.nodeSpacing,c=e.rowSpacing,p=270===Gn(e),m=0,v=0,w=0,k=0;k<l;k++)if(!(k%2!=0||1<l&&k===l-1)){var A=i[k],T=A.Da,j=0===m?0:c;if(p){var I=t.computeBusNodeSpacing(A)-u;A.T.h(n-(T.width+I),w-=j+T.height),s=Math.max(s,T.width+I),o=Math.max(o,Math.abs(w))}else I=t.computeBusNodeSpacing(A)-u,A.T.h(v-=j+T.width,n-(T.height+I)),o=Math.max(o,T.height+I),s=Math.max(s,Math.abs(v));m++}for(m=0,A=v,k=w,p?(v=n+u,w=0):(v=0,w=n+u),T=0;T<l;T++)if(T%2!=0){I=(j=i[T]).Da;var B=0===m?0:c;if(p){var R=t.computeBusNodeSpacing(j)-u;j.T.h(v+R,w-=B+I.height),s=Math.max(s,v+I.width+R),o=Math.max(o,Math.abs(w))}else R=t.computeBusNodeSpacing(j)-u,j.T.h(v-=B+I.width,w+R),o=Math.max(o,w+I.height+R),s=Math.max(s,Math.abs(v));m++}for(1<l&&l%2==1&&(m=(c=i[l-1]).Da,t=t.computeBusLastRowSpacing(c,p?Math.max(Math.abs(k),Math.abs(w)):Math.max(Math.abs(A),Math.abs(v))),p?(c.T.h(n+u/2-c.focus.x-c.la.x,-o-m.height-t),v=n+u/2-c.focus.x-c.la.x,s=Math.max(s,v+m.width),0>v&&(s-=v),o=Math.max(o,Math.abs(Math.min(k,w))+t+m.height),0>c.T.x&&(n=fd(e,c.T.x,!1,n,u))):(c.T.h(-s-m.width-t,n+u/2-c.focus.y-c.la.y),s=Math.max(s,Math.abs(Math.min(A,v))+t+m.width),w=n+u/2-c.focus.y-c.la.y,o=Math.max(o,w+m.height),0>w&&(o-=w),0>c.T.y&&(n=fd(e,c.T.y,!0,n,u)))),e=0;e<l;e++)u=i[e],p?u.T.h(u.T.x,u.T.y+o):u.T.h(u.T.x+s,u.T.y);return new q(n,0,s,o)}function fd(t,e,i,n,s){for(var o=(t=t.children).length,l=0;l<o;l++)i?t[l].T.h(t[l].T.x,t[l].T.y-e):t[l].T.h(t[l].T.x-e,t[l].T.y);return e=t[o-1],Math.max(n,i?e.la.y+e.focus.y-s/2:e.la.x+e.focus.x-s/2)}function og(t,e,i){switch(t.alignment){case da:case bl:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Os:return t.width>e?t.width:e;case Es:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case To:case js:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case No:return t.width-t.focus.x+t.nodeSpacing/2+e;case Qs:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function rg(t,e,i){switch(t.alignment){case da:case bl:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Os:return t.height>e?t.height:e;case Es:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case To:case js:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case No:return t.height-t.focus.y+t.nodeSpacing/2+e;case Qs:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function ag(t,e,i){switch(t){case bl:case da:e/=2,i/=2;break;case Os:i=e=0;break;case Es:break;default:Q("Unhandled alignment value "+t.toString())}return new z(e,i)}function Fr(t,e,i,n,s,o){ua(t,(e=ag(e,i,n)).x,e.y,s,o)}function ua(t,e,i,n,s){if(0!==e||0!==i)for(t=t.children;n<=s;n++){var o=t[n].T;o.x+=e,o.y+=i}}function pd(t,e,i,n){var s=e.parent;switch(t.ud){case Is:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===s&&e.relativePoint.h(i,n);break;case ca:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===s&&e.relativePoint.h(i,n);break;default:Q("Unhandled path value "+t.ud.toString())}}function gd(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];s.x+=e,s.y+=i}}function c0(t,e,i,n,s,o,l,u){var c=Gn(e),p=90===c||270===c,m=e.nodeSpacing;e=n;var v=s;n=o;var w=l,k=i.Yo,A=i.kp;l=i.Da;var T=p?Math.max(w,l.height):Math.max(n,l.width);if((null===k||c!==Gn(i))&&(k=Ri(t,2),A=Ri(t,2),p?(k[0].h(0,0),k[1].h(0,l.height),A[0].h(l.width,0),A[1].h(A[0].x,k[1].y)):(k[0].h(0,0),k[1].h(l.width,0),A[0].h(0,l.height),A[1].h(k[1].x,A[0].y))),p){if(w=9999999,!(null===v||2>v.length||null===k||2>k.length))for(s=i=0;i<v.length&&s<k.length;){var j=k[s];c=j.x,p=j.y,c+=n;var I=o=v[i];i+1<v.length&&(I=v[i+1]);var B=j;j=B.x,B=B.y,s+1<k.length&&(j=(B=k[s+1]).x,B=B.y,j+=n);var R=w;o.y===p?R=c-o.x:o.y>p&&o.y<B?R=c+(o.y-p)/(B-p)*(j-c)-o.x:p>o.y&&p<I.y&&(R=c-(o.x+(p-o.y)/(I.y-o.y)*(I.x-o.x))),R<w&&(w=R),I.y<=o.y?i++:B<=p?s++:(I.y<=B&&i++,B<=I.y&&s++)}if(w=n-w,i=k,s=w+=m,null===e||2>e.length||null===i||2>i.length)n=null;else{for(m=Ri(t,e.length+i.length),n=o=c=0;o<i.length&&i[o].y<e[0].y;)p=i[o++],m[n++].h(p.x+s,p.y);for(;c<e.length;)p=e[c++],m[n++].h(p.x,p.y);for(c=e[e.length-1].y;o<i.length&&i[o].y<=c;)o++;for(;o<i.length&&i[o].y>c;)p=i[o++],m[n++].h(p.x+s,p.y);for(i=Ri(t,n),c=0;c<n;c++)i[c].assign(m[c]);ss(t,m),n=i}if(o=A,c=w,null===v||2>v.length||null===o||2>o.length)s=null;else{for(m=Ri(t,v.length+o.length),s=p=i=0;i<v.length&&v[i].y<o[0].y;)I=v[i++],m[s++].h(I.x,I.y);for(;p<o.length;)I=o[p++],m[s++].h(I.x+c,I.y);for(o=o[o.length-1].y;i<v.length&&v[i].y<=o;)i++;for(;i<v.length&&v[i].y>o;)c=v[i++],m[s++].h(c.x,c.y);for(o=Ri(t,s),i=0;i<s;i++)o[i].assign(m[i]);ss(t,m),s=o}return o=Math.max(0,w)+l.width,l=T,ss(t,e),ss(t,k),ss(t,v),ss(t,A),u[0]=n,u[1]=s,new q(w,0,o,l)}if(n=9999999,!(null===v||2>v.length||null===k||2>k.length))for(s=i=0;i<v.length&&s<k.length;)c=(j=k[s]).x,p=j.y,p+=w,I=o=v[i],i+1<v.length&&(I=v[i+1]),j=(B=j).x,B=B.y,s+1<k.length&&(j=(B=k[s+1]).x,B=B.y,B+=w),R=n,o.x===c?R=p-o.y:o.x>c&&o.x<j?R=p+(o.x-c)/(j-c)*(B-p)-o.y:c>o.x&&c<I.x&&(R=p-(o.y+(c-o.x)/(I.x-o.x)*(I.y-o.y))),R<n&&(n=R),I.x<=o.x?i++:j<=c?s++:(I.x<=j&&i++,j<=I.x&&s++);if(w-=n,i=k,s=w+=m,null===e||2>e.length||null===i||2>i.length)n=null;else{for(m=Ri(t,e.length+i.length),n=o=c=0;o<i.length&&i[o].x<e[0].x;)p=i[o++],m[n++].h(p.x,p.y+s);for(;c<e.length;)p=e[c++],m[n++].h(p.x,p.y);for(c=e[e.length-1].x;o<i.length&&i[o].x<=c;)o++;for(;o<i.length&&i[o].x>c;)p=i[o++],m[n++].h(p.x,p.y+s);for(i=Ri(t,n),c=0;c<n;c++)i[c].assign(m[c]);ss(t,m),n=i}if(o=A,c=w,null===v||2>v.length||null===o||2>o.length)s=null;else{for(m=Ri(t,v.length+o.length),s=p=i=0;i<v.length&&v[i].x<o[0].x;)I=v[i++],m[s++].h(I.x,I.y);for(;p<o.length;)I=o[p++],m[s++].h(I.x,I.y+c);for(o=o[o.length-1].x;i<v.length&&v[i].x<=o;)i++;for(;i<v.length&&v[i].x>o;)c=v[i++],m[s++].h(c.x,c.y);for(o=Ri(t,s),i=0;i<s;i++)o[i].assign(m[i]);ss(t,m),s=o}return o=T,l=Math.max(0,w)+l.height,ss(t,e),ss(t,k),ss(t,v),ss(t,A),u[0]=n,u[1]=s,new q(w,0,o,l)}function Ri(t,e){if(void 0!==(t=t.ru[e])&&void 0!==(t=t.pop()))return t;t=[];for(var i=0;i<e;i++)t[i]=new z;return t}function ss(t,e){var i=e.length,n=t.ru[i];void 0===n&&(t.ru[i]=n=[]),n.push(e)}function lg(t,e,i,n){if(null!==e){e.x=i,e.y=n;for(var s=(e=e.children).length,o=0;o<s;o++){var l=e[o];lg(t,l,i+l.T.x,n+l.T.y)}}}function d0(t,e){if(null!==e){t.setPortSpots(e);for(var i=(e=e.children).length,n=0;n<i;n++)d0(t,e[n])}}function Gn(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}Kt.className="LayeredDigraphLayout",Kt.CycleDepthFirst=ld,Kt.CycleGreedy=Zp,Kt.CycleFromLayers=Gh,Kt.LayerOptimalLinkLength=hd,Kt.LayerLongestPathSink=Jp,Kt.LayerLongestPathSource=$p,Kt.InitDepthFirstOut=ud,Kt.InitDepthFirstIn=Qp,Kt.InitNaive=qp,Kt.AggressiveNone=tg,Kt.AggressiveLess=cd,Kt.AggressiveMore=eg,Kt.PackNone=0,Kt.PackExpand=1,Kt.PackStraighten=2,Kt.PackMedian=4,Kt.PackAll=15,Kt.AlignNone=0,Kt.AlignUpperLeft=1,Kt.AlignUpperRight=2,Kt.AlignLowerLeft=4,Kt.AlignLowerRight=8,Kt.AlignAll=15,sr.className="SegInfo",Vt(xl,te),xl.prototype.createVertex=function(){return new bn(this)},xl.prototype.createEdge=function(){return new Wh(this)},xl.className="LayeredDigraphNetwork",Vt(bn,De),bn.prototype.Cl=function(t){De.prototype.Cl.call(this,t),this.bo=this.co=null},bn.prototype.Kl=function(t){De.prototype.Kl.call(this,t),this.bo=this.co=null},bn.prototype.zl=function(t){De.prototype.zl.call(this,t),this.$n=this.ao=null},bn.prototype.Jl=function(t){De.prototype.Jl.call(this,t),this.$n=this.ao=null},Tt.Object.defineProperties(bn.prototype,{layer:{get:function(){return this.Ig},set:function(t){this.Ig!==t&&(this.Ig=t)}},column:{get:function(){return this.Ag},set:function(t){this.Ag!==t&&(this.Ag=t)}},index:{get:function(){return this.Za},set:function(t){this.Za!==t&&(this.Za=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),bn.prototype.deleteDestinationEdge=bn.prototype.Jl,bn.prototype.addDestinationEdge=bn.prototype.zl,bn.prototype.deleteSourceEdge=bn.prototype.Kl,bn.prototype.addSourceEdge=bn.prototype.Cl,bn.className="LayeredDigraphVertex",Vt(Wh,Zi),Tt.Object.defineProperties(Wh.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},valid:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},rev:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Wh.className="LayeredDigraphEdge",Vt(It,ae),It.prototype.cloneProtected=function(t){ae.prototype.cloneProtected.call(this,t),t.Wn=this.Wn,t.vo=this.vo,t.Bq=this.Bq,t.td=this.td,t.Sb=this.Sb,t.$d.assign(this.$d),t.W.copyInheritedPropertiesFrom(this.W),t.Y.copyInheritedPropertiesFrom(this.Y)},It.prototype.qb=function(t){t.classType===It?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:Q("Unknown enum value: "+t):ae.prototype.qb.call(this,t)},It.prototype.createNetwork=function(){return new fa(this)},It.prototype.makeNetwork=function(t){function e(n){if(n instanceof ct)return!n.isLinkLabel&&"Comment"!==n.category;if(n instanceof st){var s=n.fromNode;return null!==s&&!s.isLinkLabel&&"Comment"!==s.category&&!(null===(n=n.toNode)||n.isLinkLabel||"Comment"===n.category)}return!1}var i=this.createNetwork();return t instanceof $?(i.lg(t.nodes,!0,e),i.lg(t.links,!0,e)):i.lg(t instanceof At?t.memberParts:t.iterator,!1,e),i},It.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==wd&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof $&&(e=t),this.ud=this.path===md&&null!==e?e.isTreePathToChildren?Is:ca:this.path===md?Is:this.path,0<this.network.vertexes.count){for(this.network.Ko(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Vb.count){for(t=new ht,e=this.Vb.iterator;e.next();){var i=e.value;i instanceof ct?null!==(i=this.network.ki(i))&&t.add(i):i instanceof Ln&&t.add(i)}this.Vb=t}for(0===this.Vb.count&&this.findRoots(),t=this.Vb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,ng(this,e));for(e=this.network.vertexes,t=null;0<(t=bx(e)).count;)null!==(e=n0(this,t))&&this.Vb.add(e),e.initialized=!0,ng(this,e),e=t;for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof Ln&&o0(this,e);for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof Ln&&r0(this,e);for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof Ln&&a0(this,e);if(this.Cu(),this.layerStyle===bd){for(t=[],e=this.network.vertexes.iterator;e.next();){var n=(i=e.value).parent;null===n&&(n=i),n=0===n.angle||180===n.angle;var s=t[i.level];void 0===s&&(s=0),t[i.level]=Math.max(s,n?i.width:i.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.aw=t,e=this.network.vertexes.iterator;e.next();)null===(n=(i=e.value).parent)&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(270===n.angle&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===pg)for(t=this.network.vertexes.iterator;t.next();){for(i=0===(e=t.value).angle||180===e.angle,n=-1,s=0;s<e.children.length;s++){var o=e.children[s];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(s=0;s<e.children.length;s++)o=e.children[s],i?(180===e.angle&&(o.focusX+=n-o.width),o.width=n):(270===e.angle&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof Ln&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Vb=new ht,this.isValidLayout=!0},It.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ud){case Is:0===i.sourceEdges.count&&this.Vb.add(i);break;case ca:0===i.destinationEdges.count&&this.Vb.add(i);break;default:Q("Unhandled path value "+this.ud.toString())}}0===this.Vb.count&&null!==(t=n0(this,t))&&this.Vb.add(t)},It.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,s=0;s<i.length;s++)i[s]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=s=0;o<i.length;o++)i[o]!==e&&(n[s++]=i[o]);t.children=n}}},It.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function Sx(t,e){switch(t.vo){default:case vd:return null!==e.parent?e.parent:t.W;case cg:return null===e.parent?t.W:null===e.parent.parent?t.Y:e.parent;case ug:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.Y:t.W;case hg:var i=!0;if(0===e.childrenCount)i=!1;else for(var n=e.children,s=n.length,o=0;o<s;o++)if(0<n[o].childrenCount){i=!1;break}return i&&null!==e.parent?t.Y:null!==e.parent?e.parent:t.W}}(this,t)),null!==t.parent&&t.parent.alignment===js){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2==0?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},It.prototype.assignTreeVertexValues=function(){},It.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case wl:break;case Kh:t.children.reverse();break;case _h:t.children.sort(t.comparer);break;case Zh:t.children.sort(t.comparer),t.children.reverse();break;default:Q("Unhandled sorting value "+t.sorting.toString())}},It.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},It.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,s=!1;null!==i&&(n=i.angle,s=or(s=i.alignment)),e=90===e||270===e,n=90===n||270===n,i=0===t.childrenCount;var o=0,l=0,u=0,c=t.commentSpacing;if(null!==t.node)for(var p=t.node.Nu();p.next();){var m=p.value;"Comment"===m.category&&m.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(m),m.Va(),m=m.measuredBounds,e&&!i||!s&&!n&&i||s&&n&&i?(o=Math.max(o,m.width),l+=m.height+Math.abs(u)):(o+=m.width+Math.abs(u),l=Math.max(l,m.height)),u=c)}null!==t.comments&&(e&&!i||!s&&!n&&i||s&&n&&i?(o+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),s=q.allocAt(0,0,t.bounds.width+o,t.bounds.height+l),t.bounds=s,q.free(s))},It.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,i=t.parent,n=t.angle,s=0,o=!1;null!==i&&(s=i.angle,o=or(o=i.alignment)),n=90===n||270===n,i=90===s||270===s;for(var l=0===t.childrenCount,u=sg(t),c=0,p=t.comments,m=p.length,v=z.alloc(),w=0;w<m;w++){var k=p[w],A=k.measuredBounds;if(n&&!l||!o&&!i&&l||o&&i&&l){if(135<s&&!o||i&&u)if(0<=t.commentMargin)for(v.h(t.bounds.x-t.commentMargin-A.width,t.bounds.y+c),k.move(v),k=k.Sd();k.next();){var T=k.value;T.fromSpot=ce,T.toSpot=Le}else for(v.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+c),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=Le,T.toSpot=ce;else if(0<=t.commentMargin)for(v.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+c),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=Le,T.toSpot=ce;else for(v.h(t.bounds.x+t.commentMargin-A.width,t.bounds.y+c),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=ce,T.toSpot=Le;c=0<=t.commentSpacing?c+(A.height+t.commentSpacing):c+(t.commentSpacing-A.height)}else{if(135<s&&!o||!i&&u)if(0<=t.commentMargin)for(v.h(t.bounds.x+c,t.bounds.y-t.commentMargin-A.height),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=re,T.toSpot=Te;else for(v.h(t.bounds.x+c,t.bounds.y+2*t.focus.y-t.commentMargin),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=Te,T.toSpot=re;else if(0<=t.commentMargin)for(v.h(t.bounds.x+c,t.bounds.y+2*t.focus.y+t.commentMargin),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=Te,T.toSpot=re;else for(v.h(t.bounds.x+c,t.bounds.y+t.commentMargin-A.height),k.move(v),k=k.Sd();k.next();)(T=k.value).fromSpot=re,T.toSpot=Te;c=0<=t.commentSpacing?c+(A.width+t.commentSpacing):c+(t.commentSpacing-A.width)}}if(z.free(v),e=c-t.commentSpacing-(n?e.height:e.width),this.ud===Is)for(t=t.destinationEdges;t.next();)null===(s=t.value.link)||s.isAvoiding||(s.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(s=t.value.link)||s.isAvoiding||(s.toEndSegmentLength=0<e?e:NaN)}},It.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case yd:l0(this,t);break;case Jh:if(t.alignment===js)l0(this,t);else if(0===t.childrenCount)i=!1,e=0,null!==(n=t.parent)&&(e=n.angle,i=or(i=n.alignment)),n=sg(t),t.T.h(0,0),t.Da.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||i)&&!n?t.la.h(0,0):180===e&&!i||(90===e||270===e)&&n?t.la.h(t.width-2*t.focus.x,0):t.la.h(0,t.height-2*t.focus.y),t.Yo=null,t.kp=null;else{var s=Gn(t);e=90===s||270===s;var o=0,l=t.children,u=l.length;for(i=0;i<u;i++)n=l[i],o=Math.max(o,e?n.Da.width:n.Da.height);var c=t.alignment;n=c===Os;var p=c===Es,m=or(c),v=Math.max(0,t.breadthLimit);i=this.computeLayerSpacing(t);var w=t.nodeSpacing,k=this.computeNodeIndent(t),A=t.rowSpacing,T=0;(n||p||t.hm||t.im&&1===t.maxGenerationCount)&&(T=Math.max(0,t.rowIndent)),n=t.width;var j=t.height,I=0,B=0,R=0,H=null,K=null,J=0,lt=0,gt=0,ft=0,ot=0,tt=0,Ct=0,bt=0;if(m&&!Uh(c)&&135<s&&l.reverse(),Uh(c))if(1<u)for(var Rt=0;Rt<u;Rt++)Rt%2==0&&Rt!==u-1&&(bt=Math.max(bt,e?l[Rt].Da.width:l[Rt].Da.height));else 1===u&&(bt=e?l[0].Da.width:l[0].Da.height);if(m){switch(c){case To:bt=(B=135>s?h0(this,t,l,bt,I,B):u0(this,t,l,bt,I,B)).x,I=B.width,B=B.height;break;case No:for(H=0;H<u;H++)v=(K=l[H]).Da,R=0===tt?0:A,e?(K.T.h(o-v.width,ft+R),I=Math.max(I,v.width),B=Math.max(B,ft+R+v.height),ft+=R+v.height):(K.T.h(gt+R,o-v.height),I=Math.max(I,gt+R+v.width),B=Math.max(B,v.height),gt+=R+v.width),tt++;break;case Qs:for(H=0;H<u;H++)o=(K=l[H]).Da,v=0===tt?0:A,e?(K.T.h(w/2+t.focus.x,ft+v),I=Math.max(I,o.width),B=Math.max(B,ft+v+o.height),ft+=v+o.height):(K.T.h(gt+v,w/2+t.focus.y),I=Math.max(I,gt+v+o.width),B=Math.max(B,o.height),gt+=v+o.width),tt++}H=Ri(this,2),K=Ri(this,2),e?(H[0].h(0,0),H[1].h(0,B),K[0].h(I,0)):(H[0].h(0,0),H[1].h(I,0),K[0].h(0,B)),K[1].h(I,B)}else for(Rt=0;Rt<u;Rt++){var Qt=l[Rt],Xe=Qt.Da;if(e){0<v&&0<tt&&gt+w+Xe.width>v&&(gt<o&&Fr(t,c,o-gt,0,Ct,Rt-1),ot++,tt=0,Ct=Rt,R=B,gt=0,ft=135<s?-B-A:B+A),pd(this,Qt,0,ft);var _e=0;if(0===tt)K=Qt.kp,J=Xe.width,lt=Xe.height,(null===(H=Qt.Yo)||null===K||s!==Gn(Qt))&&(H=Ri(this,2),K=Ri(this,2),H[0].h(0,0),H[1].h(0,lt),K[0].h(J,0),K[1].h(J,lt));else{var yi=Xt();_e=(lt=c0(this,t,Qt,H,K,J,lt,yi)).x,H=yi[0],K=yi[1],J=lt.width,lt=lt.height,Zt(yi),gt<Xe.width&&0>_e&&(ua(t,-_e,0,Ct,Rt-1),gd(H,-_e,0),gd(K,-_e,0),_e=0)}Qt.T.h(_e,ft),I=Math.max(I,J),B=Math.max(B,R+(0===ot?0:A)+Xe.height),gt=J}else 0<v&&0<tt&&ft+w+Xe.height>v&&(ft<o&&Fr(t,c,0,o-ft,Ct,Rt-1),ot++,tt=0,Ct=Rt,R=I,ft=0,gt=135<s?-I-A:I+A),pd(this,Qt,gt,0),_e=0,0===tt?(K=Qt.kp,J=Xe.width,lt=Xe.height,(null===(H=Qt.Yo)||null===K||s!==Gn(Qt))&&(H=Ri(this,2),K=Ri(this,2),H[0].h(0,0),H[1].h(J,0),K[0].h(0,lt),K[1].h(J,lt))):(_e=(lt=c0(this,t,Qt,H,K,J,lt,yi=Xt())).x,H=yi[0],K=yi[1],J=lt.width,lt=lt.height,Zt(yi),ft<Xe.height&&0>_e&&(ua(t,0,-_e,Ct,Rt-1),gd(H,0,-_e),gd(K,0,-_e),_e=0)),Qt.T.h(gt,_e),B=Math.max(B,lt),I=Math.max(I,R+(0===ot?0:A)+Xe.width),ft=lt;tt++}switch(0<ot&&(e?(B+=Math.max(0,i),gt<I&&Fr(t,c,I-gt,0,Ct,u-1),0<T&&(p||ua(t,T,0,0,u-1),I+=T)):(I+=Math.max(0,i),ft<B&&Fr(t,c,0,B-ft,Ct,u-1),0<T&&(p||ua(t,0,T,0,u-1),B+=T))),T=p=0,c){case bl:e?p+=I/2-t.focus.x-k/2:T+=B/2-t.focus.y-k/2;break;case da:0<ot?e?p+=I/2-t.focus.x-k/2:T+=B/2-t.focus.y-k/2:e?p+=(bt=l[0].T.x+l[0].la.x)+(l[u-1].T.x+l[u-1].la.x+2*l[u-1].focus.x-bt)/2-t.focus.x-k/2:T+=(bt=l[0].T.y+l[0].la.y)+(l[u-1].T.y+l[u-1].la.y+2*l[u-1].focus.y-bt)/2-t.focus.y-k/2;break;case Os:e?(p-=k,I+=k):(T-=k,B+=k);break;case Es:e?(p+=I-t.width+k,I+=k):(T+=B-t.height+k,B+=k);break;case To:e?p+=1<u?bt+w/2-t.focus.x:l[0].focus.x-t.focus.x+l[0].la.x:T+=1<u?bt+w/2-t.focus.y:l[0].focus.y-t.focus.y+l[0].la.y;break;case No:e?p+=I+w/2-t.focus.x:T+=B+w/2-t.focus.y;break;case Qs:break;default:p=(B=this.customAlignment(t,p,T,I,B))[0],T=B[1],I=B[2],B=B[3]}for(k=0;k<u;k++)bt=l[k],e?bt.T.h(bt.T.x+bt.la.x-p,bt.T.y+(135<s?(m?-B:-bt.Da.height)+bt.la.y-i:j+i+bt.la.y)):bt.T.h(bt.T.x+(135<s?(m?-I:-bt.Da.width)+bt.la.x-i:n+i+bt.la.x),bt.T.y+bt.la.y-T);if(u=l=0,m?e?(I=og(t,I,p),0>p&&(p=0),135<s&&(T+=B+i),B+=j+i,c===Qs&&(l+=w/2+t.focus.x),u+=j+i):(135<s&&(p+=I+i),I+=n+i,B=rg(t,B,T),0>T&&(T=0),c===Qs&&(u+=w/2+t.focus.y),l+=n+i):e?(null===t.comments?n>I&&(l=(I=ag(c,n-I,0)).x,u=I.y,I=n,p=0):I=og(t,I,p),0>p&&(l-=p,p=0),135<s&&(T+=B+i),B=Math.max(Math.max(B,j),B+j+i),u+=j+i):(135<s&&(p+=I+i),I=Math.max(Math.max(I,n),I+n+i),null===t.comments?j>B&&(l=(B=ag(c,0,j-B)).x,u=B.y,B=j,T=0):B=rg(t,B,T),0>T&&(u-=T,T=0),l+=n+i),0<ot)s=Ri(this,4),ot=Ri(this,4),e?(s[2].h(0,j+i),s[3].h(s[2].x,B),ot[2].h(I,s[2].y),ot[3].h(ot[2].x,s[3].y)):(s[2].h(n+i,0),s[3].h(I,s[2].y),ot[2].h(s[2].x,B),ot[3].h(s[3].x,ot[2].y));else{for(s=Ri(this,H.length+2),ot=Ri(this,K.length+2),c=0;c<H.length;c++)s[c+2].h((m=H[c]).x+l,m.y+u);for(c=0;c<K.length;c++)ot[c+2].h((m=K[c]).x+l,m.y+u)}e?(s[0].h(p,0),s[1].h(s[0].x,j),s[2].y<s[1].y&&(s[2].x>s[0].x?s[2].assign(s[1]):s[1].assign(s[2])),s[3].y<s[2].y&&(s[3].x>s[0].x?s[3].assign(s[2]):s[2].assign(s[3])),ot[0].h(p+n,0),ot[1].h(ot[0].x,j),ot[2].y<ot[1].y&&(ot[2].x<ot[0].x?ot[2].assign(ot[1]):ot[1].assign(ot[2])),ot[3].y<ot[2].y&&(ot[3].x<ot[0].x?ot[3].assign(ot[2]):ot[2].assign(ot[3])),s[2].y-=i/2,ot[2].y-=i/2):(s[0].h(0,T),s[1].h(n,s[0].y),s[2].x<s[1].x&&(s[2].y>s[0].y?s[2].assign(s[1]):s[1].assign(s[2])),s[3].x<s[2].x&&(s[3].y>s[0].y?s[3].assign(s[2]):s[2].assign(s[3])),ot[0].h(0,T+j),ot[1].h(n,ot[0].y),ot[2].x<ot[1].x&&(ot[2].y<ot[0].y?ot[2].assign(ot[1]):ot[1].assign(ot[2])),ot[3].x<ot[2].x&&(ot[3].y<ot[0].y?ot[3].assign(ot[2]):ot[2].assign(ot[3])),s[2].x-=i/2,ot[2].x-=i/2),ss(this,H),ss(this,K),t.Yo=s,t.kp=ot,t.la.h(p,T),t.Da.h(I,B)}break;default:Q("Unhandled compaction value "+t.compaction.toString())}}},It.prototype.customAlignment=function(t,e,i,n,s){return[e,i,n,s]},It.prototype.computeBusNodeSpacing=function(t){return null===t.parent?0:t.parent.nodeSpacing},It.prototype.computeBusLastRowSpacing=function(t){return null===t.parent?0:t.parent.rowSpacing},It.prototype.arrangeTrees=function(){if(this.Sb===wd)for(var t=this.Vb.iterator;t.next();){var e=t.value;if(e instanceof Ln){var i=e.node;if(null!==i){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),lg(this,e,i,n)}}}else{for(t=[],e=this.Vb.iterator;e.next();)(i=e.value)instanceof Ln&&t.push(i);switch(this.sorting){case wl:break;case Kh:t.reverse();break;case _h:t.sort(this.comparer);break;case Zh:t.sort(this.comparer),t.reverse();break;default:Q("Unhandled sorting value "+this.sorting.toString())}for(e=(i=this.arrangementOrigin).x,i=i.y,n=0;n<t.length;n++){var s=t[n];switch(lg(this,s,e+s.la.x,i+s.la.y),this.Sb){case xd:i+=s.Da.height+this.$d.height;break;case dg:e+=s.Da.width+this.$d.width;break;default:Q("Unhandled arrangement value "+this.Sb.toString())}}}},It.prototype.commitLayout=function(){this.zv(),this.commitNodes(),this.Hu(),this.isRouting&&this.commitLinks()},It.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},It.prototype.Hu=function(){if(this.layerStyle===bd){for(var t=this.aw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var s=n.value;null===i?i=s.bounds.copy():i.ed(s.bounds);var o=e[s.level];o=void 0===o?this.computeLayerSpacing(s):Math.max(o,this.computeLayerSpacing(s)),e[s.level]=o}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);if(90===this.angle||270===this.angle?(i.Bc(this.nodeSpacing/2,this.layerSpacing),n=new z(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Bc(this.layerSpacing,this.nodeSpacing/2),n=new z(-this.layerSpacing/2,-this.nodeSpacing/2)),s=[],i=90===this.angle||270===this.angle?i.width:i.height,o=0,180===this.angle||270===this.angle)for(var l=0;l<t.length;l++)o+=t[l]+e[l];for(l=0;l<t.length;l++){var u=t[l]+e[l];270===this.angle?s.push(new q(0,o-=u,i,u)):90===this.angle?(s.push(new q(0,o,i,u)),o+=u):180===this.angle?s.push(new q(o-=u,0,u,i)):(s.push(new q(o,0,u,i)),o+=u)}this.commitLayers(s,n)}},It.prototype.commitLayers=function(){},It.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},It.prototype.zv=function(){for(var t=this.Vb.iterator;t.next();){var e=t.value;e instanceof Ln&&d0(this,e)}},It.prototype.setPortSpots=function(t){var e=t.alignment;if(or(e)){var i=this.ud===Is,n=Gn(t);switch(n){case 0:var s=Le;break;case 90:s=Te;break;case 180:s=ce;break;default:s=re}var o=t.children,l=o.length;switch(e){case To:case js:for(e=0;e<l;e++){var u=o[e];if(null!==(u=(i?u.sourceEdges:u.destinationEdges).first())&&null!==(u=u.link)){var c=90===n||270===n?ce:re;if(1===l||e===l-1&&l%2==1)switch(n){case 0:c=ce;break;case 90:c=re;break;case 180:c=Le;break;default:c=Te}else e%2==0&&(c=90===n||270===n?Le:Te);i?(t.setsPortSpot&&(u.fromSpot=s),t.setsChildPortSpot&&(u.toSpot=c)):(t.setsPortSpot&&(u.fromSpot=c),t.setsChildPortSpot&&(u.toSpot=s))}}break;case No:for(n=90===n||270===n?Le:Te,o=i?t.destinationEdges:t.sourceEdges;o.next();)null!==(l=o.value.link)&&(i?(t.setsPortSpot&&(l.fromSpot=s),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=s)));break;case Qs:for(n=90===n||270===n?ce:re,o=i?t.destinationEdges:t.sourceEdges;o.next();)null!==(l=o.value.link)&&(i?(t.setsPortSpot&&(l.fromSpot=s),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=s)))}}else if(i=Gn(t),this.ud===Is){for(s=t.destinationEdges;s.next();)if(null!==(n=s.value.link)){if(t.setsPortSpot)if(t.portSpot.Yb())switch(i){case 0:n.fromSpot=Le;break;case 90:n.fromSpot=Te;break;case 180:n.fromSpot=ce;break;default:n.fromSpot=re}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Yb())switch(i){case 0:n.toSpot=ce;break;case 90:n.toSpot=re;break;case 180:n.toSpot=Le;break;default:n.toSpot=Te}else n.toSpot=t.childPortSpot}}else for(s=t.sourceEdges;s.next();)if(null!==(n=s.value.link)){if(t.setsPortSpot)if(t.portSpot.Yb())switch(i){case 0:n.toSpot=Le;break;case 90:n.toSpot=Te;break;case 180:n.toSpot=ce;break;default:n.toSpot=re}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Yb())switch(i){case 0:n.fromSpot=ce;break;case 90:n.fromSpot=re;break;case 180:n.fromSpot=Le;break;default:n.fromSpot=Te}else n.fromSpot=t.childPortSpot}},It.prototype.computeLayerSpacing=function(t){var e=Gn(t);e=90===e||270===e;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i},It.prototype.computeNodeIndent=function(t){var e=Gn(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=90===e||270===e?t.width*n:t.height*n}return Math.max(0,i)},Tt.Object.defineProperties(It.prototype,{roots:{get:function(){return this.Vb},set:function(t){this.Vb!==t&&(this.Vb=t,this.C())}},path:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t,this.C())}},treeStyle:{get:function(){return this.vo},set:function(t){this.Sb===t||t!==vd&&t!==ug&&t!==hg&&t!==cg||(this.vo=t,this.C())}},layerStyle:{get:function(){return this.Bq},set:function(t){this.Sb===t||t!==fg&&t!==pg&&t!==bd||(this.Bq=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==xd&&t!==dg&&t!==wd||(this.Sb=t,this.C())}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},rootDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.C())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.C())}},sorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==wl&&t!==Kh&&t!==_h&&!Zh||(this.W.sorting=t,this.C())}},comparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.C())}},angle:{get:function(){return this.W.angle},set:function(t){this.W.angle!==t&&(0===t||90===t||180===t||270===t?(this.W.angle=t,this.C()):Q("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.C())}},nodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==yd&&t!==Jh||(this.W.compaction=t,this.C())}},breadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.D(t)||(this.W.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.D(t)||(this.W.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==wl&&t!==Kh&&t!==_h&&!Zh||(this.Y.sorting=t,this.C())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.C())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.Y.angle=t,this.C())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==yd&&t!==Jh||(this.Y.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.D(t)||(this.Y.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.D(t)||(this.Y.childPortSpot=t,this.C())}}});var md=new ut(It,"PathDefault",-1),Is=new ut(It,"PathDestination",0),ca=new ut(It,"PathSource",1),wl=new ut(It,"SortingForwards",10),Kh=new ut(It,"SortingReverse",11),_h=new ut(It,"SortingAscending",12),Zh=new ut(It,"SortingDescending",13),bl=new ut(It,"AlignmentCenterSubtrees",20),da=new ut(It,"AlignmentCenterChildren",21),Os=new ut(It,"AlignmentStart",22),Es=new ut(It,"AlignmentEnd",23),To=new ut(It,"AlignmentBus",24),js=new ut(It,"AlignmentBusBranching",25),No=new ut(It,"AlignmentTopLeftBus",26),Qs=new ut(It,"AlignmentBottomRightBus",27),yd=new ut(It,"CompactionNone",30),Jh=new ut(It,"CompactionBlock",31),vd=new ut(It,"StyleLayered",40),hg=new ut(It,"StyleLastParents",41),ug=new ut(It,"StyleAlternating",42),cg=new ut(It,"StyleRootOnly",43),xd=new ut(It,"ArrangementVertical",50),dg=new ut(It,"ArrangementHorizontal",51),wd=new ut(It,"ArrangementFixedRoots",52),fg=new ut(It,"LayerIndividual",60),pg=new ut(It,"LayerSiblings",61),bd=new ut(It,"LayerUniform",62);function fa(t){te.call(this,t)}function Ln(t){De.call(this,t),this.V=!1,this.hb=null,this.u=[],this.nb=this.Ha=this.F=this.ia=0,this.td=null,this.T=new z(0,0),this.Da=new Mt(0,0),this.la=new z(0,0),this.im=this.hm=this.rA=!1,this.kp=this.Yo=null,this.nd=wl,this.hd=Ep,this.Lb=0,this.Kb=da,this.Vq=this.Uq=0,this.Wq=20,this.ie=50,this.Aq=0,this.Hp=Jh,this.Ap=0,this.nr=25,this.Gp=this.mr=10,this.Fp=20,this.xr=!0,this.dr=Nt,this.wr=!0,this.Dp=Nt}function Sl(t){Zi.call(this,t),this.$t=new z(0,0)}It.className="TreeLayout",It.PathDefault=md,It.PathDestination=Is,It.PathSource=ca,It.SortingForwards=wl,It.SortingReverse=Kh,It.SortingAscending=_h,It.SortingDescending=Zh,It.AlignmentCenterSubtrees=bl,It.AlignmentCenterChildren=da,It.AlignmentStart=Os,It.AlignmentEnd=Es,It.AlignmentBus=To,It.AlignmentBusBranching=js,It.AlignmentTopLeftBus=No,It.AlignmentBottomRightBus=Qs,It.CompactionNone=yd,It.CompactionBlock=Jh,It.StyleLayered=vd,It.StyleLastParents=hg,It.StyleAlternating=ug,It.StyleRootOnly=cg,It.ArrangementVertical=xd,It.ArrangementHorizontal=dg,It.ArrangementFixedRoots=wd,It.LayerIndividual=fg,It.LayerSiblings=pg,It.LayerUniform=bd,Vt(fa,te),fa.prototype.createVertex=function(){return new Ln(this)},fa.prototype.createEdge=function(){return new Sl(this)},fa.className="TreeNetwork",Vt(Ln,De),Ln.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.nd=t.sorting,this.hd=t.comparer,this.Lb=t.angle,this.Kb=t.alignment,this.Uq=t.nodeIndent,this.Vq=t.nodeIndentPastParent,this.Wq=t.nodeSpacing,this.ie=t.layerSpacing,this.Aq=t.layerSpacingParentOverlap,this.Hp=t.compaction,this.Ap=t.breadthLimit,this.nr=t.rowSpacing,this.mr=t.rowIndent,this.Gp=t.commentSpacing,this.Fp=t.commentMargin,this.xr=t.setsPortSpot,this.dr=t.portSpot,this.wr=t.setsChildPortSpot,this.Dp=t.childPortSpot)},Tt.Object.defineProperties(Ln.prototype,{initialized:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},parent:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.u=t}}},level:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},maxGenerationCount:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},comments:{get:function(){return this.td},set:function(t){if(this.td!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.td=t}}},sorting:{get:function(){return this.nd},set:function(t){this.nd!==t&&(this.nd=t)}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t)}},angle:{get:function(){return this.Lb},set:function(t){this.Lb!==t&&(this.Lb=t)}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t)}},nodeIndent:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},nodeIndentPastParent:{get:function(){return this.Vq},set:function(t){this.Vq!==t&&(this.Vq=t)}},nodeSpacing:{get:function(){return this.Wq},set:function(t){this.Wq!==t&&(this.Wq=t)}},layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&(this.ie=t)}},layerSpacingParentOverlap:{get:function(){return this.Aq},set:function(t){this.Aq!==t&&(this.Aq=t)}},compaction:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}},breadthLimit:{get:function(){return this.Ap},set:function(t){this.Ap!==t&&(this.Ap=t)}},rowSpacing:{get:function(){return this.nr},set:function(t){this.nr!==t&&(this.nr=t)}},rowIndent:{get:function(){return this.mr},set:function(t){this.mr!==t&&(this.mr=t)}},commentSpacing:{get:function(){return this.Gp},set:function(t){this.Gp!==t&&(this.Gp=t)}},commentMargin:{get:function(){return this.Fp},set:function(t){this.Fp!==t&&(this.Fp=t)}},setsPortSpot:{get:function(){return this.xr},set:function(t){this.xr!==t&&(this.xr=t)}},portSpot:{get:function(){return this.dr},set:function(t){this.dr.D(t)||(this.dr=t)}},setsChildPortSpot:{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t)}},childPortSpot:{get:function(){return this.Dp},set:function(t){this.Dp.D(t)||(this.Dp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.T},set:function(t){this.T.set(t)}},subtreeSize:{get:function(){return this.Da},set:function(t){this.Da.set(t)}},subtreeOffset:{get:function(){return this.la},set:function(t){this.la.set(t)}}}),Ln.className="TreeVertex",Vt(Sl,Zi),Sl.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ud){case Is:i=this.fromVertex,n=this.toVertex;break;case ca:i=this.toVertex,n=this.fromVertex;break;default:Q("Unhandled path value "+e.ud.toString())}if(null!==i&&null!==n){var s=this.$t;if(0!==s.x||0!==s.y||i.rA){n=i.bounds;var o=Gn(i),l=e.computeLayerSpacing(i),u=i.rowSpacing;t.vg();var m,c=t.curve===rn,p=t.isOrthogonal;if(t.uh(),p||c){for(m=2;4<t.pointsCount;)t.qv(2);var v=t.i(1),w=t.i(2)}else{for(m=1;3<t.pointsCount;)t.qv(1);v=t.i(0),w=t.i(t.pointsCount-1)}var k=t.i(t.pointsCount-1);0===o?(i.alignment===Es?(o=n.bottom+s.y,0===s.y&&v.y>k.y+i.rowIndent&&(o=Math.min(o,Math.max(v.y,o-e.computeNodeIndent(i))))):i.alignment===Os?(o=n.top+s.y,0===s.y&&v.y<k.y-i.rowIndent&&(o=Math.max(o,Math.min(v.y,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&1===i.maxGenerationCount?n.top-i.la.y+s.y:n.y+n.height/2+s.y,c?(t.m(m,v.x,o),m++,t.m(m,n.right+l,o),m++,t.m(m,n.right+l+(s.x-u)/3,o),m++,t.m(m,n.right+l+2*(s.x-u)/3,o),m++,t.m(m,n.right+l+(s.x-u),o),m++,t.m(m,w.x,o)):(p&&(t.m(m,n.right+l/2,v.y),m++),t.m(m,n.right+l/2,o),m++,t.m(m,n.right+l+s.x-(p?u/2:u),o),m++,p&&t.m(m,t.i(m-1).x,w.y))):90===o?(i.alignment===Es?(o=n.right+s.x,0===s.x&&v.x>k.x+i.rowIndent&&(o=Math.min(o,Math.max(v.x,o-e.computeNodeIndent(i))))):i.alignment===Os?(o=n.left+s.x,0===s.x&&v.x<k.x-i.rowIndent&&(o=Math.max(o,Math.min(v.x,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&1===i.maxGenerationCount?n.left-i.la.x+s.x:n.x+n.width/2+s.x,c?(t.m(m,o,v.y),m++,t.m(m,o,n.bottom+l),m++,t.m(m,o,n.bottom+l+(s.y-u)/3),m++,t.m(m,o,n.bottom+l+2*(s.y-u)/3),m++,t.m(m,o,n.bottom+l+(s.y-u)),m++,t.m(m,o,w.y)):(p&&(t.m(m,v.x,n.bottom+l/2),m++),t.m(m,o,n.bottom+l/2),m++,t.m(m,o,n.bottom+l+s.y-(p?u/2:u)),m++,p&&t.m(m,w.x,t.i(m-1).y))):180===o?(i.alignment===Es?(o=n.bottom+s.y,0===s.y&&v.y>k.y+i.rowIndent&&(o=Math.min(o,Math.max(v.y,o-e.computeNodeIndent(i))))):i.alignment===Os?(o=n.top+s.y,0===s.y&&v.y<k.y-i.rowIndent&&(o=Math.max(o,Math.min(v.y,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&1===i.maxGenerationCount?n.top-i.la.y+s.y:n.y+n.height/2+s.y,c?(t.m(m,v.x,o),m++,t.m(m,n.left-l,o),m++,t.m(m,n.left-l+(s.x+u)/3,o),m++,t.m(m,n.left-l+2*(s.x+u)/3,o),m++,t.m(m,n.left-l+(s.x+u),o),m++,t.m(m,w.x,o)):(p&&(t.m(m,n.left-l/2,v.y),m++),t.m(m,n.left-l/2,o),m++,t.m(m,n.left-l+s.x+(p?u/2:u),o),m++,p&&t.m(m,t.i(m-1).x,w.y))):270===o?(i.alignment===Es?(o=n.right+s.x,0===s.x&&v.x>k.x+i.rowIndent&&(o=Math.min(o,Math.max(v.x,o-e.computeNodeIndent(i))))):i.alignment===Os?(o=n.left+s.x,0===s.x&&v.x<k.x-i.rowIndent&&(o=Math.max(o,Math.min(v.x,o+e.computeNodeIndent(i))))):o=i.hm||i.im&&1===i.maxGenerationCount?n.left-i.la.x+s.x:n.x+n.width/2+s.x,c?(t.m(m,o,v.y),m++,t.m(m,o,n.top-l),m++,t.m(m,o,n.top-l+(s.y+u)/3),m++,t.m(m,o,n.top-l+2*(s.y+u)/3),m++,t.m(m,o,n.top-l+(s.y+u)),m++,t.m(m,o,w.y)):(p&&(t.m(m,v.x,n.top-l/2),m++),t.m(m,o,n.top-l/2),m++,t.m(m,o,n.top-l+s.y+(p?u/2:u)),m++,p&&t.m(m,w.x,t.i(m-1).y))):Q("Invalid angle "+o),t.zf()}else s=n,t=this.link,n=this.network.layout,(e=Gn(i))!==Gn(s)&&(l=n.computeLayerSpacing(i),u=i.bounds,i=s.bounds,0===e&&i.left-u.right<l+1||90===e&&i.top-u.bottom<l+1||180===e&&u.left-i.right<l+1||270===e&&u.top-i.bottom<l+1||(t.vg(),i=t.curve===rn,s=t.isOrthogonal,n=or(this.fromVertex.alignment),t.uh(),0===e?(e=u.right+l/2,i?4===t.pointsCount&&(i=t.i(3).y,t.L(1,e-20,t.i(1).y),t.m(2,e-20,i),t.m(3,e,i),t.m(4,e+20,i),t.L(5,t.i(5).x,i)):s?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):4===t.pointsCount?t.m(2,e,t.i(2).y):3===t.pointsCount?t.L(1,e,t.i(2).y):2===t.pointsCount&&t.m(1,e,t.i(1).y)):90===e?(e=u.bottom+l/2,i?4===t.pointsCount&&(i=t.i(3).x,t.L(1,t.i(1).x,e-20),t.m(2,i,e-20),t.m(3,i,e),t.m(4,i,e+20),t.L(5,i,t.i(5).y)):s?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):4===t.pointsCount?t.m(2,t.i(2).x,e):3===t.pointsCount?t.L(1,t.i(2).x,e):2===t.pointsCount&&t.m(1,t.i(1).x,e)):180===e?(e=u.left-l/2,i?4===t.pointsCount&&(i=t.i(3).y,t.L(1,e+20,t.i(1).y),t.m(2,e+20,i),t.m(3,e,i),t.m(4,e-20,i),t.L(5,t.i(5).x,i)):s?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):4===t.pointsCount?t.m(2,e,t.i(2).y):3===t.pointsCount?t.L(1,e,t.i(2).y):2===t.pointsCount&&t.m(1,e,t.i(1).y)):270===e&&(e=u.top-l/2,i?4===t.pointsCount&&(i=t.i(3).x,t.L(1,t.i(1).x,e+20),t.m(2,i,e+20),t.m(3,i,e),t.m(4,i,e-20),t.L(5,i,t.i(5).y)):s?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):4===t.pointsCount?t.m(2,t.i(2).x,e):3===t.pointsCount?t.L(1,t.i(2).x,e):2===t.pointsCount&&t.m(1,t.i(1).x,e)),t.zf()))}}},Tt.Object.defineProperties(Sl.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},relativePoint:{get:function(){return this.$t},set:function(t){this.$t.set(t)}}}),Sl.className="TreeEdge",me.prototype.initializeStandardTools=function(){this.gb("Action",new uo,this.mouseDownTools),this.gb("Relinking",new Mn,this.mouseDownTools),this.gb("LinkReshaping",new Ee,this.mouseDownTools),this.gb("Rotating",new nn,this.mouseDownTools),this.gb("Resizing",new bi,this.mouseDownTools),this.gb("Linking",new Bi,this.mouseMoveTools),this.gb("Dragging",new ye,this.mouseMoveTools),this.gb("DragSelecting",new Ss,this.mouseMoveTools),this.gb("Panning",new ks,this.mouseMoveTools),this.gb("ContextMenu",new Ui,this.mouseUpTools),this.gb("TextEditing",new he,this.mouseUpTools),this.gb("ClickCreating",new mr,this.mouseUpTools),this.gb("ClickSelecting",new Ia,this.mouseUpTools)},ps("Horizontal",new Ju),ps("Spot",new Qu),ps("Table",new tc),ps("Viewbox",new nc),ps("TableRow",new ec),ps("TableColumn",new ic),ps("Graduated",new dh),ps("Grid",new ch),Bu.add("GraphLinksModel",Ke),Bu.add("TreeModel",xn);var Sd=St.go,gg={get licenseKey(){return $.licenseKey},set licenseKey(t){$.licenseKey=t},get version(){return $.version},Group:At,EnumValue:ut,List:dt,Set:ht,Map:kt,Point:z,Size:Mt,Rect:q,Margin:Gt,Spot:f,Geometry:rt,PathFigure:Je,PathSegment:Ht,InputEvent:dn,DiagramEvent:Wr,ChangedEvent:ge,Model:mt,GraphLinksModel:jt,TreeModel:Li,Binding:Ae,Transaction:qe,UndoManager:we,CommandHandler:$t,Tool:Yt,DraggingTool:ye,DraggingInfo:Go,DraggingOptions:Ga,LinkingBaseTool:ci,LinkingTool:Bi,RelinkingTool:Mn,LinkReshapingTool:Ee,ResizingTool:bi,RotatingTool:nn,ClickSelectingTool:Ia,ActionTool:uo,ClickCreatingTool:mr,HTMLInfo:co,ContextMenuTool:Ui,DragSelectingTool:Ss,PanningTool:ks,TextEditingTool:he,ToolManager:me,Animation:gi,AnimationManager:fn,AnimationTrigger:Ms,Layer:mi,Diagram:$,Palette:Yu,Overview:Cs,Brush:Wt,GraphObject:yt,Panel:nt,RowColumnDefinition:Fe,Shape:Pt,TextBlock:qt,Picture:Ei,Part:vt,Adornment:Bt,Node:ct,Link:st,Placeholder:Mi,Layout:ae,LayoutNetwork:te,LayoutVertex:De,LayoutEdge:Zi,GridLayout:$e,PanelLayout:je,CircularLayout:fe,CircularNetwork:yl,CircularVertex:Yh,CircularEdge:id,ForceDirectedLayout:ni,ForceDirectedNetwork:ha,ForceDirectedVertex:Xh,ForceDirectedEdge:Hh,LayeredDigraphLayout:Kt,LayeredDigraphNetwork:xl,LayeredDigraphVertex:bn,LayeredDigraphEdge:Wh,TreeLayout:It,TreeNetwork:fa,TreeVertex:Ln,TreeEdge:Sl};"object"==typeof Sd&&Sd.version&&Fi("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Sd?"debug ":"")+"version: "+Sd.version+", replaced with version: "+gg.version),$.prototype.go=gg,St.go=gg,typeof module<"u"&&"object"==typeof module.exports&&(module.exports=typeof global<"u"?global.go:self.go)}(),"function"==typeof define&&define.amd&&define(typeof global<"u"?global.go:self.go);