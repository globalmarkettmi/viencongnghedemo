(self.webpackChunkviencongnghedemo=self.webpackChunkviencongnghedemo||[]).push([[222],{8834:(_r,xs,Xn)=>{"use strict";var Po;function Kr(R,s){var a=Object.keys(R);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(R);s&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(R,d).enumerable})),a.push.apply(a,h)}return a}function v(R){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?Kr(Object(a),!0).forEach(function(h){Hn(R,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(a)):Kr(Object(a)).forEach(function(h){Object.defineProperty(R,h,Object.getOwnPropertyDescriptor(a,h))})}return R}function mi(R){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(R)}function xt(R,s){if(!(R instanceof s))throw new TypeError("Cannot call a class as a function")}function Zs(R,s){for(var a=0;a<s.length;a++){var h=s[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(R,h.key,h)}}function Yt(R,s,a){return s&&Zs(R.prototype,s),a&&Zs(R,a),R}function Hn(R,s,a){return s in R?Object.defineProperty(R,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):R[s]=a,R}function Jo(R,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(s&&s.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),s&&qo(R,s)}function gr(R){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)})(R)}function qo(R,s){return(qo=Object.setPrototypeOf||function(a,h){return a.__proto__=h,a})(R,s)}function ws(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function Ut(R){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,h=gr(R);if(s){var d=gr(this).constructor;a=Reflect.construct(h,arguments,d)}else a=h.apply(this,arguments);return function(g,f){if(f&&("object"==typeof f||"function"==typeof f))return f;if(void 0!==f)throw new TypeError("Derived constructors may only return object or undefined");return ws(g)}(this,a)}}function Ot(R,s){return function(a){if(Array.isArray(a))return a}(R)||function(a,h){var d=null==a?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(null!=d){var g,f,y=[],w=!0,k=!1;try{for(d=d.call(a);!(w=(g=d.next()).done)&&(y.push(g.value),!h||y.length!==h);w=!0);}catch(C){k=!0,f=C}finally{try{w||null==d.return||d.return()}finally{if(k)throw f}}return y}}(R,s)||_s(R,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ji(R){return function(s){if(Array.isArray(s))return $o(s)}(R)||function(s){if(typeof Symbol<"u"&&null!=s[Symbol.iterator]||null!=s["@@iterator"])return Array.from(s)}(R)||_s(R)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _s(R,s){if(R){if("string"==typeof R)return $o(R,s);var a=Object.prototype.toString.call(R).slice(8,-1);return"Object"===a&&R.constructor&&(a=R.constructor.name),"Map"===a||"Set"===a?Array.from(R):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$o(R,s):void 0}}function $o(R,s){(null==s||s>R.length)&&(s=R.length);for(var a=0,h=new Array(s);a<s;a++)h[a]=R[a];return h}function At(R,s){var a=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(!a){if(Array.isArray(R)||(a=_s(R))||s&&R&&"number"==typeof R.length){a&&(R=a);var h=0,d=function(){};return{s:d,n:function(){return h>=R.length?{done:!0}:{done:!1,value:R[h++]}},e:function(w){throw w},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,f=!0,y=!1;return{s:function(){a=a.call(R)},n:function(){var w=a.next();return f=w.done,w},e:function(w){y=!0,g=w},f:function(){try{f||null==a.return||a.return()}finally{if(y)throw g}}}}var ht=function(){function R(){xt(this,R)}return Yt(R,[{key:"shadeRGBColor",value:function(s,a){var h=a.split(","),d=s<0?0:255,g=s<0?-1*s:s,f=parseInt(h[0].slice(4),10),y=parseInt(h[1],10),w=parseInt(h[2],10);return"rgb("+(Math.round((d-f)*g)+f)+","+(Math.round((d-y)*g)+y)+","+(Math.round((d-w)*g)+w)+")"}},{key:"shadeHexColor",value:function(s,a){var h=parseInt(a.slice(1),16),d=s<0?0:255,g=s<0?-1*s:s,f=h>>16,y=h>>8&255,w=255&h;return"#"+(16777216+65536*(Math.round((d-f)*g)+f)+256*(Math.round((d-y)*g)+y)+(Math.round((d-w)*g)+w)).toString(16).slice(1)}},{key:"shadeColor",value:function(s,a){return R.isColorHex(a)?this.shadeHexColor(s,a):this.shadeRGBColor(s,a)}}],[{key:"bind",value:function(s,a){return function(){return s.apply(a,arguments)}}},{key:"isObject",value:function(s){return s&&"object"===mi(s)&&!Array.isArray(s)&&null!=s}},{key:"is",value:function(s,a){return Object.prototype.toString.call(a)==="[object "+s+"]"}},{key:"listToArray",value:function(s){var a,h=[];for(a=0;a<s.length;a++)h[a]=s[a];return h}},{key:"extend",value:function(s,a){var h=this;"function"!=typeof Object.assign&&(Object.assign=function(g){if(null==g)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(g),y=1;y<arguments.length;y++){var w=arguments[y];if(null!=w)for(var k in w)w.hasOwnProperty(k)&&(f[k]=w[k])}return f});var d=Object.assign({},s);return this.isObject(s)&&this.isObject(a)&&Object.keys(a).forEach(function(g){h.isObject(a[g])&&g in s?d[g]=h.extend(s[g],a[g]):Object.assign(d,Hn({},g,a[g]))}),d}},{key:"extendArray",value:function(s,a){var h=[];return s.map(function(d){h.push(R.extend(a,d))}),h}},{key:"monthMod",value:function(s){return s%12}},{key:"clone",value:function(s){if(R.is("Array",s)){for(var a=[],h=0;h<s.length;h++)a[h]=this.clone(s[h]);return a}if(R.is("Null",s))return null;if(R.is("Date",s))return s;if("object"===mi(s)){var d={};for(var g in s)s.hasOwnProperty(g)&&(d[g]=this.clone(s[g]));return d}return s}},{key:"log10",value:function(s){return Math.log(s)/Math.LN10}},{key:"roundToBase10",value:function(s){return Math.pow(10,Math.floor(Math.log10(s)))}},{key:"roundToBase",value:function(s,a){return Math.pow(a,Math.floor(Math.log(s)/Math.log(a)))}},{key:"parseNumber",value:function(s){return null===s?s:parseFloat(s)}},{key:"stripNumber",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(s)?s:parseFloat(s.toPrecision(a))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(s){var a=String(s).split(/[eE]/);if(1===a.length)return a[0];var h="",d=s<0?"-":"",g=a[0].replace(".",""),f=Number(a[1])+1;if(f<0){for(h=d+"0.";f++;)h+="0";return h+g.replace(/^-/,"")}for(f-=g.length;f--;)h+="0";return g+h}},{key:"getDimensions",value:function(s){var a=getComputedStyle(s,null),h=s.clientHeight,d=s.clientWidth;return h-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),[d-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),h]}},{key:"getBoundingClientRect",value:function(s){var a=s.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:s.clientWidth,height:s.clientHeight,x:a.left,y:a.top}}},{key:"getLargestStringFromArr",value:function(s){return s.reduce(function(a,h){return Array.isArray(h)&&(h=h.reduce(function(d,g){return d.length>g.length?d:g})),a.length>h.length?a:h},0)}},{key:"hexToRgba",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==s.substring(0,1)&&(s="#999999");var h=s.replace("#","");h=h.match(new RegExp("(.{"+h.length/3+"})","g"));for(var d=0;d<h.length;d++)h[d]=parseInt(1===h[d].length?h[d]+h[d]:h[d],16);return void 0!==a&&h.push(a),"rgba("+h.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(s){return parseFloat(s.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(s){return(s=s.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===s.length?"#"+("0"+parseInt(s[1],10).toString(16)).slice(-2)+("0"+parseInt(s[2],10).toString(16)).slice(-2)+("0"+parseInt(s[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(s){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(s)}},{key:"getPolygonPos",value:function(s,a){for(var h=[],d=2*Math.PI/a,g=0;g<a;g++){var f={};f.x=s*Math.sin(g*d),f.y=-s*Math.cos(g*d),h.push(f)}return h}},{key:"polarToCartesian",value:function(s,a,h,d){var g=(d-90)*Math.PI/180;return{x:s+h*Math.cos(g),y:a+h*Math.sin(g)}}},{key:"escapeString",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return s.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,a)}},{key:"negToZero",value:function(s){return s<0?0:s}},{key:"moveIndexInArray",value:function(s,a,h){if(h>=s.length)for(var d=h-s.length+1;d--;)s.push(void 0);return s.splice(h,0,s.splice(a,1)[0]),s}},{key:"extractNumber",value:function(s){return parseFloat(s.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}},{key:"setELstyles",value:function(s,a){for(var h in a)a.hasOwnProperty(h)&&(s.style.key=a[h])}},{key:"isNumber",value:function(s){return!isNaN(s)&&parseFloat(Number(s))===s&&!isNaN(parseInt(s,10))}},{key:"isFloat",value:function(s){return Number(s)===s&&s%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var s=window.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var h=s.indexOf("rv:");return parseInt(s.substring(h+3,s.indexOf(".",h)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}},{key:"getGCD",value:function(s,a){var d=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(s,a))));for(s=Math.round(Math.abs(s)*d),a=Math.round(Math.abs(a)*d);a;){var g=a;a=s%a,s=g}return s/d}},{key:"getPrimeFactors",value:function(s){for(var a=[],h=2;s>=2;)s%h==0?(a.push(h),s/=h):h++;return a}},{key:"mod",value:function(s,a){var d=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(s,a))));return(s=Math.round(Math.abs(s)*d))%(a=Math.round(Math.abs(a)*d))/d}}]),R}(),To=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.setEasingFunctions()}return Yt(R,[{key:"setEasingFunctions",value:function(){var s;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":s="-";break;case"easein":s="<";break;case"easeout":s=">";break;case"easeinout":default:s="<>";break;case"swing":s=function(a){var h=1.70158;return(a-=1)*a*((h+1)*a+h)+1};break;case"bounce":s=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};break;case"elastic":s=function(a){return a===!!a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=s}}},{key:"animateLine",value:function(s,a,h,d){s.attr(a).animate(d).attr(h)}},{key:"animateMarker",value:function(s,a,h,d,g,f){a||(a=0),s.attr({r:a,width:a,height:a}).animate(d,g).attr({r:h,width:h.width,height:h.height}).afterAll(function(){f()})}},{key:"animateCircle",value:function(s,a,h,d,g){s.attr({r:a.r,cx:a.cx,cy:a.cy}).animate(d,g).attr({r:h.r,cx:h.cx,cy:h.cy})}},{key:"animateRect",value:function(s,a,h,d,g){s.attr(a).animate(d).attr(h).afterAll(function(){return g()})}},{key:"animatePathsGradually",value:function(s){var C=this.w,T=0;C.config.chart.animations.animateGradually.enabled&&(T=C.config.chart.animations.animateGradually.delay),C.config.chart.animations.dynamicAnimation.enabled&&C.globals.dataChanged&&"bar"!==C.config.chart.type&&(T=0),this.morphSVG(s.el,s.realIndex,s.j,"line"!==C.config.chart.type||C.globals.comboCharts?s.fill:"stroke",s.pathFrom,s.pathTo,s.speed,s.delay*T)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(s){var a=s.el;a.classList.remove("apexcharts-element-hidden"),a.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(s){var a=this.w;a.globals.animationEnded||(a.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof a.config.chart.events.animationEnd&&a.config.chart.events.animationEnd(this.ctx,{el:s,w:a}))}},{key:"morphSVG",value:function(s,a,h,d,g,f,y,w){var k=this,C=this.w;g||(g=s.attr("pathFrom")),f||(f=s.attr("pathTo"));var T=function(P){return"radar"===C.config.chart.type&&(y=1),"M 0 ".concat(C.globals.gridHeight)};(!g||g.indexOf("undefined")>-1||g.indexOf("NaN")>-1)&&(g=T()),(!f||f.indexOf("undefined")>-1||f.indexOf("NaN")>-1)&&(f=T()),C.globals.shouldAnimate||(y=1),s.plot(g).animate(1,C.globals.easing,w).plot(g).animate(y,C.globals.easing,w).plot(f).afterAll(function(){ht.isNumber(h)?h===C.globals.series[C.globals.maxValsInArrayIndex].length-2&&C.globals.shouldAnimate&&k.animationCompleted(s):"none"!==d&&C.globals.shouldAnimate&&(!C.globals.comboCharts&&a===C.globals.series.length-1||C.globals.comboCharts)&&k.animationCompleted(s),k.showDelayedElements()})}}]),R}(),si=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"getDefaultFilter",value:function(s,a){var h=this.w;s.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==h.config.states.normal.filter?this.applyFilter(s,a,h.config.states.normal.filter.type,h.config.states.normal.filter.value):h.config.chart.dropShadow.enabled&&this.dropShadow(s,h.config.chart.dropShadow,a)}},{key:"addNormalFilter",value:function(s,a){var h=this.w;h.config.chart.dropShadow.enabled&&!s.node.classList.contains("apexcharts-marker")&&this.dropShadow(s,h.config.chart.dropShadow,a)}},{key:"addLightenFilter",value:function(s,a,h){var d=this,g=this.w,f=h.intensity;s.unfilter(!0),new window.SVG.Filter,s.filter(function(y){var w=g.config.chart.dropShadow;(w.enabled?d.addShadow(y,a,w):y).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:f}})}),s.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(s.filterer.node)}},{key:"addDarkenFilter",value:function(s,a,h){var d=this,g=this.w,f=h.intensity;s.unfilter(!0),new window.SVG.Filter,s.filter(function(y){var w=g.config.chart.dropShadow;(w.enabled?d.addShadow(y,a,w):y).componentTransfer({rgb:{type:"linear",slope:f}})}),s.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(s.filterer.node)}},{key:"applyFilter",value:function(s,a,h){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(h){case"none":this.addNormalFilter(s,a);break;case"lighten":this.addLightenFilter(s,a,{intensity:d});break;case"darken":this.addDarkenFilter(s,a,{intensity:d})}}},{key:"addShadow",value:function(s,a,h){var d,g=this.w,f=h.blur,y=h.top,w=h.left,k=h.color,C=h.opacity;if((null===(d=g.config.chart.dropShadow.enabledOnSeries)||void 0===d?void 0:d.length)>0&&-1===g.config.chart.dropShadow.enabledOnSeries.indexOf(a))return s;var T=s.flood(Array.isArray(k)?k[a]:k,C).composite(s.sourceAlpha,"in").offset(w,y).gaussianBlur(f).merge(s.source);return s.blend(s.source,T)}},{key:"dropShadow",value:function(s,a){var h,d,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=a.top,y=a.left,w=a.blur,k=a.color,C=a.opacity,T=a.noUserSpaceOnUse,P=this.w;return s.unfilter(!0),ht.isIE()&&"radialBar"===P.config.chart.type||(null===(h=P.config.chart.dropShadow.enabledOnSeries)||void 0===h?void 0:h.length)>0&&-1===(null===(d=P.config.chart.dropShadow.enabledOnSeries)||void 0===d?void 0:d.indexOf(g))||(k=Array.isArray(k)?k[g]:k,s.filter(function(F){var O;O=ht.isSafari()||ht.isFirefox()||ht.isIE()?F.flood(k,C).composite(F.sourceAlpha,"in").offset(y,f).gaussianBlur(w):F.flood(k,C).composite(F.sourceAlpha,"in").offset(y,f).gaussianBlur(w).merge(F.source),F.blend(F.source,O)}),T||s.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(s.filterer.node)),s}},{key:"setSelectionFilter",value:function(s,a,h){var d=this.w;if(void 0!==d.globals.selectedDataPoints[a]&&d.globals.selectedDataPoints[a].indexOf(h)>-1){s.node.setAttribute("selected",!0);var g=d.config.states.active.filter;"none"!==g&&this.applyFilter(s,a,g.type,g.value)}}},{key:"_scaleFilterSize",value:function(s){!function(a){for(var h in a)a.hasOwnProperty(h)&&s.setAttribute(h,a[h])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),R}(),kt=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"roundPathCorners",value:function(s,a){function h(K,tt,et){var gt=tt.x-K.x,St=tt.y-K.y,bt=Math.sqrt(gt*gt+St*St);return d(K,tt,Math.min(1,et/bt))}function d(K,tt,et){return{x:K.x+(tt.x-K.x)*et,y:K.y+(tt.y-K.y)*et}}function g(K,tt){K.length>2&&(K[K.length-2]=tt.x,K[K.length-1]=tt.y)}function f(K){return{x:parseFloat(K[K.length-2]),y:parseFloat(K[K.length-1])}}s.indexOf("NaN")>-1&&(s="");var y=s.split(/[,\s]/).reduce(function(K,tt){var et=tt.match("([a-zA-Z])(.+)");return et?(K.push(et[1]),K.push(et[2])):K.push(tt),K},[]).reduce(function(K,tt){return parseFloat(tt)==tt&&K.length?K[K.length-1].push(tt):K.push([tt]),K},[]),w=[];if(y.length>1){var k=f(y[0]),C=null;"Z"==y[y.length-1][0]&&y[0].length>2&&(y[y.length-1]=C=["L",k.x,k.y]),w.push(y[0]);for(var T=1;T<y.length;T++){var P=w[w.length-1],F=y[T],O=F==C?y[1]:y[T+1];if(O&&P&&P.length>2&&"L"==F[0]&&O.length>2&&"L"==O[0]){var j,Y,G=f(P),U=f(F),S=f(O);j=h(U,G,a),Y=h(U,S,a),g(F,j),F.origPoint=U,w.push(F);var N=d(j,U,.5),E=d(U,Y,.5),H=["C",N.x,N.y,E.x,E.y,Y.x,Y.y];H.origPoint=U,w.push(H)}else w.push(F)}if(C){var W=f(w[w.length-1]);w.push(["Z"]),g(w[0],W)}}else w=y;return w.reduce(function(K,tt){return K+tt.join(" ")+" "},"")}},{key:"drawLine",value:function(s,a,h,d){var g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,w=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:s,y1:a,x2:h,y2:d,stroke:g,"stroke-dasharray":f,"stroke-width":y,"stroke-linecap":w})}},{key:"drawRect",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,w=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,k=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,C=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,T=this.w.globals.dom.Paper.rect();return T.attr({x:s,y:a,width:h>0?h:0,height:d>0?d:0,rx:g,ry:g,opacity:y,"stroke-width":null!==w?w:0,stroke:null!==k?k:"none","stroke-dasharray":C}),T.node.setAttribute("fill",f),T}},{key:"drawPolygon",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(s).attr({fill:d,stroke:a,"stroke-width":h})}},{key:"drawCircle",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s<0&&(s=0);var h=this.w.globals.dom.Paper.circle(2*s);return null!==a&&h.attr(a),h}},{key:"drawPath",value:function(s){var a=s.d,h=void 0===a?"":a,d=s.stroke,g=void 0===d?"#a8a8a8":d,f=s.strokeWidth,y=void 0===f?1:f,w=s.fill,k=s.fillOpacity,C=void 0===k?1:k,T=s.strokeOpacity,P=void 0===T?1:T,F=s.classes,O=s.strokeLinecap,j=void 0===O?null:O,Y=s.strokeDashArray,G=void 0===Y?0:Y,U=this.w;return null===j&&(j=U.config.stroke.lineCap),(h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h="M 0 ".concat(U.globals.gridHeight)),U.globals.dom.Paper.path(h).attr({fill:w,"fill-opacity":C,stroke:g,"stroke-opacity":P,"stroke-linecap":j,"stroke-width":y,"stroke-dasharray":G,class:F})}},{key:"group",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.w.globals.dom.Paper.group();return null!==s&&a.attr(s),a}},{key:"move",value:function(s,a){return["M",s,a].join(" ")}},{key:"line",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=null;return null===h?d=[" L",s,a].join(" "):"H"===h?d=[" H",s].join(" "):"V"===h&&(d=[" V",a].join(" ")),d}},{key:"curve",value:function(s,a,h,d,g,f){return["C",s,a,h,d,g,f].join(" ")}},{key:"quadraticCurve",value:function(s,a,h,d){return["Q",s,a,h,d].join(" ")}},{key:"arc",value:function(s,a,h,d,g,f,y){var w="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(w="a"),[w,s,a,h,d,g,f,y].join(" ")}},{key:"renderPaths",value:function(s){var a,h=s.j,d=s.realIndex,g=s.pathFrom,f=s.pathTo,y=s.stroke,w=s.strokeWidth,k=s.strokeLinecap,C=s.fill,T=s.animationDelay,P=s.initialSpeed,F=s.dataChangeSpeed,O=s.className,j=s.shouldClipToGrid,Y=void 0===j||j,G=s.bindEventsOnPaths,U=void 0===G||G,S=s.drawShadow,N=void 0===S||S,E=this.w,H=new si(this.ctx),W=new To(this.ctx),K=this.w.config.chart.animations.enabled,tt=K&&this.w.config.chart.animations.dynamicAnimation.enabled,et=!!(K&&!E.globals.resized||tt&&E.globals.dataChanged&&E.globals.shouldAnimate);et?a=g:(a=f,E.globals.animationEnded=!0);var St,gt=E.config.stroke.dashArray;St=Array.isArray(gt)?gt[d]:E.config.stroke.dashArray;var bt=this.drawPath({d:a,stroke:y,strokeWidth:w,fill:C,fillOpacity:1,classes:O,strokeLinecap:k,strokeDashArray:St});bt.attr("index",d),Y&&bt.attr({"clip-path":"url(#gridRectMask".concat(E.globals.cuid,")")}),"none"!==E.config.states.normal.filter.type?H.getDefaultFilter(bt,d):E.config.chart.dropShadow.enabled&&N&&H.dropShadow(bt,E.config.chart.dropShadow,d),U&&(bt.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,bt)),bt.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,bt)),bt.node.addEventListener("mousedown",this.pathMouseDown.bind(this,bt))),bt.attr({pathTo:f,pathFrom:g});var Gt={el:bt,j:h,realIndex:d,pathFrom:g,pathTo:f,fill:C,strokeWidth:w,delay:T};return!K||E.globals.resized||E.globals.dataChanged?!E.globals.resized&&E.globals.dataChanged||W.showDelayedElements():W.animatePathsGradually(v(v({},Gt),{},{speed:P})),E.globals.dataChanged&&tt&&et&&W.animatePathsGradually(v(v({},Gt),{},{speed:F})),bt}},{key:"drawPattern",value:function(s,a,h){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(a,h,function(f){"horizontalLines"===s?f.line(0,0,h,0).stroke({color:d,width:g+1}):"verticalLines"===s?f.line(0,0,0,a).stroke({color:d,width:g+1}):"slantedLines"===s?f.line(0,0,a,h).stroke({color:d,width:g}):"squares"===s?f.rect(a,h).fill("none").stroke({color:d,width:g}):"circles"===s&&f.circle(a).fill("none").stroke({color:d,width:g})})}},{key:"drawGradient",value:function(s,a,h,d,g){var f,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,k=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,T=this.w;a.length<9&&0===a.indexOf("#")&&(a=ht.hexToRgba(a,d)),h.length<9&&0===h.indexOf("#")&&(h=ht.hexToRgba(h,g));var P=0,F=1,O=1,j=null;null!==w&&(P=void 0!==w[0]?w[0]/100:0,F=void 0!==w[1]?w[1]/100:1,O=void 0!==w[2]?w[2]/100:1,j=void 0!==w[3]?w[3]/100:null);var Y=!("donut"!==T.config.chart.type&&"pie"!==T.config.chart.type&&"polarArea"!==T.config.chart.type&&"bubble"!==T.config.chart.type);return f=T.globals.dom.Paper.gradient(Y?"radial":"linear",null===k||0===k.length?function(S){S.at(P,a,d),S.at(F,h,g),S.at(O,h,g),null!==j&&S.at(j,a,d)}:function(S){(Array.isArray(k[C])?k[C]:k).forEach(function(N){S.at(N.offset/100,N.color,N.opacity)})}),Y?f.attr("bubble"!==T.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:T.globals.gridWidth/2,cy:T.globals.gridHeight/2,r:y}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===s?f.from(0,0).to(0,1):"diagonal"===s?f.from(0,0).to(1,1):"horizontal"===s?f.from(0,1).to(1,1):"diagonal2"===s&&f.from(1,0).to(0,1),f}},{key:"getTextBasedOnMaxWidth",value:function(s){var a=s.text,h=s.maxWidth,f=this.getTextRects(a,s.fontSize,s.fontFamily),w=Math.floor(h/(f.width/a.length));return h<f.width?a.slice(0,w-3)+"...":a}},{key:"drawText",value:function(s){var a=this,h=s.x,d=s.y,g=s.text,f=s.textAnchor,y=s.fontSize,w=s.fontFamily,k=s.fontWeight,C=s.foreColor,T=s.opacity,P=s.maxWidth,F=s.cssClass,O=void 0===F?"":F,j=s.isPlainText,Y=void 0===j||j,G=s.dominantBaseline,U=void 0===G?"auto":G,S=this.w;void 0===g&&(g="");var N=g;f||(f="start"),C&&C.length||(C=S.config.chart.foreColor),k=k||"regular";var E,H={maxWidth:P,fontSize:y=y||"11px",fontFamily:w=w||S.config.chart.fontFamily};return Array.isArray(g)?E=S.globals.dom.Paper.text(function(W){for(var K=0;K<g.length;K++)N=g[K],P&&(N=a.getTextBasedOnMaxWidth(v({text:g[K]},H))),0===K?W.tspan(N):W.tspan(N).newLine()}):(P&&(N=this.getTextBasedOnMaxWidth(v({text:g},H))),E=Y?S.globals.dom.Paper.plain(g):S.globals.dom.Paper.text(function(W){return W.tspan(N)})),E.attr({x:h,y:d,"text-anchor":f,"dominant-baseline":U,"font-size":y,"font-family":w,"font-weight":k,fill:C,class:"apexcharts-text "+O}),E.node.style.fontFamily=w,E.node.style.opacity=T,E}},{key:"createGroupWithAttributes",value:function(s,a,h,d){var g=this.group();return h.forEach(function(f){return g.add(f)}),g.attr({class:d.class?d.class:"",cy:a,cx:s}),g}},{key:"drawPlus",value:function(s,a,h,d){var g=h/2,f=this.drawLine(s,a-g,s,a+g,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap),y=this.drawLine(s-g,a,s+g,a,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap);return this.createGroupWithAttributes(s,a,[f,y],d)}},{key:"drawX",value:function(s,a,h,d){var g=h/2,f=this.drawLine(s-g,a-g,s+g,a+g,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap),y=this.drawLine(s-g,a+g,s+g,a-g,d.pointStrokeColor,d.pointStrokeDashArray,d.pointStrokeWidth,d.pointStrokeLineCap);return this.createGroupWithAttributes(s,a,[f,y],d)}},{key:"drawMarker",value:function(s,a,h){s=s||0;var d=h.pSize||0,g=null;if("X"===h?.shape||"x"===h?.shape)g=this.drawX(s,a,d,h);else if("plus"===h?.shape||"+"===h?.shape)g=this.drawPlus(s,a,d,h);else if("square"===h.shape||"rect"===h.shape){var f=void 0===h.pRadius?d/2:h.pRadius;null!==a&&d||(d=0,f=0);var y=1.2*d+f,w=this.drawRect(y,y,y,y,f);w.attr({x:s-y/2,y:a-y/2,cx:s,cy:a,class:h.class?h.class:"",fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,stroke:h.pointStrokeColor,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}),g=w}else"circle"!==h.shape&&h.shape||(ht.isNumber(a)||(d=0,a=0),g=this.drawCircle(d,{cx:s,cy:a,class:h.class?h.class:"",stroke:h.pointStrokeColor,fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}));return g}},{key:"pathMouseEnter",value:function(s,a){var h=this.w,d=new si(this.ctx),g=parseInt(s.node.getAttribute("index"),10),f=parseInt(s.node.getAttribute("j"),10);if("function"==typeof h.config.chart.events.dataPointMouseEnter&&h.config.chart.events.dataPointMouseEnter(a,this.ctx,{seriesIndex:g,dataPointIndex:f,w:h}),this.ctx.events.fireEvent("dataPointMouseEnter",[a,this.ctx,{seriesIndex:g,dataPointIndex:f,w:h}]),("none"===h.config.states.active.filter.type||"true"!==s.node.getAttribute("selected"))&&"none"!==h.config.states.hover.filter.type&&!h.globals.isTouchDevice){var y=h.config.states.hover.filter;d.applyFilter(s,g,y.type,y.value)}}},{key:"pathMouseLeave",value:function(s,a){var h=this.w,d=new si(this.ctx),g=parseInt(s.node.getAttribute("index"),10),f=parseInt(s.node.getAttribute("j"),10);"function"==typeof h.config.chart.events.dataPointMouseLeave&&h.config.chart.events.dataPointMouseLeave(a,this.ctx,{seriesIndex:g,dataPointIndex:f,w:h}),this.ctx.events.fireEvent("dataPointMouseLeave",[a,this.ctx,{seriesIndex:g,dataPointIndex:f,w:h}]),"none"!==h.config.states.active.filter.type&&"true"===s.node.getAttribute("selected")||"none"!==h.config.states.hover.filter.type&&d.getDefaultFilter(s,g)}},{key:"pathMouseDown",value:function(s,a){var h=this.w,d=new si(this.ctx),g=parseInt(s.node.getAttribute("index"),10),f=parseInt(s.node.getAttribute("j"),10),y="false";if("true"===s.node.getAttribute("selected")){if(s.node.setAttribute("selected","false"),h.globals.selectedDataPoints[g].indexOf(f)>-1){var w=h.globals.selectedDataPoints[g].indexOf(f);h.globals.selectedDataPoints[g].splice(w,1)}}else{if(!h.config.states.active.allowMultipleDataPointsSelection&&h.globals.selectedDataPoints.length>0){h.globals.selectedDataPoints=[];var k=h.globals.dom.Paper.select(".apexcharts-series path").members,C=h.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,T=function(O){Array.prototype.forEach.call(O,function(j){j.node.setAttribute("selected","false"),d.getDefaultFilter(j,g)})};T(k),T(C)}s.node.setAttribute("selected","true"),y="true",void 0===h.globals.selectedDataPoints[g]&&(h.globals.selectedDataPoints[g]=[]),h.globals.selectedDataPoints[g].push(f)}if("true"===y){var P=h.config.states.active.filter;if("none"!==P)d.applyFilter(s,g,P.type,P.value);else if("none"!==h.config.states.hover.filter&&!h.globals.isTouchDevice){var F=h.config.states.hover.filter;d.applyFilter(s,g,F.type,F.value)}}else"none"!==h.config.states.active.filter.type&&("none"===h.config.states.hover.filter.type||h.globals.isTouchDevice?d.getDefaultFilter(s,g):d.applyFilter(s,g,(F=h.config.states.hover.filter).type,F.value));"function"==typeof h.config.chart.events.dataPointSelection&&h.config.chart.events.dataPointSelection(a,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:g,dataPointIndex:f,w:h}),a&&this.ctx.events.fireEvent("dataPointSelection",[a,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:g,dataPointIndex:f,w:h}])}},{key:"rotateAroundCenter",value:function(s){var a={};return s&&"function"==typeof s.getBBox&&(a=s.getBBox()),{x:a.x+a.width/2,y:a.y+a.height/2}}},{key:"getTextRects",value:function(s,a,h,d){var g=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=this.w,y=this.drawText({x:-200,y:-200,text:s,textAnchor:"start",fontSize:a,fontFamily:h,foreColor:"#fff",opacity:0});d&&y.attr("transform",d),f.globals.dom.Paper.add(y);var w=y.bbox();return g||(w=y.node.getBoundingClientRect()),y.remove(),{width:w.width,height:w.height}}},{key:"placeTextWithEllipsis",value:function(s,a,h){if("function"==typeof s.getComputedTextLength&&(s.textContent=a,a.length>0&&s.getComputedTextLength()>=h/1.1)){for(var d=a.length-3;d>0;d-=3)if(s.getSubStringLength(0,d)<=h/1.1)return void(s.textContent=a.substring(0,d)+"...");s.textContent="."}}}],[{key:"setAttrs",value:function(s,a){for(var h in a)a.hasOwnProperty(h)&&s.setAttribute(h,a[h])}}]),R}(),it=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"getStackedSeriesTotals",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.w,h=[];if(0===a.globals.series.length)return h;for(var d=0;d<a.globals.series[a.globals.maxValsInArrayIndex].length;d++){for(var g=0,f=0;f<a.globals.series.length;f++)void 0!==a.globals.series[f][d]&&-1===s.indexOf(f)&&(g+=a.globals.series[f][d]);h.push(g)}return h}},{key:"getSeriesTotalByIndex",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===s?this.w.config.series.reduce(function(a,h){return a+h},0):this.w.globals.series[s].reduce(function(a,h){return a+h},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var s=this,a=this.w,h=[];return a.globals.seriesGroups.forEach(function(d){var g=[];a.config.series.forEach(function(y,w){d.indexOf(y.name)>-1&&g.push(w)});var f=a.globals.series.map(function(y,w){return-1===g.indexOf(w)?w:-1}).filter(function(y){return-1!==y});h.push(s.getStackedSeriesTotals(f))}),h}},{key:"isSeriesNull",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===s?this.w.config.series.filter(function(a){return null!==a}):this.w.config.series[s].data.filter(function(a){return null!==a})).length}},{key:"seriesHaveSameValues",value:function(s){return this.w.globals.series[s].every(function(a,h,d){return a===d[0]})}},{key:"getCategoryLabels",value:function(s){var a=this.w,h=s.slice();return a.config.xaxis.convertedCatToNumeric&&(h=s.map(function(d,g){return a.config.xaxis.labels.formatter(d-a.globals.minX+1)})),h}},{key:"getLargestSeries",value:function(){var s=this.w;s.globals.maxValsInArrayIndex=s.globals.series.map(function(a){return a.length}).indexOf(Math.max.apply(Math,s.globals.series.map(function(a){return a.length})))}},{key:"getLargestMarkerSize",value:function(){var s=this.w,a=0;return s.globals.markers.size.forEach(function(h){a=Math.max(a,h)}),s.config.markers.discrete&&s.config.markers.discrete.length&&s.config.markers.discrete.forEach(function(h){a=Math.max(a,h.size)}),a>0&&(a+=s.config.markers.hover.sizeOffset+1),s.globals.markers.largestSize=a,a}},{key:"getSeriesTotals",value:function(){var s=this.w;s.globals.seriesTotals=s.globals.series.map(function(a,h){var d=0;if(Array.isArray(a))for(var g=0;g<a.length;g++)d+=a[g];else d+=a;return d})}},{key:"getSeriesTotalsXRange",value:function(s,a){var h=this.w;return h.globals.series.map(function(d,g){for(var f=0,y=0;y<d.length;y++)h.globals.seriesX[g][y]>s&&h.globals.seriesX[g][y]<a&&(f+=d[y]);return f})}},{key:"getPercentSeries",value:function(){var s=this.w;s.globals.seriesPercent=s.globals.series.map(function(a,h){var d=[];if(Array.isArray(a))for(var g=0;g<a.length;g++){var f=s.globals.stackedSeriesTotals[g],y=0;f&&(y=100*a[g]/f),d.push(y)}else{var w=100*a/s.globals.seriesTotals.reduce(function(k,C){return k+C},0);d.push(w)}return d})}},{key:"getCalculatedRatios",value:function(){var s,a,h,d=this.w.globals,g=[],f=0,y=[],w=.1,k=0;if(d.yRange=[],d.isMultipleYAxis)for(var C=0;C<d.minYArr.length;C++)d.yRange.push(Math.abs(d.minYArr[C]-d.maxYArr[C])),y.push(0);else d.yRange.push(Math.abs(d.minY-d.maxY));d.xRange=Math.abs(d.maxX-d.minX),d.zRange=Math.abs(d.maxZ-d.minZ);for(var T=0;T<d.yRange.length;T++)g.push(d.yRange[T]/d.gridHeight);if(a=d.xRange/d.gridWidth,s=d.yRange/d.gridWidth,h=d.xRange/d.gridHeight,(f=d.zRange/d.gridHeight*16)||(f=1),d.minY!==Number.MIN_VALUE&&0!==Math.abs(d.minY)&&(d.hasNegs=!0),d.isMultipleYAxis){y=[];for(var P=0;P<g.length;P++)y.push(-d.minYArr[P]/g[P])}else y.push(-d.minY/g[0]),d.minY!==Number.MIN_VALUE&&0!==Math.abs(d.minY)&&(w=-d.minY/s,k=d.minX/a);return{yRatio:g,invertedYRatio:s,zRatio:f,xRatio:a,invertedXRatio:h,baseLineInvertedY:w,baseLineY:y,baseLineX:k}}},{key:"getLogSeries",value:function(s){var a=this,h=this.w;return h.globals.seriesLog=s.map(function(d,g){return h.config.yaxis[g]&&h.config.yaxis[g].logarithmic?d.map(function(f){return null===f?null:a.getLogVal(h.config.yaxis[g].logBase,f,g)}):d}),h.globals.invalidLogScale?s:h.globals.seriesLog}},{key:"getBaseLog",value:function(s,a){return Math.log(a)/Math.log(s)}},{key:"getLogVal",value:function(s,a,h){if(0===a)return 0;var d=this.w,g=0===d.globals.minYArr[h]?-1:this.getBaseLog(s,d.globals.minYArr[h]),f=(0===d.globals.maxYArr[h]?0:this.getBaseLog(s,d.globals.maxYArr[h]))-g;return a<1?a/f:(this.getBaseLog(s,a)-g)/f}},{key:"getLogYRatios",value:function(s){var a=this,h=this.w,d=this.w.globals;return d.yLogRatio=s.slice(),d.logYRange=d.yRange.map(function(g,f){if(h.config.yaxis[f]&&a.w.config.yaxis[f].logarithmic){var y,w=-Number.MAX_VALUE,k=Number.MIN_VALUE;return d.seriesLog.forEach(function(C,T){C.forEach(function(P){h.config.yaxis[T]&&h.config.yaxis[T].logarithmic&&(w=Math.max(P,w),k=Math.min(P,k))})}),y=Math.pow(d.yRange[f],Math.abs(k-w)/d.yRange[f]),d.yLogRatio[f]=y/d.gridHeight,y}}),d.invalidLogScale?s.slice():d.yLogRatio}}],[{key:"checkComboSeries",value:function(s){var a=!1,h=0,d=0;return s.length&&void 0!==s[0].type&&s.forEach(function(g){"bar"!==g.type&&"column"!==g.type&&"candlestick"!==g.type&&"boxPlot"!==g.type||h++,void 0!==g.type&&d++}),d>0&&(a=!0),{comboBarCount:h,comboCharts:a}}},{key:"extendArrayProps",value:function(s,a,h){var d,g,f,y,w,k;return null!==(d=a)&&void 0!==d&&d.yaxis&&(a=s.extendYAxis(a,h)),null!==(g=a)&&void 0!==g&&g.annotations&&(a.annotations.yaxis&&(a=s.extendYAxisAnnotations(a)),null!==(f=a)&&void 0!==f&&null!==(y=f.annotations)&&void 0!==y&&y.xaxis&&(a=s.extendXAxisAnnotations(a)),null!==(w=a)&&void 0!==w&&null!==(k=w.annotations)&&void 0!==k&&k.points&&(a=s.extendPointAnnotations(a))),a}}]),R}(),Rt=function(){function R(s){xt(this,R),this.w=s.w,this.annoCtx=s}return Yt(R,[{key:"setOrientations",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===s.label.orientation){var g=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==a?a:0,"']"));if(null!==g){var f=g.getBoundingClientRect();g.setAttribute("x",parseFloat(g.getAttribute("x"))-f.height+4),g.setAttribute("y","top"===s.label.position?parseFloat(g.getAttribute("y"))+f.width:parseFloat(g.getAttribute("y"))-f.width);var y=this.annoCtx.graphics.rotateAroundCenter(g),k=y.y;g.setAttribute("transform","rotate(-90 ".concat(y.x," ").concat(k,")"))}}}},{key:"addBackgroundToAnno",value:function(s,a){var h=this.w;if(!s||void 0===a.label.text||void 0!==a.label.text&&!String(a.label.text).trim())return null;var d=h.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),g=s.getBoundingClientRect(),f=a.label.style.padding.left,y=a.label.style.padding.right,w=a.label.style.padding.top,k=a.label.style.padding.bottom;"vertical"===a.label.orientation&&(w=a.label.style.padding.left,k=a.label.style.padding.right,f=a.label.style.padding.top,y=a.label.style.padding.bottom);var P=this.annoCtx.graphics.drawRect(g.left-d.left-f-h.globals.barPadForNumericAxis,g.top-d.top-w,g.width+f+y,g.height+w+k,a.label.borderRadius,a.label.style.background,1,a.label.borderWidth,a.label.borderColor,0);return a.id&&P.node.classList.add(a.id),P}},{key:"annotationsBackground",value:function(){var s=this,a=this.w,h=function(d,g,f){var y=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(f,"-annotations .apexcharts-").concat(f,"-annotation-label[rel='").concat(g,"']"));if(y){var w=y.parentNode,k=s.addBackgroundToAnno(y,d);k&&(w.insertBefore(k.node,y),d.label.mouseEnter&&k.node.addEventListener("mouseenter",d.label.mouseEnter.bind(s,d)),d.label.mouseLeave&&k.node.addEventListener("mouseleave",d.label.mouseLeave.bind(s,d)),d.label.click&&k.node.addEventListener("click",d.label.click.bind(s,d)))}};a.config.annotations.xaxis.map(function(d,g){h(d,g,"xaxis")}),a.config.annotations.yaxis.map(function(d,g){h(d,g,"yaxis")}),a.config.annotations.points.map(function(d,g){h(d,g,"point")})}},{key:"getY1Y2",value:function(s,a){var h,d="y1"===s?a.y:a.y2,g=this.w;if(this.annoCtx.invertAxis){var f=g.globals.labels;g.config.xaxis.convertedCatToNumeric&&(f=g.globals.categoryLabels);var y=f.indexOf(d),w=g.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(y+1)+")");h=w?parseFloat(w.getAttribute("y")):(g.globals.gridHeight/f.length-1)*(y+1)-g.globals.barHeight,void 0!==a.seriesIndex&&g.globals.barHeight&&(h=h-g.globals.barHeight/2*(g.globals.series.length-1)+g.globals.barHeight*a.seriesIndex)}else{var k;k=g.config.yaxis[a.yAxisIndex].logarithmic?(d=new it(this.annoCtx.ctx).getLogVal(d,a.yAxisIndex))/g.globals.yLogRatio[a.yAxisIndex]:(d-g.globals.minYArr[a.yAxisIndex])/(g.globals.yRange[a.yAxisIndex]/g.globals.gridHeight),h=g.globals.gridHeight-k,!a.marker||null!=a.y||(h=0),g.config.yaxis[a.yAxisIndex]&&g.config.yaxis[a.yAxisIndex].reversed&&(h=k)}return"string"==typeof d&&d.indexOf("px")>-1&&(h=parseFloat(d)),h}},{key:"getX1X2",value:function(s,a){var h=this.w,d=this.annoCtx.invertAxis?h.globals.minY:h.globals.minX,g=this.annoCtx.invertAxis?h.globals.maxY:h.globals.maxX,f=this.annoCtx.invertAxis?h.globals.yRange[0]:h.globals.xRange,y=(a.x-d)/(f/h.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(y=(g-a.x)/(f/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(y=this.getStringX(a.x));var w=(a.x2-d)/(f/h.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(w=(g-a.x2)/(f/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(w=this.getStringX(a.x2)),null!=a.x||!a.marker||(y=h.globals.gridWidth),"x1"===s&&"string"==typeof a.x&&a.x.indexOf("px")>-1&&(y=parseFloat(a.x)),"x2"===s&&"string"==typeof a.x2&&a.x2.indexOf("px")>-1&&(w=parseFloat(a.x2)),void 0!==a.seriesIndex&&h.globals.barWidth&&!this.annoCtx.invertAxis&&(y=y-h.globals.barWidth/2*(h.globals.series.length-1)+h.globals.barWidth*a.seriesIndex),"x1"===s?y:w}},{key:"getStringX",value:function(s){var a=this.w,h=s;a.config.xaxis.convertedCatToNumeric&&a.globals.categoryLabels.length&&(s=a.globals.categoryLabels.indexOf(s)+1);var d=a.globals.labels.indexOf(s),g=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(d+1)+")");return g&&(h=parseFloat(g.getAttribute("x"))),h}}]),R}(),le=function(){function R(s){xt(this,R),this.w=s.w,this.annoCtx=s,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Rt(this.annoCtx)}return Yt(R,[{key:"addXaxisAnnotation",value:function(s,a,h){var d,g=this.w,f=this.helpers.getX1X2("x1",s),y=s.label.text,w=s.strokeDashArray;if(ht.isNumber(f)){if(null==s.x2){var k=this.annoCtx.graphics.drawLine(f+s.offsetX,0+s.offsetY,f+s.offsetX,g.globals.gridHeight+s.offsetY,s.borderColor,w,s.borderWidth);a.appendChild(k.node),s.id&&k.node.classList.add(s.id)}else{if((d=this.helpers.getX1X2("x2",s))<f){var C=f;f=d,d=C}var T=this.annoCtx.graphics.drawRect(f+s.offsetX,0+s.offsetY,d-f,g.globals.gridHeight+s.offsetY,0,s.fillColor,s.opacity,1,s.borderColor,w);T.node.classList.add("apexcharts-annotation-rect"),T.attr("clip-path","url(#gridRectMask".concat(g.globals.cuid,")")),a.appendChild(T.node),s.id&&T.node.classList.add(s.id)}var P=this.annoCtx.graphics.getTextRects(y,parseFloat(s.label.style.fontSize)),O=this.annoCtx.graphics.drawText({x:f+s.label.offsetX,y:("top"===s.label.position?4:"center"===s.label.position?g.globals.gridHeight/2+("vertical"===s.label.orientation?P.width/2:0):g.globals.gridHeight)+s.label.offsetY-("vertical"===s.label.orientation?"top"===s.label.position?P.width/2-12:-P.width/2:0),text:y,textAnchor:s.label.textAnchor,fontSize:s.label.style.fontSize,fontFamily:s.label.style.fontFamily,fontWeight:s.label.style.fontWeight,foreColor:s.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(s.label.style.cssClass," ").concat(s.id?s.id:"")});O.attr({rel:h}),a.appendChild(O.node),this.annoCtx.helpers.setOrientations(s,h)}}},{key:"drawXAxisAnnotations",value:function(){var s=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return a.config.annotations.xaxis.map(function(d,g){s.addXaxisAnnotation(d,h.node,g)}),h}}]),R}(),Pi=function(){function R(s){xt(this,R),this.w=s.w,this.annoCtx=s,this.helpers=new Rt(this.annoCtx)}return Yt(R,[{key:"addYaxisAnnotation",value:function(s,a,h){var d,g=this.w,f=s.strokeDashArray,y=this.helpers.getY1Y2("y1",s),w=s.label.text;if(null==s.y2){var k=this.annoCtx.graphics.drawLine(0+s.offsetX,y+s.offsetY,this._getYAxisAnnotationWidth(s),y+s.offsetY,s.borderColor,f,s.borderWidth);a.appendChild(k.node),s.id&&k.node.classList.add(s.id)}else{if((d=this.helpers.getY1Y2("y2",s))>y){var C=y;y=d,d=C}var T=this.annoCtx.graphics.drawRect(0+s.offsetX,d+s.offsetY,this._getYAxisAnnotationWidth(s),y-d,0,s.fillColor,s.opacity,1,s.borderColor,f);T.node.classList.add("apexcharts-annotation-rect"),T.attr("clip-path","url(#gridRectMask".concat(g.globals.cuid,")")),a.appendChild(T.node),s.id&&T.node.classList.add(s.id)}var F=this.annoCtx.graphics.drawText({x:("right"===s.label.position?g.globals.gridWidth:"center"===s.label.position?g.globals.gridWidth/2:0)+s.label.offsetX,y:(d??y)+s.label.offsetY-3,text:w,textAnchor:s.label.textAnchor,fontSize:s.label.style.fontSize,fontFamily:s.label.style.fontFamily,fontWeight:s.label.style.fontWeight,foreColor:s.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(s.label.style.cssClass," ").concat(s.id?s.id:"")});F.attr({rel:h}),a.appendChild(F.node)}},{key:"_getYAxisAnnotationWidth",value:function(s){var a=this.w;return(s.width.indexOf("%")>-1?a.globals.gridWidth*parseInt(s.width,10)/100:parseInt(s.width,10))+s.offsetX}},{key:"drawYAxisAnnotations",value:function(){var s=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return a.config.annotations.yaxis.map(function(d,g){s.addYaxisAnnotation(d,h.node,g)}),h}}]),R}(),ue=function(){function R(s){xt(this,R),this.w=s.w,this.annoCtx=s,this.helpers=new Rt(this.annoCtx)}return Yt(R,[{key:"addPointAnnotation",value:function(s,a,h){var d=this.helpers.getX1X2("x1",s),g=this.helpers.getY1Y2("y1",s);if(ht.isNumber(d)){var f={pSize:s.marker.size,pointStrokeWidth:s.marker.strokeWidth,pointFillColor:s.marker.fillColor,pointStrokeColor:s.marker.strokeColor,shape:s.marker.shape,pRadius:s.marker.radius,class:"apexcharts-point-annotation-marker ".concat(s.marker.cssClass," ").concat(s.id?s.id:"")},y=this.annoCtx.graphics.drawMarker(d+s.marker.offsetX,g+s.marker.offsetY,f);a.appendChild(y.node);var w=s.label.text?s.label.text:"",k=this.annoCtx.graphics.drawText({x:d+s.label.offsetX,y:g+s.label.offsetY-s.marker.size-parseFloat(s.label.style.fontSize)/1.6,text:w,textAnchor:s.label.textAnchor,fontSize:s.label.style.fontSize,fontFamily:s.label.style.fontFamily,fontWeight:s.label.style.fontWeight,foreColor:s.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(s.label.style.cssClass," ").concat(s.id?s.id:"")});if(k.attr({rel:h}),a.appendChild(k.node),s.customSVG.SVG){var C=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+s.customSVG.cssClass});C.attr({transform:"translate(".concat(d+s.customSVG.offsetX,", ").concat(g+s.customSVG.offsetY,")")}),C.node.innerHTML=s.customSVG.SVG,a.appendChild(C.node)}if(s.image.path){var T=s.image.width?s.image.width:20,P=s.image.height?s.image.height:20;y=this.annoCtx.addImage({x:d+s.image.offsetX-T/2,y:g+s.image.offsetY-P/2,width:T,height:P,path:s.image.path,appendTo:".apexcharts-point-annotations"})}s.mouseEnter&&y.node.addEventListener("mouseenter",s.mouseEnter.bind(this,s)),s.mouseLeave&&y.node.addEventListener("mouseleave",s.mouseLeave.bind(this,s)),s.click&&y.node.addEventListener("click",s.click.bind(this,s))}}},{key:"drawPointAnnotations",value:function(){var s=this,a=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return a.config.annotations.points.map(function(d,g){s.addPointAnnotation(d,h.node,g)}),h}}]),R}(),Xe={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Nn=function(){function R(){xt(this,R),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Yt(R,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Xe],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(s){return new Date(s).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(s){return s}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(s){return s+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(s){return s.globals.seriesTotals.reduce(function(a,h){return a+h},0)/s.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(s){return s},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(s){return s}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(s){return s}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(s){return s.globals.seriesTotals.reduce(function(a,h){return a+h},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(s){return null!==s?s:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(s){return s?s+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),R}(),Gi=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.graphics=new kt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Rt(this),this.xAxisAnnotations=new le(this),this.yAxisAnnotations=new Pi(this),this.pointsAnnotations=new ue(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Yt(R,[{key:"drawAxesAnnotations",value:function(){var s=this.w;if(s.globals.axisCharts){for(var a=this.yAxisAnnotations.drawYAxisAnnotations(),h=this.xAxisAnnotations.drawXAxisAnnotations(),d=this.pointsAnnotations.drawPointAnnotations(),g=s.config.chart.animations.enabled,f=[a,h,d],y=[h.node,a.node,d.node],w=0;w<3;w++)s.globals.dom.elGraphical.add(f[w]),!g||s.globals.resized||s.globals.dataChanged||"scatter"!==s.config.chart.type&&"bubble"!==s.config.chart.type&&s.globals.dataPoints>1&&y[w].classList.add("apexcharts-element-hidden"),s.globals.delayedElements.push({el:y[w],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var s=this;this.w.config.annotations.images.map(function(a,h){s.addImage(a,h)})}},{key:"drawTextAnnos",value:function(){var s=this;this.w.config.annotations.texts.map(function(a,h){s.addText(a,h)})}},{key:"addXaxisAnnotation",value:function(s,a,h){this.xAxisAnnotations.addXaxisAnnotation(s,a,h)}},{key:"addYaxisAnnotation",value:function(s,a,h){this.yAxisAnnotations.addYaxisAnnotation(s,a,h)}},{key:"addPointAnnotation",value:function(s,a,h){this.pointsAnnotations.addPointAnnotation(s,a,h)}},{key:"addText",value:function(s,a){var g=s.text,P=s.backgroundColor,F=s.borderWidth,O=s.strokeDashArray,j=s.borderRadius,Y=s.borderColor,G=s.appendTo,U=void 0===G?".apexcharts-svg":G,S=s.paddingLeft,N=void 0===S?4:S,E=s.paddingRight,H=void 0===E?4:E,W=s.paddingBottom,K=void 0===W?2:W,tt=s.paddingTop,et=void 0===tt?2:tt,gt=this.w,St=this.graphics.drawText({x:s.x,y:s.y,text:g,textAnchor:s.textAnchor||"start",fontSize:s.fontSize||"12px",fontWeight:s.fontWeight||"regular",fontFamily:s.fontFamily||gt.config.chart.fontFamily,foreColor:s.foreColor||gt.config.chart.foreColor,cssClass:s.cssClass}),bt=gt.globals.dom.baseEl.querySelector(U);bt&&bt.appendChild(St.node);var Et=St.bbox();if(g){var Gt=this.graphics.drawRect(Et.x-N,Et.y-et,Et.width+N+H,Et.height+K+et,j,P||"transparent",1,F,Y,O);bt.insertBefore(Gt.node,St.node)}}},{key:"addImage",value:function(s,a){var h=this.w,g=s.x,f=void 0===g?0:g,y=s.y,w=void 0===y?0:y,k=s.width,C=void 0===k?20:k,T=s.height,P=void 0===T?20:T,F=s.appendTo,O=void 0===F?".apexcharts-svg":F,j=h.globals.dom.Paper.image(s.path);j.size(C,P).move(f,w);var Y=h.globals.dom.baseEl.querySelector(O);return Y&&Y.appendChild(j.node),j}},{key:"addXaxisAnnotationExternal",value:function(s,a,h){return this.addAnnotationExternal({params:s,pushToMemory:a,context:h,type:"xaxis",contextMethod:h.addXaxisAnnotation}),h}},{key:"addYaxisAnnotationExternal",value:function(s,a,h){return this.addAnnotationExternal({params:s,pushToMemory:a,context:h,type:"yaxis",contextMethod:h.addYaxisAnnotation}),h}},{key:"addPointAnnotationExternal",value:function(s,a,h){return void 0===this.invertAxis&&(this.invertAxis=h.w.globals.isBarHorizontal),this.addAnnotationExternal({params:s,pushToMemory:a,context:h,type:"point",contextMethod:h.addPointAnnotation}),h}},{key:"addAnnotationExternal",value:function(s){var a=s.params,h=s.pushToMemory,d=s.context,g=s.type,f=s.contextMethod,y=d,w=y.w,k=w.globals.dom.baseEl.querySelector(".apexcharts-".concat(g,"-annotations")),C=k.childNodes.length+1,T=new Nn,P=Object.assign({},"xaxis"===g?T.xAxisAnnotation:"yaxis"===g?T.yAxisAnnotation:T.pointAnnotation),F=ht.extend(P,a);switch(g){case"xaxis":this.addXaxisAnnotation(F,k,C);break;case"yaxis":this.addYaxisAnnotation(F,k,C);break;case"point":this.addPointAnnotation(F,k,C)}var O=w.globals.dom.baseEl.querySelector(".apexcharts-".concat(g,"-annotations .apexcharts-").concat(g,"-annotation-label[rel='").concat(C,"']")),j=this.helpers.addBackgroundToAnno(O,F);return j&&k.insertBefore(j.node,O),h&&w.globals.memory.methodsToExec.push({context:y,id:F.id?F.id:ht.randomId(),method:f,label:"addAnnotation",params:a}),d}},{key:"clearAnnotations",value:function(s){var a=s.w,h=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");a.globals.memory.methodsToExec.map(function(d,g){"addText"!==d.label&&"addAnnotation"!==d.label||a.globals.memory.methodsToExec.splice(g,1)}),h=ht.listToArray(h),Array.prototype.forEach.call(h,function(d){for(;d.firstChild;)d.removeChild(d.firstChild)})}},{key:"removeAnnotation",value:function(s,a){var h=s.w,d=h.globals.dom.baseEl.querySelectorAll(".".concat(a));d&&(h.globals.memory.methodsToExec.map(function(g,f){g.id===a&&h.globals.memory.methodsToExec.splice(f,1)}),Array.prototype.forEach.call(d,function(g){g.parentElement.removeChild(g)}))}}]),R}(),ai=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Yt(R,[{key:"isValidDate",value:function(s){return"number"!=typeof s&&!isNaN(this.parseDate(s))}},{key:"getTimeStamp",value:function(s){return Date.parse(s)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(s).toISOString().substr(0,25)).getTime():new Date(s).getTime():s}},{key:"getDate",value:function(s){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(s).toUTCString()):new Date(s)}},{key:"parseDate",value:function(s){var a=Date.parse(s);if(!isNaN(a))return this.getTimeStamp(s);var h=Date.parse(s.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(h)}},{key:"parseDateWithTimezone",value:function(s){return Date.parse(s.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(s,a){var h=this.w.globals.locale,d=this.w.config.xaxis.labels.datetimeUTC,g=["\0"].concat(Ji(h.months)),f=["\x01"].concat(Ji(h.shortMonths)),y=["\x02"].concat(Ji(h.days)),w=["\x03"].concat(Ji(h.shortDays));function k(K,tt){var et=K+"";for(tt=tt||2;et.length<tt;)et="0"+et;return et}var C=d?s.getUTCFullYear():s.getFullYear();a=(a=(a=a.replace(/(^|[^\\])yyyy+/g,"$1"+C)).replace(/(^|[^\\])yy/g,"$1"+C.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+C);var T=(d?s.getUTCMonth():s.getMonth())+1;a=(a=(a=(a=a.replace(/(^|[^\\])MMMM+/g,"$1"+g[0])).replace(/(^|[^\\])MMM/g,"$1"+f[0])).replace(/(^|[^\\])MM/g,"$1"+k(T))).replace(/(^|[^\\])M/g,"$1"+T);var P=d?s.getUTCDate():s.getDate();a=(a=(a=(a=a.replace(/(^|[^\\])dddd+/g,"$1"+y[0])).replace(/(^|[^\\])ddd/g,"$1"+w[0])).replace(/(^|[^\\])dd/g,"$1"+k(P))).replace(/(^|[^\\])d/g,"$1"+P);var F=d?s.getUTCHours():s.getHours(),O=F>12?F-12:0===F?12:F;a=(a=(a=(a=a.replace(/(^|[^\\])HH+/g,"$1"+k(F))).replace(/(^|[^\\])H/g,"$1"+F)).replace(/(^|[^\\])hh+/g,"$1"+k(O))).replace(/(^|[^\\])h/g,"$1"+O);var j=d?s.getUTCMinutes():s.getMinutes();a=(a=a.replace(/(^|[^\\])mm+/g,"$1"+k(j))).replace(/(^|[^\\])m/g,"$1"+j);var Y=d?s.getUTCSeconds():s.getSeconds();a=(a=a.replace(/(^|[^\\])ss+/g,"$1"+k(Y))).replace(/(^|[^\\])s/g,"$1"+Y);var G=d?s.getUTCMilliseconds():s.getMilliseconds();a=a.replace(/(^|[^\\])fff+/g,"$1"+k(G,3)),G=Math.round(G/10),a=a.replace(/(^|[^\\])ff/g,"$1"+k(G)),G=Math.round(G/10);var U=F<12?"AM":"PM";a=(a=(a=a.replace(/(^|[^\\])f/g,"$1"+G)).replace(/(^|[^\\])TT+/g,"$1"+U)).replace(/(^|[^\\])T/g,"$1"+U.charAt(0));var S=U.toLowerCase();a=(a=a.replace(/(^|[^\\])tt+/g,"$1"+S)).replace(/(^|[^\\])t/g,"$1"+S.charAt(0));var N=-s.getTimezoneOffset(),E=d||!N?"Z":N>0?"+":"-";if(!d){var H=(N=Math.abs(N))%60;E+=k(Math.floor(N/60))+":"+k(H)}a=a.replace(/(^|[^\\])K/g,"$1"+E);var W=(d?s.getUTCDay():s.getDay())+1;return(a=(a=(a=(a=a.replace(new RegExp(y[0],"g"),y[W])).replace(new RegExp(w[0],"g"),w[W])).replace(new RegExp(g[0],"g"),g[T])).replace(new RegExp(f[0],"g"),f[T])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(s,a,h){var d=this.w;void 0!==d.config.xaxis.min&&(s=d.config.xaxis.min),void 0!==d.config.xaxis.max&&(a=d.config.xaxis.max);var g=this.getDate(s),f=this.getDate(a),y=this.formatDate(g,"yyyy MM dd HH mm ss fff").split(" "),w=this.formatDate(f,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(y[6],10),maxMillisecond:parseInt(w[6],10),minSecond:parseInt(y[5],10),maxSecond:parseInt(w[5],10),minMinute:parseInt(y[4],10),maxMinute:parseInt(w[4],10),minHour:parseInt(y[3],10),maxHour:parseInt(w[3],10),minDate:parseInt(y[2],10),maxDate:parseInt(w[2],10),minMonth:parseInt(y[1],10)-1,maxMonth:parseInt(w[1],10)-1,minYear:parseInt(y[0],10),maxYear:parseInt(w[0],10)}}},{key:"isLeapYear",value:function(s){return s%4==0&&s%100!=0||s%400==0}},{key:"calculcateLastDaysOfMonth",value:function(s,a,h){return this.determineDaysOfMonths(s,a)-h}},{key:"determineDaysOfYear",value:function(s){var a=365;return this.isLeapYear(s)&&(a=366),a}},{key:"determineRemainingDaysOfYear",value:function(s,a,h){var d=this.daysCntOfYear[a]+h;return a>1&&this.isLeapYear()&&d++,d}},{key:"determineDaysOfMonths",value:function(s,a){var h=30;switch(s=ht.monthMod(s),!0){case this.months30.indexOf(s)>-1:2===s&&(h=this.isLeapYear(a)?29:28);break;case this.months31.indexOf(s)>-1:default:h=31}return h}}]),R}(),te=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.tooltipKeyFormat="dd MMM"}return Yt(R,[{key:"xLabelFormat",value:function(s,a,h,d){var g=this.w;if("datetime"===g.config.xaxis.type&&void 0===g.config.xaxis.labels.formatter&&void 0===g.config.tooltip.x.formatter){var f=new ai(this.ctx);return f.formatDate(f.getDate(a),g.config.tooltip.x.format)}return s(a,h,d)}},{key:"defaultGeneralFormatter",value:function(s){return Array.isArray(s)?s.map(function(a){return a}):s}},{key:"defaultYFormatter",value:function(s,a,h){var d=this.w;return ht.isNumber(s)&&(s=s.toFixed(0!==d.globals.yValueDecimal?void 0!==a.decimalsInFloat?a.decimalsInFloat:d.globals.yValueDecimal:d.globals.maxYArr[h]-d.globals.minYArr[h]<5?1:0)),s}},{key:"setLabelFormatters",value:function(){var s=this,a=this.w;return a.globals.xaxisTooltipFormatter=function(h){return s.defaultGeneralFormatter(h)},a.globals.ttKeyFormatter=function(h){return s.defaultGeneralFormatter(h)},a.globals.ttZFormatter=function(h){return h},a.globals.legendFormatter=function(h){return s.defaultGeneralFormatter(h)},a.globals.xLabelFormatter=void 0!==a.config.xaxis.labels.formatter?a.config.xaxis.labels.formatter:function(h){if(ht.isNumber(h)){if(!a.config.xaxis.convertedCatToNumeric&&"numeric"===a.config.xaxis.type){if(ht.isNumber(a.config.xaxis.decimalsInFloat))return h.toFixed(a.config.xaxis.decimalsInFloat);var d=a.globals.maxX-a.globals.minX;return h.toFixed(d>0&&d<100?1:0)}return h.toFixed(a.globals.isBarHorizontal&&a.globals.maxY-a.globals.minYArr<4?1:0)}return h},a.globals.ttKeyFormatter="function"==typeof a.config.tooltip.x.formatter?a.config.tooltip.x.formatter:a.globals.xLabelFormatter,"function"==typeof a.config.xaxis.tooltip.formatter&&(a.globals.xaxisTooltipFormatter=a.config.xaxis.tooltip.formatter),(Array.isArray(a.config.tooltip.y)||void 0!==a.config.tooltip.y.formatter)&&(a.globals.ttVal=a.config.tooltip.y),void 0!==a.config.tooltip.z.formatter&&(a.globals.ttZFormatter=a.config.tooltip.z.formatter),void 0!==a.config.legend.formatter&&(a.globals.legendFormatter=a.config.legend.formatter),a.config.yaxis.forEach(function(h,d){a.globals.yLabelFormatters[d]=void 0!==h.labels.formatter?h.labels.formatter:function(g){return a.globals.xyCharts?Array.isArray(g)?g.map(function(f){return s.defaultYFormatter(f,h,d)}):s.defaultYFormatter(g,h,d):g}}),a.globals}},{key:"heatmapLabelFormatters",value:function(){var s=this.w;if("heatmap"===s.config.chart.type){s.globals.yAxisScale[0].result=s.globals.seriesNames.slice();var a=s.globals.seriesNames.reduce(function(h,d){return h.length>d.length?h:d},0);s.globals.yAxisScale[0].niceMax=a,s.globals.yAxisScale[0].niceMin=a}}}]),R}(),$t=function(R){var s,a=R.isTimeline,h=R.ctx,d=R.seriesIndex,g=R.dataPointIndex,f=R.y1,y=R.y2,w=R.w,k=w.globals.seriesRangeStart[d][g],C=w.globals.seriesRangeEnd[d][g],T=w.globals.labels[g],P=w.config.series[d].name?w.config.series[d].name:"",F=w.globals.ttKeyFormatter,O=w.config.tooltip.y.title.formatter,j={w,seriesIndex:d,dataPointIndex:g,start:k,end:C};"function"==typeof O&&(P=O(P,j)),null!==(s=w.config.series[d].data[g])&&void 0!==s&&s.x&&(T=w.config.series[d].data[g].x),a||"datetime"===w.config.xaxis.type&&(T=new te(h).xLabelFormat(w.globals.ttKeyFormatter,T,T,{i:void 0,dateFormatter:new ai(h).formatDate,w})),"function"==typeof F&&(T=F(T,j)),Number.isFinite(f)&&Number.isFinite(y)&&(k=f,C=y);var Y="",G="",U=w.globals.colors[d];if(void 0===w.config.tooltip.x.formatter)if("datetime"===w.config.xaxis.type){var S=new ai(h);Y=S.formatDate(S.getDate(k),w.config.tooltip.x.format),G=S.formatDate(S.getDate(C),w.config.tooltip.x.format)}else Y=k,G=C;else Y=w.config.tooltip.x.formatter(k),G=w.config.tooltip.x.formatter(C);return{start:k,end:C,startVal:Y,endVal:G,ylabel:T,color:U,seriesName:P}},io=function(R){var s=R.color,a=R.seriesName,h=R.ylabel,d=R.start,g=R.end,f=R.seriesIndex,y=R.dataPointIndex,w=R.ctx.tooltip.tooltipLabels.getFormatters(f);d=w.yLbFormatter(d),g=w.yLbFormatter(g);var k=w.yLbFormatter(R.w.globals.series[f][y]),C='<span class="value start-value">\n  '.concat(d,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(g,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+s+'">'+(a||"")+'</span></div><div> <span class="category">'+h+": </span> "+(R.w.globals.comboCharts?"rangeArea"===R.w.config.series[f].type||"rangeBar"===R.w.config.series[f].type?C:"<span>".concat(k,"</span>"):C)+" </div></div>"},bi=function(){function R(s){xt(this,R),this.opts=s}return Yt(R,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(s){return this.hideYAxis(),ht.extend(s,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),v(v({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var s=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){return s._getBoxTooltip(a.w,a.seriesIndex,a.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var s=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){return s._getBoxTooltip(a.w,a.seriesIndex,a.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(s,a){var h=a.seriesIndex,d=a.dataPointIndex,g=a.w,f=function(){return g.globals.seriesRangeEnd[h][d]-g.globals.seriesRangeStart[h][d]};return g.globals.comboCharts?"rangeBar"===g.config.series[h].type||"rangeArea"===g.config.series[h].type?f():s:f()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(s){return s.w.config.plotOptions&&s.w.config.plotOptions.bar&&s.w.config.plotOptions.bar.horizontal?(d=(h=$t(v(v({},a=s),{},{isTimeline:!0}))).color,g=h.seriesName,f=h.ylabel,y=h.startVal,w=h.endVal,io(v(v({},a),{},{color:d,seriesName:g,ylabel:f,start:y,end:w}))):function(a){var h=$t(a),d=h.color,g=h.seriesName,f=h.ylabel,y=h.start,w=h.end;return io(v(v({},a),{},{color:d,seriesName:g,ylabel:f,start:y,end:w}))}(s);var a,h,d,g,f,y,w}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(s){var a,h;return null!==(a=s.plotOptions.bar)&&void 0!==a&&a.barHeight||(s.plotOptions.bar.barHeight=2),null!==(h=s.plotOptions.bar)&&void 0!==h&&h.columnWidth||(s.plotOptions.bar.columnWidth=2),s}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(s){return d=(h=$t(a=s)).color,g=h.seriesName,f=h.ylabel,y=h.start,w=h.end,io(v(v({},a),{},{color:d,seriesName:g,ylabel:f,start:y,end:w}));var a,h,d,g,f,y,w}}}}},{key:"brush",value:function(s){return ht.extend(s,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(s){s.dataLabels=s.dataLabels||{},s.dataLabels.formatter=s.dataLabels.formatter||void 0;var a=s.dataLabels.formatter;return s.yaxis.forEach(function(h,d){s.yaxis[d].min=0,s.yaxis[d].max=100}),"bar"===s.chart.type&&(s.dataLabels.formatter=a||function(h){return"number"==typeof h&&h?h.toFixed(0)+"%":h}),s}},{key:"stackedBars",value:function(){var s=this.bar();return v(v({},s),{},{plotOptions:v(v({},s.plotOptions),{},{bar:v(v({},s.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(s){return s.xaxis.convertedCatToNumeric=!0,s}},{key:"convertCatToNumericXaxis",value:function(s,a,h){s.xaxis.type="numeric",s.xaxis.labels=s.xaxis.labels||{},s.xaxis.labels.formatter=s.xaxis.labels.formatter||function(f){return ht.isNumber(f)?Math.floor(f):f};var d=s.xaxis.labels.formatter,g=s.xaxis.categories&&s.xaxis.categories.length?s.xaxis.categories:s.labels;return h&&h.length&&(g=h.map(function(f){return Array.isArray(f)?f:String(f)})),g&&g.length&&(s.xaxis.labels.formatter=function(f){return ht.isNumber(f)?d(g[Math.floor(f)-1]):d(f)}),s.xaxis.categories=[],s.labels=[],s.xaxis.tickAmount=s.xaxis.tickAmount||"dataPoints",s}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(s){return s.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(s){return s.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(s){return s.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(s){return s},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(s,a,h,d,g){var f=s.globals.seriesCandleO[a][h],y=s.globals.seriesCandleH[a][h],w=s.globals.seriesCandleM[a][h],k=s.globals.seriesCandleL[a][h],C=s.globals.seriesCandleC[a][h];return s.config.series[a].type&&s.config.series[a].type!==g?'<div class="apexcharts-custom-tooltip">\n          '.concat(s.config.series[a].name?s.config.series[a].name:"series-"+(a+1),": <strong>").concat(s.globals.series[a][h],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(s.config.chart.type,'">')+"<div>".concat(d[0],': <span class="value">')+f+"</span></div>"+"<div>".concat(d[1],': <span class="value">')+y+"</span></div>"+(w?"<div>".concat(d[2],': <span class="value">')+w+"</span></div>":"")+"<div>".concat(d[3],': <span class="value">')+k+"</span></div>"+"<div>".concat(d[4],': <span class="value">')+C+"</span></div></div>"}}]),R}(),mr=function(){function R(s){xt(this,R),this.opts=s}return Yt(R,[{key:"init",value:function(s){var a=s.responsiveOverride,h=this.opts,d=new Nn,g=new bi(h);this.chartType=h.chart.type,h=this.extendYAxis(h),h=this.extendAnnotations(h);var f=d.init(),y={};if(h&&"object"===mi(h)){var w,k,C,T,P,F,O,j,Y={};Y=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(h.chart.type)?g[h.chart.type]():g.line(),null!==(w=h.plotOptions)&&void 0!==w&&null!==(k=w.bar)&&void 0!==k&&k.isFunnel&&(Y=g.funnel()),h.chart.stacked&&"bar"===h.chart.type&&(Y=g.stackedBars()),null!==(C=h.chart.brush)&&void 0!==C&&C.enabled&&(Y=g.brush(Y)),h.chart.stacked&&"100%"===h.chart.stackType&&(h=g.stacked100(h)),null!==(T=h.plotOptions)&&void 0!==T&&null!==(P=T.bar)&&void 0!==P&&P.isDumbbell&&(h=g.dumbbell(h)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(h),h.xaxis=h.xaxis||window.Apex.xaxis||{},a||(h.xaxis.convertedCatToNumeric=!1),(null!==(F=(h=this.checkForCatToNumericXAxis(this.chartType,Y,h)).chart.sparkline)&&void 0!==F&&F.enabled||null!==(O=window.Apex.chart)&&void 0!==O&&null!==(j=O.sparkline)&&void 0!==j&&j.enabled)&&(Y=g.sparkline(Y)),y=ht.extend(f,Y)}var G=ht.extend(y,window.Apex);return f=ht.extend(G,h),this.handleUserInputErrors(f)}},{key:"checkForCatToNumericXAxis",value:function(s,a,h){var d,g,f=new bi(h);return("bar"===s||"boxPlot"===s)&&(null===(d=h.plotOptions)||void 0===d||null===(g=d.bar)||void 0===g?void 0:g.horizontal)||"pie"===s||"polarArea"===s||"donut"===s||"radar"===s||"radialBar"===s||"heatmap"===s||!("datetime"!==h.xaxis.type&&"numeric"!==h.xaxis.type)||"between"===(h.xaxis.tickPlacement?h.xaxis.tickPlacement:a.xaxis&&a.xaxis.tickPlacement)||(h=f.convertCatToNumeric(h)),h}},{key:"extendYAxis",value:function(s,a){var h=new Nn;(void 0===s.yaxis||!s.yaxis||Array.isArray(s.yaxis)&&0===s.yaxis.length)&&(s.yaxis={}),s.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(s.yaxis=ht.extend(s.yaxis,window.Apex.yaxis)),s.yaxis=s.yaxis.constructor!==Array?[ht.extend(h.yAxis,s.yaxis)]:ht.extendArray(s.yaxis,h.yAxis);var d=!1;s.yaxis.forEach(function(f){f.logarithmic&&(d=!0)});var g=s.series;return a&&!g&&(g=a.config.series),d&&g.length!==s.yaxis.length&&g.length&&(s.yaxis=g.map(function(f,y){if(f.name||(g[y].name="series-".concat(y+1)),s.yaxis[y])return s.yaxis[y].seriesName=g[y].name,s.yaxis[y];var w=ht.extend(h.yAxis,s.yaxis[0]);return w.show=!1,w})),d&&g.length>1&&g.length!==s.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),s}},{key:"extendAnnotations",value:function(s){return void 0===s.annotations&&(s.annotations={},s.annotations.yaxis=[],s.annotations.xaxis=[],s.annotations.points=[]),s=this.extendYAxisAnnotations(s),s=this.extendXAxisAnnotations(s),this.extendPointAnnotations(s)}},{key:"extendYAxisAnnotations",value:function(s){var a=new Nn;return s.annotations.yaxis=ht.extendArray(void 0!==s.annotations.yaxis?s.annotations.yaxis:[],a.yAxisAnnotation),s}},{key:"extendXAxisAnnotations",value:function(s){var a=new Nn;return s.annotations.xaxis=ht.extendArray(void 0!==s.annotations.xaxis?s.annotations.xaxis:[],a.xAxisAnnotation),s}},{key:"extendPointAnnotations",value:function(s){var a=new Nn;return s.annotations.points=ht.extendArray(void 0!==s.annotations.points?s.annotations.points:[],a.pointAnnotation),s}},{key:"checkForDarkTheme",value:function(s){s.theme&&"dark"===s.theme.mode&&(s.tooltip||(s.tooltip={}),"light"!==s.tooltip.theme&&(s.tooltip.theme="dark"),s.chart.foreColor||(s.chart.foreColor="#f6f7f8"),s.chart.background||(s.chart.background="#424242"),s.theme.palette||(s.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(s){var a=s;if(a.tooltip.shared&&a.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===a.chart.type&&a.plotOptions.bar.horizontal){if(a.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");a.yaxis[0].reversed&&(a.yaxis[0].opposite=!0),a.xaxis.tooltip.enabled=!1,a.yaxis[0].tooltip.enabled=!1,a.chart.zoom.enabled=!1}return"bar"!==a.chart.type&&"rangeBar"!==a.chart.type||a.tooltip.shared&&"barWidth"===a.xaxis.crosshairs.width&&a.series.length>1&&(a.xaxis.crosshairs.width="tickWidth"),"candlestick"!==a.chart.type&&"boxPlot"!==a.chart.type||a.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(a.chart.type," chart is not supported.")),a.yaxis[0].reversed=!1),a}}]),R}(),ln=function(){function R(){xt(this,R)}return Yt(R,[{key:"initGlobalVars",value:function(s){s.series=[],s.seriesCandleO=[],s.seriesCandleH=[],s.seriesCandleM=[],s.seriesCandleL=[],s.seriesCandleC=[],s.seriesRangeStart=[],s.seriesRangeEnd=[],s.seriesRange=[],s.seriesPercent=[],s.seriesGoals=[],s.seriesX=[],s.seriesZ=[],s.seriesNames=[],s.seriesTotals=[],s.seriesLog=[],s.seriesColors=[],s.stackedSeriesTotals=[],s.seriesXvalues=[],s.seriesYvalues=[],s.labels=[],s.hasXaxisGroups=!1,s.groups=[],s.hasSeriesGroups=!1,s.seriesGroups=[],s.categoryLabels=[],s.timescaleLabels=[],s.noLabelsProvided=!1,s.resizeTimer=null,s.selectionResizeTimer=null,s.delayedElements=[],s.pointsArray=[],s.dataLabelsRects=[],s.isXNumeric=!1,s.skipLastTimelinelabel=!1,s.skipFirstTimelinelabel=!1,s.isDataXYZ=!1,s.isMultiLineX=!1,s.isMultipleYAxis=!1,s.maxY=-Number.MAX_VALUE,s.minY=Number.MIN_VALUE,s.minYArr=[],s.maxYArr=[],s.maxX=-Number.MAX_VALUE,s.minX=Number.MAX_VALUE,s.initialMaxX=-Number.MAX_VALUE,s.initialMinX=Number.MAX_VALUE,s.maxDate=0,s.minDate=Number.MAX_VALUE,s.minZ=Number.MAX_VALUE,s.maxZ=-Number.MAX_VALUE,s.minXDiff=Number.MAX_VALUE,s.yAxisScale=[],s.xAxisScale=null,s.xAxisTicksPositions=[],s.yLabelsCoords=[],s.yTitleCoords=[],s.barPadForNumericAxis=0,s.padHorizontal=0,s.xRange=0,s.yRange=[],s.zRange=0,s.dataPoints=0,s.xTickAmount=0,s.multiAxisTickAmount=0}},{key:"globalVars",value:function(s){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:s.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===s.chart.toolbar.autoSelected&&s.chart.toolbar.tools.zoom&&s.chart.zoom.enabled,panEnabled:"pan"===s.chart.toolbar.autoSelected&&s.chart.toolbar.tools.pan,selectionEnabled:"selection"===s.chart.toolbar.autoSelected&&s.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(s){var a=this.globalVars(s);return this.initGlobalVars(a),a.initialConfig=ht.extend({},s),a.initialSeries=ht.clone(s.series),a.lastXAxis=ht.clone(a.initialConfig.xaxis),a.lastYAxis=ht.clone(a.initialConfig.yaxis),a}}]),R}(),Qt=function(){function R(s){xt(this,R),this.opts=s}return Yt(R,[{key:"init",value:function(){var s=new mr(this.opts).init({responsiveOverride:!1});return{config:s,globals:(new ln).init(s)}}}]),R}(),Vn=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.opts=null,this.seriesIndex=0}return Yt(R,[{key:"clippedImgArea",value:function(s){var a=this.w,h=a.config,d=parseInt(a.globals.gridWidth,10),g=parseInt(a.globals.gridHeight,10),f=d>g?d:g,y=s.image,w=0,k=0;void 0===s.width&&void 0===s.height?void 0!==h.fill.image.width&&void 0!==h.fill.image.height?(w=h.fill.image.width+1,k=h.fill.image.height):(w=f+1,k=f):(w=s.width,k=s.height);var C=document.createElementNS(a.globals.SVGNS,"pattern");kt.setAttrs(C,{id:s.patternID,patternUnits:s.patternUnits?s.patternUnits:"userSpaceOnUse",width:w+"px",height:k+"px"});var T=document.createElementNS(a.globals.SVGNS,"image");C.appendChild(T),T.setAttributeNS(window.SVG.xlink,"href",y),kt.setAttrs(T,{x:0,y:0,preserveAspectRatio:"none",width:w+"px",height:k+"px"}),T.style.opacity=s.opacity,a.globals.dom.elDefs.node.appendChild(C)}},{key:"getSeriesIndex",value:function(s){var a=this.w,h=a.config.chart.type;return this.seriesIndex=("bar"===h||"rangeBar"===h)&&a.config.plotOptions.bar.distributed||"heatmap"===h||"treemap"===h?s.seriesNumber:s.seriesNumber%a.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(s){var a=this.w;this.opts=s;var h,d,g,f=this.w.config;this.seriesIndex=this.getSeriesIndex(s);var y=this.getFillColors()[this.seriesIndex];void 0!==a.globals.seriesColors[this.seriesIndex]&&(y=a.globals.seriesColors[this.seriesIndex]),"function"==typeof y&&(y=y({seriesIndex:this.seriesIndex,dataPointIndex:s.dataPointIndex,value:s.value,w:a}));var w=s.fillType?s.fillType:this.getFillType(this.seriesIndex),k=Array.isArray(f.fill.opacity)?f.fill.opacity[this.seriesIndex]:f.fill.opacity;s.color&&(y=s.color),y||(y="#fff",console.warn("undefined color - ApexCharts"));var C=y;if(-1===y.indexOf("rgb")?y.length<9&&(C=ht.hexToRgba(y,k)):y.indexOf("rgba")>-1&&(k=ht.getOpacityFromRGBA(y)),s.opacity&&(k=s.opacity),"pattern"===w&&(d=this.handlePatternFill({fillConfig:s.fillConfig,patternFill:d,fillColor:y,fillOpacity:k,defaultColor:C})),"gradient"===w&&(g=this.handleGradientFill({fillConfig:s.fillConfig,fillColor:y,fillOpacity:k,i:this.seriesIndex})),"image"===w){var T=f.fill.image.src,P=s.patternID?s.patternID:"";this.clippedImgArea({opacity:k,image:Array.isArray(T)?s.seriesNumber<T.length?T[s.seriesNumber]:T[0]:T,width:s.width?s.width:void 0,height:s.height?s.height:void 0,patternUnits:s.patternUnits,patternID:"pattern".concat(a.globals.cuid).concat(s.seriesNumber+1).concat(P)}),h="url(#pattern".concat(a.globals.cuid).concat(s.seriesNumber+1).concat(P,")")}else h="gradient"===w?g:"pattern"===w?d:C;return s.solid&&(h=C),h}},{key:"getFillType",value:function(s){var a=this.w;return Array.isArray(a.config.fill.type)?a.config.fill.type[s]:a.config.fill.type}},{key:"getFillColors",value:function(){var s=this.w,a=s.config,h=this.opts,d=[];return s.globals.comboCharts?"line"===s.config.series[this.seriesIndex].type?Array.isArray(s.globals.stroke.colors)?d=s.globals.stroke.colors:d.push(s.globals.stroke.colors):Array.isArray(s.globals.fill.colors)?d=s.globals.fill.colors:d.push(s.globals.fill.colors):"line"===a.chart.type?Array.isArray(s.globals.stroke.colors)?d=s.globals.stroke.colors:d.push(s.globals.stroke.colors):Array.isArray(s.globals.fill.colors)?d=s.globals.fill.colors:d.push(s.globals.fill.colors),void 0!==h.fillColors&&(d=[],Array.isArray(h.fillColors)?d=h.fillColors.slice():d.push(h.fillColors)),d}},{key:"handlePatternFill",value:function(s){var a=s.fillConfig,d=s.fillColor,g=s.fillOpacity,f=s.defaultColor,y=this.w.config.fill;a&&(y=a);var w=this.opts,k=new kt(this.ctx),C=Array.isArray(y.pattern.strokeWidth)?y.pattern.strokeWidth[this.seriesIndex]:y.pattern.strokeWidth,T=d;return Array.isArray(y.pattern.style)?void 0!==y.pattern.style[w.seriesNumber]?k.drawPattern(y.pattern.style[w.seriesNumber],y.pattern.width,y.pattern.height,T,C,g):f:k.drawPattern(y.pattern.style,y.pattern.width,y.pattern.height,T,C,g)}},{key:"handleGradientFill",value:function(s){var a=s.fillColor,h=s.fillOpacity,d=s.fillConfig,g=s.i,f=this.w.config.fill;d&&(f=v(v({},f),d));var y,w=this.opts,k=new kt(this.ctx),C=new ht,T=f.gradient.type,P=a,F=void 0===f.gradient.opacityFrom?h:Array.isArray(f.gradient.opacityFrom)?f.gradient.opacityFrom[g]:f.gradient.opacityFrom;P.indexOf("rgba")>-1&&(F=ht.getOpacityFromRGBA(P));var O=void 0===f.gradient.opacityTo?h:Array.isArray(f.gradient.opacityTo)?f.gradient.opacityTo[g]:f.gradient.opacityTo;if(void 0===f.gradient.gradientToColors||0===f.gradient.gradientToColors.length)y=C.shadeColor("dark"===f.gradient.shade?-1*parseFloat(f.gradient.shadeIntensity):parseFloat(f.gradient.shadeIntensity),a.indexOf("rgb")>-1?ht.rgb2hex(a):a);else if(f.gradient.gradientToColors[w.seriesNumber]){var j=f.gradient.gradientToColors[w.seriesNumber];y=j,j.indexOf("rgba")>-1&&(O=ht.getOpacityFromRGBA(j))}else y=a;if(f.gradient.gradientFrom&&(P=f.gradient.gradientFrom),f.gradient.gradientTo&&(y=f.gradient.gradientTo),f.gradient.inverseColors){var Y=P;P=y,y=Y}return P.indexOf("rgb")>-1&&(P=ht.rgb2hex(P)),y.indexOf("rgb")>-1&&(y=ht.rgb2hex(y)),k.drawGradient(T,P,y,F,O,w.size,f.gradient.stops,f.gradient.colorStops,g)}}]),R}(),gn=function(){function R(s,a){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"setGlobalMarkerSize",value:function(){var s=this.w;if(s.globals.markers.size=Array.isArray(s.config.markers.size)?s.config.markers.size:[s.config.markers.size],s.globals.markers.size.length>0){if(s.globals.markers.size.length<s.globals.series.length+1)for(var a=0;a<=s.globals.series.length;a++)void 0===s.globals.markers.size[a]&&s.globals.markers.size.push(s.globals.markers.size[0])}else s.globals.markers.size=s.config.series.map(function(h){return s.config.markers.size})}},{key:"plotChartMarkers",value:function(s,a,h,d){var g,f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],y=this.w,w=a,k=s,C=null,T=new kt(this.ctx),P=y.config.markers.discrete&&y.config.markers.discrete.length;if((y.globals.markers.size[a]>0||f||P)&&(C=T.group({class:f||P?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(y.globals.cuid,")")),Array.isArray(k.x))for(var F=0;F<k.x.length;F++){var O=h;1===h&&0===F&&(O=0),1===h&&1===F&&(O=1);var j="apexcharts-marker";if("line"!==y.config.chart.type&&"area"!==y.config.chart.type||y.globals.comboCharts||y.config.tooltip.intersect||(j+=" no-pointer-events"),(Array.isArray(y.config.markers.size)?y.globals.markers.size[a]>0:y.config.markers.size>0)||f||P){ht.isNumber(k.y[F])?j+=" w".concat(ht.randomId()):j="apexcharts-nullpoint";var Y=this.getMarkerConfig({cssClass:j,seriesIndex:a,dataPointIndex:O});y.config.series[w].data[O]&&(y.config.series[w].data[O].fillColor&&(Y.pointFillColor=y.config.series[w].data[O].fillColor),y.config.series[w].data[O].strokeColor&&(Y.pointStrokeColor=y.config.series[w].data[O].strokeColor)),d&&(Y.pSize=d),(k.x[F]<0||k.x[F]>y.globals.gridWidth||k.y[F]<-y.globals.markers.largestSize||k.y[F]>y.globals.gridHeight+y.globals.markers.largestSize)&&(Y.pSize=0),(g=T.drawMarker(k.x[F],k.y[F],Y)).attr("rel",O),g.attr("j",O),g.attr("index",a),g.node.setAttribute("default-marker-size",Y.pSize),new si(this.ctx).setSelectionFilter(g,a,O),this.addEvents(g),C&&C.add(g)}else void 0===y.globals.pointsArray[a]&&(y.globals.pointsArray[a]=[]),y.globals.pointsArray[a].push([k.x[F],k.y[F]])}return C}},{key:"getMarkerConfig",value:function(s){var a=s.cssClass,h=s.seriesIndex,d=s.dataPointIndex,g=void 0===d?null:d,f=s.finishRadius,y=void 0===f?null:f,w=this.w,k=this.getMarkerStyle(h),C=w.globals.markers.size[h],T=w.config.markers;return null!==g&&T.discrete.length&&T.discrete.map(function(P){P.seriesIndex===h&&P.dataPointIndex===g&&(k.pointStrokeColor=P.strokeColor,k.pointFillColor=P.fillColor,C=P.size,k.pointShape=P.shape)}),{pSize:null===y?C:y,pRadius:T.radius,width:Array.isArray(T.width)?T.width[h]:T.width,height:Array.isArray(T.height)?T.height[h]:T.height,pointStrokeWidth:Array.isArray(T.strokeWidth)?T.strokeWidth[h]:T.strokeWidth,pointStrokeColor:k.pointStrokeColor,pointFillColor:k.pointFillColor,shape:k.pointShape||(Array.isArray(T.shape)?T.shape[h]:T.shape),class:a,pointStrokeOpacity:Array.isArray(T.strokeOpacity)?T.strokeOpacity[h]:T.strokeOpacity,pointStrokeDashArray:Array.isArray(T.strokeDashArray)?T.strokeDashArray[h]:T.strokeDashArray,pointFillOpacity:Array.isArray(T.fillOpacity)?T.fillOpacity[h]:T.fillOpacity,seriesIndex:h}}},{key:"addEvents",value:function(s){var a=this.w,h=new kt(this.ctx);s.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this.ctx,s)),s.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this.ctx,s)),s.node.addEventListener("mousedown",h.pathMouseDown.bind(this.ctx,s)),s.node.addEventListener("click",a.config.markers.onClick),s.node.addEventListener("dblclick",a.config.markers.onDblClick),s.node.addEventListener("touchstart",h.pathMouseDown.bind(this.ctx,s),{passive:!0})}},{key:"getMarkerStyle",value:function(s){var a=this.w,h=a.globals.markers.colors,d=a.config.markers.strokeColor||a.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(d)?d[s]:d,pointFillColor:Array.isArray(h)?h[s]:h}}}]),R}(),bs=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Yt(R,[{key:"draw",value:function(s,a,h){var d=this.w,g=new kt(this.ctx),f=h.realIndex,y=h.pointsPos,w=h.zRatio,k=h.elParent,C=g.group({class:"apexcharts-series-markers apexcharts-series-".concat(d.config.chart.type)});if(C.attr("clip-path","url(#gridRectMarkerMask".concat(d.globals.cuid,")")),Array.isArray(y.x))for(var T=0;T<y.x.length;T++){var P=a+1,F=!0;0===a&&0===T&&(P=0),0===a&&1===T&&(P=1);var O=0,j=d.globals.markers.size[f];if(w!==1/0){var Y=d.config.plotOptions.bubble;j=d.globals.seriesZ[f][P],Y.zScaling&&(j/=w),Y.minBubbleRadius&&j<Y.minBubbleRadius&&(j=Y.minBubbleRadius),Y.maxBubbleRadius&&j>Y.maxBubbleRadius&&(j=Y.maxBubbleRadius)}d.config.chart.animations.enabled||(O=j);var U=y.y[T];if(O=O||0,null!==U&&void 0!==d.globals.series[f][P]||(F=!1),F){var S=this.drawPoint(y.x[T],U,O,j,f,P,a);C.add(S)}k.add(C)}}},{key:"drawPoint",value:function(s,a,h,d,g,f,y){var w=this.w,k=g,C=new To(this.ctx),T=new si(this.ctx),P=new Vn(this.ctx),F=new gn(this.ctx),O=new kt(this.ctx),j=F.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:k,dataPointIndex:f,finishRadius:"bubble"===w.config.chart.type||w.globals.comboCharts&&w.config.series[g]&&"bubble"===w.config.series[g].type?d:null});d=j.pSize;var Y,G=P.fillPath({seriesNumber:g,dataPointIndex:f,color:j.pointFillColor,patternUnits:"objectBoundingBox",value:w.globals.series[g][y]});if("circle"===j.shape?Y=O.drawCircle(h):"square"!==j.shape&&"rect"!==j.shape||(Y=O.drawRect(0,0,j.width-j.pointStrokeWidth/2,j.height-j.pointStrokeWidth/2,j.pRadius)),w.config.series[k].data[f]&&w.config.series[k].data[f].fillColor&&(G=w.config.series[k].data[f].fillColor),Y.attr({x:s-j.width/2-j.pointStrokeWidth/2,y:a-j.height/2-j.pointStrokeWidth/2,cx:s,cy:a,fill:G,"fill-opacity":j.pointFillOpacity,stroke:j.pointStrokeColor,r:d,"stroke-width":j.pointStrokeWidth,"stroke-dasharray":j.pointStrokeDashArray,"stroke-opacity":j.pointStrokeOpacity}),w.config.chart.dropShadow.enabled&&T.dropShadow(Y,w.config.chart.dropShadow,g),!this.initialAnim||w.globals.dataChanged||w.globals.resized?w.globals.animationEnded=!0:C.animateMarker(Y,0,"circle"===j.shape?d:{width:j.width,height:j.height},w.config.chart.animations.speed,w.globals.easing,function(){window.setTimeout(function(){C.animationCompleted(Y)},100)}),w.globals.dataChanged&&"circle"===j.shape)if(this.dynamicAnim){var N,E,H,W,K=w.config.chart.animations.dynamicAnimation.speed;null!=(W=w.globals.previousPaths[g]&&w.globals.previousPaths[g][y])&&(N=W.x,E=W.y,H=void 0!==W.r?W.r:d);for(var tt=0;tt<w.globals.collapsedSeries.length;tt++)w.globals.collapsedSeries[tt].index===g&&(K=1,d=0);0===s&&0===a&&(d=0),C.animateCircle(Y,{cx:N,cy:E,r:H},{cx:s,cy:a,r:d},K,w.globals.easing)}else Y.attr({r:d});return Y.attr({rel:f,j:f,index:g,"default-marker-size":d}),T.setSelectionFilter(Y,g,f),F.addEvents(Y),Y.node.classList.add("apexcharts-marker"),Y}},{key:"centerTextInBubble",value:function(s){return{y:s+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),R}(),ut=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"dataLabelsCorrection",value:function(s,a,h,d,g,f,y){var w=this.w,k=!1,C=new kt(this.ctx).getTextRects(h,y),T=C.width,P=C.height;if(a<0&&(a=0),a>w.globals.gridHeight+P&&(a=w.globals.gridHeight+P/2),void 0===w.globals.dataLabelsRects[d]&&(w.globals.dataLabelsRects[d]=[]),w.globals.dataLabelsRects[d].push({x:s,y:a,width:T,height:P}),void 0!==w.globals.dataLabelsRects[d][w.globals.dataLabelsRects[d].length-2]){var j=w.globals.dataLabelsRects[d][void 0!==w.globals.lastDrawnDataLabelsIndexes[d]?w.globals.lastDrawnDataLabelsIndexes[d][w.globals.lastDrawnDataLabelsIndexes[d].length-1]:0];(s>j.x+j.width||a>j.y+j.height||a+P<j.y||s+T<j.x)&&(k=!0)}return(0===g||f)&&(k=!0),{x:s,y:a,textRects:C,drawnextLabel:k}}},{key:"drawDataLabel",value:function(s){var a=this,h=s.type,d=s.pos,g=s.i,f=s.j,y=s.isRangeStart,w=s.strokeWidth,k=void 0===w?2:w,C=this.w,T=new kt(this.ctx),P=C.config.dataLabels,F=0,O=0,j=f,Y=null;if(-1!==C.globals.collapsedSeriesIndices.indexOf(g)||!P.enabled||!Array.isArray(d.x))return Y;Y=T.group({class:"apexcharts-data-labels"});for(var G=0;G<d.x.length;G++)if(F=d.x[G]+P.offsetX,O=d.y[G]+P.offsetY+k,!isNaN(F)){1===f&&0===G&&(j=0),1===f&&1===G&&(j=1);var U=C.globals.series[g][j];"rangeArea"===h&&(U=y?C.globals.seriesRangeStart[g][j]:C.globals.seriesRangeEnd[g][j]);var S="",N=function(E){return C.config.dataLabels.formatter(E,{ctx:a.ctx,seriesIndex:g,dataPointIndex:j,w:C})};"bubble"===C.config.chart.type?(S=N(U=C.globals.seriesZ[g][j]),O=d.y[G],O=new bs(this.ctx).centerTextInBubble(O,g,j).y):void 0!==U&&(S=N(U)),this.plotDataLabelsText({x:F,y:O,text:S,i:g,j,parent:Y,offsetCorrection:!0,dataLabelsConfig:C.config.dataLabels})}return Y}},{key:"plotDataLabelsText",value:function(s){var a=this.w,h=new kt(this.ctx),d=s.x,g=s.y,f=s.i,y=s.j,w=s.text,k=s.textAnchor,C=s.fontSize,T=s.parent,P=s.dataLabelsConfig,F=s.color,O=s.alwaysDrawDataLabel,j=s.offsetCorrection;if(!(Array.isArray(a.config.dataLabels.enabledOnSeries)&&a.config.dataLabels.enabledOnSeries.indexOf(f)<0)){var Y={x:d,y:g,drawnextLabel:!0,textRects:null};j&&(Y=this.dataLabelsCorrection(d,g,w,f,y,O,parseInt(P.style.fontSize,10))),a.globals.zoomed||(d=Y.x,g=Y.y),Y.textRects&&(d<-20-Y.textRects.width||d>a.globals.gridWidth+Y.textRects.width+30)&&(w="");var G=a.globals.dataLabels.style.colors[f];(("bar"===a.config.chart.type||"rangeBar"===a.config.chart.type)&&a.config.plotOptions.bar.distributed||a.config.dataLabels.distributed)&&(G=a.globals.dataLabels.style.colors[y]),"function"==typeof G&&(G=G({series:a.globals.series,seriesIndex:f,dataPointIndex:y,w:a})),F&&(G=F);var U=P.offsetX,S=P.offsetY;if("bar"!==a.config.chart.type&&"rangeBar"!==a.config.chart.type||(U=0,S=0),Y.drawnextLabel){var N=h.drawText({width:100,height:parseInt(P.style.fontSize,10),x:d+U,y:g+S,foreColor:G,textAnchor:k||P.textAnchor,text:w,fontSize:C||P.style.fontSize,fontFamily:P.style.fontFamily,fontWeight:P.style.fontWeight||"normal"});if(N.attr({class:"apexcharts-datalabel",cx:d,cy:g}),P.dropShadow.enabled){var E=P.dropShadow;new si(this.ctx).dropShadow(N,E)}T.add(N),void 0===a.globals.lastDrawnDataLabelsIndexes[f]&&(a.globals.lastDrawnDataLabelsIndexes[f]=[]),a.globals.lastDrawnDataLabelsIndexes[f].push(y)}}}},{key:"addBackgroundToDataLabel",value:function(s,a){var h=this.w,d=h.config.dataLabels.background,g=d.padding,f=d.padding/2,y=a.width,w=a.height,k=new kt(this.ctx).drawRect(a.x-g,a.y-f/2,y+2*g,w+f,d.borderRadius,"transparent"===h.config.chart.background?"#fff":h.config.chart.background,d.opacity,d.borderWidth,d.borderColor);return d.dropShadow.enabled&&new si(this.ctx).dropShadow(k,d.dropShadow),k}},{key:"dataLabelsBackground",value:function(){var s=this.w;if("bubble"!==s.config.chart.type)for(var a=s.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),h=0;h<a.length;h++){var d=a[h],g=d.getBBox(),f=null;if(g.width&&g.height&&(f=this.addBackgroundToDataLabel(d,g)),f){d.parentNode.insertBefore(f.node,d);var y=d.getAttribute("fill");!s.config.chart.animations.enabled||s.globals.resized||s.globals.dataChanged?f.attr({fill:y}):f.animate().attr({fill:y}),d.setAttribute("fill",s.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var s=this.w,a=s.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),h=s.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),d=0;d<a.length;d++)h&&h.insertBefore(a[d],h.nextSibling)}}]),R}(),Ti=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.legendInactiveClass="legend-mouseover-inactive"}return Yt(R,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(s){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(ht.escapeString(s),"']"))}},{key:"isSeriesHidden",value:function(s){var a=this.getSeriesByName(s),h=parseInt(a.getAttribute("data:realIndex"),10);return{isHidden:a.classList.contains("apexcharts-series-collapsed"),realIndex:h}}},{key:"addCollapsedClassToSeries",value:function(s,a){var h=this.w;function d(g){for(var f=0;f<g.length;f++)g[f].index===a&&s.node.classList.add("apexcharts-series-collapsed")}d(h.globals.collapsedSeries),d(h.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(s){var a=this.isSeriesHidden(s);return this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,a.isHidden),a.isHidden}},{key:"showSeries",value:function(s){var a=this.isSeriesHidden(s);a.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!0)}},{key:"hideSeries",value:function(s){var a=this.isSeriesHidden(s);a.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!1)}},{key:"resetSeries",value:function(){var s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this.w,g=ht.clone(d.globals.initialSeries);d.globals.previousPaths=[],h?(d.globals.collapsedSeries=[],d.globals.ancillaryCollapsedSeries=[],d.globals.collapsedSeriesIndices=[],d.globals.ancillaryCollapsedSeriesIndices=[]):g=this.emptyCollapsedSeries(g),d.config.series=g,s&&(a&&(d.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(g,d.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(s){for(var a=this.w,h=0;h<s.length;h++)a.globals.collapsedSeriesIndices.indexOf(h)>-1&&(s[h].data=[]);return s}},{key:"toggleSeriesOnHover",value:function(s,a){var h=this.w;a||(a=s.target);var d=h.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===s.type){var g=parseInt(a.getAttribute("rel"),10)-1,f=null,y=null;h.globals.axisCharts||"radialBar"===h.config.chart.type?h.globals.axisCharts?(f=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(g,"']")),y=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(g,"']"))):f=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(g+1,"']")):f=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(g+1,"'] path"));for(var w=0;w<d.length;w++)d[w].classList.add(this.legendInactiveClass);null!==f&&(h.globals.axisCharts||f.parentNode.classList.remove(this.legendInactiveClass),f.classList.remove(this.legendInactiveClass),null!==y&&y.classList.remove(this.legendInactiveClass))}else if("mouseout"===s.type)for(var k=0;k<d.length;k++)d[k].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(s,a){var h=this,d=this.w,g=d.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),f=function(w){for(var k=0;k<g.length;k++)g[k].classList[w](h.legendInactiveClass)};if("mousemove"===s.type){var y=parseInt(a.getAttribute("rel"),10)-1;f("add"),function(w){for(var k=0;k<g.length;k++){var C=parseInt(g[k].getAttribute("val"),10);C>=w.from&&C<=w.to&&g[k].classList.remove(h.legendInactiveClass)}}(d.config.plotOptions.heatmap.colorScale.ranges[y])}else"mouseout"===s.type&&f("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],h=this.w,d=0;if(h.config.series.length>1)for(var g=h.config.series.map(function(y,w){return y.data&&y.data.length>0&&-1===h.globals.collapsedSeriesIndices.indexOf(w)&&(!h.globals.comboCharts||0===a.length||a.length&&a.indexOf(h.config.series[w].type)>-1)?w:-1}),f="asc"===s?0:g.length-1;"asc"===s?f<g.length:f>=0;"asc"===s?f++:f--)if(-1!==g[f]){d=g[f];break}return d}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(s,a){return"bar"===s.type||"column"===s.type?a:-1}).filter(function(s){return-1!==s}):this.w.config.series.map(function(s,a){return a})}},{key:"getPreviousPaths",value:function(){var s=this.w;function a(f,y,w){for(var k=f[y].childNodes,C={type:w,paths:[],realIndex:f[y].getAttribute("data:realIndex")},T=0;T<k.length;T++)if(k[T].hasAttribute("pathTo")){var P=k[T].getAttribute("pathTo");C.paths.push({d:P})}s.globals.previousPaths.push(C)}s.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(f){for(var w=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(f,"-series .apexcharts-series")),k=0;k<w.length;k++)a(w,k,f)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var h=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s.config.chart.type," .apexcharts-series"));if(h.length>0)for(var d=function(f){for(var y=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(f,"'] rect")),w=[],k=function(T){var P=function(O){return y[T].getAttribute(O)},F={x:parseFloat(P("x")),y:parseFloat(P("y")),width:parseFloat(P("width")),height:parseFloat(P("height"))};w.push({rect:F,color:y[T].getAttribute("color")})},C=0;C<y.length;C++)k(C);s.globals.previousPaths.push(w)},g=0;g<h.length;g++)d(g);s.globals.axisCharts||(s.globals.previousPaths=s.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(s){var a=this.w,h=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s,"-series .apexcharts-series"));if(h.length>0)for(var d=0;d<h.length;d++){for(var g=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s,"-series .apexcharts-series[data\\:realIndex='").concat(d,"'] circle")),f=[],y=0;y<g.length;y++)f.push({x:g[y].getAttribute("cx"),y:g[y].getAttribute("cy"),r:g[y].getAttribute("r")});a.globals.previousPaths.push(f)}}},{key:"clearPreviousPaths",value:function(){var s=this.w;s.globals.previousPaths=[],s.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var s=this.w,a=s.config.noData,h=new kt(this.ctx),d=s.globals.svgWidth/2,g=s.globals.svgHeight/2,f="middle";if(s.globals.noData=!0,s.globals.animationEnded=!0,"left"===a.align?(d=10,f="start"):"right"===a.align&&(d=s.globals.svgWidth-10,f="end"),"top"===a.verticalAlign?g=50:"bottom"===a.verticalAlign&&(g=s.globals.svgHeight-50),d+=a.offsetX,g=g+parseInt(a.style.fontSize,10)+2+a.offsetY,void 0!==a.text&&""!==a.text){var y=h.drawText({x:d,y:g,text:a.text,textAnchor:f,fontSize:a.style.fontSize,fontFamily:a.style.fontFamily,foreColor:a.style.color,opacity:1,class:"apexcharts-text-nodata"});s.globals.dom.Paper.add(y)}}},{key:"setNullSeriesToZeroValues",value:function(s){for(var a=this.w,h=0;h<s.length;h++)if(0===s[h].length)for(var d=0;d<s[a.globals.maxValsInArrayIndex].length;d++)s[h].push(0);return s}},{key:"hasAllSeriesEqualX",value:function(){for(var s=!0,a=this.w,h=this.filteredSeriesX(),d=0;d<h.length-1;d++)if(h[d][0]!==h[d+1][0]){s=!1;break}return a.globals.allSeriesHasEqualX=s,s}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(a){return a.length>0?a:[]})}}]),R}(),Dt=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new it(this.ctx)}return Yt(R,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var s=this.w.config.series.slice(),a=new Ti(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),void 0!==s[this.activeSeriesIndex].data&&s[this.activeSeriesIndex].data.length>0&&null!==s[this.activeSeriesIndex].data[0]&&void 0!==s[this.activeSeriesIndex].data[0].x&&null!==s[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var s=this.w.config.series.slice(),a=new Ti(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),void 0!==s[this.activeSeriesIndex].data&&s[this.activeSeriesIndex].data.length>0&&null!=s[this.activeSeriesIndex].data[0]&&s[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(s,a){for(var h=this.w.config,d=this.w.globals,g="boxPlot"===h.chart.type||"boxPlot"===h.series[a].type,f=0;f<s[a].data.length;f++)if(void 0!==s[a].data[f][1]&&(Array.isArray(s[a].data[f][1])&&4===s[a].data[f][1].length&&!g?this.twoDSeries.push(ht.parseNumber(s[a].data[f][1][3])):this.twoDSeries.push(ht.parseNumber(s[a].data[f].length>=5?s[a].data[f][4]:s[a].data[f][1])),d.dataFormatXNumeric=!0),"datetime"===h.xaxis.type){var y=new Date(s[a].data[f][0]);y=new Date(y).getTime(),this.twoDSeriesX.push(y)}else this.twoDSeriesX.push(s[a].data[f][0]);for(var w=0;w<s[a].data.length;w++)void 0!==s[a].data[w][2]&&(this.threeDSeries.push(s[a].data[w][2]),d.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(s,a){var h=this.w.config,d=this.w.globals,g=new ai(this.ctx),f=a;d.collapsedSeriesIndices.indexOf(a)>-1&&(f=this.activeSeriesIndex);for(var y=0;y<s[a].data.length;y++)void 0!==s[a].data[y].y&&(Array.isArray(s[a].data[y].y)?this.twoDSeries.push(ht.parseNumber(s[a].data[y].y[s[a].data[y].y.length-1])):this.twoDSeries.push(ht.parseNumber(s[a].data[y].y))),void 0!==s[a].data[y].goals&&Array.isArray(s[a].data[y].goals)?(void 0===this.seriesGoals[a]&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(s[a].data[y].goals)):(void 0===this.seriesGoals[a]&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(null));for(var w=0;w<s[f].data.length;w++){var k="string"==typeof s[f].data[w].x,C=Array.isArray(s[f].data[w].x),T=!C&&!!g.isValidDate(s[f].data[w].x);k||T?k||h.xaxis.convertedCatToNumeric?"datetime"!==h.xaxis.type||d.isBarHorizontal&&d.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(s[f].data[w].x),isNaN(s[f].data[w].x)||"category"===this.w.config.xaxis.type||"string"==typeof s[f].data[w].x||(d.isXNumeric=!0)):this.twoDSeriesX.push(g.parseDate(s[f].data[w].x)):"datetime"===h.xaxis.type?this.twoDSeriesX.push(g.parseDate(s[f].data[w].x.toString())):(d.dataFormatXNumeric=!0,d.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(s[f].data[w].x))):C?(this.fallbackToCategory=!0,this.twoDSeriesX.push(s[f].data[w].x)):(d.isXNumeric=!0,d.dataFormatXNumeric=!0,this.twoDSeriesX.push(s[f].data[w].x))}if(s[a].data[0]&&void 0!==s[a].data[0].z){for(var F=0;F<s[a].data.length;F++)this.threeDSeries.push(s[a].data[F].z);d.isDataXYZ=!0}}},{key:"handleRangeData",value:function(s,a){var h=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleRangeDataFormat("array",s,a):this.isFormatXY()&&(d=this.handleRangeDataFormat("xy",s,a)),h.seriesRangeStart.push(void 0===d.start?[]:d.start),h.seriesRangeEnd.push(void 0===d.end?[]:d.end),h.seriesRange.push(d.rangeUniques),h.seriesRange.forEach(function(g,f){g&&g.forEach(function(y,w){y.y.forEach(function(k,C){for(var T=0;T<y.y.length;T++)C!==T&&k.y1<=y.y[T].y2&&y.y[T].y1<=k.y2&&(y.overlaps.indexOf(k.rangeName)<0&&y.overlaps.push(k.rangeName),y.overlaps.indexOf(y.y[T].rangeName)<0&&y.overlaps.push(y.y[T].rangeName))})})}),d}},{key:"handleCandleStickBoxData",value:function(s,a){var h=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleCandleStickBoxDataFormat("array",s,a):this.isFormatXY()&&(d=this.handleCandleStickBoxDataFormat("xy",s,a)),h.seriesCandleO[a]=d.o,h.seriesCandleH[a]=d.h,h.seriesCandleM[a]=d.m,h.seriesCandleL[a]=d.l,h.seriesCandleC[a]=d.c,d}},{key:"handleRangeDataFormat",value:function(s,a,h){var d=[],g=[],f=a[h].data.filter(function(C,T,P){return T===P.findIndex(function(F){return F.x===C.x})}).map(function(C,T){return{x:C.x,overlaps:[],y:[]}});if("array"===s)for(var y=0;y<a[h].data.length;y++)Array.isArray(a[h].data[y])?(d.push(a[h].data[y][1][0]),g.push(a[h].data[y][1][1])):(d.push(a[h].data[y]),g.push(a[h].data[y]));else if("xy"===s)for(var w=function(C){var T=Array.isArray(a[h].data[C].y),P=ht.randomId(),F=a[h].data[C].x,O={y1:T?a[h].data[C].y[0]:a[h].data[C].y,y2:T?a[h].data[C].y[1]:a[h].data[C].y,rangeName:P};a[h].data[C].rangeName=P;var j=f.findIndex(function(Y){return Y.x===F});f[j].y.push(O),d.push(O.y1),g.push(O.y2)},k=0;k<a[h].data.length;k++)w(k);return{start:d,end:g,rangeUniques:f}}},{key:"handleCandleStickBoxDataFormat",value:function(s,a,h){var d=this.w,g="boxPlot"===d.config.chart.type||"boxPlot"===d.config.series[h].type,f=[],y=[],w=[],k=[],C=[];if("array"===s)if(g&&6===a[h].data[0].length||!g&&5===a[h].data[0].length)for(var T=0;T<a[h].data.length;T++)f.push(a[h].data[T][1]),y.push(a[h].data[T][2]),g?(w.push(a[h].data[T][3]),k.push(a[h].data[T][4]),C.push(a[h].data[T][5])):(k.push(a[h].data[T][3]),C.push(a[h].data[T][4]));else for(var P=0;P<a[h].data.length;P++)Array.isArray(a[h].data[P][1])&&(f.push(a[h].data[P][1][0]),y.push(a[h].data[P][1][1]),g?(w.push(a[h].data[P][1][2]),k.push(a[h].data[P][1][3]),C.push(a[h].data[P][1][4])):(k.push(a[h].data[P][1][2]),C.push(a[h].data[P][1][3])));else if("xy"===s)for(var F=0;F<a[h].data.length;F++)Array.isArray(a[h].data[F].y)&&(f.push(a[h].data[F].y[0]),y.push(a[h].data[F].y[1]),g?(w.push(a[h].data[F].y[2]),k.push(a[h].data[F].y[3]),C.push(a[h].data[F].y[4])):(k.push(a[h].data[F].y[2]),C.push(a[h].data[F].y[3])));return{o:f,h:y,m:w,l:k,c:C}}},{key:"parseDataAxisCharts",value:function(s){var a,h=this,g=this.w.config,f=this.w.globals,y=new ai(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),w=g.labels.length>0?g.labels.slice():g.xaxis.categories.slice();if(f.isRangeBar="rangeBar"===g.chart.type&&f.isBarHorizontal,f.hasXaxisGroups="category"===g.xaxis.type&&g.xaxis.group.groups.length>0,f.hasXaxisGroups&&(f.groups=g.xaxis.group.groups),f.hasSeriesGroups=null===(a=s[0])||void 0===a?void 0:a.group,f.hasSeriesGroups){var k=[],C=Ji(new Set(s.map(function(O){return O.group})));s.forEach(function(O,j){var Y=C.indexOf(O.group);k[Y]||(k[Y]=[]),k[Y].push(O.name)}),f.seriesGroups=k}for(var T=function(){for(var O=0;O<w.length;O++)if("string"==typeof w[O]){if(!y.isValidDate(w[O]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");h.twoDSeriesX.push(y.parseDate(w[O]))}else h.twoDSeriesX.push(w[O])},P=0;P<s.length;P++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===s[P].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==g.chart.type&&"rangeArea"!==g.chart.type&&"rangeBar"!==s[P].type&&"rangeArea"!==s[P].type||(f.isRangeData=!0,"rangeBar"!==g.chart.type&&"rangeArea"!==g.chart.type||this.handleRangeData(s,P)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(s,P):this.isFormatXY()&&this.handleFormatXY(s,P),"candlestick"!==g.chart.type&&"candlestick"!==s[P].type&&"boxPlot"!==g.chart.type&&"boxPlot"!==s[P].type||this.handleCandleStickBoxData(s,P),f.series.push(this.twoDSeries),f.labels.push(this.twoDSeriesX),f.seriesX.push(this.twoDSeriesX),f.seriesGoals=this.seriesGoals,P!==this.activeSeriesIndex||this.fallbackToCategory||(f.isXNumeric=!0);else{"datetime"===g.xaxis.type?(f.isXNumeric=!0,T(),f.seriesX.push(this.twoDSeriesX)):"numeric"===g.xaxis.type&&(f.isXNumeric=!0,w.length>0&&(this.twoDSeriesX=w,f.seriesX.push(this.twoDSeriesX))),f.labels.push(this.twoDSeriesX);var F=s[P].data.map(function(O){return ht.parseNumber(O)});f.series.push(F)}f.seriesZ.push(this.threeDSeries),f.seriesNames.push(void 0!==s[P].name?s[P].name:"series-"+parseInt(P+1,10)),f.seriesColors.push(void 0!==s[P].color?s[P].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(s){var a=this.w.globals,h=this.w.config;a.series=s.slice(),a.seriesNames=h.labels.slice();for(var d=0;d<a.series.length;d++)void 0===a.seriesNames[d]&&a.seriesNames.push("series-"+(d+1));return this.w}},{key:"handleExternalLabelsData",value:function(s){var a=this.w.config,h=this.w.globals;a.xaxis.categories.length>0?h.labels=a.xaxis.categories:a.labels.length>0?h.labels=a.labels.slice():this.fallbackToCategory?(h.labels=h.labels[0],h.seriesRange.length&&(h.seriesRange.map(function(d){d.forEach(function(g){h.labels.indexOf(g.x)<0&&g.x&&h.labels.push(g.x)})}),h.labels=Array.from(new Set(h.labels.map(JSON.stringify)),JSON.parse)),a.xaxis.convertedCatToNumeric&&(new bi(a).convertCatToNumericXaxis(a,this.ctx,h.seriesX[0]),this._generateExternalLabels(s))):this._generateExternalLabels(s)}},{key:"_generateExternalLabels",value:function(s){var a=this.w.globals,h=this.w.config,d=[];if(a.axisCharts){if(a.series.length>0)if(this.isFormatXY())for(var g=h.series.map(function(T,P){return T.data.filter(function(F,O,j){return j.findIndex(function(Y){return Y.x===F.x})===O})}),f=g.reduce(function(T,P,F,O){return O[T].length>P.length?T:F},0),y=0;y<g[f].length;y++)d.push(y+1);else for(var w=0;w<a.series[a.maxValsInArrayIndex].length;w++)d.push(w+1);a.seriesX=[];for(var k=0;k<s.length;k++)a.seriesX.push(d);this.w.globals.isBarHorizontal||(a.isXNumeric=!0)}if(0===d.length){d=a.axisCharts?[]:a.series.map(function(T,P){return P+1});for(var C=0;C<s.length;C++)a.seriesX.push(d)}a.labels=d,h.xaxis.convertedCatToNumeric&&(a.categoryLabels=d.map(function(T){return h.xaxis.labels.formatter(T)})),a.noLabelsProvided=!0}},{key:"parseData",value:function(s){var a=this.w,h=a.config,d=a.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),d.axisCharts?(this.parseDataAxisCharts(s),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(s),h.chart.stacked){var g=new Ti(this.ctx);d.series=g.setNullSeriesToZeroValues(d.series)}this.coreUtils.getSeriesTotals(),d.axisCharts&&(d.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),d.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),d.dataFormatXNumeric||d.isXNumeric&&("numeric"!==h.xaxis.type||0!==h.labels.length||0!==h.xaxis.categories.length)||this.handleExternalLabelsData(s);for(var f=this.coreUtils.getCategoryLabels(d.labels),y=0;y<f.length;y++)if(Array.isArray(f[y])){d.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var s=this.w,a=[];s.globals.seriesYAxisMap.forEach(function(h,d){var g=0;h.forEach(function(f){-1!==s.globals.collapsedSeriesIndices.indexOf(f)&&g++}),g>0&&g==h.length&&a.push(d)}),s.globals.ignoreYAxisIndexes=a.map(function(h){return h})}}]),R}(),Ht=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"getLabel",value:function(s,a,h,d){var Y,G,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",y=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],w=this.w,k=void 0===s[d]?"":s[d],C=k,T=w.globals.xLabelFormatter,P=w.config.xaxis.labels.formatter,F=!1,O=new te(this.ctx);y&&(C=O.xLabelFormat(T,k,k,{i:d,dateFormatter:new ai(this.ctx).formatDate,w}),void 0!==P&&(C=P(k,s[d],{i:d,dateFormatter:new ai(this.ctx).formatDate,w}))),a.length>0?(Y=a[d].unit,G=null,a.forEach(function(E){"month"===E.unit?G="year":"day"===E.unit?G="month":"hour"===E.unit?G="day":"minute"===E.unit&&(G="hour")}),F=G===Y,h=a[d].position,C=a[d].value):"datetime"===w.config.xaxis.type&&void 0===P&&(C=""),void 0===C&&(C=""),C=Array.isArray(C)?C:C.toString();var S,U=new kt(this.ctx);S=w.globals.rotateXLabels&&y?U.getTextRects(C,parseInt(f,10),null,"rotate(".concat(w.config.xaxis.labels.rotate," 0 0)"),!1):U.getTextRects(C,parseInt(f,10));var N=!w.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(C)&&("NaN"===String(C)||g.indexOf(C)>=0&&N)&&(C=""),{x:h,text:C,textRect:S,isBold:F}}},{key:"checkLabelBasedOnTickamount",value:function(s,a,h){var d=this.w,g=d.config.xaxis.tickAmount;return"dataPoints"===g&&(g=Math.round(d.globals.gridWidth/120)),g>h||s%Math.round(h/(g+1))==0||(a.text=""),a}},{key:"checkForOverflowingLabels",value:function(s,a,h,d,g){var f=this.w;if(0===s&&f.globals.skipFirstTimelinelabel&&(a.text=""),s===h-1&&f.globals.skipLastTimelinelabel&&(a.text=""),f.config.xaxis.labels.hideOverlappingLabels&&d.length>0){var y=g[g.length-1];a.x<y.textRect.width/(f.globals.rotateXLabels?Math.abs(f.config.xaxis.labels.rotate)/12:1.01)+y.x&&(a.text="")}return a}},{key:"checkForReversedLabels",value:function(s,a){var h=this.w;return h.config.yaxis[s]&&h.config.yaxis[s].reversed&&a.reverse(),a}},{key:"isYAxisHidden",value:function(s){var a=this.w,h=new it(this.ctx),d=!a.globals.seriesYAxisMap[s].some(function(g){return-1===a.globals.collapsedSeriesIndices.indexOf(g)});return!a.config.yaxis[s].show||!a.config.yaxis[s].showForNullSeries&&h.isSeriesNull(s)&&d}},{key:"getYAxisForeColor",value:function(s,a){var h=this.w;return Array.isArray(s)&&h.globals.yAxisScale[a]&&this.ctx.theme.pushExtraColors(s,h.globals.yAxisScale[a].result.length,!1),s}},{key:"drawYAxisTicks",value:function(s,a,h,d,g,f,y){var w=this.w,k=new kt(this.ctx),C=w.globals.translateY;if(d.show&&a>0){!0===w.config.yaxis[g].opposite&&(s+=d.width);for(var T=a;T>=0;T--){var P=C+a/10+w.config.yaxis[g].labels.offsetY-1;w.globals.isBarHorizontal&&(P=f*T),"heatmap"===w.config.chart.type&&(P+=f/2);var F=k.drawLine(s+h.offsetX-d.width+d.offsetX,P+d.offsetY,s+h.offsetX+d.offsetX,P+d.offsetY,d.color);y.add(F),C+=f}}}}]),R}(),pt=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"scaleSvgNode",value:function(s,a){var h=parseFloat(s.getAttributeNS(null,"width")),d=parseFloat(s.getAttributeNS(null,"height"));s.setAttributeNS(null,"width",h*a),s.setAttributeNS(null,"height",d*a),s.setAttributeNS(null,"viewBox","0 0 "+h+" "+d)}},{key:"fixSvgStringForIe11",value:function(s){if(!ht.isIE11())return s.replace(/&nbsp;/g,"&#160;");var a=0,h=s.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(d){return 2==++a?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':d});return(h=h.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(s){null==s&&(s=1);var a=this.w.globals.dom.Paper.svg();if(1!==s){var h=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(h,s),a=(new XMLSerializer).serializeToString(h)}return this.fixSvgStringForIe11(a)}},{key:"cleanup",value:function(){var s=this.w,a=s.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),h=s.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),d=s.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(d,function(g){g.setAttribute("width",0)}),a&&a[0]&&(a[0].setAttribute("x",-500),a[0].setAttribute("x1",-500),a[0].setAttribute("x2",-500)),h&&h[0]&&(h[0].setAttribute("y",-100),h[0].setAttribute("y1",-100),h[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var s=this.getSvgString(),a=new Blob([s],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(a)}},{key:"dataURI",value:function(s){var a=this;return new Promise(function(h){var d=a.w,g=s?s.scale||s.width/d.globals.svgWidth:1;a.cleanup();var f=document.createElement("canvas");f.width=d.globals.svgWidth*g,f.height=parseInt(d.globals.dom.elWrap.style.height,10)*g;var y="transparent"===d.config.chart.background?"#fff":d.config.chart.background,w=f.getContext("2d");w.fillStyle=y,w.fillRect(0,0,f.width*g,f.height*g);var k=a.getSvgString(g);if(window.canvg&&ht.isIE11()){var C=window.canvg.Canvg.fromString(w,k,{ignoreClear:!0,ignoreDimensions:!0});C.start();var T=f.msToBlob();C.stop(),h({blob:T})}else{var P="data:image/svg+xml,"+encodeURIComponent(k),F=new Image;F.crossOrigin="anonymous",F.onload=function(){if(w.drawImage(F,0,0),f.msToBlob){var O=f.msToBlob();h({blob:O})}else{var j=f.toDataURL("image/png");h({imgURI:j})}},F.src=P}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var s=this;this.dataURI().then(function(a){var h=a.imgURI,d=a.blob;d?navigator.msSaveOrOpenBlob(d,s.w.globals.chartID+".png"):s.triggerDownload(h,s.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(s){var a=this,h=s.series,d=s.fileName,g=s.columnDelimiter,f=void 0===g?",":g,y=s.lineDelimiter,w=void 0===y?"\n":y,k=this.w;h||(h=k.config.series);var C,T,P=[],F=[],O="",j=k.globals.series.map(function(H,W){return-1===k.globals.collapsedSeriesIndices.indexOf(W)?H:[]}),Y=function(H){return"datetime"===k.config.xaxis.type&&String(H).length>=10},G=Math.max.apply(Math,Ji(h.map(function(H){return H.data?H.data.length:0}))),U=new Dt(this.ctx),S=new Ht(this.ctx),N=function(H){var W="";if(k.globals.axisCharts){if("category"===k.config.xaxis.type||k.config.xaxis.convertedCatToNumeric)if(k.globals.isBarHorizontal){var K=k.globals.yLabelFormatters[0],tt=new Ti(a.ctx).getActiveConfigSeriesIndex();W=K(k.globals.labels[H],{seriesIndex:tt,dataPointIndex:H,w:k})}else W=S.getLabel(k.globals.labels,k.globals.timescaleLabels,0,H).text;"datetime"===k.config.xaxis.type&&(k.config.xaxis.categories.length?W=k.config.xaxis.categories[H]:k.config.labels.length&&(W=k.config.labels[H]))}else W=k.config.labels[H];return Array.isArray(W)&&(W=W.join(" ")),ht.isNumber(W)?W:W.split(f).join("")};P.push(k.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===k.config.chart.type?(P.push("minimum"),P.push("q1"),P.push("median"),P.push("q3"),P.push("maximum")):"candlestick"===k.config.chart.type?(P.push("open"),P.push("high"),P.push("low"),P.push("close")):"rangeBar"===k.config.chart.type?(P.push("minimum"),P.push("maximum")):h.map(function(H,W){var K=(H.name?H.name:"series-".concat(W))+"";k.globals.axisCharts&&P.push(K.split(f).join("")?K.split(f).join(""):"series-".concat(W))}),k.globals.axisCharts||(P.push(k.config.chart.toolbar.export.csv.headerValue),F.push(P.join(f))),k.globals.allSeriesHasEqualX||!k.globals.axisCharts||k.config.xaxis.categories.length||k.config.labels.length?h.map(function(H,W){k.globals.axisCharts?function(H,W){if(P.length&&0===W&&F.push(P.join(f)),H.data){H.data=H.data.length&&H.data||Ji(Array(G)).map(function(){return""});for(var K=0;K<H.data.length;K++){P=[];var tt=N(K);if(tt||(U.isFormatXY()?tt=h[W].data[K].x:U.isFormat2DArray()&&(tt=h[W].data[K]?h[W].data[K][0]:"")),0===W){P.push(Y(tt)?k.config.chart.toolbar.export.csv.dateFormatter(tt):ht.isNumber(tt)?tt:tt.split(f).join(""));for(var et=0;et<k.globals.series.length;et++){var gt;U.isFormatXY()?P.push(null===(gt=h[et].data[K])||void 0===gt?void 0:gt.y):P.push(j[et][K])}}("candlestick"===k.config.chart.type||H.type&&"candlestick"===H.type)&&(P.pop(),P.push(k.globals.seriesCandleO[W][K]),P.push(k.globals.seriesCandleH[W][K]),P.push(k.globals.seriesCandleL[W][K]),P.push(k.globals.seriesCandleC[W][K])),("boxPlot"===k.config.chart.type||H.type&&"boxPlot"===H.type)&&(P.pop(),P.push(k.globals.seriesCandleO[W][K]),P.push(k.globals.seriesCandleH[W][K]),P.push(k.globals.seriesCandleM[W][K]),P.push(k.globals.seriesCandleL[W][K]),P.push(k.globals.seriesCandleC[W][K])),"rangeBar"===k.config.chart.type&&(P.pop(),P.push(k.globals.seriesRangeStart[W][K]),P.push(k.globals.seriesRangeEnd[W][K])),P.length&&F.push(P.join(f))}}}(H,W):((P=[]).push(k.globals.labels[W].split(f).join("")),P.push(j[W]),F.push(P.join(f)))}):(C=new Set,T={},h.forEach(function(H,W){H?.data.forEach(function(K){var tt,et;if(U.isFormatXY())tt=K.x,et=K.y;else{if(!U.isFormat2DArray())return;tt=K[0],et=K[1]}T[tt]||(T[tt]=Array(h.length).fill("")),T[tt][W]=et,C.add(tt)})}),P.length&&F.push(P.join(f)),Array.from(C).sort().forEach(function(H){F.push([Y(H)&&"datetime"===k.config.xaxis.type?k.config.chart.toolbar.export.csv.dateFormatter(H):ht.isNumber(H)?H:H.split(f).join(""),T[H].join(f)])})),O+=F.join(w),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+O),d||k.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(s,a,h){var d=document.createElement("a");d.href=s,d.download=(a||this.w.globals.chartID)+h,document.body.appendChild(d),d.click(),document.body.removeChild(d)}}]),R}(),Mt=function(){function R(s,a){xt(this,R),this.ctx=s,this.elgrid=a,this.w=s.w;var h=this.w;this.axesUtils=new Ht(s),this.xaxisLabels=h.globals.labels.slice(),h.globals.timescaleLabels.length>0&&!h.globals.isBarHorizontal&&(this.xaxisLabels=h.globals.timescaleLabels.slice()),h.config.xaxis.overwriteCategories&&(this.xaxisLabels=h.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===h.config.xaxis.position?0:h.globals.gridHeight+1,this.offY=this.offY+h.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.xaxisBorderWidth=h.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=h.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?h.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=h.config.xaxis.axisBorder.height,this.yaxis=h.config.yaxis[0]}return Yt(R,[{key:"drawXaxis",value:function(){var s=this.w,a=new kt(this.ctx),h=a.group({class:"apexcharts-xaxis",transform:"translate(".concat(s.config.xaxis.offsetX,", ").concat(s.config.xaxis.offsetY,")")}),d=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(s.globals.translateXAxisX,", ").concat(s.globals.translateXAxisY,")")});h.add(d);for(var g=[],f=0;f<this.xaxisLabels.length;f++)g.push(this.xaxisLabels[f]);if(this.drawXAxisLabelAndGroup(!0,a,d,g,s.globals.isXNumeric,function(O,j){return j}),s.globals.hasXaxisGroups){var y=s.globals.groups;g=[];for(var w=0;w<y.length;w++)g.push(y[w].title);var k={};s.config.xaxis.group.style&&(k.xaxisFontSize=s.config.xaxis.group.style.fontSize,k.xaxisFontFamily=s.config.xaxis.group.style.fontFamily,k.xaxisForeColors=s.config.xaxis.group.style.colors,k.fontWeight=s.config.xaxis.group.style.fontWeight,k.cssClass=s.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,a,d,g,!1,function(O,j){return y[O].cols*j},k)}if(void 0!==s.config.xaxis.title.text){var C=a.group({class:"apexcharts-xaxis-title"}),T=a.drawText({x:s.globals.gridWidth/2+s.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===s.config.xaxis.position?s.globals.xAxisLabelsHeight:-s.globals.xAxisLabelsHeight-10)+s.config.xaxis.title.offsetY,text:s.config.xaxis.title.text,textAnchor:"middle",fontSize:s.config.xaxis.title.style.fontSize,fontFamily:s.config.xaxis.title.style.fontFamily,fontWeight:s.config.xaxis.title.style.fontWeight,foreColor:s.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+s.config.xaxis.title.style.cssClass});C.add(T),h.add(C)}if(s.config.xaxis.axisBorder.show){var P=s.globals.barPadForNumericAxis,F=a.drawLine(s.globals.padHorizontal+s.config.xaxis.axisBorder.offsetX-P,this.offY,this.xaxisBorderWidth+P,this.offY,s.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&s.config.grid.show?this.elgrid.elGridBorders.add(F):h.add(F)}return h}},{key:"drawXAxisLabelAndGroup",value:function(s,a,h,d,g,f){var y,w=this,k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},C=[],T=[],P=this.w,F=k.xaxisFontSize||this.xaxisFontSize,O=k.xaxisFontFamily||this.xaxisFontFamily,j=k.xaxisForeColors||this.xaxisForeColors,Y=k.fontWeight||P.config.xaxis.labels.style.fontWeight,G=k.cssClass||P.config.xaxis.labels.style.cssClass,U=P.globals.padHorizontal,S=d.length,N="category"===P.config.xaxis.type?P.globals.dataPoints:S;0===N&&S>N&&(N=S),g?(y=P.globals.gridWidth/Math.min(N>1?N-1:N,S-1),U=U+f(0,y)/2+P.config.xaxis.labels.offsetX):U=U+f(0,y=P.globals.gridWidth/N)+P.config.xaxis.labels.offsetX;for(var H=function(K){var tt=U-f(K,y)/2+P.config.xaxis.labels.offsetX;0===K&&1===S&&y/2===U&&1===N&&(tt=P.globals.gridWidth/2);var et=w.axesUtils.getLabel(d,P.globals.timescaleLabels,tt,K,C,F,s),gt=28;if(P.globals.rotateXLabels&&s&&(gt=22),P.config.xaxis.title.text&&"top"===P.config.xaxis.position&&(gt+=parseFloat(P.config.xaxis.title.style.fontSize)+2),s||(gt=gt+parseFloat(F)+(P.globals.xAxisLabelsHeight-P.globals.xAxisGroupLabelsHeight)+(P.globals.rotateXLabels?10:0)),et=void 0!==P.config.xaxis.tickAmount&&"dataPoints"!==P.config.xaxis.tickAmount&&"datetime"!==P.config.xaxis.type?w.axesUtils.checkLabelBasedOnTickamount(K,et,S):w.axesUtils.checkForOverflowingLabels(K,et,S,C,T),P.config.xaxis.labels.show){var St=a.drawText({x:et.x,y:w.offY+P.config.xaxis.labels.offsetY+gt-("top"===P.config.xaxis.position?P.globals.xAxisHeight+P.config.xaxis.axisTicks.height-2:0),text:et.text,textAnchor:"middle",fontWeight:et.isBold?600:Y,fontSize:F,fontFamily:O,foreColor:Array.isArray(j)?s&&P.config.xaxis.convertedCatToNumeric?j[P.globals.minX+K-1]:j[K]:j,isPlainText:!1,cssClass:(s?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+G});if(h.add(St),St.on("click",function(Et){if("function"==typeof P.config.chart.events.xAxisLabelClick){var Gt=Object.assign({},P,{labelIndex:K});P.config.chart.events.xAxisLabelClick(Et,w.ctx,Gt)}}),s){var bt=document.createElementNS(P.globals.SVGNS,"title");bt.textContent=Array.isArray(et.text)?et.text.join(" "):et.text,St.node.appendChild(bt),""!==et.text&&(C.push(et.text),T.push(et))}}K<S-1&&(U+=f(K+1,y))},W=0;W<=S-1;W++)H(W)}},{key:"drawXaxisInversed",value:function(s){var a,h,d=this,g=this.w,f=new kt(this.ctx),y=g.config.yaxis[0].opposite?g.globals.translateYAxisX[s]:0,w=f.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:s}),k=f.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+y+", 0)"});w.add(k);var C=[];if(g.config.yaxis[s].show)for(var T=0;T<this.xaxisLabels.length;T++)C.push(this.xaxisLabels[T]);h=-(a=g.globals.gridHeight/C.length)/2.2;var P=g.globals.yLabelFormatters[0],F=g.config.yaxis[0].labels;if(F.show)for(var O=function(E){var H=void 0===C[E]?"":C[E];H=P(H,{seriesIndex:s,dataPointIndex:E,w:g});var W=d.axesUtils.getYAxisForeColor(F.style.colors,s),K=0;Array.isArray(H)&&(K=H.length/2*parseInt(F.style.fontSize,10));var tt=F.offsetX-15,et="end";d.yaxis.opposite&&(et="start"),"left"===g.config.yaxis[0].labels.align?(tt=F.offsetX,et="start"):"center"===g.config.yaxis[0].labels.align?(tt=F.offsetX,et="middle"):"right"===g.config.yaxis[0].labels.align&&(et="end");var gt=f.drawText({x:tt,y:h+a+F.offsetY-K,text:H,textAnchor:et,foreColor:Array.isArray(W)?W[E]:W,fontSize:F.style.fontSize,fontFamily:F.style.fontFamily,fontWeight:F.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+F.style.cssClass,maxWidth:F.maxWidth});k.add(gt),gt.on("click",function(Et){if("function"==typeof g.config.chart.events.xAxisLabelClick){var Gt=Object.assign({},g,{labelIndex:E});g.config.chart.events.xAxisLabelClick(Et,d.ctx,Gt)}});var St=document.createElementNS(g.globals.SVGNS,"title");if(St.textContent=Array.isArray(H)?H.join(" "):H,gt.node.appendChild(St),0!==g.config.yaxis[s].labels.rotate){var bt=f.rotateAroundCenter(gt.node);gt.node.setAttribute("transform","rotate(".concat(g.config.yaxis[s].labels.rotate," 0 ").concat(bt.y,")"))}h+=a},j=0;j<=C.length-1;j++)O(j);if(void 0!==g.config.yaxis[0].title.text){var Y=f.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+y+", 0)"}),G=f.drawText({x:g.config.yaxis[0].title.offsetX,y:g.globals.gridHeight/2+g.config.yaxis[0].title.offsetY,text:g.config.yaxis[0].title.text,textAnchor:"middle",foreColor:g.config.yaxis[0].title.style.color,fontSize:g.config.yaxis[0].title.style.fontSize,fontWeight:g.config.yaxis[0].title.style.fontWeight,fontFamily:g.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+g.config.yaxis[0].title.style.cssClass});Y.add(G),w.add(Y)}var U=0;this.isCategoryBarHorizontal&&g.config.yaxis[0].opposite&&(U=g.globals.gridWidth);var S=g.config.xaxis.axisBorder;if(S.show){var N=f.drawLine(g.globals.padHorizontal+S.offsetX+U,1+S.offsetY,g.globals.padHorizontal+S.offsetX+U,g.globals.gridHeight+S.offsetY,S.color,0);this.elgrid&&this.elgrid.elGridBorders&&g.config.grid.show?this.elgrid.elGridBorders.add(N):w.add(N)}return g.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(U,C.length,g.config.yaxis[0].axisBorder,g.config.yaxis[0].axisTicks,0,a,w),w}},{key:"drawXaxisTicks",value:function(s,a,h){var d=this.w,g=s;if(!(s<0||s-2>d.globals.gridWidth)){var f=this.offY+d.config.xaxis.axisTicks.offsetY;if(a=a+f+d.config.xaxis.axisTicks.height,"top"===d.config.xaxis.position&&(a=f-d.config.xaxis.axisTicks.height),d.config.xaxis.axisTicks.show){var y=new kt(this.ctx).drawLine(s+d.config.xaxis.axisTicks.offsetX,f+d.config.xaxis.offsetY,g+d.config.xaxis.axisTicks.offsetX,a+d.config.xaxis.offsetY,d.config.xaxis.axisTicks.color);h.add(y),y.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var s=this.w,a=[],h=this.xaxisLabels.length,d=s.globals.padHorizontal;if(s.globals.timescaleLabels.length>0)for(var g=0;g<h;g++)a.push(d=this.xaxisLabels[g].position);else for(var f=h,y=0;y<f;y++){var w=f;s.globals.isXNumeric&&"bar"!==s.config.chart.type&&(w-=1),a.push(d+=s.globals.gridWidth/w)}return a}},{key:"xAxisLabelCorrections",value:function(){var s=this.w,a=new kt(this.ctx),h=s.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),d=s.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),g=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),f=s.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(s.globals.rotateXLabels||s.config.xaxis.labels.rotateAlways)for(var y=0;y<d.length;y++){var w=a.rotateAroundCenter(d[y]);w.y=w.y-1,w.x=w.x+1,d[y].setAttribute("transform","rotate(".concat(s.config.xaxis.labels.rotate," ").concat(w.x," ").concat(w.y,")")),d[y].setAttribute("text-anchor","end"),h.setAttribute("transform","translate(0, ".concat(-10,")")),s.config.xaxis.labels.trim&&Array.prototype.forEach.call(d[y].childNodes,function(F){a.placeTextWithEllipsis(F,F.textContent,s.globals.xAxisLabelsHeight-("bottom"===s.config.legend.position?20:10))})}else!function(){for(var F=s.globals.gridWidth/(s.globals.labels.length+1),O=0;O<d.length;O++)s.config.xaxis.labels.trim&&"datetime"!==s.config.xaxis.type&&Array.prototype.forEach.call(d[O].childNodes,function(Y){a.placeTextWithEllipsis(Y,Y.textContent,F)})}();if(g.length>0){var C=g[g.length-1].getBBox(),T=g[0].getBBox();C.x<-20&&g[g.length-1].parentNode.removeChild(g[g.length-1]),T.x+T.width>s.globals.gridWidth&&!s.globals.isBarHorizontal&&g[0].parentNode.removeChild(g[0]);for(var P=0;P<f.length;P++)a.placeTextWithEllipsis(f[P],f[P].textContent,s.config.yaxis[0].labels.maxWidth-(s.config.yaxis[0].title.text?2*parseFloat(s.config.yaxis[0].title.style.fontSize):0)-15)}}}]),R}(),Ft=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w;var a=this.w;this.xaxisLabels=a.globals.labels.slice(),this.axesUtils=new Ht(s),this.isRangeBar=a.globals.seriesRange.length&&a.globals.isBarHorizontal,a.globals.timescaleLabels.length>0&&(this.xaxisLabels=a.globals.timescaleLabels.slice())}return Yt(R,[{key:"drawGridArea",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.w,h=new kt(this.ctx);null===s&&(s=h.group({class:"apexcharts-grid"}));var d=h.drawLine(a.globals.padHorizontal,1,a.globals.padHorizontal,a.globals.gridHeight,"transparent"),g=h.drawLine(a.globals.padHorizontal,a.globals.gridHeight,a.globals.gridWidth,a.globals.gridHeight,"transparent");return s.add(g),s.add(d),s}},{key:"drawGrid",value:function(){var s=null;return this.w.globals.axisCharts&&(s=this.renderGrid(),this.drawGridArea(s.el)),s}},{key:"createGridMask",value:function(){var s=this.w,a=s.globals,h=new kt(this.ctx),d=Array.isArray(s.config.stroke.width)?0:s.config.stroke.width;if(Array.isArray(s.config.stroke.width)){var g=0;s.config.stroke.width.forEach(function(T){g=Math.max(g,T)}),d=g}a.dom.elGridRectMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(a.cuid)),a.dom.elGridRectMarkerMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(a.cuid)),a.dom.elForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elForecastMask.setAttribute("id","forecastMask".concat(a.cuid)),a.dom.elNonForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(a.cuid));var f=s.config.chart.type,y=0,w=0;("bar"===f||"rangeBar"===f||"candlestick"===f||"boxPlot"===f||s.globals.comboBarCount>0)&&s.globals.isXNumeric&&!s.globals.isBarHorizontal&&(w=s.config.grid.padding.right,a.barPadForNumericAxis>(y=s.config.grid.padding.left)&&(y=a.barPadForNumericAxis,w=a.barPadForNumericAxis)),a.dom.elGridRect=h.drawRect(-d-y-2,2*-d-2,a.gridWidth+d+w+y+4,a.gridHeight+4*d+4,0,"#fff");var k=s.globals.markers.largestSize+1;a.dom.elGridRectMarker=h.drawRect(2*-k,2*-k,a.gridWidth+4*k,a.gridHeight+4*k,0,"#fff"),a.dom.elGridRectMask.appendChild(a.dom.elGridRect.node),a.dom.elGridRectMarkerMask.appendChild(a.dom.elGridRectMarker.node);var C=a.dom.baseEl.querySelector("defs");C.appendChild(a.dom.elGridRectMask),C.appendChild(a.dom.elForecastMask),C.appendChild(a.dom.elNonForecastMask),C.appendChild(a.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(s){var a=s.i,h=s.x1,y=s.xCount,k=this.w;if(!(0===a&&k.globals.skipFirstTimelinelabel||a===y-1&&k.globals.skipLastTimelinelabel&&!k.config.xaxis.labels.formatter||"radar"===k.config.chart.type)){k.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,x1:h,y1:s.y1,x2:s.x2,y2:s.y2,xCount:y,parent:s.parent});var C=0;if(k.globals.hasXaxisGroups&&"between"===k.config.xaxis.tickPlacement){var T=k.globals.groups;if(T){for(var P=0,F=0;P<a&&F<T.length;F++)P+=T[F].cols;P===a&&(C=.6*k.globals.xAxisLabelsHeight)}}new Mt(this.ctx).drawXaxisTicks(h,C,k.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(s){var a=s.i,h=s.x1,d=s.y1,g=s.x2,f=s.y2,y=s.xCount,w=s.parent,k=this.w,C=!1,T=w.node.classList.contains("apexcharts-gridlines-horizontal"),P=k.config.grid.strokeDashArray,F=k.globals.barPadForNumericAxis;(0===d&&0===f||0===h&&0===g)&&(C=!0),d===k.globals.gridHeight&&f===k.globals.gridHeight&&(C=!0),!k.globals.isBarHorizontal||0!==a&&a!==y-1||(C=!0);var O=new kt(this).drawLine(h-(T?F:0),d,g+(T?F:0),f,k.config.grid.borderColor,P);O.node.classList.add("apexcharts-gridline"),C&&k.config.grid.show?this.elGridBorders.add(O):w.add(O)}},{key:"_drawGridBandRect",value:function(s){var a=s.c,h=s.x1,d=s.y1,g=s.x2,f=s.y2,y=s.type,w=this.w,k=new kt(this.ctx),C=w.globals.barPadForNumericAxis;if("column"!==y||"datetime"!==w.config.xaxis.type){var P=k.drawRect(h-("row"===y?C:0),d,g+("row"===y?2*C:0),f,0,w.config.grid[y].colors[a],w.config.grid[y].opacity);this.elg.add(P),P.attr("clip-path","url(#gridRectMask".concat(w.globals.cuid,")")),P.node.classList.add("apexcharts-grid-".concat(y))}}},{key:"_drawXYLines",value:function(s){var a=this,h=s.xCount,d=s.tickAmount,g=this.w;if(g.config.grid.xaxis.lines.show||g.config.xaxis.axisTicks.show){var f,y=g.globals.padHorizontal,w=g.globals.gridHeight;g.globals.timescaleLabels.length?function(O){for(var j=O.xC,G=O.y1,S=O.y2,N=0;N<j;N++)a._drawGridLines({i:N,x1:a.xaxisLabels[N].position,y1:G,x2:a.xaxisLabels[N].position,y2:S,xCount:h,parent:a.elgridLinesV})}({xC:h,x1:y,y1:0,x2:f,y2:w}):(g.globals.isXNumeric&&(h=g.globals.xAxisScale.result.length),function(O){for(var j=O.xC,Y=O.x1,G=O.y1,U=O.x2,S=O.y2,N=0;N<j+(g.globals.isXNumeric?0:1);N++)0===N&&1===j&&1===g.globals.dataPoints&&(U=Y=g.globals.gridWidth/2),a._drawGridLines({i:N,x1:Y,y1:G,x2:U,y2:S,xCount:h,parent:a.elgridLinesV}),U=Y+=g.globals.gridWidth/(g.globals.isXNumeric?j-1:j)}({xC:h,x1:y,y1:0,x2:f,y2:w}))}if(g.config.grid.yaxis.lines.show){var k=0,C=0,T=g.globals.gridWidth,P=d+1;this.isRangeBar&&(P=g.globals.labels.length);for(var F=0;F<P+(this.isRangeBar?1:0);F++)this._drawGridLine({i:F,xCount:P+(this.isRangeBar?1:0),x1:0,y1:k,x2:T,y2:C,parent:this.elgridLinesH}),C=k+=g.globals.gridHeight/(this.isRangeBar?P:d)}}},{key:"_drawInvertedXYLines",value:function(s){var a=s.xCount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show)for(var d,g=h.globals.padHorizontal,f=h.globals.gridHeight,y=0;y<a+1;y++)h.config.grid.xaxis.lines.show&&this._drawGridLine({i:y,xCount:a+1,x1:g,y1:0,x2:d,y2:f,parent:this.elgridLinesV}),new Mt(this.ctx).drawXaxisTicks(g,0,h.globals.dom.elGraphical),d=g=g+h.globals.gridWidth/a+.3;if(h.config.grid.yaxis.lines.show)for(var w=0,k=0,C=h.globals.gridWidth,T=0;T<h.globals.dataPoints+1;T++)this._drawGridLine({i:T,xCount:h.globals.dataPoints+1,x1:0,y1:w,x2:C,y2:k,parent:this.elgridLinesH}),k=w+=h.globals.gridHeight/h.globals.dataPoints}},{key:"renderGrid",value:function(){var s=this.w,a=new kt(this.ctx);this.elg=a.group({class:"apexcharts-grid"}),this.elgridLinesH=a.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=a.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=a.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),s.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var h=0;h<s.globals.seriesYAxisMap.length&&-1!==s.globals.ignoreYAxisIndexes.indexOf(h);)h++;h===s.globals.seriesYAxisMap.length&&(h=0);var d,f,y,w,g=s.globals.yAxisScale[h].result.length-1;return!s.globals.isBarHorizontal||this.isRangeBar?(d=this.xaxisLabels.length,this.isRangeBar&&(d--,g=s.globals.labels.length,s.config.xaxis.tickAmount&&s.config.xaxis.labels.formatter&&(d=s.config.xaxis.tickAmount),(null===(f=s.globals.yAxisScale)||void 0===f||null===(y=f[h])||void 0===y||null===(w=y.result)||void 0===w?void 0:w.length)>0&&"datetime"!==s.config.xaxis.type&&(d=s.globals.yAxisScale[h].result.length-1)),this._drawXYLines({xCount:d,tickAmount:g})):this._drawInvertedXYLines({xCount:d=g,tickAmount:g=s.globals.xTickAmount}),this.drawGridBands(d,g),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:s.globals.gridWidth/d}}},{key:"drawGridBands",value:function(s,a){var h=this.w;if(void 0!==h.config.grid.row.colors&&h.config.grid.row.colors.length>0)for(var d=0,g=h.globals.gridHeight/a,f=h.globals.gridWidth,y=0,w=0;y<a;y++,w++)w>=h.config.grid.row.colors.length&&(w=0),this._drawGridBandRect({c:w,x1:0,y1:d,x2:f,y2:g,type:"row"}),d+=h.globals.gridHeight/a;if(void 0!==h.config.grid.column.colors&&h.config.grid.column.colors.length>0)for(var k=h.globals.isBarHorizontal||"on"!==h.config.xaxis.tickPlacement||"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric?s:s-1,C=h.globals.padHorizontal,T=h.globals.padHorizontal+h.globals.gridWidth/k,P=h.globals.gridHeight,F=0,O=0;F<s;F++,O++)O>=h.config.grid.column.colors.length&&(O=0),this._drawGridBandRect({c:O,x1:C,y1:0,x2:T,y2:P,type:"column"}),C+=h.globals.gridWidth/k}}]),R}(),ce=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"niceScale",value:function(s,a){var h,d,g,f,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,w=1e-11,k=this.w,C=k.globals;C.isBarHorizontal?(h=k.config.xaxis,d=Math.max((C.svgWidth-100)/25,2)):(h=k.config.yaxis[y],d=Math.max((C.svgHeight-100)/15,2)),g=null!=h.min,f=void 0!==h.max&&null!==h.min;var T=null!=h.stepSize,P=null!=h.tickAmount,F=P?h.tickAmount:h.forceNiceScale?C.niceScaleDefaultTicks[Math.min(Math.round(d/2),C.niceScaleDefaultTicks.length-1)]:10;if(C.isMultipleYAxis&&!P&&C.multiAxisTickAmount>0&&(F=C.multiAxisTickAmount,P=!0),F="dataPoints"===F?C.dataPoints-1:Math.abs(Math.round(F)),(s===Number.MIN_VALUE&&0===a||!ht.isNumber(s)&&!ht.isNumber(a)||s===Number.MIN_VALUE&&a===-Number.MAX_VALUE)&&(s=0,a=F,C.allSeriesCollapsed=!1),s>a){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var O=a;a=s,s=O}else s===a&&(s=0===s?0:s-1,a=0===a?2:a+1);var j=[];F<1&&(F=1);var Y=F,G=Math.abs(a-s);h.forceNiceScale&&(!g&&s>0&&s/G<.15&&(s=0,g=!0),!f&&a<0&&-a/G<.15&&(a=0,f=!0),G=Math.abs(a-s));var U=G/Y,S=U,N=Math.floor(Math.log10(S)),E=Math.pow(10,N),H=Math.ceil(S/E);if(U=S=(H=C.niceScaleAllowedMagMsd[0===C.yValueDecimal?0:1][H])*E,C.isBarHorizontal&&h.stepSize&&"datetime"!==h.type?(U=h.stepSize,T=!0):T&&(U=h.stepSize),T&&h.forceNiceScale){var W=Math.floor(Math.log10(U));U*=Math.pow(10,N-W)}if(g&&f){var K=G/Y;if(P)if(T)if(0!=ht.mod(G,U)){var tt=ht.getGCD(U,K);U=K/tt<10?tt:K}else 0==ht.mod(U,K)?U=K:(K=U,P=!1);else U=K;else if(T)0==ht.mod(G,U)?K=U:U=K;else if(0==ht.mod(G,U))K=U;else{K=G/(Y=Math.ceil(G/U));var et=ht.getGCD(G,U);G/et<d&&(K=et),U=K}Y=Math.round(G/U)}else{if(g||f)if(f)if(P)s=a-U*Y;else{var gt=s;s=U*Math.floor(s/U),Math.abs(a-s)/ht.getGCD(G,U)>d&&(s=a-U*F,s+=U*Math.floor((gt-s)/U))}else g&&(a=P?s+U*Y:U*Math.ceil(a/U));else if(P){var St=U/(a-s>a?1:2),bt=St*Math.floor(s/St);Math.abs(bt-s)<=St/2?a=(s=bt)+U*Y:s=(a=St*Math.ceil(a/St))-U*Y}else s=U*Math.floor(s/U),a=U*Math.ceil(a/U);G=Math.abs(a-s),U=ht.getGCD(G,U),Y=Math.round(G/U)}if(P||g||f||(Y=Math.ceil((G-w)/(U+w)))>16&&ht.getPrimeFactors(Y).length<2&&Y++,C.isMultipleYAxis&&0==C.multiAxisTickAmount&&(C.multiAxisTickAmount=Y),Y>d&&(!P&&!T||h.forceNiceScale)){var Et=ht.getPrimeFactors(Y),Gt=Et.length-1,Bt=Y;t:for(var he=0;he<Gt;he++)for(var me=0;me<=Gt-he;me++){for(var fe=Math.min(me+he,Gt),Be=Bt,ye=1,_e=me;_e<=fe;_e++)ye*=Et[_e];if((Be/=ye)<d){Bt=Be;break t}}U=Bt===Y?G:G/Bt}var Le=s-U,ni=U*w;do{j.push(ht.stripNumber(Le+=U,7))}while(a-Le>ni);return{result:j,niceMin:j[0],niceMax:j[j.length-1]}}},{key:"linearScale",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,f=Math.abs(a-s);"dataPoints"===(h=this._adjustTicksForSmallRange(h,d,f))&&(h=this.w.globals.dataPoints-1),g||(g=f/h),h===Number.MAX_VALUE&&(h=5,g=1);for(var y=[],w=s;h>=0;)y.push(w),w+=g,h-=1;return{result:y,niceMin:y[0],niceMax:y[y.length-1]}}},{key:"logarithmicScaleNice",value:function(s,a,h){a<=0&&(a=Math.max(s,h)),s<=0&&(s=Math.min(a,h));for(var d=[],g=Math.ceil(Math.log(a)/Math.log(h)+1),f=Math.floor(Math.log(s)/Math.log(h));f<g;f++)d.push(Math.pow(h,f));return{result:d,niceMin:d[0],niceMax:d[d.length-1]}}},{key:"logarithmicScale",value:function(s,a,h){a<=0&&(a=Math.max(s,h)),s<=0&&(s=Math.min(a,h));for(var d=[],g=Math.log(a)/Math.log(h),f=Math.log(s)/Math.log(h),y=g-f,w=Math.round(y),k=y/w,C=0,T=f;C<w;C++,T+=k)d.push(Math.pow(h,T));return d.push(Math.pow(h,g)),{result:d,niceMin:s,niceMax:a}}},{key:"_adjustTicksForSmallRange",value:function(s,a,h){var d=s;if(void 0!==a&&this.w.config.yaxis[a].labels.formatter&&void 0===this.w.config.yaxis[a].tickAmount){var g=Number(this.w.config.yaxis[a].labels.formatter(1));ht.isNumber(g)&&0===this.w.globals.yValueDecimal&&(d=Math.ceil(h))}return d<s?d:s}},{key:"setYScaleForIndex",value:function(s,a,h){var d=this.w.globals,g=this.w.config,f=d.isBarHorizontal?g.xaxis:g.yaxis[s];void 0===d.yAxisScale[s]&&(d.yAxisScale[s]=[]);var y=Math.abs(h-a);f.logarithmic&&y<=5&&(d.invalidLogScale=!0),f.logarithmic&&y>5?(d.allSeriesCollapsed=!1,d.yAxisScale[s]=f.forceNiceScale?this.logarithmicScaleNice(a,h,f.logBase):this.logarithmicScale(a,h,f.logBase)):h!==-Number.MAX_VALUE&&ht.isNumber(h)?(d.allSeriesCollapsed=!1,d.yAxisScale[s]=this.niceScale(a,h,s)):d.yAxisScale[s]=this.linearScale(0,10,10,s,g.yaxis[s].stepSize)}},{key:"setXScale",value:function(s,a){var h=this.w,d=h.globals,g=Math.abs(a-s);return d.xAxisScale=a!==-Number.MAX_VALUE&&ht.isNumber(a)?this.linearScale(s,a,h.config.xaxis.tickAmount?h.config.xaxis.tickAmount:g<10&&g>1?g+1:10,0,h.config.xaxis.stepSize):this.linearScale(0,10,10),d.xAxisScale}},{key:"setMultipleYScales",value:function(){var s=this.w.globals,a=this.w.config,h=s.minYArr,d=s.maxYArr,g=[],f=[],y=[];a.series.forEach(function(P,F){y.push(F),f.push(null)});var w,k=[];a.yaxis.forEach(function(P,F){if(P.seriesName){var O=[];Array.isArray(P.seriesName)?O=P.seriesName:O.push(P.seriesName),g[F]=[],O.forEach(function(j){a.series.forEach(function(Y,G){if(Y.name===j){g[F].push(G),f[G]=F;var U=y.indexOf(G);y.splice(U,1)}})})}else k.push(F)});for(var C=0;C<k.length&&(g[w=k[C]]=[],y);C++){var T=y[0];y.shift(),g[w].push(T),f[T]=w}w&&y.forEach(function(P){g[w].push(P),f[P]=w}),s.seriesYAxisMap=g.map(function(P){return P}),s.seriesYAxisReverseMap=f.map(function(P){return P}),this.sameScaleInMultipleAxes(h,d,g)}},{key:"sameScaleInMultipleAxes",value:function(s,a,h){var d=this,g=this.w.config,f=this.w.globals,y=[];h.forEach(function(k,C){for(var T=C+1;T<h.length;T++){var P,F=At(k.values());try{for(F.s();!(P=F.n()).done;){var j=h[T].indexOf(P.value);-1!==j&&(k.push(T),h[T].splice(j,1))}}catch(Y){F.e(Y)}finally{F.f()}h[T].length<1&&-1===y.indexOf(T)&&y.push(T)}});for(var w=y.length-1;w>=0;w--)h.splice(y[w],1);h.forEach(function(k,C){var T=Number.MAX_VALUE,P=-Number.MAX_VALUE;if(g.chart.stacked){for(var F=f.seriesX[k[0]].map(function(W){return Number.MIN_VALUE}),O=f.seriesX[k[0]].map(function(W){return Number.MIN_VALUE}),j=f.seriesX[k[0]].map(function(W){return Number.MIN_VALUE}),Y=g.series[k[0]].type,G=0;G<k.length;G++){var U=k[G];if(-1===f.collapsedSeriesIndices.indexOf(U))for(var S=0;S<f.series[U].length;S++){var N=f.series[U][S];N>=0?O[S]+=N:j[S]+=N,F[S]+=N}}"bar"===Y?(T=Math.min.apply(null,j),P=Math.max.apply(null,O)):(T=Math.min.apply(null,F),P=Math.max.apply(null,F))}else{for(var E=0;E<k.length;E++)T=Math.min(T,s[k[E]]);for(var H=0;H<k.length;H++)P=Math.max(P,a[k[H]])}void 0!==g.yaxis[C].min&&(T="function"==typeof g.yaxis[C].min?g.yaxis[C].min(T):g.yaxis[C].min),void 0!==g.yaxis[C].max&&(P="function"==typeof g.yaxis[C].max?g.yaxis[C].max(P):g.yaxis[C].max),d.setYScaleForIndex(C,T,P),k.forEach(function(W){s[W]=f.yAxisScale[C].niceMin,a[W]=f.yAxisScale[C].niceMax})})}}]),R}(),Pe=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.scales=new ce(s)}return Yt(R,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,g=this.w.config,f=this.w.globals,y=-Number.MAX_VALUE,w=Number.MIN_VALUE;null===d&&(d=s+1);var k=0,C=0,T=void 0;if(f.seriesX.length>=d){var P,F;k=0,C=(T=Ji(new Set((P=[]).concat.apply(P,Ji(f.seriesX.slice(s,d)))))).length-1;var O=null===(F=f.brushSource)||void 0===F?void 0:F.w.config.chart.brush;if(g.chart.zoom.enabled&&g.chart.zoom.autoScaleYaxis||null!=O&&O.enabled&&null!=O&&O.autoScaleYaxis){if(g.xaxis.min)for(k=0;k<C&&T[k]<=g.xaxis.min;k++);if(g.xaxis.max)for(;C>k&&T[C]>=g.xaxis.max;C--);}}var j=f.series,Y=j,G=j;"candlestick"===g.chart.type?(Y=f.seriesCandleL,G=f.seriesCandleH):"boxPlot"===g.chart.type?(Y=f.seriesCandleO,G=f.seriesCandleC):f.isRangeData&&(Y=f.seriesRangeStart,G=f.seriesRangeEnd);for(var U=s;U<d;U++){f.dataPoints=Math.max(f.dataPoints,j[U].length);var S=g.series[U].type;f.categoryLabels.length&&(f.dataPoints=f.categoryLabels.filter(function(H){return void 0!==H}).length),f.labels.length&&"datetime"!==g.xaxis.type&&0!==f.series.reduce(function(H,W){return H+W.length},0)&&(f.dataPoints=Math.max(f.dataPoints,f.labels.length)),T||(k=0,C=f.series[U].length);for(var N=k;N<=C&&N<f.series[U].length;N++){var E=j[U][N];if(null!==E&&ht.isNumber(E)){switch(void 0!==G[U][N]&&(y=Math.max(y,G[U][N]),a=Math.min(a,G[U][N])),void 0!==Y[U][N]&&(a=Math.min(a,Y[U][N]),h=Math.max(h,Y[U][N])),S){case"candlestick":void 0!==f.seriesCandleC[U][N]&&(y=Math.max(y,f.seriesCandleH[U][N]),a=Math.min(a,f.seriesCandleL[U][N]));case"boxPlot":void 0!==f.seriesCandleC[U][N]&&(y=Math.max(y,f.seriesCandleC[U][N]),a=Math.min(a,f.seriesCandleO[U][N]))}S&&"candlestick"!==S&&"boxPlot"!==S&&"rangeArea"!==S&&"rangeBar"!==S&&(y=Math.max(y,f.series[U][N]),a=Math.min(a,f.series[U][N])),h=y,f.seriesGoals[U]&&f.seriesGoals[U][N]&&Array.isArray(f.seriesGoals[U][N])&&f.seriesGoals[U][N].forEach(function(H){w!==Number.MIN_VALUE&&(w=Math.min(w,H.value),a=w),y=Math.max(y,H.value),h=y}),ht.isFloat(E)&&(E=ht.noExponents(E),f.yValueDecimal=Math.max(f.yValueDecimal,E.toString().split(".")[1].length)),w>Y[U][N]&&Y[U][N]<0&&(w=Y[U][N])}else f.hasNullValues=!0}"bar"!==S&&"column"!==S||(w<0&&y<0&&(y=0,h=Math.max(h,0)),w===Number.MIN_VALUE&&(w=0,a=Math.min(a,0)))}return"rangeBar"===g.chart.type&&f.seriesRangeStart.length&&f.isBarHorizontal&&(w=a),"bar"===g.chart.type&&(w<0&&y<0&&(y=0),w===Number.MIN_VALUE&&(w=0)),{minY:w,maxY:y,lowestY:a,highestY:h}}},{key:"setYRange",value:function(){var s=this.w.globals,a=this.w.config;s.maxY=-Number.MAX_VALUE,s.minY=Number.MIN_VALUE;var h,d=Number.MAX_VALUE;if(s.isMultipleYAxis){d=Number.MAX_VALUE;for(var g=0;g<s.series.length;g++)h=this.getMinYMaxY(g),s.minYArr[g]=h.lowestY,s.maxYArr[g]=h.highestY,d=Math.min(d,h.lowestY)}return h=this.getMinYMaxY(0,d,null,s.series.length),"bar"===a.chart.type?(s.minY=h.minY,s.maxY=h.maxY):(s.minY=h.lowestY,s.maxY=h.highestY),d=h.lowestY,a.chart.stacked&&this._setStackedMinMax(),"line"===a.chart.type||"area"===a.chart.type||"scatter"===a.chart.type||"candlestick"===a.chart.type||"boxPlot"===a.chart.type||"rangeBar"===a.chart.type&&!s.isBarHorizontal?s.minY===Number.MIN_VALUE&&d!==-Number.MAX_VALUE&&d!==s.maxY&&(s.minY=d):s.minY=h.minY,a.yaxis.forEach(function(f,y){void 0!==f.max&&("number"==typeof f.max?s.maxYArr[y]=f.max:"function"==typeof f.max&&(s.maxYArr[y]=f.max(s.isMultipleYAxis?s.maxYArr[y]:s.maxY)),s.maxY=s.maxYArr[y]),void 0!==f.min&&("number"==typeof f.min?s.minYArr[y]=f.min:"function"==typeof f.min&&(s.minYArr[y]=f.min(s.isMultipleYAxis?s.minYArr[y]===Number.MIN_VALUE?0:s.minYArr[y]:s.minY)),s.minY=s.minYArr[y])}),s.isBarHorizontal&&["min","max"].forEach(function(f){void 0!==a.xaxis[f]&&"number"==typeof a.xaxis[f]&&("min"===f?s.minY=a.xaxis[f]:s.maxY=a.xaxis[f])}),s.isMultipleYAxis?(this.scales.setMultipleYScales(),s.minY=d):(this.scales.setYScaleForIndex(0,s.minY,s.maxY),s.minY=s.yAxisScale[0].niceMin,s.maxY=s.yAxisScale[0].niceMax,s.minYArr[0]=s.yAxisScale[0].niceMin,s.maxYArr[0]=s.yAxisScale[0].niceMax,s.seriesYAxisMap=[s.series.map(function(f,y){return y})],s.seriesYAxisReverseMap=s.series.map(function(f,y){return 0})),{minY:s.minY,maxY:s.maxY,minYArr:s.minYArr,maxYArr:s.maxYArr,yAxisScale:s.yAxisScale}}},{key:"setXRange",value:function(){var s=this.w.globals,a=this.w.config,h="numeric"===a.xaxis.type||"datetime"===a.xaxis.type||"category"===a.xaxis.type&&!s.noLabelsProvided||s.noLabelsProvided||s.isXNumeric;if(s.isXNumeric&&function(){for(var y=0;y<s.series.length;y++)if(s.labels[y])for(var w=0;w<s.labels[y].length;w++)null!==s.labels[y][w]&&ht.isNumber(s.labels[y][w])&&(s.maxX=Math.max(s.maxX,s.labels[y][w]),s.initialMaxX=Math.max(s.maxX,s.labels[y][w]),s.minX=Math.min(s.minX,s.labels[y][w]),s.initialMinX=Math.min(s.minX,s.labels[y][w]))}(),s.noLabelsProvided&&0===a.xaxis.categories.length&&(s.maxX=s.labels[s.labels.length-1],s.initialMaxX=s.labels[s.labels.length-1],s.minX=1,s.initialMinX=1),s.isXNumeric||s.noLabelsProvided||s.dataFormatXNumeric){var d;if(void 0===a.xaxis.tickAmount?(d=Math.round(s.svgWidth/150),"numeric"===a.xaxis.type&&s.dataPoints<30&&(d=s.dataPoints-1),d>s.dataPoints&&0!==s.dataPoints&&(d=s.dataPoints-1)):"dataPoints"===a.xaxis.tickAmount?(s.series.length>1&&(d=s.series[s.maxValsInArrayIndex].length-1),s.isXNumeric&&(d=s.maxX-s.minX-1)):d=a.xaxis.tickAmount,s.xTickAmount=d,void 0!==a.xaxis.max&&"number"==typeof a.xaxis.max&&(s.maxX=a.xaxis.max),void 0!==a.xaxis.min&&"number"==typeof a.xaxis.min&&(s.minX=a.xaxis.min),void 0!==a.xaxis.range&&(s.minX=s.maxX-a.xaxis.range),s.minX!==Number.MAX_VALUE&&s.maxX!==-Number.MAX_VALUE)if(a.xaxis.convertedCatToNumeric&&!s.dataFormatXNumeric){for(var g=[],f=s.minX-1;f<s.maxX;f++)g.push(f+1);s.xAxisScale={result:g,niceMin:g[0],niceMax:g[g.length-1]}}else s.xAxisScale=this.scales.setXScale(s.minX,s.maxX);else s.xAxisScale=this.scales.linearScale(0,d,d,0,a.xaxis.stepSize),s.noLabelsProvided&&s.labels.length>0&&(s.xAxisScale=this.scales.linearScale(1,s.labels.length,d-1,0,a.xaxis.stepSize),s.seriesX=s.labels.slice());h&&(s.labels=s.xAxisScale.result.slice())}return s.isBarHorizontal&&s.labels.length&&(s.xTickAmount=s.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:s.minX,maxX:s.maxX}}},{key:"setZRange",value:function(){var s=this.w.globals;if(s.isDataXYZ)for(var a=0;a<s.series.length;a++)if(void 0!==s.seriesZ[a])for(var h=0;h<s.seriesZ[a].length;h++)null!==s.seriesZ[a][h]&&ht.isNumber(s.seriesZ[a][h])&&(s.maxZ=Math.max(s.maxZ,s.seriesZ[a][h]),s.minZ=Math.min(s.minZ,s.seriesZ[a][h]))}},{key:"_handleSingleDataPoint",value:function(){var s=this.w.globals,a=this.w.config;if(s.minX===s.maxX){var h=new ai(this.ctx);if("datetime"===a.xaxis.type){var d=h.getDate(s.minX);a.xaxis.labels.datetimeUTC?d.setUTCDate(d.getUTCDate()-2):d.setDate(d.getDate()-2),s.minX=new Date(d).getTime();var g=h.getDate(s.maxX);a.xaxis.labels.datetimeUTC?g.setUTCDate(g.getUTCDate()+2):g.setDate(g.getDate()+2),s.maxX=new Date(g).getTime()}else("numeric"===a.xaxis.type||"category"===a.xaxis.type&&!s.noLabelsProvided)&&(s.minX=s.minX-2,s.initialMinX=s.minX,s.maxX=s.maxX+2,s.initialMaxX=s.maxX)}}},{key:"_getMinXDiff",value:function(){var s=this.w.globals;s.isXNumeric&&s.seriesX.forEach(function(a,h){1===a.length&&a.push(s.seriesX[s.maxValsInArrayIndex][s.seriesX[s.maxValsInArrayIndex].length-1]);var d=a.slice();d.sort(function(g,f){return g-f}),d.forEach(function(g,f){if(f>0){var y=g-d[f-1];y>0&&(s.minXDiff=Math.min(y,s.minXDiff))}}),1!==s.dataPoints&&s.minXDiff!==Number.MAX_VALUE||(s.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var s=this,a=this.w.globals;if(a.series.length){var h=a.seriesGroups;h.length||(h=[this.w.config.series.map(function(f){return f.name})]);var d={},g={};h.forEach(function(f){d[f]=[],g[f]=[],s.w.config.series.map(function(y,w){return f.indexOf(y.name)>-1?w:null}).filter(function(y){return null!==y}).forEach(function(y){for(var w=0;w<a.series[a.maxValsInArrayIndex].length;w++){var k,C;void 0===d[f][w]&&(d[f][w]=0,g[f][w]=0),(s.w.config.chart.stacked&&!a.comboCharts||s.w.config.chart.stacked&&a.comboCharts&&(!s.w.config.chart.stackOnlyBar||"bar"===(null===(k=s.w.config.series)||void 0===k||null===(C=k[y])||void 0===C?void 0:C.type)))&&null!==a.series[y][w]&&ht.isNumber(a.series[y][w])&&(a.series[y][w]>0?d[f][w]+=parseFloat(a.series[y][w])+1e-4:g[f][w]+=parseFloat(a.series[y][w]))}})}),Object.entries(d).forEach(function(f){var y=Ot(f,1)[0];d[y].forEach(function(w,k){a.maxY=Math.max(a.maxY,d[y][k]),a.minY=Math.min(a.minY,g[y][k])})})}}}]),R}(),Ze=function(){function R(s,a){xt(this,R),this.ctx=s,this.elgrid=a,this.w=s.w;var h=this.w;this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.axisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===h.config.xaxis.position&&(this.xAxisoffX=h.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Ht(s)}return Yt(R,[{key:"drawYaxis",value:function(s){var a=this,h=this.w,d=new kt(this.ctx),g=h.config.yaxis[s].labels.style,f=g.fontSize,y=g.fontFamily,w=g.fontWeight,k=d.group({class:"apexcharts-yaxis",rel:s,transform:"translate("+h.globals.translateYAxisX[s]+", 0)"});if(this.axesUtils.isYAxisHidden(s))return k;var C=d.group({class:"apexcharts-yaxis-texts-g"});k.add(C);var T=h.globals.yAxisScale[s].result.length-1,P=h.globals.gridHeight/T,F=h.globals.translateY,O=h.globals.yLabelFormatters[s],j=h.globals.yAxisScale[s].result.slice();j=this.axesUtils.checkForReversedLabels(s,j);var Y="";if(h.config.yaxis[s].labels.show)for(var G=function(tt){var et=j[tt];et=O(et,tt,h);var gt=h.config.yaxis[s].labels.padding;h.config.yaxis[s].opposite&&0!==h.config.yaxis.length&&(gt*=-1);var St="end";h.config.yaxis[s].opposite&&(St="start"),"left"===h.config.yaxis[s].labels.align?St="start":"center"===h.config.yaxis[s].labels.align?St="middle":"right"===h.config.yaxis[s].labels.align&&(St="end");var bt=a.axesUtils.getYAxisForeColor(g.colors,s),Et=h.config.yaxis[s].labels.offsetY;"heatmap"===h.config.chart.type&&(Et-=(h.globals.gridHeight/h.globals.series.length-1)/2);var Gt=d.drawText({x:gt,y:F+T/10+Et+1,text:et,textAnchor:St,fontSize:f,fontFamily:y,fontWeight:w,maxWidth:h.config.yaxis[s].labels.maxWidth,foreColor:Array.isArray(bt)?bt[tt]:bt,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+g.cssClass});tt===T&&(Y=Gt),C.add(Gt);var Bt=document.createElementNS(h.globals.SVGNS,"title");if(Bt.textContent=Array.isArray(et)?et.join(" "):et,Gt.node.appendChild(Bt),0!==h.config.yaxis[s].labels.rotate){var he=d.rotateAroundCenter(Y.node),me=d.rotateAroundCenter(Gt.node);Gt.node.setAttribute("transform","rotate(".concat(h.config.yaxis[s].labels.rotate," ").concat(he.x," ").concat(me.y,")"))}F+=P},U=T;U>=0;U--)G(U);if(void 0!==h.config.yaxis[s].title.text){var S=d.group({class:"apexcharts-yaxis-title"}),N=0;h.config.yaxis[s].opposite&&(N=h.globals.translateYAxisX[s]);var E=d.drawText({x:N,y:h.globals.gridHeight/2+h.globals.translateY+h.config.yaxis[s].title.offsetY,text:h.config.yaxis[s].title.text,textAnchor:"end",foreColor:h.config.yaxis[s].title.style.color,fontSize:h.config.yaxis[s].title.style.fontSize,fontWeight:h.config.yaxis[s].title.style.fontWeight,fontFamily:h.config.yaxis[s].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[s].title.style.cssClass});S.add(E),k.add(S)}var H=h.config.yaxis[s].axisBorder,W=31+H.offsetX;if(h.config.yaxis[s].opposite&&(W=-31-H.offsetX),H.show){var K=d.drawLine(W,h.globals.translateY+H.offsetY-2,W,h.globals.gridHeight+h.globals.translateY+H.offsetY+2,H.color,0,H.width);k.add(K)}return h.config.yaxis[s].axisTicks.show&&this.axesUtils.drawYAxisTicks(W,T,H,h.config.yaxis[s].axisTicks,s,P,k),k}},{key:"drawYaxisInversed",value:function(s){var a=this.w,h=new kt(this.ctx),d=h.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),g=h.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(a.globals.translateXAxisX,", ").concat(a.globals.translateXAxisY,")")});d.add(g);var f=a.globals.yAxisScale[s].result.length-1,y=a.globals.gridWidth/f+.1,w=y+a.config.xaxis.labels.offsetX,k=a.globals.xLabelFormatter,C=a.globals.yAxisScale[s].result.slice(),T=a.globals.timescaleLabels;T.length>0&&(this.xaxisLabels=T.slice(),f=(C=T.slice()).length),C=this.axesUtils.checkForReversedLabels(s,C);var P=T.length;if(a.config.xaxis.labels.show)for(var F=P?0:f;P?F<P:F>=0;P?F++:F--){var O=C[F];O=k(O,F,a);var j=a.globals.gridWidth+a.globals.padHorizontal-(w-y+a.config.xaxis.labels.offsetX);if(T.length){var Y=this.axesUtils.getLabel(C,T,j,F,this.drawnLabels,this.xaxisFontSize);j=Y.x,O=Y.text,this.drawnLabels.push(Y.text),0===F&&a.globals.skipFirstTimelinelabel&&(O=""),F===C.length-1&&a.globals.skipLastTimelinelabel&&(O="")}var G=h.drawText({x:j,y:this.xAxisoffX+a.config.xaxis.labels.offsetY+30-("top"===a.config.xaxis.position?a.globals.xAxisHeight+a.config.xaxis.axisTicks.height-2:0),text:O,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[s]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:a.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+a.config.xaxis.labels.style.cssClass});g.add(G),G.tspan(O);var U=document.createElementNS(a.globals.SVGNS,"title");U.textContent=O,G.node.appendChild(U),w+=y}return this.inversedYAxisTitleText(d),this.inversedYAxisBorder(d),d}},{key:"inversedYAxisBorder",value:function(s){var a=this.w,h=new kt(this.ctx),d=a.config.xaxis.axisBorder;if(d.show){var g=0;"bar"===a.config.chart.type&&a.globals.isXNumeric&&(g-=15);var f=h.drawLine(a.globals.padHorizontal+g+d.offsetX,this.xAxisoffX,a.globals.gridWidth,this.xAxisoffX,d.color,0,d.height);this.elgrid&&this.elgrid.elGridBorders&&a.config.grid.show?this.elgrid.elGridBorders.add(f):s.add(f)}}},{key:"inversedYAxisTitleText",value:function(s){var a=this.w,h=new kt(this.ctx);if(void 0!==a.config.xaxis.title.text){var d=h.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),g=h.drawText({x:a.globals.gridWidth/2+a.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(a.config.xaxis.title.style.fontSize)+a.config.xaxis.title.offsetY+20,text:a.config.xaxis.title.text,textAnchor:"middle",fontSize:a.config.xaxis.title.style.fontSize,fontFamily:a.config.xaxis.title.style.fontFamily,fontWeight:a.config.xaxis.title.style.fontWeight,foreColor:a.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+a.config.xaxis.title.style.cssClass});d.add(g),s.add(d)}}},{key:"yAxisTitleRotate",value:function(s,a){var h=this.w,d=new kt(this.ctx),g={width:0,height:0},f={width:0,height:0},y=h.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(s,"'] .apexcharts-yaxis-texts-g"));null!==y&&(g=y.getBoundingClientRect());var w=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(s,"'] .apexcharts-yaxis-title text"));if(null!==w&&(f=w.getBoundingClientRect()),null!==w){var k=this.xPaddingForYAxisTitle(s,g,f,a);w.setAttribute("x",k.xPos-(a?10:0))}if(null!==w){var C=d.rotateAroundCenter(w);w.setAttribute("transform","rotate(".concat(a?-1*h.config.yaxis[s].title.rotate:h.config.yaxis[s].title.rotate," ").concat(C.x," ").concat(C.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(s,a,h,d){var g=this.w,f=0,y=0,w=10;return void 0===g.config.yaxis[s].title.text||s<0?{xPos:y,padd:0}:(d?(y=a.width+g.config.yaxis[s].title.offsetX+h.width/2+w/2,0===(f+=1)&&(y-=w/2)):(y=-1*a.width+g.config.yaxis[s].title.offsetX+w/2+h.width/2,g.globals.isBarHorizontal&&(y=-1*a.width-g.config.yaxis[s].title.offsetX-(w=25))),{xPos:y,padd:w})}},{key:"setYAxisXPosition",value:function(s,a){var h=this.w,d=0,g=0,f=18,y=1;h.config.yaxis.length>1&&(this.multipleYs=!0),h.config.yaxis.map(function(w,k){var C=h.globals.ignoreYAxisIndexes.indexOf(k)>-1||!w.show||w.floating||0===s[k].width,T=s[k].width+a[k].width;w.opposite?h.globals.isBarHorizontal?h.globals.translateYAxisX[k]=(g=h.globals.gridWidth+h.globals.translateX-1)-w.labels.offsetX:(g=h.globals.gridWidth+h.globals.translateX+y,C||(y=y+T+20),h.globals.translateYAxisX[k]=g-w.labels.offsetX+20):(d=h.globals.translateX-f,C||(f=f+T+20),h.globals.translateYAxisX[k]=d+w.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var s=this.w,a=s.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(a=ht.listToArray(a)).forEach(function(h,d){var g=s.config.yaxis[d];if(g&&!g.floating&&void 0!==g.labels.align){var f=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-texts-g")),y=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-label"));y=ht.listToArray(y);var w=f.getBoundingClientRect();"left"===g.labels.align?(y.forEach(function(k,C){k.setAttribute("text-anchor","start")}),g.opposite||f.setAttribute("transform","translate(-".concat(w.width,", 0)"))):"center"===g.labels.align?(y.forEach(function(k,C){k.setAttribute("text-anchor","middle")}),f.setAttribute("transform","translate(".concat(w.width/2*(g.opposite?1:-1),", 0)"))):"right"===g.labels.align&&(y.forEach(function(k,C){k.setAttribute("text-anchor","end")}),g.opposite&&f.setAttribute("transform","translate(".concat(w.width,", 0)")))}})}}]),R}(),ot=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.documentEvent=ht.bind(this.documentEvent,this)}return Yt(R,[{key:"addEventListener",value:function(s,a){var h=this.w;h.globals.events.hasOwnProperty(s)?h.globals.events[s].push(a):h.globals.events[s]=[a]}},{key:"removeEventListener",value:function(s,a){var h=this.w;if(h.globals.events.hasOwnProperty(s)){var d=h.globals.events[s].indexOf(a);-1!==d&&h.globals.events[s].splice(d,1)}}},{key:"fireEvent",value:function(s,a){var h=this.w;if(h.globals.events.hasOwnProperty(s)){a&&a.length||(a=[]);for(var d=h.globals.events[s],g=d.length,f=0;f<g;f++)d[f].apply(null,a)}}},{key:"setupEventHandlers",value:function(){var s=this,a=this.w,h=this.ctx,d=a.globals.dom.baseEl.querySelector(a.globals.chartClass);this.ctx.eventList.forEach(function(g){d.addEventListener(g,function(f){var y=Object.assign({},a,{seriesIndex:a.globals.capturedSeriesIndex,dataPointIndex:a.globals.capturedDataPointIndex});"mousemove"===f.type||"touchmove"===f.type?"function"==typeof a.config.chart.events.mouseMove&&a.config.chart.events.mouseMove(f,h,y):"mouseleave"===f.type||"touchleave"===f.type?"function"==typeof a.config.chart.events.mouseLeave&&a.config.chart.events.mouseLeave(f,h,y):("mouseup"===f.type&&1===f.which||"touchend"===f.type)&&("function"==typeof a.config.chart.events.click&&a.config.chart.events.click(f,h,y),h.ctx.events.fireEvent("click",[f,h,y]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(g){a.globals.dom.baseEl.addEventListener(g,s.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(s){var a=this.w,h=s.target.className;if("click"===s.type){var d=a.globals.dom.baseEl.querySelector(".apexcharts-menu");d&&d.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==h&&d.classList.remove("apexcharts-menu-open")}a.globals.clientX="touchmove"===s.type?s.touches[0].clientX:s.clientX,a.globals.clientY="touchmove"===s.type?s.touches[0].clientY:s.clientY}}]),R}(),Te=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"setCurrentLocaleValues",value:function(s){var a=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(a=this.w.config.chart.locales.concat(window.Apex.chart.locales));var h=a.filter(function(g){return g.name===s})[0];if(!h)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var d=ht.extend(Xe,h);this.w.globals.locale=d.options}}]),R}(),rt=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"drawAxis",value:function(s,a){var h,d,g=this,f=this.w.globals,y=this.w.config,w=new Mt(this.ctx,a),k=new Ze(this.ctx,a);f.axisCharts&&"radar"!==s&&(f.isBarHorizontal?(d=k.drawYaxisInversed(0),h=w.drawXaxisInversed(0),f.dom.elGraphical.add(h),f.dom.elGraphical.add(d)):(h=w.drawXaxis(),f.dom.elGraphical.add(h),y.yaxis.map(function(C,T){if(-1===f.ignoreYAxisIndexes.indexOf(T)&&(d=k.drawYaxis(T),f.dom.Paper.add(d),"back"===g.w.config.grid.position)){var P=f.dom.Paper.children()[1];P.remove(),f.dom.Paper.add(P)}})))}}]),R}(),ee=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"drawXCrosshairs",value:function(){var s=this.w,a=new kt(this.ctx),h=new si(this.ctx),d=s.config.xaxis.crosshairs.fill.gradient,g=s.config.xaxis.crosshairs.dropShadow,P=g.enabled,F=g.left,O=g.top,j=g.blur,Y=g.color,G=g.opacity,U=s.config.xaxis.crosshairs.fill.color;if(s.config.xaxis.crosshairs.show){"gradient"===s.config.xaxis.crosshairs.fill.type&&(U=a.drawGradient("vertical",d.colorFrom,d.colorTo,d.opacityFrom,d.opacityTo,null,d.stops,null));var S=a.drawRect();1===s.config.xaxis.crosshairs.width&&(S=a.drawLine());var N=s.globals.gridHeight;(!ht.isNumber(N)||N<0)&&(N=0);var E=s.config.xaxis.crosshairs.width;(!ht.isNumber(E)||E<0)&&(E=0),S.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:N,width:E,height:N,fill:U,filter:"none","fill-opacity":s.config.xaxis.crosshairs.opacity,stroke:s.config.xaxis.crosshairs.stroke.color,"stroke-width":s.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":s.config.xaxis.crosshairs.stroke.dashArray}),P&&(S=h.dropShadow(S,{left:F,top:O,blur:j,color:Y,opacity:G})),s.globals.dom.elGraphical.add(S)}}},{key:"drawYCrosshairs",value:function(){var s=this.w,a=new kt(this.ctx),h=s.config.yaxis[0].crosshairs,d=s.globals.barPadForNumericAxis;if(s.config.yaxis[0].crosshairs.show){var g=a.drawLine(-d,0,s.globals.gridWidth+d,0,h.stroke.color,h.stroke.dashArray,h.stroke.width);g.attr({class:"apexcharts-ycrosshairs"}),s.globals.dom.elGraphical.add(g)}var f=a.drawLine(-d,0,s.globals.gridWidth+d,0,h.stroke.color,0,0);f.attr({class:"apexcharts-ycrosshairs-hidden"}),s.globals.dom.elGraphical.add(f)}}]),R}(),fi=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"checkResponsiveConfig",value:function(s){var a=this,h=this.w,d=h.config;if(0!==d.responsive.length){var g=d.responsive.slice();g.sort(function(k,C){return k.breakpoint>C.breakpoint?1:C.breakpoint>k.breakpoint?-1:0}).reverse();var f=new mr({}),y=function(){var k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=window.innerWidth>0?window.innerWidth:screen.width;if(T>g[0].breakpoint){var P=it.extendArrayProps(f,h.globals.initialConfig,h);k=ht.extend(P,k),k=ht.extend(h.config,k),a.overrideResponsiveOptions(k)}else for(var F=0;F<g.length;F++)T<g[F].breakpoint&&(k=it.extendArrayProps(f,g[F].options,h),k=ht.extend(h.config,k),a.overrideResponsiveOptions(k))};if(s){var w=it.extendArrayProps(f,s,h);w=ht.extend(h.config,w),y(w=ht.extend(w,s))}else y({})}}},{key:"overrideResponsiveOptions",value:function(s){var a=new mr(s).init({responsiveOverride:!0});this.w.config=a}}]),R}(),Ae=function(){function R(s){xt(this,R),this.ctx=s,this.colors=[],this.w=s.w;var a=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===a.config.chart.type&&a.config.plotOptions.treemap.distributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.distributed,this.isBarDistributed=a.config.plotOptions.bar.distributed&&("bar"===a.config.chart.type||"rangeBar"===a.config.chart.type)}return Yt(R,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var s,a=this,h=this.w,d=new ht;if(h.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(h.config.theme.mode)),void 0===h.config.colors||0===(null===(s=h.config.colors)||void 0===s?void 0:s.length)?h.globals.colors=this.predefined():(h.globals.colors=h.config.colors,Array.isArray(h.config.colors)&&h.config.colors.length>0&&"function"==typeof h.config.colors[0]&&(h.globals.colors=h.config.series.map(function(O,j){var Y=h.config.colors[j];return Y||(Y=h.config.colors[0]),"function"==typeof Y?(a.isColorFn=!0,Y({value:h.globals.axisCharts?h.globals.series[j][0]?h.globals.series[j][0]:0:h.globals.series[j],seriesIndex:j,dataPointIndex:j,w:h})):Y}))),h.globals.seriesColors.map(function(O,j){O&&(h.globals.colors[j]=O)}),h.config.theme.monochrome.enabled){var g=[],f=h.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(f=h.globals.series[0].length*h.globals.series.length);for(var y=h.config.theme.monochrome.color,w=1/(f/h.config.theme.monochrome.shadeIntensity),k=h.config.theme.monochrome.shadeTo,C=0,T=0;T<f;T++){var P=void 0;"dark"===k?(P=d.shadeColor(-1*C,y),C+=w):(P=d.shadeColor(C,y),C+=w),g.push(P)}h.globals.colors=g.slice()}var F=h.globals.colors.slice();this.pushExtraColors(h.globals.colors),["fill","stroke"].forEach(function(O){h.globals[O].colors=void 0===h.config[O].colors?a.isColorFn?h.config.colors:F:h.config[O].colors.slice(),a.pushExtraColors(h.globals[O].colors)}),h.globals.dataLabels.style.colors=void 0===h.config.dataLabels.style.colors?F:h.config.dataLabels.style.colors.slice(),this.pushExtraColors(h.globals.dataLabels.style.colors,50),h.globals.radarPolygons.fill.colors=void 0===h.config.plotOptions.radar.polygons.fill.colors?["dark"===h.config.theme.mode?"#424242":"none"]:h.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(h.globals.radarPolygons.fill.colors,20),h.globals.markers.colors=void 0===h.config.markers.colors?F:h.config.markers.colors.slice(),this.pushExtraColors(h.globals.markers.colors)}},{key:"pushExtraColors",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=this.w,g=a||d.globals.series.length;if(null===h&&(h=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===d.config.chart.type&&d.config.plotOptions.heatmap.colorScale.inverse),h&&d.globals.series.length&&(g=d.globals.series[d.globals.maxValsInArrayIndex].length*d.globals.series.length),s.length<g)for(var f=g-s.length,y=0;y<f;y++)s.push(s[y])}},{key:"updateThemeOptions",value:function(s){s.chart=s.chart||{},s.tooltip=s.tooltip||{};var a=s.theme.mode||"light",h=s.theme.palette?s.theme.palette:"dark"===a?"palette4":"palette1",d=s.chart.foreColor?s.chart.foreColor:"dark"===a?"#f6f7f8":"#373d3f";return s.tooltip.theme=a,s.chart.foreColor=d,s.theme.palette=h,s}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),R}(),mn=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(s){var a=this.w,h="title"===s?a.config.title:a.config.subtitle,d=a.globals.svgWidth/2,g=h.offsetY,f="middle";if("left"===h.align?(d=10,f="start"):"right"===h.align&&(d=a.globals.svgWidth-10,f="end"),d+=h.offsetX,g=g+parseInt(h.style.fontSize,10)+h.margin/2,void 0!==h.text){var y=new kt(this.ctx).drawText({x:d,y:g,text:h.text,textAnchor:f,fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight,foreColor:h.style.color,opacity:1});y.node.setAttribute("class","apexcharts-".concat(s,"-text")),a.globals.dom.Paper.add(y)}}}]),R}(),He=function(){function R(s){xt(this,R),this.w=s.w,this.dCtx=s}return Yt(R,[{key:"getTitleSubtitleCoords",value:function(s){var a=this.w,h=0,d=0,g="title"===s?a.config.title.floating:a.config.subtitle.floating,f=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-text"));if(null!==f&&!g){var y=f.getBoundingClientRect();h=y.width,d=a.globals.axisCharts?y.height+5:y.height}return{width:h,height:d}}},{key:"getLegendsRect",value:function(){var s=this.w,a=s.globals.dom.elLegendWrap;s.config.legend.height||"top"!==s.config.legend.position&&"bottom"!==s.config.legend.position||(a.style.maxHeight=s.globals.svgHeight/2+"px");var h=Object.assign({},ht.getBoundingClientRect(a));return this.dCtx.lgRect=null!==a&&!s.config.legend.floating&&s.config.legend.show?{x:h.x,y:h.y,height:h.height,width:0===h.height?0:h.width}:{x:0,y:0,height:0,width:0},"left"!==s.config.legend.position&&"right"!==s.config.legend.position||1.5*this.dCtx.lgRect.width>s.globals.svgWidth&&(this.dCtx.lgRect.width=s.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(s,a){var h=s;if(this.w.globals.isMultiLineX){var d=a.map(function(f,y){return Array.isArray(f)?f.length:1}),g=Math.max.apply(Math,Ji(d));h=a[d.indexOf(g)]}return h}}]),R}(),ie=function(){function R(s){xt(this,R),this.w=s.w,this.dCtx=s}return Yt(R,[{key:"getxAxisLabelsCoords",value:function(){var s,a=this.w,h=a.globals.labels.slice();if(a.config.xaxis.convertedCatToNumeric&&0===h.length&&(h=a.globals.categoryLabels),a.globals.timescaleLabels.length>0){var d=this.getxAxisTimeScaleLabelsCoords();s={width:d.width,height:d.height},a.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==a.config.legend.position&&"right"!==a.config.legend.position||a.config.legend.floating?0:this.dCtx.lgRect.width;var g=a.globals.xLabelFormatter,f=ht.getLargestStringFromArr(h),y=this.dCtx.dimHelpers.getLargestStringFromMultiArr(f,h);a.globals.isBarHorizontal&&(y=f=a.globals.yAxisScale[0].result.reduce(function(O,j){return O.length>j.length?O:j},0));var w=new te(this.dCtx.ctx),k=f;f=w.xLabelFormat(g,f,k,{i:void 0,dateFormatter:new ai(this.dCtx.ctx).formatDate,w:a}),y=w.xLabelFormat(g,y,k,{i:void 0,dateFormatter:new ai(this.dCtx.ctx).formatDate,w:a}),(a.config.xaxis.convertedCatToNumeric&&void 0===f||""===String(f).trim())&&(y=f="1");var C=new kt(this.dCtx.ctx),T=C.getTextRects(f,a.config.xaxis.labels.style.fontSize),P=T;if(f!==y&&(P=C.getTextRects(y,a.config.xaxis.labels.style.fontSize)),(s={width:T.width>=P.width?T.width:P.width,height:T.height>=P.height?T.height:P.height}).width*h.length>a.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==a.config.xaxis.labels.rotate||a.config.xaxis.labels.rotateAlways){if(!a.globals.isBarHorizontal){a.globals.rotateXLabels=!0;var F=function(O){return C.getTextRects(O,a.config.xaxis.labels.style.fontSize,a.config.xaxis.labels.style.fontFamily,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1)};T=F(f),f!==y&&(P=F(y)),s.height=(T.height>P.height?T.height:P.height)/1.5,s.width=T.width>P.width?T.width:P.width}}else a.globals.rotateXLabels=!1}return a.config.xaxis.labels.show||(s={width:0,height:0}),{width:s.width,height:s.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var s,a=this.w;if(!a.globals.hasXaxisGroups)return{width:0,height:0};var h,d=(null===(s=a.config.xaxis.group.style)||void 0===s?void 0:s.fontSize)||a.config.xaxis.labels.style.fontSize,g=a.globals.groups.map(function(T){return T.title}),f=ht.getLargestStringFromArr(g),y=this.dCtx.dimHelpers.getLargestStringFromMultiArr(f,g),w=new kt(this.dCtx.ctx),k=w.getTextRects(f,d),C=k;return f!==y&&(C=w.getTextRects(y,d)),h={width:k.width>=C.width?k.width:C.width,height:k.height>=C.height?k.height:C.height},a.config.xaxis.labels.show||(h={width:0,height:0}),{width:h.width,height:h.height}}},{key:"getxAxisTitleCoords",value:function(){var s=this.w,a=0,h=0;if(void 0!==s.config.xaxis.title.text){var d=new kt(this.dCtx.ctx).getTextRects(s.config.xaxis.title.text,s.config.xaxis.title.style.fontSize);a=d.width,h=d.height}return{width:a,height:h}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var s,a=this.w;this.dCtx.timescaleLabels=a.globals.timescaleLabels.slice();var h=this.dCtx.timescaleLabels.map(function(g){return g.value}),d=h.reduce(function(g,f){return void 0===g?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):g.length>f.length?g:f},0);return 1.05*(s=new kt(this.dCtx.ctx).getTextRects(d,a.config.xaxis.labels.style.fontSize)).width*h.length>a.globals.gridWidth&&0!==a.config.xaxis.labels.rotate&&(a.globals.overlappingXLabels=!0),s}},{key:"additionalPaddingXLabels",value:function(s){var a=this,h=this.w,d=h.globals,g=h.config,f=g.xaxis.type,y=s.width;d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1;var w=h.config.yaxis[0].opposite&&h.globals.isBarHorizontal;g.yaxis.forEach(function(C,T){w?(a.dCtx.gridPad.left<y&&(a.dCtx.xPadLeft=y/2+1),a.dCtx.xPadRight=y/2+1):function(C,T){g.yaxis.length>1&&-1!==d.collapsedSeriesIndices.indexOf(T)||function(P){if(a.dCtx.timescaleLabels&&a.dCtx.timescaleLabels.length){var j=a.dCtx.timescaleLabels[0].position-y/1.75+a.dCtx.yAxisWidthLeft;a.dCtx.timescaleLabels[a.dCtx.timescaleLabels.length-1].position+y/1.75-a.dCtx.yAxisWidthRight>d.svgWidth-d.translateX-("right"===h.config.legend.position&&a.dCtx.lgRect.width>0?a.dCtx.lgRect.width:0)&&(d.skipLastTimelinelabel=!0),j<-(P.show&&!P.floating||"bar"!==g.chart.type&&"candlestick"!==g.chart.type&&"rangeBar"!==g.chart.type&&"boxPlot"!==g.chart.type?10:y/1.75)&&(d.skipFirstTimelinelabel=!0)}else"datetime"===f?a.dCtx.gridPad.right<y&&!d.rotateXLabels&&(d.skipLastTimelinelabel=!0):"datetime"!==f&&a.dCtx.gridPad.right<y/2-a.dCtx.yAxisWidthRight&&!d.rotateXLabels&&!h.config.xaxis.labels.trim&&("between"!==h.config.xaxis.tickPlacement||h.globals.isBarHorizontal)&&(a.dCtx.xPadRight=y/2+1)}(C)}(C,T)})}}]),R}(),je=function(){function R(s){xt(this,R),this.w=s.w,this.dCtx=s}return Yt(R,[{key:"getyAxisLabelsCoords",value:function(){var s=this,a=this.w,h=[],d=10,g=new Ht(this.dCtx.ctx);return a.config.yaxis.map(function(f,y){var w={seriesIndex:y,dataPointIndex:-1,w:a},k=a.globals.yAxisScale[y],C=0;if(!g.isYAxisHidden(y)&&f.labels.show&&void 0!==f.labels.minWidth&&(C=f.labels.minWidth),!g.isYAxisHidden(y)&&f.labels.show&&k.result.length){var T=a.globals.yLabelFormatters[y],F=k.result.reduce(function(N,E){var H,W;return(null===(H=String(T(N,w)))||void 0===H?void 0:H.length)>(null===(W=String(T(E,w)))||void 0===W?void 0:W.length)?N:E},k.niceMin===Number.MIN_VALUE?0:k.niceMin),O=F=T(F,w);if(void 0!==F&&0!==F.length||(F=k.niceMax),a.globals.isBarHorizontal){d=0;var j=a.globals.labels.slice();F=ht.getLargestStringFromArr(j),F=T(F,{seriesIndex:y,dataPointIndex:-1,w:a}),O=s.dCtx.dimHelpers.getLargestStringFromMultiArr(F,j)}var Y=new kt(s.dCtx.ctx),G="rotate(".concat(f.labels.rotate," 0 0)"),U=Y.getTextRects(F,f.labels.style.fontSize,f.labels.style.fontFamily,G,!1),S=U;F!==O&&(S=Y.getTextRects(O,f.labels.style.fontSize,f.labels.style.fontFamily,G,!1)),h.push({width:(C>S.width||C>U.width?C:S.width>U.width?S.width:U.width)+d,height:S.height>U.height?S.height:U.height})}else h.push({width:0,height:0})}),h}},{key:"getyAxisTitleCoords",value:function(){var s=this,h=[];return this.w.config.yaxis.map(function(d,g){if(d.show&&void 0!==d.title.text){var f=new kt(s.dCtx.ctx),y="rotate(".concat(d.title.rotate," 0 0)"),w=f.getTextRects(d.title.text,d.title.style.fontSize,d.title.style.fontFamily,y,!1);h.push({width:w.width,height:w.height})}else h.push({width:0,height:0})}),h}},{key:"getTotalYAxisWidth",value:function(){var s=this.w,a=0,h=0,d=0,g=s.globals.yAxisScale.length>1?10:0,f=new Ht(this.dCtx.ctx),y=function(w,k){var C=s.config.yaxis[k].floating,T=0;w.width>0&&!C?(T=w.width+g,s.globals.ignoreYAxisIndexes.indexOf(k)>-1&&(T=T-w.width-g)):T=C||f.isYAxisHidden(k)?0:5,s.config.yaxis[k].opposite?d+=T:h+=T,a+=T};return s.globals.yLabelsCoords.map(function(w,k){y(w,k)}),s.globals.yTitleCoords.map(function(w,k){y(w,k)}),s.globals.isBarHorizontal&&!s.config.yaxis[0].floating&&(a=s.globals.yLabelsCoords[0].width+s.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=h,this.dCtx.yAxisWidthRight=d,a}}]),R}(),yn=function(){function R(s){xt(this,R),this.w=s.w,this.dCtx=s}return Yt(R,[{key:"gridPadForColumnsInNumericAxis",value:function(s){var a=this.w;if(a.globals.noData||a.globals.allSeriesCollapsed)return 0;var h=function(C){return"bar"===C||"rangeBar"===C||"candlestick"===C||"boxPlot"===C},d=a.config.chart.type,g=0,f=h(d)?a.config.series.length:1;if(a.globals.comboBarCount>0&&(f=a.globals.comboBarCount),a.globals.collapsedSeries.forEach(function(C){h(C.type)&&(f-=1)}),a.config.chart.stacked&&(f=1),(h(d)||a.globals.comboBarCount>0)&&a.globals.isXNumeric&&!a.globals.isBarHorizontal&&f>0){var y,w,k=Math.abs(a.globals.initialMaxX-a.globals.initialMinX);k<=3&&(k=a.globals.dataPoints),y=k/s,a.globals.minXDiff&&a.globals.minXDiff/y>0&&(w=a.globals.minXDiff/y),w>s/2&&(w/=2),(g=w*parseInt(a.config.plotOptions.bar.columnWidth,10)/100)<1&&(g=1),a.globals.barPadForNumericAxis=g}return g}},{key:"gridPadFortitleSubtitle",value:function(){var s=this,a=this.w,h=a.globals,d=this.dCtx.isSparkline||!a.globals.axisCharts?0:10;["title","subtitle"].forEach(function(y){d+=void 0!==a.config[y].text?a.config[y].margin:s.dCtx.isSparkline||!a.globals.axisCharts?0:5}),!a.config.legend.show||"bottom"!==a.config.legend.position||a.config.legend.floating||a.globals.axisCharts||(d+=10);var g=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),f=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");h.gridHeight=h.gridHeight-g.height-f.height-d,h.translateY=h.translateY+g.height+f.height+d}},{key:"setGridXPosForDualYAxis",value:function(s,a){var h=this.w,d=new Ht(this.dCtx.ctx);h.config.yaxis.map(function(g,f){-1!==h.globals.ignoreYAxisIndexes.indexOf(f)||g.floating||d.isYAxisHidden(f)||(g.opposite&&(h.globals.translateX=h.globals.translateX-(a[f].width+s[f].width)-parseInt(h.config.yaxis[f].labels.style.fontSize,10)/1.2-12),h.globals.translateX<2&&(h.globals.translateX=2))})}}]),R}(),li=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new He(this),this.dimYAxis=new je(this),this.dimXAxis=new ie(this),this.dimGrid=new yn(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Yt(R,[{key:"plotCoords",value:function(){var s=this,a=this.w,h=a.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((a.config.markers.discrete.length>0||a.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(g){var f=Ot(g,2);s.gridPad[f[0]]=Math.max(f[1],s.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(a.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(a.config.stroke.width/2,this.gridPad.bottom)),h.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),h.gridHeight=h.gridHeight-this.gridPad.top-this.gridPad.bottom,h.gridWidth=h.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var d=this.dimGrid.gridPadForColumnsInNumericAxis(h.gridWidth);h.gridWidth=h.gridWidth-2*d,h.translateX=h.translateX+this.gridPad.left+this.xPadLeft+(d>0?d+4:0),h.translateY=h.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var s=this,a=this.w,h=a.globals,d=this.dimYAxis.getyAxisLabelsCoords(),g=this.dimYAxis.getyAxisTitleCoords();a.globals.yLabelsCoords=[],a.globals.yTitleCoords=[],a.config.yaxis.map(function(F,O){a.globals.yLabelsCoords.push({width:d[O].width,index:O}),a.globals.yTitleCoords.push({width:g[O].width,index:O})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var f=this.dimXAxis.getxAxisLabelsCoords(),y=this.dimXAxis.getxAxisGroupLabelsCoords(),w=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(f,w,y),h.translateXAxisY=a.globals.rotateXLabels?this.xAxisHeight/8:-4,h.translateXAxisX=a.globals.rotateXLabels&&a.globals.isXNumeric&&a.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,a.globals.isBarHorizontal&&(h.rotateXLabels=!1,h.translateXAxisY=parseInt(a.config.xaxis.labels.style.fontSize,10)/1.5*-1),h.translateXAxisY=h.translateXAxisY+a.config.xaxis.labels.offsetY,h.translateXAxisX=h.translateXAxisX+a.config.xaxis.labels.offsetX;var k=this.yAxisWidth,C=this.xAxisHeight;h.xAxisLabelsHeight=this.xAxisHeight-w.height,h.xAxisGroupLabelsHeight=h.xAxisLabelsHeight-f.height,h.xAxisLabelsWidth=this.xAxisWidth,h.xAxisHeight=this.xAxisHeight;var T=10;("radar"===a.config.chart.type||this.isSparkline)&&(k=0,C=h.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===a.config.chart.type)&&(k=0,C=0,T=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(f);var P=function(){h.translateX=k,h.gridHeight=h.svgHeight-s.lgRect.height-C-(s.isSparkline||"treemap"===a.config.chart.type?0:a.globals.rotateXLabels?10:15),h.gridWidth=h.svgWidth-k};switch("top"===a.config.xaxis.position&&(T=h.xAxisHeight-a.config.xaxis.axisTicks.height-5),a.config.legend.position){case"bottom":h.translateY=T,P();break;case"top":h.translateY=this.lgRect.height+T,P();break;case"left":h.translateY=T,h.translateX=this.lgRect.width+k,h.gridHeight=h.svgHeight-C-12,h.gridWidth=h.svgWidth-this.lgRect.width-k;break;case"right":h.translateY=T,h.translateX=k,h.gridHeight=h.svgHeight-C-12,h.gridWidth=h.svgWidth-this.lgRect.width-k-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(g,d),new Ze(this.ctx).setYAxisXPosition(d,g)}},{key:"setDimensionsForNonAxisCharts",value:function(){var s=this.w,a=s.globals,h=s.config,d=0;s.config.legend.show&&!s.config.legend.floating&&(d=20);var g="pie"===h.chart.type||"polarArea"===h.chart.type||"donut"===h.chart.type?"pie":"radialBar",f=h.plotOptions[g].offsetY,y=h.plotOptions[g].offsetX;if(!h.legend.show||h.legend.floating)return a.gridHeight=a.svgHeight-h.grid.padding.left+h.grid.padding.right,a.gridWidth=a.gridHeight,a.translateY=f,void(a.translateX=y+(a.svgWidth-a.gridWidth)/2);switch(h.legend.position){case"bottom":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=f-10,a.translateX=y+(a.svgWidth-a.gridWidth)/2;break;case"top":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=this.lgRect.height+f+10,a.translateX=y+(a.svgWidth-a.gridWidth)/2;break;case"left":a.gridWidth=a.svgWidth-this.lgRect.width-d,a.gridHeight="auto"!==h.chart.height?a.svgHeight:a.gridWidth,a.translateY=f,a.translateX=y+this.lgRect.width+d;break;case"right":a.gridWidth=a.svgWidth-this.lgRect.width-d-5,a.gridHeight="auto"!==h.chart.height?a.svgHeight:a.gridWidth,a.translateY=f,a.translateX=y+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(s,a,h){var d=this.w;this.xAxisHeight=(h.height+s.height+a.height)*(d.globals.isMultiLineX?1.2:d.globals.LINE_HEIGHT_RATIO)+(d.globals.hasXaxisGroups?2:1)*(d.globals.rotateXLabels?22:10)+(d.globals.rotateXLabels&&"bottom"===d.config.legend.position?10:0),this.xAxisWidth=s.width,this.xAxisHeight-a.height>d.config.xaxis.labels.maxHeight&&(this.xAxisHeight=d.config.xaxis.labels.maxHeight),d.config.xaxis.labels.minHeight&&this.xAxisHeight<d.config.xaxis.labels.minHeight&&(this.xAxisHeight=d.config.xaxis.labels.minHeight),d.config.xaxis.floating&&(this.xAxisHeight=0);var C=0,T=0;d.config.yaxis.forEach(function(P){C+=P.labels.minWidth,T+=P.labels.maxWidth}),this.yAxisWidth<C&&(this.yAxisWidth=C),this.yAxisWidth>T&&(this.yAxisWidth=T)}}]),R}(),Tt=function(){function R(s){xt(this,R),this.w=s.w,this.lgCtx=s}return Yt(R,[{key:"getLegendStyles",value:function(){var s,a,h,d=document.createElement("style");d.setAttribute("type","text/css");var g=(null===(s=this.lgCtx.ctx)||void 0===s||null===(a=s.opts)||void 0===a||null===(h=a.chart)||void 0===h?void 0:h.nonce)||this.w.config.chart.nonce;g&&d.setAttribute("nonce",g);var f=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return d.appendChild(f),d}},{key:"getLegendBBox",value:function(){var s=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:s.height,clww:s.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(s,a){var h=this,d=this.w;if(d.globals.axisCharts||"radialBar"===d.config.chart.type){d.globals.resized=!0;var g=null,f=null;d.globals.risingSeries=[],d.globals.axisCharts?(g=d.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"']")),f=parseInt(g.getAttribute("data:realIndex"),10)):(g=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s+1,"']")),f=parseInt(g.getAttribute("rel"),10)-1),a?[{cs:d.globals.collapsedSeries,csi:d.globals.collapsedSeriesIndices},{cs:d.globals.ancillaryCollapsedSeries,csi:d.globals.ancillaryCollapsedSeriesIndices}].forEach(function(C){h.riseCollapsedSeries(C.cs,C.csi,f)}):this.hideSeries({seriesEl:g,realIndex:f})}else{var y=d.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(s+1,"'] path")),w=d.config.chart.type;if("pie"===w||"polarArea"===w||"donut"===w){var k=d.config.plotOptions.pie.donut.labels;new kt(this.lgCtx.ctx).pathMouseDown(y.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(y.members[0].node,k)}y.fire("click")}}},{key:"hideSeries",value:function(s){var a=s.seriesEl,h=s.realIndex,d=this.w,g=ht.clone(d.config.series);if(d.globals.axisCharts){var f=d.config.yaxis[d.globals.seriesYAxisReverseMap[h]];if(f&&f.show&&f.showAlways)d.globals.ancillaryCollapsedSeriesIndices.indexOf(h)<0&&(d.globals.ancillaryCollapsedSeries.push({index:h,data:g[h].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.globals.ancillaryCollapsedSeriesIndices.push(h));else if(d.globals.collapsedSeriesIndices.indexOf(h)<0){d.globals.collapsedSeries.push({index:h,data:g[h].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.globals.collapsedSeriesIndices.push(h);var y=d.globals.risingSeries.indexOf(h);d.globals.risingSeries.splice(y,1)}}else d.globals.collapsedSeries.push({index:h,data:g[h]}),d.globals.collapsedSeriesIndices.push(h);for(var w=a.childNodes,k=0;k<w.length;k++)w[k].classList.contains("apexcharts-series-markers-wrap")&&(w[k].classList.contains("apexcharts-hide")?w[k].classList.remove("apexcharts-hide"):w[k].classList.add("apexcharts-hide"));d.globals.allSeriesCollapsed=d.globals.collapsedSeries.length===d.config.series.length,g=this._getSeriesBasedOnCollapsedState(g),this.lgCtx.ctx.updateHelpers._updateSeries(g,d.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(s,a,h){var d=this.w,g=ht.clone(d.config.series);if(s.length>0){for(var f=0;f<s.length;f++)s[f].index===h&&(d.globals.axisCharts?(g[h].data=s[f].data.slice(),s.splice(f,1),a.splice(f,1),d.globals.risingSeries.push(h)):(g[h]=s[f].data,s.splice(f,1),a.splice(f,1),d.globals.risingSeries.push(h)));g=this._getSeriesBasedOnCollapsedState(g),this.lgCtx.ctx.updateHelpers._updateSeries(g,d.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(s){var a=this.w;return s.forEach(a.globals.axisCharts?function(h,d){a.globals.collapsedSeriesIndices.indexOf(d)>-1&&(s[d].data=[])}:function(h,d){a.globals.collapsedSeriesIndices.indexOf(d)>-1&&(s[d]=0)}),s}}]),R}(),B=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new Tt(this)}return Yt(R,[{key:"init",value:function(){var s=this.w,a=s.globals,h=s.config;if((h.legend.showForSingleSeries&&1===a.series.length||this.isBarsDistributed||a.series.length>1||!a.axisCharts)&&h.legend.show){for(;a.dom.elLegendWrap.firstChild;)a.dom.elLegendWrap.removeChild(a.dom.elLegendWrap.firstChild);this.drawLegends(),ht.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===h.legend.position||"top"===h.legend.position?this.legendAlignHorizontal():"right"!==h.legend.position&&"left"!==h.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var s=this,a=this.w,h=a.config.legend.fontFamily,d=a.globals.seriesNames,g=a.globals.colors.slice();if("heatmap"===a.config.chart.type){var f=a.config.plotOptions.heatmap.colorScale.ranges;d=f.map(function(bt){return bt.name?bt.name:bt.from+" - "+bt.to}),g=f.map(function(bt){return bt.color})}else this.isBarsDistributed&&(d=a.globals.labels.slice());a.config.legend.customLegendItems.length&&(d=a.config.legend.customLegendItems);for(var y=a.globals.legendFormatter,w=a.config.legend.inverseOrder,k=w?d.length-1:0;w?k>=0:k<=d.length-1;w?k--:k++){var C,T=y(d[k],{seriesIndex:k,w:a}),P=!1,F=!1;if(a.globals.collapsedSeries.length>0)for(var O=0;O<a.globals.collapsedSeries.length;O++)a.globals.collapsedSeries[O].index===k&&(P=!0);if(a.globals.ancillaryCollapsedSeriesIndices.length>0)for(var j=0;j<a.globals.ancillaryCollapsedSeriesIndices.length;j++)a.globals.ancillaryCollapsedSeriesIndices[j]===k&&(F=!0);var Y=document.createElement("span");Y.classList.add("apexcharts-legend-marker");var G=a.config.legend.markers.offsetX,U=a.config.legend.markers.offsetY,S=a.config.legend.markers.height,N=a.config.legend.markers.width,E=a.config.legend.markers.strokeWidth,H=a.config.legend.markers.strokeColor,W=a.config.legend.markers.radius,K=Y.style;K.background=g[k],K.color=g[k],K.setProperty("background",g[k],"important"),a.config.legend.markers.fillColors&&a.config.legend.markers.fillColors[k]&&(K.background=a.config.legend.markers.fillColors[k]),void 0!==a.globals.seriesColors[k]&&(K.background=a.globals.seriesColors[k],K.color=a.globals.seriesColors[k]),K.height=Array.isArray(S)?parseFloat(S[k])+"px":parseFloat(S)+"px",K.width=Array.isArray(N)?parseFloat(N[k])+"px":parseFloat(N)+"px",K.left=(Array.isArray(G)?parseFloat(G[k]):parseFloat(G))+"px",K.top=(Array.isArray(U)?parseFloat(U[k]):parseFloat(U))+"px",K.borderWidth=Array.isArray(E)?E[k]:E,K.borderColor=Array.isArray(H)?H[k]:H,K.borderRadius=Array.isArray(W)?parseFloat(W[k])+"px":parseFloat(W)+"px",a.config.legend.markers.customHTML&&(Array.isArray(a.config.legend.markers.customHTML)?a.config.legend.markers.customHTML[k]&&(Y.innerHTML=a.config.legend.markers.customHTML[k]()):Y.innerHTML=a.config.legend.markers.customHTML()),kt.setAttrs(Y,{rel:k+1,"data:collapsed":P||F}),(P||F)&&Y.classList.add("apexcharts-inactive-legend");var tt=document.createElement("div"),et=document.createElement("span");et.classList.add("apexcharts-legend-text"),et.innerHTML=Array.isArray(T)?T.join(" "):T;var gt=a.config.legend.labels.useSeriesColors?a.globals.colors[k]:Array.isArray(a.config.legend.labels.colors)?null===(C=a.config.legend.labels.colors)||void 0===C?void 0:C[k]:a.config.legend.labels.colors;gt||(gt=a.config.chart.foreColor),et.style.color=gt,et.style.fontSize=parseFloat(a.config.legend.fontSize)+"px",et.style.fontWeight=a.config.legend.fontWeight,et.style.fontFamily=h||a.config.chart.fontFamily,kt.setAttrs(et,{rel:k+1,i:k,"data:default-text":encodeURIComponent(T),"data:collapsed":P||F}),tt.appendChild(Y),tt.appendChild(et);var St=new it(this.ctx);a.config.legend.showForZeroSeries||0===St.getSeriesTotalByIndex(k)&&St.seriesHaveSameValues(k)&&!St.isSeriesNull(k)&&-1===a.globals.collapsedSeriesIndices.indexOf(k)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(k)&&tt.classList.add("apexcharts-hidden-zero-series"),a.config.legend.showForNullSeries||St.isSeriesNull(k)&&-1===a.globals.collapsedSeriesIndices.indexOf(k)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(k)&&tt.classList.add("apexcharts-hidden-null-series"),a.globals.dom.elLegendWrap.appendChild(tt),a.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(a.config.legend.horizontalAlign)),a.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+a.config.legend.position),tt.classList.add("apexcharts-legend-series"),tt.style.margin="".concat(a.config.legend.itemMargin.vertical,"px ").concat(a.config.legend.itemMargin.horizontal,"px"),a.globals.dom.elLegendWrap.style.width=a.config.legend.width?a.config.legend.width+"px":"",a.globals.dom.elLegendWrap.style.height=a.config.legend.height?a.config.legend.height+"px":"",kt.setAttrs(tt,{rel:k+1,seriesName:ht.escapeString(d[k]),"data:collapsed":P||F}),(P||F)&&tt.classList.add("apexcharts-inactive-legend"),a.config.legend.onItemClick.toggleDataSeries||tt.classList.add("apexcharts-no-click")}a.globals.dom.elWrap.addEventListener("click",s.onLegendClick,!0),a.config.legend.onItemHover.highlightDataSeries&&0===a.config.legend.customLegendItems.length&&(a.globals.dom.elWrap.addEventListener("mousemove",s.onLegendHovered,!0),a.globals.dom.elWrap.addEventListener("mouseout",s.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(s,a){var h=this.w,d=h.globals.dom.elLegendWrap,g=d.getBoundingClientRect(),f=0,y=0;if("bottom"===h.config.legend.position)y+=h.globals.svgHeight-g.height/2;else if("top"===h.config.legend.position){var w=new li(this.ctx),k=w.dimHelpers.getTitleSubtitleCoords("title").height,C=w.dimHelpers.getTitleSubtitleCoords("subtitle").height;y=y+(k>0?k-10:0)+(C>0?C-10:0)}d.style.position="absolute",y=y+a+h.config.legend.offsetY,d.style.left=(f=f+s+h.config.legend.offsetX)+"px",d.style.top=y+"px","bottom"===h.config.legend.position?(d.style.top="auto",d.style.bottom=5-h.config.legend.offsetY+"px"):"right"===h.config.legend.position&&(d.style.left="auto",d.style.right=25+h.config.legend.offsetX+"px"),["width","height"].forEach(function(T){d.style[T]&&(d.style[T]=parseInt(h.config.legend[T],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var s=this.w;s.globals.dom.elLegendWrap.style.right=0;var a=this.legendHelpers.getLegendBBox(),h=new li(this.ctx),d=h.dimHelpers.getTitleSubtitleCoords("title"),g=h.dimHelpers.getTitleSubtitleCoords("subtitle"),f=0;"bottom"===s.config.legend.position?f=-a.clwh/1.8:"top"===s.config.legend.position&&(f=d.height+g.height+s.config.title.margin+s.config.subtitle.margin-10),this.setLegendWrapXY(20,f)}},{key:"legendAlignVertical",value:function(){var s=this.w,a=this.legendHelpers.getLegendBBox(),h=0;"left"===s.config.legend.position&&(h=20),"right"===s.config.legend.position&&(h=s.globals.svgWidth-a.clww-10),this.setLegendWrapXY(h,20)}},{key:"onLegendHovered",value:function(s){var a=this.w,h=s.target.classList.contains("apexcharts-legend-series")||s.target.classList.contains("apexcharts-legend-text")||s.target.classList.contains("apexcharts-legend-marker");if("heatmap"===a.config.chart.type||this.isBarsDistributed){if(h){var d=parseInt(s.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,d,this.w]),new Ti(this.ctx).highlightRangeInSeries(s,s.target)}}else!s.target.classList.contains("apexcharts-inactive-legend")&&h&&new Ti(this.ctx).toggleSeriesOnHover(s,s.target)}},{key:"onLegendClick",value:function(s){var a=this.w;if(!a.config.legend.customLegendItems.length&&(s.target.classList.contains("apexcharts-legend-series")||s.target.classList.contains("apexcharts-legend-text")||s.target.classList.contains("apexcharts-legend-marker"))){var h=parseInt(s.target.getAttribute("rel"),10)-1,d="true"===s.target.getAttribute("data:collapsed"),g=this.w.config.chart.events.legendClick;"function"==typeof g&&g(this.ctx,h,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,h,this.w]);var f=this.w.config.legend.markers.onClick;"function"==typeof f&&s.target.classList.contains("apexcharts-legend-marker")&&(f(this.ctx,h,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,h,this.w])),"treemap"!==a.config.chart.type&&"heatmap"!==a.config.chart.type&&!this.isBarsDistributed&&a.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(h,d)}}}]),R}(),no=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w;var a=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=a.globals.minX,this.maxX=a.globals.maxX}return Yt(R,[{key:"createToolbar",value:function(){var s=this,a=this.w,h=function(){return document.createElement("div")},d=h();if(d.setAttribute("class","apexcharts-toolbar"),d.style.top=a.config.chart.toolbar.offsetY+"px",d.style.right=3-a.config.chart.toolbar.offsetX+"px",a.globals.dom.elWrap.appendChild(d),this.elZoom=h(),this.elZoomIn=h(),this.elZoomOut=h(),this.elPan=h(),this.elSelection=h(),this.elZoomReset=h(),this.elMenuIcon=h(),this.elMenu=h(),this.elCustomIcons=[],this.t=a.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var g=0;g<this.t.customIcons.length;g++)this.elCustomIcons.push(h());var f=[],y=function(T,P,F){var O=T.toLowerCase();s.t[O]&&a.config.chart.zoom.enabled&&f.push({el:P,icon:"string"==typeof s.t[O]?s.t[O]:F,title:s.localeValues[T],class:"apexcharts-".concat(O,"-icon")})};y("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),y("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var w=function(T){s.t[T]&&a.config.chart[T].enabled&&f.push({el:"zoom"===T?s.elZoom:s.elSelection,icon:"string"==typeof s.t[T]?s.t[T]:"zoom"===T?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:s.localeValues["zoom"===T?"selectionZoom":"selection"],class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(T,"-icon")})};w("zoom"),w("selection"),this.t.pan&&a.config.chart.zoom.enabled&&f.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),y("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&f.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var k=0;k<this.elCustomIcons.length;k++)f.push({el:this.elCustomIcons[k],icon:this.t.customIcons[k].icon,title:this.t.customIcons[k].title,index:this.t.customIcons[k].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[k].class});f.forEach(function(T,P){T.index&&ht.moveIndexInArray(f,P,T.index)});for(var C=0;C<f.length;C++)kt.setAttrs(f[C].el,{class:f[C].class,title:f[C].title}),f[C].el.innerHTML=f[C].icon,d.appendChild(f[C].el);this._createHamburgerMenu(d),a.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):a.globals.panEnabled?this.elPan.classList.add(this.selectedClass):a.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(s){this.elMenuItems=[],s.appendChild(this.elMenu),kt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var a=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],h=0;h<a.length;h++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[h].innerHTML=a[h].title,kt.setAttrs(this.elMenuItems[h],{class:"apexcharts-menu-item ".concat(a[h].name),title:a[h].title}),this.elMenu.appendChild(this.elMenuItems[h])}},{key:"addToolbarEventListeners",value:function(){var s=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(h){h.classList.contains("exportSVG")?h.addEventListener("click",s.handleDownload.bind(s,"svg")):h.classList.contains("exportPNG")?h.addEventListener("click",s.handleDownload.bind(s,"png")):h.classList.contains("exportCSV")&&h.addEventListener("click",s.handleDownload.bind(s,"csv"))});for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons[a].addEventListener("click",this.t.customIcons[a].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(s){this.ctx.getSyncedCharts().forEach(function(a){a.ctx.toolbar.toggleOtherControls();var h="selection"===s?a.ctx.toolbar.elSelection:a.ctx.toolbar.elZoom,d="selection"===s?"selectionEnabled":"zoomEnabled";a.w.globals[d]=!a.w.globals[d],h.classList.contains(a.ctx.toolbar.selectedClass)?h.classList.remove(a.ctx.toolbar.selectedClass):h.classList.add(a.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var s=this.w;this.elZoom||(this.elZoom=s.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=s.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=s.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(s){this.toggleOtherControls(),"pan"===s?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var a="pan"===s?this.elPan:this.elZoom,h="pan"===s?this.elZoom:this.elPan;a&&a.classList.add(this.selectedClass),h&&h.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(s){s.ctx.toolbar.toggleOtherControls(),s.w.globals.panEnabled=!s.w.globals.panEnabled,s.ctx.toolbar.elPan.classList.contains(s.ctx.toolbar.selectedClass)?s.ctx.toolbar.elPan.classList.remove(s.ctx.toolbar.selectedClass):s.ctx.toolbar.elPan.classList.add(s.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var s=this,a=this.w;a.globals.panEnabled=!1,a.globals.zoomEnabled=!1,a.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(h){h&&h.classList.remove(s.selectedClass)})}},{key:"handleZoomIn",value:function(){var s=this.w;s.globals.isRangeBar&&(this.minX=s.globals.minY,this.maxX=s.globals.maxY);var a=(this.minX+this.maxX)/2,g=this._getNewMinXMaxX((this.minX+a)/2,(this.maxX+a)/2);s.globals.disableZoomIn||this.zoomUpdateOptions(g.minX,g.maxX)}},{key:"handleZoomOut",value:function(){var s=this.w;if(s.globals.isRangeBar&&(this.minX=s.globals.minY,this.maxX=s.globals.maxY),!("datetime"===s.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var a=(this.minX+this.maxX)/2,g=this._getNewMinXMaxX(this.minX-(a-this.minX),this.maxX-(a-this.maxX));s.globals.disableZoomOut||this.zoomUpdateOptions(g.minX,g.maxX)}}},{key:"_getNewMinXMaxX",value:function(s,a){var h=this.w.config.xaxis.convertedCatToNumeric;return{minX:h?Math.floor(s):s,maxX:h?Math.floor(a):a}}},{key:"zoomUpdateOptions",value:function(s,a){var h=this.w;if(void 0!==s||void 0!==a){if(!(h.config.xaxis.convertedCatToNumeric&&(s<1&&(s=1,a=h.globals.dataPoints),a-s<2))){var d={min:s,max:a},g=this.getBeforeZoomRange(d);g&&(d=g.xaxis);var f={xaxis:d},y=ht.clone(h.globals.initialConfig.yaxis);h.config.chart.group||(f.yaxis=y),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(f,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(d,y)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(s,a){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:s,yaxis:a})}},{key:"getBeforeZoomRange",value:function(s,a){var h=null;return"function"==typeof this.ev.beforeZoom&&(h=this.ev.beforeZoom(this,{xaxis:s,yaxis:a})),h}},{key:"toggleMenu",value:function(){var s=this;window.setTimeout(function(){s.elMenu.classList.contains("apexcharts-menu-open")?s.elMenu.classList.remove("apexcharts-menu-open"):s.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(s){var a=this.w,h=new pt(this.ctx);switch(s){case"svg":h.exportToSVG(this.ctx);break;case"png":h.exportToPng(this.ctx);break;case"csv":h.exportToCSV({series:a.config.series,columnDelimiter:a.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(s){this.ctx.getSyncedCharts().forEach(function(a){var h=a.w;if(h.globals.lastXAxis.min=h.globals.initialConfig.xaxis.min,h.globals.lastXAxis.max=h.globals.initialConfig.xaxis.max,a.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof h.config.chart.events.beforeResetZoom){var d=h.config.chart.events.beforeResetZoom(a,h);d&&a.updateHelpers.revertDefaultAxisMinMax(d)}"function"==typeof h.config.chart.events.zoomed&&a.ctx.toolbar.zoomCallback({min:h.config.xaxis.min,max:h.config.xaxis.max}),h.globals.zoomed=!1;var g=a.ctx.series.emptyCollapsedSeries(ht.clone(h.globals.initialSeries));a.updateHelpers._updateSeries(g,h.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),R}(),Wl=function(R){Jo(a,no);var s=Ut(a);function a(h){var d;return xt(this,a),(d=s.call(this,h)).ctx=h,d.w=h.w,d.dragged=!1,d.graphics=new kt(d.ctx),d.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],d.clientX=0,d.clientY=0,d.startX=0,d.endX=0,d.dragX=0,d.startY=0,d.endY=0,d.dragY=0,d.moveDirection="none",d}return Yt(a,[{key:"init",value:function(h){var d=this,g=h.xyRatios,f=this.w,y=this;this.xyRatios=g,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=f.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),f.globals.dom.elGraphical.add(this.zoomRect),f.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===f.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:f.globals.gridWidth,maxY:f.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===f.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:f.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=f.globals.dom.baseEl.querySelector("".concat(f.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(w){d.hoverArea.addEventListener(w,y.svgMouseEvents.bind(y,g),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(h,d){var g=this.w,f=this,y=this.ctx.toolbar,w=g.globals.zoomEnabled?g.config.chart.zoom.type:g.config.chart.selection.type,k=g.config.chart.toolbar.autoSelected;if(d.shiftKey?(this.shiftWasPressed=!0,y.enableZoomPanFromToolbar("pan"===k?"zoom":"pan")):this.shiftWasPressed&&(y.enableZoomPanFromToolbar(k),this.shiftWasPressed=!1),d.target){var C,T=d.target.classList;if(d.target.parentNode&&null!==d.target.parentNode&&(C=d.target.parentNode.classList),!(T.contains("apexcharts-selection-rect")||T.contains("apexcharts-legend-marker")||T.contains("apexcharts-legend-text")||C&&C.contains("apexcharts-toolbar"))){if(f.clientX="touchmove"===d.type||"touchstart"===d.type?d.touches[0].clientX:"touchend"===d.type?d.changedTouches[0].clientX:d.clientX,f.clientY="touchmove"===d.type||"touchstart"===d.type?d.touches[0].clientY:"touchend"===d.type?d.changedTouches[0].clientY:d.clientY,("mousedown"===d.type||"touchmove"===d.type)&&1===d.which){var P=f.gridRect.getBoundingClientRect();f.startX=f.clientX-P.left,f.startY=f.clientY-P.top,f.dragged=!1,f.w.globals.mousedown=!0}if("mousemove"===d.type&&1===d.which||"touchmove"===d.type)if(f.dragged=!0,g.globals.panEnabled){if(g.globals.selection=null,f.w.globals.mousedown||"touchmove"===d.type){if("touchmove"===d.type&&!f.w.globals.mousedown){console.warn("me.w.globals.mousedown ",f.w.globals.mousedown);var F=f.gridRect.getBoundingClientRect();f.startX=f.clientX-F.left,f.startY=f.clientY-F.top,f.w.globals.mousedown=!0}f.panDragging({context:f,zoomtype:w,xyRatios:h})}}else{if("touchmove"===d.type){if(!f.w.globals.mousedown){var O=f.gridRect.getBoundingClientRect();f.startX=f.clientX-O.left,f.startY=f.clientY-O.top}f.w.globals.mousedown=!0}(f.w.globals.mousedown&&g.globals.zoomEnabled||f.w.globals.mousedown&&g.globals.selectionEnabled)&&(f.selection=f.selectionDrawing({context:f,zoomtype:w}))}if("mouseup"===d.type||"touchend"===d.type||"mouseleave"===d.type){var j=f.gridRect.getBoundingClientRect();f.w.globals.mousedown&&(f.endX=f.clientX-j.left,f.endY=f.clientY-j.top,f.dragX=Math.abs(f.endX-f.startX),f.dragY=Math.abs(f.endY-f.startY),(g.globals.zoomEnabled||g.globals.selectionEnabled)&&f.selectionDrawn({context:f,zoomtype:w}),g.globals.panEnabled&&g.config.xaxis.convertedCatToNumeric&&f.delayedPanScrolled()),g.globals.zoomEnabled&&f.hideSelectionRect(this.selectionRect),f.dragged=!1,f.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var h=this.w;if(this.selectionRect){var d=this.selectionRect.node.getBoundingClientRect();d.width>0&&d.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:h.globals.gridWidth,maxY:h.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var h=this.w,d=this.xyRatios;if(!h.globals.zoomEnabled)if(null!=h.globals.selection)this.drawSelectionRect(h.globals.selection);else if(void 0!==h.config.chart.selection.xaxis.min&&void 0!==h.config.chart.selection.xaxis.max){var g=(h.config.chart.selection.xaxis.min-h.globals.minX)/d.xRatio,f=h.globals.gridWidth-(h.globals.maxX-h.config.chart.selection.xaxis.max)/d.xRatio-g;h.globals.isRangeBar&&(g=(h.config.chart.selection.xaxis.min-h.globals.yAxisScale[0].niceMin)/d.invertedYRatio,f=(h.config.chart.selection.xaxis.max-h.config.chart.selection.xaxis.min)/d.invertedYRatio),this.drawSelectionRect({x:g,y:0,width:f,height:h.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof h.config.chart.events.selection&&h.config.chart.events.selection(this.ctx,{xaxis:{min:h.config.chart.selection.xaxis.min,max:h.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(h){var d=h.x,g=h.y,f=h.width,y=h.height,w=h.translateX,C=h.translateY,P=this.w,F=this.zoomRect,O=this.selectionRect;if(this.dragged||null!==P.globals.selection){var j={transform:"translate("+(void 0===w?0:w)+", "+(void 0===C?0:C)+")"};P.globals.zoomEnabled&&this.dragged&&(f<0&&(f=1),F.attr({x:d,y:g,width:f,height:y,fill:P.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":P.config.chart.zoom.zoomedArea.fill.opacity,stroke:P.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":P.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":P.config.chart.zoom.zoomedArea.stroke.opacity}),kt.setAttrs(F.node,j)),P.globals.selectionEnabled&&(O.attr({x:d,y:g,width:f>0?f:0,height:y>0?y:0,fill:P.config.chart.selection.fill.color,"fill-opacity":P.config.chart.selection.fill.opacity,stroke:P.config.chart.selection.stroke.color,"stroke-width":P.config.chart.selection.stroke.width,"stroke-dasharray":P.config.chart.selection.stroke.dashArray,"stroke-opacity":P.config.chart.selection.stroke.opacity}),kt.setAttrs(O.node,j))}}},{key:"hideSelectionRect",value:function(h){h&&h.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(h){var j,g=h.zoomtype,f=this.w,y=h.context,w=this.gridRect.getBoundingClientRect(),k=y.startX-1,C=y.startY,T=!1,P=!1,F=y.clientX-w.left-k,O=y.clientY-w.top-C;return Math.abs(F+k)>f.globals.gridWidth?F=f.globals.gridWidth-k:y.clientX-w.left<0&&(F=k),k>y.clientX-w.left&&(T=!0,F=Math.abs(F)),C>y.clientY-w.top&&(P=!0,O=Math.abs(O)),y.drawSelectionRect(j="x"===g?{x:T?k-F:k,y:0,width:F,height:f.globals.gridHeight}:"y"===g?{x:0,y:P?C-O:C,width:f.globals.gridWidth,height:O}:{x:T?k-F:k,y:P?C-O:C,width:F,height:O}),y.selectionDragging("resizing"),j}},{key:"selectionDragging",value:function(h,d){var g=this,f=this.w,y=this.xyRatios,w=this.selectionRect,k=0;"resizing"===h&&(k=30);var C=function(P){return parseFloat(w.node.getAttribute(P))},T={x:C("x"),y:C("y"),width:C("width"),height:C("height")};f.globals.selection=T,"function"==typeof f.config.chart.events.selection&&f.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var P,F,O,j,Y=g.gridRect.getBoundingClientRect(),G=w.node.getBoundingClientRect();f.globals.isRangeBar?(P=f.globals.yAxisScale[0].niceMin+(G.left-Y.left)*y.invertedYRatio,F=f.globals.yAxisScale[0].niceMin+(G.right-Y.left)*y.invertedYRatio,O=0,j=1):(P=f.globals.xAxisScale.niceMin+(G.left-Y.left)*y.xRatio,F=f.globals.xAxisScale.niceMin+(G.right-Y.left)*y.xRatio,O=f.globals.yAxisScale[0].niceMin+(Y.bottom-G.bottom)*y.yRatio[0],j=f.globals.yAxisScale[0].niceMax-(G.top-Y.top)*y.yRatio[0]);var U={xaxis:{min:P,max:F},yaxis:{min:O,max:j}};f.config.chart.events.selection(g.ctx,U),f.config.chart.brush.enabled&&void 0!==f.config.chart.events.brushScrolled&&f.config.chart.events.brushScrolled(g.ctx,U)},k))}},{key:"selectionDrawn",value:function(h){var g=h.zoomtype,f=this.w,y=h.context,w=this.xyRatios,k=this.ctx.toolbar;if(y.startX>y.endX){var C=y.startX;y.startX=y.endX,y.endX=C}if(y.startY>y.endY){var T=y.startY;y.startY=y.endY,y.endY=T}var P=void 0,F=void 0;f.globals.isRangeBar?(P=f.globals.yAxisScale[0].niceMin+y.startX*w.invertedYRatio,F=f.globals.yAxisScale[0].niceMin+y.endX*w.invertedYRatio):(P=f.globals.xAxisScale.niceMin+y.startX*w.xRatio,F=f.globals.xAxisScale.niceMin+y.endX*w.xRatio);var O=[],j=[];if(f.config.yaxis.forEach(function(H,W){O.push(f.globals.yAxisScale[W].niceMax-w.yRatio[W]*y.startY),j.push(f.globals.yAxisScale[W].niceMax-w.yRatio[W]*y.endY)}),y.dragged&&(y.dragX>10||y.dragY>10)&&P!==F)if(f.globals.zoomEnabled){var Y=ht.clone(f.globals.initialConfig.yaxis),G=ht.clone(f.globals.initialConfig.xaxis);if(f.globals.zoomed=!0,f.config.xaxis.convertedCatToNumeric&&(P=Math.floor(P),F=Math.floor(F),P<1&&(P=1,F=f.globals.dataPoints),F-P<2&&(F=P+1)),"xy"!==g&&"x"!==g||(G={min:P,max:F}),"xy"!==g&&"y"!==g||Y.forEach(function(H,W){Y[W].min=j[W],Y[W].max=O[W]}),k){var U=k.getBeforeZoomRange(G,Y);U&&(G=U.xaxis?U.xaxis:G,Y=U.yaxis?U.yaxis:Y)}var S={xaxis:G};f.config.chart.group||(S.yaxis=Y),y.ctx.updateHelpers._updateOptions(S,!1,y.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof f.config.chart.events.zoomed&&k.zoomCallback(G,Y)}else if(f.globals.selectionEnabled){var N,E=null;N={min:P,max:F},"xy"!==g&&"y"!==g||(E=ht.clone(f.config.yaxis)).forEach(function(H,W){E[W].min=j[W],E[W].max=O[W]}),f.globals.selection=y.selection,"function"==typeof f.config.chart.events.selection&&f.config.chart.events.selection(y.ctx,{xaxis:N,yaxis:E})}}},{key:"panDragging",value:function(h){var g=this.w,f=h.context;if(void 0!==g.globals.lastClientPosition.x){var y=g.globals.lastClientPosition.x-f.clientX,w=g.globals.lastClientPosition.y-f.clientY;Math.abs(y)>Math.abs(w)&&y>0?this.moveDirection="left":Math.abs(y)>Math.abs(w)&&y<0?this.moveDirection="right":Math.abs(w)>Math.abs(y)&&w>0?this.moveDirection="up":Math.abs(w)>Math.abs(y)&&w<0&&(this.moveDirection="down")}g.globals.lastClientPosition={x:f.clientX,y:f.clientY},g.config.xaxis.convertedCatToNumeric||f.panScrolled(g.globals.isRangeBar?g.globals.minY:g.globals.minX,g.globals.isRangeBar?g.globals.maxY:g.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var h=this.w,d=h.globals.minX,g=h.globals.maxX,f=(h.globals.maxX-h.globals.minX)/2;"left"===this.moveDirection?(d=h.globals.minX+f,g=h.globals.maxX+f):"right"===this.moveDirection&&(d=h.globals.minX-f,g=h.globals.maxX-f),d=Math.floor(d),g=Math.floor(g),this.updateScrolledChart({xaxis:{min:d,max:g}},d,g)}},{key:"panScrolled",value:function(h,d){var g=this.w,f=this.xyRatios,y=ht.clone(g.globals.initialConfig.yaxis),w=f.xRatio,k=g.globals.minX,C=g.globals.maxX;g.globals.isRangeBar&&(w=f.invertedYRatio,k=g.globals.minY,C=g.globals.maxY),"left"===this.moveDirection?(h=k+g.globals.gridWidth/15*w,d=C+g.globals.gridWidth/15*w):"right"===this.moveDirection&&(h=k-g.globals.gridWidth/15*w,d=C-g.globals.gridWidth/15*w),g.globals.isRangeBar||(h<g.globals.initialMinX||d>g.globals.initialMaxX)&&(h=k,d=C);var T={xaxis:{min:h,max:d}};g.config.chart.group||(T.yaxis=y),this.updateScrolledChart(T,h,d)}},{key:"updateScrolledChart",value:function(h,d,g){var f=this.w;this.ctx.updateHelpers._updateOptions(h,!1,!1),"function"==typeof f.config.chart.events.scrolled&&f.config.chart.events.scrolled(this.ctx,{xaxis:{min:d,max:g}})}}]),a}(),Aa=function(){function R(s){xt(this,R),this.w=s.w,this.ttCtx=s,this.ctx=s.ctx}return Yt(R,[{key:"getNearestValues",value:function(s){var a=s.hoverArea,d=s.clientX,g=s.clientY,f=this.w,y=s.elGrid.getBoundingClientRect(),w=y.width,k=y.height,C=w/(f.globals.dataPoints-1),T=k/f.globals.dataPoints,P=this.hasBars();!f.globals.comboCharts&&!P||f.config.xaxis.convertedCatToNumeric||(C=w/f.globals.dataPoints);var F=d-y.left-f.globals.barPadForNumericAxis,O=g-y.top;F<0||O<0||F>w||O>k?(a.classList.remove("hovering-zoom"),a.classList.remove("hovering-pan")):f.globals.zoomEnabled?(a.classList.remove("hovering-pan"),a.classList.add("hovering-zoom")):f.globals.panEnabled&&(a.classList.remove("hovering-zoom"),a.classList.add("hovering-pan"));var j=Math.round(F/C),Y=Math.floor(O/T);P&&!f.config.xaxis.convertedCatToNumeric&&(j=Math.ceil(F/C),j-=1);var G=null,U=null,S=f.globals.seriesXvalues.map(function(K){return K.filter(function(tt){return ht.isNumber(tt)})}),N=f.globals.seriesYvalues.map(function(K){return K.filter(function(tt){return ht.isNumber(tt)})});if(f.globals.isXNumeric){var E=this.ttCtx.getElGrid().getBoundingClientRect(),H=F*(E.width/w);G=(U=this.closestInMultiArray(H,O*(E.height/k),S,N)).index,j=U.j,null!==G&&(j=(U=this.closestInArray(H,S=f.globals.seriesXvalues[G])).index)}return f.globals.capturedSeriesIndex=null===G?-1:G,(!j||j<1)&&(j=0),f.globals.capturedDataPointIndex=f.globals.isBarHorizontal?Y:j,{capturedSeries:G,j:f.globals.isBarHorizontal?Y:j,hoverX:F,hoverY:O}}},{key:"closestInMultiArray",value:function(s,a,h,d){var f=0,y=null,w=-1;this.w.globals.series.length>1?f=this.getFirstActiveXArray(h):y=0;var C=Math.abs(s-h[f][0]);if(h.forEach(function(F){F.forEach(function(O,j){var Y=Math.abs(s-O);Y<=C&&(C=Y,w=j)})}),-1!==w){var P=Math.abs(a-d[f][w]);y=f,d.forEach(function(F,O){var j=Math.abs(a-F[w]);j<=P&&(P=j,y=O)})}return{index:y,j:w}}},{key:"getFirstActiveXArray",value:function(s){for(var a=this.w,h=0,d=s.map(function(f,y){return f.length>0?y:-1}),g=0;g<d.length;g++)if(-1!==d[g]&&-1===a.globals.collapsedSeriesIndices.indexOf(g)&&-1===a.globals.ancillaryCollapsedSeriesIndices.indexOf(g)){h=d[g];break}return h}},{key:"closestInArray",value:function(s,a){for(var d=null,g=Math.abs(s-a[0]),f=0;f<a.length;f++){var y=Math.abs(s-a[f]);y<g&&(g=y,d=f)}return{index:d}}},{key:"isXoverlap",value:function(s){var a=[],h=this.w.globals.seriesX.filter(function(g){return void 0!==g[0]});if(h.length>0)for(var d=0;d<h.length-1;d++)void 0!==h[d][s]&&void 0!==h[d+1][s]&&h[d][s]!==h[d+1][s]&&a.push("unEqual");return 0===a.length}},{key:"isInitialSeriesSameLen",value:function(){for(var s=!0,a=this.w.globals.initialSeries,h=0;h<a.length-1;h++)if(a[h].data.length!==a[h+1].data.length){s=!1;break}return s}},{key:"getBarsHeight",value:function(s){return Ji(s).reduce(function(a,h){return a+h.getBBox().height},0)}},{key:"getElMarkers",value:function(s){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof s?".apexcharts-series[data\\:realIndex='".concat(s,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var s=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(s=Ji(s)).sort(function(h,d){var g=Number(h.getAttribute("data:realIndex")),f=Number(d.getAttribute("data:realIndex"));return f<g?1:f>g?-1:0});var a=[];return s.forEach(function(h){a.push(h.querySelector(".apexcharts-marker"))}),a}},{key:"hasMarkers",value:function(s){return this.getElMarkers(s).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(s){var a=this.w,h=a.config.markers.hover.size;return void 0===h&&(h=a.globals.markers.size[s]+a.config.markers.hover.sizeOffset),h}},{key:"toggleAllTooltipSeriesGroups",value:function(s){var a=this.w,h=this.ttCtx;0===h.allTooltipSeriesGroups.length&&(h.allTooltipSeriesGroups=a.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var d=h.allTooltipSeriesGroups,g=0;g<d.length;g++)"enable"===s?(d[g].classList.add("apexcharts-active"),d[g].style.display=a.config.tooltip.items.display):(d[g].classList.remove("apexcharts-active"),d[g].style.display="none")}}]),R}(),Ul=function(){function R(s){xt(this,R),this.w=s.w,this.ctx=s.ctx,this.ttCtx=s,this.tooltipUtil=new Aa(s)}return Yt(R,[{key:"drawSeriesTexts",value:function(s){var a=s.shared,h=void 0===a||a,d=s.ttItems,g=s.i,f=void 0===g?0:g,y=s.j,w=void 0===y?null:y,T=s.e,P=this.w;void 0!==P.config.tooltip.custom?this.handleCustomTooltip({i:f,j:w,y1:s.y1,y2:s.y2,w:P}):this.toggleActiveInactiveSeries(h);var F=this.getValuesToPrint({i:f,j:w});this.printLabels({i:f,j:w,values:F,ttItems:d,shared:h,e:T});var O=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=O.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=O.getBoundingClientRect().height}},{key:"printLabels",value:function(s){var a,h=this,d=s.i,g=s.j,f=s.values,y=s.ttItems,w=s.shared,k=s.e,C=this.w,T=[],P=function(E){return C.globals.seriesGoals[E]&&C.globals.seriesGoals[E][g]&&Array.isArray(C.globals.seriesGoals[E][g])},F=f.xVal,O=f.zVal,j=f.xAxisTTVal,Y="",G=C.globals.colors[d];null!==g&&C.config.plotOptions.bar.distributed&&(G=C.globals.colors[g]);for(var U=function(E,H){var W=h.getFormatters(d);Y=h.getSeriesName({fn:W.yLbTitleFormatter,index:d,seriesIndex:d,j:g}),"treemap"===C.config.chart.type&&(Y=W.yLbTitleFormatter(String(C.config.series[d].data[g].x),{series:C.globals.series,seriesIndex:d,dataPointIndex:g,w:C}));var K=C.config.tooltip.inverseOrder?H:E;if(C.globals.axisCharts){var tt=function(St){var bt,Et,Gt,Bt;return C.globals.isRangeData?W.yLbFormatter(null===(bt=C.globals.seriesRangeStart)||void 0===bt||null===(Et=bt[St])||void 0===Et?void 0:Et[g],{series:C.globals.seriesRangeStart,seriesIndex:St,dataPointIndex:g,w:C})+" - "+W.yLbFormatter(null===(Gt=C.globals.seriesRangeEnd)||void 0===Gt||null===(Bt=Gt[St])||void 0===Bt?void 0:Bt[g],{series:C.globals.seriesRangeEnd,seriesIndex:St,dataPointIndex:g,w:C}):W.yLbFormatter(C.globals.series[St][g],{series:C.globals.series,seriesIndex:St,dataPointIndex:g,w:C})};if(w)W=h.getFormatters(K),Y=h.getSeriesName({fn:W.yLbTitleFormatter,index:K,seriesIndex:d,j:g}),G=C.globals.colors[K],a=tt(K),P(K)&&(T=C.globals.seriesGoals[K][g].map(function(St){return{attrs:St,val:W.yLbFormatter(St.value,{seriesIndex:K,dataPointIndex:g,w:C})}}));else{var et,gt=null==k||null===(et=k.target)||void 0===et?void 0:et.getAttribute("fill");gt&&(G=-1!==gt.indexOf("url")?document.querySelector(gt.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):gt),a=tt(d),P(d)&&Array.isArray(C.globals.seriesGoals[d][g])&&(T=C.globals.seriesGoals[d][g].map(function(St){return{attrs:St,val:W.yLbFormatter(St.value,{seriesIndex:d,dataPointIndex:g,w:C})}}))}}null===g&&(a=W.yLbFormatter(C.globals.series[d],v(v({},C),{},{seriesIndex:d,dataPointIndex:d}))),h.DOMHandling({i:d,t:K,j:g,ttItems:y,values:{val:a,goalVals:T,xVal:F,xAxisTTVal:j,zVal:O},seriesName:Y,shared:w,pColor:G})},S=0,N=C.globals.series.length-1;S<C.globals.series.length;S++,N--)U(S,N)}},{key:"getFormatters",value:function(s){var a,h=this.w,d=h.globals.yLabelFormatters[s];return void 0!==h.globals.ttVal?Array.isArray(h.globals.ttVal)?(d=h.globals.ttVal[s]&&h.globals.ttVal[s].formatter,a=h.globals.ttVal[s]&&h.globals.ttVal[s].title&&h.globals.ttVal[s].title.formatter):(d=h.globals.ttVal.formatter,"function"==typeof h.globals.ttVal.title.formatter&&(a=h.globals.ttVal.title.formatter)):a=h.config.tooltip.y.title.formatter,"function"!=typeof d&&(d=h.globals.yLabelFormatters[0]?h.globals.yLabelFormatters[0]:function(g){return g}),"function"!=typeof a&&(a=function(g){return g}),{yLbFormatter:d,yLbTitleFormatter:a}}},{key:"getSeriesName",value:function(s){var d=s.seriesIndex,g=s.j,f=this.w;return(0,s.fn)(String(f.globals.seriesNames[s.index]),{series:f.globals.series,seriesIndex:d,dataPointIndex:g,w:f})}},{key:"DOMHandling",value:function(s){var a=s.t,h=s.j,d=s.ttItems,g=s.values,f=s.seriesName,y=s.shared,w=s.pColor,k=this.w,C=this.ttCtx,T=g.val,P=g.goalVals,F=g.xVal,O=g.xAxisTTVal,j=g.zVal,Y=null;Y=d[a].children,k.config.tooltip.fillSeriesColor&&(d[a].style.backgroundColor=w,Y[0].style.display="none"),C.showTooltipTitle&&(null===C.tooltipTitle&&(C.tooltipTitle=k.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),C.tooltipTitle.innerHTML=F),C.isXAxisTooltipEnabled&&(C.xaxisTooltipText.innerHTML=""!==O?O:F);var G=d[a].querySelector(".apexcharts-tooltip-text-y-label");G&&(G.innerHTML=f||"");var U=d[a].querySelector(".apexcharts-tooltip-text-y-value");U&&(U.innerHTML=void 0!==T?T:""),Y[0]&&Y[0].classList.contains("apexcharts-tooltip-marker")&&(k.config.tooltip.marker.fillColors&&Array.isArray(k.config.tooltip.marker.fillColors)&&(w=k.config.tooltip.marker.fillColors[a]),Y[0].style.backgroundColor=w),k.config.tooltip.marker.show||(Y[0].style.display="none");var S=d[a].querySelector(".apexcharts-tooltip-text-goals-label"),N=d[a].querySelector(".apexcharts-tooltip-text-goals-value");if(P.length&&k.globals.seriesGoals[a]){var E=function(){var K="<div >",tt="<div>";P.forEach(function(et,gt){K+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(et.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(et.attrs.name,"</div>"),tt+="<div>".concat(et.val,"</div>")}),S.innerHTML=K+"</div>",N.innerHTML=tt+"</div>"};y?k.globals.seriesGoals[a][h]&&Array.isArray(k.globals.seriesGoals[a][h])?E():(S.innerHTML="",N.innerHTML=""):E()}else S.innerHTML="",N.innerHTML="";if(null!==j&&(d[a].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=k.config.tooltip.z.title,d[a].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==j?j:""),y&&Y[0]){if(k.config.tooltip.hideEmptySeries){var H=d[a].querySelector(".apexcharts-tooltip-marker"),W=d[a].querySelector(".apexcharts-tooltip-text");0==parseFloat(T)?(H.style.display="none",W.style.display="none"):(H.style.display="block",W.style.display="block")}Y[0].parentNode.style.display=null==T||k.globals.ancillaryCollapsedSeriesIndices.indexOf(a)>-1||k.globals.collapsedSeriesIndices.indexOf(a)>-1?"none":k.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(s){var a=this.w;if(s)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var h=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");h&&(h.classList.add("apexcharts-active"),h.style.display=a.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(s){var a=s.i,h=s.j,d=this.w,g=this.ctx.series.filteredSeriesX(),f="",y="",w=null,k=null,C={series:d.globals.series,seriesIndex:a,dataPointIndex:h,w:d},T=d.globals.ttZFormatter;null===h?k=d.globals.series[a]:d.globals.isXNumeric&&"treemap"!==d.config.chart.type?(f=g[a][h],0===g[a].length&&(f=g[this.tooltipUtil.getFirstActiveXArray(g)][h])):f=void 0!==d.globals.labels[h]?d.globals.labels[h]:"";var P=f;return f=d.globals.isXNumeric&&"datetime"===d.config.xaxis.type?new te(this.ctx).xLabelFormat(d.globals.ttKeyFormatter,P,P,{i:void 0,dateFormatter:new ai(this.ctx).formatDate,w:this.w}):d.globals.isBarHorizontal?d.globals.yLabelFormatters[0](P,C):d.globals.xLabelFormatter(P,C),void 0!==d.config.tooltip.x.formatter&&(f=d.globals.ttKeyFormatter(P,C)),d.globals.seriesZ.length>0&&d.globals.seriesZ[a].length>0&&(w=T(d.globals.seriesZ[a][h],d)),y="function"==typeof d.config.xaxis.tooltip.formatter?d.globals.xaxisTooltipFormatter(P,C):f,{val:Array.isArray(k)?k.join(" "):k,xVal:Array.isArray(f)?f.join(" "):f,xAxisTTVal:Array.isArray(y)?y.join(" "):y,zVal:w}}},{key:"handleCustomTooltip",value:function(s){var a=s.i,h=s.j,d=s.y1,g=s.y2,f=s.w,y=this.ttCtx.getElTooltip(),w=f.config.tooltip.custom;Array.isArray(w)&&w[a]&&(w=w[a]),y.innerHTML=w({ctx:this.ctx,series:f.globals.series,seriesIndex:a,dataPointIndex:h,y1:d,y2:g,w:f})}}]),R}(),Ks=function(){function R(s){xt(this,R),this.ttCtx=s,this.ctx=s.ctx,this.w=s.w}return Yt(R,[{key:"moveXCrosshairs",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=this.ttCtx,d=this.w,g=h.getElXCrosshairs(),f=s-h.xcrosshairsWidth/2,y=d.globals.labels.slice().length;if(null!==a&&(f=d.globals.gridWidth/y*a),null===g||d.globals.isBarHorizontal||(g.setAttribute("x",f),g.setAttribute("x1",f),g.setAttribute("x2",f),g.setAttribute("y2",d.globals.gridHeight),g.classList.add("apexcharts-active")),f<0&&(f=0),f>d.globals.gridWidth&&(f=d.globals.gridWidth),h.isXAxisTooltipEnabled){var w=f;"tickWidth"!==d.config.xaxis.crosshairs.width&&"barWidth"!==d.config.xaxis.crosshairs.width||(w=f+h.xcrosshairsWidth/2),this.moveXAxisTooltip(w)}}},{key:"moveYCrosshairs",value:function(s){var a=this.ttCtx;null!==a.ycrosshairs&&kt.setAttrs(a.ycrosshairs,{y1:s,y2:s}),null!==a.ycrosshairsHidden&&kt.setAttrs(a.ycrosshairsHidden,{y1:s,y2:s})}},{key:"moveXAxisTooltip",value:function(s){var a=this.w,h=this.ttCtx;if(null!==h.xaxisTooltip&&0!==h.xcrosshairsWidth){h.xaxisTooltip.classList.add("apexcharts-active");var g,d=h.xaxisOffY+a.config.xaxis.tooltip.offsetY+a.globals.translateY+1+a.config.xaxis.offsetY;s-=h.xaxisTooltip.getBoundingClientRect().width/2,isNaN(s)||(s+=a.globals.translateX,g=new kt(this.ctx).getTextRects(h.xaxisTooltipText.innerHTML),h.xaxisTooltipText.style.minWidth=g.width+"px",h.xaxisTooltip.style.left=s+"px",h.xaxisTooltip.style.top=d+"px")}}},{key:"moveYAxisTooltip",value:function(s){var a=this.w,h=this.ttCtx;null===h.yaxisTTEls&&(h.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var d=parseInt(h.ycrosshairsHidden.getAttribute("y1"),10),g=a.globals.translateY+d,f=h.yaxisTTEls[s].getBoundingClientRect().height,y=a.globals.translateYAxisX[s]-2;a.config.yaxis[s].opposite&&(y-=26),g-=f/2,-1===a.globals.ignoreYAxisIndexes.indexOf(s)?(h.yaxisTTEls[s].classList.add("apexcharts-active"),h.yaxisTTEls[s].style.top=g+"px",h.yaxisTTEls[s].style.left=y+a.config.yaxis[s].tooltip.offsetX+"px"):h.yaxisTTEls[s].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=this.w,g=this.ttCtx,f=g.getElTooltip(),y=g.tooltipRect,w=null!==h?parseFloat(h):1,k=parseFloat(s)+w+5,C=parseFloat(a)+w/2;if(k>d.globals.gridWidth/2&&(k=k-y.ttWidth-w-10),k>d.globals.gridWidth-y.ttWidth-10&&(k=d.globals.gridWidth-y.ttWidth),k<-20&&(k=-20),d.config.tooltip.followCursor){var T=g.getElGrid().getBoundingClientRect();(k=g.e.clientX-T.left)>d.globals.gridWidth/2&&(k-=g.tooltipRect.ttWidth),(C=g.e.clientY+d.globals.translateY-T.top)>d.globals.gridHeight/2&&(C-=g.tooltipRect.ttHeight)}else d.globals.isBarHorizontal||y.ttHeight/2+C>d.globals.gridHeight&&(C=d.globals.gridHeight-y.ttHeight+d.globals.translateY);isNaN(k)||(f.style.left=(k+=d.globals.translateX)+"px",f.style.top=C+"px")}},{key:"moveMarkers",value:function(s,a){var h=this.w,d=this.ttCtx;if(h.globals.markers.size[s]>0)for(var g=h.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(s,"'] .apexcharts-marker")),f=0;f<g.length;f++)parseInt(g[f].getAttribute("rel"),10)===a&&(d.marker.resetPointsSize(),d.marker.enlargeCurrentPoint(a,g[f]));else d.marker.resetPointsSize(),this.moveDynamicPointOnHover(a,s)}},{key:"moveDynamicPointOnHover",value:function(s,a){var h,d,g=this.w,f=this.ttCtx,y=g.globals.pointsArray,w=f.tooltipUtil.getHoverMarkerSize(a),k=g.config.series[a].type;if(!k||"column"!==k&&"candlestick"!==k&&"boxPlot"!==k){h=y[a][s][0],d=y[a][s][1]?y[a][s][1]:0;var C=g.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"'] .apexcharts-series-markers circle"));C&&d<g.globals.gridHeight&&d>0&&(C.setAttribute("r",w),C.setAttribute("cx",h),C.setAttribute("cy",d)),this.moveXCrosshairs(h),f.fixedTooltip||this.moveTooltip(h,d,w)}}},{key:"moveDynamicPointsOnHover",value:function(s){var a,h=this.ttCtx,d=h.w,g=0,f=0,y=d.globals.pointsArray;a=new Ti(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var w=h.tooltipUtil.getHoverMarkerSize(a);y[a]&&(g=y[a][s][0],f=y[a][s][1]);var k=h.tooltipUtil.getAllMarkers();if(null!==k)for(var C=0;C<d.globals.series.length;C++){var T=y[C];if(d.globals.comboCharts&&void 0===T&&k.splice(C,0,null),T&&T.length){var P=y[C][s][1];k[C].setAttribute("cx",g),"rangeArea"!==d.config.chart.type||d.globals.comboCharts||(P-=Math.abs(P-y[C][s+d.globals.series[C].length][1])/2),null!==P&&!isNaN(P)&&P<d.globals.gridHeight+w&&P+w>0?(k[C]&&k[C].setAttribute("r",w),k[C]&&k[C].setAttribute("cy",P)):k[C]&&k[C].setAttribute("r",0)}}this.moveXCrosshairs(g),h.fixedTooltip||this.moveTooltip(g,f||d.globals.gridHeight,w)}},{key:"moveStickyTooltipOverBars",value:function(s,a){var h=this.w,d=this.ttCtx,g=h.globals.columnSeries?h.globals.columnSeries.length:h.globals.series.length,f=g>=2&&g%2==0?Math.floor(g/2):Math.floor(g/2)+1;h.globals.isBarHorizontal&&(f=new Ti(this.ctx).getActiveConfigSeriesIndex("desc")+1);var y=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(f,"'] path[j='").concat(s,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(s,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(s,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(s,"']"));y||"number"!=typeof a||(y=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(a,"'] path[j='").concat(s,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(s,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(s,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(a,"'] path[j='").concat(s,"']")));var w=y?parseFloat(y.getAttribute("cx")):0,k=y?parseFloat(y.getAttribute("cy")):0,C=y?parseFloat(y.getAttribute("barWidth")):0,T=d.getElGrid().getBoundingClientRect(),P=y&&(y.classList.contains("apexcharts-candlestick-area")||y.classList.contains("apexcharts-boxPlot-area"));h.globals.isXNumeric?(y&&!P&&(w-=g%2!=0?C/2:0),y&&P&&h.globals.comboCharts&&(w-=C/2)):h.globals.isBarHorizontal||(w=d.xAxisTicksPositions[s-1]+d.dataPointsDividedWidth/2,isNaN(w)&&(w=d.xAxisTicksPositions[s]-d.dataPointsDividedWidth/2)),h.globals.isBarHorizontal?k-=d.tooltipRect.ttHeight:h.config.tooltip.followCursor?k=d.e.clientY-T.top-d.tooltipRect.ttHeight/2:k+d.tooltipRect.ttHeight+15>h.globals.gridHeight&&(k=h.globals.gridHeight),h.globals.isBarHorizontal||this.moveXCrosshairs(w),d.fixedTooltip||this.moveTooltip(w,k||h.globals.gridHeight)}}]),R}(),mu=function(){function R(s){xt(this,R),this.w=s.w,this.ttCtx=s,this.ctx=s.ctx,this.tooltipPosition=new Ks(s)}return Yt(R,[{key:"drawDynamicPoints",value:function(){var s=this.w,a=new kt(this.ctx),h=new gn(this.ctx),d=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series");d=Ji(d),s.config.chart.stacked&&d.sort(function(T,P){return parseFloat(T.getAttribute("data:realIndex"))-parseFloat(P.getAttribute("data:realIndex"))});for(var g=0;g<d.length;g++){var f=d[g].querySelector(".apexcharts-series-markers-wrap");if(null!==f){var y=void 0,w="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==s.config.chart.type&&"area"!==s.config.chart.type||s.globals.comboCharts||s.config.tooltip.intersect||(w+=" no-pointer-events");var k=h.getMarkerConfig({cssClass:w,seriesIndex:Number(f.getAttribute("data:realIndex"))});(y=a.drawMarker(0,0,k)).node.setAttribute("default-marker-size",0);var C=document.createElementNS(s.globals.SVGNS,"g");C.classList.add("apexcharts-series-markers"),C.appendChild(y.node),f.appendChild(C)}}}},{key:"enlargeCurrentPoint",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,g=this.w;"bubble"!==g.config.chart.type&&this.newPointSize(s,a);var f=a.getAttribute("cx"),y=a.getAttribute("cy");if(null!==h&&null!==d&&(f=h,y=d),this.tooltipPosition.moveXCrosshairs(f),!this.fixedTooltip){if("radar"===g.config.chart.type){var w=this.ttCtx.getElGrid().getBoundingClientRect();f=this.ttCtx.e.clientX-w.left}this.tooltipPosition.moveTooltip(f,y,g.config.markers.hover.size)}}},{key:"enlargePoints",value:function(s){for(var a=this.w,h=this,d=this.ttCtx,g=s,f=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),y=a.config.markers.hover.size,w=0;w<f.length;w++){var k=f[w].getAttribute("rel"),C=f[w].getAttribute("index");if(void 0===y&&(y=a.globals.markers.size[C]+a.config.markers.hover.sizeOffset),g===parseInt(k,10)){h.newPointSize(g,f[w]);var T=f[w].getAttribute("cx"),P=f[w].getAttribute("cy");h.tooltipPosition.moveXCrosshairs(T),d.fixedTooltip||h.tooltipPosition.moveTooltip(T,P,y)}else h.oldPointSize(f[w])}}},{key:"newPointSize",value:function(s,a){var h=this.w,d=h.config.markers.hover.size,g=0===s?a.parentNode.firstChild:a.parentNode.lastChild;if("0"!==g.getAttribute("default-marker-size")){var f=parseInt(g.getAttribute("index"),10);void 0===d&&(d=h.globals.markers.size[f]+h.config.markers.hover.sizeOffset),d<0&&(d=0),g.setAttribute("r",d)}}},{key:"oldPointSize",value:function(s){var a=parseFloat(s.getAttribute("default-marker-size"));s.setAttribute("r",a)}},{key:"resetPointsSize",value:function(){for(var s=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=0;a<s.length;a++){var h=parseFloat(s[a].getAttribute("default-marker-size"));ht.isNumber(h)&&h>=0?s[a].setAttribute("r",h):s[a].setAttribute("r",0)}}}]),R}(),yu=function(){function R(s){xt(this,R),this.w=s.w;var a=this.w;this.ttCtx=s,this.isVerticalGroupedRangeBar=!a.globals.isBarHorizontal&&"rangeBar"===a.config.chart.type&&a.config.plotOptions.bar.rangeBarGroupRows}return Yt(R,[{key:"getAttr",value:function(s,a){return parseFloat(s.target.getAttribute(a))}},{key:"handleHeatTreeTooltip",value:function(s){var a=s.e,h=s.opt,d=s.x,g=s.y,y=this.ttCtx,w=this.w;if(a.target.classList.contains("apexcharts-".concat(s.type,"-rect"))){var k=this.getAttr(a,"i"),C=this.getAttr(a,"j"),T=this.getAttr(a,"cx"),P=this.getAttr(a,"cy"),F=this.getAttr(a,"width"),O=this.getAttr(a,"height");if(y.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:k,j:C,shared:!1,e:a}),w.globals.capturedSeriesIndex=k,w.globals.capturedDataPointIndex=C,d=T+y.tooltipRect.ttWidth/2+F,g=P+y.tooltipRect.ttHeight/2-O/2,y.tooltipPosition.moveXCrosshairs(T+F/2),d>w.globals.gridWidth/2&&(d=T-y.tooltipRect.ttWidth/2+F),y.w.config.tooltip.followCursor){var j=w.globals.dom.elWrap.getBoundingClientRect();d=w.globals.clientX-j.left-(d>w.globals.gridWidth/2?y.tooltipRect.ttWidth:0),g=w.globals.clientY-j.top-(g>w.globals.gridHeight/2?y.tooltipRect.ttHeight:0)}}return{x:d,y:g}}},{key:"handleMarkerTooltip",value:function(s){var a,h,d=s.e,g=s.opt,f=s.x,y=s.y,w=this.w,k=this.ttCtx;if(d.target.classList.contains("apexcharts-marker")){var C=parseInt(g.paths.getAttribute("cx"),10),T=parseInt(g.paths.getAttribute("cy"),10),P=parseFloat(g.paths.getAttribute("val"));if(h=parseInt(g.paths.getAttribute("rel"),10),a=parseInt(g.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,k.intersect){var F=ht.findAncestor(g.paths,"apexcharts-series");F&&(a=parseInt(F.getAttribute("data:realIndex"),10))}if(k.tooltipLabels.drawSeriesTexts({ttItems:g.ttItems,i:a,j:h,shared:!k.showOnIntersect&&w.config.tooltip.shared,e:d}),"mouseup"===d.type&&k.markerClick(d,a,h),w.globals.capturedSeriesIndex=a,w.globals.capturedDataPointIndex=h,f=C,y=T+w.globals.translateY-1.4*k.tooltipRect.ttHeight,k.w.config.tooltip.followCursor){var O=k.getElGrid().getBoundingClientRect();y=k.e.clientY+w.globals.translateY-O.top}P<0&&(y=T),k.marker.enlargeCurrentPoint(h,g.paths,f,y)}return{x:f,y}}},{key:"handleBarTooltip",value:function(s){var a,h,d=s.e,g=s.opt,f=this.w,y=this.ttCtx,w=y.getElTooltip(),k=0,C=0,T=0,P=this.getBarTooltipXY({e:d,opt:g}),F=P.barHeight,O=P.j;f.globals.capturedSeriesIndex=a=P.i,f.globals.capturedDataPointIndex=O,f.globals.isBarHorizontal&&y.tooltipUtil.hasBars()||!f.config.tooltip.shared?(C=P.x,T=P.y,h=Array.isArray(f.config.stroke.width)?f.config.stroke.width[a]:f.config.stroke.width,k=C):f.globals.comboCharts||f.config.tooltip.shared||(k/=2),isNaN(T)&&(T=f.globals.svgHeight-y.tooltipRect.ttHeight);var j=parseInt(g.paths.parentNode.getAttribute("data:realIndex"),10),Y=f.globals.isMultipleYAxis?f.config.yaxis[j]&&f.config.yaxis[j].reversed:f.config.yaxis[0].reversed;if(C+y.tooltipRect.ttWidth>f.globals.gridWidth&&!Y?C-=y.tooltipRect.ttWidth:C<0&&(C=0),y.w.config.tooltip.followCursor){var G=y.getElGrid().getBoundingClientRect();T=y.e.clientY-G.top}null===y.tooltip&&(y.tooltip=f.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),f.config.tooltip.shared||y.tooltipPosition.moveXCrosshairs(f.globals.comboBarCount>0?k+h/2:k),!y.fixedTooltip&&(!f.config.tooltip.shared||f.globals.isBarHorizontal&&y.tooltipUtil.hasBars())&&(Y&&(C-=y.tooltipRect.ttWidth)<0&&(C=0),!Y||f.globals.isBarHorizontal&&y.tooltipUtil.hasBars()||(T=T+F-2*(f.globals.series[a][O]<0?F:0)),T=T+f.globals.translateY-y.tooltipRect.ttHeight/2,w.style.left=C+f.globals.translateX+"px",w.style.top=T+"px")}},{key:"getBarTooltipXY",value:function(s){var a=this,h=s.e,d=s.opt,g=this.w,f=null,y=this.ttCtx,w=0,k=0,C=0,T=0,P=0,F=h.target.classList;if(F.contains("apexcharts-bar-area")||F.contains("apexcharts-candlestick-area")||F.contains("apexcharts-boxPlot-area")||F.contains("apexcharts-rangebar-area")){var O=h.target,j=O.getBoundingClientRect(),Y=d.elGrid.getBoundingClientRect(),G=j.height;P=j.height;var U=j.width,S=parseInt(O.getAttribute("cx"),10),N=parseInt(O.getAttribute("cy"),10);T=parseFloat(O.getAttribute("barWidth"));var E="touchmove"===h.type?h.touches[0].clientX:h.clientX;f=parseInt(O.getAttribute("j"),10),w=parseInt(O.parentNode.getAttribute("rel"),10)-1;var H=O.getAttribute("data-range-y1"),W=O.getAttribute("data-range-y2");g.globals.comboCharts&&(w=parseInt(O.parentNode.getAttribute("data:realIndex"),10));var K=function(et){return g.globals.isXNumeric?S-U/2:a.isVerticalGroupedRangeBar?S+U/2:S-y.dataPointsDividedWidth+U/2},tt=function(){return N-y.dataPointsDividedHeight+G/2-y.tooltipRect.ttHeight/2};y.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:w,j:f,y1:H?parseInt(H,10):null,y2:W?parseInt(W,10):null,shared:!y.showOnIntersect&&g.config.tooltip.shared,e:h}),g.config.tooltip.followCursor?g.globals.isBarHorizontal?(k=E-Y.left+15,C=tt()):(k=K(),C=h.clientY-Y.top-y.tooltipRect.ttHeight/2-15):g.globals.isBarHorizontal?((k=S)<y.xyRatios.baseLineInvertedY&&(k=S-y.tooltipRect.ttWidth),C=tt()):(k=K(),C=N)}return{x:k,y:C,barHeight:P,barWidth:T,i:w,j:f}}}]),R}(),vu=function(){function R(s){xt(this,R),this.w=s.w,this.ttCtx=s}return Yt(R,[{key:"drawXaxisTooltip",value:function(){var s=this.w,a=this.ttCtx,h="bottom"===s.config.xaxis.position;a.xaxisOffY=h?s.globals.gridHeight+1:-s.globals.xAxisHeight-s.config.xaxis.axisTicks.height+3;var d=h?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",g=s.globals.dom.elWrap;a.isXAxisTooltipEnabled&&null===s.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(a.xaxisTooltip=document.createElement("div"),a.xaxisTooltip.setAttribute("class",d+" apexcharts-theme-"+s.config.tooltip.theme),g.appendChild(a.xaxisTooltip),a.xaxisTooltipText=document.createElement("div"),a.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),a.xaxisTooltipText.style.fontFamily=s.config.xaxis.tooltip.style.fontFamily||s.config.chart.fontFamily,a.xaxisTooltipText.style.fontSize=s.config.xaxis.tooltip.style.fontSize,a.xaxisTooltip.appendChild(a.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var s=this.w,a=this.ttCtx,h=0;h<s.config.yaxis.length;h++){var d=s.config.yaxis[h].opposite||s.config.yaxis[h].crosshairs.opposite;a.yaxisOffX=d?s.globals.gridWidth+1:1;var g="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,d?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),f=s.globals.dom.elWrap;null===s.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))&&(a.yaxisTooltip=document.createElement("div"),a.yaxisTooltip.setAttribute("class",g+" apexcharts-theme-"+s.config.tooltip.theme),f.appendChild(a.yaxisTooltip),0===h&&(a.yaxisTooltipText=[]),a.yaxisTooltipText[h]=document.createElement("div"),a.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),a.yaxisTooltip.appendChild(a.yaxisTooltipText[h]))}}},{key:"setXCrosshairWidth",value:function(){var s=this.w,a=this.ttCtx,h=a.getElXCrosshairs();if(a.xcrosshairsWidth=parseInt(s.config.xaxis.crosshairs.width,10),s.globals.comboCharts){var d=s.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==d&&"barWidth"===s.config.xaxis.crosshairs.width){var g=parseFloat(d.getAttribute("barWidth"));a.xcrosshairsWidth=g}else"tickWidth"===s.config.xaxis.crosshairs.width&&(a.xcrosshairsWidth=s.globals.gridWidth/s.globals.labels.length)}else if("tickWidth"===s.config.xaxis.crosshairs.width)a.xcrosshairsWidth=s.globals.gridWidth/s.globals.labels.length;else if("barWidth"===s.config.xaxis.crosshairs.width){var w=s.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==w){var k=parseFloat(w.getAttribute("barWidth"));a.xcrosshairsWidth=k}else a.xcrosshairsWidth=1}s.globals.isBarHorizontal&&(a.xcrosshairsWidth=0),null!==h&&a.xcrosshairsWidth>0&&h.setAttribute("width",a.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var s=this.w,a=this.ttCtx;a.ycrosshairs=s.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),a.ycrosshairsHidden=s.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(s,a,h){var d=this.ttCtx,g=this.w,f=g.globals.yLabelFormatters[s];if(d.yaxisTooltips[s]){var y=d.getElGrid().getBoundingClientRect(),C=g.globals.minYArr[s]+(g.globals.maxYArr[s]-g.globals.minYArr[s]-(a-y.top)*h.yRatio[s]);d.tooltipPosition.moveYCrosshairs(a-y.top),d.yaxisTooltipText[s].innerHTML=f(C),d.tooltipPosition.moveYAxisTooltip(s)}}}]),R}(),pi=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w;var a=this.w;this.tConfig=a.config.tooltip,this.tooltipUtil=new Aa(this),this.tooltipLabels=new Ul(this),this.tooltipPosition=new Ks(this),this.marker=new mu(this),this.intersect=new yu(this),this.axesTooltip=new vu(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!a.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Yt(R,[{key:"getElTooltip",value:function(s){return s||(s=this),s.w.globals.dom.baseEl?s.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(s){var a=this.w;this.xyRatios=s,this.isXAxisTooltipEnabled=a.config.xaxis.tooltip.enabled&&a.globals.axisCharts,this.yaxisTooltips=a.config.yaxis.map(function(f,y){return!!(f.show&&f.tooltip.enabled&&a.globals.axisCharts)}),this.allTooltipSeriesGroups=[],a.globals.axisCharts||(this.showTooltipTitle=!1);var h=document.createElement("div");if(h.classList.add("apexcharts-tooltip"),a.config.tooltip.cssClass&&h.classList.add(a.config.tooltip.cssClass),h.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),a.globals.dom.elWrap.appendChild(h),a.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var d=new Mt(this.ctx);this.xAxisTicksPositions=d.getXAxisTicksPositions()}if(!a.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==a.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==a.config.markers.size&&0!==a.globals.markers.largestSize||this.marker.drawDynamicPoints(this),a.globals.collapsedSeries.length!==a.globals.series.length){this.dataPointsDividedHeight=a.globals.gridHeight/a.globals.dataPoints,this.dataPointsDividedWidth=a.globals.gridWidth/a.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||a.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,h.appendChild(this.tooltipTitle));var g=a.globals.series.length;(a.globals.xyCharts||a.globals.comboCharts)&&this.tConfig.shared&&(g=this.showOnIntersect?1:a.globals.series.length),this.legendLabels=a.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(g),this.addSVGEvents()}}},{key:"createTTElements",value:function(s){for(var a=this,h=this.w,d=[],g=this.getElTooltip(),f=function(w){var k=document.createElement("div");k.classList.add("apexcharts-tooltip-series-group"),k.style.order=h.config.tooltip.inverseOrder?s-w:w+1,a.tConfig.shared&&a.tConfig.enabledOnSeries&&Array.isArray(a.tConfig.enabledOnSeries)&&a.tConfig.enabledOnSeries.indexOf(w)<0&&k.classList.add("apexcharts-tooltip-series-group-hidden");var C=document.createElement("span");C.classList.add("apexcharts-tooltip-marker"),C.style.backgroundColor=h.globals.colors[w],k.appendChild(C);var T=document.createElement("div");T.classList.add("apexcharts-tooltip-text"),T.style.fontFamily=a.tConfig.style.fontFamily||h.config.chart.fontFamily,T.style.fontSize=a.tConfig.style.fontSize,["y","goals","z"].forEach(function(P){var F=document.createElement("div");F.classList.add("apexcharts-tooltip-".concat(P,"-group"));var O=document.createElement("span");O.classList.add("apexcharts-tooltip-text-".concat(P,"-label")),F.appendChild(O);var j=document.createElement("span");j.classList.add("apexcharts-tooltip-text-".concat(P,"-value")),F.appendChild(j),T.appendChild(F)}),k.appendChild(T),g.appendChild(k),d.push(k)},y=0;y<s;y++)f(y);return d}},{key:"addSVGEvents",value:function(){var s=this.w,a=s.config.chart.type,h=this.getElTooltip(),d=!("bar"!==a&&"candlestick"!==a&&"boxPlot"!==a&&"rangeBar"!==a),g="area"===a||"line"===a||"scatter"===a||"bubble"===a||"radar"===a,f=s.globals.dom.Paper.node,y=this.getElGrid();y&&(this.seriesBound=y.getBoundingClientRect());var w,k=[],C=[],T={hoverArea:f,elGrid:y,tooltipEl:h,tooltipY:k,tooltipX:C,ttItems:this.ttItems};if(s.globals.axisCharts&&(g?w=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):d?w=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==a&&"treemap"!==a||(w=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),w&&w.length))for(var P=0;P<w.length;P++)k.push(w[P].getAttribute("cy")),C.push(w[P].getAttribute("cx"));if(s.globals.xyCharts&&!this.showOnIntersect||s.globals.comboCharts&&!this.showOnIntersect||d&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([f],T);else if(d&&!s.globals.comboCharts||g&&this.showOnIntersect)this.addDatapointEventsListeners(T);else if(!s.globals.axisCharts||"heatmap"===a||"treemap"===a){var F=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(F,T)}if(this.showOnIntersect){var O=s.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");O.length>0&&this.addPathsEventListeners(O,T),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(T)}}},{key:"drawFixedTooltipRect",value:function(){var s=this.w,a=this.getElTooltip(),h=a.getBoundingClientRect(),d=h.width+10,g=h.height+10,f=this.tConfig.fixed.offsetX,y=this.tConfig.fixed.offsetY,w=this.tConfig.fixed.position.toLowerCase();return w.indexOf("right")>-1&&(f=f+s.globals.svgWidth-d+10),w.indexOf("bottom")>-1&&(y=y+s.globals.svgHeight-g-10),a.style.left=f+"px",a.style.top=y+"px",{x:f,y,ttWidth:d,ttHeight:g}}},{key:"addDatapointEventsListeners",value:function(s){var a=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(a,s)}},{key:"addPathsEventListeners",value:function(s,a){for(var h=this,d=function(f){var y={paths:s[f],tooltipEl:a.tooltipEl,tooltipY:a.tooltipY,tooltipX:a.tooltipX,elGrid:a.elGrid,hoverArea:a.hoverArea,ttItems:a.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(w){return s[f].addEventListener(w,h.onSeriesHover.bind(h,y),{capture:!1,passive:!0})})},g=0;g<s.length;g++)d(g)}},{key:"onSeriesHover",value:function(s,a){var h=this,d=Date.now()-this.lastHoverTime;d>=100?this.seriesHover(s,a):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){h.seriesHover(s,a)},100-d))}},{key:"seriesHover",value:function(s,a){var h=this;this.lastHoverTime=Date.now();var d=[],g=this.w;g.config.chart.group&&(d=this.ctx.getGroupedCharts()),g.globals.axisCharts&&(g.globals.minX===-1/0&&g.globals.maxX===1/0||0===g.globals.dataPoints)||(d.length?d.forEach(function(f){var y=h.getElTooltip(f);f.w.globals.minX===h.w.globals.minX&&f.w.globals.maxX===h.w.globals.maxX&&f.w.globals.tooltip.seriesHoverByContext({chartCtx:f,ttCtx:f.w.globals.tooltip,opt:{paths:s.paths,tooltipEl:y,tooltipY:s.tooltipY,tooltipX:s.tooltipX,elGrid:s.elGrid,hoverArea:s.hoverArea,ttItems:f.w.globals.tooltip.ttItems},e:a})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:s,e:a}))}},{key:"seriesHoverByContext",value:function(s){var a=s.chartCtx,h=s.ttCtx,d=s.opt,g=s.e,f=a.w,y=this.getElTooltip();y&&(h.tooltipRect={x:0,y:0,ttWidth:y.getBoundingClientRect().width,ttHeight:y.getBoundingClientRect().height},h.e=g,h.tooltipUtil.hasBars()&&!f.globals.comboCharts&&!h.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Ti(a).toggleSeriesOnHover(g,g.target.parentNode),h.fixedTooltip&&h.drawFixedTooltipRect(),f.globals.axisCharts?h.axisChartsTooltips({e:g,opt:d,tooltipRect:h.tooltipRect}):h.nonAxisChartsTooltips({e:g,opt:d,tooltipRect:h.tooltipRect}))}},{key:"axisChartsTooltips",value:function(s){var a,h,d=s.e,g=s.opt,f=this.w,y=g.elGrid.getBoundingClientRect(),w="touchmove"===d.type?d.touches[0].clientX:d.clientX,k="touchmove"===d.type?d.touches[0].clientY:d.clientY;if(this.clientY=k,this.clientX=w,f.globals.capturedSeriesIndex=-1,f.globals.capturedDataPointIndex=-1,k<y.top||k>y.top+y.height)this.handleMouseOut(g);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!f.config.tooltip.shared){var C=parseInt(g.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(C)<0)return void this.handleMouseOut(g)}var T=this.getElTooltip(),P=this.getElXCrosshairs(),F=f.globals.xyCharts||"bar"===f.config.chart.type&&!f.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||f.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===d.type||"touchmove"===d.type||"mouseup"===d.type){if(f.globals.collapsedSeries.length+f.globals.ancillaryCollapsedSeries.length===f.globals.series.length)return;null!==P&&P.classList.add("apexcharts-active");var O=this.yaxisTooltips.filter(function(G){return!0===G});if(null!==this.ycrosshairs&&O.length&&this.ycrosshairs.classList.add("apexcharts-active"),F&&!this.showOnIntersect)this.handleStickyTooltip(d,w,k,g);else if("heatmap"===f.config.chart.type||"treemap"===f.config.chart.type){var j=this.intersect.handleHeatTreeTooltip({e:d,opt:g,x:a,y:h,type:f.config.chart.type});h=j.y,T.style.left=(a=j.x)+"px",T.style.top=h+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:d,opt:g}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:d,opt:g,x:a,y:h});if(this.yaxisTooltips.length)for(var Y=0;Y<f.config.yaxis.length;Y++)this.axesTooltip.drawYaxisTooltipText(Y,k,this.xyRatios);g.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==d.type&&"touchend"!==d.type||this.handleMouseOut(g)}}},{key:"nonAxisChartsTooltips",value:function(s){var a=s.e,h=s.opt,d=s.tooltipRect,g=this.w,f=h.paths.getAttribute("rel"),y=this.getElTooltip(),w=g.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===a.type||"touchmove"===a.type){y.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:parseInt(f,10)-1,shared:!1});var C=g.globals.clientY-w.top-d.ttHeight-10;if(y.style.left=g.globals.clientX-w.left-d.ttWidth/2+"px",y.style.top=C+"px",g.config.legend.tooltipHoverFormatter){var T=f-1,P=(0,g.config.legend.tooltipHoverFormatter)(this.legendLabels[T].getAttribute("data:default-text"),{seriesIndex:T,dataPointIndex:T,w:g});this.legendLabels[T].innerHTML=P}}else"mouseout"!==a.type&&"touchend"!==a.type||(y.classList.remove("apexcharts-active"),g.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(F){var O=F.getAttribute("data:default-text");F.innerHTML=decodeURIComponent(O)}))}},{key:"handleStickyTooltip",value:function(s,a,h,d){var g=this.w,f=this.tooltipUtil.getNearestValues({context:this,hoverArea:d.hoverArea,elGrid:d.elGrid,clientX:a,clientY:h}),y=f.j,w=f.capturedSeries;g.globals.collapsedSeriesIndices.includes(w)&&(w=null);var k=d.elGrid.getBoundingClientRect();if(f.hoverX<0||f.hoverX>k.width)this.handleMouseOut(d);else if(null!==w)this.handleStickyCapturedSeries(s,w,d,y);else if(this.tooltipUtil.isXoverlap(y)||g.globals.isBarHorizontal){var C=g.globals.series.findIndex(function(T,P){return!g.globals.collapsedSeriesIndices.includes(P)});this.create(s,this,C,y,d.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(s,a,h,d){var g=this.w;if(this.tConfig.shared||null!==g.globals.series[a][d]){if(void 0!==g.globals.series[a][d])this.tConfig.shared&&this.tooltipUtil.isXoverlap(d)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(s,this,a,d,h.ttItems):this.create(s,this,a,d,h.ttItems,!1);else if(this.tooltipUtil.isXoverlap(d)){var f=g.globals.series.findIndex(function(y,w){return!g.globals.collapsedSeriesIndices.includes(w)});this.create(s,this,f,d,h.ttItems)}}else this.handleMouseOut(h)}},{key:"deactivateHoverFilter",value:function(){for(var s=this.w,a=new kt(this.ctx),h=s.globals.dom.Paper.select(".apexcharts-bar-area"),d=0;d<h.length;d++)a.pathMouseLeave(h[d])}},{key:"handleMouseOut",value:function(s){var a=this.w,h=this.getElXCrosshairs();if(s.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==a.config.chart.type&&this.marker.resetPointsSize(),null!==h&&h.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var d=0;d<this.yaxisTTEls.length;d++)this.yaxisTTEls[d].classList.remove("apexcharts-active")}a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(g){var f=g.getAttribute("data:default-text");g.innerHTML=decodeURIComponent(f)})}},{key:"markerClick",value:function(s,a,h){var d=this.w;"function"==typeof d.config.chart.events.markerClick&&d.config.chart.events.markerClick(s,this.ctx,{seriesIndex:a,dataPointIndex:h,w:d}),this.ctx.events.fireEvent("markerClick",[s,this.ctx,{seriesIndex:a,dataPointIndex:h,w:d}])}},{key:"create",value:function(s,a,h,d,g){var f,y,w,k,C,T,P,F,O,j,Y,G,U,S,N,E,H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,W=this.w,K=a;"mouseup"===s.type&&this.markerClick(s,h,d),null===H&&(H=this.tConfig.shared);var tt=this.tooltipUtil.hasMarkers(h),et=this.tooltipUtil.getElBars();if(W.config.legend.tooltipHoverFormatter){var gt=W.config.legend.tooltipHoverFormatter,St=Array.from(this.legendLabels);St.forEach(function(_e){var Le=_e.getAttribute("data:default-text");_e.innerHTML=decodeURIComponent(Le)});for(var bt=0;bt<St.length;bt++){var Et=St[bt],Gt=parseInt(Et.getAttribute("i"),10),Bt=decodeURIComponent(Et.getAttribute("data:default-text")),he=gt(Bt,{seriesIndex:H?Gt:h,dataPointIndex:d,w:W});if(H)Et.innerHTML=W.globals.collapsedSeriesIndices.indexOf(Gt)<0?he:Bt;else if(Et.innerHTML=Gt===h?he:Bt,h===Gt)break}}var me=v(v({ttItems:g,i:h,j:d},void 0!==(null===(f=W.globals.seriesRange)||void 0===f||null===(y=f[h])||void 0===y||null===(w=y[d])||void 0===w||null===(k=w.y[0])||void 0===k?void 0:k.y1)&&{y1:null===(C=W.globals.seriesRange)||void 0===C||null===(T=C[h])||void 0===T||null===(P=T[d])||void 0===P||null===(F=P.y[0])||void 0===F?void 0:F.y1}),void 0!==(null===(O=W.globals.seriesRange)||void 0===O||null===(j=O[h])||void 0===j||null===(Y=j[d])||void 0===Y||null===(G=Y.y[0])||void 0===G?void 0:G.y2)&&{y2:null===(U=W.globals.seriesRange)||void 0===U||null===(S=U[h])||void 0===S||null===(N=S[d])||void 0===N||null===(E=N.y[0])||void 0===E?void 0:E.y2});if(H){if(K.tooltipLabels.drawSeriesTexts(v(v({},me),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),tt)W.globals.markers.largestSize>0?K.marker.enlargePoints(d):K.tooltipPosition.moveDynamicPointsOnHover(d);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(et),this.barSeriesHeight>0)){var fe=new kt(this.ctx),Be=W.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(d,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(d,h);for(var ye=0;ye<Be.length;ye++)fe.pathMouseEnter(Be[ye])}}else K.tooltipLabels.drawSeriesTexts(v({shared:!1},me)),this.tooltipUtil.hasBars()&&K.tooltipPosition.moveStickyTooltipOverBars(d,h),tt&&K.tooltipPosition.moveMarkers(h,d)}}]),R}(),yi=function(){function R(s){xt(this,R),this.w=s.w,this.barCtx=s,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Yt(R,[{key:"handleBarDataLabels",value:function(s){var a=s.x,h=s.y,d=s.y1,g=s.y2,f=s.i,y=s.j,w=s.realIndex,k=s.groupIndex,C=s.series,T=s.barHeight,P=s.barWidth,F=s.barXPosition,O=s.barYPosition,j=s.visibleSeries,Y=s.renderedPath,G=this.w,U=new kt(this.barCtx.ctx),S=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[w]:this.barCtx.strokeWidth,N=a+parseFloat(P*j),E=h+parseFloat(T*j);G.globals.isXNumeric&&!G.globals.isBarHorizontal&&(N=a+parseFloat(P*(j+1)),E=h+parseFloat(T*(j+1))-S);var H,et,W=null,K=a,tt=h,gt=G.config.dataLabels,St=this.barCtx.barOptions.dataLabels,bt=this.barCtx.barOptions.dataLabels.total;void 0!==O&&this.barCtx.isRangeBar&&(E=O,tt=O),void 0!==F&&this.barCtx.isVerticalGroupedRangeBar&&(N=F,K=F);var Et=gt.offsetX,Gt=gt.offsetY,Bt={width:0,height:0};G.config.dataLabels.enabled&&(Bt=U.getTextRects(G.globals.yLabelFormatters[0](this.barCtx.series[f][y]),parseFloat(gt.style.fontSize)));var me={x:a,y:h,i:f,j:y,realIndex:w,groupIndex:k||-1,renderedPath:Y,bcx:N,bcy:E,barHeight:T,barWidth:P,textRects:Bt,strokeWidth:S,dataLabelsX:K,dataLabelsY:tt,dataLabelsConfig:gt,barDataLabelsConfig:St,barTotalDataLabelsConfig:bt,offX:Et,offY:Gt};return et=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(me):this.calculateColumnsDataLabelsPosition(me),Y.attr({cy:et.bcy,cx:et.bcx,j:y,val:C[f][y],barHeight:T,barWidth:P}),H=this.drawCalculatedDataLabels({x:et.dataLabelsX,y:et.dataLabelsY,val:this.barCtx.isRangeBar?[d,g]:C[f][y],i:w,j:y,barWidth:P,barHeight:T,textRects:Bt,dataLabelsConfig:gt}),G.config.chart.stacked&&bt.enabled&&(W=this.drawTotalDataLabels({x:et.totalDataLabelsX,y:et.totalDataLabelsY,barWidth:P,barHeight:T,realIndex:w,textAnchor:et.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:w,j:y}),dataLabelsConfig:gt,barTotalDataLabelsConfig:bt})),{dataLabels:H,totalDataLabels:W}}},{key:"getStackedTotalDataLabel",value:function(s){var a=s.realIndex,h=s.j,d=this.w,g=this.barCtx.stackedSeriesTotals[h];return this.totalFormatter&&(g=this.totalFormatter(g,v(v({},d),{},{seriesIndex:a,dataPointIndex:h,w:d}))),g}},{key:"calculateColumnsDataLabelsPosition",value:function(s){var a,h,d=this.w,g=s.i,f=s.j,y=s.realIndex,w=s.groupIndex,k=s.y,C=s.bcx,T=s.barWidth,P=s.barHeight,F=s.textRects,O=s.dataLabelsX,j=s.dataLabelsY,Y=s.dataLabelsConfig,G=s.barDataLabelsConfig,U=s.barTotalDataLabelsConfig,S=s.strokeWidth,N=s.offX,E=s.offY;P=Math.abs(P);var H="vertical"===d.config.plotOptions.bar.dataLabels.orientation,W=this.barCtx.barHelpers.getZeroValueEncounters({i:g,j:f}).zeroEncounters;C=C-S/2+(-1!==w?w*T:0),this.barCtx.isVerticalGroupedRangeBar?O+=T/2:(O=d.globals.isXNumeric?C-T/2+N:C-d.globals.gridWidth/d.globals.dataPoints+T/2+N,W>0&&d.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(O-=T*W)),H&&(O=O+F.height/2-S/2-2);var tt=this.barCtx.series[g][f]<0,et=k;switch(this.barCtx.isReversed&&(et=k-P+(tt?2*P:0),k-=P),G.position){case"center":j=H?tt?et-P/2+E:et+P/2-E:tt?et-P/2+F.height/2+E:et+P/2+F.height/2-E;break;case"bottom":j=H?tt?et-P+E:et+P-E:tt?et-P+F.height+S+E:et+P-F.height/2+S-E;break;case"top":j=H?tt?et+E:et-E:tt?et-F.height/2-E:et+F.height+E}if(this.barCtx.lastActiveBarSerieIndex===y&&U.enabled){var gt=new kt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:y,j:f}),Y.fontSize);a=tt?et-gt.height/2-E-U.offsetY+18:et+gt.height+E+U.offsetY-18,h=O+U.offsetX}return d.config.chart.stacked||(j<0?j=0+S:j+F.height/3>d.globals.gridHeight&&(j=d.globals.gridHeight-S)),{bcx:C,bcy:k,dataLabelsX:O,dataLabelsY:j,totalDataLabelsX:h,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(s){var a=this.w,h=s.x,d=s.i,g=s.j,f=s.realIndex,y=s.groupIndex,w=s.bcy,k=s.barHeight,C=s.barWidth,T=s.textRects,P=s.dataLabelsX,F=s.strokeWidth,O=s.dataLabelsConfig,j=s.barDataLabelsConfig,Y=s.barTotalDataLabelsConfig,G=s.offX,U=s.offY,S=a.globals.gridHeight/a.globals.dataPoints;C=Math.abs(C);var N,E,H=(w+=-1!==y?y*k:0)-(this.barCtx.isRangeBar?0:S)+k/2+T.height/2+U-3,W="start",K=this.barCtx.series[d][g]<0,tt=h;switch(this.barCtx.isReversed&&(tt=h+C-(K?2*C:0),h=a.globals.gridWidth-C),j.position){case"center":P=K?tt+C/2-G:Math.max(T.width/2,tt-C/2)+G;break;case"bottom":P=K?tt+C-F-Math.round(T.width/2)-G:tt-C+F+Math.round(T.width/2)+G;break;case"top":P=K?tt-F+Math.round(T.width/2)-G:tt-F-Math.round(T.width/2)+G}if(this.barCtx.lastActiveBarSerieIndex===f&&Y.enabled){var et=new kt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:f,j:g}),O.fontSize);K?(N=tt-F+Math.round(et.width/2)-G-Y.offsetX-15,W="end"):N=tt-F-Math.round(et.width/2)+G+Y.offsetX+15,E=H+Y.offsetY}return a.config.chart.stacked||(P<0?P=P+T.width+F:P+T.width/2>a.globals.gridWidth&&(P=a.globals.gridWidth-T.width-F)),{bcx:h,bcy:w,dataLabelsX:P,dataLabelsY:H,totalDataLabelsX:N,totalDataLabelsY:E,totalDataLabelsAnchor:W}}},{key:"drawCalculatedDataLabels",value:function(s){var a=s.x,h=s.y,d=s.val,g=s.i,f=s.j,y=s.textRects,w=s.barHeight,k=s.barWidth,C=s.dataLabelsConfig,T=this.w,P="rotate(0)";"vertical"===T.config.plotOptions.bar.dataLabels.orientation&&(P="rotate(-90, ".concat(a,", ").concat(h,")"));var F=new ut(this.barCtx.ctx),O=new kt(this.barCtx.ctx),j=C.formatter,Y=null,G=T.globals.collapsedSeriesIndices.indexOf(g)>-1;if(C.enabled&&!G){Y=O.group({class:"apexcharts-data-labels",transform:P});var U="";void 0!==d&&(U=j(d,v(v({},T),{},{seriesIndex:g,dataPointIndex:f,w:T}))),!d&&T.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(U="");var S=T.globals.series[g][f]<0,N=T.config.plotOptions.bar.dataLabels.position;"vertical"===T.config.plotOptions.bar.dataLabels.orientation&&("top"===N&&(C.textAnchor=S?"end":"start"),"center"===N&&(C.textAnchor="middle"),"bottom"===N&&(C.textAnchor=S?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&k<O.getTextRects(U,parseFloat(C.style.fontSize)).width&&(U=""),T.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?y.width/1.6>Math.abs(k)&&(U=""):y.height/1.6>Math.abs(w)&&(U=""));var E=v({},C);this.barCtx.isHorizontal&&d<0&&("start"===C.textAnchor?E.textAnchor="end":"end"===C.textAnchor&&(E.textAnchor="start")),F.plotDataLabelsText({x:a,y:h,text:U,i:g,j:f,parent:Y,dataLabelsConfig:E,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return Y}},{key:"drawTotalDataLabels",value:function(s){var a,h=s.x,d=s.y,g=s.val,f=s.barWidth,y=s.barHeight,w=s.realIndex,k=s.textAnchor,C=s.barTotalDataLabelsConfig,T=this.w,P=new kt(this.barCtx.ctx);return C.enabled&&void 0!==h&&void 0!==d&&this.barCtx.lastActiveBarSerieIndex===w&&(a=P.drawText({x:h-(!T.globals.isBarHorizontal&&T.globals.seriesGroups.length?f/T.globals.seriesGroups.length:0),y:d-(T.globals.isBarHorizontal&&T.globals.seriesGroups.length?y/T.globals.seriesGroups.length:0),foreColor:C.style.color,text:g,textAnchor:k,fontFamily:C.style.fontFamily,fontSize:C.style.fontSize,fontWeight:C.style.fontWeight})),a}}]),R}(),mo=function(){function R(s){xt(this,R),this.w=s.w,this.barCtx=s}return Yt(R,[{key:"initVariables",value:function(s){var a=this.w;this.barCtx.series=s,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var h=0;h<s.length;h++)if(s[h].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=s[h].length),a.globals.isXNumeric)for(var d=0;d<s[h].length;d++)a.globals.seriesX[h][d]>a.globals.minX&&a.globals.seriesX[h][d]<a.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=a.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],a.globals.comboCharts||this.checkZeroSeries({series:s})}},{key:"initialPositions",value:function(){var s,a,h,d,g,f,y,w,k=this.w,C=k.globals.dataPoints;this.barCtx.isRangeBar&&(C=k.globals.labels.length);var T=this.barCtx.seriesLen;if(k.config.plotOptions.bar.rangeBarGroupRows&&(T=1),this.barCtx.isHorizontal)g=(h=k.globals.gridHeight/C)/T,k.globals.isXNumeric&&(g=(h=k.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),g=g*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(g=parseInt(this.barCtx.barOptions.barHeight,10)),w=this.barCtx.baseLineInvertedY+k.globals.padHorizontal+(this.barCtx.isReversed?k.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(w=k.globals.gridWidth/2),a=(h-g*this.barCtx.seriesLen)/2;else{if(d=k.globals.gridWidth/this.barCtx.visibleItems,k.config.xaxis.convertedCatToNumeric&&(d=k.globals.gridWidth/k.globals.dataPoints),f=d/T*parseInt(this.barCtx.barOptions.columnWidth,10)/100,k.globals.isXNumeric){var P=this.barCtx.xRatio;k.globals.minXDiff&&.5!==k.globals.minXDiff&&k.globals.minXDiff/P>0&&(d=k.globals.minXDiff/P),(f=d/T*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(f=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(f=parseInt(this.barCtx.barOptions.columnWidth,10)),y=k.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?k.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),s=k.globals.padHorizontal+(d-f*this.barCtx.seriesLen)/2}return k.globals.barHeight=g,k.globals.barWidth=f,{x:s,y:a,yDivision:h,xDivision:d,barHeight:g,barWidth:f,zeroH:y,zeroW:w}}},{key:"initializeStackedPrevVars",value:function(s){var a=s.w;a.globals.hasSeriesGroups?a.globals.seriesGroups.forEach(function(h){s[h]||(s[h]={}),s[h].prevY=[],s[h].prevX=[],s[h].prevYF=[],s[h].prevXF=[],s[h].prevYVal=[],s[h].prevXVal=[]}):(s.prevY=[],s.prevX=[],s.prevYF=[],s.prevXF=[],s.prevYVal=[],s.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(s){var a=s.w;a.globals.hasSeriesGroups?a.globals.seriesGroups.forEach(function(h){s[h]||(s[h]={}),s[h].xArrj=[],s[h].xArrjF=[],s[h].xArrjVal=[],s[h].yArrj=[],s[h].yArrjF=[],s[h].yArrjVal=[]}):(s.xArrj=[],s.xArrjF=[],s.xArrjVal=[],s.yArrj=[],s.yArrjF=[],s.yArrjVal=[])}},{key:"getPathFillColor",value:function(s,a,h,d){var g,f,y,w,k=this.w,C=new Vn(this.barCtx.ctx),T=null,P=this.barCtx.barOptions.distributed?h:a;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(F){s[a][h]>=F.from&&s[a][h]<=F.to&&(T=F.color)}),k.config.series[a].data[h]&&k.config.series[a].data[h].fillColor&&(T=k.config.series[a].data[h].fillColor),C.fillPath({seriesNumber:this.barCtx.barOptions.distributed?P:d,dataPointIndex:h,color:T,value:s[a][h],fillConfig:null===(g=k.config.series[a].data[h])||void 0===g?void 0:g.fill,fillType:null!==(f=k.config.series[a].data[h])&&void 0!==f&&null!==(y=f.fill)&&void 0!==y&&y.type?null===(w=k.config.series[a].data[h])||void 0===w?void 0:w.fill.type:Array.isArray(k.config.fill.type)?k.config.fill.type[a]:k.config.fill.type})}},{key:"getStrokeWidth",value:function(s,a,h){var d=0,g=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[s][a],g.config.stroke.show&&(this.barCtx.isNullValue||(d=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth)),d}},{key:"shouldApplyRadius",value:function(s){var a=this.w,h=!1;return a.config.plotOptions.bar.borderRadius>0&&(a.config.chart.stacked&&"last"===a.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===s&&(h=!0):h=!0),h}},{key:"barBackground",value:function(s){var a=s.j,h=s.i,d=s.x1,g=s.x2,f=s.y1,y=s.y2,w=s.elSeries,k=this.w,C=new kt(this.barCtx.ctx),T=new Ti(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&T===h){a>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(a%=this.barCtx.barOptions.colors.backgroundBarColors.length);var F=C.drawRect(void 0!==d?d:0,void 0!==f?f:0,void 0!==g?g:k.globals.gridWidth,void 0!==y?y:k.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[a],this.barCtx.barOptions.colors.backgroundBarOpacity);w.add(F),F.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(s){var a,h=s.barWidth,d=s.barXPosition,g=s.y1,f=s.y2,y=s.strokeWidth,w=s.seriesGroup,k=s.realIndex,C=s.i,T=s.j,P=s.w,F=new kt(this.barCtx.ctx);(y=Array.isArray(y)?y[k]:y)||(y=0);var O=h,j=d;null!==(a=P.config.series[k].data[T])&&void 0!==a&&a.columnWidthOffset&&(j=d-P.config.series[k].data[T].columnWidthOffset/2,O=h+P.config.series[k].data[T].columnWidthOffset);var Y=j,G=j+O;f+=.001;var U=F.move(Y,g+=.001),S=F.move(Y,g),N=F.line(G-y,g);if(P.globals.previousPaths.length>0&&(S=this.barCtx.getPreviousPath(k,T,!1)),U=U+F.line(Y,f)+F.line(G-y,f)+F.line(G-y,g)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),S=S+F.line(Y,g)+N+N+N+N+N+F.line(Y,g)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(k)&&(U=F.roundPathCorners(U,P.config.plotOptions.bar.borderRadius)),P.config.chart.stacked){var E=this.barCtx;P.globals.hasSeriesGroups&&w&&(E=this.barCtx[w]),E.yArrj.push(f),E.yArrjF.push(Math.abs(g-f)),E.yArrjVal.push(this.barCtx.series[C][T])}return{pathTo:U,pathFrom:S}}},{key:"getBarpaths",value:function(s){var a,h=s.barYPosition,d=s.barHeight,g=s.x1,f=s.x2,y=s.strokeWidth,w=s.seriesGroup,k=s.realIndex,C=s.i,T=s.j,P=s.w,F=new kt(this.barCtx.ctx);(y=Array.isArray(y)?y[k]:y)||(y=0);var O=h,j=d;null!==(a=P.config.series[k].data[T])&&void 0!==a&&a.barHeightOffset&&(O=h-P.config.series[k].data[T].barHeightOffset/2,j=d+P.config.series[k].data[T].barHeightOffset);var Y=O,G=O+j;f+=.001;var U=F.move(g+=.001,Y),S=F.move(g,Y);P.globals.previousPaths.length>0&&(S=this.barCtx.getPreviousPath(k,T,!1));var N=F.line(g,G-y);if(U=U+F.line(f,Y)+F.line(f,G-y)+N+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),S=S+F.line(g,Y)+N+N+N+N+N+F.line(g,Y)+("around"===P.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(k)&&(U=F.roundPathCorners(U,P.config.plotOptions.bar.borderRadius)),P.config.chart.stacked){var E=this.barCtx;P.globals.hasSeriesGroups&&w&&(E=this.barCtx[w]),E.xArrj.push(f),E.xArrjF.push(Math.abs(g-f)),E.xArrjVal.push(this.barCtx.series[C][T])}return{pathTo:U,pathFrom:S}}},{key:"checkZeroSeries",value:function(s){for(var a=s.series,h=this.w,d=0;d<a.length;d++){for(var g=0,f=0;f<a[h.globals.maxValsInArrayIndex].length;f++)g+=a[d][f];0===g&&this.barCtx.zeroSerieses.push(d)}}},{key:"getXForValue",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:a;return null!=s&&(h=a+s/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?s/this.barCtx.invertedYRatio:0)),h}},{key:"getYForValue",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:a;return null!=s&&(h=a-s/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?s/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),h}},{key:"getGoalValues",value:function(s,a,h,d,g){var f=this,y=this.w,w=[],k=function(P,F){var O;w.push((Hn(O={},s,"x"===s?f.getXForValue(P,a,!1):f.getYForValue(P,h,!1)),Hn(O,"attrs",F),O))};if(y.globals.seriesGoals[d]&&y.globals.seriesGoals[d][g]&&Array.isArray(y.globals.seriesGoals[d][g])&&y.globals.seriesGoals[d][g].forEach(function(P){k(P.value,P)}),this.barCtx.barOptions.isDumbbell&&y.globals.seriesRange.length){var C=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:y.globals.colors,T={strokeHeight:"x"===s?0:y.globals.markers.size[d],strokeWidth:"x"===s?y.globals.markers.size[d]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(C[d])?C[d][0]:C[d]};k(y.globals.seriesRangeStart[d][g],T),k(y.globals.seriesRangeEnd[d][g],v(v({},T),{},{strokeColor:Array.isArray(C[d])?C[d][1]:C[d]}))}return w}},{key:"drawGoalLine",value:function(s){var a=s.barXPosition,h=s.barYPosition,d=s.goalX,g=s.goalY,f=s.barWidth,y=s.barHeight,w=new kt(this.barCtx.ctx),k=w.group({className:"apexcharts-bar-goals-groups"});k.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:k.node}),k.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var C=null;return this.barCtx.isHorizontal?Array.isArray(d)&&d.forEach(function(T){var P=void 0!==T.attrs.strokeHeight?T.attrs.strokeHeight:y/2,F=h+P+y/2;C=w.drawLine(T.x,F-2*P,T.x,F,T.attrs.strokeColor?T.attrs.strokeColor:void 0,T.attrs.strokeDashArray,T.attrs.strokeWidth?T.attrs.strokeWidth:2,T.attrs.strokeLineCap),k.add(C)}):Array.isArray(g)&&g.forEach(function(T){var P=void 0!==T.attrs.strokeWidth?T.attrs.strokeWidth:f/2,F=a+P+f/2;C=w.drawLine(F-2*P,T.y,F,T.y,T.attrs.strokeColor?T.attrs.strokeColor:void 0,T.attrs.strokeDashArray,T.attrs.strokeHeight?T.attrs.strokeHeight:2,T.attrs.strokeLineCap),k.add(C)}),k}},{key:"drawBarShadow",value:function(s){var a=s.prevPaths,h=s.currPaths,d=s.color,g=this.w,f=a.x,y=a.x1,k=h.x,C=h.x1,T=h.barYPosition,P=a.barYPosition+h.barHeight,F=new kt(this.barCtx.ctx),O=new ht,j=F.move(y,P)+F.line(f,P)+F.line(k,T)+F.line(C,T)+F.line(y,P)+("around"===g.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return F.drawPath({d:j,fill:O.shadeColor(.5,ht.rgb2hex(d)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(s){var a=s.i,h=s.j,g=0,f=0;return this.w.globals.seriesPercent.forEach(function(y,w){y[h]&&g++,w<a&&0===y[h]&&f++}),{nonZeroColumns:g,zeroEncounters:f}}}]),R}(),yr=function(){function R(s,a){xt(this,R),this.ctx=s,this.w=s.w;var h=this.w;this.barOptions=h.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=h.config.stroke.width,this.isNullValue=!1,this.isRangeBar=h.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!h.globals.isBarHorizontal&&h.globals.seriesRange.length&&h.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=a,null!==this.xyRatios&&(this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.invertedXRatio=a.invertedXRatio,this.invertedYRatio=a.invertedYRatio,this.baseLineY=a.baseLineY,this.baseLineInvertedY=a.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var d=new Ti(this.ctx);this.lastActiveBarSerieIndex=d.getActiveConfigSeriesIndex("desc",["bar","column"]);var g=d.getBarSeriesIndices(),f=new it(this.ctx);this.stackedSeriesTotals=f.getStackedSeriesTotals(this.w.config.series.map(function(y,w){return-1===g.indexOf(w)?w:-1}).filter(function(y){return-1!==y})),this.barHelpers=new mo(this)}return Yt(R,[{key:"draw",value:function(s,a){var h=this.w,d=new kt(this.ctx),g=new it(this.ctx,h);s=g.getLogSeries(s),this.series=s,this.yRatio=g.getLogYRatios(this.yRatio),this.barHelpers.initVariables(s);var f=d.group({class:"apexcharts-bar-series apexcharts-plot-series"});h.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var y=0,w=0;y<s.length;y++,w++){var k,C,T,P,F=void 0,O=void 0,j=[],Y=[],G=h.globals.comboCharts?a[y]:y,U=d.group({class:"apexcharts-series",rel:y+1,seriesName:ht.escapeString(h.globals.seriesNames[G]),"data:realIndex":G});this.ctx.series.addCollapsedClassToSeries(U,G),s[y].length>0&&(this.visibleI=this.visibleI+1);var S=0,N=0;this.yRatio.length>1&&(this.yaxisIndex=G),this.isReversed=h.config.yaxis[this.yaxisIndex]&&h.config.yaxis[this.yaxisIndex].reversed;var E=this.barHelpers.initialPositions();O=E.y,S=E.barHeight,C=E.yDivision,P=E.zeroW,F=E.x,N=E.barWidth,k=E.xDivision,T=E.zeroH,this.horizontal||Y.push(F+N/2);var H=d.group({class:"apexcharts-datalabels","data:realIndex":G});h.globals.delayedElements.push({el:H.node}),H.node.classList.add("apexcharts-element-hidden");var W=d.group({class:"apexcharts-bar-goals-markers"}),K=d.group({class:"apexcharts-bar-shadows"});h.globals.delayedElements.push({el:K.node}),K.node.classList.add("apexcharts-element-hidden");for(var tt=0;tt<s[y].length;tt++){var et=this.barHelpers.getStrokeWidth(y,tt,G),gt=null,St={indexes:{i:y,j:tt,realIndex:G,bc:w},x:F,y:O,strokeWidth:et,elSeries:U};this.isHorizontal?(gt=this.drawBarPaths(v(v({},St),{},{barHeight:S,zeroW:P,yDivision:C})),N=this.series[y][tt]/this.invertedYRatio):(gt=this.drawColumnPaths(v(v({},St),{},{xDivision:k,barWidth:N,zeroH:T})),S=this.series[y][tt]/this.yRatio[this.yaxisIndex]);var bt=this.barHelpers.getPathFillColor(s,y,tt,G);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&tt>0){var Et=this.barHelpers.drawBarShadow({color:"string"==typeof bt&&-1===bt?.indexOf("url")?bt:ht.hexToRgba(h.globals.colors[y]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:gt});Et&&K.add(Et)}this.pathArr.push(gt);var Gt=this.barHelpers.drawGoalLine({barXPosition:gt.barXPosition,barYPosition:gt.barYPosition,goalX:gt.goalX,goalY:gt.goalY,barHeight:S,barWidth:N});Gt&&W.add(Gt),O=gt.y,F=gt.x,tt>0&&Y.push(F+N/2),j.push(O),this.renderSeries({realIndex:G,pathFill:bt,j:tt,i:y,pathFrom:gt.pathFrom,pathTo:gt.pathTo,strokeWidth:et,elSeries:U,x:F,y:O,series:s,barHeight:gt.barHeight?gt.barHeight:S,barWidth:gt.barWidth?gt.barWidth:N,elDataLabelsWrap:H,elGoalsMarkers:W,elBarShadows:K,visibleSeries:this.visibleI,type:"bar"})}h.globals.seriesXvalues[G]=Y,h.globals.seriesYvalues[G]=j,f.add(U)}return f}},{key:"renderSeries",value:function(s){var a=s.realIndex,h=s.pathFill,d=s.lineFill,g=s.j,f=s.i,y=s.groupIndex,w=s.pathFrom,k=s.pathTo,C=s.strokeWidth,T=s.elSeries,P=s.x,F=s.y,O=s.y1,j=s.y2,Y=s.series,G=s.barHeight,U=s.barWidth,S=s.barXPosition,N=s.barYPosition,E=s.elDataLabelsWrap,H=s.elGoalsMarkers,W=s.elBarShadows,K=s.visibleSeries,tt=s.type,et=this.w,gt=new kt(this.ctx);d||(d=this.barOptions.distributed?et.globals.stroke.colors[g]:et.globals.stroke.colors[a]),et.config.series[f].data[g]&&et.config.series[f].data[g].strokeColor&&(d=et.config.series[f].data[g].strokeColor),this.isNullValue&&(h="none");var bt=gt.renderPaths({i:f,j:g,realIndex:a,pathFrom:w,pathTo:k,stroke:d,strokeWidth:C,strokeLineCap:et.config.stroke.lineCap,fill:h,animationDelay:g/et.config.chart.animations.animateGradually.delay*(et.config.chart.animations.speed/et.globals.dataPoints)/2.4,initialSpeed:et.config.chart.animations.speed,dataChangeSpeed:et.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(tt,"-area")});bt.attr("clip-path","url(#gridRectMask".concat(et.globals.cuid,")"));var Et=et.config.forecastDataPoints;Et.count>0&&g>=et.globals.dataPoints-Et.count&&(bt.node.setAttribute("stroke-dasharray",Et.dashArray),bt.node.setAttribute("stroke-width",Et.strokeWidth),bt.node.setAttribute("fill-opacity",Et.fillOpacity)),void 0!==O&&void 0!==j&&(bt.attr("data-range-y1",O),bt.attr("data-range-y2",j)),new si(this.ctx).setSelectionFilter(bt,a,g),T.add(bt);var Gt=new yi(this).handleBarDataLabels({x:P,y:F,y1:O,y2:j,i:f,j:g,series:Y,realIndex:a,groupIndex:y,barHeight:G,barWidth:U,barXPosition:S,barYPosition:N,renderedPath:bt,visibleSeries:K});return null!==Gt.dataLabels&&E.add(Gt.dataLabels),Gt.totalDataLabels&&E.add(Gt.totalDataLabels),T.add(E),H&&T.add(H),W&&T.add(W),T}},{key:"drawBarPaths",value:function(s){var a,y,h=s.indexes,d=s.barHeight,g=s.strokeWidth,f=s.zeroW,w=s.y,k=s.yDivision,C=s.elSeries,T=this.w,P=h.i,F=h.j;if(T.globals.isXNumeric)a=(w=(T.globals.seriesX[P][F]-T.globals.minX)/this.invertedXRatio-d)+d*this.visibleI;else if(T.config.plotOptions.bar.hideZeroBarsWhenGrouped){var O=0,j=0;T.globals.seriesPercent.forEach(function(G,U){G[F]&&O++,U<P&&0===G[F]&&j++}),O>0&&(d=this.seriesLen*d/O),a=w+d*this.visibleI,a-=d*j}else a=w+d*this.visibleI;this.isFunnel&&(f-=(this.barHelpers.getXForValue(this.series[P][F],f)-f)/2),y=this.barHelpers.getXForValue(this.series[P][F],f);var Y=this.barHelpers.getBarpaths({barYPosition:a,barHeight:d,x1:f,x2:y,strokeWidth:g,series:this.series,realIndex:h.realIndex,i:P,j:F,w:T});return T.globals.isXNumeric||(w+=k),this.barHelpers.barBackground({j:F,i:P,y1:a-d*this.visibleI,y2:d*this.seriesLen,elSeries:C}),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,x1:f,x:y,y:w,goalX:this.barHelpers.getGoalValues("x",f,null,P,F),barYPosition:a,barHeight:d}}},{key:"drawColumnPaths",value:function(s){var a,g,h=s.indexes,d=s.x,f=s.xDivision,y=s.barWidth,w=s.zeroH,k=s.strokeWidth,C=s.elSeries,T=this.w,F=h.i,O=h.j,j=h.bc;if(T.globals.isXNumeric){var Y=this.getBarXForNumericXAxis({x:d,j:O,realIndex:h.realIndex,barWidth:y});d=Y.x,a=Y.barXPosition}else if(T.config.plotOptions.bar.hideZeroBarsWhenGrouped){var G=this.barHelpers.getZeroValueEncounters({i:F,j:O}),U=G.nonZeroColumns;U>0&&(y=this.seriesLen*y/U),a=d+y*this.visibleI,a-=y*G.zeroEncounters}else a=d+y*this.visibleI;g=this.barHelpers.getYForValue(this.series[F][O],w);var N=this.barHelpers.getColumnPaths({barXPosition:a,barWidth:y,y1:w,y2:g,strokeWidth:k,series:this.series,realIndex:h.realIndex,i:F,j:O,w:T});return T.globals.isXNumeric||(d+=f),this.barHelpers.barBackground({bc:j,j:O,i:F,x1:a-k/2-y*this.visibleI,x2:y*this.seriesLen+k/2,elSeries:C}),{pathTo:N.pathTo,pathFrom:N.pathFrom,x:d,y:g,goalY:this.barHelpers.getGoalValues("y",null,w,F,O),barXPosition:a,barWidth:y}}},{key:"getBarXForNumericXAxis",value:function(s){var a=s.x,h=s.barWidth,d=s.realIndex,g=s.j,f=this.w,y=d;return f.globals.seriesX[d].length||(y=f.globals.maxValsInArrayIndex),f.globals.seriesX[y][g]&&(a=(f.globals.seriesX[y][g]-f.globals.minX)/this.xRatio-h*this.seriesLen/2),{barXPosition:a+h*this.visibleI,x:a}}},{key:"getPreviousPath",value:function(s,a){for(var h,d=this.w,g=0;g<d.globals.previousPaths.length;g++){var f=d.globals.previousPaths[g];f.paths&&f.paths.length>0&&parseInt(f.realIndex,10)===parseInt(s,10)&&void 0!==d.globals.previousPaths[g].paths[a]&&(h=d.globals.previousPaths[g].paths[a].d)}return h}}]),R}(),Pa=function(R){Jo(a,yr);var s=Ut(a);function a(){return xt(this,a),s.apply(this,arguments)}return Yt(a,[{key:"draw",value:function(h,d){var g=this,f=this.w;this.graphics=new kt(this.ctx),this.bar=new yr(this.ctx,this.xyRatios);var y=new it(this.ctx,f);h=y.getLogSeries(h),this.yRatio=y.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h),"100%"===f.config.chart.stackType&&(h=f.globals.seriesPercent.slice()),this.series=h,this.barHelpers.initializeStackedPrevVars(this);for(var w=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),k=0,C=0,T=function(O,j){var Y=void 0,G=void 0,U=void 0,S=void 0,N=-1;g.groupCtx=g,f.globals.seriesGroups.forEach(function(Be,ye){Be.indexOf(f.config.series[O].name)>-1&&(N=ye)}),-1!==N&&(g.groupCtx=g[f.globals.seriesGroups[N]]);var E=[],H=[],W=f.globals.comboCharts?d[O]:O;g.yRatio.length>1&&(g.yaxisIndex=W),g.isReversed=f.config.yaxis[g.yaxisIndex]&&f.config.yaxis[g.yaxisIndex].reversed;var K=g.graphics.group({class:"apexcharts-series",seriesName:ht.escapeString(f.globals.seriesNames[W]),rel:O+1,"data:realIndex":W});g.ctx.series.addCollapsedClassToSeries(K,W);var tt=g.graphics.group({class:"apexcharts-datalabels","data:realIndex":W}),et=g.graphics.group({class:"apexcharts-bar-goals-markers"}),gt=0,St=0,bt=g.initialPositions(k,C,Y,G,U,S);C=bt.y,G=bt.yDivision,S=bt.zeroW,k=bt.x,St=bt.barWidth,Y=bt.xDivision,U=bt.zeroH,f.globals.barHeight=gt=bt.barHeight,f.globals.barWidth=St,g.barHelpers.initializeStackedXYVars(g),1===g.groupCtx.prevY.length&&g.groupCtx.prevY[0].every(function(Be){return isNaN(Be)})&&(g.groupCtx.prevY[0]=g.groupCtx.prevY[0].map(function(Be){return U}),g.groupCtx.prevYF[0]=g.groupCtx.prevYF[0].map(function(Be){return 0}));for(var Et=0;Et<f.globals.dataPoints;Et++){var Gt=g.barHelpers.getStrokeWidth(O,Et,W),Bt={indexes:{i:O,j:Et,realIndex:W,bc:j},strokeWidth:Gt,x:k,y:C,elSeries:K,groupIndex:N,seriesGroup:f.globals.seriesGroups[N]},he=null;g.isHorizontal?(he=g.drawStackedBarPaths(v(v({},Bt),{},{zeroW:S,barHeight:gt,yDivision:G})),St=g.series[O][Et]/g.invertedYRatio):(he=g.drawStackedColumnPaths(v(v({},Bt),{},{xDivision:Y,barWidth:St,zeroH:U})),gt=g.series[O][Et]/g.yRatio[g.yaxisIndex]);var me=g.barHelpers.drawGoalLine({barXPosition:he.barXPosition,barYPosition:he.barYPosition,goalX:he.goalX,goalY:he.goalY,barHeight:gt,barWidth:St});me&&et.add(me),C=he.y,E.push(k=he.x),H.push(C);var fe=g.barHelpers.getPathFillColor(h,O,Et,W);K=g.renderSeries({realIndex:W,pathFill:fe,j:Et,i:O,groupIndex:N,pathFrom:he.pathFrom,pathTo:he.pathTo,strokeWidth:Gt,elSeries:K,x:k,y:C,series:h,barHeight:gt,barWidth:St,elDataLabelsWrap:tt,elGoalsMarkers:et,type:"bar",visibleSeries:0})}f.globals.seriesXvalues[W]=E,f.globals.seriesYvalues[W]=H,g.groupCtx.prevY.push(g.groupCtx.yArrj),g.groupCtx.prevYF.push(g.groupCtx.yArrjF),g.groupCtx.prevYVal.push(g.groupCtx.yArrjVal),g.groupCtx.prevX.push(g.groupCtx.xArrj),g.groupCtx.prevXF.push(g.groupCtx.xArrjF),g.groupCtx.prevXVal.push(g.groupCtx.xArrjVal),w.add(K)},P=0,F=0;P<h.length;P++,F++)T(P,F);return w}},{key:"initialPositions",value:function(h,d,g,f,y,w){var k,C,T,P,F=this.w;return this.isHorizontal?(T=(T=f=F.globals.gridHeight/F.globals.dataPoints)*parseInt(F.config.plotOptions.bar.barHeight,10)/100,-1===String(F.config.plotOptions.bar.barHeight).indexOf("%")&&(T=parseInt(F.config.plotOptions.bar.barHeight,10)),w=this.baseLineInvertedY+F.globals.padHorizontal+(this.isReversed?F.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),d=(f-T)/2):(P=g=F.globals.gridWidth/F.globals.dataPoints,P=F.globals.isXNumeric&&F.globals.dataPoints>1?(g=F.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:P*parseInt(F.config.plotOptions.bar.columnWidth,10)/100,-1===String(F.config.plotOptions.bar.columnWidth).indexOf("%")&&(P=parseInt(F.config.plotOptions.bar.columnWidth,10)),y=F.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?F.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),h=F.globals.padHorizontal+(g-P)/2),{x:h,y:d,yDivision:f,xDivision:g,barHeight:null!==(k=F.globals.seriesGroups)&&void 0!==k&&k.length?T/F.globals.seriesGroups.length:T,barWidth:null!==(C=F.globals.seriesGroups)&&void 0!==C&&C.length?P/F.globals.seriesGroups.length:P,zeroH:y,zeroW:w}}},{key:"drawStackedBarPaths",value:function(h){for(var d,k,g=h.indexes,f=h.barHeight,y=h.strokeWidth,w=h.zeroW,C=h.y,T=h.groupIndex,P=h.seriesGroup,F=h.yDivision,O=h.elSeries,j=this.w,Y=C+(-1!==T?T*f:0),G=g.i,U=g.j,S=0,N=0;N<this.groupCtx.prevXF.length;N++)S+=this.groupCtx.prevXF[N][U];var E=G;if(P&&(E=P.indexOf(j.config.series[G].name)),E>0){var H=w;this.groupCtx.prevXVal[E-1][U]<0?H=this.series[G][U]>=0?this.groupCtx.prevX[E-1][U]+S-2*(this.isReversed?S:0):this.groupCtx.prevX[E-1][U]:this.groupCtx.prevXVal[E-1][U]>=0&&(H=this.series[G][U]>=0?this.groupCtx.prevX[E-1][U]:this.groupCtx.prevX[E-1][U]-S+2*(this.isReversed?S:0)),d=H}else d=w;var W=this.barHelpers.getBarpaths({barYPosition:Y,barHeight:f,x1:d,x2:k=null===this.series[G][U]?d:d+this.series[G][U]/this.invertedYRatio-2*(this.isReversed?this.series[G][U]/this.invertedYRatio:0),strokeWidth:y,series:this.series,realIndex:g.realIndex,seriesGroup:P,i:G,j:U,w:j});return this.barHelpers.barBackground({j:U,i:G,y1:Y,y2:f,elSeries:O}),C+=F,{pathTo:W.pathTo,pathFrom:W.pathFrom,goalX:this.barHelpers.getGoalValues("x",w,null,G,U),barYPosition:Y,x:k,y:C}}},{key:"drawStackedColumnPaths",value:function(h){var f,d=h.indexes,g=h.x,y=h.xDivision,w=h.barWidth,k=h.zeroH,C=h.groupIndex,T=h.seriesGroup,P=h.elSeries,F=this.w,O=d.i,j=d.j,Y=d.bc;if(F.globals.isXNumeric){var G=F.globals.seriesX[O][j];G||(G=0),g=(G-F.globals.minX)/this.xRatio-w/2,F.globals.seriesGroups.length&&(g=(G-F.globals.minX)/this.xRatio-w/2*F.globals.seriesGroups.length)}for(var U,S=g+(-1!==C?C*w:0),N=0,E=0;E<this.groupCtx.prevYF.length;E++)N+=isNaN(this.groupCtx.prevYF[E][j])?0:this.groupCtx.prevYF[E][j];var H=O;if(T&&(H=T.indexOf(F.config.series[O].name)),H>0&&!F.globals.isXNumeric||H>0&&F.globals.isXNumeric&&F.globals.seriesX[O-1][j]===F.globals.seriesX[O][j]){var W,K,tt,et=Math.min(this.yRatio.length+1,O+1);if(void 0!==this.groupCtx.prevY[H-1]&&this.groupCtx.prevY[H-1].length)for(var gt=1;gt<et;gt++){var St;if(!isNaN(null===(St=this.groupCtx.prevY[H-gt])||void 0===St?void 0:St[j])){tt=this.groupCtx.prevY[H-gt][j];break}}for(var bt=1;bt<et;bt++){var Et,Gt;if((null===(Et=this.groupCtx.prevYVal[H-bt])||void 0===Et?void 0:Et[j])<0){K=this.series[O][j]>=0?tt-N+2*(this.isReversed?N:0):tt;break}if((null===(Gt=this.groupCtx.prevYVal[H-bt])||void 0===Gt?void 0:Gt[j])>=0){K=this.series[O][j]>=0?tt:tt+N-2*(this.isReversed?N:0);break}}void 0===K&&(K=F.globals.gridHeight),U=null!==(W=this.groupCtx.prevYF[0])&&void 0!==W&&W.every(function(he){return 0===he})&&this.groupCtx.prevYF.slice(1,H).every(function(he){return he.every(function(me){return isNaN(me)})})?k:K}else U=k;var Bt=this.barHelpers.getColumnPaths({barXPosition:S,barWidth:w,y1:U,y2:f=this.series[O][j]?U-this.series[O][j]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[O][j]/this.yRatio[this.yaxisIndex]:0):U,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:T,realIndex:d.realIndex,i:O,j,w:F});return this.barHelpers.barBackground({bc:Y,j,i:O,x1:S,x2:w,elSeries:P}),g+=y,{pathTo:Bt.pathTo,pathFrom:Bt.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,k,O,j),barXPosition:S,x:F.globals.isXNumeric?g-y:g,y:f}}}]),a}(),Pt=function(R){Jo(a,yr);var s=Ut(a);function a(){return xt(this,a),s.apply(this,arguments)}return Yt(a,[{key:"draw",value:function(h,d,g){var f=this,y=this.w,w=new kt(this.ctx),k=y.globals.comboCharts?d:y.config.chart.type,C=new Vn(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=y.config.plotOptions.bar.horizontal;var T=new it(this.ctx,y);h=T.getLogSeries(h),this.series=h,this.yRatio=T.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h);for(var P=w.group({class:"apexcharts-".concat(k,"-series apexcharts-plot-series")}),F=function(j){f.isBoxPlot="boxPlot"===y.config.chart.type||"boxPlot"===y.config.series[j].type;var Y,G,U,S,et,gt,N=void 0,E=void 0,H=[],W=[],K=y.globals.comboCharts?g[j]:j,tt=w.group({class:"apexcharts-series",seriesName:ht.escapeString(y.globals.seriesNames[K]),rel:j+1,"data:realIndex":K});f.ctx.series.addCollapsedClassToSeries(tt,K),h[j].length>0&&(f.visibleI=f.visibleI+1),f.yRatio.length>1&&(f.yaxisIndex=K);var St=f.barHelpers.initialPositions();E=St.y,et=St.barHeight,G=St.yDivision,S=St.zeroW,Y=St.xDivision,U=St.zeroH,W.push((N=St.x)+(gt=St.barWidth)/2);for(var bt=w.group({class:"apexcharts-datalabels","data:realIndex":K}),Et=function(Bt){var he=f.barHelpers.getStrokeWidth(j,Bt,K),me=null,fe={indexes:{i:j,j:Bt,realIndex:K},x:N,y:E,strokeWidth:he,elSeries:tt};me=f.isHorizontal?f.drawHorizontalBoxPaths(v(v({},fe),{},{yDivision:G,barHeight:et,zeroW:S})):f.drawVerticalBoxPaths(v(v({},fe),{},{xDivision:Y,barWidth:gt,zeroH:U})),E=me.y,N=me.x,Bt>0&&W.push(N+gt/2),H.push(E),me.pathTo.forEach(function(Be,ye){var _e=!f.isBoxPlot&&f.candlestickOptions.wick.useFillColor?me.color[ye]:y.globals.stroke.colors[j],Le=C.fillPath({seriesNumber:K,dataPointIndex:Bt,color:me.color[ye],value:h[j][Bt]});f.renderSeries({realIndex:K,pathFill:Le,lineFill:_e,j:Bt,i:j,pathFrom:me.pathFrom,pathTo:Be,strokeWidth:he,elSeries:tt,x:N,y:E,series:h,barHeight:et,barWidth:gt,elDataLabelsWrap:bt,visibleSeries:f.visibleI,type:y.config.chart.type})})},Gt=0;Gt<y.globals.dataPoints;Gt++)Et(Gt);y.globals.seriesXvalues[K]=W,y.globals.seriesYvalues[K]=H,P.add(tt)},O=0;O<h.length;O++)F(O);return P}},{key:"drawVerticalBoxPaths",value:function(h){var d=h.indexes,g=h.x,f=h.xDivision,y=h.barWidth,w=h.zeroH,k=h.strokeWidth,C=this.w,T=new kt(this.ctx),P=d.i,F=d.j,O=!0,j=C.config.plotOptions.candlestick.colors.upward,Y=C.config.plotOptions.candlestick.colors.downward,G="";this.isBoxPlot&&(G=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var U=this.yRatio[this.yaxisIndex],S=d.realIndex,N=this.getOHLCValue(S,F),E=w,H=w;N.o>N.c&&(O=!1);var W=Math.min(N.o,N.c),K=Math.max(N.o,N.c),tt=N.m;C.globals.isXNumeric&&(g=(C.globals.seriesX[S][F]-C.globals.minX)/this.xRatio-y/2);var et=g+y*this.visibleI;null==this.series[P][F]?(W=w,K=w):(W=w-W/U,K=w-K/U,E=w-N.h/U,H=w-N.l/U,tt=w-N.m/U);var gt=T.move(et,w),St=T.move(et+y/2,W);return C.globals.previousPaths.length>0&&(St=this.getPreviousPath(S,F,!0)),gt=this.isBoxPlot?[T.move(et,W)+T.line(et+y/2,W)+T.line(et+y/2,E)+T.line(et+y/4,E)+T.line(et+y-y/4,E)+T.line(et+y/2,E)+T.line(et+y/2,W)+T.line(et+y,W)+T.line(et+y,tt)+T.line(et,tt)+T.line(et,W+k/2),T.move(et,tt)+T.line(et+y,tt)+T.line(et+y,K)+T.line(et+y/2,K)+T.line(et+y/2,H)+T.line(et+y-y/4,H)+T.line(et+y/4,H)+T.line(et+y/2,H)+T.line(et+y/2,K)+T.line(et,K)+T.line(et,tt)+"z"]:[T.move(et,K)+T.line(et+y/2,K)+T.line(et+y/2,E)+T.line(et+y/2,K)+T.line(et+y,K)+T.line(et+y,W)+T.line(et+y/2,W)+T.line(et+y/2,H)+T.line(et+y/2,W)+T.line(et,W)+T.line(et,K-k/2)],St+=T.move(et,W),C.globals.isXNumeric||(g+=f),{pathTo:gt,pathFrom:St,x:g,y:K,barXPosition:et,color:this.isBoxPlot?G:O?[j]:[Y]}}},{key:"drawHorizontalBoxPaths",value:function(h){var d=h.indexes,g=h.y,f=h.yDivision,y=h.barHeight,w=h.zeroW,k=h.strokeWidth,C=this.w,T=new kt(this.ctx),P=d.i,F=d.j,O=this.boxOptions.colors.lower;this.isBoxPlot&&(O=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var j=this.invertedYRatio,Y=d.realIndex,G=this.getOHLCValue(Y,F),U=w,S=w,N=Math.min(G.o,G.c),E=Math.max(G.o,G.c),H=G.m;C.globals.isXNumeric&&(g=(C.globals.seriesX[Y][F]-C.globals.minX)/this.invertedXRatio-y/2);var W=g+y*this.visibleI;null==this.series[P][F]?(N=w,E=w):(N=w+N/j,E=w+E/j,U=w+G.h/j,S=w+G.l/j,H=w+G.m/j);var K=T.move(w,W),tt=T.move(N,W+y/2);return C.globals.previousPaths.length>0&&(tt=this.getPreviousPath(Y,F,!0)),K=[T.move(N,W)+T.line(N,W+y/2)+T.line(U,W+y/2)+T.line(U,W+y/2-y/4)+T.line(U,W+y/2+y/4)+T.line(U,W+y/2)+T.line(N,W+y/2)+T.line(N,W+y)+T.line(H,W+y)+T.line(H,W)+T.line(N+k/2,W),T.move(H,W)+T.line(H,W+y)+T.line(E,W+y)+T.line(E,W+y/2)+T.line(S,W+y/2)+T.line(S,W+y-y/4)+T.line(S,W+y/4)+T.line(S,W+y/2)+T.line(E,W+y/2)+T.line(E,W)+T.line(H,W)+"z"],tt+=T.move(N,W),C.globals.isXNumeric||(g+=f),{pathTo:K,pathFrom:tt,x:E,y:g,barYPosition:W,color:O}}},{key:"getOHLCValue",value:function(h,d){var g=this.w;return{o:this.isBoxPlot?g.globals.seriesCandleH[h][d]:g.globals.seriesCandleO[h][d],h:this.isBoxPlot?g.globals.seriesCandleO[h][d]:g.globals.seriesCandleH[h][d],m:g.globals.seriesCandleM[h][d],l:this.isBoxPlot?g.globals.seriesCandleC[h][d]:g.globals.seriesCandleL[h][d],c:this.isBoxPlot?g.globals.seriesCandleL[h][d]:g.globals.seriesCandleC[h][d]}}}]),a}(),vr=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"checkColorRange",value:function(){var s=this.w,a=!1,h=s.config.plotOptions[s.config.chart.type];return h.colorScale.ranges.length>0&&h.colorScale.ranges.map(function(d,g){d.from<=0&&(a=!0)}),a}},{key:"getShadeColor",value:function(s,a,h,d){var g=this.w,f=1,y=g.config.plotOptions[s].shadeIntensity,w=this.determineColor(s,a,h);g.globals.hasNegs||d?f=g.config.plotOptions[s].reverseNegativeShade?w.percent<0?w.percent/100*(1.25*y):1.25*y*(1-w.percent/100):w.percent<=0?1-(1+w.percent/100)*y:(1-w.percent/100)*y:(f=1-w.percent/100,"treemap"===s&&(f=1.25*y*(1-w.percent/100)));var k=w.color,C=new ht;return g.config.plotOptions[s].enableShades&&(k=ht.hexToRgba(C.shadeColor("dark"===this.w.config.theme.mode?-1*f:f,w.color),g.config.fill.opacity)),{color:k,colorProps:w}}},{key:"determineColor",value:function(s,a,h){var d=this.w,g=d.globals.series[a][h],f=d.config.plotOptions[s],y=f.colorScale.inverse?h:a;f.distributed&&"treemap"===d.config.chart.type&&(y=h);var w=d.globals.colors[y],k=null,C=Math.min.apply(Math,Ji(d.globals.series[a])),T=Math.max.apply(Math,Ji(d.globals.series[a]));f.distributed||"heatmap"!==s||(C=d.globals.minY,T=d.globals.maxY),void 0!==f.colorScale.min&&(C=f.colorScale.min<d.globals.minY?f.colorScale.min:d.globals.minY,T=f.colorScale.max>d.globals.maxY?f.colorScale.max:d.globals.maxY);var P=Math.abs(T)+Math.abs(C),F=100*g/(0===P?P-1e-6:P);return f.colorScale.ranges.length>0&&f.colorScale.ranges.map(function(O,j){if(g>=O.from&&g<=O.to){w=O.color,k=O.foreColor?O.foreColor:null,C=O.from,T=O.to;var Y=Math.abs(T)+Math.abs(C);F=100*g/(0===Y?Y-1e-6:Y)}}),{color:w,foreColor:k,percent:F}}},{key:"calculateDataLabels",value:function(s){var a=s.text,h=s.x,d=s.y,g=s.i,f=s.j,y=s.colorProps,w=s.fontSize,k=this.w.config.dataLabels,C=new kt(this.ctx),T=new ut(this.ctx),P=null;if(k.enabled){P=C.group({class:"apexcharts-data-labels"});var O=k.offsetY,j=h+k.offsetX,Y=d+parseFloat(k.style.fontSize)/3+O;T.plotDataLabelsText({x:j,y:Y,text:a,i:g,j:f,color:y.foreColor,parent:P,fontSize:w,dataLabelsConfig:k})}return P}},{key:"addListeners",value:function(s){var a=new kt(this.ctx);s.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this,s)),s.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this,s)),s.node.addEventListener("mousedown",a.pathMouseDown.bind(this,s))}}]),R}(),Ta=function(){function R(s,a){xt(this,R),this.ctx=s,this.w=s.w,this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new vr(s),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Yt(R,[{key:"draw",value:function(s){var a=this.w,h=new kt(this.ctx),d=h.group({class:"apexcharts-heatmap"});d.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")"));var g=a.globals.gridWidth/a.globals.dataPoints,f=a.globals.gridHeight/a.globals.series.length,y=0,w=!1;this.negRange=this.helpers.checkColorRange();var k=s.slice();a.config.yaxis[0].reversed&&(w=!0,k.reverse());for(var C=w?0:k.length-1;w?C<k.length:C>=0;w?C++:C--){var T=h.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:ht.escapeString(a.globals.seriesNames[C]),rel:C+1,"data:realIndex":C});if(this.ctx.series.addCollapsedClassToSeries(T,C),a.config.chart.dropShadow.enabled){var P=a.config.chart.dropShadow;new si(this.ctx).dropShadow(T,P,C)}for(var F=0,O=a.config.plotOptions.heatmap.shadeIntensity,j=0;j<k[C].length;j++){var Y=this.helpers.getShadeColor(a.config.chart.type,C,j,this.negRange),G=Y.color,U=Y.colorProps;"image"===a.config.fill.type&&(G=new Vn(this.ctx).fillPath({seriesNumber:C,dataPointIndex:j,opacity:a.globals.hasNegs?U.percent<0?1-(1+U.percent/100):O+U.percent/100:U.percent/100,patternID:ht.randomId(),width:a.config.fill.image.width?a.config.fill.image.width:g,height:a.config.fill.image.height?a.config.fill.image.height:f}));var N=h.drawRect(F,y,g,f,this.rectRadius);if(N.attr({cx:F,cy:y}),N.node.classList.add("apexcharts-heatmap-rect"),T.add(N),N.attr({fill:G,i:C,index:C,j,val:s[C][j],"stroke-width":this.strokeWidth,stroke:a.config.plotOptions.heatmap.useFillColorAsStroke?G:a.globals.stroke.colors[0],color:G}),this.helpers.addListeners(N),a.config.chart.animations.enabled&&!a.globals.dataChanged){var E=1;a.globals.resized||(E=a.config.chart.animations.speed),this.animateHeatMap(N,F,y,g,f,E)}if(a.globals.dataChanged){var H=1;if(this.dynamicAnim.enabled&&a.globals.shouldAnimate){H=this.dynamicAnim.speed;var W=a.globals.previousPaths[C]&&a.globals.previousPaths[C][j]&&a.globals.previousPaths[C][j].color;W||(W="rgba(255, 255, 255, 0)"),this.animateHeatColor(N,ht.isColorHex(W)?W:ht.rgb2hex(W),ht.isColorHex(G)?G:ht.rgb2hex(G),H)}}var K=(0,a.config.dataLabels.formatter)(a.globals.series[C][j],{value:a.globals.series[C][j],seriesIndex:C,dataPointIndex:j,w:a}),tt=this.helpers.calculateDataLabels({text:K,x:F+g/2,y:y+f/2,i:C,j,colorProps:U,series:k});null!==tt&&T.add(tt),F+=g}y+=f,d.add(T)}var et=a.globals.yAxisScale[0].result.slice();return a.config.yaxis[0].reversed?et.unshift(""):et.push(""),a.globals.yAxisScale[0].result=et,d}},{key:"animateHeatMap",value:function(s,a,h,d,g,f){var y=new To(this.ctx);y.animateRect(s,{x:a+d/2,y:h+g/2,width:0,height:0},{x:a,y:h,width:d,height:g},f,function(){y.animationCompleted(s)})}},{key:"animateHeatColor",value:function(s,a,h,d){s.attr({fill:a}).animate(d).attr({fill:h})}}]),R}(),La=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"drawYAxisTexts",value:function(s,a,h,d){var g=this.w,f=g.config.yaxis[0],y=g.globals.yLabelFormatters[0];return new kt(this.ctx).drawText({x:s+f.labels.offsetX,y:a+f.labels.offsetY,text:y(d,h),textAnchor:"middle",fontSize:f.labels.style.fontSize,fontFamily:f.labels.style.fontFamily,foreColor:Array.isArray(f.labels.style.colors)?f.labels.style.colors[h]:f.labels.style.colors})}}]),R}(),xr=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w;var a=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==a.globals.stroke.colors?a.globals.stroke.colors:a.globals.colors,this.defaultSize=Math.min(a.globals.gridWidth,a.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=a.globals.gridWidth/2,this.fullAngle="radialBar"===a.config.chart.type?360:Math.abs(a.config.plotOptions.pie.endAngle-a.config.plotOptions.pie.startAngle),this.initialAngle=a.config.plotOptions.pie.startAngle%this.fullAngle,a.globals.radialSize=this.defaultSize/2.05-a.config.stroke.width-(a.config.chart.sparkline.enabled?0:a.config.chart.dropShadow.blur),this.donutSize=a.globals.radialSize*parseInt(a.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Yt(R,[{key:"draw",value:function(s){var a=this,h=this.w,d=new kt(this.ctx);if(this.ret=d.group({class:"apexcharts-pie"}),h.globals.noData)return this.ret;for(var g=0,f=0;f<s.length;f++)g+=ht.negToZero(s[f]);var y=[],w=d.group();0===g&&(g=1e-5),s.forEach(function(W){a.maxY=Math.max(a.maxY,W)}),h.config.yaxis[0].max&&(this.maxY=h.config.yaxis[0].max),"back"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var k=0;k<s.length;k++){var C=this.fullAngle*ht.negToZero(s[k])/g;y.push(C),"polarArea"===this.chartType?(y[k]=this.fullAngle/s.length,this.sliceSizes.push(h.globals.radialSize*s[k]/this.maxY)):this.sliceSizes.push(h.globals.radialSize)}if(h.globals.dataChanged){for(var T,P=0,F=0;F<h.globals.previousPaths.length;F++)P+=ht.negToZero(h.globals.previousPaths[F]);for(var O=0;O<h.globals.previousPaths.length;O++)T=this.fullAngle*ht.negToZero(h.globals.previousPaths[O])/P,this.prevSectorAngleArr.push(T)}this.donutSize<0&&(this.donutSize=0);var j=h.config.plotOptions.pie.customScale,U=h.globals.gridWidth/2-h.globals.gridWidth/2*j,S=h.globals.gridHeight/2-h.globals.gridHeight/2*j;if("donut"===this.chartType){var N=d.drawCircle(this.donutSize);N.attr({cx:this.centerX,cy:this.centerY,fill:h.config.plotOptions.pie.donut.background?h.config.plotOptions.pie.donut.background:"transparent"}),w.add(N)}var E=this.drawArcs(y,s);if(this.sliceLabels.forEach(function(W){E.add(W)}),w.attr({transform:"translate(".concat(U,", ").concat(S,") scale(").concat(j,")")}),w.add(E),this.ret.add(w),this.donutDataLabels.show){var H=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:U,translateY:S});this.ret.add(H)}return"front"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(s,a){var h=this.w,d=new si(this.ctx),g=new kt(this.ctx),f=new Vn(this.ctx),y=g.group({class:"apexcharts-slices"}),w=this.initialAngle,k=this.initialAngle,C=this.initialAngle,T=this.initialAngle;this.strokeWidth=h.config.stroke.show?h.config.stroke.width:0;for(var P=0;P<s.length;P++){var F=g.group({class:"apexcharts-series apexcharts-pie-series",seriesName:ht.escapeString(h.globals.seriesNames[P]),rel:P+1,"data:realIndex":P});y.add(F),C=(w=C)+s[P],T=(k=T)+this.prevSectorAngleArr[P];var O=C<w?this.fullAngle+C-w:C-w,j=f.fillPath({seriesNumber:P,size:this.sliceSizes[P],value:a[P]}),Y=this.getChangedPath(k,T),G=g.drawPath({d:Y,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[P]:this.lineColorArr,strokeWidth:0,fill:j,fillOpacity:h.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(P)});G.attr({index:0,j:P}),d.setSelectionFilter(G,0,P),h.config.chart.dropShadow.enabled&&d.dropShadow(G,h.config.chart.dropShadow,P),this.addListeners(G,this.donutDataLabels),kt.setAttrs(G.node,{"data:angle":O,"data:startAngle":w,"data:strokeWidth":this.strokeWidth,"data:value":a[P]});var S={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?S=ht.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize/1.25+h.config.plotOptions.pie.dataLabels.offset,(w+O/2)%this.fullAngle):"donut"===this.chartType&&(S=ht.polarToCartesian(this.centerX,this.centerY,(h.globals.radialSize+this.donutSize)/2+h.config.plotOptions.pie.dataLabels.offset,(w+O/2)%this.fullAngle)),F.add(G);var N=0;if(!this.initialAnim||h.globals.resized||h.globals.dataChanged?this.animBeginArr.push(0):(0==(N=O/this.fullAngle*h.config.chart.animations.speed)&&(N=1),this.animDur=N+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(G,this.dynamicAnim&&h.globals.dataChanged?{size:this.sliceSizes[P],endAngle:C,startAngle:w,prevStartAngle:k,prevEndAngle:T,animateStartingPos:!0,i:P,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:h.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[P],endAngle:C,startAngle:w,i:P,totalItems:s.length-1,animBeginArr:this.animBeginArr,dur:N}),h.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&G.click(this.pieClicked.bind(this,P)),void 0!==h.globals.selectedDataPoints[0]&&h.globals.selectedDataPoints[0].indexOf(P)>-1&&this.pieClicked(P),h.config.dataLabels.enabled){var E=S.x,H=S.y,W=100*O/this.fullAngle+"%";if(0!==O&&h.config.plotOptions.pie.dataLabels.minAngleToShowLabel<s[P]){var K=h.config.dataLabels.formatter;void 0!==K&&(W=K(h.globals.seriesPercent[P][0],{seriesIndex:P,w:h}));var tt=h.globals.dataLabels.style.colors[P],et=g.group({class:"apexcharts-datalabels"}),gt=g.drawText({x:E,y:H,text:W,textAnchor:"middle",fontSize:h.config.dataLabels.style.fontSize,fontFamily:h.config.dataLabels.style.fontFamily,fontWeight:h.config.dataLabels.style.fontWeight,foreColor:tt});et.add(gt),h.config.dataLabels.dropShadow.enabled&&d.dropShadow(gt,h.config.dataLabels.dropShadow),gt.node.classList.add("apexcharts-pie-label"),h.config.chart.animations.animate&&!1===h.globals.resized&&(gt.node.classList.add("apexcharts-pie-label-delay"),gt.node.style.animationDelay=h.config.chart.animations.speed/940+"s"),this.sliceLabels.push(et)}}}return y}},{key:"addListeners",value:function(s,a){var h=new kt(this.ctx);s.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this,s)),s.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this,s)),s.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,s.node,a)),s.node.addEventListener("mousedown",h.pathMouseDown.bind(this,s)),this.donutDataLabels.total.showAlways||(s.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,s.node,a)),s.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,s.node,a)))}},{key:"animatePaths",value:function(s,a){var d=a.endAngle<a.startAngle?this.fullAngle+a.endAngle-a.startAngle:a.endAngle-a.startAngle,g=d,f=a.startAngle,y=a.startAngle;void 0!==a.prevStartAngle&&void 0!==a.prevEndAngle&&(f=a.prevEndAngle,g=a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle),a.i===this.w.config.series.length-1&&(d+y>this.fullAngle?a.endAngle=a.endAngle-(d+y):d+y<this.fullAngle&&(a.endAngle=a.endAngle+(this.fullAngle-(d+y)))),d===this.fullAngle&&(d=this.fullAngle-.01),this.animateArc(s,f,y,d,g,a)}},{key:"animateArc",value:function(s,a,h,d,g,f){var y,w=this,k=this.w,C=new To(this.ctx),T=f.size;(isNaN(a)||isNaN(g))&&(a=h,g=d,f.dur=0);var P=d,F=h,O=a<h?this.fullAngle+a-h:a-h;k.globals.dataChanged&&f.shouldSetPrevPaths&&f.prevEndAngle&&(y=w.getPiePath({me:w,startAngle:f.prevStartAngle,angle:f.prevEndAngle<f.prevStartAngle?this.fullAngle+f.prevEndAngle-f.prevStartAngle:f.prevEndAngle-f.prevStartAngle,size:T}),s.attr({d:y})),0!==f.dur?s.animate(f.dur,k.globals.easing,f.animBeginArr[f.i]).afterAll(function(){"pie"!==w.chartType&&"donut"!==w.chartType&&"polarArea"!==w.chartType||this.animate(k.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":w.strokeWidth}),f.i===k.config.series.length-1&&C.animationCompleted(s)}).during(function(j){P=O+(d-O)*j,f.animateStartingPos&&(P=g+(d-g)*j,F=a-g+(h-(a-g))*j),y=w.getPiePath({me:w,startAngle:F,angle:P,size:T}),s.node.setAttribute("data:pathOrig",y),s.attr({d:y})}):(y=w.getPiePath({me:w,startAngle:F,angle:d,size:T}),f.isTrack||(k.globals.animationEnded=!0),s.node.setAttribute("data:pathOrig",y),s.attr({d:y,"stroke-width":w.strokeWidth}))}},{key:"pieClicked",value:function(s){var a,h=this.w,d=this,g=d.sliceSizes[s]+(h.config.plotOptions.pie.expandOnClick?4:0),f=h.globals.dom.Paper.select(".apexcharts-".concat(d.chartType.toLowerCase(),"-slice-").concat(s)).members[0];if("true"!==f.attr("data:pieClicked")){var y=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(y,function(T){T.setAttribute("data:pieClicked","false");var P=T.getAttribute("data:pathOrig");P&&T.setAttribute("d",P)}),f.attr("data:pieClicked","true");var w=parseInt(f.attr("data:startAngle"),10),k=parseInt(f.attr("data:angle"),10);a=d.getPiePath({me:d,startAngle:w,angle:k,size:g}),360!==k&&f.plot(a)}else{f.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(f.node,this.donutDataLabels);var C=f.attr("data:pathOrig");f.attr({d:C})}}},{key:"getChangedPath",value:function(s,a){var h="";return this.dynamicAnim&&this.w.globals.dataChanged&&(h=this.getPiePath({me:this,startAngle:s,angle:a-s,size:this.size})),h}},{key:"getPiePath",value:function(s){var a,h=s.me,d=s.startAngle,g=s.angle,f=s.size,y=new kt(this.ctx),w=d,k=Math.PI*(w-90)/180,C=g+d;Math.ceil(C)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(C=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(C)>this.fullAngle&&(C-=this.fullAngle);var T=Math.PI*(C-90)/180,P=h.centerX+f*Math.cos(k),F=h.centerY+f*Math.sin(k),O=h.centerX+f*Math.cos(T),j=h.centerY+f*Math.sin(T),Y=ht.polarToCartesian(h.centerX,h.centerY,h.donutSize,C),G=ht.polarToCartesian(h.centerX,h.centerY,h.donutSize,w),U=g>180?1:0,S=["M",P,F,"A",f,f,0,U,1,O,j];return a="donut"===h.chartType?[].concat(S,["L",Y.x,Y.y,"A",h.donutSize,h.donutSize,0,U,0,G.x,G.y,"L",P,F,"z"]).join(" "):"pie"===h.chartType||"polarArea"===h.chartType?[].concat(S,["L",h.centerX,h.centerY,"L",P,F]).join(" "):[].concat(S).join(" "),y.roundPathCorners(a,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(s){var a=this.w,h=new ce(this.ctx),d=new kt(this.ctx),g=new La(this.ctx),f=d.group(),y=d.group(),w=h.niceScale(0,Math.ceil(this.maxY),0),k=w.result.reverse(),C=w.result.length;this.maxY=w.niceMax;for(var T=a.globals.radialSize,P=T/(C-1),F=0;F<C-1;F++){var O=d.drawCircle(T);if(O.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":a.config.plotOptions.polarArea.rings.strokeWidth,stroke:a.config.plotOptions.polarArea.rings.strokeColor}),a.config.yaxis[0].show){var j=g.drawYAxisTexts(this.centerX,this.centerY-T+parseInt(a.config.yaxis[0].labels.style.fontSize,10)/2,F,k[F]);y.add(j)}f.add(O),T-=P}this.drawSpokes(s),s.add(f),s.add(y)}},{key:"renderInnerDataLabels",value:function(s,a){var h=this.w,d=new kt(this.ctx),g=d.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(a.translateX?a.translateX:0,", ").concat(a.translateY?a.translateY:0,") scale(").concat(h.config.plotOptions.pie.customScale,")")}),f=s.total.show;g.node.style.opacity=a.opacity;var y,w,k=a.centerX,C=a.centerY;y=void 0===s.name.color?h.globals.colors[0]:s.name.color;var T=s.name.fontSize,P=s.name.fontFamily,F=s.name.fontWeight;w=void 0===s.value.color?h.config.chart.foreColor:s.value.color;var O=s.value.formatter,j="",Y="";if(f?(y=s.total.color,T=s.total.fontSize,P=s.total.fontFamily,F=s.total.fontWeight,Y=s.total.label,j=s.total.formatter(h)):1===h.globals.series.length&&(j=O(h.globals.series[0],h),Y=h.globals.seriesNames[0]),Y&&(Y=s.name.formatter(Y,s.total.show,h)),s.name.show){var G=d.drawText({x:k,y:C+parseFloat(s.name.offsetY),text:Y,textAnchor:"middle",foreColor:y,fontSize:T,fontWeight:F,fontFamily:P});G.node.classList.add("apexcharts-datalabel-label"),g.add(G)}if(s.value.show){var U=s.name.show?parseFloat(s.value.offsetY)+16:s.value.offsetY,S=d.drawText({x:k,y:C+U,text:j,textAnchor:"middle",foreColor:w,fontWeight:s.value.fontWeight,fontSize:s.value.fontSize,fontFamily:s.value.fontFamily});S.node.classList.add("apexcharts-datalabel-value"),g.add(S)}return g}},{key:"printInnerLabels",value:function(s,a,h,d){var g,f=this.w;d?g=void 0===s.name.color?f.globals.colors[parseInt(d.parentNode.getAttribute("rel"),10)-1]:s.name.color:f.globals.series.length>1&&s.total.show&&(g=s.total.color);var y=f.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),w=f.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");h=(0,s.value.formatter)(h,f),d||"function"!=typeof s.total.formatter||(h=s.total.formatter(f)),a=s.name.formatter(a,a===s.total.label,f),null!==y&&(y.textContent=a),null!==w&&(w.textContent=h),null!==y&&(y.style.fill=g)}},{key:"printDataLabelsInner",value:function(s,a){var h=this.w,d=s.getAttribute("data:value"),g=h.globals.seriesNames[parseInt(s.parentNode.getAttribute("rel"),10)-1];h.globals.series.length>1&&this.printInnerLabels(a,g,d,s);var f=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==f&&(f.style.opacity=1)}},{key:"drawSpokes",value:function(s){var a=this,h=this.w,d=new kt(this.ctx),g=h.config.plotOptions.polarArea.spokes;if(0!==g.strokeWidth){for(var f=[],y=360/h.globals.series.length,w=0;w<h.globals.series.length;w++)f.push(ht.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize,h.config.plotOptions.pie.startAngle+y*w));f.forEach(function(k,C){var T=d.drawLine(k.x,k.y,a.centerX,a.centerY,Array.isArray(g.connectorColors)?g.connectorColors[C]:g.connectorColors);s.add(T)})}}},{key:"revertDataLabelsInner",value:function(s,a,h){var d=this,g=this.w,f=g.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),y=!1,w=g.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),k=function(P){var F=P.makeSliceOut,O=P.printLabel;Array.prototype.forEach.call(w,function(j){"true"===j.getAttribute("data:pieClicked")&&(F&&(y=!0),O&&d.printDataLabelsInner(j,a))})};if(k({makeSliceOut:!0,printLabel:!1}),a.total.show&&g.globals.series.length>1)y&&!a.total.showAlways?k({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(a,a.total.label,a.total.formatter(g));else if(k({makeSliceOut:!1,printLabel:!0}),!y)if(g.globals.selectedDataPoints.length&&g.globals.series.length>1)if(g.globals.selectedDataPoints[0].length>0){var C=g.globals.selectedDataPoints[0],T=g.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(C));this.printDataLabelsInner(T,a)}else f&&g.globals.selectedDataPoints.length&&0===g.globals.selectedDataPoints[0].length&&(f.style.opacity=0);else f&&g.globals.series.length>1&&(f.style.opacity=0)}}]),R}(),xu=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var a=this.w;this.graphics=new kt(this.ctx),this.lineColorArr=void 0!==a.globals.stroke.colors?a.globals.stroke.colors:a.globals.colors,this.defaultSize=a.globals.svgHeight<a.globals.svgWidth?a.globals.gridHeight+1.5*a.globals.goldenPadding:a.globals.gridWidth,this.isLog=a.config.yaxis[0].logarithmic,this.coreUtils=new it(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(a.globals.maxY,0):a.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):a.globals.minY,this.polygons=a.config.plotOptions.radar.polygons,this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-a.config.chart.dropShadow.blur,a.config.xaxis.labels.show&&(this.size=this.size-a.globals.xAxisLabelsWidth/1.75),void 0!==a.config.plotOptions.radar.size&&(this.size=a.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Yt(R,[{key:"draw",value:function(s){var a=this,h=this.w,d=new Vn(this.ctx),g=[],f=new ut(this.ctx);s.length&&(this.dataPointsLen=s[h.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var C=h.globals.gridHeight/2+h.config.plotOptions.radar.offsetY,T=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h.globals.gridWidth/2+h.config.plotOptions.radar.offsetX||0,", ").concat(C||0,")")}),P=[],F=null,O=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),s.forEach(function(Y,G){var U=Y.length===h.globals.dataPoints,S=a.graphics.group().attr({class:"apexcharts-series","data:longestSeries":U,seriesName:ht.escapeString(h.globals.seriesNames[G]),rel:G+1,"data:realIndex":G});a.dataRadiusOfPercent[G]=[],a.dataRadius[G]=[],a.angleArr[G]=[],Y.forEach(function(bt,Et){var Gt=Math.abs(a.maxValue-a.minValue);bt+=Math.abs(a.minValue),a.isLog&&(bt=a.coreUtils.getLogVal(bt,0)),a.dataRadiusOfPercent[G][Et]=bt/Gt,a.dataRadius[G][Et]=a.dataRadiusOfPercent[G][Et]*a.size,a.angleArr[G][Et]=Et*a.disAngle}),P=a.getDataPointsPos(a.dataRadius[G],a.angleArr[G]);var N=a.createPaths(P,{x:0,y:0});F=a.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),O=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":G}),h.globals.delayedElements.push({el:F.node,index:G});var E={i:G,realIndex:G,animationDelay:G,initialSpeed:h.config.chart.animations.speed,dataChangeSpeed:h.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:h.globals.stroke.colors[G],strokeLineCap:h.config.stroke.lineCap},H=null;h.globals.previousPaths.length>0&&(H=a.getPreviousPath(G));for(var W=0;W<N.linePathsTo.length;W++){var K=a.graphics.renderPaths(v(v({},E),{},{pathFrom:null===H?N.linePathsFrom[W]:H,pathTo:N.linePathsTo[W],strokeWidth:Array.isArray(a.strokeWidth)?a.strokeWidth[G]:a.strokeWidth,fill:"none",drawShadow:!1}));S.add(K);var tt=d.fillPath({seriesNumber:G}),et=a.graphics.renderPaths(v(v({},E),{},{pathFrom:null===H?N.areaPathsFrom[W]:H,pathTo:N.areaPathsTo[W],strokeWidth:0,fill:tt,drawShadow:!1}));h.config.chart.dropShadow.enabled&&new si(a.ctx).dropShadow(et,Object.assign({},h.config.chart.dropShadow,{noUserSpaceOnUse:!0}),G),S.add(et)}Y.forEach(function(bt,Et){var Gt=new gn(a.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:G,dataPointIndex:Et}),Bt=a.graphics.drawMarker(P[Et].x,P[Et].y,Gt);Bt.attr("rel",Et),Bt.attr("j",Et),Bt.attr("index",G),Bt.node.setAttribute("default-marker-size",Gt.pSize);var he=a.graphics.group({class:"apexcharts-series-markers"});he&&he.add(Bt),F.add(he),S.add(F);var me=h.config.dataLabels;if(me.enabled){var fe=me.formatter(h.globals.series[G][Et],{seriesIndex:G,dataPointIndex:Et,w:h});f.plotDataLabelsText({x:P[Et].x,y:P[Et].y,text:fe,textAnchor:"middle",i:G,j:G,parent:O,offsetCorrection:!1,dataLabelsConfig:v({},me)})}S.add(O)}),g.push(S)}),this.drawPolygons({parent:T}),h.config.xaxis.labels.show){var j=this.drawXAxisTexts();T.add(j)}return g.forEach(function(Y){T.add(Y)}),T.add(this.yaxisLabels),T}},{key:"drawPolygons",value:function(s){for(var a=this,h=this.w,d=s.parent,g=new La(this.ctx),f=h.globals.yAxisScale[0].result.reverse(),y=f.length,w=[],k=this.size/(y-1),C=0;C<y;C++)w[C]=k*C;w.reverse();var T=[],P=[];w.forEach(function(F,O){var j=ht.getPolygonPos(F,a.dataPointsLen),Y="";j.forEach(function(G,U){if(0===O){var S=a.graphics.drawLine(G.x,G.y,0,0,Array.isArray(a.polygons.connectorColors)?a.polygons.connectorColors[U]:a.polygons.connectorColors);P.push(S)}0===U&&a.yaxisLabelsTextsPos.push({x:G.x,y:G.y}),Y+=G.x+","+G.y+" "}),T.push(Y)}),T.forEach(function(F,O){var j=a.polygons.strokeColors,Y=a.polygons.strokeWidth,G=a.graphics.drawPolygon(F,Array.isArray(j)?j[O]:j,Array.isArray(Y)?Y[O]:Y,h.globals.radarPolygons.fill.colors[O]);d.add(G)}),P.forEach(function(F){d.add(F)}),h.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(F,O){var j=g.drawYAxisTexts(F.x,F.y,O,f[O]);a.yaxisLabels.add(j)})}},{key:"drawXAxisTexts",value:function(){var s=this,a=this.w,h=a.config.xaxis.labels,d=this.graphics.group({class:"apexcharts-xaxis"}),g=ht.getPolygonPos(this.size,this.dataPointsLen);return a.globals.labels.forEach(function(f,y){var w=a.config.xaxis.labels.formatter,k=new ut(s.ctx);if(g[y]){var C=s.getTextPos(g[y],s.size),T=w(f,{seriesIndex:-1,dataPointIndex:y,w:a});k.plotDataLabelsText({x:C.newX,y:C.newY,text:T,textAnchor:C.textAnchor,i:y,j:y,parent:d,color:Array.isArray(h.style.colors)&&h.style.colors[y]?h.style.colors[y]:"#a8a8a8",dataLabelsConfig:v({textAnchor:C.textAnchor,dropShadow:{enabled:!1}},h),offsetCorrection:!1})}}),d}},{key:"createPaths",value:function(s,a){var h=this,d=[],g=[],f=[],y=[];if(s.length){g=[this.graphics.move(a.x,a.y)],y=[this.graphics.move(a.x,a.y)];var w=this.graphics.move(s[0].x,s[0].y),k=this.graphics.move(s[0].x,s[0].y);s.forEach(function(C,T){w+=h.graphics.line(C.x,C.y),k+=h.graphics.line(C.x,C.y),T===s.length-1&&(w+="Z",k+="Z")}),d.push(w),f.push(k)}return{linePathsFrom:g,linePathsTo:d,areaPathsFrom:y,areaPathsTo:f}}},{key:"getTextPos",value:function(s,a){var h="middle",d=s.x,g=s.y;return Math.abs(s.x)>=10?s.x>0?(h="start",d+=10):s.x<0&&(h="end",d-=10):h="middle",Math.abs(s.y)>=a-10&&(s.y<0?g-=10:s.y>0&&(g+=10)),{textAnchor:h,newX:d,newY:g}}},{key:"getPreviousPath",value:function(s){for(var a=this.w,h=null,d=0;d<a.globals.previousPaths.length;d++){var g=a.globals.previousPaths[d];g.paths.length>0&&parseInt(g.realIndex,10)===parseInt(s,10)&&void 0!==a.globals.previousPaths[d].paths[0]&&(h=a.globals.previousPaths[d].paths[0].d)}return h}},{key:"getDataPointsPos",value:function(s,a){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;s=s||[],a=a||[];for(var d=[],g=0;g<h;g++){var f={};f.x=s[g]*Math.sin(a[g]),f.y=-s[g]*Math.cos(a[g]),d.push(f)}return d}}]),R}(),Zl=function(R){Jo(a,xr);var s=Ut(a);function a(h){var d;xt(this,a),(d=s.call(this,h)).ctx=h,d.w=h.w,d.animBeginArr=[0],d.animDur=0;var g=d.w;return d.startAngle=g.config.plotOptions.radialBar.startAngle,d.endAngle=g.config.plotOptions.radialBar.endAngle,d.totalAngle=Math.abs(g.config.plotOptions.radialBar.endAngle-g.config.plotOptions.radialBar.startAngle),d.trackStartAngle=g.config.plotOptions.radialBar.track.startAngle,d.trackEndAngle=g.config.plotOptions.radialBar.track.endAngle,d.barLabels=d.w.config.plotOptions.radialBar.barLabels,d.donutDataLabels=d.w.config.plotOptions.radialBar.dataLabels,d.radialDataLabels=d.donutDataLabels,d.trackStartAngle||(d.trackStartAngle=d.startAngle),d.trackEndAngle||(d.trackEndAngle=d.endAngle),360===d.endAngle&&(d.endAngle=359.99),d.margin=parseInt(g.config.plotOptions.radialBar.track.margin,10),d.onBarLabelClick=d.onBarLabelClick.bind(ws(d)),d}return Yt(a,[{key:"draw",value:function(h){var d=this.w,g=new kt(this.ctx),f=g.group({class:"apexcharts-radialbar"});if(d.globals.noData)return f;var y=g.group(),w=this.defaultSize/2,k=d.globals.gridWidth/2,C=this.defaultSize/2.05;d.config.chart.sparkline.enabled||(C=C-d.config.stroke.width-d.config.chart.dropShadow.blur);var T=d.globals.fill.colors;if(d.config.plotOptions.radialBar.track.show){var P=this.drawTracks({size:C,centerX:k,centerY:w,colorArr:T,series:h});y.add(P)}var F=this.drawArcs({size:C,centerX:k,centerY:w,colorArr:T,series:h}),O=360;d.config.plotOptions.radialBar.startAngle<0&&(O=this.totalAngle);var j=(360-O)/360;if(d.globals.radialSize=C-C*j,this.radialDataLabels.value.show){var Y=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);d.globals.radialSize+=Y*j}return y.add(F.g),"front"===d.config.plotOptions.radialBar.hollow.position&&(F.g.add(F.elHollow),F.dataLabels&&F.g.add(F.dataLabels)),f.add(y),f}},{key:"drawTracks",value:function(h){var d=this.w,g=new kt(this.ctx),f=g.group({class:"apexcharts-tracks"}),y=new si(this.ctx),w=new Vn(this.ctx),k=this.getStrokeWidth(h);h.size=h.size-k/2;for(var C=0;C<h.series.length;C++){var T=g.group({class:"apexcharts-radialbar-track apexcharts-track"});f.add(T),T.attr({rel:C+1}),h.size=h.size-k-this.margin;var P=d.config.plotOptions.radialBar.track,F=w.fillPath({seriesNumber:0,size:h.size,fillColors:Array.isArray(P.background)?P.background[C]:P.background,solid:!0}),O=this.trackStartAngle,j=this.trackEndAngle;Math.abs(j)+Math.abs(O)>=360&&(j=360-Math.abs(this.startAngle)-.1);var Y=g.drawPath({d:"",stroke:F,strokeWidth:k*parseInt(P.strokeWidth,10)/100,fill:"none",strokeOpacity:P.opacity,classes:"apexcharts-radialbar-area"});P.dropShadow.enabled&&y.dropShadow(Y,P.dropShadow),T.add(Y),Y.attr("id","apexcharts-radialbarTrack-"+C),this.animatePaths(Y,{centerX:h.centerX,centerY:h.centerY,endAngle:j,startAngle:O,size:h.size,i:C,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:d.globals.easing})}return f}},{key:"drawArcs",value:function(h){var d=this.w,g=new kt(this.ctx),f=new Vn(this.ctx),y=new si(this.ctx),w=g.group(),k=this.getStrokeWidth(h);h.size=h.size-k/2;var C=d.config.plotOptions.radialBar.hollow.background,T=h.size-k*h.series.length-this.margin*h.series.length-k*parseInt(d.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,P=T-d.config.plotOptions.radialBar.hollow.margin;void 0!==d.config.plotOptions.radialBar.hollow.image&&(C=this.drawHollowImage(h,w,T,C));var F=this.drawHollow({size:P,centerX:h.centerX,centerY:h.centerY,fill:C||"transparent"});d.config.plotOptions.radialBar.hollow.dropShadow.enabled&&y.dropShadow(F,d.config.plotOptions.radialBar.hollow.dropShadow);var j=1;!this.radialDataLabels.total.show&&d.globals.series.length>1&&(j=0);var Y=null;this.radialDataLabels.show&&(Y=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:T,centerX:h.centerX,centerY:h.centerY,opacity:j})),"back"===d.config.plotOptions.radialBar.hollow.position&&(w.add(F),Y&&w.add(Y));var G=!1;d.config.plotOptions.radialBar.inverseOrder&&(G=!0);for(var U=G?h.series.length-1:0;G?U>=0:U<h.series.length;G?U--:U++){var S=g.group({class:"apexcharts-series apexcharts-radial-series",seriesName:ht.escapeString(d.globals.seriesNames[U])});w.add(S),S.attr({rel:U+1,"data:realIndex":U}),this.ctx.series.addCollapsedClassToSeries(S,U),h.size=h.size-k-this.margin;var N=f.fillPath({seriesNumber:U,size:h.size,value:h.series[U]}),E=this.startAngle,H=void 0,W=ht.negToZero(h.series[U]>100?100:h.series[U])/100,K=Math.round(this.totalAngle*W)+this.startAngle,tt=void 0;d.globals.dataChanged&&(H=this.startAngle,tt=Math.round(this.totalAngle*ht.negToZero(d.globals.previousPaths[U])/100)+H),Math.abs(K)+Math.abs(E)>=360&&(K-=.01),Math.abs(tt)+Math.abs(H)>=360&&(tt-=.01);var et=K-E,gt=Array.isArray(d.config.stroke.dashArray)?d.config.stroke.dashArray[U]:d.config.stroke.dashArray,St=g.drawPath({d:"",stroke:N,strokeWidth:k,fill:"none",fillOpacity:d.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+U,strokeDashArray:gt});if(kt.setAttrs(St.node,{"data:angle":et,"data:value":h.series[U]}),d.config.chart.dropShadow.enabled&&y.dropShadow(St,d.config.chart.dropShadow,U),y.setSelectionFilter(St,0,U),this.addListeners(St,this.radialDataLabels),S.add(St),St.attr({index:0,j:U}),this.barLabels.enabled){var Et=ht.polarToCartesian(h.centerX,h.centerY,h.size,E),Gt=this.barLabels.formatter(d.globals.seriesNames[U],{seriesIndex:U,w:d}),Bt=["apexcharts-radialbar-label"];this.barLabels.onClick||Bt.push("apexcharts-no-click");var he=this.barLabels.useSeriesColors?d.globals.colors[U]:d.config.chart.foreColor;he||(he=d.config.chart.foreColor);var me=Et.x-this.barLabels.margin,fe=Et.y,Be=g.drawText({x:me,y:fe,text:Gt,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:he,cssClass:Bt.join(" ")});Be.on("click",this.onBarLabelClick),Be.attr({rel:U+1}),0!==E&&Be.attr({"transform-origin":"".concat(me," ").concat(fe),transform:"rotate(".concat(E," 0 0)")}),S.add(Be)}var ye=0;!this.initialAnim||d.globals.resized||d.globals.dataChanged||(ye=d.config.chart.animations.speed),d.globals.dataChanged&&(ye=d.config.chart.animations.dynamicAnimation.speed),this.animDur=ye/(1.2*h.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(St,{centerX:h.centerX,centerY:h.centerY,endAngle:K,startAngle:E,prevEndAngle:tt,prevStartAngle:H,size:h.size,i:U,totalItems:2,animBeginArr:this.animBeginArr,dur:ye,shouldSetPrevPaths:!0,easing:d.globals.easing})}return{g:w,elHollow:F,dataLabels:Y}}},{key:"drawHollow",value:function(h){var d=new kt(this.ctx).drawCircle(2*h.size);return d.attr({class:"apexcharts-radialbar-hollow",cx:h.centerX,cy:h.centerY,r:h.size,fill:h.fill}),d}},{key:"drawHollowImage",value:function(h,d,g,f){var y=this.w,w=new Vn(this.ctx),k=ht.randomId(),C=y.config.plotOptions.radialBar.hollow.image;if(y.config.plotOptions.radialBar.hollow.imageClipped)w.clippedImgArea({width:g,height:g,image:C,patternID:"pattern".concat(y.globals.cuid).concat(k)}),f="url(#pattern".concat(y.globals.cuid).concat(k,")");else{var T=y.config.plotOptions.radialBar.hollow.imageWidth,P=y.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===T&&void 0===P){var F=y.globals.dom.Paper.image(C).loaded(function(j){this.move(h.centerX-j.width/2+y.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-j.height/2+y.config.plotOptions.radialBar.hollow.imageOffsetY)});d.add(F)}else{var O=y.globals.dom.Paper.image(C).loaded(function(j){this.move(h.centerX-T/2+y.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-P/2+y.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(T,P)});d.add(O)}}return f}},{key:"getStrokeWidth",value:function(h){return h.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(h.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(h){var d=parseInt(h.target.getAttribute("rel"),10)-1,g=this.barLabels.onClick,f=this.w;g&&g(f.globals.seriesNames[d],{w:f,seriesIndex:d})}}]),a}(),Na=function(R){Jo(a,yr);var s=Ut(a);function a(){return xt(this,a),s.apply(this,arguments)}return Yt(a,[{key:"draw",value:function(h,d){var g=this.w,f=new kt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=h,this.seriesRangeStart=g.globals.seriesRangeStart,this.seriesRangeEnd=g.globals.seriesRangeEnd,this.barHelpers.initVariables(h);for(var y=f.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),w=0;w<h.length;w++){var k,C,T,P,F=void 0,O=void 0,j=g.globals.comboCharts?d[w]:w,Y=f.group({class:"apexcharts-series",seriesName:ht.escapeString(g.globals.seriesNames[j]),rel:w+1,"data:realIndex":j});this.ctx.series.addCollapsedClassToSeries(Y,j),h[w].length>0&&(this.visibleI=this.visibleI+1);var G=0,U=0;this.yRatio.length>1&&(this.yaxisIndex=j);var S=this.barHelpers.initialPositions();O=S.y,P=S.zeroW,F=S.x,U=S.barWidth,G=S.barHeight,k=S.xDivision,C=S.yDivision,T=S.zeroH;for(var N=f.group({class:"apexcharts-datalabels","data:realIndex":j}),E=f.group({class:"apexcharts-rangebar-goals-markers"}),H=0;H<g.globals.dataPoints;H++){var W,K=this.barHelpers.getStrokeWidth(w,H,j),tt=this.seriesRangeStart[w][H],et=this.seriesRangeEnd[w][H],gt=null,St=null,bt=null,Et={x:F,y:O,strokeWidth:K,elSeries:Y},Gt=this.seriesLen;if(g.config.plotOptions.bar.rangeBarGroupRows&&(Gt=1),void 0===g.config.series[w].data[H])break;if(this.isHorizontal){if(bt=O+G*this.visibleI,g.config.series[w].data[H].x){var he=this.detectOverlappingBars({i:w,j:H,barYPosition:bt,srty:(C-G*Gt)/2,barHeight:G,yDivision:C,initPositions:S});G=he.barHeight,bt=he.barYPosition}U=(gt=this.drawRangeBarPaths(v({indexes:{i:w,j:H,realIndex:j},barHeight:G,barYPosition:bt,zeroW:P,yDivision:C,y1:tt,y2:et},Et))).barWidth}else{if(g.globals.isXNumeric&&(F=(g.globals.seriesX[w][H]-g.globals.minX)/this.xRatio-U/2),St=F+U*this.visibleI,g.config.series[w].data[H].x){var fe=this.detectOverlappingBars({i:w,j:H,barXPosition:St,srtx:(k-U*Gt)/2,barWidth:U,xDivision:k,initPositions:S});U=fe.barWidth,St=fe.barXPosition}G=(gt=this.drawRangeColumnPaths(v({indexes:{i:w,j:H,realIndex:j},barWidth:U,barXPosition:St,zeroH:T,xDivision:k},Et))).barHeight}var Be=this.barHelpers.drawGoalLine({barXPosition:gt.barXPosition,barYPosition:bt,goalX:gt.goalX,goalY:gt.goalY,barHeight:G,barWidth:U});Be&&E.add(Be),O=gt.y,F=gt.x;var ye=this.barHelpers.getPathFillColor(h,w,H,j);this.renderSeries((Hn(W={realIndex:j,pathFill:ye,lineFill:g.globals.stroke.colors[j],j:H,i:w,x:F,y:O,y1:tt,y2:et,pathFrom:gt.pathFrom,pathTo:gt.pathTo,strokeWidth:K,elSeries:Y,series:h,barHeight:G,barWidth:U,barXPosition:St,barYPosition:bt},"barWidth",U),Hn(W,"elDataLabelsWrap",N),Hn(W,"elGoalsMarkers",E),Hn(W,"visibleSeries",this.visibleI),Hn(W,"type","rangebar"),W))}y.add(Y)}return y}},{key:"detectOverlappingBars",value:function(h){var d=h.i,g=h.j,f=h.barYPosition,y=h.barXPosition,w=h.srty,k=h.srtx,C=h.barHeight,T=h.barWidth,P=h.yDivision,F=h.xDivision,O=h.initPositions,j=this.w,Y=[],G=j.config.series[d].data[g].rangeName,U=j.config.series[d].data[g].x,S=Array.isArray(U)?U.join(" "):U,N=j.globals.labels.map(function(H){return Array.isArray(H)?H.join(" "):H}).indexOf(S),E=j.globals.seriesRange[d].findIndex(function(H){return H.x===S&&H.overlaps.length>0});return this.isHorizontal?(f=j.config.plotOptions.bar.rangeBarGroupRows?w+P*N:w+C*this.visibleI+P*N,E>-1&&!j.config.plotOptions.bar.rangeBarOverlap&&(Y=j.globals.seriesRange[d][E].overlaps).indexOf(G)>-1&&(f=(C=O.barHeight/Y.length)*this.visibleI+P*(100-parseInt(this.barOptions.barHeight,10))/100/2+C*(this.visibleI+Y.indexOf(G))+P*N)):(N>-1&&(y=j.config.plotOptions.bar.rangeBarGroupRows?k+F*N:k+T*this.visibleI+F*N),E>-1&&!j.config.plotOptions.bar.rangeBarOverlap&&(Y=j.globals.seriesRange[d][E].overlaps).indexOf(G)>-1&&(y=(T=O.barWidth/Y.length)*this.visibleI+F*(100-parseInt(this.barOptions.barWidth,10))/100/2+T*(this.visibleI+Y.indexOf(G))+F*N)),{barYPosition:f,barXPosition:y,barHeight:C,barWidth:T}}},{key:"drawRangeColumnPaths",value:function(h){var d=h.indexes,g=h.x,f=h.xDivision,y=h.barWidth,w=h.barXPosition,k=h.zeroH,C=this.w,T=d.i,P=d.j,F=this.yRatio[this.yaxisIndex],O=d.realIndex,j=this.getRangeValue(O,P),Y=Math.min(j.start,j.end),G=Math.max(j.start,j.end);null==this.series[T][P]?Y=k:(Y=k-Y/F,G=k-G/F);var U=Math.abs(G-Y),S=this.barHelpers.getColumnPaths({barXPosition:w,barWidth:y,y1:Y,y2:G,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:d.realIndex,i:O,j:P,w:C});if(C.globals.isXNumeric){var N=this.getBarXForNumericXAxis({x:g,j:P,realIndex:O,barWidth:y});g=N.x,w=N.barXPosition}else g+=f;return{pathTo:S.pathTo,pathFrom:S.pathFrom,barHeight:U,x:g,y:G,goalY:this.barHelpers.getGoalValues("y",null,k,T,P),barXPosition:w}}},{key:"drawRangeBarPaths",value:function(h){var d=h.indexes,g=h.y,w=h.yDivision,k=h.barHeight,C=h.barYPosition,T=h.zeroW,P=this.w,F=T+h.y1/this.invertedYRatio,O=T+h.y2/this.invertedYRatio,j=Math.abs(O-F),Y=this.barHelpers.getBarpaths({barYPosition:C,barHeight:k,x1:F,x2:O,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:d.realIndex,realIndex:d.realIndex,j:d.j,w:P});return P.globals.isXNumeric||(g+=w),{pathTo:Y.pathTo,pathFrom:Y.pathFrom,barWidth:j,x:O,goalX:this.barHelpers.getGoalValues("x",T,null,d.realIndex,d.j),y:g}}},{key:"getRangeValue",value:function(h,d){var g=this.w;return{start:g.globals.seriesRangeStart[h][d],end:g.globals.seriesRangeEnd[h][d]}}}]),a}(),wu=function(){function R(s){xt(this,R),this.w=s.w,this.lineCtx=s}return Yt(R,[{key:"sameValueSeriesFix",value:function(s,a){var h=this.w;if(("gradient"===h.config.fill.type||"gradient"===h.config.fill.type[s])&&new it(this.lineCtx.ctx,h).seriesHaveSameValues(s)){var d=a[s].slice();d[d.length-1]=d[d.length-1]+1e-6,a[s]=d}return a}},{key:"calculatePoints",value:function(s){var a=s.series,d=s.x,g=s.y,f=s.i,y=s.j,w=s.prevY,k=this.w,C=[],T=[];if(0===y){var P=this.lineCtx.categoryAxisCorrection+k.config.markers.offsetX;k.globals.isXNumeric&&(P=(k.globals.seriesX[s.realIndex][0]-k.globals.minX)/this.lineCtx.xRatio+k.config.markers.offsetX),C.push(P),T.push(ht.isNumber(a[f][0])?w+k.config.markers.offsetY:null),C.push(d+k.config.markers.offsetX),T.push(ht.isNumber(a[f][y+1])?g+k.config.markers.offsetY:null)}else C.push(d+k.config.markers.offsetX),T.push(ht.isNumber(a[f][y+1])?g+k.config.markers.offsetY:null);return{x:C,y:T}}},{key:"checkPreviousPaths",value:function(s){for(var a=s.pathFromLine,h=s.pathFromArea,d=s.realIndex,g=this.w,f=0;f<g.globals.previousPaths.length;f++){var y=g.globals.previousPaths[f];("line"===y.type||"area"===y.type)&&y.paths.length>0&&parseInt(y.realIndex,10)===parseInt(d,10)&&("line"===y.type?(this.lineCtx.appendPathFrom=!1,a=g.globals.previousPaths[f].paths[0].d):"area"===y.type&&(this.lineCtx.appendPathFrom=!1,h=g.globals.previousPaths[f].paths[0].d,g.config.stroke.show&&g.globals.previousPaths[f].paths[1]&&(a=g.globals.previousPaths[f].paths[1].d)))}return{pathFromLine:a,pathFromArea:h}}},{key:"determineFirstPrevY",value:function(s){var a,h,d=s.i,g=s.series,f=s.prevY,y=s.lineYPosition,w=this.w,k=w.config.chart.stacked&&!w.globals.comboCharts||w.config.chart.stacked&&w.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(a=this.w.config.series[d])||void 0===a?void 0:a.type));if(void 0!==(null===(h=g[d])||void 0===h?void 0:h[0]))f=(y=k&&d>0?this.lineCtx.prevSeriesY[d-1][0]:this.lineCtx.zeroY)-g[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?g[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(k&&d>0&&void 0===g[d][0])for(var C=d-1;C>=0;C--)if(null!=g[C][0]){f=y=this.lineCtx.prevSeriesY[C][0];break}return{prevY:f,lineYPosition:y}}}]),R}(),Fa=function(R){for(var s="",a=0;a<R.length;a++){var h=R[a],d=h.length;d>4?(s+="C".concat(h[0],", ").concat(h[1]),s+=", ".concat(h[2],", ").concat(h[3]),s+=", ".concat(h[4],", ").concat(h[5])):d>2&&(s+="S".concat(h[0],", ").concat(h[1]),s+=", ".concat(h[2],", ").concat(h[3]))}return s},$=function(R){var s=function(R){for(var s,a,h,d,g=function(C){for(var T=[],P=C[0],F=C[1],O=T[0]=Gn(P,F),j=1,Y=C.length-1;j<Y;j++)T[j]=.5*(O+(O=Gn(P=F,F=C[j+1])));return T[j]=O,T}(R),f=R.length-1,y=[],w=0;w<f;w++)h=Gn(R[w],R[w+1]),Math.abs(h)<1e-6?g[w]=g[w+1]=0:(d=(s=g[w]/h)*s+(a=g[w+1]/h)*a)>9&&(d=3*h/Math.sqrt(d),g[w]=d*s,g[w+1]=d*a);for(var k=0;k<=f;k++)d=(R[Math.min(f,k+1)][0]-R[Math.max(0,k-1)][0])/(6*(1+g[k]*g[k])),y.push([d||0,g[k]*d||0]);return y}(R),a=R[1],h=R[0],d=[],g=s[1],f=s[0];d.push(h,[h[0]+f[0],h[1]+f[1],a[0]-g[0],a[1]-g[1],a[0],a[1]]);for(var y=2,w=s.length;y<w;y++){var k=R[y],C=s[y];d.push([k[0]-C[0],k[1]-C[1],k[0],k[1]])}return d};function Gn(R,s){return(s[1]-R[1])/(s[0]-R[0])}var Ia=function(){function R(s,a,h){xt(this,R),this.ctx=s,this.w=s.w,this.xyRatios=a,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||h,this.scatter=new bs(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new wu(this),this.markers=new gn(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Yt(R,[{key:"draw",value:function(s,a,h,d){var g,f=this.w,y=new kt(this.ctx),w=f.globals.comboCharts?a:f.config.chart.type,k=y.group({class:"apexcharts-".concat(w,"-series apexcharts-plot-series")}),C=new it(this.ctx,f);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,s=C.getLogSeries(s),this.yRatio=C.getLogYRatios(this.yRatio);for(var T=[],P=0;P<s.length;P++){s=this.lineHelpers.sameValueSeriesFix(P,s);var F=f.globals.comboCharts?h[P]:P;this._initSerieVariables(s,P,F);var O=[],j=[],Y=[],G=f.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,F),f.globals.isXNumeric&&f.globals.seriesX.length>0&&(G=(f.globals.seriesX[F][0]-f.globals.minX)/this.xRatio),Y.push(G);var U,S=G,N=void 0,E=S,H=this.zeroY,W=this.zeroY;H=this.lineHelpers.determineFirstPrevY({i:P,series:s,prevY:H,lineYPosition:0}).prevY,O.push("monotonCubic"===f.config.stroke.curve&&null===s[P][0]?null:H),U=H,"rangeArea"===w&&(N=W=this.lineHelpers.determineFirstPrevY({i:P,series:d,prevY:W,lineYPosition:0}).prevY,j.push(W));var K={type:w,series:s,realIndex:F,i:P,x:G,y:1,pX:S,pY:U,pathsFrom:this._calculatePathsFrom({type:w,series:s,i:P,realIndex:F,prevX:E,prevY:H,prevY2:W}),linePaths:[],areaPaths:[],seriesIndex:h,lineYPosition:0,xArrj:Y,yArrj:O,y2Arrj:j,seriesRangeEnd:d},tt=this._iterateOverDataPoints(v(v({},K),{},{iterations:"rangeArea"===w?s[P].length-1:void 0,isRangeStart:!0}));if("rangeArea"===w){var et=this._calculatePathsFrom({series:d,i:P,realIndex:F,prevX:E,prevY:W}),gt=this._iterateOverDataPoints(v(v({},K),{},{series:d,pY:N,pathsFrom:et,iterations:d[P].length-1,isRangeStart:!1}));tt.linePaths[0]=gt.linePath+tt.linePath,tt.pathFromLine=gt.pathFromLine+tt.pathFromLine}this._handlePaths({type:w,realIndex:F,i:P,paths:tt}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),T.push(this.elSeries)}if(void 0!==(null===(g=f.config.series[0])||void 0===g?void 0:g.zIndex)&&T.sort(function(Et,Gt){return Number(Et.node.getAttribute("zIndex"))-Number(Gt.node.getAttribute("zIndex"))}),f.config.chart.stacked)for(var St=T.length;St>0;St--)k.add(T[St-1]);else for(var bt=0;bt<T.length;bt++)k.add(T[bt]);return k}},{key:"_initSerieVariables",value:function(s,a,h){var d=this.w,g=new kt(this.ctx);this.xDivision=d.globals.gridWidth/(d.globals.dataPoints-("on"===d.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(d.config.stroke.width)?d.config.stroke.width[h]:d.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=h),this.isReversed=d.config.yaxis[this.yaxisIndex]&&d.config.yaxis[this.yaxisIndex].reversed,this.zeroY=d.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?d.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>d.globals.gridHeight||"end"===d.config.plotOptions.area.fillTo)&&(this.areaBottomY=d.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=g.group({class:"apexcharts-series",zIndex:void 0!==d.config.series[h].zIndex?d.config.series[h].zIndex:h,seriesName:ht.escapeString(d.globals.seriesNames[h])}),this.elPointsMain=g.group({class:"apexcharts-series-markers-wrap","data:realIndex":h}),this.elDataLabelsWrap=g.group({class:"apexcharts-datalabels","data:realIndex":h}),this.elSeries.attr({"data:longestSeries":s[a].length===d.globals.dataPoints,rel:a+1,"data:realIndex":h}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(s){var a,h,d,g,f=s.type,y=s.series,w=s.i,k=s.realIndex,C=s.prevX,T=s.prevY,P=s.prevY2,F=this.w,O=new kt(this.ctx);if(null===y[w][0]){for(var j=0;j<y[w].length;j++)if(null!==y[w][j]){a=O.move(C=this.xDivision*j,T=this.zeroY-y[w][j]/this.yRatio[this.yaxisIndex]),h=O.move(C,this.areaBottomY);break}}else a=O.move(C,T),"rangeArea"===f&&(a=O.move(C,P)+O.line(C,T)),h=O.move(C,this.areaBottomY)+O.line(C,T);if(d=O.move(-1,this.zeroY)+O.line(-1,this.zeroY),g=O.move(-1,this.zeroY)+O.line(-1,this.zeroY),F.globals.previousPaths.length>0){var Y=this.lineHelpers.checkPreviousPaths({pathFromLine:d,pathFromArea:g,realIndex:k});d=Y.pathFromLine,g=Y.pathFromArea}return{prevX:C,prevY:T,linePath:a,areaPath:h,pathFromLine:d,pathFromArea:g}}},{key:"_handlePaths",value:function(s){var a=s.type,h=s.realIndex,d=s.i,g=s.paths,f=this.w,y=new kt(this.ctx),w=new Vn(this.ctx);this.prevSeriesY.push(g.yArrj),f.globals.seriesXvalues[h]=g.xArrj,f.globals.seriesYvalues[h]=g.yArrj;var k=f.config.forecastDataPoints;if(k.count>0&&"rangeArea"!==a){var C=f.globals.seriesXvalues[h][f.globals.seriesXvalues[h].length-k.count-1],T=y.drawRect(C,0,f.globals.gridWidth,f.globals.gridHeight,0);f.globals.dom.elForecastMask.appendChild(T.node);var P=y.drawRect(0,0,C,f.globals.gridHeight,0);f.globals.dom.elNonForecastMask.appendChild(P.node)}this.pointsChart||f.globals.delayedElements.push({el:this.elPointsMain.node,index:h});var F={i:d,realIndex:h,animationDelay:d,initialSpeed:f.config.chart.animations.speed,dataChangeSpeed:f.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(a)};if("area"===a)for(var O=w.fillPath({seriesNumber:h}),j=0;j<g.areaPaths.length;j++){var Y=y.renderPaths(v(v({},F),{},{pathFrom:g.pathFromArea,pathTo:g.areaPaths[j],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:O}));this.elSeries.add(Y)}if(f.config.stroke.show&&!this.pointsChart){var G=null;if("line"===a)G=w.fillPath({seriesNumber:h,i:d});else if("solid"===f.config.stroke.fill.type)G=f.globals.stroke.colors[h];else{var U=f.config.fill;f.config.fill=f.config.stroke.fill,G=w.fillPath({seriesNumber:h,i:d}),f.config.fill=U}for(var S=0;S<g.linePaths.length;S++){var N=G;"rangeArea"===a&&(N=w.fillPath({seriesNumber:h}));var E=v(v({},F),{},{pathFrom:g.pathFromLine,pathTo:g.linePaths[S],stroke:G,strokeWidth:this.strokeWidth,strokeLineCap:f.config.stroke.lineCap,fill:"rangeArea"===a?N:"none"}),H=y.renderPaths(E);if(this.elSeries.add(H),H.attr("fill-rule","evenodd"),k.count>0&&"rangeArea"!==a){var W=y.renderPaths(E);W.node.setAttribute("stroke-dasharray",k.dashArray),k.strokeWidth&&W.node.setAttribute("stroke-width",k.strokeWidth),this.elSeries.add(W),W.attr("clip-path","url(#forecastMask".concat(f.globals.cuid,")")),H.attr("clip-path","url(#nonForecastMask".concat(f.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(s){var a,h=this,d=s.type,g=s.series,f=s.iterations,y=s.realIndex,w=s.i,k=s.x,C=s.y,T=s.pX,P=s.pY,F=s.pathsFrom,O=s.linePaths,j=s.areaPaths,Y=s.seriesIndex,G=s.lineYPosition,U=s.xArrj,S=s.yArrj,N=s.y2Arrj,E=s.isRangeStart,H=s.seriesRangeEnd,W=this.w,K=new kt(this.ctx),tt=this.yRatio,et=F.prevY,gt=F.linePath,St=F.areaPath,bt=F.pathFromLine,Et=F.pathFromArea,Gt=ht.isNumber(W.globals.minYArr[y])?W.globals.minYArr[y]:W.globals.minY;f||(f=W.globals.dataPoints>1?W.globals.dataPoints-1:W.globals.dataPoints);for(var Bt=function(ni,yo){return yo-ni/tt[h.yaxisIndex]+2*(h.isReversed?ni/tt[h.yaxisIndex]:0)},he=C,me=W.config.chart.stacked&&!W.globals.comboCharts||W.config.chart.stacked&&W.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(a=this.w.config.series[y])||void 0===a?void 0:a.type)),fe=0;fe<f;fe++){var Be=null==g[w][fe+1];if(W.globals.isXNumeric){var ye=W.globals.seriesX[y][fe+1];void 0===W.globals.seriesX[y][fe+1]&&(ye=W.globals.seriesX[y][f-1]),k=(ye-W.globals.minX)/this.xRatio}else k+=this.xDivision;G=me&&w>0&&W.globals.collapsedSeries.length<W.config.series.length-1?this.prevSeriesY[function(ni){for(var yo=ni,Ri=0;Ri<W.globals.series.length;Ri++)if(W.globals.collapsedSeriesIndices.indexOf(ni)>-1){yo--;break}return yo>=0?yo:0}(w-1)][fe+1]:this.zeroY,Be?C=Bt(Gt,G):(C=Bt(g[w][fe+1],G),"rangeArea"===d&&(he=Bt(H[w][fe+1],G))),U.push(k),S.push(Be&&"smooth"===W.config.stroke.curve?null:C),N.push(he);var _e=this.lineHelpers.calculatePoints({series:g,x:k,y:C,realIndex:y,i:w,j:fe,prevY:et}),Le=this._createPaths({type:d,series:g,i:w,realIndex:y,j:fe,x:k,y:C,y2:he,xArrj:U,yArrj:S,y2Arrj:N,pX:T,pY:P,linePath:gt,areaPath:St,linePaths:O,areaPaths:j,seriesIndex:Y,isRangeStart:E});j=Le.areaPaths,O=Le.linePaths,T=Le.pX,P=Le.pY,St=Le.areaPath,gt=Le.linePath,!this.appendPathFrom||"monotoneCubic"===W.config.stroke.curve&&"rangeArea"===d||(bt+=K.line(k,this.zeroY),Et+=K.line(k,this.zeroY)),this.handleNullDataPoints(g,_e,w,fe,y),this._handleMarkersAndLabels({type:d,pointsPos:_e,i:w,j:fe,realIndex:y,isRangeStart:E})}return{yArrj:S,xArrj:U,pathFromArea:Et,areaPaths:j,pathFromLine:bt,linePaths:O,linePath:gt,areaPath:St}}},{key:"_handleMarkersAndLabels",value:function(s){var a=s.type,h=s.pointsPos,d=s.isRangeStart,g=s.i,f=s.j,y=s.realIndex,w=this.w,k=new ut(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,f,{realIndex:y,pointsPos:h,zRatio:this.zRatio,elParent:this.elPointsMain});else{w.globals.series[g].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var C=this.markers.plotChartMarkers(h,y,f+1);null!==C&&this.elPointsMain.add(C)}var T=k.drawDataLabel({type:a,isRangeStart:d,pos:h,i:y,j:f+1});null!==T&&this.elDataLabelsWrap.add(T)}},{key:"_createPaths",value:function(s){var a=s.type,h=s.series,d=s.i,g=s.realIndex,f=s.j,y=s.x,w=s.y,k=s.xArrj,C=s.yArrj,T=s.y2,P=s.y2Arrj,F=s.pX,O=s.pY,j=s.linePath,Y=s.areaPath,G=s.linePaths,U=s.areaPaths,S=s.seriesIndex,N=s.isRangeStart,E=this.w,H=new kt(this.ctx),W=E.config.stroke.curve,K=this.areaBottomY;if(Array.isArray(E.config.stroke.curve)&&(W=Array.isArray(S)?E.config.stroke.curve[S[d]]:E.config.stroke.curve[d]),"rangeArea"===a&&(E.globals.hasNullValues||E.config.forecastDataPoints.count>0)&&"monotoneCubic"===W&&(W="straight"),"monotoneCubic"===W){var tt="rangeArea"===a?k.length===E.globals.dataPoints:f===h[d].length-2,et=k.map(function(me,fe){return[k[fe],C[fe]]}).filter(function(me){return null!==me[1]});if(tt&&et.length>1){var gt=$(et);if(j+=Fa(gt),null===h[d][0]?Y=j:Y+=Fa(gt),"rangeArea"===a&&N){j+=H.line(k[k.length-1],P[P.length-1]);var St=k.slice().reverse(),bt=P.slice().reverse(),Et=St.map(function(me,fe){return[St[fe],bt[fe]]}),Gt=$(Et);Y=j+=Fa(Gt)}else Y+=H.line(et[et.length-1][0],K)+H.line(et[0][0],K)+H.move(et[0][0],et[0][1])+"z";G.push(j),U.push(Y)}}else if("smooth"===W){var Bt=.35*(y-F);E.globals.hasNullValues?(null!==h[d][f]&&(null!==h[d][f+1]?(j=H.move(F,O)+H.curve(F+Bt,O,y-Bt,w,y+1,w),Y=H.move(F+1,O)+H.curve(F+Bt,O,y-Bt,w,y+1,w)+H.line(y,K)+H.line(F,K)+"z"):(j=H.move(F,O),Y=H.move(F,O)+"z")),G.push(j),U.push(Y)):(j+=H.curve(F+Bt,O,y-Bt,w,y,w),Y+=H.curve(F+Bt,O,y-Bt,w,y,w)),F=y,O=w,f===h[d].length-2&&(Y=Y+H.curve(F,O,y,w,y,K)+H.move(y,w)+"z","rangeArea"===a&&N?j=j+H.curve(F,O,y,w,y,T)+H.move(y,T)+"z":E.globals.hasNullValues||(G.push(j),U.push(Y)))}else null===h[d][f+1]&&(j+=H.move(y,w),Y=Y+H.line(E.globals.isXNumeric?(E.globals.seriesX[g][f]-E.globals.minX)/this.xRatio:y-this.xDivision,K)+H.move(y,w)+"z"),null===h[d][f]&&(j+=H.move(y,w),Y+=H.move(y,K)),"stepline"===W?(j=j+H.line(y,null,"H")+H.line(null,w,"V"),Y=Y+H.line(y,null,"H")+H.line(null,w,"V")):"straight"===W&&(j+=H.line(y,w),Y+=H.line(y,w)),f===h[d].length-2&&(Y=Y+H.line(y,K)+H.move(y,w)+"z","rangeArea"===a&&N?j=j+H.line(y,T)+H.move(y,T)+"z":(G.push(j),U.push(Y)));return{linePaths:G,areaPaths:U,pX:F,pY:O,linePath:j,areaPath:Y}}},{key:"handleNullDataPoints",value:function(s,a,h,d,g){var f=this.w;if(null===s[h][d]&&f.config.markers.showNullDataPoints||1===s[h].length){var y=this.markers.plotChartMarkers(a,g,d+1,this.strokeWidth-f.config.markers.strokeWidth/2,!0);null!==y&&this.elPointsMain.add(y)}}}]),R}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function R(y,w,k,C){this.xoffset=y,this.yoffset=w,this.height=C,this.width=k,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(T){var P,F=[],O=this.xoffset,j=this.yoffset,Y=g(T)/this.height,G=g(T)/this.width;if(this.width>=this.height)for(P=0;P<T.length;P++)F.push([O,j,O+Y,j+T[P]/Y]),j+=T[P]/Y;else for(P=0;P<T.length;P++)F.push([O,j,O+T[P]/G,j+G]),O+=T[P]/G;return F},this.cutArea=function(T){var P;if(this.width>=this.height){var F=T/this.height;P=new R(this.xoffset+F,this.yoffset,this.width-F,this.height)}else{var j=T/this.width;P=new R(this.xoffset,this.yoffset+j,this.width,this.height-j)}return P}}function s(y,w,k,C,T){return C=void 0===C?0:C,T=void 0===T?0:T,function(F){var O,j,Y=[];for(O=0;O<F.length;O++)for(j=0;j<F[O].length;j++)Y.push(F[O][j]);return Y}(a(function(F,O){var j,Y=[],G=O/g(F);for(j=0;j<F.length;j++)Y[j]=F[j]*G;return Y}(y,w*k),[],new R(C,T,w,k),[]))}function a(y,w,k,C){var T,P,F,O,j,Y,G;if(0!==y.length)return T=k.shortestEdge(),j=P=y[0],Y=T,0===(O=w).length||((G=O.slice()).push(j),h(O,Y)>=h(G,Y))?(w.push(P),a(y.slice(1),w,k,C)):(F=k.cutArea(g(w),C),C.push(k.getCoordinates(w)),a(y,[],F,C)),C;C.push(k.getCoordinates(w))}function h(y,w){var k=Math.min.apply(Math,y),C=Math.max.apply(Math,y),T=g(y);return Math.max(Math.pow(w,2)*C/Math.pow(T,2),Math.pow(T,2)/(Math.pow(w,2)*k))}function d(y){return y&&y.constructor===Array}function g(y){var w,k=0;for(w=0;w<y.length;w++)k+=y[w];return k}function f(y){var w,k=0;if(d(y[0]))for(w=0;w<y.length;w++)k+=f(y[w]);else k=g(y);return k}return function y(w,k,C,T,P){T=void 0===T?0:T,P=void 0===P?0:P;var F,O,j=[],Y=[];if(d(w[0])){for(O=0;O<w.length;O++)j[O]=f(w[O]);for(F=s(j,k,C,T,P),O=0;O<w.length;O++)Y.push(y(w[O],F[O][2]-F[O][0],F[O][3]-F[O][1],F[O][0],F[O][1]))}else Y=s(w,k,C,T,P);return Y}}();var Oa,Ea,Da=function(){function R(s,a){xt(this,R),this.ctx=s,this.w=s.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new vr(s),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Yt(R,[{key:"draw",value:function(s){var a=this,h=this.w,d=new kt(this.ctx),g=new Vn(this.ctx),f=d.group({class:"apexcharts-treemap"});if(h.globals.noData)return f;var y=[];return s.forEach(function(w){var k=w.map(function(C){return Math.abs(C)});y.push(k)}),this.negRange=this.helpers.checkColorRange(),h.config.series.forEach(function(w,k){w.data.forEach(function(C){Array.isArray(a.labels[k])||(a.labels[k]=[]),a.labels[k].push(C.x)})}),window.TreemapSquared.generate(y,h.globals.gridWidth,h.globals.gridHeight).forEach(function(w,k){var C=d.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:ht.escapeString(h.globals.seriesNames[k]),rel:k+1,"data:realIndex":k});if(h.config.chart.dropShadow.enabled){var T=h.config.chart.dropShadow;new si(a.ctx).dropShadow(f,T,k)}var P=d.group({class:"apexcharts-data-labels"});w.forEach(function(F,O){var j=F[0],Y=F[1],G=F[2],U=F[3],S=d.drawRect(j,Y,G-j,U-Y,h.config.plotOptions.treemap.borderRadius,"#fff",1,a.strokeWidth,h.config.plotOptions.treemap.useFillColorAsStroke?E:h.globals.stroke.colors[k]);S.attr({cx:j,cy:Y,index:k,i:k,j:O,width:G-j,height:U-Y});var N=a.helpers.getShadeColor(h.config.chart.type,k,O,a.negRange),E=N.color;void 0!==h.config.series[k].data[O]&&h.config.series[k].data[O].fillColor&&(E=h.config.series[k].data[O].fillColor);var H=g.fillPath({color:E,seriesNumber:k,dataPointIndex:O});S.node.classList.add("apexcharts-treemap-rect"),S.attr({fill:H}),a.helpers.addListeners(S);var W={x:j+(G-j)/2,y:Y+(U-Y)/2,width:0,height:0},K={x:j,y:Y,width:G-j,height:U-Y};if(h.config.chart.animations.enabled&&!h.globals.dataChanged){var tt=1;h.globals.resized||(tt=h.config.chart.animations.speed),a.animateTreemap(S,W,K,tt)}h.globals.dataChanged&&a.dynamicAnim.enabled&&h.globals.shouldAnimate&&(h.globals.previousPaths[k]&&h.globals.previousPaths[k][O]&&h.globals.previousPaths[k][O].rect&&(W=h.globals.previousPaths[k][O].rect),a.animateTreemap(S,W,K,a.dynamicAnim.speed));var gt=a.getFontSize(F),St=h.config.dataLabels.formatter(a.labels[k][O],{value:h.globals.series[k][O],seriesIndex:k,dataPointIndex:O,w:h});"truncate"===h.config.plotOptions.treemap.dataLabels.format&&(gt=parseInt(h.config.dataLabels.style.fontSize,10),St=a.truncateLabels(St,gt,j,Y,G,U));var bt=a.helpers.calculateDataLabels({text:St,x:(j+G)/2,y:(Y+U)/2+a.strokeWidth/2+gt/3,i:k,j:O,colorProps:N,fontSize:gt,series:s});h.config.dataLabels.enabled&&bt&&a.rotateToFitLabel(bt,gt,St,j,Y,G,U),C.add(S),null!==bt&&C.add(bt)}),C.add(P),f.add(C)}),f}},{key:"getFontSize",value:function(s){var f,a=this.w,y=function w(k){var C,T=0;if(Array.isArray(k[0]))for(C=0;C<k.length;C++)T+=w(k[C]);else for(C=0;C<k.length;C++)T+=k[C].length;return T}(this.labels)/function w(k){var C,T=0;if(Array.isArray(k[0]))for(C=0;C<k.length;C++)T+=w(k[C]);else for(C=0;C<k.length;C++)T+=1;return T}(this.labels);return f=Math.pow((s[2]-s[0])*(s[3]-s[1]),.5),Math.min(f/y,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(s,a,h,d,g,f,y){var w=new kt(this.ctx),k=w.getTextRects(h,a);if(k.width+this.w.config.stroke.width+5>f-d&&k.width<=y-g){var C=w.rotateAroundCenter(s.node);s.node.setAttribute("transform","rotate(-90 ".concat(C.x," ").concat(C.y,") translate(").concat(k.height/3,")"))}}},{key:"truncateLabels",value:function(s,a,h,d,g,f){var y=new kt(this.ctx),w=y.getTextRects(s,a).width+this.w.config.stroke.width+5>g-h&&f-d>g-h?f-d:g-h,k=y.getTextBasedOnMaxWidth({text:s,maxWidth:w,fontSize:a});return s.length!==k.length&&w/a<5?"":k}},{key:"animateTreemap",value:function(s,a,h,d){var g=new To(this.ctx);g.animateRect(s,{x:a.x,y:a.y,width:a.width,height:a.height},{x:h.x,y:h.y,width:h.width,height:h.height},d,function(){g.animationCompleted(s)})}}]),R}(),ku=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Yt(R,[{key:"calculateTimeScaleTicks",value:function(s,a){var h=this,d=this.w;if(d.globals.allSeriesCollapsed)return d.globals.labels=[],d.globals.timescaleLabels=[],[];var g=new ai(this.ctx),f=(a-s)/864e5;this.determineInterval(f),d.globals.disableZoomIn=!1,d.globals.disableZoomOut=!1,f<.00011574074074074075?d.globals.disableZoomIn=!0:f>5e4&&(d.globals.disableZoomOut=!0);var y=g.getTimeUnitsfromTimestamp(s,a,this.utc),w=d.globals.gridWidth/f,k=w/24,C=k/60,T=C/60,P=Math.floor(24*f),F=Math.floor(1440*f),O=Math.floor(86400*f),j=Math.floor(f),Y=Math.floor(f/30),G=Math.floor(f/365),U={minMillisecond:y.minMillisecond,minSecond:y.minSecond,minMinute:y.minMinute,minHour:y.minHour,minDate:y.minDate,minMonth:y.minMonth,minYear:y.minYear},S={firstVal:U,currentMillisecond:U.minMillisecond,currentSecond:U.minSecond,currentMinute:U.minMinute,currentHour:U.minHour,currentMonthDate:U.minDate,currentDate:U.minDate,currentMonth:U.minMonth,currentYear:U.minYear,daysWidthOnXAxis:w,hoursWidthOnXAxis:k,minutesWidthOnXAxis:C,secondsWidthOnXAxis:T,numberOfSeconds:O,numberOfMinutes:F,numberOfHours:P,numberOfDays:j,numberOfMonths:Y,numberOfYears:G};switch(this.tickInterval){case"years":this.generateYearScale(S);break;case"months":case"half_year":this.generateMonthScale(S);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(S);break;case"hours":this.generateHourScale(S);break;case"minutes_fives":case"minutes":this.generateMinuteScale(S);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(S)}var N=this.timeScaleArray.map(function(E){var H={position:E.position,unit:E.unit,year:E.year,day:E.day?E.day:1,hour:E.hour?E.hour:0,month:E.month+1};return"month"===E.unit?v(v({},H),{},{day:1,value:E.value+1}):"day"===E.unit||"hour"===E.unit?v(v({},H),{},{value:E.value}):"minute"===E.unit?v(v({},H),{},{value:E.value,minute:E.value}):"second"===E.unit?v(v({},H),{},{value:E.value,minute:E.minute,second:E.second}):E});return N.filter(function(E){var H=1,W=Math.ceil(d.globals.gridWidth/120),K=E.value;void 0!==d.config.xaxis.tickAmount&&(W=d.config.xaxis.tickAmount),N.length>W&&(H=Math.floor(N.length/W));var tt=!1,et=!1;switch(h.tickInterval){case"years":"year"===E.unit&&(tt=!0);break;case"half_year":H=7,"year"===E.unit&&(tt=!0);break;case"months":H=1,"year"===E.unit&&(tt=!0);break;case"months_fortnight":H=15,"year"!==E.unit&&"month"!==E.unit||(tt=!0),30===K&&(et=!0);break;case"months_days":H=10,"month"===E.unit&&(tt=!0),30===K&&(et=!0);break;case"week_days":H=8,"month"===E.unit&&(tt=!0);break;case"days":H=1,"month"===E.unit&&(tt=!0);break;case"hours":"day"===E.unit&&(tt=!0);break;case"minutes_fives":case"seconds_fives":K%5!=0&&(et=!0);break;case"seconds_tens":K%10!=0&&(et=!0)}if("hours"===h.tickInterval||"minutes_fives"===h.tickInterval||"seconds_tens"===h.tickInterval||"seconds_fives"===h.tickInterval){if(!et)return!0}else if((K%H==0||tt)&&!et)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(s,a){var h=this.w,d=this.formatDates(s),g=this.removeOverlappingTS(d);h.globals.timescaleLabels=g.slice(),new li(this.ctx).plotCoords()}},{key:"determineInterval",value:function(s){var a=24*s,h=60*a;switch(!0){case s/365>5:this.tickInterval="years";break;case s>800:this.tickInterval="half_year";break;case s>180:this.tickInterval="months";break;case s>90:this.tickInterval="months_fortnight";break;case s>60:this.tickInterval="months_days";break;case s>30:this.tickInterval="week_days";break;case s>2:this.tickInterval="days";break;case a>2.4:this.tickInterval="hours";break;case h>15:this.tickInterval="minutes_fives";break;case h>5:this.tickInterval="minutes";break;case h>1:this.tickInterval="seconds_tens";break;case 60*h>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(s){var a=s.firstVal,h=s.currentMonth,d=s.currentYear,g=s.daysWidthOnXAxis,f=s.numberOfYears,y=a.minYear,w=0,k=new ai(this.ctx),C="year";if(a.minDate>1||a.minMonth>0){var T=k.determineRemainingDaysOfYear(a.minYear,a.minMonth,a.minDate);w=(k.determineDaysOfYear(a.minYear)-T+1)*g,this.timeScaleArray.push({position:w,value:y=a.minYear+1,unit:C,year:y,month:ht.monthMod(h+1)})}else 1===a.minDate&&0===a.minMonth&&this.timeScaleArray.push({position:w,value:y,unit:C,year:d,month:ht.monthMod(h+1)});for(var P=y,F=w,O=0;O<f;O++)P++,F=k.determineDaysOfYear(P-1)*g+F,this.timeScaleArray.push({position:F,value:P,unit:C,year:P,month:1})}},{key:"generateMonthScale",value:function(s){var a=s.firstVal,h=s.currentMonthDate,d=s.currentMonth,g=s.currentYear,f=s.daysWidthOnXAxis,y=s.numberOfMonths,w=d,k=0,C=new ai(this.ctx),T="month",P=0;if(a.minDate>1){k=(C.determineDaysOfMonths(d+1,a.minYear)-h+1)*f,w=ht.monthMod(d+1);var F=g+P,O=ht.monthMod(w),j=w;0===w&&(T="year",j=F,O=1,F+=P+=1),this.timeScaleArray.push({position:k,value:j,unit:T,year:F,month:O})}else this.timeScaleArray.push({position:k,value:w,unit:T,year:g,month:ht.monthMod(d)});for(var Y=w+1,G=k,U=0,S=1;U<y;U++,S++){0===(Y=ht.monthMod(Y))?(T="year",P+=1):T="month";var N=this._getYear(g,Y,P);G=C.determineDaysOfMonths(Y,N)*f+G,this.timeScaleArray.push({position:G,value:0===Y?N:Y,unit:T,year:N,month:0===Y?1:Y}),Y++}}},{key:"generateDayScale",value:function(s){var a=s.firstVal,h=s.currentMonth,d=s.currentYear,g=s.hoursWidthOnXAxis,f=s.numberOfDays,y=new ai(this.ctx),w="day",k=a.minDate+1,C=k,T=function(S,N,E){return S>y.determineDaysOfMonths(N+1,E)&&(C=1,w="month",F=N+=1),N},P=(24-a.minHour)*g,F=k,O=T(C,h,d);0===a.minHour&&1===a.minDate?(P=0,F=ht.monthMod(a.minMonth),w="month",C=a.minDate):1!==a.minDate&&0===a.minHour&&0===a.minMinute&&(P=0,F=k=a.minDate,O=T(C=k,h,d)),this.timeScaleArray.push({position:P,value:F,unit:w,year:this._getYear(d,O,0),month:ht.monthMod(O),day:C});for(var j=P,Y=0;Y<f;Y++){w="day",O=T(C+=1,O,this._getYear(d,O,0));var G=this._getYear(d,O,0);j=24*g+j;var U=1===C?ht.monthMod(O):C;this.timeScaleArray.push({position:j,value:U,unit:w,year:G,month:ht.monthMod(O),day:U})}}},{key:"generateHourScale",value:function(s){var a=s.firstVal,h=s.currentDate,d=s.currentMonth,g=s.currentYear,f=s.minutesWidthOnXAxis,y=s.numberOfHours,w=new ai(this.ctx),k="hour",C=function(H,W){return H>w.determineDaysOfMonths(W+1,g)&&(Y=1,W+=1),{month:W,date:Y}},T=function(H,W){return H>w.determineDaysOfMonths(W+1,g)?W+=1:W},P=60-(a.minMinute+a.minSecond/60),F=P*f,O=a.minHour+1,j=O;60===P&&(F=0,j=O=a.minHour);var Y=h;j>=24&&(j=0,Y+=1,k="day");var G=C(Y,d).month;G=T(Y,G),this.timeScaleArray.push({position:F,value:O,unit:k,day:Y,hour:j,year:g,month:ht.monthMod(G)}),j++;for(var U=F,S=0;S<y;S++){k="hour",j>=24&&(j=0,k="day",G=C(Y+=1,G).month,G=T(Y,G));var N=this._getYear(g,G,0);this.timeScaleArray.push({position:U=60*f+U,value:0===j?Y:j,unit:k,hour:j,day:Y,year:N,month:ht.monthMod(G)}),j++}}},{key:"generateMinuteScale",value:function(s){for(var k=s.minutesWidthOnXAxis,T=s.numberOfMinutes,P=s.currentMinute+1,F=s.currentDate,O=s.currentMonth,j=s.currentYear,Y=s.currentHour,G=(60-s.currentSecond-s.currentMillisecond/1e3)*s.secondsWidthOnXAxis,U=0;U<T;U++)P>=60&&(P=0,24===(Y+=1)&&(Y=0)),this.timeScaleArray.push({position:G,value:P,unit:"minute",hour:Y,minute:P,day:F,year:this._getYear(j,O,0),month:ht.monthMod(O)}),G+=k,P++}},{key:"generateSecondScale",value:function(s){for(var k=s.secondsWidthOnXAxis,C=s.numberOfSeconds,T=s.currentSecond+1,P=s.currentMinute,F=s.currentDate,O=s.currentMonth,j=s.currentYear,Y=s.currentHour,G=(1e3-s.currentMillisecond)/1e3*k,U=0;U<C;U++)T>=60&&(T=0,++P>=60&&(P=0,24==++Y&&(Y=0))),this.timeScaleArray.push({position:G,value:T,unit:"second",hour:Y,minute:P,second:T,day:F,year:this._getYear(j,O,0),month:ht.monthMod(O)}),G+=k,T++}},{key:"createRawDateString",value:function(s,a){var h=s.year;return 0===s.month&&(s.month=1),h+="-"+("0"+s.month.toString()).slice(-2),h+="day"===s.unit?"day"===s.unit?"-"+("0"+a).slice(-2):"-01":"-"+("0"+(s.day?s.day:"1")).slice(-2),h+="hour"===s.unit?"hour"===s.unit?"T"+("0"+a).slice(-2):"T00":"T"+("0"+(s.hour?s.hour:"0")).slice(-2),h+="minute"===s.unit?":"+("0"+a).slice(-2):":"+(s.minute?("0"+s.minute).slice(-2):"00"),h+="second"===s.unit?":"+("0"+a).slice(-2):":00",this.utc&&(h+=".000Z"),h}},{key:"formatDates",value:function(s){var a=this,h=this.w;return s.map(function(d){var g=d.value.toString(),f=new ai(a.ctx),y=a.createRawDateString(d,g),w=f.getDate(f.parseDate(y));if(a.utc||(w=f.getDate(f.parseDateWithTimezone(y))),void 0===h.config.xaxis.labels.format){var k="dd MMM",C=h.config.xaxis.labels.datetimeFormatter;"year"===d.unit&&(k=C.year),"month"===d.unit&&(k=C.month),"day"===d.unit&&(k=C.day),"hour"===d.unit&&(k=C.hour),"minute"===d.unit&&(k=C.minute),"second"===d.unit&&(k=C.second),g=f.formatDate(w,k)}else g=f.formatDate(w,h.config.xaxis.labels.format);return{dateString:y,position:d.position,value:g,unit:d.unit,year:d.year,month:d.month}})}},{key:"removeOverlappingTS",value:function(s){var a,h=this,d=new kt(this.ctx),g=!1;s.length>0&&s[0].value&&s.every(function(w){return w.value.length===s[0].value.length})&&(g=!0,a=d.getTextRects(s[0].value).width);var f=0;return s.map(function(w,k){if(k>0&&h.w.config.xaxis.labels.hideOverlappingLabels){var C=g?a:d.getTextRects(s[f].value).width;return w.position>s[f].position+C+10?(f=k,w):null}return w}).filter(function(w){return null!==w})}},{key:"_getYear",value:function(s,a,h){return s+Math.floor(a/12)+h}}]),R}(),ii=function(){function R(s,a){xt(this,R),this.ctx=a,this.w=a.w,this.el=s}return Yt(R,[{key:"setupElements",value:function(){var s=this.w.globals,a=this.w.config,h=a.chart.type;s.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(h)>-1,s.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(h)>-1,s.isBarHorizontal=("bar"===a.chart.type||"rangeBar"===a.chart.type||"boxPlot"===a.chart.type)&&a.plotOptions.bar.horizontal,s.chartClass=".apexcharts"+s.chartID,s.dom.baseEl=this.el,s.dom.elWrap=document.createElement("div"),kt.setAttrs(s.dom.elWrap,{id:s.chartClass.substring(1),class:"apexcharts-canvas "+s.chartClass.substring(1)}),this.el.appendChild(s.dom.elWrap),s.dom.Paper=new window.SVG.Doc(s.dom.elWrap),s.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(a.chart.offsetX,", ").concat(a.chart.offsetY,")")}),s.dom.Paper.node.style.background="dark"!==a.theme.mode||a.chart.background?a.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),s.dom.elLegendForeign=document.createElementNS(s.SVGNS,"foreignObject"),kt.setAttrs(s.dom.elLegendForeign,{x:0,y:0,width:s.svgWidth,height:s.svgHeight}),s.dom.elLegendWrap=document.createElement("div"),s.dom.elLegendWrap.classList.add("apexcharts-legend"),s.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),s.dom.elLegendForeign.appendChild(s.dom.elLegendWrap),s.dom.Paper.node.appendChild(s.dom.elLegendForeign),s.dom.elGraphical=s.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),s.dom.elDefs=s.dom.Paper.defs(),s.dom.Paper.add(s.dom.elGraphical),s.dom.elGraphical.add(s.dom.elDefs)}},{key:"plotChartType",value:function(s,a){var h=this.w,d=h.config,g=h.globals,f={series:[],i:[]},y={series:[],i:[]},w={series:[],i:[]},k={series:[],i:[]},C={series:[],i:[]},T={series:[],i:[]},P={series:[],i:[]},F={series:[],i:[]},O={series:[],seriesRangeEnd:[],i:[]};g.series.map(function(W,K){var tt=0;void 0!==s[K].type?("column"===s[K].type||"bar"===s[K].type?(g.series.length>1&&d.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),C.series.push(W),C.i.push(K),tt++,h.globals.columnSeries=C.series):"area"===s[K].type?(y.series.push(W),y.i.push(K),tt++):"line"===s[K].type?(f.series.push(W),f.i.push(K),tt++):"scatter"===s[K].type?(w.series.push(W),w.i.push(K)):"bubble"===s[K].type?(k.series.push(W),k.i.push(K),tt++):"candlestick"===s[K].type?(T.series.push(W),T.i.push(K),tt++):"boxPlot"===s[K].type?(P.series.push(W),P.i.push(K),tt++):"rangeBar"===s[K].type?(F.series.push(W),F.i.push(K),tt++):"rangeArea"===s[K].type?(O.series.push(g.seriesRangeStart[K]),O.seriesRangeEnd.push(g.seriesRangeEnd[K]),O.i.push(K),tt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),tt>1&&(g.comboCharts=!0)):(f.series.push(W),f.i.push(K))});var j=new Ia(this.ctx,a),Y=new Pt(this.ctx,a);this.ctx.pie=new xr(this.ctx);var G=new Zl(this.ctx);this.ctx.rangeBar=new Na(this.ctx,a);var U=new xu(this.ctx),S=[];if(g.comboCharts){if(y.series.length>0&&S.push(j.draw(y.series,"area",y.i)),C.series.length>0)if(h.config.chart.stacked){var N=new Pa(this.ctx,a);S.push(N.draw(C.series,C.i))}else this.ctx.bar=new yr(this.ctx,a),S.push(this.ctx.bar.draw(C.series,C.i));if(O.series.length>0&&S.push(j.draw(O.series,"rangeArea",O.i,O.seriesRangeEnd)),f.series.length>0&&S.push(j.draw(f.series,"line",f.i)),T.series.length>0&&S.push(Y.draw(T.series,"candlestick",T.i)),P.series.length>0&&S.push(Y.draw(P.series,"boxPlot",P.i)),F.series.length>0&&S.push(this.ctx.rangeBar.draw(F.series,F.i)),w.series.length>0){var E=new Ia(this.ctx,a,!0);S.push(E.draw(w.series,"scatter",w.i))}if(k.series.length>0){var H=new Ia(this.ctx,a,!0);S.push(H.draw(k.series,"bubble",k.i))}}else switch(d.chart.type){case"line":S=j.draw(g.series,"line");break;case"area":S=j.draw(g.series,"area");break;case"bar":d.chart.stacked?S=new Pa(this.ctx,a).draw(g.series):(this.ctx.bar=new yr(this.ctx,a),S=this.ctx.bar.draw(g.series));break;case"candlestick":S=new Pt(this.ctx,a).draw(g.series,"candlestick");break;case"boxPlot":S=new Pt(this.ctx,a).draw(g.series,d.chart.type);break;case"rangeBar":S=this.ctx.rangeBar.draw(g.series);break;case"rangeArea":S=j.draw(g.seriesRangeStart,"rangeArea",void 0,g.seriesRangeEnd);break;case"heatmap":S=new Ta(this.ctx,a).draw(g.series);break;case"treemap":S=new Da(this.ctx,a).draw(g.series);break;case"pie":case"donut":case"polarArea":S=this.ctx.pie.draw(g.series);break;case"radialBar":S=G.draw(g.series);break;case"radar":S=U.draw(g.series);break;default:S=j.draw(g.series)}return S}},{key:"setSVGDimensions",value:function(){var s=this.w.globals,a=this.w.config;s.svgWidth=a.chart.width,s.svgHeight=a.chart.height;var h=ht.getDimensions(this.el),d=a.chart.width.toString().split(/[0-9]+/g).pop();"%"===d?ht.isNumber(h[0])&&(0===h[0].width&&(h=ht.getDimensions(this.el.parentNode)),s.svgWidth=h[0]*parseInt(a.chart.width,10)/100):"px"!==d&&""!==d||(s.svgWidth=parseInt(a.chart.width,10));var g=a.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==s.svgHeight&&""!==s.svgHeight)if("%"===g){var f=ht.getDimensions(this.el.parentNode);s.svgHeight=f[1]*parseInt(a.chart.height,10)/100}else s.svgHeight=parseInt(a.chart.height,10);else s.svgHeight=s.axisCharts?s.svgWidth/1.61:s.svgWidth/1.2;s.svgWidth<0&&(s.svgWidth=0),s.svgHeight<0&&(s.svgHeight=0),kt.setAttrs(s.dom.Paper.node,{width:s.svgWidth,height:s.svgHeight}),"%"!==g&&(s.dom.Paper.node.parentNode.parentNode.style.minHeight=s.svgHeight+(a.chart.sparkline.enabled?0:s.axisCharts?a.chart.parentHeightOffset:0)+"px"),s.dom.elWrap.style.width=s.svgWidth+"px",s.dom.elWrap.style.height=s.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var s=this.w.globals;kt.setAttrs(s.dom.elGraphical.node,{transform:"translate("+s.translateX+", "+s.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var s=this.w,a=s.globals,h=0,d=s.config.chart.sparkline.enabled?1:15;d+=s.config.grid.padding.bottom,"top"!==s.config.legend.position&&"bottom"!==s.config.legend.position||!s.config.legend.show||s.config.legend.floating||(h=new B(this.ctx).legendHelpers.getLegendBBox().clwh+10);var g=s.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),f=2.05*s.globals.radialSize;if(g&&!s.config.chart.sparkline.enabled&&0!==s.config.plotOptions.radialBar.startAngle){var y=ht.getBoundingClientRect(g);f=y.bottom,f=Math.max(2.05*s.globals.radialSize,y.bottom-y.top)}var k=f+a.translateY+h+d;a.dom.elLegendForeign&&a.dom.elLegendForeign.setAttribute("height",k),s.config.chart.height&&String(s.config.chart.height).indexOf("%")>0||(a.dom.elWrap.style.height=k+"px",kt.setAttrs(a.dom.Paper.node,{height:k}),a.dom.Paper.node.parentNode.parentNode.style.minHeight=k+"px")}},{key:"coreCalculations",value:function(){new Pe(this.ctx).init()}},{key:"resetGlobals",value:function(){var s=this,a=function(){return s.w.config.series.map(function(g){return[]})},h=new ln,d=this.w.globals;h.initGlobalVars(d),d.seriesXvalues=a(),d.seriesYvalues=a()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var s=null,a=this.w;if(a.globals.axisCharts){if("back"===a.config.xaxis.crosshairs.position&&new ee(this.ctx).drawXCrosshairs(),"back"===a.config.yaxis[0].crosshairs.position&&new ee(this.ctx).drawYCrosshairs(),"datetime"===a.config.xaxis.type&&void 0===a.config.xaxis.labels.formatter){this.ctx.timeScale=new ku(this.ctx);var h=[];isFinite(a.globals.minX)&&isFinite(a.globals.maxX)&&!a.globals.isBarHorizontal?h=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minX,a.globals.maxX):a.globals.isBarHorizontal&&(h=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minY,a.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(h)}s=new it(this.ctx).getCalculatedRatios()}return s}},{key:"updateSourceChart",value:function(s){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:s.w.globals.minX,max:s.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var s=this,a=this.w;if(a.config.chart.brush.enabled&&"function"!=typeof a.config.chart.events.selection){var h=Array.isArray(a.config.chart.brush.targets)?a.config.chart.brush.targets:[a.config.chart.brush.target];h.forEach(function(d){var g=ApexCharts.getChartByID(d);g.w.globals.brushSource=s.ctx,"function"!=typeof g.w.config.chart.events.zoomed&&(g.w.config.chart.events.zoomed=function(){s.updateSourceChart(g)}),"function"!=typeof g.w.config.chart.events.scrolled&&(g.w.config.chart.events.scrolled=function(){s.updateSourceChart(g)})}),a.config.chart.events.selection=function(d,g){h.forEach(function(f){ApexCharts.getChartByID(f).ctx.updateHelpers._updateOptions({xaxis:{min:g.xaxis.min,max:g.xaxis.max}},!1,!1,!1,!1)})}}}}]),R}(),Fn=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"_updateOptions",value:function(s){var a=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(y){var w=[a.ctx];g&&(w=a.ctx.getSyncedCharts()),a.ctx.w.globals.isExecCalled&&(w=[a.ctx],a.ctx.w.globals.isExecCalled=!1),w.forEach(function(k,C){var T=k.w;if(T.globals.shouldAnimate=d,h||(T.globals.resized=!0,T.globals.dataChanged=!0,d&&k.series.getPreviousPaths()),s&&"object"===mi(s)&&(k.config=new mr(s),s=it.extendArrayProps(k.config,s,T),k.w.globals.chartID!==a.ctx.w.globals.chartID&&delete s.series,T.config=ht.extend(T.config,s),f&&(T.globals.lastXAxis=s.xaxis?ht.clone(s.xaxis):[],T.globals.lastYAxis=s.yaxis?ht.clone(s.yaxis):[],T.globals.initialConfig=ht.extend({},T.config),T.globals.initialSeries=ht.clone(T.config.series),s.series))){for(var P=0;P<T.globals.collapsedSeriesIndices.length;P++){var F=T.config.series[T.globals.collapsedSeriesIndices[P]];T.globals.collapsedSeries[P].data=T.globals.axisCharts?F.data.slice():F}for(var O=0;O<T.globals.ancillaryCollapsedSeriesIndices.length;O++){var j=T.config.series[T.globals.ancillaryCollapsedSeriesIndices[O]];T.globals.ancillaryCollapsedSeries[O].data=T.globals.axisCharts?j.data.slice():j}k.series.emptyCollapsedSeries(T.config.series)}return k.update(s).then(function(){C===w.length-1&&y(k)})})})}},{key:"_updateSeries",value:function(s,a){var h=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(g){var f,y=h.w;return y.globals.shouldAnimate=a,y.globals.dataChanged=!0,a&&h.ctx.series.getPreviousPaths(),y.globals.axisCharts?(0===(f=s.map(function(w,k){return h._extendSeries(w,k)})).length&&(f=[{data:[]}]),y.config.series=f):y.config.series=s.slice(),d&&(y.globals.initialConfig.series=ht.clone(y.config.series),y.globals.initialSeries=ht.clone(y.config.series)),h.ctx.update().then(function(){g(h.ctx)})})}},{key:"_extendSeries",value:function(s,a){var h=this.w,d=h.config.series[a];return v(v({},h.config.series[a]),{},{name:s.name?s.name:d?.name,color:s.color?s.color:d?.color,type:s.type?s.type:d?.type,group:s.group?s.group:d?.group,data:s.data?s.data:d?.data,zIndex:void 0!==s.zIndex?s.zIndex:a})}},{key:"toggleDataPointSelection",value:function(s,a){var h=this.w,d=null,g=".apexcharts-series[data\\:realIndex='".concat(s,"']");return h.globals.axisCharts?d=h.globals.dom.Paper.select("".concat(g," path[j='").concat(a,"'], ").concat(g," circle[j='").concat(a,"'], ").concat(g," rect[j='").concat(a,"']")).members[0]:void 0===a&&(d=h.globals.dom.Paper.select("".concat(g," path[j='").concat(s,"']")).members[0],"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"donut"!==h.config.chart.type||this.ctx.pie.pieClicked(s)),d?(new kt(this.ctx).pathMouseDown(d,null),d.node?d.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(s){var a=this.w;if(["min","max"].forEach(function(d){void 0!==s.xaxis[d]&&(a.config.xaxis[d]=s.xaxis[d],a.globals.lastXAxis[d]=s.xaxis[d])}),s.xaxis.categories&&s.xaxis.categories.length&&(a.config.xaxis.categories=s.xaxis.categories),a.config.xaxis.convertedCatToNumeric){var h=new bi(s);s=h.convertCatToNumericXaxis(s,this.ctx)}return s}},{key:"forceYAxisUpdate",value:function(s){return s.chart&&s.chart.stacked&&"100%"===s.chart.stackType&&(Array.isArray(s.yaxis)?s.yaxis.forEach(function(a,h){s.yaxis[h].min=0,s.yaxis[h].max=100}):(s.yaxis.min=0,s.yaxis.max=100)),s}},{key:"revertDefaultAxisMinMax",value:function(s){var a=this,h=this.w,d=h.globals.lastXAxis,g=h.globals.lastYAxis;s&&s.xaxis&&(d=s.xaxis),s&&s.yaxis&&(g=s.yaxis),h.config.xaxis.min=d.min,h.config.xaxis.max=d.max,h.config.yaxis.map(function(y,w){h.globals.zoomed||void 0!==g[w]?function(y){void 0!==g[y]&&(h.config.yaxis[y].min=g[y].min,h.config.yaxis[y].max=g[y].max)}(w):void 0!==a.ctx.opts.yaxis[w]&&(y.min=a.ctx.opts.yaxis[w].min,y.max=a.ctx.opts.yaxis[w].max)})}}]),R}();Oa=typeof window<"u"?window:void 0,Ea=function(R,s){var a=(void 0!==this?this:R).SVG=function(S){if(a.supported)return S=new a.Doc(S),a.parser.draw||a.prepare(),S};if(a.ns="http://www.w3.org/2000/svg",a.xmlns="http://www.w3.org/2000/xmlns/",a.xlink="http://www.w3.org/1999/xlink",a.svgjs="http://svgjs.dev",a.supported=!0,!a.supported)return!1;a.did=1e3,a.eid=function(S){return"Svgjs"+C(S)+a.did++},a.create=function(S){var N=s.createElementNS(this.ns,S);return N.setAttribute("id",this.eid(S)),N},a.extend=function(){var S,N;N=(S=[].slice.call(arguments)).pop();for(var E=S.length-1;E>=0;E--)if(S[E])for(var H in N)S[E].prototype[H]=N[H];a.Set&&a.Set.inherit&&a.Set.inherit()},a.invent=function(S){var N="function"==typeof S.create?S.create:function(){this.constructor.call(this,a.create(S.create))};return S.inherit&&(N.prototype=new S.inherit),S.extend&&a.extend(N,S.extend),S.construct&&a.extend(S.parent||a.Container,S.construct),N},a.adopt=function(S){return S?S.instance?S.instance:((N="svg"==S.nodeName?S.parentNode instanceof R.SVGElement?new a.Nested:new a.Doc:"linearGradient"==S.nodeName?new a.Gradient("linear"):"radialGradient"==S.nodeName?new a.Gradient("radial"):a[C(S.nodeName)]?new(a[C(S.nodeName)]):new a.Element(S)).type=S.nodeName,N.node=S,S.instance=N,N instanceof a.Doc&&N.namespace().defs(),N.setData(JSON.parse(S.getAttribute("svgjs:data"))||{}),N):null;var N},a.prepare=function(){var S=s.getElementsByTagName("body")[0],N=(S?new a.Doc(S):a.adopt(s.documentElement).nested()).size(2,0);a.parser={body:S||s.documentElement,draw:N.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:N.polyline().node,path:N.path().node,native:a.create("svg")}},a.parser={native:a.create("svg")},s.addEventListener("DOMContentLoaded",function(){a.parser.draw||a.prepare()},!1),a.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},a.utils={map:function(S,N){for(var E=S.length,H=[],W=0;W<E;W++)H.push(N(S[W]));return H},filter:function(S,N){for(var E=S.length,H=[],W=0;W<E;W++)N(S[W])&&H.push(S[W]);return H},filterSVGElements:function(S){return this.filter(S,function(N){return N instanceof R.SVGElement})}},a.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},a.Color=function(S){var N,E;this.r=0,this.g=0,this.b=0,S&&("string"==typeof S?a.regex.isRgb.test(S)?(N=a.regex.rgb.exec(S.replace(a.regex.whitespace,"")),this.r=parseInt(N[1]),this.g=parseInt(N[2]),this.b=parseInt(N[3])):a.regex.isHex.test(S)&&(N=a.regex.hex.exec(4==(E=S).length?["#",E.substring(1,2),E.substring(1,2),E.substring(2,3),E.substring(2,3),E.substring(3,4),E.substring(3,4)].join(""):E),this.r=parseInt(N[1],16),this.g=parseInt(N[2],16),this.b=parseInt(N[3],16)):"object"===mi(S)&&(this.r=S.r,this.g=S.g,this.b=S.b))},a.extend(a.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+T(this.r)+T(this.g)+T(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(S){return this.destination=new a.Color(S),this},at:function(S){return this.destination?new a.Color({r:~~(this.r+(this.destination.r-this.r)*(S=S<0?0:S>1?1:S)),g:~~(this.g+(this.destination.g-this.g)*S),b:~~(this.b+(this.destination.b-this.b)*S)}):this}}),a.Color.test=function(S){return a.regex.isHex.test(S+="")||a.regex.isRgb.test(S)},a.Color.isRgb=function(S){return S&&"number"==typeof S.r&&"number"==typeof S.g&&"number"==typeof S.b},a.Color.isColor=function(S){return a.Color.isRgb(S)||a.Color.test(S)},a.Array=function(S,N){0==(S=(S||[]).valueOf()).length&&N&&(S=N.valueOf()),this.value=this.parse(S)},a.extend(a.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(S){return S=S.valueOf(),Array.isArray(S)?S:this.split(S)}}),a.PointArray=function(S,N){a.Array.call(this,S,N||[[0,0]])},a.PointArray.prototype=new a.Array,a.PointArray.prototype.constructor=a.PointArray;for(var h={M:function(S,N,E){return N.x=E.x=S[0],N.y=E.y=S[1],["M",N.x,N.y]},L:function(S,N){return N.x=S[0],N.y=S[1],["L",S[0],S[1]]},H:function(S,N){return N.x=S[0],["H",S[0]]},V:function(S,N){return N.y=S[0],["V",S[0]]},C:function(S,N){return N.x=S[4],N.y=S[5],["C",S[0],S[1],S[2],S[3],S[4],S[5]]},Q:function(S,N){return N.x=S[2],N.y=S[3],["Q",S[0],S[1],S[2],S[3]]},S:function(S,N){return N.x=S[2],N.y=S[3],["S",S[0],S[1],S[2],S[3]]},Z:function(S,N,E){return N.x=E.x,N.y=E.y,["Z"]}},d="mlhvqtcsaz".split(""),g=0,f=d.length;g<f;++g)h[d[g]]=function(S){return function(N,E,H){if("H"==S)N[0]=N[0]+E.x;else if("V"==S)N[0]=N[0]+E.y;else if("A"==S)N[5]=N[5]+E.x,N[6]=N[6]+E.y;else for(var W=0,K=N.length;W<K;++W)N[W]=N[W]+(W%2?E.y:E.x);if(h&&"function"==typeof h[S])return h[S](N,E,H)}}(d[g].toUpperCase());a.PathArray=function(S,N){a.Array.call(this,S,N||[["M",0,0]])},a.PathArray.prototype=new a.Array,a.PathArray.prototype.constructor=a.PathArray,a.extend(a.PathArray,{toString:function(){return function(S){for(var N=0,E=S.length,H="";N<E;N++)H+=S[N][0],null!=S[N][1]&&(H+=S[N][1],null!=S[N][2]&&(H+=" ",H+=S[N][2],null!=S[N][3]&&(H+=" ",H+=S[N][3],H+=" ",H+=S[N][4],null!=S[N][5]&&(H+=" ",H+=S[N][5],H+=" ",H+=S[N][6],null!=S[N][7]&&(H+=" ",H+=S[N][7])))));return H+" "}(this.value)},move:function(S,N){return this.bbox(),this},at:function(S){if(!this.destination)return this;for(var N=this.value,E=this.destination.value,H=[],W=new a.PathArray,K=0,tt=N.length;K<tt;K++){H[K]=[N[K][0]];for(var et=1,gt=N[K].length;et<gt;et++)H[K][et]=N[K][et]+(E[K][et]-N[K][et])*S;"A"===H[K][0]&&(H[K][4]=+(0!=H[K][4]),H[K][5]=+(0!=H[K][5]))}return W.value=H,W},parse:function(S){if(S instanceof a.PathArray)return S.valueOf();var N,E={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};S="string"==typeof S?S.replace(a.regex.numbersWithDots,w).replace(a.regex.pathLetters," $& ").replace(a.regex.hyphen,"$1 -").trim().split(a.regex.delimiter):S.reduce(function(gt,St){return[].concat.call(gt,St)},[]);var H=[],W=new a.Point,K=new a.Point,tt=0,et=S.length;do{a.regex.isPathLetter.test(S[tt])?(N=S[tt],++tt):"M"==N?N="L":"m"==N&&(N="l"),H.push(h[N].call(null,S.slice(tt,tt+=E[N.toUpperCase()]).map(parseFloat),W,K))}while(et>tt);return H},bbox:function(){return a.parser.draw||a.prepare(),a.parser.path.setAttribute("d",this.toString()),a.parser.path.getBBox()}}),a.Number=a.invent({create:function(S,N){this.value=0,this.unit=N||"","number"==typeof S?this.value=isNaN(S)?0:isFinite(S)?S:S<0?-34e37:34e37:"string"==typeof S?(N=S.match(a.regex.numberAndUnit))&&(this.value=parseFloat(N[1]),"%"==N[5]?this.value/=100:"s"==N[5]&&(this.value*=1e3),this.unit=N[5]):S instanceof a.Number&&(this.value=S.valueOf(),this.unit=S.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(S){return S=new a.Number(S),new a.Number(this+S,this.unit||S.unit)},minus:function(S){return S=new a.Number(S),new a.Number(this-S,this.unit||S.unit)},times:function(S){return S=new a.Number(S),new a.Number(this*S,this.unit||S.unit)},divide:function(S){return S=new a.Number(S),new a.Number(this/S,this.unit||S.unit)},to:function(S){var N=new a.Number(this);return"string"==typeof S&&(N.unit=S),N},morph:function(S){return this.destination=new a.Number(S),S.relative&&(this.destination.value+=this.value),this},at:function(S){return this.destination?new a.Number(this.destination).minus(this).times(S).plus(this):this}}}),a.Element=a.invent({create:function(S){this._stroke=a.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=S)&&(this.type=S.nodeName,this.node.instance=this,this._stroke=S.getAttribute("stroke")||this._stroke)},extend:{x:function(S){return this.attr("x",S)},y:function(S){return this.attr("y",S)},cx:function(S){return null==S?this.x()+this.width()/2:this.x(S-this.width()/2)},cy:function(S){return null==S?this.y()+this.height()/2:this.y(S-this.height()/2)},move:function(S,N){return this.x(S).y(N)},center:function(S,N){return this.cx(S).cy(N)},width:function(S){return this.attr("width",S)},height:function(S){return this.attr("height",S)},size:function(S,N){var E=P(this,S,N);return this.width(new a.Number(E.width)).height(new a.Number(E.height))},clone:function(S){this.writeDataToDom();var N=j(this.node.cloneNode(!0));return S?S.add(N):this.after(N),N},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(S){return this.after(S).remove(),S},addTo:function(S){return S.put(this)},putIn:function(S){return S.add(this)},id:function(S){return this.attr("id",S)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var S=this.attr("class");return null==S?[]:S.trim().split(a.regex.delimiter)},hasClass:function(S){return-1!=this.classes().indexOf(S)},addClass:function(S){if(!this.hasClass(S)){var N=this.classes();N.push(S),this.attr("class",N.join(" "))}return this},removeClass:function(S){return this.hasClass(S)&&this.attr("class",this.classes().filter(function(N){return N!=S}).join(" ")),this},toggleClass:function(S){return this.hasClass(S)?this.removeClass(S):this.addClass(S)},reference:function(S){return a.get(this.attr(S))},parent:function(S){var N=this;if(!N.node.parentNode)return null;if(N=a.adopt(N.node.parentNode),!S)return N;for(;N&&N.node instanceof R.SVGElement;){if("string"==typeof S?N.matches(S):N instanceof S)return N;if(!N.node.parentNode||"#document"==N.node.parentNode.nodeName)return null;N=a.adopt(N.node.parentNode)}},doc:function(){return this instanceof a.Doc?this:this.parent(a.Doc)},parents:function(S){var N=[],E=this;do{if(!(E=E.parent(S))||!E.node)break;N.push(E)}while(E.parent);return N},matches:function(S){return((N=this.node).matches||N.matchesSelector||N.msMatchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector).call(N,S);var N},native:function(){return this.node},svg:function(S){var N=s.createElement("svg");if(!(S&&this instanceof a.Parent))return N.appendChild(S=s.createElement("svg")),this.writeDataToDom(),S.appendChild(this.node.cloneNode(!0)),N.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");N.innerHTML="<svg>"+S.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var E=0,H=N.firstChild.childNodes.length;E<H;E++)this.node.appendChild(N.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(S){return this.dom=S,this},is:function(S){return this instanceof S}}}),a.easing={"-":function(S){return S},"<>":function(S){return-Math.cos(S*Math.PI)/2+.5},">":function(S){return Math.sin(S*Math.PI/2)},"<":function(S){return 1-Math.cos(S*Math.PI/2)}},a.morph=function(S){return function(N,E){return new a.MorphObj(N,E).at(S)}},a.Situation=a.invent({create:function(S){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new a.Number(S.duration).valueOf(),this.delay=new a.Number(S.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=S.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),a.FX=a.invent({create:function(S){this._target=S,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(S,N,E){"object"===mi(S)&&(N=S.ease,E=S.delay,S=S.duration);var H=new a.Situation({duration:S||1e3,delay:E||0,ease:a.easing[N||"-"]||N});return this.queue(H),this},target:function(S){return S&&S instanceof a.Element?(this._target=S,this):this._target},timeToAbsPos:function(S){return(S-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(S){return this.situation.duration/this._speed*S+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=R.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){R.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(S){return("function"==typeof S||S instanceof a.Situation)&&this.situations.push(S),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof a.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var S,N=this.situation;if(N.init)return this;for(var E in N.animations){S=this.target()[E](),Array.isArray(S)||(S=[S]),Array.isArray(N.animations[E])||(N.animations[E]=[N.animations[E]]);for(var H=S.length;H--;)N.animations[E][H]instanceof a.Number&&(S[H]=new a.Number(S[H])),N.animations[E][H]=S[H].morph(N.animations[E][H])}for(var E in N.attrs)N.attrs[E]=new a.MorphObj(this.target().attr(E),N.attrs[E]);for(var E in N.styles)N.styles[E]=new a.MorphObj(this.target().style(E),N.styles[E]);return N.initialTransformation=this.target().matrixify(),N.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(S,N){var E=this.active;return this.active=!1,N&&this.clearQueue(),S&&this.situation&&(!E&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(S){var N=this.last();return this.target().on("finished.fx",function E(H){H.detail.situation==N&&(S.call(this,N),this.off("finished.fx",E))}),this._callStart()},during:function(S){var N=this.last(),E=function(H){H.detail.situation==N&&S.call(this,H.detail.pos,a.morph(H.detail.pos),H.detail.eased,N)};return this.target().off("during.fx",E).on("during.fx",E),this.after(function(){this.off("during.fx",E)}),this._callStart()},afterAll:function(S){var N=function E(H){S.call(this),this.off("allfinished.fx",E)};return this.target().off("allfinished.fx",N).on("allfinished.fx",N),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(S,N,E){return this.last()[E||"animations"][S]=N,this._callStart()},step:function(S){var N,E,H;S||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(N=Math.max(this.absPos,0),E=Math.floor(N),!0===this.situation.loops||E<this.situation.loops?(this.pos=N-E,H=this.situation.loop,this.situation.loop=E):(this.absPos=this.situation.loops,this.pos=1,H=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-H)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var W=this.situation.ease(this.pos);for(var K in this.situation.once)K>this.lastPos&&K<=W&&(this.situation.once[K].call(this.target(),this.pos,W),delete this.situation.once[K]);return this.active&&this.target().fire("during",{pos:this.pos,eased:W,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=W,this):this},eachAt:function(){var S,N=this,E=this.target(),H=this.situation;for(var W in H.animations)S=[].concat(H.animations[W]).map(function(et){return"string"!=typeof et&&et.at?et.at(H.ease(N.pos),N.pos):et}),E[W].apply(E,S);for(var W in H.attrs)S=[W].concat(H.attrs[W]).map(function(gt){return"string"!=typeof gt&&gt.at?gt.at(H.ease(N.pos),N.pos):gt}),E.attr.apply(E,S);for(var W in H.styles)S=[W].concat(H.styles[W]).map(function(gt){return"string"!=typeof gt&&gt.at?gt.at(H.ease(N.pos),N.pos):gt}),E.style.apply(E,S);if(H.transforms.length){S=H.initialTransformation,W=0;for(var K=H.transforms.length;W<K;W++){var tt=H.transforms[W];tt instanceof a.Matrix?S=tt.relative?S.multiply((new a.Matrix).morph(tt).at(H.ease(this.pos))):S.morph(tt).at(H.ease(this.pos)):(tt.relative||tt.undo(S.extract()),S=S.multiply(tt.at(H.ease(this.pos))))}E.matrix(S)}return this},once:function(S,N,E){var H=this.last();return E||(S=H.ease(S)),H.once[S]=N,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:a.Element,construct:{animate:function(S,N,E){return(this.fx||(this.fx=new a.FX(this))).animate(S,N,E)},delay:function(S){return(this.fx||(this.fx=new a.FX(this))).delay(S)},stop:function(S,N){return this.fx&&this.fx.stop(S,N),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),a.MorphObj=a.invent({create:function(S,N){return a.Color.isColor(N)?new a.Color(S).morph(N):a.regex.delimiter.test(S)?a.regex.pathLetters.test(S)?new a.PathArray(S).morph(N):new a.Array(S).morph(N):a.regex.numberAndUnit.test(N)?new a.Number(S).morph(N):(this.value=S,void(this.destination=N))},extend:{at:function(S,N){return N<1?this.value:this.destination},valueOf:function(){return this.value}}}),a.extend(a.FX,{attr:function(S,N,E){if("object"===mi(S))for(var H in S)this.attr(H,S[H]);else this.add(S,N,"attrs");return this},plot:function(S,N,E,H){return 4==arguments.length?this.plot([S,N,E,H]):this.add("plot",new(this.target().morphArray)(S))}}),a.Box=a.invent({create:function(S,N,E,H){if(!("object"!==mi(S)||S instanceof a.Element))return a.Box.call(this,null!=S.left?S.left:S.x,null!=S.top?S.top:S.y,S.width,S.height);var W;4==arguments.length&&(this.x=S,this.y=N,this.width=E,this.height=H),null==(W=this).x&&(W.x=0,W.y=0,W.width=0,W.height=0),W.w=W.width,W.h=W.height,W.x2=W.x+W.width,W.y2=W.y+W.height,W.cx=W.x+W.width/2,W.cy=W.y+W.height/2}}),a.BBox=a.invent({create:function(S){if(a.Box.apply(this,[].slice.call(arguments)),S instanceof a.Element){var N;try{if(!s.documentElement.contains){for(var E=S.node;E.parentNode;)E=E.parentNode;if(E!=s)throw new Error("Element not in the dom")}N=S.node.getBBox()}catch{if(S instanceof a.Shape){a.parser.draw||a.prepare();var H=S.clone(a.parser.draw.instance).show();H&&H.node&&"function"==typeof H.node.getBBox&&(N=H.node.getBBox()),H&&"function"==typeof H.remove&&H.remove()}else N={x:S.node.clientLeft,y:S.node.clientTop,width:S.node.clientWidth,height:S.node.clientHeight}}a.Box.call(this,N)}},inherit:a.Box,parent:a.Element,construct:{bbox:function(){return new a.BBox(this)}}}),a.BBox.prototype.constructor=a.BBox,a.Matrix=a.invent({create:function(S){var N=O([1,0,0,1,0,0]);S=null===S?N:S instanceof a.Element?S.matrixify():"string"==typeof S?O(S.split(a.regex.delimiter).map(parseFloat)):6==arguments.length?O([].slice.call(arguments)):Array.isArray(S)?O(S):S&&"object"===mi(S)?S:N;for(var E=G.length-1;E>=0;--E)this[G[E]]=null!=S[G[E]]?S[G[E]]:N[G[E]]},extend:{extract:function(){var S=F(this,0,1);F(this,1,0);var N=180/Math.PI*Math.atan2(S.y,S.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(N*Math.PI/180)+this.f*Math.sin(N*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(N*Math.PI/180)+this.e*Math.sin(-N*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:N,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new a.Matrix(this)}},clone:function(){return new a.Matrix(this)},morph:function(S){return this.destination=new a.Matrix(S),this},multiply:function(S){return new a.Matrix(this.native().multiply((N=S,N instanceof a.Matrix||(N=new a.Matrix(N)),N).native()));var N},inverse:function(){return new a.Matrix(this.native().inverse())},translate:function(S,N){return new a.Matrix(this.native().translate(S||0,N||0))},native:function(){for(var S=a.parser.native.createSVGMatrix(),N=G.length-1;N>=0;N--)S[G[N]]=this[G[N]];return S},toString:function(){return"matrix("+Y(this.a)+","+Y(this.b)+","+Y(this.c)+","+Y(this.d)+","+Y(this.e)+","+Y(this.f)+")"}},parent:a.Element,construct:{ctm:function(){return new a.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof a.Nested){var S=this.rect(1,1),N=S.node.getScreenCTM();return S.remove(),new a.Matrix(N)}return new a.Matrix(this.node.getScreenCTM())}}}),a.Point=a.invent({create:function(S,N){var E;E=Array.isArray(S)?{x:S[0],y:S[1]}:"object"===mi(S)?{x:S.x,y:S.y}:null!=S?{x:S,y:N??S}:{x:0,y:0},this.x=E.x,this.y=E.y},extend:{clone:function(){return new a.Point(this)},morph:function(S,N){return this.destination=new a.Point(S,N),this}}}),a.extend(a.Element,{point:function(S,N){return new a.Point(S,N).transform(this.screenCTM().inverse())}}),a.extend(a.Element,{attr:function(S,N,E){if(null==S){for(S={},E=(N=this.node.attributes).length-1;E>=0;E--)S[N[E].nodeName]=a.regex.isNumber.test(N[E].nodeValue)?parseFloat(N[E].nodeValue):N[E].nodeValue;return S}if("object"===mi(S))for(var H in S)this.attr(H,S[H]);else if(null===N)this.node.removeAttribute(S);else{if(null==N)return null==(N=this.node.getAttribute(S))?a.defaults.attrs[S]:a.regex.isNumber.test(N)?parseFloat(N):N;"stroke-width"==S?this.attr("stroke",parseFloat(N)>0?this._stroke:null):"stroke"==S&&(this._stroke=N),"fill"!=S&&"stroke"!=S||(a.regex.isImage.test(N)&&(N=this.doc().defs().image(N,0,0)),N instanceof a.Image&&(N=this.doc().defs().pattern(0,0,function(){this.add(N)}))),"number"==typeof N?N=new a.Number(N):a.Color.isColor(N)?N=new a.Color(N):Array.isArray(N)&&(N=new a.Array(N)),"leading"==S?this.leading&&this.leading(N):"string"==typeof E?this.node.setAttributeNS(E,S,N.toString()):this.node.setAttribute(S,N.toString()),!this.rebuild||"font-size"!=S&&"x"!=S||this.rebuild(S,N)}return this}}),a.extend(a.Element,{transform:function(S,N){var E;return"object"!==mi(S)?(E=new a.Matrix(this).extract(),"string"==typeof S?E[S]:E):(E=new a.Matrix(this),N=!!N||!!S.relative,null!=S.a&&(E=N?E.multiply(new a.Matrix(S)):new a.Matrix(S)),this.attr("transform",E))}}),a.extend(a.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(a.regex.transforms).slice(0,-1).map(function(S){var N=S.trim().split("(");return[N[0],N[1].split(a.regex.delimiter).map(function(E){return parseFloat(E)})]}).reduce(function(S,N){return"matrix"==N[0]?S.multiply(O(N[1])):S[N[0]].apply(S,N[1])},new a.Matrix)},toParent:function(S){if(this==S)return this;var N=this.screenCTM(),E=S.screenCTM().inverse();return this.addTo(S).untransform().transform(E.multiply(N)),this},toDoc:function(){return this.toParent(this.doc())}}),a.Transformation=a.invent({create:function(S,N){if(arguments.length>1&&"boolean"!=typeof N)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(S))for(var E=0,H=this.arguments.length;E<H;++E)this[this.arguments[E]]=S[E];else if(S&&"object"===mi(S))for(E=0,H=this.arguments.length;E<H;++E)this[this.arguments[E]]=S[this.arguments[E]];this.inversed=!1,!0===N&&(this.inversed=!0)}}),a.Translate=a.invent({parent:a.Matrix,inherit:a.Transformation,create:function(S,N){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),a.extend(a.Element,{style:function(S,N){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===mi(S))for(var E in S)this.style(E,S[E]);else{if(!a.regex.isCss.test(S))return this.node.style[k(S)];for(S=S.split(/\s*;\s*/).filter(function(H){return!!H}).map(function(H){return H.split(/\s*:\s*/)});N=S.pop();)this.style(N[0],N[1])}else this.node.style[k(S)]=null===N||a.regex.isBlank.test(N)?"":N;return this}}),a.Parent=a.invent({create:function(S){this.constructor.call(this,S)},inherit:a.Element,extend:{children:function(){return a.utils.map(a.utils.filterSVGElements(this.node.childNodes),function(S){return a.adopt(S)})},add:function(S,N){return null==N?this.node.appendChild(S.node):S.node!=this.node.childNodes[N]&&this.node.insertBefore(S.node,this.node.childNodes[N]),this},put:function(S,N){return this.add(S,N),S},has:function(S){return this.index(S)>=0},index:function(S){return[].slice.call(this.node.childNodes).indexOf(S.node)},get:function(S){return a.adopt(this.node.childNodes[S])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(S,N){for(var E=this.children(),H=0,W=E.length;H<W;H++)E[H]instanceof a.Element&&S.apply(E[H],[H,E]),N&&E[H]instanceof a.Container&&E[H].each(S,N);return this},removeElement:function(S){return this.node.removeChild(S.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),a.extend(a.Parent,{ungroup:function(S,N){return 0===N||this instanceof a.Defs||this.node==a.parser.draw||(S=S||(this instanceof a.Doc?this:this.parent(a.Parent)),N=N||1/0,this.each(function(){return this instanceof a.Defs?this:this instanceof a.Parent?this.ungroup(S,N-1):this.toParent(S)}),this.node.firstChild||this.remove()),this},flatten:function(S,N){return this.ungroup(S,N)}}),a.Container=a.invent({create:function(S){this.constructor.call(this,S)},inherit:a.Parent}),a.ViewBox=a.invent({parent:a.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(S){a.Element.prototype[S]=function(N){return a.on(this.node,S,N),this}}),a.listeners=[],a.handlerMap=[],a.listenerId=0,a.on=function(S,N,E,H,W){var K=E.bind(H||S.instance||S),tt=(a.handlerMap.indexOf(S)+1||a.handlerMap.push(S))-1,et=N.split(".")[0],gt=N.split(".")[1]||"*";a.listeners[tt]=a.listeners[tt]||{},a.listeners[tt][et]=a.listeners[tt][et]||{},a.listeners[tt][et][gt]=a.listeners[tt][et][gt]||{},E._svgjsListenerId||(E._svgjsListenerId=++a.listenerId),a.listeners[tt][et][gt][E._svgjsListenerId]=K,S.addEventListener(et,K,W||{passive:!1})},a.off=function(S,N,E){var H=a.handlerMap.indexOf(S),W=N&&N.split(".")[0],K=N&&N.split(".")[1],tt="";if(-1!=H)if(E){if("function"==typeof E&&(E=E._svgjsListenerId),!E)return;a.listeners[H][W]&&a.listeners[H][W][K||"*"]&&(S.removeEventListener(W,a.listeners[H][W][K||"*"][E],!1),delete a.listeners[H][W][K||"*"][E])}else if(K&&W){if(a.listeners[H][W]&&a.listeners[H][W][K]){for(var et in a.listeners[H][W][K])a.off(S,[W,K].join("."),et);delete a.listeners[H][W][K]}}else if(K)for(var gt in a.listeners[H])for(var tt in a.listeners[H][gt])K===tt&&a.off(S,[gt,K].join("."));else if(W){if(a.listeners[H][W]){for(var tt in a.listeners[H][W])a.off(S,[W,tt].join("."));delete a.listeners[H][W]}}else{for(var gt in a.listeners[H])a.off(S,gt);delete a.listeners[H],delete a.handlerMap[H]}},a.extend(a.Element,{on:function(S,N,E,H){return a.on(this.node,S,N,E,H),this},off:function(S,N){return a.off(this.node,S,N),this},fire:function(S,N){return this.node.dispatchEvent(S instanceof R.Event?S:S=new a.CustomEvent(S,{detail:N,cancelable:!0})),this._event=S,this},event:function(){return this._event}}),a.Defs=a.invent({create:"defs",inherit:a.Container}),a.G=a.invent({create:"g",inherit:a.Container,extend:{x:function(S){return null==S?this.transform("x"):this.transform({x:S-this.x()},!0)}},construct:{group:function(){return this.put(new a.G)}}}),a.Doc=a.invent({create:function(S){S&&("svg"==(S="string"==typeof S?s.getElementById(S):S).nodeName?this.constructor.call(this,S):(this.constructor.call(this,a.create("svg")),S.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:a.Container,extend:{namespace:function(){return this.attr({xmlns:a.ns,version:"1.1"}).attr("xmlns:xlink",a.xlink,a.xmlns).attr("xmlns:svgjs",a.svgjs,a.xmlns)},defs:function(){var S;return this._defs||(this._defs=(S=this.node.getElementsByTagName("defs")[0])?a.adopt(S):new a.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,a.parser.draw&&!a.parser.draw.parentNode&&this.node.appendChild(a.parser.draw),this},clone:function(S){this.writeDataToDom();var N=this.node,E=j(N.cloneNode(!0));return S?(S.node||S).appendChild(E.node):N.parentNode.insertBefore(E.node,N.nextSibling),E}}}),a.extend(a.Element,{}),a.Gradient=a.invent({create:function(S){this.constructor.call(this,a.create(S+"Gradient")),this.type=S},inherit:a.Container,extend:{at:function(S,N,E){return this.put(new a.Stop).update(S,N,E)},update:function(S){return this.clear(),"function"==typeof S&&S.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(S,N,E){return"transform"==S&&(S="gradientTransform"),a.Container.prototype.attr.call(this,S,N,E)}},construct:{gradient:function(S,N){return this.defs().gradient(S,N)}}}),a.extend(a.Gradient,a.FX,{from:function(S,N){return this.attr("radial"==(this._target||this).type?{fx:new a.Number(S),fy:new a.Number(N)}:{x1:new a.Number(S),y1:new a.Number(N)})},to:function(S,N){return this.attr("radial"==(this._target||this).type?{cx:new a.Number(S),cy:new a.Number(N)}:{x2:new a.Number(S),y2:new a.Number(N)})}}),a.extend(a.Defs,{gradient:function(S,N){return this.put(new a.Gradient(S)).update(N)}}),a.Stop=a.invent({create:"stop",inherit:a.Element,extend:{update:function(S){return("number"==typeof S||S instanceof a.Number)&&(S={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=S.opacity&&this.attr("stop-opacity",S.opacity),null!=S.color&&this.attr("stop-color",S.color),null!=S.offset&&this.attr("offset",new a.Number(S.offset)),this}}}),a.Pattern=a.invent({create:"pattern",inherit:a.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(S){return this.clear(),"function"==typeof S&&S.call(this,this),this},toString:function(){return this.fill()},attr:function(S,N,E){return"transform"==S&&(S="patternTransform"),a.Container.prototype.attr.call(this,S,N,E)}},construct:{pattern:function(S,N,E){return this.defs().pattern(S,N,E)}}}),a.extend(a.Defs,{pattern:function(S,N,E){return this.put(new a.Pattern).update(E).attr({x:0,y:0,width:S,height:N,patternUnits:"userSpaceOnUse"})}}),a.Shape=a.invent({create:function(S){this.constructor.call(this,S)},inherit:a.Element}),a.Symbol=a.invent({create:"symbol",inherit:a.Container,construct:{symbol:function(){return this.put(new a.Symbol)}}}),a.Use=a.invent({create:"use",inherit:a.Shape,extend:{element:function(S,N){return this.attr("href",(N||"")+"#"+S,a.xlink)}},construct:{use:function(S,N){return this.put(new a.Use).element(S,N)}}}),a.Rect=a.invent({create:"rect",inherit:a.Shape,construct:{rect:function(S,N){return this.put(new a.Rect).size(S,N)}}}),a.Circle=a.invent({create:"circle",inherit:a.Shape,construct:{circle:function(S){return this.put(new a.Circle).rx(new a.Number(S).divide(2)).move(0,0)}}}),a.extend(a.Circle,a.FX,{rx:function(S){return this.attr("r",S)},ry:function(S){return this.rx(S)}}),a.Ellipse=a.invent({create:"ellipse",inherit:a.Shape,construct:{ellipse:function(S,N){return this.put(new a.Ellipse).size(S,N).move(0,0)}}}),a.extend(a.Ellipse,a.Rect,a.FX,{rx:function(S){return this.attr("rx",S)},ry:function(S){return this.attr("ry",S)}}),a.extend(a.Circle,a.Ellipse,{x:function(S){return null==S?this.cx()-this.rx():this.cx(S+this.rx())},y:function(S){return null==S?this.cy()-this.ry():this.cy(S+this.ry())},cx:function(S){return null==S?this.attr("cx"):this.attr("cx",S)},cy:function(S){return null==S?this.attr("cy"):this.attr("cy",S)},width:function(S){return null==S?2*this.rx():this.rx(new a.Number(S).divide(2))},height:function(S){return null==S?2*this.ry():this.ry(new a.Number(S).divide(2))},size:function(S,N){var E=P(this,S,N);return this.rx(new a.Number(E.width).divide(2)).ry(new a.Number(E.height).divide(2))}}),a.Line=a.invent({create:"line",inherit:a.Shape,extend:{array:function(){return new a.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(S,N,E,H){return null==S?this.array():(S=void 0!==N?{x1:S,y1:N,x2:E,y2:H}:new a.PointArray(S).toLine(),this.attr(S))},move:function(S,N){return this.attr(this.array().move(S,N).toLine())},size:function(S,N){var E=P(this,S,N);return this.attr(this.array().size(E.width,E.height).toLine())}},construct:{line:function(S,N,E,H){return a.Line.prototype.plot.apply(this.put(new a.Line),null!=S?[S,N,E,H]:[0,0,0,0])}}}),a.Polyline=a.invent({create:"polyline",inherit:a.Shape,construct:{polyline:function(S){return this.put(new a.Polyline).plot(S||new a.PointArray)}}}),a.Polygon=a.invent({create:"polygon",inherit:a.Shape,construct:{polygon:function(S){return this.put(new a.Polygon).plot(S||new a.PointArray)}}}),a.extend(a.Polyline,a.Polygon,{array:function(){return this._array||(this._array=new a.PointArray(this.attr("points")))},plot:function(S){return null==S?this.array():this.clear().attr("points","string"==typeof S?S:this._array=new a.PointArray(S))},clear:function(){return delete this._array,this},move:function(S,N){return this.attr("points",this.array().move(S,N))},size:function(S,N){var E=P(this,S,N);return this.attr("points",this.array().size(E.width,E.height))}}),a.extend(a.Line,a.Polyline,a.Polygon,{morphArray:a.PointArray,x:function(S){return null==S?this.bbox().x:this.move(S,this.bbox().y)},y:function(S){return null==S?this.bbox().y:this.move(this.bbox().x,S)},width:function(S){var N=this.bbox();return null==S?N.width:this.size(S,N.height)},height:function(S){var N=this.bbox();return null==S?N.height:this.size(N.width,S)}}),a.Path=a.invent({create:"path",inherit:a.Shape,extend:{morphArray:a.PathArray,array:function(){return this._array||(this._array=new a.PathArray(this.attr("d")))},plot:function(S){return null==S?this.array():this.clear().attr("d","string"==typeof S?S:this._array=new a.PathArray(S))},clear:function(){return delete this._array,this}},construct:{path:function(S){return this.put(new a.Path).plot(S||new a.PathArray)}}}),a.Image=a.invent({create:"image",inherit:a.Shape,extend:{load:function(S){if(!S)return this;var N=this,E=new R.Image;return a.on(E,"load",function(){a.off(E);var H=N.parent(a.Pattern);null!==H&&(0==N.width()&&0==N.height()&&N.size(E.width,E.height),H&&0==H.width()&&0==H.height()&&H.size(N.width(),N.height()),"function"==typeof N._loaded&&N._loaded.call(N,{width:E.width,height:E.height,ratio:E.width/E.height,url:S}))}),a.on(E,"error",function(H){a.off(E),"function"==typeof N._error&&N._error.call(N,H)}),this.attr("href",E.src=this.src=S,a.xlink)},loaded:function(S){return this._loaded=S,this},error:function(S){return this._error=S,this}},construct:{image:function(S,N,E){return this.put(new a.Image).load(S).size(N||0,E||N||0)}}}),a.Text=a.invent({create:function(){this.constructor.call(this,a.create("text")),this.dom.leading=new a.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",a.defaults.attrs["font-family"])},inherit:a.Shape,extend:{x:function(S){return null==S?this.attr("x"):this.attr("x",S)},text:function(S){if(void 0===S){S="";for(var N=this.node.childNodes,E=0,H=N.length;E<H;++E)0!=E&&3!=N[E].nodeType&&1==a.adopt(N[E]).dom.newLined&&(S+="\n"),S+=N[E].textContent;return S}if(this.clear().build(!0),"function"==typeof S)S.call(this,this);else{E=0;for(var W=(S=S.split("\n")).length;E<W;E++)this.tspan(S[E]).newLine()}return this.build(!1).rebuild()},size:function(S){return this.attr("font-size",S).rebuild()},leading:function(S){return null==S?this.dom.leading:(this.dom.leading=new a.Number(S),this.rebuild())},lines:function(){var S=(this.textPath&&this.textPath()||this).node,N=a.utils.map(a.utils.filterSVGElements(S.childNodes),function(E){return a.adopt(E)});return new a.Set(N)},rebuild:function(S){if("boolean"==typeof S&&(this._rebuild=S),this._rebuild){var N=this,E=0,H=this.dom.leading*new a.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(N.textPath()||this.attr("x",N.attr("x")),"\n"==this.text()?E+=H:(this.attr("dy",H+E),E=0))}),this.fire("rebuild")}return this},build:function(S){return this._build=!!S,this},setData:function(S){return this.dom=S,this.dom.leading=new a.Number(S.leading||1.3),this}},construct:{text:function(S){return this.put(new a.Text).text(S)},plain:function(S){return this.put(new a.Text).plain(S)}}}),a.Tspan=a.invent({create:"tspan",inherit:a.Shape,extend:{text:function(S){return null==S?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof S?S.call(this,this):this.plain(S),this)},dx:function(S){return this.attr("dx",S)},dy:function(S){return this.attr("dy",S)},newLine:function(){var S=this.parent(a.Text);return this.dom.newLined=!0,this.dy(S.dom.leading*S.attr("font-size")).attr("x",S.x())}}}),a.extend(a.Text,a.Tspan,{plain:function(S){return!1===this._build&&this.clear(),this.node.appendChild(s.createTextNode(S)),this},tspan:function(S){var N=(this.textPath&&this.textPath()||this).node,E=new a.Tspan;return!1===this._build&&this.clear(),N.appendChild(E.node),E.text(S)},clear:function(){for(var S=(this.textPath&&this.textPath()||this).node;S.hasChildNodes();)S.removeChild(S.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),a.TextPath=a.invent({create:"textPath",inherit:a.Parent,parent:a.Text,construct:{morphArray:a.PathArray,array:function(){var S=this.track();return S?S.array():null},plot:function(S){var N=this.track(),E=null;return N&&(E=N.plot(S)),null==S?E:this},track:function(){var S=this.textPath();if(S)return S.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return a.adopt(this.node.firstChild)}}}),a.Nested=a.invent({create:function(){this.constructor.call(this,a.create("svg")),this.style("overflow","visible")},inherit:a.Container,construct:{nested:function(){return this.put(new a.Nested)}}});var y={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(S,N){return"color"==N?S:S+"-"+N}};function w(S,N,E,H){return E+H.replace(a.regex.dots," .")}function k(S){return S.toLowerCase().replace(/-(.)/g,function(N,E){return E.toUpperCase()})}function C(S){return S.charAt(0).toUpperCase()+S.slice(1)}function T(S){var N=S.toString(16);return 1==N.length?"0"+N:N}function P(S,N,E){if(null==N||null==E){var H=S.bbox();null==N?N=H.width/H.height*E:null==E&&(E=H.height/H.width*N)}return{width:N,height:E}}function F(S,N,E){return{x:N*S.a+E*S.c+0,y:N*S.b+E*S.d+0}}function O(S){return{a:S[0],b:S[1],c:S[2],d:S[3],e:S[4],f:S[5]}}function j(S){for(var N=S.childNodes.length-1;N>=0;N--)S.childNodes[N]instanceof R.SVGElement&&j(S.childNodes[N]);return a.adopt(S).id(a.eid(S.nodeName))}function Y(S){return Math.abs(S)>1e-37?S:0}["fill","stroke"].forEach(function(S){var N={};N[S]=function(E){if(void 0===E)return this;if("string"==typeof E||a.Color.isRgb(E)||E&&"function"==typeof E.fill)this.attr(S,E);else for(var H=y[S].length-1;H>=0;H--)null!=E[y[S][H]]&&this.attr(y.prefix(S,y[S][H]),E[y[S][H]]);return this},a.extend(a.Element,a.FX,N)}),a.extend(a.Element,a.FX,{translate:function(S,N){return this.transform({x:S,y:N})},matrix:function(S){return this.attr("transform",new a.Matrix(6==arguments.length?[].slice.call(arguments):S))},opacity:function(S){return this.attr("opacity",S)},dx:function(S){return this.x(new a.Number(S).plus(this instanceof a.FX?0:this.x()),!0)},dy:function(S){return this.y(new a.Number(S).plus(this instanceof a.FX?0:this.y()),!0)}}),a.extend(a.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(S){return this.node.getPointAtLength(S)}}),a.Set=a.invent({create:function(S){Array.isArray(S)?this.members=S:this.clear()},extend:{add:function(){for(var S=[].slice.call(arguments),N=0,E=S.length;N<E;N++)this.members.push(S[N]);return this},remove:function(S){var N=this.index(S);return N>-1&&this.members.splice(N,1),this},each:function(S){for(var N=0,E=this.members.length;N<E;N++)S.apply(this.members[N],[N,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(S){return this.index(S)>=0},index:function(S){return this.members.indexOf(S)},get:function(S){return this.members[S]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(S){return new a.Set(S)}}}),a.FX.Set=a.invent({create:function(S){this.set=S}}),a.Set.inherit=function(){var S=[];for(var N in a.Shape.prototype)"function"==typeof a.Shape.prototype[N]&&"function"!=typeof a.Set.prototype[N]&&S.push(N);for(var N in S.forEach(function(H){a.Set.prototype[H]=function(){for(var W=0,K=this.members.length;W<K;W++)this.members[W]&&"function"==typeof this.members[W][H]&&this.members[W][H].apply(this.members[W],arguments);return"animate"==H?this.fx||(this.fx=new a.FX.Set(this)):this}}),S=[],a.FX.prototype)"function"==typeof a.FX.prototype[N]&&"function"!=typeof a.FX.Set.prototype[N]&&S.push(N);S.forEach(function(E){a.FX.Set.prototype[E]=function(){for(var H=0,W=this.set.members.length;H<W;H++)this.set.members[H].fx[E].apply(this.set.members[H].fx,arguments);return this}})},a.extend(a.Element,{}),a.extend(a.Element,{remember:function(S,N){if("object"===mi(arguments[0]))for(var E in S)this.remember(E,S[E]);else{if(1==arguments.length)return this.memory()[S];this.memory()[S]=N}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var S=arguments.length-1;S>=0;S--)delete this.memory()[arguments[S]];return this},memory:function(){return this._memory||(this._memory={})}}),a.get=function(S){var N=s.getElementById(function(E){var H=(E||"").toString().match(a.regex.reference);if(H)return H[1]}(S)||S);return a.adopt(N)},a.select=function(S,N){return new a.Set(a.utils.map((N||s).querySelectorAll(S),function(E){return a.adopt(E)}))},a.extend(a.Parent,{select:function(S){return a.select(S,this.node)}});var G="abcdef".split("");if("function"!=typeof R.CustomEvent){var U=function(S,N){N=N||{bubbles:!1,cancelable:!1,detail:void 0};var E=s.createEvent("CustomEvent");return E.initCustomEvent(S,N.bubbles,N.cancelable,N.detail),E};U.prototype=R.Event.prototype,a.CustomEvent=U}else a.CustomEvent=R.CustomEvent;return a},void 0!==(Po=function(){return Ea(Oa,Oa.document)}.call(xs,Xn,xs,_r))&&(_r.exports=Po),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(f,y){return this.add(f,y),!f.attr("in")&&this.autoSetIn&&f.attr("in",this.source),f.attr("result")||f.attr("result",f),f},blend:function(f,y,w){return this.put(new SVG.BlendEffect(f,y,w))},colorMatrix:function(f,y){return this.put(new SVG.ColorMatrixEffect(f,y))},convolveMatrix:function(f){return this.put(new SVG.ConvolveMatrixEffect(f))},componentTransfer:function(f){return this.put(new SVG.ComponentTransferEffect(f))},composite:function(f,y,w){return this.put(new SVG.CompositeEffect(f,y,w))},flood:function(f,y){return this.put(new SVG.FloodEffect(f,y))},offset:function(f,y){return this.put(new SVG.OffsetEffect(f,y))},image:function(f){return this.put(new SVG.ImageEffect(f))},merge:function(){var f=[void 0];for(var y in arguments)f.push(arguments[y]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,f)))},gaussianBlur:function(f,y){return this.put(new SVG.GaussianBlurEffect(f,y))},morphology:function(f,y){return this.put(new SVG.MorphologyEffect(f,y))},diffuseLighting:function(f,y,w){return this.put(new SVG.DiffuseLightingEffect(f,y,w))},displacementMap:function(f,y,w,k,C){return this.put(new SVG.DisplacementMapEffect(f,y,w,k,C))},specularLighting:function(f,y,w,k){return this.put(new SVG.SpecularLightingEffect(f,y,w,k))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(f,y,w,k,C){return this.put(new SVG.TurbulenceEffect(f,y,w,k,C))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(f){var y=this.put(new SVG.Filter);return"function"==typeof f&&f.call(y,y),y}}),SVG.extend(SVG.Container,{filter:function(f){return this.defs().filter(f)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(f){return this.filterer=f instanceof SVG.Element?f:this.doc().filter(f),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(f){return this.filterer&&!0===f&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(f){return null==f?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",f)},result:function(f){return null==f?this.attr("result"):this.attr("result",f)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(f){return null==f?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",f)},result:function(f){return null==f?this.attr("result"):this.attr("result",f)},toString:function(){return this.result()}}});var R={blend:function(f,y){return this.parent()&&this.parent().blend(this,f,y)},colorMatrix:function(f,y){return this.parent()&&this.parent().colorMatrix(f,y).in(this)},convolveMatrix:function(f){return this.parent()&&this.parent().convolveMatrix(f).in(this)},componentTransfer:function(f){return this.parent()&&this.parent().componentTransfer(f).in(this)},composite:function(f,y){return this.parent()&&this.parent().composite(this,f,y)},flood:function(f,y){return this.parent()&&this.parent().flood(f,y)},offset:function(f,y){return this.parent()&&this.parent().offset(f,y).in(this)},image:function(f){return this.parent()&&this.parent().image(f)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(f,y){return this.parent()&&this.parent().gaussianBlur(f,y).in(this)},morphology:function(f,y){return this.parent()&&this.parent().morphology(f,y).in(this)},diffuseLighting:function(f,y,w){return this.parent()&&this.parent().diffuseLighting(f,y,w).in(this)},displacementMap:function(f,y,w,k){return this.parent()&&this.parent().displacementMap(this,f,y,w,k)},specularLighting:function(f,y,w,k){return this.parent()&&this.parent().specularLighting(f,y,w,k).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(f,y,w,k,C){return this.parent()&&this.parent().turbulence(f,y,w,k,C).in(this)}};SVG.extend(SVG.Effect,R),SVG.extend(SVG.ParentEffect,R),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(f){this.attr("in",f)}}});var s={blend:function(f,y,w){this.attr({in:f,in2:y,mode:w||"normal"})},colorMatrix:function(f,y){"matrix"==f&&(y=d(y)),this.attr({type:f,values:void 0===y?null:y})},convolveMatrix:function(f){f=d(f),this.attr({order:Math.sqrt(f.split(" ").length),kernelMatrix:f})},composite:function(f,y,w){this.attr({in:f,in2:y,operator:w})},flood:function(f,y){this.attr("flood-color",f),null!=y&&this.attr("flood-opacity",y)},offset:function(f,y){this.attr({dx:f,dy:y})},image:function(f){this.attr("href",f,SVG.xlink)},displacementMap:function(f,y,w,k,C){this.attr({in:f,in2:y,scale:w,xChannelSelector:k,yChannelSelector:C})},gaussianBlur:function(f,y){this.attr("stdDeviation",null!=f||null!=y?function(w){if(!Array.isArray(w))return w;for(var k=0,C=w.length,T=[];k<C;k++)T.push(w[k]);return T.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(f,y){this.attr({operator:f,radius:y})},tile:function(){},turbulence:function(f,y,w,k,C){this.attr({numOctaves:y,seed:w,stitchTiles:k,baseFrequency:f,type:C})}},a={merge:function(){var f;if(arguments[0]instanceof SVG.Set){var y=this;arguments[0].each(function(k){this instanceof SVG.MergeNode?y.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&y.put(new SVG.MergeNode(this))})}else{f=Array.isArray(arguments[0])?arguments[0]:arguments;for(var w=0;w<f.length;w++)f[w]instanceof SVG.MergeNode?this.put(f[w]):this.put(new SVG.MergeNode(f[w]))}},componentTransfer:function(f){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(w){this[w]=new(SVG["Func"+w.toUpperCase()])("identity"),this.rgb.add(this[w]),this.node.appendChild(this[w].node)}.bind(this)),f)for(var y in f.rgb&&(["r","g","b"].forEach(function(w){this[w].attr(f.rgb)}.bind(this)),delete f.rgb),f)this[y].attr(f[y])},diffuseLighting:function(f,y,w){this.attr({surfaceScale:f,diffuseConstant:y,kernelUnitLength:w})},specularLighting:function(f,y,w,k){this.attr({surfaceScale:f,diffuseConstant:y,specularExponent:w,kernelUnitLength:k})}},h={distantLight:function(f,y){this.attr({azimuth:f,elevation:y})},pointLight:function(f,y,w){this.attr({x:f,y,z:w})},spotLight:function(f,y,w,k,C,T){this.attr({x:f,y,z:w,pointsAtX:k,pointsAtY:C,pointsAtZ:T})},mergeNode:function(f){this.attr("in",f)}};function d(f){return Array.isArray(f)&&(f=new SVG.Array(f)),f.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function g(){var f=function(){};for(var y in"function"==typeof arguments[arguments.length-1]&&(f=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var w in arguments[y])f(arguments[y][w],w,arguments[y])}["r","g","b","a"].forEach(function(f){h["Func"+f.toUpperCase()]=function(y){switch(this.attr("type",y),y){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),g(s,function(f,y){var w=y.charAt(0).toUpperCase()+y.slice(1);SVG[w+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+w)),f.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),g(a,function(f,y){var w=y.charAt(0).toUpperCase()+y.slice(1);SVG[w+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+w)),f.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),g(h,function(f,y){var w=y.charAt(0).toUpperCase()+y.slice(1);SVG[w]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+w)),f.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(f){return f instanceof SVG.MergeNode?this.add(f,0):this.add(new SVG.MergeNode(f),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(f){return null==f?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",f)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function R(g,f,y,w,k,C,T){for(var P=g.slice(f,y||T),F=w.slice(k,C||T),O=0,j={pos:[0,0],start:[0,0]},Y={pos:[0,0],start:[0,0]};P[O]=s.call(j,P[O]),F[O]=s.call(Y,F[O]),P[O][0]!=F[O][0]||"M"==P[O][0]||"A"==P[O][0]&&(P[O][4]!=F[O][4]||P[O][5]!=F[O][5])?(Array.prototype.splice.apply(P,[O,1].concat(h.call(j,P[O]))),Array.prototype.splice.apply(F,[O,1].concat(h.call(Y,F[O])))):(P[O]=a.call(j,P[O]),F[O]=a.call(Y,F[O])),++O!=P.length||O!=F.length;)O==P.length&&P.push(["C",j.pos[0],j.pos[1],j.pos[0],j.pos[1],j.pos[0],j.pos[1]]),O==F.length&&F.push(["C",Y.pos[0],Y.pos[1],Y.pos[0],Y.pos[1],Y.pos[0],Y.pos[1]]);return{start:P,dest:F}}function s(g){switch(g[0]){case"z":case"Z":g[0]="L",g[1]=this.start[0],g[2]=this.start[1];break;case"H":g[0]="L",g[2]=this.pos[1];break;case"V":g[0]="L",g[2]=g[1],g[1]=this.pos[0];break;case"T":g[0]="Q",g[3]=g[1],g[4]=g[2],g[1]=this.reflection[1],g[2]=this.reflection[0];break;case"S":g[0]="C",g[6]=g[4],g[5]=g[3],g[4]=g[2],g[3]=g[1],g[2]=this.reflection[1],g[1]=this.reflection[0]}return g}function a(g){var f=g.length;return this.pos=[g[f-2],g[f-1]],-1!="SCQT".indexOf(g[0])&&(this.reflection=[2*this.pos[0]-g[f-4],2*this.pos[1]-g[f-3]]),g}function h(g){var f=[g];switch(g[0]){case"M":return this.pos=this.start=[g[1],g[2]],f;case"L":g[5]=g[3]=g[1],g[6]=g[4]=g[2],g[1]=this.pos[0],g[2]=this.pos[1];break;case"Q":g[6]=g[4],g[5]=g[3],g[4]=1*g[4]/3+2*g[2]/3,g[3]=1*g[3]/3+2*g[1]/3,g[2]=1*this.pos[1]/3+2*g[2]/3,g[1]=1*this.pos[0]/3+2*g[1]/3;break;case"A":g=(f=function(y,w){var k,C,T,P,F,O,j,Y,G,U,S,N,E,H,W,K,tt,et,gt,St,bt,Et,Gt,Bt,he,me,fe=Math.abs(w[1]),Be=Math.abs(w[2]),ye=w[3]%360,_e=w[4],Le=w[5],ni=w[6],yo=w[7],Ri=new SVG.Point(y),ze=new SVG.Point(ni,yo),Ba=[];if(0===fe||0===Be||Ri.x===ze.x&&Ri.y===ze.y)return[["C",Ri.x,Ri.y,ze.x,ze.y,ze.x,ze.y]];for((C=(k=new SVG.Point((Ri.x-ze.x)/2,(Ri.y-ze.y)/2).transform((new SVG.Matrix).rotate(ye))).x*k.x/(fe*fe)+k.y*k.y/(Be*Be))>1&&(fe*=C=Math.sqrt(C),Be*=C),T=(new SVG.Matrix).rotate(ye).scale(1/fe,1/Be).rotate(-ye),Ri=Ri.transform(T),O=(P=[(ze=ze.transform(T)).x-Ri.x,ze.y-Ri.y])[0]*P[0]+P[1]*P[1],F=Math.sqrt(O),P[0]/=F,P[1]/=F,j=O<4?Math.sqrt(1-O/4):0,_e===Le&&(j*=-1),Y=new SVG.Point((ze.x+Ri.x)/2+j*-P[1],(ze.y+Ri.y)/2+j*P[0]),G=new SVG.Point(Ri.x-Y.x,Ri.y-Y.y),U=new SVG.Point(ze.x-Y.x,ze.y-Y.y),S=Math.acos(G.x/Math.sqrt(G.x*G.x+G.y*G.y)),G.y<0&&(S*=-1),N=Math.acos(U.x/Math.sqrt(U.x*U.x+U.y*U.y)),U.y<0&&(N*=-1),Le&&S>N&&(N+=2*Math.PI),!Le&&S<N&&(N-=2*Math.PI),K=[],tt=S,E=(N-S)/(H=Math.ceil(2*Math.abs(S-N)/Math.PI)),W=4*Math.tan(E/4)/3,bt=0;bt<=H;bt++)gt=Math.cos(tt),et=Math.sin(tt),St=new SVG.Point(Y.x+gt,Y.y+et),K[bt]=[new SVG.Point(St.x+W*et,St.y-W*gt),St,new SVG.Point(St.x-W*et,St.y+W*gt)],tt+=E;for(K[0][0]=K[0][1].clone(),K[K.length-1][2]=K[K.length-1][1].clone(),T=(new SVG.Matrix).rotate(ye).scale(fe,Be).rotate(-ye),bt=0,Et=K.length;bt<Et;bt++)K[bt][0]=K[bt][0].transform(T),K[bt][1]=K[bt][1].transform(T),K[bt][2]=K[bt][2].transform(T);for(bt=1,Et=K.length;bt<Et;bt++)Gt=(St=K[bt-1][2]).x,Bt=St.y,he=(St=K[bt][0]).x,me=St.y,ni=(St=K[bt][1]).x,Ba.push(["C",Gt,Bt,he,me,ni,yo=St.y]);return Ba}(this.pos,g))[0]}return g[0]="C",this.pos=[g[5],g[6]],this.reflection=[2*g[5]-g[3],2*g[6]-g[4]],f}function d(g,f){if(!1===f)return!1;for(var y=f,w=g.length;y<w;++y)if("M"==g[y][0])return y;return!1}SVG.extend(SVG.PathArray,{morph:function(g){for(var f=this.value,y=this.parse(g),w=0,k=0,C=!1,T=!1;!1!==w||!1!==k;){var P;C=d(f,!1!==w&&w+1),T=d(y,!1!==k&&k+1),!1===w&&(w=0==(P=new SVG.PathArray(F.start).bbox()).height||0==P.width?f.push(f[0])-1:f.push(["M",P.x+P.width/2,P.y+P.height/2])-1),!1===k&&(k=0==(P=new SVG.PathArray(F.dest).bbox()).height||0==P.width?y.push(y[0])-1:y.push(["M",P.x+P.width/2,P.y+P.height/2])-1);var F=R(f,w,C,y,k,T);f=f.slice(0,w).concat(F.start,!1===C?[]:f.slice(C)),y=y.slice(0,k).concat(F.dest,!1===T?[]:y.slice(T)),w=!1!==C&&w+F.start.length,k=!1!==T&&k+F.dest.length}return this.value=f,this.destination=new SVG.PathArray,this.destination.value=y,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function R(s){s.remember("_draggable",this),this.el=s}R.prototype.init=function(s,a){var h=this;this.constraint=s,this.value=a,this.el.on("mousedown.drag",function(d){h.start(d)}),this.el.on("touchstart.drag",function(d){h.start(d)})},R.prototype.transformPoint=function(s,a){var h=(s=s||window.event).changedTouches&&s.changedTouches[0]||s;return this.p.x=h.clientX-(a||0),this.p.y=h.clientY,this.p.matrixTransform(this.m)},R.prototype.getBBox=function(){var s=this.el.bbox();return this.el instanceof SVG.Nested&&(s=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(s.x=this.el.x(),s.y=this.el.y()),s},R.prototype.start=function(s){if("click"!=s.type&&"mousedown"!=s.type&&"mousemove"!=s.type||1==(s.which||s.buttons)){var a=this;if(this.el.fire("beforedrag",{event:s,handler:this}),!this.el.event().defaultPrevented){s.preventDefault(),s.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var h,d=this.getBBox();if(this.el instanceof SVG.Text)switch(h=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":h/=2;break;case"start":h=0}this.startPoints={point:this.transformPoint(s,h),box:d,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(g){a.drag(g)}),SVG.on(window,"touchmove.drag",function(g){a.drag(g)}),SVG.on(window,"mouseup.drag",function(g){a.end(g)}),SVG.on(window,"touchend.drag",function(g){a.end(g)}),this.el.fire("dragstart",{event:s,p:this.startPoints.point,m:this.m,handler:this})}}},R.prototype.drag=function(s){var a=this.getBBox(),h=this.transformPoint(s),d=this.startPoints.box.x+h.x-this.startPoints.point.x,g=this.startPoints.box.y+h.y-this.startPoints.point.y,f=this.constraint,y=h.x-this.startPoints.point.x,w=h.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:s,p:h,m:this.m,handler:this}),this.el.event().defaultPrevented)return h;if("function"==typeof f){var k=f.call(this.el,d,g,this.m);"boolean"==typeof k&&(k={x:k,y:k}),!0===k.x?this.el.x(d):!1!==k.x&&this.el.x(k.x),!0===k.y?this.el.y(g):!1!==k.y&&this.el.y(k.y)}else"object"==typeof f&&(null!=f.minX&&d<f.minX?y=(d=f.minX)-this.startPoints.box.x:null!=f.maxX&&d>f.maxX-a.width&&(y=(d=f.maxX-a.width)-this.startPoints.box.x),null!=f.minY&&g<f.minY?w=(g=f.minY)-this.startPoints.box.y:null!=f.maxY&&g>f.maxY-a.height&&(w=(g=f.maxY-a.height)-this.startPoints.box.y),null!=f.snapToGrid&&(d-=d%f.snapToGrid,g-=g%f.snapToGrid,y-=y%f.snapToGrid,w-=w%f.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:y,y:w},!0):this.el.move(d,g));return h},R.prototype.end=function(s){var a=this.drag(s);this.el.fire("dragend",{event:s,p:a,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(s,a){"function"!=typeof s&&"object"!=typeof s||(a=s,s=!0);var h=this.remember("_draggable")||new R(this);return(s=void 0===s||s)?h.init(a||{},s):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function R(s){this.el=s,s.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(a,h,d){var g="string"!=typeof a?a:h[a];return d?g/2:g},this.pointCoords=function(a,h){var d=this.pointsList[a];return{x:this.pointCoord(d[0],h,"t"===a||"b"===a),y:this.pointCoord(d[1],h,"r"===a||"l"===a)}}}R.prototype.init=function(s,a){var h=this.el.bbox();this.options={};var d=this.el.selectize.defaults.points;for(var g in this.el.selectize.defaults)this.options[g]=this.el.selectize.defaults[g],void 0!==a[g]&&(this.options[g]=a[g]);var f=["points","pointsExclude"];for(var g in f){var y=this.options[f[g]];"string"==typeof y?y=y.length>0?y.split(/\s*,\s*/i):[]:"boolean"==typeof y&&"points"===f[g]&&(y=y?d:[]),this.options[f[g]]=y}this.options.points=[d,this.options.points].reduce(function(w,k){return w.filter(function(C){return k.indexOf(C)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(w,k){return w.filter(function(C){return k.indexOf(C)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(h.x,h.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(s):this.selectRect(s),this.observe(),this.cleanup()},R.prototype.selectPoints=function(s){return this.pointSelection.isSelected=s,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},R.prototype.getPointArray=function(){var s=this.el.bbox();return this.el.array().valueOf().map(function(a){return[a[0]-s.x,a[1]-s.y]})},R.prototype.drawPoints=function(){for(var s=this,a=this.getPointArray(),h=0,d=a.length;h<d;++h){var g=function(y){return function(w){(w=w||window.event).preventDefault?w.preventDefault():w.returnValue=!1,w.stopPropagation(),s.el.fire("point",{x:w.pageX||w.touches[0].pageX,y:w.pageY||w.touches[0].pageY,i:y,event:w})}}(h),f=this.drawPoint(a[h][0],a[h][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",g).on("mousedown",g);this.pointSelection.set.add(f)}},R.prototype.drawPoint=function(s,a){var h=this.options.pointType;switch(h){case"circle":return this.drawCircle(s,a);case"rect":return this.drawRect(s,a);default:if("function"==typeof h)return h.call(this,s,a);throw new Error("Unknown "+h+" point type!")}},R.prototype.drawCircle=function(s,a){return this.nested.circle(this.options.pointSize).center(s,a)},R.prototype.drawRect=function(s,a){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(s,a)},R.prototype.updatePointSelection=function(){var s=this.getPointArray();this.pointSelection.set.each(function(a){this.cx()===s[a][0]&&this.cy()===s[a][1]||this.center(s[a][0],s[a][1])})},R.prototype.updateRectSelection=function(){var s=this,a=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:a.width,height:a.height}),this.options.points.length&&this.options.points.map(function(d,g){var f=s.pointCoords(d,a);s.rectSelection.set.get(g+1).center(f.x,f.y)}),this.options.rotationPoint){var h=this.rectSelection.set.length();this.rectSelection.set.get(h-1).center(a.width/2,20)}},R.prototype.selectRect=function(s){var a=this,h=this.el.bbox();function d(y){return function(w){(w=w||window.event).preventDefault?w.preventDefault():w.returnValue=!1,w.stopPropagation(),a.el.fire(y,{x:w.pageX||w.touches[0].pageX,y:w.pageY||w.touches[0].pageY,event:w})}}if(this.rectSelection.isSelected=s,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(h.width,h.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(y,w){var k=a.pointCoords(y,h),C=a.drawPoint(k.x,k.y).attr("class",a.options.classPoints+"_"+y).on("mousedown",d(y)).on("touchstart",d(y));a.rectSelection.set.add(C)}),this.rectSelection.set.each(function(){this.addClass(a.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var g=function(y){(y=y||window.event).preventDefault?y.preventDefault():y.returnValue=!1,y.stopPropagation(),a.el.fire("rot",{x:y.pageX||y.touches[0].pageX,y:y.pageY||y.touches[0].pageY,event:y})},f=this.drawPoint(h.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",g).on("mousedown",g);this.rectSelection.set.add(f)}},R.prototype.handler=function(){var s=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(s.x,s.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},R.prototype.observe=function(){var s=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){s.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){s.handler()})},R.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(s,a){return"object"==typeof s&&(a=s,s=!0),(this.remember("_selectHandler")||new R(this)).init(void 0===s||s,a||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function R(s){s.remember("_resizeHandler",this),this.el=s,this.parameters={},this.lastUpdateCall=null,this.p=s.doc().node.createSVGPoint()}R.prototype.transformPoint=function(s,a,h){return this.p.x=s-(this.offset.x-window.pageXOffset),this.p.y=a-(this.offset.y-window.pageYOffset),this.p.matrixTransform(h||this.m)},R.prototype._extractPosition=function(s){return{x:null!=s.clientX?s.clientX:s.touches[0].clientX,y:null!=s.clientY?s.clientY:s.touches[0].clientY}},R.prototype.init=function(s){var a=this;if(this.stop(),"stop"!==s){for(var h in this.options={},this.el.resize.defaults)this.options[h]=this.el.resize.defaults[h],void 0!==s[h]&&(this.options[h]=s[h]);this.el.on("lt.resize",function(d){a.resize(d||window.event)}),this.el.on("rt.resize",function(d){a.resize(d||window.event)}),this.el.on("rb.resize",function(d){a.resize(d||window.event)}),this.el.on("lb.resize",function(d){a.resize(d||window.event)}),this.el.on("t.resize",function(d){a.resize(d||window.event)}),this.el.on("r.resize",function(d){a.resize(d||window.event)}),this.el.on("b.resize",function(d){a.resize(d||window.event)}),this.el.on("l.resize",function(d){a.resize(d||window.event)}),this.el.on("rot.resize",function(d){a.resize(d||window.event)}),this.el.on("point.resize",function(d){a.resize(d||window.event)}),this.update()}},R.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},R.prototype.resize=function(s){var a=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var h=this._extractPosition(s.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(h.x,h.y),x:s.detail.x,y:s.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==s.detail.i){var d=this.el.array().valueOf();this.parameters.i=s.detail.i,this.parameters.pointCoords=[d[s.detail.i][0],d[s.detail.i][1]]}switch(s.type){case"lt":this.calc=function(g,f){var y=this.snapToGrid(g,f);if(this.parameters.box.width-y[0]>0&&this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-y[0]);y=this.checkAspectRatio(y),this.el.move(this.parameters.box.x+y[0],this.parameters.box.y+y[1]).size(this.parameters.box.width-y[0],this.parameters.box.height-y[1])}};break;case"rt":this.calc=function(g,f){var y=this.snapToGrid(g,f,2);if(this.parameters.box.width+y[0]>0&&this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+y[0]);y=this.checkAspectRatio(y,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+y[1]).size(this.parameters.box.width+y[0],this.parameters.box.height-y[1])}};break;case"rb":this.calc=function(g,f){var y=this.snapToGrid(g,f,0);if(this.parameters.box.width+y[0]>0&&this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+y[0]);y=this.checkAspectRatio(y),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+y[0],this.parameters.box.height+y[1])}};break;case"lb":this.calc=function(g,f){var y=this.snapToGrid(g,f,1);if(this.parameters.box.width-y[0]>0&&this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+y[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-y[0]);y=this.checkAspectRatio(y,!0),this.el.move(this.parameters.box.x+y[0],this.parameters.box.y).size(this.parameters.box.width-y[0],this.parameters.box.height+y[1])}};break;case"t":this.calc=function(g,f){var y=this.snapToGrid(g,f,2);if(this.parameters.box.height-y[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+y[1]).height(this.parameters.box.height-y[1])}};break;case"r":this.calc=function(g,f){var y=this.snapToGrid(g,f,0);if(this.parameters.box.width+y[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+y[0])}};break;case"b":this.calc=function(g,f){var y=this.snapToGrid(g,f,0);if(this.parameters.box.height+y[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+y[1])}};break;case"l":this.calc=function(g,f){var y=this.snapToGrid(g,f,1);if(this.parameters.box.width-y[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+y[0],this.parameters.box.y).width(this.parameters.box.width-y[0])}};break;case"rot":this.calc=function(g,f){var y=g+this.parameters.p.x,w=f+this.parameters.p.y,k=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),C=Math.atan2(w-this.parameters.box.y-this.parameters.box.height/2,y-this.parameters.box.x-this.parameters.box.width/2),T=this.parameters.rotation+180*(C-k)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(T-T%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(g,f){var y=this.snapToGrid(g,f,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),w=this.el.array().valueOf();w[this.parameters.i][0]=this.parameters.pointCoords[0]+y[0],w[this.parameters.i][1]=this.parameters.pointCoords[1]+y[1],this.el.plot(w)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:s}),SVG.on(window,"touchmove.resize",function(g){a.update(g||window.event)}),SVG.on(window,"touchend.resize",function(){a.done()}),SVG.on(window,"mousemove.resize",function(g){a.update(g||window.event)}),SVG.on(window,"mouseup.resize",function(){a.done()})},R.prototype.update=function(s){if(s){var a=this._extractPosition(s),h=this.transformPoint(a.x,a.y),d=h.x-this.parameters.p.x,g=h.y-this.parameters.p.y;this.lastUpdateCall=[d,g],this.calc(d,g),this.el.fire("resizing",{dx:d,dy:g,event:s})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},R.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},R.prototype.snapToGrid=function(s,a,h,d){var g;return g=void 0!==d?[(h+s)%this.options.snapToGrid,(d+a)%this.options.snapToGrid]:[(this.parameters.box.x+s+(1&(h=h??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+a+(2&h?0:this.parameters.box.height))%this.options.snapToGrid],s<0&&(g[0]-=this.options.snapToGrid),a<0&&(g[1]-=this.options.snapToGrid),s-=Math.abs(g[0])<this.options.snapToGrid/2?g[0]:g[0]-(s<0?-this.options.snapToGrid:this.options.snapToGrid),a-=Math.abs(g[1])<this.options.snapToGrid/2?g[1]:g[1]-(a<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(s,a,h,d)},R.prototype.constraintToBox=function(s,a,h,d){var g,f,y=this.options.constraint||{};return void 0!==d?(g=h,f=d):(g=this.parameters.box.x+(1&h?0:this.parameters.box.width),f=this.parameters.box.y+(2&h?0:this.parameters.box.height)),void 0!==y.minX&&g+s<y.minX&&(s=y.minX-g),void 0!==y.maxX&&g+s>y.maxX&&(s=y.maxX-g),void 0!==y.minY&&f+a<y.minY&&(a=y.minY-f),void 0!==y.maxY&&f+a>y.maxY&&(a=y.maxY-f),[s,a]},R.prototype.checkAspectRatio=function(s,a){if(!this.options.saveAspectRatio)return s;var h=s.slice(),d=this.parameters.box.width/this.parameters.box.height,g=this.parameters.box.width+s[0],f=this.parameters.box.height-s[1],y=g/f;return y<d?(h[1]=g/d-this.parameters.box.height,a&&(h[1]=-h[1])):y>d&&(h[0]=this.parameters.box.width-f*d,a&&(h[0]=-h[0])),h},SVG.extend(SVG.Element,{resize:function(s){return(this.remember("_resizeHandler")||new R(this)).init(s||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var _l=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new To(this.ctx),this.ctx.axes=new rt(this.ctx),this.ctx.core=new ii(this.ctx.el,this.ctx),this.ctx.config=new mr({}),this.ctx.data=new Dt(this.ctx),this.ctx.grid=new Ft(this.ctx),this.ctx.graphics=new kt(this.ctx),this.ctx.coreUtils=new it(this.ctx),this.ctx.crosshairs=new ee(this.ctx),this.ctx.events=new ot(this.ctx),this.ctx.exports=new pt(this.ctx),this.ctx.localization=new Te(this.ctx),this.ctx.options=new Nn,this.ctx.responsive=new fi(this.ctx),this.ctx.series=new Ti(this.ctx),this.ctx.theme=new Ae(this.ctx),this.ctx.formatters=new te(this.ctx),this.ctx.titleSubtitle=new mn(this.ctx),this.ctx.legend=new B(this.ctx),this.ctx.toolbar=new no(this.ctx),this.ctx.tooltip=new pi(this.ctx),this.ctx.dimensions=new li(this.ctx),this.ctx.updateHelpers=new Fn(this.ctx),this.ctx.zoomPanSelection=new Wl(this.ctx),this.ctx.w.globals.tooltip=new pi(this.ctx)}}]),R}(),Js=function(){function R(s){xt(this,R),this.ctx=s,this.w=s.w}return Yt(R,[{key:"clear",value:function(s){var a=s.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:a})}},{key:"killSVG",value:function(s){s.each(function(a,h){this.removeClass("*"),this.off(),this.stop()},!0),s.ungroup(),s.clear()}},{key:"clearDomElements",value:function(s){var a=this,d=this.w.globals.dom.Paper.node;d.parentNode&&d.parentNode.parentNode&&!s.isUpdating&&(d.parentNode.parentNode.style.minHeight="unset");var g=this.w.globals.dom.baseEl;g&&this.ctx.eventList.forEach(function(y){g.removeEventListener(y,a.ctx.events.documentEvent)});var f=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(f.Paper),f.Paper.remove(),f.elWrap=null,f.elGraphical=null,f.elLegendWrap=null,f.elLegendForeign=null,f.baseEl=null,f.elGridRect=null,f.elGridRectMask=null,f.elGridRectMarkerMask=null,f.elForecastMask=null,f.elNonForecastMask=null,f.elDefs=null}}]),R}(),ja=new WeakMap,Kl=function(){function R(s,a){xt(this,R),this.opts=a,this.ctx=this,this.w=new Qt(a).init(),this.el=s,this.w.globals.cuid=ht.randomId(),this.w.globals.chartID=this.w.config.chart.id?ht.escapeString(this.w.config.chart.id):this.w.globals.cuid,new _l(this).initModules(),this.create=ht.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Yt(R,[{key:"render",value:function(){var s=this;return new Promise(function(a,h){if(null!==s.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),s.w.config.chart.id&&Apex._chartInstances.push({id:s.w.globals.chartID,group:s.w.config.chart.group,chart:s}),s.setLocale(s.w.config.chart.defaultLocale);var d=s.w.config.chart.events.beforeMount;if("function"==typeof d&&d(s,s.w),s.events.fireEvent("beforeMount",[s,s.w]),window.addEventListener("resize",s.windowResizeHandler),function(P,F){var O=!1;if(P.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var j=P.getBoundingClientRect();"none"!==P.style.display&&0!==j.width||(O=!0)}var Y=new ResizeObserver(function(G){O&&F.call(P,G),O=!0});P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(P.children).forEach(function(G){return Y.observe(G)}):Y.observe(P),ja.set(F,Y)}(s.el.parentNode,s.parentResizeHandler),!s.css){var g=s.el.getRootNode&&s.el.getRootNode(),f=ht.is("ShadowRoot",g),y=s.el.ownerDocument,w=y.getElementById("apexcharts-css");if(f||!w){var k;s.css=document.createElement("style"),s.css.id="apexcharts-css",s.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var C=(null===(k=s.opts.chart)||void 0===k?void 0:k.nonce)||s.w.config.chart.nonce;C&&s.css.setAttribute("nonce",C),f?g.prepend(s.css):y.head.appendChild(s.css)}}var T=s.create(s.w.config.series,{});if(!T)return a(s);s.mount(T).then(function(){"function"==typeof s.w.config.chart.events.mounted&&s.w.config.chart.events.mounted(s,s.w),s.events.fireEvent("mounted",[s,s.w]),a(T)}).catch(function(P){h(P)})}else h(new Error("Element not found"))})}},{key:"create",value:function(s,a){var h=this.w;new _l(this).initModules();var d=this.w.globals;if(d.noData=!1,d.animationEnded=!1,this.responsive.checkResponsiveConfig(a),h.config.xaxis.convertedCatToNumeric&&new bi(h.config).convertCatToNumericXaxis(h.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===h.config.chart.type&&(h.config.grid.show=!1,h.config.yaxis[0].show=!1),0===d.svgWidth))return d.animationEnded=!0,null;var g=it.checkComboSeries(s);d.comboCharts=g.comboCharts,d.comboBarCount=g.comboBarCount;var f=s.every(function(C){return C.data&&0===C.data.length});(0===s.length||f)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(s),this.theme.init(),new gn(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),d.noData&&d.collapsedSeries.length!==d.series.length&&!h.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),d.axisCharts&&(this.core.coreCalculations(),"category"!==h.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=h.globals.minX,this.ctx.toolbar.maxX=h.globals.maxX),this.formatters.heatmapLabelFormatters(),new it(this).getLargestMarkerSize(),this.dimensions.plotCoords();var y=this.core.xySettings();this.grid.createGridMask();var w=this.core.plotChartType(s,y),k=new ut(this);return k.bringForward(),h.config.dataLabels.background.enabled&&k.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:w,xyRatios:y,dimensions:{plot:{left:h.globals.translateX,top:h.globals.translateY,width:h.globals.gridWidth,height:h.globals.gridHeight}}}}},{key:"mount",value:function(){var s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=this,d=h.w;return new Promise(function(g,f){if(null===h.el)return f(new Error("Not enough data to display or target element not found"));(null===a||d.globals.allSeriesCollapsed)&&h.series.handleNoData(),h.grid=new Ft(h);var y,w,k=h.grid.drawGrid();if(h.annotations=new Gi(h),h.annotations.drawImageAnnos(),h.annotations.drawTextAnnos(),"back"===d.config.grid.position&&(k&&d.globals.dom.elGraphical.add(k.el),null!=k&&null!==(y=k.elGridBorders)&&void 0!==y&&y.node&&d.globals.dom.elGraphical.add(k.elGridBorders)),Array.isArray(a.elGraph))for(var C=0;C<a.elGraph.length;C++)d.globals.dom.elGraphical.add(a.elGraph[C]);else d.globals.dom.elGraphical.add(a.elGraph);"front"===d.config.grid.position&&(k&&d.globals.dom.elGraphical.add(k.el),null!=k&&null!==(w=k.elGridBorders)&&void 0!==w&&w.node&&d.globals.dom.elGraphical.add(k.elGridBorders)),"front"===d.config.xaxis.crosshairs.position&&h.crosshairs.drawXCrosshairs(),"front"===d.config.yaxis[0].crosshairs.position&&h.crosshairs.drawYCrosshairs(),"treemap"!==d.config.chart.type&&h.axes.drawAxis(d.config.chart.type,k);var T=new Mt(s.ctx,k),P=new Ze(s.ctx,k);if(null!==k&&(T.xAxisLabelCorrections(k.xAxisTickWidth),P.setYAxisTextAlignments(),d.config.yaxis.map(function(O,j){-1===d.globals.ignoreYAxisIndexes.indexOf(j)&&P.yAxisTitleRotate(j,O.opposite)})),h.annotations.drawAxesAnnotations(),!d.globals.noData){if(d.config.tooltip.enabled&&!d.globals.noData&&h.w.globals.tooltip.drawTooltip(a.xyRatios),d.globals.axisCharts&&(d.globals.isXNumeric||d.config.xaxis.convertedCatToNumeric||d.globals.isRangeBar))(d.config.chart.zoom.enabled||d.config.chart.selection&&d.config.chart.selection.enabled||d.config.chart.pan&&d.config.chart.pan.enabled)&&h.zoomPanSelection.init({xyRatios:a.xyRatios});else{var F=d.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(O){F[O]=!1})}d.config.chart.toolbar.show&&!d.globals.allSeriesCollapsed&&h.toolbar.createToolbar()}d.globals.memory.methodsToExec.length>0&&d.globals.memory.methodsToExec.forEach(function(O){O.method(O.params,!1,O.context)}),d.globals.axisCharts||d.globals.noData||h.core.resizeNonAxisCharts(),g(h)})}},{key:"destroy",value:function(){var s,a;window.removeEventListener("resize",this.windowResizeHandler),(a=ja.get(s=this.parentResizeHandler))&&(a.disconnect(),ja.delete(s));var h=this.w.config.chart.id;h&&Apex._chartInstances.forEach(function(d,g){d.id===ht.escapeString(h)&&Apex._chartInstances.splice(g,1)}),new Js(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(s){var a=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],y=this.w;return y.globals.selection=void 0,s.series&&(this.series.resetSeries(!1,!0,!1),s.series.length&&s.series[0].data&&(s.series=s.series.map(function(w,k){return a.updateHelpers._extendSeries(w,k)})),this.updateHelpers.revertDefaultAxisMinMax()),s.xaxis&&(s=this.updateHelpers.forceXAxisUpdate(s)),s.yaxis&&(s=this.updateHelpers.forceYAxisUpdate(s)),y.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),s.theme&&(s=this.theme.updateThemeOptions(s)),this.updateHelpers._updateOptions(s,h,d,g,f)}},{key:"updateSeries",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(s,a,h)}},{key:"appendSeries",value:function(s){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this.w.config.series.slice();return d.push(s),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,a,h)}},{key:"appendData",value:function(s){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this;h.w.globals.dataChanged=!0,h.series.getPreviousPaths();for(var d=h.w.config.series.slice(),g=0;g<d.length;g++)if(null!=s[g])for(var f=0;f<s[g].data.length;f++)d[g].data.push(s[g].data[f]);return h.w.config.series=d,a&&(h.w.globals.initialSeries=ht.clone(h.w.config.series)),this.update()}},{key:"update",value:function(s){var a=this;return new Promise(function(h,d){new Js(a.ctx).clear({isUpdating:!0});var g=a.create(a.w.config.series,s);if(!g)return h(a);a.mount(g).then(function(){"function"==typeof a.w.config.chart.events.updated&&a.w.config.chart.events.updated(a,a.w),a.events.fireEvent("updated",[a,a.w]),a.w.globals.isDirty=!0,h(a)}).catch(function(f){d(f)})})}},{key:"getSyncedCharts",value:function(){var s=this.getGroupedCharts(),a=[this];return s.length&&(a=[],s.forEach(function(h){a.push(h)})),a}},{key:"getGroupedCharts",value:function(){var s=this;return Apex._chartInstances.filter(function(a){if(a.group)return!0}).map(function(a){return s.w.config.chart.group===a.group?a.chart:s})}},{key:"toggleSeries",value:function(s){return this.series.toggleSeries(s)}},{key:"highlightSeriesOnLegendHover",value:function(s,a){return this.series.toggleSeriesOnHover(s,a)}},{key:"showSeries",value:function(s){this.series.showSeries(s)}},{key:"hideSeries",value:function(s){this.series.hideSeries(s)}},{key:"isSeriesHidden",value:function(s){this.series.isSeriesHidden(s)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(s,a){this.events.addEventListener(s,a)}},{key:"removeEventListener",value:function(s,a){this.events.removeEventListener(s,a)}},{key:"addXaxisAnnotation",value:function(s){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addXaxisAnnotationExternal(s,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"addYaxisAnnotation",value:function(s){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addYaxisAnnotationExternal(s,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"addPointAnnotation",value:function(s){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=this;h&&(d=h),d.annotations.addPointAnnotationExternal(s,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d)}},{key:"clearAnnotations",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=this;s&&(a=s),a.annotations.clearAnnotations(a)}},{key:"removeAnnotation",value:function(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=this;a&&(h=a),h.annotations.removeAnnotation(h,s)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(s,a){return this.coreUtils.getSeriesTotalsXRange(s,a)}},{key:"getHighestValueInSeries",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Pe(this.ctx).getMinYMaxY(s).highestY}},{key:"getLowestValueInSeries",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Pe(this.ctx).getMinYMaxY(s).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(s,a){return this.updateHelpers.toggleDataPointSelection(s,a)}},{key:"zoomX",value:function(s,a){this.ctx.toolbar.zoomUpdateOptions(s,a)}},{key:"setLocale",value:function(s){this.localization.setCurrentLocaleValues(s)}},{key:"dataURI",value:function(s){return new pt(this.ctx).dataURI(s)}},{key:"exportToCSV",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new pt(this.ctx).exportToCSV(s)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var s=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){s.w.globals.resized=!0,s.w.globals.dataChanged=!1,s.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var s=this.w.config.chart.redrawOnWindowResize;"function"==typeof s&&(s=s()),s&&this._windowResize()}}],[{key:"getChartByID",value:function(s){var a=ht.escapeString(s);if(Apex._chartInstances){var h=Apex._chartInstances.filter(function(d){return d.id===a})[0];return h&&h.chart}}},{key:"initOnLoad",value:function(){for(var s=document.querySelectorAll("[data-apexcharts]"),a=0;a<s.length;a++)new R(s[a],JSON.parse(s[a].getAttribute("data-options"))).render()}},{key:"exec",value:function(s,a){var h=this.getChartByID(s);if(h){h.w.globals.isExecCalled=!0;var d=null;if(-1!==h.publicMethods.indexOf(a)){for(var g=arguments.length,f=new Array(g>2?g-2:0),y=2;y<g;y++)f[y-2]=arguments[y];d=h[a].apply(h,f)}return d}}},{key:"merge",value:function(s,a){return ht.extend(s,a)}}]),R}();_r.exports=Kl},9222:(_r,xs,Xn)=>{"use strict";Xn.r(xs),Xn.d(xs,{DashboardModule:()=>Ti});var Po=Xn(6733),Kr=Xn(4825),v=Xn(755),mi=Xn(7342),xt=Xn(2039);const Zs=["target"];let Yt=(()=>{class Dt{constructor(){this.activeModal=(0,v.f3M)(mi.Kz)}ngOnInit(){videojs(this.target.nativeElement,{autoplay:!0,controls:!0,sources:[{src:"https://customer-h1quqaa21rcp9xcr.cloudflarestream.com/3ecc2d75aa9d2be38113d8da43fcdbe1/manifest/video.m3u8"}]},function(){})}static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275cmp=v.Xpm({type:Dt,selectors:[["app-camera-detail"]],viewQuery:function(Mt,Ft){if(1&Mt&&v.Gf(Zs,7),2&Mt){let ce;v.iGM(ce=v.CRH())&&(Ft.target=ce.first)}},decls:72,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12"],[1,"mb-2"],[1,"fw-bold","mb-2"],[1,"text-red-500"],["controls","","muted","","playsinline","","preload","none",1,"video-js",2,"width","100%","height","300px"],["target",""],[1,"col-12","pt-5"],[1,"table-responsive"],[1,"table","table-rounded","table-row-bordered","border","gy-7","gs-7"],[1,"fw-bold","fs-6"],[2,"width","120px"],["src","/assets/media/avatars/300-4.jpg","alt","",1,"img-fluid",2,"width","30px"]],template:function(Mt,Ft){1&Mt&&(v.TgZ(0,"div",0)(1,"h4",1),v._uU(2,"CAMERA HKVISON 1"),v.qZA(),v.TgZ(3,"button",2),v.NdJ("click",function(){return Ft.activeModal.dismiss("Cross click")}),v.qZA()(),v.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"p",6),v._uU(8,"M\xe3 camera: "),v.TgZ(9,"strong"),v._uU(10,"HKVISION1212"),v.qZA()(),v.TgZ(11,"p",6),v._uU(12,"Lo\u1ea1i camera: "),v.TgZ(13,"strong"),v._uU(14,"HKVISION"),v.qZA()(),v.TgZ(15,"p",6),v._uU(16,"V\u1ecb tr\xed: G\xf3c 2/ t\xf2a 205"),v.qZA(),v.TgZ(17,"h5",7),v._uU(18,"SL ph\xe1t hi\u1ec7n: "),v.TgZ(19,"strong",8),v._uU(20,"100"),v.qZA()(),v._UZ(21,"video",9,10),v.qZA(),v.TgZ(23,"div",11)(24,"h5"),v._uU(25,"L\u1ecbch s\u1eed \u0111\u1ebfm ng\u01b0\u1eddi"),v.qZA(),v.TgZ(26,"div",12)(27,"table",13)(28,"thead")(29,"tr",14)(30,"th"),v._uU(31,"H\xecnh \u1ea3nh "),v.qZA(),v.TgZ(32,"th"),v._uU(33,"Th\u1eddi gian"),v.qZA(),v.TgZ(34,"th"),v._uU(35,"M\xf4 t\u1ea3"),v.qZA()()(),v.TgZ(36,"tbody")(37,"tr")(38,"td",15),v._UZ(39,"img",16),v.qZA(),v.TgZ(40,"td"),v._uU(41,"12/02/2024 23:21"),v.qZA(),v.TgZ(42,"td"),v._uU(43,"Ph\xe1t hi\u1ec7n \u0111\u1ed1i t\u01b0\u1ee3ng A"),v.qZA()(),v.TgZ(44,"tr")(45,"td",15),v._UZ(46,"img",16),v.qZA(),v.TgZ(47,"td"),v._uU(48,"12/02/2024 23:21"),v.qZA(),v.TgZ(49,"td"),v._uU(50,"Ph\xe1t hi\u1ec7n \u0111\u1ed1i t\u01b0\u1ee3ng A"),v.qZA()(),v.TgZ(51,"tr")(52,"td",15),v._UZ(53,"img",16),v.qZA(),v.TgZ(54,"td"),v._uU(55,"12/02/2024 23:21"),v.qZA(),v.TgZ(56,"td"),v._uU(57,"Ph\xe1t hi\u1ec7n \u0111\u1ed1i t\u01b0\u1ee3ng A"),v.qZA()(),v.TgZ(58,"tr")(59,"td",15),v._UZ(60,"img",16),v.qZA(),v.TgZ(61,"td"),v._uU(62,"12/02/2024 23:21"),v.qZA(),v.TgZ(63,"td"),v._uU(64,"Ph\xe1t hi\u1ec7n \u0111\u1ed1i t\u01b0\u1ee3ng A"),v.qZA()(),v.TgZ(65,"tr")(66,"td",15),v._UZ(67,"img",16),v.qZA(),v.TgZ(68,"td"),v._uU(69,"12/02/2024 23:21"),v.qZA(),v.TgZ(70,"td"),v._uU(71,"Ph\xe1t hi\u1ec7n \u0111\u1ed1i t\u01b0\u1ee3ng A"),v.qZA()()()()()()()())}})}return Dt})();var Hn=Xn(54);let gr,Jo=1;const qo={};function ws(Dt){return Dt in qo&&(delete qo[Dt],!0)}const Ut={setImmediate(Dt){const Ht=Jo++;return qo[Ht]=!0,gr||(gr=Promise.resolve()),gr.then(()=>ws(Ht)&&Dt()),Ht},clearImmediate(Dt){ws(Dt)}},{setImmediate:Ji,clearImmediate:_s}=Ut,$o={setImmediate(...Dt){const{delegate:Ht}=$o;return(Ht?.setImmediate||Ji)(...Dt)},clearImmediate(Dt){const{delegate:Ht}=$o;return(Ht?.clearImmediate||_s)(Dt)},delegate:void 0};var ht=Xn(7414);const si=new class To extends ht.v{flush(Ht){this._active=!0;const pt=this._scheduled;this._scheduled=void 0;const{actions:Mt}=this;let Ft;Ht=Ht||Mt.shift();do{if(Ft=Ht.execute(Ht.state,Ht.delay))break}while((Ht=Mt[0])&&Ht.id===pt&&Mt.shift());if(this._active=!1,Ft){for(;(Ht=Mt[0])&&Ht.id===pt&&Mt.shift();)Ht.unsubscribe();throw Ft}}}(class At extends Hn.o{constructor(Ht,pt){super(Ht,pt),this.scheduler=Ht,this.work=pt}requestAsyncId(Ht,pt,Mt=0){return null!==Mt&&Mt>0?super.requestAsyncId(Ht,pt,Mt):(Ht.actions.push(this),Ht._scheduled||(Ht._scheduled=$o.setImmediate(Ht.flush.bind(Ht,void 0))))}recycleAsyncId(Ht,pt,Mt=0){var Ft;if(null!=Mt?Mt>0:this.delay>0)return super.recycleAsyncId(Ht,pt,Mt);const{actions:ce}=Ht;null!=pt&&(null===(Ft=ce[ce.length-1])||void 0===Ft?void 0:Ft.id)!==pt&&($o.clearImmediate(pt),Ht._scheduled===pt&&(Ht._scheduled=void 0))}});var it=Xn(8834);const Rt=["chart"];let le=(()=>{class Dt{constructor(pt){this.ngZone=pt,this.autoUpdateSeries=!0}ngOnChanges(pt){si.schedule(()=>{this.autoUpdateSeries&&0===Object.keys(pt).filter(Mt=>"series"!==Mt).length?this.updateSeries(this.series,!0):this.createElement()})}ngOnDestroy(){this.chartObj&&this.chartObj.destroy()}createElement(){const pt={};this.annotations&&(pt.annotations=this.annotations),this.chart&&(pt.chart=this.chart),this.colors&&(pt.colors=this.colors),this.dataLabels&&(pt.dataLabels=this.dataLabels),this.series&&(pt.series=this.series),this.stroke&&(pt.stroke=this.stroke),this.labels&&(pt.labels=this.labels),this.legend&&(pt.legend=this.legend),this.fill&&(pt.fill=this.fill),this.tooltip&&(pt.tooltip=this.tooltip),this.plotOptions&&(pt.plotOptions=this.plotOptions),this.responsive&&(pt.responsive=this.responsive),this.markers&&(pt.markers=this.markers),this.noData&&(pt.noData=this.noData),this.xaxis&&(pt.xaxis=this.xaxis),this.yaxis&&(pt.yaxis=this.yaxis),this.forecastDataPoints&&(pt.forecastDataPoints=this.forecastDataPoints),this.grid&&(pt.grid=this.grid),this.states&&(pt.states=this.states),this.title&&(pt.title=this.title),this.subtitle&&(pt.subtitle=this.subtitle),this.theme&&(pt.theme=this.theme),this.chartObj&&this.chartObj.destroy(),this.ngZone.runOutsideAngular(()=>{this.chartObj=new it(this.chartElement.nativeElement,pt)}),this.render()}render(){return this.ngZone.runOutsideAngular(()=>this.chartObj.render())}updateOptions(pt,Mt,Ft,ce){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateOptions(pt,Mt,Ft,ce))}updateSeries(pt,Mt){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateSeries(pt,Mt))}appendSeries(pt,Mt){this.ngZone.runOutsideAngular(()=>this.chartObj.appendSeries(pt,Mt))}appendData(pt){this.ngZone.runOutsideAngular(()=>this.chartObj.appendData(pt))}toggleSeries(pt){return this.ngZone.runOutsideAngular(()=>this.chartObj.toggleSeries(pt))}showSeries(pt){this.ngZone.runOutsideAngular(()=>this.chartObj.showSeries(pt))}hideSeries(pt){this.ngZone.runOutsideAngular(()=>this.chartObj.hideSeries(pt))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartObj.resetSeries())}zoomX(pt,Mt){this.ngZone.runOutsideAngular(()=>this.chartObj.zoomX(pt,Mt))}toggleDataPointSelection(pt,Mt){this.ngZone.runOutsideAngular(()=>this.chartObj.toggleDataPointSelection(pt,Mt))}destroy(){this.chartObj.destroy()}setLocale(pt){this.ngZone.runOutsideAngular(()=>this.chartObj.setLocale(pt))}paper(){this.ngZone.runOutsideAngular(()=>this.chartObj.paper())}addXaxisAnnotation(pt,Mt,Ft){this.ngZone.runOutsideAngular(()=>this.chartObj.addXaxisAnnotation(pt,Mt,Ft))}addYaxisAnnotation(pt,Mt,Ft){this.ngZone.runOutsideAngular(()=>this.chartObj.addYaxisAnnotation(pt,Mt,Ft))}addPointAnnotation(pt,Mt,Ft){this.ngZone.runOutsideAngular(()=>this.chartObj.addPointAnnotation(pt,Mt,Ft))}removeAnnotation(pt,Mt){this.ngZone.runOutsideAngular(()=>this.chartObj.removeAnnotation(pt,Mt))}clearAnnotations(pt){this.ngZone.runOutsideAngular(()=>this.chartObj.clearAnnotations(pt))}dataURI(pt){return this.chartObj.dataURI(pt)}}return Dt.\u0275fac=function(pt){return new(pt||Dt)(v.Y36(v.R0b))},Dt.\u0275cmp=v.Xpm({type:Dt,selectors:[["apx-chart"]],viewQuery:function(pt,Mt){if(1&pt&&v.Gf(Rt,7),2&pt){let Ft;v.iGM(Ft=v.CRH())&&(Mt.chartElement=Ft.first)}},inputs:{chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",markers:"markers",noData:"noData",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",forecastDataPoints:"forecastDataPoints",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme",autoUpdateSeries:"autoUpdateSeries"},features:[v.TTD],decls:2,vars:0,consts:[["chart",""]],template:function(pt,Mt){1&pt&&v._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),Dt})();window.ApexCharts=it;let ue=(()=>{class Dt{}return Dt.\u0275fac=function(pt){return new(pt||Dt)},Dt.\u0275mod=v.oAB({type:Dt}),Dt.\u0275inj=v.cJS({}),Dt})();const Xe=["chart"];let Nn=(()=>{class Dt{constructor(){this.modalService=(0,v.f3M)(mi.FF)}ngOnInit(){this.initChart(),this.initDiagram()}ngAfterViewInit(){}initChart(){this.chartOptions={series:[{name:"People counting",data:[44,55,41,67,22]}],chart:{height:260,width:"100%",type:"bar"},plotOptions:{bar:{columnWidth:"50%"}},dataLabels:{enabled:!1},stroke:{width:2},grid:{row:{colors:["#fff","#f2f2f2"]}},xaxis:{labels:{rotate:-45},categories:["Entrance A","Entrance B","Block A","Block B","WC A"],tickPlacement:"on"},yaxis:{title:{text:"People counting"}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!0,opacityFrom:.85,opacityTo:.85}}},this.chartOption2s={series:[{name:"People (In)",data:[45,52,38,24,33,26,21,20,6,8,15,10]},{name:"Same Date Last Year",data:[35,41,62,42,13,18,29,37,36,51,32,35]},{name:"Same Day Last Year",data:[87,57,74,99,75,38,62,47,82,56,45,47]}],chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:[5,7,5],curve:"straight",dashArray:[0,8,5]},title:{text:"",align:"left"},legend:{tooltipHoverFormatter:function(pt,Mt){return pt+" - <strong>"+Mt.w.globals.series[Mt.seriesIndex][Mt.dataPointIndex]+"</strong>"}},markers:{size:0,hover:{sizeOffset:6}},xaxis:{categories:["06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30"]},tooltip:{y:[{title:{formatter:function(pt){return pt+" (mins)"}}},{title:{formatter:function(pt){return pt+" per session"}}},{title:{formatter:function(pt){return pt}}}]},grid:{borderColor:"#f1f1f1"}},this.chartInDay={series:[{name:"People (In)",data:[45,52,38,24,33,26,21,20,6,8,15,10]},{name:"Same Date Last Year",data:[35,41,62,42,13,18,29,37,36,51,32,35]},{name:"Same Day Last Year",data:[87,57,74,99,75,38,62,47,82,56,45,47]}],chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:[5,7,5],curve:"straight",dashArray:[0,8,5]},title:{text:"",align:"left"},legend:{tooltipHoverFormatter:function(pt,Mt){return pt+" - <strong>"+Mt.w.globals.series[Mt.seriesIndex][Mt.dataPointIndex]+"</strong>"}},markers:{size:0,hover:{sizeOffset:6}},xaxis:{categories:["2/2/24","2/2/25","2/2/26","2/2/27","2/2/28","2/2/29","2/2/30","2/2/31","2/2/32","2/2/33","2/2/34","2/2/35"]},tooltip:{y:[{title:{formatter:function(pt){return pt+" (mins)"}}},{title:{formatter:function(pt){return pt+" per session"}}},{title:{formatter:function(pt){return pt}}}]},grid:{borderColor:"#f1f1f1"}},this.chartBlockinDay={series:[{name:"L",data:[44,55,41,67,22,43,21,20,6,8,15,10]},{name:"R",data:[-13,-23,-20,-8,-13,-27,-33,-12,-13,-53,-32,-33]}],chart:{type:"bar",height:440,stacked:!0},colors:["#008FFB","#FF4560"],plotOptions:{bar:{borderRadius:5,borderRadiusApplication:"end",borderRadiusWhenStacked:"all",horizontal:!0,barHeight:"80%"}},dataLabels:{enabled:!1},stroke:{width:1,colors:["#fff"]},grid:{xaxis:{lines:{show:!1}}},yaxis:{stepSize:1},title:{text:""},xaxis:{categories:["Block 1H","Block 2H","Block 3H","Block 4H","Block 5H","Block 6H","Block 7H","Block 8H","Block 9H","Block 10H","Block 11H","Block 12H"],title:{text:"People in out"}}},this.chartBlockinDay2={series:[14,23,21,17,15,10,12,17,21],chart:{type:"polarArea"},stroke:{colors:["#fff"]},fill:{opacity:.8},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}initDiagram(){const pt=xt.GraphObject.make;this.myDiagram=new xt.Diagram("myDiagramDiv",{initialContentAlignment:xt.Spot.TopLeft,isReadOnly:!0,scaleComputation:(ot,Te)=>{var rt=Math.round(10*ot.scale),ee=rt+(10*Te>rt?1:-1);return ee<1&&(ee=1),ee/10},"toolManager.hoverDelay":100}),this.myDiagram.add(pt(xt.Part,{width:2232,height:2e3,layerName:"Background",position:new xt.Point(0,0),selectable:!1,pickable:!1},pt(xt.Picture,"/assets/images/Hue_PPC_ZONE_SOECO_20240226-1.png"))),this.myDiagram.nodeTemplate=pt(xt.Node,new xt.Binding("location","loc"),new xt.AnimationTrigger("position",{duration:2e3,easing:xt.Animation.EaseLinear}),{locationSpot:xt.Spot.Center},pt(xt.Shape,"Circle",{width:15,height:15,strokeWidth:3},new xt.Binding("fill","color",function ce(ot){return Ze(.1*ot,.5,.7)}),new xt.Binding("stroke","color",function Pe(ot){return Ze(.1*ot,.5,.5)})),{toolTip:pt("ToolTip",pt(xt.Panel,"Vertical",pt(xt.Picture,{margin:3},new xt.Binding("source","src",ot=>"images/"+ot+".png")),pt(xt.TextBlock,{margin:3},new xt.Binding("text","key"))))});let Ft=[];for(let ot=0;ot<30;ot++)Ft.push({key:"people"+ot,src:"100x100",loc:new xt.Point(600+150*Math.random(),600+150*Math.random()),color:3});for(let ot=0;ot<30;ot++)Ft.push({key:"people"+ot,src:"100x100",loc:new xt.Point(1600+150*Math.random(),600+150*Math.random()),color:2});function Ze(ot,Te,rt){var ee,fi,Ae,mn,He,ie,je,yn;switch(ie=rt*(1-Te),je=rt*(1-(He=6*ot-(mn=Math.floor(6*ot)))*Te),yn=rt*(1-(1-He)*Te),mn%6){case 0:ee=rt,fi=yn,Ae=ie;break;case 1:ee=je,fi=rt,Ae=ie;break;case 2:ee=ie,fi=rt,Ae=yn;break;case 3:ee=ie,fi=je,Ae=rt;break;case 4:ee=yn,fi=ie,Ae=rt;break;case 5:ee=rt,fi=ie,Ae=je}return"rgb("+Math.floor(255*ee)+","+Math.floor(255*fi)+","+Math.floor(255*Ae)+")"}this.myDiagram.model.nodeDataArray=Ft,this.myDiagram.addDiagramListener("ObjectDoubleClicked",ot=>{this.modalService.open(Yt,{size:"lg"})}),this.myDiagram.commandHandler.zoomToFit(),this.myDiagram.scale=0}initDiagram2(){const pt=xt.GraphObject.make;this.myDiagram2=new xt.Diagram("myDiagramDiv2",{initialContentAlignment:xt.Spot.TopLeft,isReadOnly:!0,scaleComputation:(ot,Te)=>{var rt=Math.round(10*ot.scale),ee=rt+(10*Te>rt?1:-1);return ee<1&&(ee=1),ee/10},"toolManager.hoverDelay":100}),this.myDiagram2.add(pt(xt.Part,{width:2232,height:2e3,layerName:"Background",position:new xt.Point(0,0),selectable:!1,pickable:!1},pt(xt.Picture,"/assets/images/Hue_PPC_ZONE_SOECO_20240226-2.png"))),this.myDiagram2.nodeTemplate=pt(xt.Node,new xt.Binding("location","loc"),new xt.AnimationTrigger("position",{duration:2e3,easing:xt.Animation.EaseLinear}),{locationSpot:xt.Spot.Center},pt(xt.Shape,"Circle",{width:15,height:15,strokeWidth:3},new xt.Binding("fill","color",function ce(ot){return Ze(.1*ot,.5,.7)}),new xt.Binding("stroke","color",function Pe(ot){return Ze(.1*ot,.5,.5)})),{toolTip:pt("ToolTip",pt(xt.Panel,"Vertical",pt(xt.Picture,{margin:3},new xt.Binding("source","src",ot=>"images/"+ot+".png")),pt(xt.TextBlock,{margin:3},new xt.Binding("text","key"))))});let Ft=[];for(let ot=0;ot<30;ot++)Ft.push({key:"people"+ot,src:"100x100",loc:new xt.Point(600+150*Math.random(),600+150*Math.random()),color:3});for(let ot=0;ot<30;ot++)Ft.push({key:"people"+ot,src:"100x100",loc:new xt.Point(1600+150*Math.random(),600+150*Math.random()),color:2});function Ze(ot,Te,rt){var ee,fi,Ae,mn,He,ie,je,yn;switch(ie=rt*(1-Te),je=rt*(1-(He=6*ot-(mn=Math.floor(6*ot)))*Te),yn=rt*(1-(1-He)*Te),mn%6){case 0:ee=rt,fi=yn,Ae=ie;break;case 1:ee=je,fi=rt,Ae=ie;break;case 2:ee=ie,fi=rt,Ae=yn;break;case 3:ee=ie,fi=je,Ae=rt;break;case 4:ee=yn,fi=ie,Ae=rt;break;case 5:ee=rt,fi=ie,Ae=je}return"rgb("+Math.floor(255*ee)+","+Math.floor(255*fi)+","+Math.floor(255*Ae)+")"}this.myDiagram2.model.nodeDataArray=Ft,this.myDiagram2.addDiagramListener("ObjectDoubleClicked",ot=>{this.modalService.open(Yt,{size:"lg"})}),this.myDiagram2.commandHandler.zoomToFit(),this.myDiagram2.scale=0}static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275cmp=v.Xpm({type:Dt,selectors:[["app-dashboard"]],viewQuery:function(Mt,Ft){if(1&Mt&&v.Gf(Xe,5),2&Mt){let ce;v.iGM(ce=v.CRH())&&(Ft.chart=ce.first)}},decls:94,vars:33,consts:[["id","kt_toolbar",1,"toolbar"],["id","kt_toolbar_container",1,"container-fluid","d-flex","flex-stack"],["data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}",1,"page-title","d-flex","align-items-center","flex-wrap","me-3","mb-5","mb-lg-0"],[1,"d-flex","text-dark","fw-bolder","fs-3","align-items-center","my-1"],[1,"row","g-5","g-xl-10"],[1,"col-xl-4"],[1,"card","card-xl-stretch","pb-5"],[1,"card-header","border-0","bg-danger","py-5"],[1,"card-title","fw-bolder","text-white"],[1,"card-body","p-5"],[1,"card-p"],[1,"row","g-0"],[1,"col","bg-light-warning","px-6","py-8","rounded-2","me-7","mb-7"],["href","#",1,"text-warning","fw-bold","fs-6"],[1,"col","bg-light-primary","px-6","py-8","rounded-2","mb-7"],["href","#",1,"text-primary","fw-bold","fs-6"],[1,"col","bg-light-danger","px-6","py-8","rounded-2","me-7"],["href","#",1,"text-danger","fw-bold","fs-6","mt-2"],[1,"col","bg-light-success","px-6","py-8","rounded-2"],["href","#",1,"text-success","fw-bold","fs-6","mt-2"],[1,"col-xl-8"],[1,"card","card-flush"],[1,"card-header"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","text-gray-800"],[1,"card-body"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","stroke","grid","fill","annotations"],[1,"row","g-5","g-xl-10","mb-10"],[1,"col-12"],[3,"series","chart","xaxis","dataLabels","grid","stroke","title"],[1,"col-6"],[3,"series","chart","xaxis","grid","stroke","plotOptions"],[3,"series","chart","stroke"],["id","myDiagramDiv",1,"card-body",2,"height","500px"],["id","myDiagramDiv2",1,"card-body",2,"height","500px"]],template:function(Mt,Ft){1&Mt&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v._uU(4,"Dashboard"),v.qZA()()()(),v.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),v._uU(10,"Sumary"),v.qZA()(),v.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h1"),v._uU(16,"50"),v.qZA(),v.TgZ(17,"a",13),v._uU(18,"Total camera"),v.qZA()(),v.TgZ(19,"div",14)(20,"h1"),v._uU(21,"500"),v.qZA(),v.TgZ(22,"a",15),v._uU(23,"Total counting"),v.qZA()()(),v.TgZ(24,"div",11)(25,"div",16)(26,"h1"),v._uU(27,"100"),v.qZA(),v.TgZ(28,"a",17),v._uU(29,"People in"),v.qZA()(),v.TgZ(30,"div",18)(31,"h1"),v._uU(32,"200"),v.qZA(),v.TgZ(33,"a",19),v._uU(34,"People out"),v.qZA()()()()()()(),v.TgZ(35,"div",20)(36,"div",21)(37,"div",22)(38,"h3",23)(39,"span",24),v._uU(40,"People (In) by Hour"),v.qZA()()(),v.TgZ(41,"div",25),v._UZ(42,"apx-chart",26),v.qZA()()()(),v.TgZ(43,"div",27)(44,"div",28)(45,"div",21)(46,"div",22)(47,"h3",23)(48,"span",24),v._uU(49,"People in hour"),v.qZA()()(),v.TgZ(50,"div",25),v._UZ(51,"apx-chart",29),v.qZA()()()(),v.TgZ(52,"div",27)(53,"div",28)(54,"div",21)(55,"div",22)(56,"h3",23)(57,"span",24),v._uU(58,"People in day"),v.qZA()()(),v.TgZ(59,"div",25),v._UZ(60,"apx-chart",29),v.qZA()()()(),v.TgZ(61,"div",27)(62,"div",30)(63,"div",21)(64,"div",22)(65,"h3",23)(66,"span",24),v._uU(67,"Block in 1 day"),v.qZA()()(),v.TgZ(68,"div",25),v._UZ(69,"apx-chart",31),v.qZA()()(),v.TgZ(70,"div",30)(71,"div",21)(72,"div",22)(73,"h3",23)(74,"span",24),v._uU(75,"Ratio of customers in block"),v.qZA()()(),v.TgZ(76,"div",25),v._UZ(77,"apx-chart",32),v.qZA()()()(),v.TgZ(78,"div",4)(79,"div",28)(80,"div",21)(81,"div",22)(82,"h3",23)(83,"span",24),v._uU(84,"Hue ZONE SOECO B2-12"),v.qZA()()(),v._UZ(85,"div",33),v.qZA()()(),v.TgZ(86,"div",4)(87,"div",28)(88,"div",21)(89,"div",22)(90,"h3",23)(91,"span",24),v._uU(92,"Hue ZONE SOECO B2-22"),v.qZA()()(),v._UZ(93,"div",34),v.qZA()()()),2&Mt&&(v.xp6(42),v.Q6J("series",Ft.chartOptions.series)("chart",Ft.chartOptions.chart)("dataLabels",Ft.chartOptions.dataLabels)("plotOptions",Ft.chartOptions.plotOptions)("yaxis",Ft.chartOptions.yaxis)("xaxis",Ft.chartOptions.xaxis)("stroke",Ft.chartOptions.stroke)("grid",Ft.chartOptions.grid)("fill",Ft.chartOptions.fill)("annotations",Ft.chartOptions.annotations),v.xp6(9),v.Q6J("series",Ft.chartOption2s.series)("chart",Ft.chartOption2s.chart)("xaxis",Ft.chartOption2s.xaxis)("dataLabels",Ft.chartOption2s.dataLabels)("grid",Ft.chartOption2s.grid)("stroke",Ft.chartOption2s.stroke)("title",Ft.chartOption2s.title),v.xp6(9),v.Q6J("series",Ft.chartInDay.series)("chart",Ft.chartInDay.chart)("xaxis",Ft.chartInDay.xaxis)("dataLabels",Ft.chartInDay.dataLabels)("grid",Ft.chartInDay.grid)("stroke",Ft.chartInDay.stroke)("title",Ft.chartInDay.title),v.xp6(9),v.Q6J("series",Ft.chartBlockinDay.series)("chart",Ft.chartBlockinDay.chart)("xaxis",Ft.chartBlockinDay.xaxis)("grid",Ft.chartBlockinDay.grid)("stroke",Ft.chartBlockinDay.stroke)("plotOptions",Ft.chartBlockinDay.plotOptions),v.xp6(8),v.Q6J("series",Ft.chartBlockinDay2.series)("chart",Ft.chartBlockinDay2.chart)("stroke",Ft.chartBlockinDay2.stroke))},dependencies:[le]})}return Dt})();var Gi=Xn(2133);let ai=(()=>{class Dt{static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275cmp=v.Xpm({type:Dt,selectors:[["app-camera"]],decls:273,vars:0,consts:[["id","kt_toolbar",1,"toolbar"],["id","kt_toolbar_container",1,"container-fluid","d-flex","flex-stack"],["data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}",1,"page-title","d-flex","align-items-center","flex-wrap","me-3","mb-5","mb-lg-0"],[1,"d-flex","text-dark","fw-bolder","fs-3","align-items-center","my-1"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],["href","../../demo1/dist/.html","data-bs-toggle","modal","data-bs-target","#kt_modal_create_app",1,"btn","btn-sm","btn-light"],[1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-ecommerce-product-filter","search","placeholder","T\xecm m\xe3 camera",1,"form-control","form-control-solid","w-250px","ps-14"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],[1,"w-150","mw-150px"],[1,"form-select","form-select-solid"],["value","all"],["value","published"],["value","scheduled"],["value","inactive"],[1,"btn","btn-primary"],[1,"card-body","pt-0"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-200px"],[1,"text-start","min-w-100px"],[1,"text-start","min-w-70px"],[1,"text-center","min-w-100px"],[1,"text-end","min-w-70px"],[1,"fw-bold","text-gray-600"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px"],[1,"symbol-label",2,"background-image","url(assets/media/stock/ecommerce/22.gif)"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder"],[1,"text-start","pe-0"],[1,"fw-bolder"],["data-order","25",1,"text-start","pe-0"],[1,"fw-bolder","ms-3"],[1,"fw-bolder","text-dark"],[1,"text-center","pe-0"],[1,"fw-bolder","text-success"],["data-order","Published",1,"text-end","pe-0"],[1,"badge","badge-light-success"],[1,"text-end"],["href","#","data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end",1,"btn","btn-sm","btn-light","btn-active-light-primary"],[1,"svg-icon","svg-icon-5","m-0"],["d","M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z","fill","currentColor"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","menu-column","menu-rounded","menu-gray-600","menu-state-bg-light-primary","fw-bold","fs-7","w-125px","py-4"],[1,"menu-item","px-3"],["href","../../demo1/dist/apps/ecommerce/catalog/edit-product.html",1,"menu-link","px-3"],["href","#","data-kt-ecommerce-product-filter","delete_row",1,"menu-link","px-3"]],template:function(Mt,Ft){1&Mt&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v._uU(4,"Danh s\xe1ch camera"),v.qZA()(),v.TgZ(5,"div",4)(6,"a",5),v._uU(7,"Th\xeam camera"),v.qZA()()()(),v.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),v.O4$(),v.TgZ(15,"svg",13),v._UZ(16,"rect",14)(17,"path",15),v.qZA()(),v.kcU(),v._UZ(18,"input",16),v.qZA()(),v.TgZ(19,"div",17)(20,"div",18)(21,"select",19)(22,"option",20),v._uU(23,"T\u1ea5t c\u1ea3 khu v\u1ef1c"),v.qZA(),v.TgZ(24,"option",21),v._uU(25,"TRUNG T\xc2M A"),v.qZA(),v.TgZ(26,"option",22),v._uU(27,"TRUNG T\xc2M B"),v.qZA(),v.TgZ(28,"option",23),v._uU(29,"H\xc0NH LANG"),v.qZA()()(),v.TgZ(30,"div",18)(31,"select",19)(32,"option",20),v._uU(33,"T\u1ea5t c\u1ea3 lo\u1ea1i camera"),v.qZA(),v.TgZ(34,"option",21),v._uU(35,"HKVision"),v.qZA()()(),v.TgZ(36,"a",24),v._uU(37,"T\xccM KI\u1ebeM"),v.qZA()()(),v.TgZ(38,"div",25)(39,"table",26)(40,"thead")(41,"tr",27)(42,"th",28),v._uU(43,"M\xe3 camera"),v.qZA(),v.TgZ(44,"th",29),v._uU(45,"T\xean"),v.qZA(),v.TgZ(46,"th",30),v._uU(47,"Lo\u1ea1i camera"),v.qZA(),v.TgZ(48,"th",29),v._uU(49,"Khu v\u1ef1c l\u1eafp"),v.qZA(),v.TgZ(50,"th",31),v._uU(51,"S\u1ed1 l\u01b0\u1ee3t \u0111\u1ebfm"),v.qZA(),v.TgZ(52,"th",31),v._uU(53,"T\xecnh tr\u1ea1ng"),v.qZA(),v.TgZ(54,"th",32),v._uU(55,"Actions"),v.qZA()()(),v.TgZ(56,"tbody",33)(57,"tr")(58,"td")(59,"div",34)(60,"a",35),v._UZ(61,"span",36),v.qZA(),v.TgZ(62,"div",37)(63,"a",38),v._uU(64,"HKVISON02887003"),v.qZA()()()(),v.TgZ(65,"td",39)(66,"span",40),v._uU(67,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(68,"td",41)(69,"span",42),v._uU(70,"HKVISON"),v.qZA()(),v.TgZ(71,"td",39)(72,"span",43),v._uU(73,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(74,"td",44)(75,"span",45),v._uU(76,"100"),v.qZA()(),v.TgZ(77,"td",46)(78,"div",47),v._uU(79,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(80,"td",48)(81,"a",49),v._uU(82,"Actions "),v.TgZ(83,"span",50),v.O4$(),v.TgZ(84,"svg",13),v._UZ(85,"path",51),v.qZA()()(),v.kcU(),v.TgZ(86,"div",52)(87,"div",53)(88,"a",54),v._uU(89,"Xem"),v.qZA()(),v.TgZ(90,"div",53)(91,"a",55),v._uU(92,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()(),v.TgZ(93,"tr")(94,"td")(95,"div",34)(96,"a",35),v._UZ(97,"span",36),v.qZA(),v.TgZ(98,"div",37)(99,"a",38),v._uU(100,"HKVISON02887003"),v.qZA()()()(),v.TgZ(101,"td",39)(102,"span",40),v._uU(103,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(104,"td",41)(105,"span",42),v._uU(106,"HKVISON"),v.qZA()(),v.TgZ(107,"td",39)(108,"span",43),v._uU(109,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(110,"td",44)(111,"span",45),v._uU(112,"100"),v.qZA()(),v.TgZ(113,"td",46)(114,"div",47),v._uU(115,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(116,"td",48)(117,"a",49),v._uU(118,"Actions "),v.TgZ(119,"span",50),v.O4$(),v.TgZ(120,"svg",13),v._UZ(121,"path",51),v.qZA()()(),v.kcU(),v.TgZ(122,"div",52)(123,"div",53)(124,"a",54),v._uU(125,"Xem"),v.qZA()(),v.TgZ(126,"div",53)(127,"a",55),v._uU(128,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()(),v.TgZ(129,"tr")(130,"td")(131,"div",34)(132,"a",35),v._UZ(133,"span",36),v.qZA(),v.TgZ(134,"div",37)(135,"a",38),v._uU(136,"HKVISON02887003"),v.qZA()()()(),v.TgZ(137,"td",39)(138,"span",40),v._uU(139,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(140,"td",41)(141,"span",42),v._uU(142,"HKVISON"),v.qZA()(),v.TgZ(143,"td",39)(144,"span",43),v._uU(145,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(146,"td",44)(147,"span",45),v._uU(148,"100"),v.qZA()(),v.TgZ(149,"td",46)(150,"div",47),v._uU(151,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(152,"td",48)(153,"a",49),v._uU(154,"Actions "),v.TgZ(155,"span",50),v.O4$(),v.TgZ(156,"svg",13),v._UZ(157,"path",51),v.qZA()()(),v.kcU(),v.TgZ(158,"div",52)(159,"div",53)(160,"a",54),v._uU(161,"Xem"),v.qZA()(),v.TgZ(162,"div",53)(163,"a",55),v._uU(164,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()(),v.TgZ(165,"tr")(166,"td")(167,"div",34)(168,"a",35),v._UZ(169,"span",36),v.qZA(),v.TgZ(170,"div",37)(171,"a",38),v._uU(172,"HKVISON02887003"),v.qZA()()()(),v.TgZ(173,"td",39)(174,"span",40),v._uU(175,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(176,"td",41)(177,"span",42),v._uU(178,"HKVISON"),v.qZA()(),v.TgZ(179,"td",39)(180,"span",43),v._uU(181,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(182,"td",44)(183,"span",45),v._uU(184,"100"),v.qZA()(),v.TgZ(185,"td",46)(186,"div",47),v._uU(187,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(188,"td",48)(189,"a",49),v._uU(190,"Actions "),v.TgZ(191,"span",50),v.O4$(),v.TgZ(192,"svg",13),v._UZ(193,"path",51),v.qZA()()(),v.kcU(),v.TgZ(194,"div",52)(195,"div",53)(196,"a",54),v._uU(197,"Xem"),v.qZA()(),v.TgZ(198,"div",53)(199,"a",55),v._uU(200,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()(),v.TgZ(201,"tr")(202,"td")(203,"div",34)(204,"a",35),v._UZ(205,"span",36),v.qZA(),v.TgZ(206,"div",37)(207,"a",38),v._uU(208,"HKVISON02887003"),v.qZA()()()(),v.TgZ(209,"td",39)(210,"span",40),v._uU(211,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(212,"td",41)(213,"span",42),v._uU(214,"HKVISON"),v.qZA()(),v.TgZ(215,"td",39)(216,"span",43),v._uU(217,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(218,"td",44)(219,"span",45),v._uU(220,"100"),v.qZA()(),v.TgZ(221,"td",46)(222,"div",47),v._uU(223,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(224,"td",48)(225,"a",49),v._uU(226,"Actions "),v.TgZ(227,"span",50),v.O4$(),v.TgZ(228,"svg",13),v._UZ(229,"path",51),v.qZA()()(),v.kcU(),v.TgZ(230,"div",52)(231,"div",53)(232,"a",54),v._uU(233,"Xem"),v.qZA()(),v.TgZ(234,"div",53)(235,"a",55),v._uU(236,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()(),v.TgZ(237,"tr")(238,"td")(239,"div",34)(240,"a",35),v._UZ(241,"span",36),v.qZA(),v.TgZ(242,"div",37)(243,"a",38),v._uU(244,"HKVISON02887003"),v.qZA()()()(),v.TgZ(245,"td",39)(246,"span",40),v._uU(247,"CAMERA HKVISON 1"),v.qZA()(),v.TgZ(248,"td",41)(249,"span",42),v._uU(250,"HKVISON"),v.qZA()(),v.TgZ(251,"td",39)(252,"span",43),v._uU(253,"TRUNG T\xc2M"),v.qZA()(),v.TgZ(254,"td",44)(255,"span",45),v._uU(256,"100"),v.qZA()(),v.TgZ(257,"td",46)(258,"div",47),v._uU(259,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),v.qZA()(),v.TgZ(260,"td",48)(261,"a",49),v._uU(262,"Actions "),v.TgZ(263,"span",50),v.O4$(),v.TgZ(264,"svg",13),v._UZ(265,"path",51),v.qZA()()(),v.kcU(),v.TgZ(266,"div",52)(267,"div",53)(268,"a",54),v._uU(269,"Xem"),v.qZA()(),v.TgZ(270,"div",53)(271,"a",55),v._uU(272,"Ch\u1ec9nh s\u1eeda"),v.qZA()()()()()()()()()()())},dependencies:[Gi.YN,Gi.Kr]})}return Dt})(),te=(()=>{class Dt{static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275cmp=v.Xpm({type:Dt,selectors:[["app-trouble-case"]],decls:66,vars:0,consts:[["id","kt_toolbar",1,"toolbar"],["id","kt_toolbar_container",1,"container-fluid","d-flex","flex-stack"],["data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}",1,"page-title","d-flex","align-items-center","flex-wrap","me-3","mb-5","mb-lg-0"],[1,"d-flex","text-dark","fw-bolder","fs-3","align-items-center","my-1"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],["href","../../demo1/dist/.html","data-bs-toggle","modal","data-bs-target","#kt_modal_create_app",1,"btn","btn-sm","btn-light"],[1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-ecommerce-product-filter","search","placeholder","T\xecm m\xe3 s\u1ef1 c\u1ed1",1,"form-control","form-control-solid","w-250px","ps-14"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],[1,"w-150","mw-150px"],[1,"form-select","form-select-solid"],["value","all"],["value","published"],["value","d"],["value","\u01b0"],[1,"btn","btn-primary"],[1,"card-body","pt-0"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-200px"],[1,"text-start","min-w-100px"],[1,"text-center","min-w-100px"],[1,"fw-bold","text-gray-600"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder"],[1,"text-start","pe-0"],[1,"fw-bolder"],[1,"fw-bolder","text-dark"],[1,"fw-bolder","text-danger"],[1,"fw-bolder","text-success"],["data-order","Published",1,"text-end","pe-0"],[1,"badge","badge-light-success"]],template:function(Mt,Ft){1&Mt&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v._uU(4,"Danh s\xe1ch s\u1ef1 c\u1ed1"),v.qZA()(),v.TgZ(5,"div",4)(6,"a",5),v._uU(7,"Th\xeam s\u1ef1 c\u1ed1"),v.qZA()()()(),v.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),v.O4$(),v.TgZ(15,"svg",13),v._UZ(16,"rect",14)(17,"path",15),v.qZA()(),v.kcU(),v._UZ(18,"input",16),v.qZA()(),v.TgZ(19,"div",17)(20,"div",18)(21,"select",19)(22,"option",20),v._uU(23,"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"),v.qZA(),v.TgZ(24,"option",21),v._uU(25,"\u0110\xe3 x\u1eed l\xfd"),v.qZA(),v.TgZ(26,"option",22),v._uU(27,"Ch\u01b0a x\u1eed l\xfd"),v.qZA(),v.TgZ(28,"option",23),v._uU(29,"\u0110ang x\u1eed l\xfd"),v.qZA()()(),v.TgZ(30,"a",24),v._uU(31,"T\xccM KI\u1ebeM"),v.qZA()()(),v.TgZ(32,"div",25)(33,"table",26)(34,"thead")(35,"tr",27)(36,"th",28),v._uU(37,"Th\u1eddi gian"),v.qZA(),v.TgZ(38,"th",29),v._uU(39,"M\xe3 s\u1ef1 c\u1ed1"),v.qZA(),v.TgZ(40,"th",29),v._uU(41,"Lo\u1ea1i s\u1ef1 c\u1ed1"),v.qZA(),v.TgZ(42,"th",29),v._uU(43,"M\xf4 t\u1ea3"),v.qZA(),v.TgZ(44,"th",30),v._uU(45,"T\xecnh tr\u1ea1ng"),v.qZA()()(),v.TgZ(46,"tbody",31)(47,"tr")(48,"td")(49,"a",32),v._uU(50,"12/02/2024 12:34"),v.qZA()(),v.TgZ(51,"td",33)(52,"span",34),v._uU(53,"31231231"),v.qZA()(),v.TgZ(54,"td",33)(55,"span",35),v._uU(56,"B\xe1o h\u1ecfng"),v.qZA()(),v.TgZ(57,"td",33)(58,"span",36),v._uU(59,"X\u1eed l\xfd camera t\u1eaft"),v.qZA(),v._UZ(60,"br"),v.TgZ(61,"span",37),v._uU(62,"Camera b\u1ecb che khu\u1ea5t, ho\u1eb7c t\u1eaft. B\u1ed9 ph\u1eadn k\u1ef7 thu\u1eadt ki\u1ec3m tra v\xe0 kh\u1eafc ph\u1ee5c"),v.qZA()(),v.TgZ(63,"td",38)(64,"div",39),v._uU(65,"\u0110ang x\u1eed l\xfd"),v.qZA()()()()()()()()())},dependencies:[Gi.YN,Gi.Kr]})}return Dt})();function $t(Dt,Ht){if(1&Dt){const pt=v.EpF();v.TgZ(0,"div",20)(1,"label",10),v._uU(2,"Choose Date"),v.qZA(),v.TgZ(3,"div",21)(4,"input",22,23),v.NdJ("ngModelChange",function(Ft){v.CHM(pt);const ce=v.oxw();return v.KtG(ce.modelTime=Ft)}),v.qZA(),v.TgZ(6,"button",24),v.NdJ("click",function(){v.CHM(pt);const Ft=v.MAs(5);return v.KtG(Ft.toggle())}),v._UZ(7,"i",25),v.qZA()()()}if(2&Dt){const pt=v.oxw();v.xp6(4),v.Q6J("ngModel",pt.modelTime)}}function io(Dt,Ht){1&Dt&&(v.TgZ(0,"div",20)(1,"label",10),v._uU(2,"Choose Month"),v.qZA(),v.TgZ(3,"select",26)(4,"option",27),v._uU(5,"January"),v.qZA(),v.TgZ(6,"option",28),v._uU(7,"February"),v.qZA(),v.TgZ(8,"option",29),v._uU(9,"March"),v.qZA(),v.TgZ(10,"option",30),v._uU(11,"April"),v.qZA(),v.TgZ(12,"option",31),v._uU(13,"May"),v.qZA(),v.TgZ(14,"option",32),v._uU(15,"June"),v.qZA(),v.TgZ(16,"option",33),v._uU(17,"July"),v.qZA(),v.TgZ(18,"option",34),v._uU(19,"August"),v.qZA(),v.TgZ(20,"option",35),v._uU(21,"September"),v.qZA(),v.TgZ(22,"option",36),v._uU(23,"October"),v.qZA(),v.TgZ(24,"option",37),v._uU(25,"November"),v.qZA(),v.TgZ(26,"option",38),v._uU(27,"December"),v.qZA()()())}function bi(Dt,Ht){1&Dt&&(v.TgZ(0,"div",20)(1,"label",10),v._uU(2,"Year"),v.qZA(),v.TgZ(3,"select",26)(4,"option",39),v._uU(5,"2021"),v.qZA(),v.TgZ(6,"option",40),v._uU(7,"2022"),v.qZA(),v.TgZ(8,"option",41),v._uU(9,"2023"),v.qZA(),v.TgZ(10,"option",42),v._uU(11,"2024"),v.qZA(),v.TgZ(12,"option",43),v._uU(13,"2025"),v.qZA()()())}function mr(Dt,Ht){if(1&Dt&&(v.TgZ(0,"tr")(1,"td",50)(2,"span",51),v._uU(3),v.qZA()(),v.TgZ(4,"td",47)(5,"span",51),v._uU(6),v.qZA()(),v.TgZ(7,"td",47)(8,"span",51),v._uU(9),v.qZA()(),v.TgZ(10,"td",47)(11,"span",51),v._uU(12),v.qZA()(),v.TgZ(13,"td",47)(14,"span",51),v._uU(15),v.qZA()()()),2&Dt){const pt=Ht.$implicit;v.xp6(3),v.Oqu(pt.hourRange),v.xp6(3),v.Oqu(pt.in),v.xp6(3),v.Oqu(pt.out),v.xp6(3),v.Oqu(pt.weather),v.xp6(3),v.Oqu(pt.staying)}}function ln(Dt,Ht){if(1&Dt&&(v.TgZ(0,"div",44)(1,"table",45)(2,"thead")(3,"tr",46)(4,"th"),v._uU(5,"Hour"),v.qZA(),v.TgZ(6,"th",47),v._uU(7,"People in"),v.qZA(),v.TgZ(8,"th",47),v._uU(9,"People out"),v.qZA(),v.TgZ(10,"th",47),v._uU(11,"Weather"),v.qZA(),v.TgZ(12,"th",47),v._uU(13,"Staying people"),v.qZA()()(),v.TgZ(14,"tbody",48),v.YNc(15,mr,16,5,"tr",49),v.qZA()()()),2&Dt){const pt=v.oxw();v.xp6(15),v.Q6J("ngForOf",pt.reportTimeData)}}function Qt(Dt,Ht){if(1&Dt&&(v.TgZ(0,"tr")(1,"td",50)(2,"span",51),v._uU(3),v.qZA()(),v.TgZ(4,"td",47)(5,"span",51),v._uU(6),v.qZA()(),v.TgZ(7,"td",47)(8,"span",51),v._uU(9),v.qZA()(),v.TgZ(10,"td",47)(11,"span",51),v._uU(12),v.qZA()(),v.TgZ(13,"td",47)(14,"span",51),v._uU(15),v.qZA()()()),2&Dt){const pt=Ht.$implicit;v.xp6(3),v.Oqu(pt.date),v.xp6(3),v.Oqu(pt.in),v.xp6(3),v.Oqu(pt.out),v.xp6(3),v.Oqu(pt.weather),v.xp6(3),v.Oqu(pt.staying)}}function Vn(Dt,Ht){if(1&Dt&&(v.TgZ(0,"div",44)(1,"table",45)(2,"thead")(3,"tr",46)(4,"th"),v._uU(5,"Date"),v.qZA(),v.TgZ(6,"th",47),v._uU(7,"People in"),v.qZA(),v.TgZ(8,"th",47),v._uU(9,"People out"),v.qZA(),v.TgZ(10,"th",47),v._uU(11,"Weather"),v.qZA(),v.TgZ(12,"th",47),v._uU(13,"Staying people"),v.qZA()()(),v.TgZ(14,"tbody",48),v.YNc(15,Qt,16,5,"tr",49),v.qZA()()()),2&Dt){const pt=v.oxw();v.xp6(15),v.Q6J("ngForOf",pt.reportDateData)}}const bs=[{path:"",component:Nn},{path:"cameras",component:ai},{path:"reports",component:(()=>{class Dt{constructor(){this.chooseView="hour",this.reportTimeData=[{hourRange:"00:00 - 00:30",in:5,out:3,weather:"Sunny",staying:2},{hourRange:"00:30 - 01:00",in:3,out:2,weather:"Sunny",staying:1},{hourRange:"01:00 - 01:30",in:2,out:1,weather:"Sunny",staying:1},{hourRange:"01:30 - 02:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"02:00 - 02:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"02:30 - 03:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"03:00 - 03:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"03:30 - 04:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"04:00 - 04:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"04:30 - 05:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"05:00 - 05:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"05:30 - 06:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"06:00 - 06:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"06:30 - 07:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"07:00 - 07:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"07:30 - 08:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"08:00 - 08:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"08:30 - 09:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"09:00 - 09:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"09:30 - 10:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"10:00 - 10:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"10:30 - 11:00",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"11:00 - 11:30",in:1,out:1,weather:"Sunny",staying:0},{hourRange:"11:30 - 12:00",in:1,out:1,weather:"Sunny",staying:0}],this.reportDateData=[{date:"2021-06-01",in:5,out:3,weather:"Sunny",staying:2},{date:"2021-06-02",in:3,out:2,weather:"Sunny",staying:1},{date:"2021-06-03",in:2,out:1,weather:"Sunny",staying:1},{date:"2021-06-04",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-05",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-06",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-07",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-08",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-09",in:1,out:1,weather:"Sunny",staying:0},{date:"2021-06-10",in:1,out:1,weather:"Sunny",staying:0}]}static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275cmp=v.Xpm({type:Dt,selectors:[["app-reporttime"]],decls:30,vars:6,consts:[["id","kt_toolbar",1,"toolbar"],["id","kt_toolbar_container",1,"container-fluid","d-flex","flex-stack"],["data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}",1,"page-title","d-flex","align-items-center","flex-wrap","me-3","mb-5","mb-lg-0"],[1,"d-flex","text-dark","fw-bolder","fs-3","align-items-center","my-1"],[1,"post","d-flex","flex-column-fluid"],[1,"container-xxl"],[1,"card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-3","mb-3"],["for","",1,"fw-bold"],[1,"form-select",3,"ngModel","ngModelChange"],["value","hour"],["value","day"],["value","month"],["value","year"],["class","col-md-3",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],[1,"card","card-flush"],["class","card-body pt-0 table-responsive",4,"ngIf"],[1,"col-md-3"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["d","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","text-danger",3,"click"],[1,"fa-solid","fa-calendar-days"],[1,"form-select"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["value","2021"],["value","2022"],["value","2023"],["value","2024"],["value","2025"],[1,"card-body","pt-0","table-responsive"],[1,"table"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"text-center"],[1,"fw-bold"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"fw-bolder"]],template:function(Mt,Ft){1&Mt&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v._uU(4,"Report people counting by time"),v.qZA()()()(),v.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),v._uU(12,"Choose view by"),v.qZA(),v.TgZ(13,"select",11),v.NdJ("ngModelChange",function(Pe){return Ft.chooseView=Pe}),v.TgZ(14,"option",12),v._uU(15,"Hour"),v.qZA(),v.TgZ(16,"option",13),v._uU(17,"Day"),v.qZA(),v.TgZ(18,"option",14),v._uU(19,"Month"),v.qZA(),v.TgZ(20,"option",15),v._uU(21,"Year"),v.qZA()()(),v.YNc(22,$t,8,1,"div",16),v.YNc(23,io,28,0,"div",16),v.YNc(24,bi,14,0,"div",16),v.qZA(),v.TgZ(25,"button",17),v._uU(26,"View data"),v.qZA()()(),v.TgZ(27,"div",18),v.YNc(28,ln,16,1,"div",19),v.YNc(29,Vn,16,1,"div",19),v.qZA()()()),2&Mt&&(v.xp6(13),v.Q6J("ngModel",Ft.chooseView),v.xp6(9),v.Q6J("ngIf","day"===Ft.chooseView||"hour"===Ft.chooseView),v.xp6(1),v.Q6J("ngIf","month"===Ft.chooseView),v.xp6(1),v.Q6J("ngIf","month"===Ft.chooseView||"year"===Ft.chooseView),v.xp6(4),v.Q6J("ngIf","hour"===Ft.chooseView),v.xp6(1),v.Q6J("ngIf","hour"!==Ft.chooseView))},dependencies:[Po.sg,Po.O5,mi.J4,Gi.YN,Gi.Kr,Gi.Fj,Gi.EJ,Gi.JJ,Gi.On],styles:[".dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]})}return Dt})()},{path:"cases",component:te}];let ut=(()=>{class Dt{static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275mod=v.oAB({type:Dt});static#i=this.\u0275inj=v.cJS({imports:[Kr.Bz.forChild(bs),Kr.Bz]})}return Dt})(),Ti=(()=>{class Dt{static#t=this.\u0275fac=function(Mt){return new(Mt||Dt)};static#e=this.\u0275mod=v.oAB({type:Dt});static#i=this.\u0275inj=v.cJS({imports:[Po.ez,ut,ue,mi.M,Gi.u5]})}return Dt})()},2039:(_r,xs,Xn)=>{var Po,Kr;(function(){var v;function mi(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function xt(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:mi(t)}}function Zs(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var Hn,Yt="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)Hn=Object.setPrototypeOf;else{var Jo;t:{var qo={};try{qo.__proto__={a:!0},Jo=qo.a;break t}catch{}Jo=!1}Hn=Jo?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ws=Hn;function Ut(t,e){if(t.prototype=Yt(e.prototype),t.prototype.constructor=t,ws)ws(t,e);else for(var i in e)if("prototype"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.QA=e.prototype}var Ot=typeof global<"u"&&null!=global?global:self,Ji="function"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_s="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function $o(t,e){if(e){var i=Ot;t=t.split(".");for(var n=0;n<t.length-1;n++){var o=t[n];o in i||(i[o]={}),i=i[o]}(e=e(n=i[t=t[t.length-1]]))!=n&&null!=e&&_s(i,t,{writable:!0,value:e})}}$o("Object.assign",function(t){return t||Ji}),$o("Array.prototype.fill",function(t){return t||function(e,i,n){var o=this.length||0;for(0>i&&(i=Math.max(0,o+i)),(null==n||n>o)&&(n=o),0>(n=Number(n))&&(n=Math.max(0,o+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var At="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function ht(){}function To(t,e){var i=-1;return function(){var n=this,o=arguments;-1!==i&&At.clearTimeout(i),i=si(function(){i=-1,t.apply(n,o)},e)}}function si(t,e){return At.setTimeout(t,e)}function kt(t){return At.document.createElement(t)}function it(t){throw Error(t)}function Rt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),it(t)}function le(t,e,i,n){i=null===i?"*":"string"==typeof i?i:"function"==typeof i&&"string"==typeof i.className?i.className:"",void 0!==n&&(i+="."+n),it(i+" is not in the range "+e+": "+t)}function Pi(t){At.console&&At.console.log(t)}function ue(t){return"object"==typeof t&&null!==t}function Xe(t){return Array.isArray(t)||At.NodeList&&t instanceof At.NodeList||At.HTMLCollection&&t instanceof At.HTMLCollection}function Nn(t){return Array.prototype.slice.call(t)}function Gi(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):it("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function ai(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):it("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function te(){var t=bs.pop();return void 0===t?[]:t}function $t(t){t.length=0,bs.push(t)}function io(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(ue(t)&&t.constructor)return io(t.constructor);return typeof t}function bi(t){var e=t;return ue(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function mr(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.DA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function ln(t,e,i){Object.defineProperty(Se.prototype,t,{get:e,set:i})}function Qt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,o=0;o<t.length;o+=2)i[n++]=e[t.substr(o,2)];for(t=""===(t=i.join(""))?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)o=e[i],e[i]=e[n=(n+e[i]+119)%256],e[n]=o;n=i=0;for(var r="",l=0;l<t.length;l++)o=e[i=(i+1)%256],e[i]=e[n=(n+e[i])%256],e[n]=o,r+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return r}void 0===At.requestAnimationFrame&&(At.requestAnimationFrame=void 0===At.setImmediate?function(t){At.setTimeout(t,0)}:At.setImmediate);var Vn=void 0!==At.navigator&&0<At.navigator.userAgent.indexOf("Trident/7"),gn=void 0!==At.navigator&&void 0!==At.navigator.platform&&null!==At.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),bs=[];function ut(t,e,i){ee(this),this.j=t,this.xa=e,this.o=i}function Ti(t,e){return null==e||""===e?null:t[e]}function Dt(){this.fw=[]}function Ht(){}Object.freeze([]),ht.className="Util",ht.Dx="32ab5ff3b26f42dc0ed90f21472913b5",ht.adym="gojs.net",ht.vfo="28e645fdb265",ht.className="Util",ut.prototype.toString=function(){return"EnumValue."+this.xa},Ot.Object.defineProperties(ut.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.xa}},value:{get:function(){return this.o}}}),ut.className="EnumValue",Dt.prototype.toString=function(){return this.fw.join("")},Dt.prototype.add=function(t){""!==t&&this.fw.push(t)},Dt.className="StringBuilder",Ht.className="PropertyCollection";var Ft,pt={FA:!1,KA:!1,HA:!1,JA:!1,OA:!1,MA:!1,ox:!1,GA:null,trace:function(t){At.console&&At.console.log(t)},IA:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},EA:function(t){var i,e={};for(i in t){if(e.x=i,"licenseKey"!==e.x){var n=t[e.x];if(void 0!==n.prototype){e.Zl=Object.getOwnPropertyNames(n.prototype);for(var o={Sj:0};o.Sj<e.Zl.length;(o={Sj:o.Sj}).Sj++){var r=Object.getOwnPropertyDescriptor(n.prototype,e.Zl[o.Sj]);void 0!==r.get&&void 0===r.set&&Object.defineProperty(n.prototype,e.Zl[o.Sj],{set:function(l,u){return function(){throw Error("Property "+l.Zl[u.Sj]+" of "+l.x+" is read-only.")}}(e,o)})}}}e={Zl:e.Zl,x:e.x}}}};function Mt(){}function ce(t){this.key=-1,this.value=t}function Pe(t){this.Cb=t,this.qf=null,t.Sa=null,this.qa=t.Ja,this.Za=-1}function Ze(t){this.Cb=t,t.Hg=null,this.qa=t.Ja,this.Za=t.s.length}function ot(t){ee(this),this._isFrozen=!1,this.s=[],this.Ja=0,this.Hg=this.Sa=null,"string"==typeof t&&it("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function Te(t){this.eg=t,t.Sa=null,this.qa=t.Ja,this.sa=null}function rt(t){ee(this),this._isFrozen=!1,this.Ub={},this.Tb=0,this.Sa=null,this.Ja=0,this.kf=this.ea=null,"string"==typeof t&&it("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function ee(t){t.__gohashid=mn++}function fi(t){var e=t.__gohashid;return void 0===e&&(e=mn++,t.__gohashid=e),e}function Ae(t){return t.__gohashid}Mt.prototype.reset=function(){},Mt.prototype.next=function(){return!1},Mt.prototype.Ad=function(){return!1},Mt.prototype.first=function(){return null},Mt.prototype.any=function(){return!1},Mt.prototype.all=function(){return!0},Mt.prototype.each=function(){return this},Mt.prototype.map=function(){return this},Mt.prototype.filter=function(){return this},Mt.prototype.de=function(){},Mt.prototype.toString=function(){return"EmptyIterator"},Ot.Object.defineProperties(Mt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Mt.prototype.first=Mt.prototype.first,Mt.prototype.hasNext=Mt.prototype.Ad,Mt.prototype.next=Mt.prototype.next,Mt.prototype.reset=Mt.prototype.reset,Mt.className="EmptyIterator",Ft=new Mt,ce.prototype.reset=function(){this.key=-1},ce.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},ce.prototype.Ad=function(){return this.next()},ce.prototype.first=function(){return this.key=0,this.value},ce.prototype.any=function(t){return this.key=-1,t(this.value)},ce.prototype.all=function(t){return this.key=-1,t(this.value)},ce.prototype.each=function(t){return this.key=-1,t(this.value),this},ce.prototype.map=function(t){return new ce(t(this.value))},ce.prototype.filter=function(t){return t(this.value)?new ce(this.value):Ft},ce.prototype.de=function(){this.value=null},ce.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Ot.Object.defineProperties(ce.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),ce.prototype.first=ce.prototype.first,ce.prototype.hasNext=ce.prototype.Ad,ce.prototype.next=ce.prototype.next,ce.prototype.reset=ce.prototype.reset,ce.className="SingletonIterator",Pe.prototype.reset=function(){var t=this.Cb;t.Sa=null,this.qa=t.Ja,this.Za=-1},Pe.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=(t=t.s).length,i=++this.Za,n=this.qf;if(null!==n)for(;i<e;){var o=t[i];if(n(o))return this.key=this.Za=i,this.value=o,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.de()}return!1},Pe.prototype.Ad=function(){return this.next()},Pe.prototype.first=function(){var t=this.Cb;this.qa=t.Ja,this.Za=0;var e=(t=t.s).length,i=this.qf;if(null!==i){for(var n=0;n<e;){var o=t[n];if(i(o))return this.key=this.Za=n,this.value=o;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Pe.prototype.any=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,o=0;o<i;o++){var r=e[o];if((null===n||n(r))&&t(r))return!0}return!1},Pe.prototype.all=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,o=0;o<i;o++){var r=e[o];if((null===n||n(r))&&!t(r))return!1}return!0},Pe.prototype.each=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=(e=e.s).length,n=this.qf,o=0;o<i;o++){var r=e[o];(null===n||n(r))&&t(r)}return this},Pe.prototype.map=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=[],n=(e=e.s).length,o=this.qf,r=0;r<n;r++){var l=e[r];(null===o||o(l))&&i.push(t(l))}return(t=new ot).s=i,t.yb(),t.iterator},Pe.prototype.filter=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;for(var i=[],n=(e=e.s).length,o=this.qf,r=0;r<n;r++){var l=e[r];(null===o||o(l))&&t(l)&&i.push(l)}return(t=new ot).s=i,t.yb(),t.iterator},Pe.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.qf=null,this.Cb.Sa=this},Pe.prototype.toString=function(){return"ListIterator@"+this.Za+"/"+this.Cb.count},Ot.Object.defineProperties(Pe.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.qf},set:function(t){this.qf=t}},count:{get:function(){var t=this.qf;if(null!==t){for(var e=0,i=this.Cb.s,n=i.length,o=0;o<n;o++)t(i[o])&&e++;return e}return this.Cb.s.length}}}),Pe.prototype.first=Pe.prototype.first,Pe.prototype.hasNext=Pe.prototype.Ad,Pe.prototype.next=Pe.prototype.next,Pe.prototype.reset=Pe.prototype.reset,Pe.className="ListIterator",Ze.prototype.reset=function(){var t=this.Cb;t.Hg=null,this.qa=t.Ja,this.Za=t.s.length},Ze.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=--this.Za;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.de(),!1)},Ze.prototype.Ad=function(){return this.next()},Ze.prototype.first=function(){var t=this.Cb;this.qa=t.Ja;var e=t.s;return this.Za=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},Ze.prototype.any=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},Ze.prototype.all=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},Ze.prototype.each=function(t){var e=this.Cb;e.Hg=null;var i=(e=e.s).length;for(this.Za=i,--i;0<=i;i--)t(e[i]);return this},Ze.prototype.map=function(t){var e=this.Cb;e.Hg=null;var i=[],n=(e=e.s).length;for(this.Za=n,--n;0<=n;n--)i.push(t(e[n]));return(t=new ot).s=i,t.yb(),t.iterator},Ze.prototype.filter=function(t){var e=this.Cb;e.Hg=null;var i=[],n=(e=e.s).length;for(this.Za=n,--n;0<=n;n--){var o=e[n];t(o)&&i.push(o)}return(t=new ot).s=i,t.yb(),t.iterator},Ze.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.Cb.Hg=this},Ze.prototype.toString=function(){return"ListIteratorBackwards("+this.Za+"/"+this.Cb.count+")"},Ot.Object.defineProperties(Ze.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Cb.s.length}}}),Ze.prototype.first=Ze.prototype.first,Ze.prototype.hasNext=Ze.prototype.Ad,Ze.prototype.next=Ze.prototype.next,Ze.prototype.reset=Ze.prototype.reset,Ze.className="ListIteratorBackwards",(v=ot.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return this._isFrozen=!1,this},v.toString=function(){return"List()#"+Ae(this)},v.add=function(t){return null===t||(this._isFrozen&&Rt(this,t),this.s.push(t),this.yb()),this},v.push=function(t){this.add(t)},v.addAll=function(t){if(null===t)return this;this._isFrozen&&Rt(this);var e=this.s;if(Xe(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.yb(),this},v.clear=function(){this._isFrozen&&Rt(this),this.s.length=0,this.yb()},v.contains=function(t){return null!==t&&-1!==this.s.indexOf(t)},v.has=function(t){return this.contains(t)},v.indexOf=function(t){return null===t?-1:this.s.indexOf(t)},v.M=function(t){var e=this.s;return(0>t||t>=e.length)&&le(t,"0 <= i < length",ot,"elt:i"),e[t]},v.get=function(t){return this.M(t)},v.cd=function(t,e){var i=this.s;(0>t||t>=i.length)&&le(t,"0 <= i < length",ot,"setElt:i"),this._isFrozen&&Rt(this,t),i[t]=e},v.set=function(t,e){this.cd(t,e)},v.first=function(){var t=this.s;return 0===t.length?null:t[0]},v.kc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},v.pop=function(){this._isFrozen&&Rt(this);var t=this.s;return 0<t.length?t.pop():null},ot.prototype.any=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},ot.prototype.all=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},ot.prototype.each=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)t(e[n]);return this},ot.prototype.map=function(t){for(var e=new ot,i=[],n=this.s,o=n.length,r=0;r<o;r++)i.push(t(n[r]));return e.s=i,e.yb(),e},ot.prototype.filter=function(t){for(var e=new ot,i=[],n=this.s,o=n.length,r=0;r<o;r++){var l=n[r];t(l)&&i.push(l)}return e.s=i,e.yb(),e},(v=ot.prototype).Hb=function(t,e){0>t&&le(t,">= 0",ot,"insertAt:i"),this._isFrozen&&Rt(this,t);var i=this.s;t>=i.length?i.push(e):i.splice(t,0,e),this.yb()},v.remove=function(t){if(null===t)return!1;this._isFrozen&&Rt(this,t);var e=this.s;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.yb(),!0)},v.delete=function(t){return this.remove(t)},v.mb=function(t){var e=this.s;(0>t||t>=e.length)&&le(t,"0 <= i < length",ot,"removeAt:i"),this._isFrozen&&Rt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.yb()},v.removeRange=function(t,e){var i=this.s,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this._isFrozen&&Rt(this);for(var o=t,r=e+1;r<n;)i[o++]=i[r++];return i.length=n-(e-t+1),this.yb(),this},ot.prototype.copy=function(){var t=new ot,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},(v=ot.prototype).Fa=function(){for(var t=this.s,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},v.Jv=function(){for(var t=new rt,e=this.s,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},v.sort=function(t){return this._isFrozen&&Rt(this),this.s.sort(t),this.yb(),this},v.zi=function(t,e,i){var n=this.s,o=n.length;void 0===e&&(e=0),void 0===i&&(i=o),this._isFrozen&&Rt(this);var r=i-e;if(1>=r)return this;if((0>e||e>=o-1)&&le(e,"0 <= from < length",ot,"sortRange:from"),2===r)return 0<t(i=n[e],o=n[e+1])&&(n[e]=o,n[e+1]=i,this.yb()),this;if(0===e)if(i>=o)n.sort(t);else for((e=n.slice(0,i)).sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=o)for((i=n.slice(e)).sort(t),t=e;t<o;t++)n[t]=i[t-e];else for((o=n.slice(e,i)).sort(t),t=e;t<i;t++)n[t]=o[t-e];return this.yb(),this},v.reverse=function(){return this._isFrozen&&Rt(this),this.s.reverse(),this.yb(),this},Ot.Object.defineProperties(ot.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Ft;var t=this.Sa;return null!==t?(t.reset(),t):new Pe(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Ft;var t=this.Hg;return null!==t?(t.reset(),t):new Ze(this)}}}),ot.prototype.reverse=ot.prototype.reverse,ot.prototype.sortRange=ot.prototype.zi,ot.prototype.sort=ot.prototype.sort,ot.prototype.toSet=ot.prototype.Jv,ot.prototype.toArray=ot.prototype.Fa,ot.prototype.removeRange=ot.prototype.removeRange,ot.prototype.removeAt=ot.prototype.mb,ot.prototype.delete=ot.prototype.delete,ot.prototype.remove=ot.prototype.remove,ot.prototype.insertAt=ot.prototype.Hb,ot.prototype.pop=ot.prototype.pop,ot.prototype.last=ot.prototype.kc,ot.prototype.first=ot.prototype.first,ot.prototype.set=ot.prototype.set,ot.prototype.setElt=ot.prototype.cd,ot.prototype.get=ot.prototype.get,ot.prototype.elt=ot.prototype.M,ot.prototype.indexOf=ot.prototype.indexOf,ot.prototype.has=ot.prototype.has,ot.prototype.contains=ot.prototype.contains,ot.prototype.clear=ot.prototype.clear,ot.prototype.addAll=ot.prototype.addAll,ot.prototype.push=ot.prototype.push,ot.prototype.add=ot.prototype.add,ot.prototype.thaw=ot.prototype.ka,ot.prototype.freeze=ot.prototype.freeze,ot.className="List",Te.prototype.reset=function(){var t=this.eg;t.Sa=null,this.qa=t.Ja,this.sa=null},Te.prototype.next=function(){var t=this.eg;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},Te.prototype.Ad=function(){return this.next()},Te.prototype.first=function(){var t=this.eg;if(this.qa=t.Ja,null!==(t=t.ea)){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},Te.prototype.any=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},Te.prototype.all=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},Te.prototype.each=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;null!==e;)t(e.value),e=e.va;return this},Te.prototype.map=function(t){var e=this.eg;e.Sa=null;var i=new ot;for(e=e.ea;null!==e;)i.add(t(e.value)),e=e.va;return i.iterator},Te.prototype.filter=function(t){var e=this.eg;e.Sa=null;var i=new ot;for(e=e.ea;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},Te.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.eg.Sa=this},Te.prototype.toString=function(){return null!==this.sa?"SetIterator@"+this.sa.value:"SetIterator"},Ot.Object.defineProperties(Te.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.eg.Tb}}}),Te.prototype.first=Te.prototype.first,Te.prototype.hasNext=Te.prototype.Ad,Te.prototype.next=Te.prototype.next,Te.prototype.reset=Te.prototype.reset,Te.className="SetIterator",(v=rt.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return this._isFrozen=!1,this},v.toString=function(){return"Set()#"+Ae(this)},v.add=function(t){if(null===t)return this;this._isFrozen&&Rt(this,t);var e=t;return ue(t)&&(e=fi(t)),void 0===this.Ub[e]&&(this.Tb++,t=new yn(t,t),this.Ub[e]=t,null===(e=this.kf)?this.ea=t:(t.ll=e,e.va=t),this.kf=t,this.yb()),this},v.addAll=function(t){if(null===t)return this;if(this._isFrozen&&Rt(this),Xe(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},v.contains=function(t){if(null===t)return!1;var e=t;return(!ue(t)||void 0!==(e=Ae(t)))&&void 0!==this.Ub[e]},v.has=function(t){return this.contains(t)},v.Ty=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},v.Uy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},v.first=function(){var t=this.ea;return null===t?null:t.value},rt.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},rt.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},rt.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e.value),e=e.va;return this},rt.prototype.map=function(t){for(var e=new rt,i=this.ea;null!==i;)e.add(t(i.value)),i=i.va;return e},rt.prototype.filter=function(t){for(var e=new rt,i=this.ea;null!==i;){var n=i.value;t(n)&&e.add(n),i=i.va}return e},(v=rt.prototype).remove=function(t){if(null===t)return!1;this._isFrozen&&Rt(this,t);var e=t;if(ue(t)&&void 0===(e=Ae(t))||void 0===(t=this.Ub[e]))return!1;var i=t.va,n=t.ll;return null!==i&&(i.ll=n),null!==n&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Ub[e],this.Tb--,this.yb(),!0},v.delete=function(t){return this.remove(t)},v.hp=function(t){if(null===t)return this;if(this._isFrozen&&Rt(this),Xe(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},v.qA=function(t){if(null===t||0===this.count)return this;this._isFrozen&&Rt(this);var e=new rt;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.hp(t),this},v.clear=function(){this._isFrozen&&Rt(this),this.Ub={},this.Tb=0,null!==this.Sa&&this.Sa.reset(),this.kf=this.ea=null,this.yb()},rt.prototype.copy=function(){var i,t=new rt,e=this.Ub;for(i in e)t.add(e[i].value);return t},rt.prototype.Fa=function(){var n,t=Array(this.Tb),e=this.Ub,i=0;for(n in e)t[i]=e[n].value,i++;return t},rt.prototype.Iv=function(){var i,t=new ot,e=this.Ub;for(i in e)t.add(e[i].value);return t},Ot.Object.defineProperties(rt.prototype,{count:{get:function(){return this.Tb}},size:{get:function(){return this.Tb}},iterator:{get:function(){if(0>=this.Tb)return Ft;var t=this.Sa;return null!==t?(t.reset(),t):new Te(this)}}}),rt.prototype.toList=rt.prototype.Iv,rt.prototype.toArray=rt.prototype.Fa,rt.prototype.clear=rt.prototype.clear,rt.prototype.retainAll=rt.prototype.qA,rt.prototype.removeAll=rt.prototype.hp,rt.prototype.delete=rt.prototype.delete,rt.prototype.remove=rt.prototype.remove,rt.prototype.first=rt.prototype.first,rt.prototype.containsAny=rt.prototype.Uy,rt.prototype.containsAll=rt.prototype.Ty,rt.prototype.has=rt.prototype.has,rt.prototype.contains=rt.prototype.contains,rt.prototype.addAll=rt.prototype.addAll,rt.prototype.add=rt.prototype.add,rt.prototype.thaw=rt.prototype.ka,rt.prototype.freeze=rt.prototype.freeze;var no,Wl,Aa,Ul,Ks,mn=1;function He(t){this.ma=t,this.qa=t.Ja,this.sa=null}function ie(t){rt.call(this),ee(this),this._isFrozen=!0,this.ma=t}function je(t){this.ma=t,t.jf=null,this.qa=t.Ja,this.sa=null}function yn(t,e){this.key=t,this.value=e,this.ll=this.va=null}function li(t){this.ma=t,t.Sa=null,this.qa=t.Ja,this.sa=null}function Tt(t){ee(this),this._isFrozen=!1,this.Ub={},this.Tb=0,this.jf=this.Sa=null,this.Ja=0,this.kf=this.ea=null,"string"==typeof t&&it("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function B(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):it("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}function mu(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new B(i,o)}return new B}function yu(t){return t.x.toString()+" "+t.y.toString()}function vu(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function pi(t,e){return e.Cd(t),t}function yi(t,e,i,n,o,r){var l=o-i,u=r-n,c=l*l+u*u,p=-(i-=t)*l-(n-=e)*u;return 0>=p||p>=c?(l=o-t,u=r-e,Math.min(i*i+n*n,l*l+u*u)):(t=l*n-u*i)*t/c}function mo(t,e,i,n){return(t=i-t)*t+(e=n-e)*e}function yr(t,e,i,n){return e=n-e,0==(t=i-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}rt.className="Set",rt.uniqueHash=ee,rt.hashIdUnique=fi,rt.hashId=Ae,He.prototype.reset=function(){this.qa=this.ma.Ja,this.sa=null},He.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=this.key=t=e.key,!0):(this.de(),!1)},He.prototype.Ad=function(){return this.next()},He.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,null!==(t=t.ea)?(this.sa=t,this.value=this.key=t=t.key):null},He.prototype.any=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;){if(t(e.key))return!0;e=e.va}return!1},He.prototype.all=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;){if(!t(e.key))return!1;e=e.va}return!0},He.prototype.each=function(t){var e=this.ma;for(this.sa=null,e=e.ea;null!==e;)t(e.key),e=e.va;return this},He.prototype.map=function(t){var e=this.ma;this.sa=null;var i=new ot;for(e=e.ea;null!==e;)i.add(t(e.key)),e=e.va;return i.iterator},He.prototype.filter=function(t){var e=this.ma;this.sa=null;var i=new ot;for(e=e.ea;null!==e;){var n=e.key;t(n)&&i.add(n),e=e.va}return i.iterator},He.prototype.de=function(){this.value=this.key=null,this.qa=-1},He.prototype.toString=function(){return null!==this.sa?"MapKeySetIterator@"+this.sa.value:"MapKeySetIterator"},Ot.Object.defineProperties(He.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),He.prototype.first=He.prototype.first,He.prototype.hasNext=He.prototype.Ad,He.prototype.next=He.prototype.next,He.prototype.reset=He.prototype.reset,He.className="MapKeySetIterator",Ut(ie,rt),(v=ie.prototype).freeze=function(){return this},v.ka=function(){return this},v.toString=function(){return"MapKeySet("+this.ma.toString()+")"},v.add=function(){it("This Set is read-only: "+this.toString())},v.contains=function(t){return this.ma.contains(t)},v.has=function(t){return this.contains(t)},v.remove=function(){it("This Set is read-only: "+this.toString())},v.delete=function(t){return this.remove(t)},v.clear=function(){it("This Set is read-only: "+this.toString())},v.first=function(){var t=this.ma.ea;return null!==t?t.key:null},ie.prototype.any=function(t){for(var e=this.ma.ea;null!==e;){if(t(e.key))return!0;e=e.va}return!1},ie.prototype.all=function(t){for(var e=this.ma.ea;null!==e;){if(!t(e.key))return!1;e=e.va}return!0},ie.prototype.each=function(t){for(var e=this.ma.ea;null!==e;)t(e.key),e=e.va;return this},ie.prototype.map=function(t){for(var e=new rt,i=this.ma.ea;null!==i;)e.add(t(i.key)),i=i.va;return e},ie.prototype.filter=function(t){for(var e=new rt,i=this.ma.ea;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.va}return e},ie.prototype.copy=function(){return new ie(this.ma)},ie.prototype.Jv=function(){var i,t=new rt,e=this.ma.Ub;for(i in e)t.add(e[i].key);return t},ie.prototype.Fa=function(){var n,t=this.ma.Ub,e=Array(this.ma.Tb),i=0;for(n in t)e[i]=t[n].key,i++;return e},ie.prototype.Iv=function(){var i,t=new ot,e=this.ma.Ub;for(i in e)t.add(e[i].key);return t},Ot.Object.defineProperties(ie.prototype,{count:{get:function(){return this.ma.Tb}},size:{get:function(){return this.ma.Tb}},iterator:{get:function(){return 0>=this.ma.Tb?Ft:new He(this.ma)}}}),ie.prototype.toList=ie.prototype.Iv,ie.prototype.toArray=ie.prototype.Fa,ie.prototype.toSet=ie.prototype.Jv,ie.prototype.first=ie.prototype.first,ie.prototype.clear=ie.prototype.clear,ie.prototype.delete=ie.prototype.delete,ie.prototype.remove=ie.prototype.remove,ie.prototype.has=ie.prototype.has,ie.prototype.contains=ie.prototype.contains,ie.prototype.add=ie.prototype.add,ie.prototype.thaw=ie.prototype.ka,ie.prototype.freeze=ie.prototype.freeze,ie.className="MapKeySet",je.prototype.reset=function(){var t=this.ma;t.jf=null,this.qa=t.Ja,this.sa=null},je.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},je.prototype.Ad=function(){return this.next()},je.prototype.first=function(){var t=this.ma;if(this.qa=t.Ja,null!==(t=t.ea)){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},je.prototype.any=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.va}return!1},je.prototype.all=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.va}return!0},je.prototype.each=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;null!==e;)t(e.value),e=e.va;return this},je.prototype.map=function(t){var e=this.ma;this.sa=e.jf=null;var i=new ot;for(e=e.ea;null!==e;)i.add(t(e.value)),e=e.va;return i.iterator},je.prototype.filter=function(t){var e=this.ma;this.sa=e.jf=null;var i=new ot;for(e=e.ea;null!==e;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},je.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.jf=this},je.prototype.toString=function(){return null!==this.sa?"MapValueSetIterator@"+this.sa.value:"MapValueSetIterator"},Ot.Object.defineProperties(je.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),je.prototype.first=je.prototype.first,je.prototype.hasNext=je.prototype.Ad,je.prototype.next=je.prototype.next,je.prototype.reset=je.prototype.reset,je.className="MapValueSetIterator",yn.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},yn.className="KeyValuePair",li.prototype.reset=function(){var t=this.ma;t.Sa=null,this.qa=t.Ja,this.sa=null},li.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&null===this.key)return!1;var e=this.sa;return null!==(e=null===e?t.ea:e.va)?(this.sa=e,this.key=e.key,this.value=e.value,!0):(this.de(),!1)},li.prototype.Ad=function(){return this.next()},li.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,null!==(t=t.ea)?(this.sa=t,this.key=t.key,this.value=t.value,t):null},li.prototype.any=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(t(e))return!0;e=e.va}return!1},li.prototype.all=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;){if(!t(e))return!1;e=e.va}return!0},li.prototype.each=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;null!==e;)t(e),e=e.va;return this},li.prototype.map=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new ot;for(e=e.ea;null!==e;)i.add(t(e)),e=e.va;return i.iterator},li.prototype.filter=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new ot;for(e=e.ea;null!==e;)t(e)&&i.add(e),e=e.va;return i.iterator},li.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.Sa=this},li.prototype.toString=function(){return null!==this.sa?"MapIterator@"+this.sa:"MapIterator"},Ot.Object.defineProperties(li.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Tb}}}),li.prototype.first=li.prototype.first,li.prototype.hasNext=li.prototype.Ad,li.prototype.next=li.prototype.next,li.prototype.reset=li.prototype.reset,li.className="MapIterator",(v=Tt.prototype).yb=function(){var t=this.Ja;999999999<++t&&(t=0),this.Ja=t},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return this._isFrozen=!1,this},v.toString=function(){return"Map()#"+Ae(this)},v.add=function(t,e){this._isFrozen&&Rt(this,t);var i=t;ue(t)&&(i=fi(t));var n=this.Ub[i];return void 0===n?(this.Tb++,t=new yn(t,e),this.Ub[i]=t,null===(i=this.kf)?this.ea=t:(t.ll=i,i.va=t),this.kf=t,this.yb()):n.value=e,this},v.set=function(t,e){return this.add(t,e)},v.addAll=function(t){if(null===t)return this;if(Xe(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof Tt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},v.first=function(){return this.ea},Tt.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e))return!0;e=e.va}return!1},Tt.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e))return!1;e=e.va}return!0},Tt.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e),e=e.va;return this},Tt.prototype.map=function(t){for(var e=new Tt,i=this.ea;null!==i;)e.add(i.key,t(i)),i=i.va;return e},Tt.prototype.filter=function(t){for(var e=new Tt,i=this.ea;null!==i;)t(i)&&e.add(i.key,i.value),i=i.va;return e},(v=Tt.prototype).contains=function(t){var e=t;return(!ue(t)||void 0!==(e=Ae(t)))&&void 0!==this.Ub[e]},v.has=function(t){return this.contains(t)},v.I=function(t){var e=t;return ue(t)&&void 0===(e=Ae(t))||void 0===(t=this.Ub[e])?null:t.value},v.get=function(t){return this.I(t)},v.remove=function(t){if(null===t)return!1;this._isFrozen&&Rt(this,t);var e=t;if(ue(t)&&void 0===(e=Ae(t))||void 0===(t=this.Ub[e]))return!1;var i=t.va,n=t.ll;return null!==i&&(i.ll=n),null!==n&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Ub[e],this.Tb--,this.yb(),!0},v.delete=function(t){return this.remove(t)},v.clear=function(){this._isFrozen&&Rt(this),this.Ub={},this.Tb=0,null!==this.Sa&&this.Sa.reset(),null!==this.jf&&this.jf.reset(),this.kf=this.ea=null,this.yb()},Tt.prototype.copy=function(){var i,t=new Tt,e=this.Ub;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},Tt.prototype.Fa=function(){var n,t=this.Ub,e=Array(this.Tb),i=0;for(n in t){var o=t[n];e[i]=new yn(o.key,o.value),i++}return e},Tt.prototype.Lf=function(){return new ie(this)},Ot.Object.defineProperties(Tt.prototype,{count:{get:function(){return this.Tb}},size:{get:function(){return this.Tb}},iterator:{get:function(){if(0>=this.count)return Ft;var t=this.Sa;return null!==t?(t.reset(),t):new li(this)}},iteratorKeys:{get:function(){return 0>=this.count?Ft:new He(this)}},iteratorValues:{get:function(){if(0>=this.count)return Ft;var t=this.jf;return null!==t?(t.reset(),t):new je(this)}}}),Tt.prototype.toKeySet=Tt.prototype.Lf,Tt.prototype.toArray=Tt.prototype.Fa,Tt.prototype.clear=Tt.prototype.clear,Tt.prototype.delete=Tt.prototype.delete,Tt.prototype.remove=Tt.prototype.remove,Tt.prototype.get=Tt.prototype.get,Tt.prototype.getValue=Tt.prototype.I,Tt.prototype.has=Tt.prototype.has,Tt.prototype.contains=Tt.prototype.contains,Tt.prototype.first=Tt.prototype.first,Tt.prototype.addAll=Tt.prototype.addAll,Tt.prototype.set=Tt.prototype.set,Tt.prototype.add=Tt.prototype.add,Tt.prototype.thaw=Tt.prototype.ka,Tt.prototype.freeze=Tt.prototype.freeze,Tt.className="Map",B.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},B.prototype.h=function(t,e){return this.x=t,this.y=e,this},B.prototype.sg=function(t,e){return this.x=t,this.y=e,this},B.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},B.prototype.copy=function(){var t=new B;return t.x=this.x,t.y=this.y,t},(v=B.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},v.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this},v.toString=function(){return"Point("+this.x+","+this.y+")"},v.D=function(t){return t instanceof B&&this.x===t.x&&this.y===t.y},v.hi=function(t,e){return this.x===t&&this.y===e},v.Xa=function(t){return _.B(this.x,t.x)&&_.B(this.y,t.y)},v.add=function(t){return this.x+=t.x,this.y+=t.y,this},v.re=function(t){return this.x-=t.x,this.y-=t.y,this},v.offset=function(t,e){return this.x+=t,this.y+=e,this},B.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},(v=B.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},v.Bf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},v.zd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},v.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},v.ab=function(t){return vu(t.x-this.x,t.y-this.y)},v.direction=function(t,e){return vu(t-this.x,e-this.y)},v.Sy=function(t,e){return _.Fl(t.x,t.y,e.x,e.y,this.x,this.y)},v.gA=function(t,e,i,n){return _.qh(t,e,i,n,this.x,this.y,this),this},v.hA=function(t,e){return _.qh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},v.vA=function(t,e,i,n){return _.No(this.x,this.y,t,e,i,n,this),this},v.wA=function(t,e){return _.No(this.x,this.y,t.x,t.y,e.width,e.height,this),this},v.xi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},v.yi=function(t,e,i,n,o){return this.x=t+o.x*i+o.offsetX,this.y=e+o.y*n+o.offsetY,this},v.transform=function(t){return t.Ga(this),this},v.w=function(){return isFinite(this.x)&&isFinite(this.y)},B.alloc=function(){var t=Pa.pop();return void 0===t?new B:t},B.allocAt=function(t,e){var i=Pa.pop();return void 0===i?new B(t,e):(i.x=t,i.y=e,i)},B.free=function(t){Pa.push(t)},B.prototype.isReal=B.prototype.w,B.prototype.setSpot=B.prototype.yi,B.prototype.setRectSpot=B.prototype.xi,B.prototype.snapToGridPoint=B.prototype.wA,B.prototype.snapToGrid=B.prototype.vA,B.prototype.projectOntoLineSegmentPoint=B.prototype.hA,B.prototype.projectOntoLineSegment=B.prototype.gA,B.intersectingLineSegments=function(t,e,i,n,o,r,l,u){return _.Rl(t,e,i,n,o,r,l,u)},B.prototype.compareWithLineSegmentPoint=B.prototype.Sy,B.compareWithLineSegment=function(t,e,i,n,o,r){return _.Fl(t,e,i,n,o,r)},B.prototype.direction=B.prototype.direction,B.prototype.directionPoint=B.prototype.ab,B.prototype.normalize=B.prototype.normalize,B.prototype.distanceSquared=B.prototype.zd,B.prototype.distanceSquaredPoint=B.prototype.Bf,B.prototype.scale=B.prototype.scale,B.prototype.rotate=B.prototype.rotate,B.prototype.offset=B.prototype.offset,B.prototype.subtract=B.prototype.re,B.prototype.add=B.prototype.add,B.prototype.equalsApprox=B.prototype.Xa,B.prototype.equalTo=B.prototype.hi,B.prototype.equals=B.prototype.D,B.prototype.set=B.prototype.set,B.prototype.setTo=B.prototype.sg;var vr,Ta,La,xr,xu,Zl,Na,Pa=[];function Pt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):it("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}function wu(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new Pt(i,o)}return new Pt}function bu(t){return t.width.toString()+" "+t.height.toString()}B.className="Point",B.parse=mu,B.stringify=yu,B.distanceLineSegmentSquared=yi,B.distanceSquared=mo,B.direction=yr,B.Origin=no=new B(0,0).ja(),B.InfiniteTopLeft=Wl=new B(-1/0,-1/0).ja(),B.InfiniteBottomRight=Aa=new B(1/0,1/0).ja(),B.SixPoint=Ul=new B(6,6).ja(),B.NoPoint=Ks=new B(NaN,NaN).ja(),B.parse=mu,B.stringify=yu,B.distanceLineSegmentSquared=yi,B.distanceSquared=mo,B.direction=yr,Pt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Pt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Pt.prototype.sg=function(t,e){return this.width=t,this.height=e,this},Pt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Pt.prototype.copy=function(){var t=new Pt;return t.width=this.width,t.height=this.height,t},(v=Pt.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},v.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this},v.toString=function(){return"Size("+this.width+","+this.height+")"},v.D=function(t){return t instanceof Pt&&this.width===t.width&&this.height===t.height},v.hi=function(t,e){return this.width===t&&this.height===e},v.Xa=function(t){return _.B(this.width,t.width)&&_.B(this.height,t.height)},v.Bc=function(t,e){return this.width=0<=(t=this.width+t)?t:0,this.height=0<=(e=this.height+e)?e:0,this},v.w=function(){return isFinite(this.width)&&isFinite(this.height)},Pt.alloc=function(){var t=Fa.pop();return void 0===t?new Pt:t},Pt.free=function(t){Fa.push(t)},Pt.prototype.isReal=Pt.prototype.w,Pt.prototype.inflate=Pt.prototype.Bc,Pt.prototype.equalsApprox=Pt.prototype.Xa,Pt.prototype.equalTo=Pt.prototype.hi,Pt.prototype.equals=Pt.prototype.D,Pt.prototype.set=Pt.prototype.set,Pt.prototype.setTo=Pt.prototype.sg;var Fa=[];function $(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&(0<=i||isNaN(i))&&"number"==typeof n&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof B?(i=t.x,t=t.y,e instanceof B?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof Pt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):it("Incorrect second argument supplied to Rect constructor "+e)):it("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}function Gn(t,e,i){t.width=e,t.height=i}function Ia(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;(n=t[e++])&&(r=parseFloat(n));for(var l=0;""===t[e];)e++;return(n=t[e++])&&(l=parseFloat(n)),new $(i,o,r,l)}return new $}function Oa(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Ea(t,e){return _.$(t.x,e.x)&&_.$(t.y,e.y)&&_.$(t.width,e.width)&&_.$(t.height,e.height)}function Da(t,e,i,n,o){var r=t.width;return i+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=i+o),e+n<=-(i=t.height)?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function Su(t,e,i,n,o){var r=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+o),t.x=r,t.y=l,t.width=Math.max(0,e-r),t.height=Math.max(0,i-l),t}function ku(t,e){var i=t.width,n=t.x,o=e.x-10;return!(n>e.width+10+10+o||o>i+n||(i=t.height,(t=t.y)>e.height+10+10+(n=e.y-10)||n>i+t))}function ii(t,e,i,n,o){var r=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+o),t.x=r,t.y=l,t.width=e-r,t.height=i-l,t}function Fn(t,e,i,n,o,r,l,u){return void 0===l&&(l=0),void 0===u&&(u=0),t<=o&&o+l<=t+i&&e<=r&&r+u<=e+n}function _l(t,e,i,n,o,r,l,u){return!(t>l+o||o>i+t||e>u+r||r>n+e)}Pt.className="Size",Pt.parse=wu,Pt.stringify=bu,Pt.ZeroSize=vr=new Pt(0,0).ja(),Pt.OneSize=Ta=new Pt(1,1).ja(),Pt.SixSize=La=new Pt(6,6).ja(),Pt.EightSize=xr=new Pt(8,8).ja(),Pt.TenSize=xu=new Pt(10,10).ja(),Pt.InfiniteSize=Zl=new Pt(1/0,1/0).ja(),Pt.NoSize=Na=new Pt(NaN,NaN).ja(),Pt.parse=wu,Pt.stringify=bu,(v=$.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},v.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},v.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},v.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},v.dd=function(t){return this.x=t.x,this.y=t.y,this},v.uA=function(t){return this.width=t.width,this.height=t.height,this},$.prototype.copy=function(){var t=new $;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(v=$.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},v.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this},v.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},v.D=function(t){return t instanceof $&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},v.hi=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},v.Xa=function(t){return _.B(this.x,t.x)&&_.B(this.y,t.y)&&_.B(this.width,t.width)&&_.B(this.height,t.height)},v.ca=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},v.Re=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},v.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},v.offset=function(t,e){return this.x+=t,this.y+=e,this},v.Bc=function(t,e){return Da(this,e,t,e,t)},v.Co=function(t){return Da(this,t.top,t.right,t.bottom,t.left)},v.Gv=function(t){return Da(this,-t.top,-t.right,-t.bottom,-t.left)},v.Iz=function(t,e,i,n){return Da(this,t,e,i,n)},v.Fx=function(t){return Su(this,t.x,t.y,t.width,t.height)},v.Vu=function(t,e,i,n){return Su(this,t,e,i,n)},v.Yc=function(t){return this.Wu(t.x,t.y,t.width,t.height)},v.Wu=function(t,e,i,n){var o=this.width,r=this.x;return!(o!==1/0&&i!==1/0&&(o+=r,i+=t,isNaN(i)||isNaN(o)||r>i||t>o)||(i=this.y,(t=this.height)!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},v.Ye=function(t){return ii(this,t.x,t.y,0,0)},v.ed=function(t){return ii(this,t.x,t.y,t.width,t.height)},v.Lv=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),ii(this,t,e,i,n)},v.yi=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this},v.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},v.Nz=function(){return 0===this.width&&0===this.height},$.alloc=function(){var t=Kl.pop();return void 0===t?new $:t},$.allocAt=function(t,e,i,n){var o=Kl.pop();return void 0===o?new $(t,e,i,n):o.h(t,e,i,n)},$.free=function(t){Kl.push(t)},Ot.Object.defineProperties($.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new B(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Pt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new B(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),$.prototype.isEmpty=$.prototype.Nz,$.prototype.isReal=$.prototype.w,$.intersectsLineSegment=function(t,e,i,n,o,r,l,u){return _.Gx(t,e,i,n,o,r,l,u)},$.prototype.setSpot=$.prototype.yi,$.prototype.union=$.prototype.Lv,$.prototype.unionRect=$.prototype.ed,$.prototype.unionPoint=$.prototype.Ye,$.prototype.intersects=$.prototype.Wu,$.prototype.intersectsRect=$.prototype.Yc,$.prototype.intersect=$.prototype.Vu,$.prototype.intersectRect=$.prototype.Fx,$.prototype.grow=$.prototype.Iz,$.prototype.subtractMargin=$.prototype.Gv,$.prototype.addMargin=$.prototype.Co,$.prototype.inflate=$.prototype.Bc,$.prototype.offset=$.prototype.offset,$.prototype.contains=$.prototype.contains,$.prototype.containsRect=$.prototype.Re,$.prototype.containsPoint=$.prototype.ca,$.prototype.equalsApprox=$.prototype.Xa,$.prototype.equalTo=$.prototype.hi,$.prototype.equals=$.prototype.D,$.prototype.setSize=$.prototype.uA,$.prototype.setPoint=$.prototype.dd,$.prototype.set=$.prototype.set,$.prototype.setTo=$.prototype.sg;var Js,ja=null,Kl=[];function R(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):it("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}function s(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=NaN;""===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new R;for(var o=NaN;""===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new R(i);for(var r=NaN;""===t[e];)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new R(i,o);for(var l=NaN;""===t[e];)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new R(i,o):new R(i,o,r,l)}return new R}function a(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}$.className="Rect",$.parse=Ia,$.stringify=Oa,$.contains=Fn,$.intersects=_l,$.ZeroRect=Js=new $(0,0,0,0).ja(),$.NoRect=ja=new $(NaN,NaN,NaN,NaN).ja(),$.parse=Ia,$.stringify=Oa,$.contains=Fn,$.intersects=_l,R.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},R.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},R.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},R.prototype.copy=function(){var t=new R;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(v=R.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},v.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this},v.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},v.D=function(t){return t instanceof R&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},v.hi=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},v.Xa=function(t){return _.B(this.top,t.top)&&_.B(this.right,t.right)&&_.B(this.bottom,t.bottom)&&_.B(this.left,t.left)},v.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},R.alloc=function(){var t=g.pop();return void 0===t?new R:t},R.free=function(t){g.push(t)},R.prototype.isReal=R.prototype.w,R.prototype.equalsApprox=R.prototype.Xa,R.prototype.equalTo=R.prototype.hi,R.prototype.equals=R.prototype.D,R.prototype.set=R.prototype.set,R.prototype.setTo=R.prototype.sg;var y,w,k,C,T,P,F,O,j,Y,G,U,S,N,E,H,W,K,tt,et,gt,St,bt,Et,Gt,Bt,he,me,fe,Be,ye,_e,Le,ni,yo,Ri,h=null,d=null,g=[];function f(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this._isFrozen=!1}function ze(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Ba(t){if("string"==typeof t){if("None"===(t=t.trim()))return y;if("TopLeft"===t)return w;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return k;if("TopRight"===t)return C;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return T;if("Center"===t)return P;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return F;if("BottomLeft"===t)return O;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return j;if("BottomRight"===t)return Y;if("TopSide"===t)return G;if("LeftSide"===t)return U;if("RightSide"===t)return S;if("BottomSide"===t)return N;if("TopBottomSides"===t)return E;if("LeftRightSides"===t)return H;if("TopLeftSides"===t)return W;if("TopRightSides"===t)return K;if("BottomLeftSides"===t)return tt;if("BottomRightSides"===t)return et;if("NotTopSide"===t)return gt;if("NotLeftSide"===t)return St;if("NotRightSide"===t)return bt;if("NotBottomSide"===t)return Et;if("AllSides"===t)return Gt;if("Default"===t)return Bt;t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(r=parseFloat(n));for(var l=0;""===t[e];)e++;return void 0!==(n=t[e++])&&0<n.length&&(l=parseFloat(n)),new f(i,o,r,l)}return new f}function Mg(t){return t.sb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}R.className="Margin",R.parse=s,R.stringify=a,R.ZeroMargin=h=new R(0,0,0,0).ja(),R.TwoMargin=d=new R(2,2,2,2).ja(),R.parse=s,R.stringify=a,f.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},f.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},f.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},f.prototype.copy=function(){var t=new f;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(v=f.prototype).ja=function(){return this._isFrozen=!0,Object.freeze(this),this},v.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this},v.toString=function(){return this.sb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.D(y)?"None":this.D(w)?"TopLeft":this.D(k)?"Top":this.D(C)?"TopRight":this.D(T)?"Left":this.D(P)?"Center":this.D(F)?"Right":this.D(O)?"BottomLeft":this.D(j)?"Bottom":this.D(Y)?"BottomRight":this.D(G)?"TopSide":this.D(U)?"LeftSide":this.D(S)?"RightSide":this.D(N)?"BottomSide":this.D(E)?"TopBottomSides":this.D(H)?"LeftRightSides":this.D(W)?"TopLeftSides":this.D(K)?"TopRightSides":this.D(tt)?"BottomLeftSides":this.D(et)?"BottomRightSides":this.D(gt)?"NotTopSide":this.D(St)?"NotLeftSide":this.D(bt)?"NotRightSide":this.D(Et)?"NotBottomSide":this.D(Gt)?"AllSides":this.D(Bt)?"Default":"None"},v.D=function(t){return t instanceof f&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},v.hv=function(){return new f(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},v.Hf=function(t){if(!this.$c())return!1;if(!t.$c())if(t.D(he))t=U;else if(t.D(me))t=S;else if(t.D(fe))t=G;else{if(!t.D(Be))return!1;t=N}return(this.offsetY&(t=t.offsetY))===t},v.sb=function(){return!isNaN(this.x)&&!isNaN(this.y)},v.Mc=function(){return isNaN(this.x)||isNaN(this.y)},v.$c=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},v.ys=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},v.Yb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},f.alloc=function(){var t=Cg.pop();return void 0===t?new f:t},f.free=function(t){Cg.push(t)},f.prototype.isDefault=f.prototype.Yb,f.prototype.isNone=f.prototype.ys,f.prototype.isSide=f.prototype.$c,f.prototype.isNoSpot=f.prototype.Mc,f.prototype.isSpot=f.prototype.sb,f.prototype.includesSide=f.prototype.Hf,f.prototype.opposite=f.prototype.hv,f.prototype.equals=f.prototype.D,f.prototype.set=f.prototype.set,f.prototype.setTo=f.prototype.sg;var Cg=[];function zt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}f.className="Spot",f.parse=Ba,f.stringify=Mg,f.None=y=ze(new f(0,0,0,0),0).ja(),f.Default=Bt=ze(new f(0,0,-1,0),-1).ja(),f.TopLeft=w=new f(0,0,0,0).ja(),f.TopCenter=k=new f(.5,0,0,0).ja(),f.TopRight=C=new f(1,0,0,0).ja(),f.LeftCenter=T=new f(0,.5,0,0).ja(),f.Center=P=new f(.5,.5,0,0).ja(),f.RightCenter=F=new f(1,.5,0,0).ja(),f.BottomLeft=O=new f(0,1,0,0).ja(),f.BottomCenter=j=new f(.5,1,0,0).ja(),f.BottomRight=Y=new f(1,1,0,0).ja(),f.MiddleTop=ye=k,f.MiddleLeft=_e=T,f.MiddleRight=Le=F,f.MiddleBottom=ni=j,f.Top=fe=k,f.Left=he=T,f.Right=me=F,f.Bottom=Be=j,f.TopSide=G=ze(new f(0,0,1,1),1).ja(),f.LeftSide=U=ze(new f(0,0,1,2),1).ja(),f.RightSide=S=ze(new f(0,0,1,4),1).ja(),f.BottomSide=N=ze(new f(0,0,1,8),1).ja(),f.TopBottomSides=E=ze(new f(0,0,1,9),1).ja(),f.LeftRightSides=H=ze(new f(0,0,1,6),1).ja(),f.TopLeftSides=W=ze(new f(0,0,1,3),1).ja(),f.TopRightSides=K=ze(new f(0,0,1,5),1).ja(),f.BottomLeftSides=tt=ze(new f(0,0,1,10),1).ja(),f.BottomRightSides=et=ze(new f(0,0,1,12),1).ja(),f.NotTopSide=gt=ze(new f(0,0,1,14),1).ja(),f.NotLeftSide=St=ze(new f(0,0,1,13),1).ja(),f.NotRightSide=bt=ze(new f(0,0,1,11),1).ja(),f.NotBottomSide=Et=ze(new f(0,0,1,7),1).ja(),f.AllSides=Gt=ze(new f(0,0,1,15),1).ja(),yo=new f(.156,.156).ja(),Ri=new f(.844,.844).ja(),f.parse=Ba,f.stringify=Mg,zt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},zt.prototype.setTransform=function(t,e,i,n,o,r){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},zt.prototype.copy=function(){var t=new zt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},zt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},zt.prototype.D=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},zt.prototype.ws=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},zt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},zt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,o=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=o,this},zt.prototype.cv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,o=-t.m21*e,r=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=o,this},zt.prototype.Uj=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},zt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var o=this.m12*t+this.m22*n,r=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=o,this.m21=r,this.m22=l,this.translate(-e,-i),this},(v=zt.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},v.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},v.Ga=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},v.Cd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},v.Fu=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},v.pp=function(t){var e=t.x,i=t.y,n=e+t.width,o=i+t.height,r=this.m11,l=this.m12,u=this.m21,c=this.m22,p=this.dx,m=this.dy,x=e*r+i*u+p,b=e*l+i*c+m,M=n*r+i*u+p,A=n*l+i*c+m;return i=e*r+o*u+p,e=e*l+o*c+m,r=n*r+o*u+p,n=n*l+o*c+m,o=Math.min(x,M),x=Math.max(x,M),M=Math.min(b,A),b=Math.max(b,A),o=Math.min(o,i),x=Math.max(x,i),M=Math.min(M,e),b=Math.max(b,e),o=Math.min(o,r),x=Math.max(x,r),M=Math.min(M,n),b=Math.max(b,n),t.h(o,M,x-o,b-M),t},zt.alloc=function(){var t=Ag.pop();return void 0===t?new zt:t},zt.free=function(t){Ag.push(t)},zt.prototype.transformRect=zt.prototype.pp,zt.prototype.transformPoint=zt.prototype.Ga,zt.prototype.scale=zt.prototype.scale,zt.prototype.translate=zt.prototype.translate,zt.prototype.rotate=zt.prototype.rotate,zt.prototype.invert=zt.prototype.Uj,zt.prototype.multiplyInverted=zt.prototype.cv,zt.prototype.multiply=zt.prototype.multiply,zt.prototype.reset=zt.prototype.reset,zt.prototype.isIdentity=zt.prototype.ws,zt.prototype.equals=zt.prototype.D,zt.prototype.setTransform=zt.prototype.setTransform,zt.prototype.set=zt.prototype.set;var Ag=[];zt.className="Transform",zt.xF="54a702f3e53909c447824c6706603faf4c";var _={BA:"7da71ca0ad381e90",wg:(Math.sqrt(2)-1)/3*4,Vv:null,sqrt:function(t){if(0>=t)return 0;var e=_.Vv;if(null===e){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);_.Vv=e}return 1>t?2e3>=(i=1/t)?1/e[0|i]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},B:function(t,e){return.5>(t-=e)&&-.5<t},$:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Zb:function(t,e,i,n,o,r,l){if(0>=o&&(o=1e-6),t<i)var u=t,c=i;else u=i,c=t;if(e<n)var p=e,m=n;else p=n,m=e;if(t===i)return p<=l&&l<=m&&t-o<=r&&r<=t+o;if(e===n)return u<=r&&r<=c&&e-o<=l&&l<=e+o;if(c+=o,(u-=o)<=r&&r<=c&&(m+=o,(p-=o)<=l&&l<=m))if(c-u>m-p){if(!(t-i>o||i-t>o))return!0;if((r=(n-e)/(i-t)*(r-t)+e)-o<=l&&l<=r+o)return!0}else{if(!(e-n>o||n-e>o))return!0;if((l=(i-t)/(n-e)*(l-e)+t)-o<=r&&r<=l+o)return!0}return!1},cs:function(t,e,i,n,o,r,l,u,c,p,m,x){if(_.Zb(t,e,l,u,x,i,n)&&_.Zb(t,e,l,u,x,o,r))return _.Zb(t,e,l,u,x,p,m);var b=(t+i)/2,M=(e+n)/2,A=(i+o)/2,L=(n+r)/2,D=((n=(b+A)/2)+(A=(A+(o=(o+l)/2))/2))/2,I=((i=(M+L)/2)+(L=(L+(r=(r+u)/2))/2))/2;return _.cs(t,e,b,M,n,i,D,I,c,p,m,x)||_.cs(D,I,A,L,o,r,l,u,c,p,m,x)},bx:function(t,e,i,n,o,r,l,u,c){var p=(i+o)/2,m=(n+r)/2;return c.h((((t+i)/2+p)/2+(p+(o+l)/2)/2)/2,(((e+n)/2+m)/2+(m+(r+u)/2)/2)/2),c},Ny:function(t,e,i,n,o,r,l,u){var c=(i+o)/2,p=(n+r)/2;return yr(((t+i)/2+c)/2,((e+n)/2+p)/2,(c+(o+l)/2)/2,(p+(r+u)/2)/2)},Dl:function(t,e,i,n,o,r,l,u,c,p){if(_.Zb(t,e,l,u,c,i,n)&&_.Zb(t,e,l,u,c,o,r))ii(p,t,e,0,0),ii(p,l,u,0,0);else{var m=(t+i)/2,x=(e+n)/2,b=(i+o)/2,M=(n+r)/2,A=((n=(m+b)/2)+(b=(b+(o=(o+l)/2))/2))/2,L=((i=(x+M)/2)+(M=(M+(r=(r+u)/2))/2))/2;_.Dl(t,e,m,x,n,i,A,L,c,p),_.Dl(A,L,b,M,o,r,l,u,c,p)}return p},Qe:function(t,e,i,n,o,r,l,u,c,p){if(_.Zb(t,e,l,u,c,i,n)&&_.Zb(t,e,l,u,c,o,r))0===p.length&&(p.push(t),p.push(e)),p.push(l),p.push(u);else{var m=(t+i)/2,x=(e+n)/2,b=(i+o)/2,M=(n+r)/2,A=((n=(m+b)/2)+(b=(b+(o=(o+l)/2))/2))/2,L=((i=(x+M)/2)+(M=(M+(r=(r+u)/2))/2))/2;_.Qe(t,e,m,x,n,i,A,L,c,p),_.Qe(A,L,b,M,o,r,l,u,c,p)}return p},kv:function(t,e,i,n,o,r,l,u,c,p){if(_.Zb(t,e,o,r,p,i,n))return _.Zb(t,e,o,r,p,u,c);var m=(t+i)/2,x=(e+n)/2,b=(m+(i=(i+o)/2))/2,M=(x+(n=(n+r)/2))/2;return _.kv(t,e,m,x,b,M,l,u,c,p)||_.kv(b,M,i,n,o,r,l,u,c,p)},PA:function(t,e,i,n,o,r,l){return l.h(((t+i)/2+(i+o)/2)/2,((e+n)/2+(n+r)/2)/2),l},jv:function(t,e,i,n,o,r,l,u){if(_.Zb(t,e,o,r,l,i,n))ii(u,t,e,0,0),ii(u,o,r,0,0);else{var c=(t+i)/2,p=(e+n)/2,m=(c+(i=(i+o)/2))/2,x=(p+(n=(n+r)/2))/2;_.jv(t,e,c,p,m,x,l,u),_.jv(m,x,i,n,o,r,l,u)}return u},ep:function(t,e,i,n,o,r,l,u){if(_.Zb(t,e,o,r,l,i,n))0===u.length&&(u.push(t),u.push(e)),u.push(o),u.push(r);else{var c=(t+i)/2,p=(e+n)/2,m=(c+(i=(i+o)/2))/2,x=(p+(n=(n+r)/2))/2;_.ep(t,e,c,p,m,x,l,u),_.ep(m,x,i,n,o,r,l,u)}return u},Eo:function(t,e,i,n,o,r,l,u,c,p,m,x,b,M){if(_.Zb(t,e,l,u,b,i,n)&&_.Zb(t,e,l,u,b,o,r))return!(!_.Rl(t,e,l,u,c,p,m,x)||(b=(t-l)*(p-x)-(e-u)*(c-m),0===b)||(M.h(((t*u-e*l)*(c-m)-(t-l)*(c*x-p*m))/b,((t*u-e*l)*(p-x)-(e-u)*(c*x-p*m))/b),0));var A=(t+i)/2,L=(e+n)/2,D=(i+o)/2,I=(n+r)/2,z=((n=(A+D)/2)+(D=(D+(o=(o+l)/2))/2))/2,X=((i=(L+I)/2)+(I=(I+(r=(r+u)/2))/2))/2,V=1/0,Z=!1,J=0,ct=0;return _.Eo(t,e,A,L,n,i,z,X,c,p,m,x,b,M)&&(t=(M.x-c)*(M.x-c)+(M.y-p)*(M.y-p))<V&&(V=t,Z=!0,J=M.x,ct=M.y),_.Eo(z,X,D,I,o,r,l,u,c,p,m,x,b,M)&&(M.x-c)*(M.x-c)+(M.y-p)*(M.y-p)<V&&(Z=!0,J=M.x,ct=M.y),Z&&(M.x=J,M.y=ct),Z},Fo:function(t,e,i,n,o,r,l,u,c,p,m,x,b){var M=0;if(_.Zb(t,e,l,u,b,i,n)&&_.Zb(t,e,l,u,b,o,r)){if(0==(b=(t-l)*(p-x)-(e-u)*(c-m)))return M;var A=((t*u-e*l)*(c-m)-(t-l)*(c*x-p*m))/b,L=((t*u-e*l)*(p-x)-(e-u)*(c*x-p*m))/b;if(A>=m)return M;if((c>m?c-m:m-c)<(p>x?p-x:x-p)){if(e<u?(c=e,t=u):(c=u,t=e),L<c||L>t)return M}else if(t<l?(c=t,t=l):c=l,A<c||A>t)return M;0<b?M++:0>b&&M--}else{L=(e+n)/2;var D=(i+o)/2,I=(n+r)/2,z=((n=((A=(t+i)/2)+D)/2)+(D=(D+(o=(o+l)/2))/2))/2,X=((i=(L+I)/2)+(I=(I+(r=(r+u)/2))/2))/2;M+=_.Fo(t,e,A,L,n,i,z,X,c,p,m,x,b),M+=_.Fo(z,X,D,I,o,r,l,u,c,p,m,x,b)}return M},qh:function(t,e,i,n,o,r,l){return _.$(t,i)?(e<n?(i=e,e=n):i=n,r<i?(l.h(t,i),!1):r>e?(l.h(t,e),!1):(l.h(t,r),!0)):_.$(e,n)?(t<i?(n=t,t=i):n=i,o<n?(l.h(n,e),!1):o>t?(l.h(t,e),!1):(l.h(o,e),!0)):-5e-6>(o=((t-o)*(t-i)+(e-r)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(l.h(t,e),!1):1.000005<o?(l.h(i,n),!1):(l.h(t+o*(i-t),e+o*(n-e)),!0)},Ve:function(t,e,i,n,o,r,l,u,c){return _.B(t,i)&&_.B(e,n)?(c.h(t,e),!1):_.$(o,l)?_.$(t,i)?(_.qh(t,e,i,n,o,r,c),!1):_.qh(t,e,i,n,o,(n-e)/(i-t)*(o-t)+e,c):(u=(u-r)/(l-o),_.$(t,i)?(i=u*(t-o)+r,e<n?(o=e,e=n):o=n,i<o?(c.h(t,o),!1):i>e?(c.h(t,e),!1):(c.h(t,i),!0)):_.$(u,l=(n-e)/(i-t))?(_.qh(t,e,i,n,o,r,c),!1):(o=(l*t-u*o+r-e)/(l-u),_.$(l,0)?(t<i?(n=t,t=i):n=i,o<n?(c.h(n,e),!1):o>t?(c.h(t,e),!1):(c.h(o,e),!0)):_.qh(t,e,i,n,o,l*(o-t)+e,c)))},NA:function(t,e,i,n,o){return _.Ve(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,o)},LA:function(t,e,i,n,o,r,l,u,c,p){function m(D,I){var z=(D-t)*(D-t)+(I-e)*(I-e);z<x&&(x=z,c.h(D,I))}var x=1/0;m(c.x,c.y);var b=0,M=0,A=0,L=0;if(o<l?(b=o,M=l):(b=l,M=o),r<u?(A=o,L=l):(A=l,L=o),b=(M-b)/2+p,p=(L-A)/2+p,o=(o+l)/2,r=(r+u)/2,0===b||0===p)return c;if(.5>(i>t?i-t:t-i)){if(0>(b=1-(i-o)*(i-o)/(b*b)))return c;n=-p*(b=Math.sqrt(b))+r,m(i,p*b+r),m(i,n)}else{if(0>(b=(u=2*(i=(n-e)/(i-t))*(e-i*t)/(p*p)-2*i*r/(p*p)-2*o/(b*b))*u-4*(n=1/(b*b)+i*i/(p*p))*(2*i*t*r/(p*p)-2*e*r/(p*p)+r*r/(p*p)+o*o/(b*b)-1+(e-i*t)*(e-i*t)/(p*p))))return c;m(p=(-u+(b=Math.sqrt(b)))/(2*n),i*p-i*t+e),m(b=(-u-b)/(2*n),i*b-i*t+e)}return c},Ff:function(t,e,i,n,o,r,l,u,c){var p=1e21,m=t,x=e;if(_.Ve(t,e,t,n,o,r,l,u,c)){var b=(c.x-o)*(c.x-o)+(c.y-r)*(c.y-r);b<p&&(p=b,m=c.x,x=c.y)}return _.Ve(i,e,i,n,o,r,l,u,c)&&(b=(c.x-o)*(c.x-o)+(c.y-r)*(c.y-r))<p&&(p=b,m=c.x,x=c.y),_.Ve(t,e,i,e,o,r,l,u,c)&&(e=(c.x-o)*(c.x-o)+(c.y-r)*(c.y-r))<p&&(p=e,m=c.x,x=c.y),_.Ve(t,n,i,n,o,r,l,u,c)&&(t=(c.x-o)*(c.x-o)+(c.y-r)*(c.y-r))<p&&(p=t,m=c.x,x=c.y),c.h(m,x),1e21>p},us:function(t,e,i){return _.Gx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Gx:function(t,e,i,n,o,r,l,u){var c=t+i,p=e+n;return o===l?(r<u?(l=r,r=u):l=u,t<=o&&o<=c&&l<=p&&r>=e):r===u?(o<l?(u=o,o=l):u=l,e<=r&&r<=p&&u<=c&&o>=t):!!(Fn(t,e,i,n,o,r)||Fn(t,e,i,n,l,u)||_.Rl(t,e,c,e,o,r,l,u)||_.Rl(c,e,c,p,o,r,l,u)||_.Rl(c,p,t,p,o,r,l,u)||_.Rl(t,p,t,e,o,r,l,u))},Rl:function(t,e,i,n,o,r,l,u){return t===i&&e===n&&o===l&&r===u?t===o&&e===r:0>=_.Fl(t,e,i,n,o,r)*_.Fl(t,e,i,n,l,u)&&0>=_.Fl(o,r,l,u,t,e)*_.Fl(o,r,l,u,i,n)},Fl:function(t,e,i,n,o,r){return i-=t,0==(r=(t=o-t)*(n-=e)-(e=r-e)*i)&&0<(r=t*i+e*n)&&0>(r=(t-i)*i+(e-n)*n)&&(r=0),r},bp:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},kx:function(t,e,i,n,o,r){var l=Math.PI;r||(n*=l/180,o*=l/180);var u=n>o?-1:1;r=[];var c=l/2,p=n;if(1e-5>(n=Math.min(2*l,Math.abs(o-n))))return c=p+u*Math.min(n,c),u=t+i*Math.cos(p),p=e+i*Math.sin(p),t+=i*Math.cos(c),e+=i*Math.sin(c),r.push([u,p,i=(u+t)/2,c=(p+e)/2,i,c,t,e]),r;for(;1e-5<n;)o=p+u*Math.min(n,c),r.push(_.Wy(i,p,o,t,e)),n-=Math.abs(o-p),p=o;return r},Wy:function(t,e,i,n,o){var r=(i-e)/2,l=t*Math.cos(r),u=t*Math.sin(r),c=-u,p=l*l+c*c,m=p+l*l+c*u;return u=l-(p=4/3*(Math.sqrt(2*p*m)-m)/(l*u-c*l))*c,c=-(l=c+p*l),p=r+e,r=Math.cos(p),p=Math.sin(p),[n+t*Math.cos(e),o+t*Math.sin(e),n+u*r-l*p,o+u*p+l*r,n+u*r-c*p,o+u*p+c*r,n+t*Math.cos(i),o+t*Math.sin(i)]},No:function(t,e,i,n,o,r,l){var u=i=Math.floor((t-i)/o)*o+i;return i+o-t<o/2&&(u=i+o),t=n=Math.floor((e-n)/r)*r+n,n+r-e<r/2&&(t=n+r),l.h(u,t),l},wx:function(t,e){var n,i=Math.max(t,e);t=Math.min(t,e);do{e=i%t,i=n=t,t=e}while(0<e);return n},az:function(t,e,i,n){var o=0>i,r=0>n;if(t<e)var l=1,u=0;else l=0,u=1;var c=0===l?t:e,p=0===l?i:n;return(0===l?o:r)&&(p=-p),i=0===(l=u)?i:n,(0===l?o:r)&&(i=-i),_.bz(c,0===l?t:e,p,i,0,0)},bz:function(t,e,i,n,o,r){if(0<n)if(0<i){o=t*t,t*=i;var l=e*n,u=-(r=e*e)+l,c=-r+Math.sqrt(t*t+l*l);e=u;for(var p=0;9999999999>p&&(e=.5*(u+c))!==u&&e!==c;++p){var m=t/(e+o),x=l/(e+r);if(0<(m=m*m+x*x-1))u=e;else{if(!(0>m))break;c=e}}i=o*i/(e+o)-i,n=r*n/(e+r)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else(r=t*i)<(n=t*t-e*e)?(n=r/n,r=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+r*r)):i=Math.abs(i-t);return i},Ze:new Ht,um:new Ht,Mf:new Ht,Nf:0,vm:100};function lt(t){ee(this),this.l=2,void 0===t&&(t=lt.o),this.na=t,this.Ec=this.Dc=this.pd=this.od=0,t===lt.o?this.ee=new ot:(null===lt.V&&(lt.V=(new ot).freeze()),this.ee=lt.V),this.aq=this.ee.Ja,this.Ip=(new $).freeze(),this.ym=this.sk=null,this.zm=NaN,this.fg=w,this.gg=Y,this.Qk=this.Rk=NaN,this.Uf=Oe}function Pg(t,e){return t.type===lt.j&&e.type===lt.o&&!!(1===e.figures.count&&(e=e.figures.M(0),1===e.segments.count&&_.B(t.startX,e.startX)&&_.B(t.startY,e.startY)&&(e=e.segments.M(0),e.type===we&&_.B(t.endX,e.endX)&&_.B(t.endY,e.endY))))}function Tg(t,e,i){switch(t.type){case lt.j:case lt.u:case lt.F:i?e.h(t.od,t.pd,0,0):ii(e,t.od,t.pd,0,0),ii(e,t.Dc,t.Ec,0,0);break;case lt.o:var n=t.figures;t=n.s,n=n.length;for(var o=0;o<n;o++){var r=t[o];i&&0===o?e.h(r.startX,r.startY,0,0):ii(e,r.startX,r.startY,0,0);for(var l=r.segments.s,u=l.length,c=r.startX,p=r.startY,m=0;m<u;m++){var x=l[m];switch(x.type){case we:case Wn:ii(e,c=x.endX,p=x.endY,0,0);break;case vn:_.Dl(c,p,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,e),c=x.endX,p=x.endY;break;case vo:_.jv(c,p,x.point1X,x.point1Y,x.endX,x.endY,.5,e),c=x.endX,p=x.endY;break;case Ve:case oo:var b=x.type===Ve?Qo(x,r):Ss(x,r,c,p),M=b.length;if(0===M){ii(e,c=x.type===Ve?x.centerX:x.endX,p=x.type===Ve?x.centerY:x.endY,0,0);break}x=null;for(var A=0;A<M;A++)_.Dl((x=b[A])[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],.5,e);null!==x&&(c=x[6],p=x[7]);break;default:it("Unknown Segment type: "+x.type)}}}break;default:it("Unknown Geometry type: "+t.type)}}function zd(t,e,i,n,o){var r=e.x;e=e.y;for(var c,p,m,x,l=t.bounds.x-20,u=0,b=t.figures.s,M=b.length,A=0;A<M;A++){var L=b[A],D=!L.isEvenOdd;if(L.isFilled){if(n&&L.ca(r,e,i))return!0;for(var I=L.segments,z=c=L.startX,X=p=L.startY,V=I.s,Z=0;Z<=I.length;Z++){var J=void 0;if(Z!==I.length){var ct=(J=V[Z]).type;t=J.endX,x=J.endY}else ct=we,t=z,x=X;switch(ct){case Wn:if(z=Mu(r,e,l,e,c,p,z,X),isNaN(z))return!0;u+=z,z=t,X=x;break;case we:if(c=Mu(r,e,l,e,c,p,t,x),isNaN(c))return!0;u+=c;break;case vn:u+=m=_.Fo(c,p,J.point1X,J.point1Y,J.point2X,J.point2Y,t,x,l,e,r,e,.5);break;case vo:u+=m=_.Fo(c,p,(c+2*J.point1X)/3,(p+2*J.point1Y)/3,(2*J.point1X+t)/3,(2*J.point1Y+x)/3,t,x,l,e,r,e,.5);break;case Ve:case oo:var mt=(ct=J.type===Ve?Qo(J,L):Ss(J,L,c,p)).length;if(0===mt){if(c=Mu(r,e,l,e,c,p,J.type===Ve?J.centerX:J.endX,J.type===Ve?J.centerY:J.endY),isNaN(c))return!0;u+=c;break}J=null;for(var ft=0;ft<mt;ft++){if(J=ct[ft],0===ft){if(m=Mu(r,e,l,e,c,p,J[0],J[1]),isNaN(m))return!0;u+=m}u+=m=_.Fo(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],l,e,r,e,.5)}null!==J&&(t=J[6],x=J[7]);break;default:it("Unknown Segment type: "+J.type)}c=t,p=x}if(D){if(0!==u)return!0}else if(u%2!=0)return!0;u=0}else if(L.ca(r,e,o?i:i+2))return!0}return!1}function Mu(t,e,i,n,o,r,l,u){if(_.Zb(o,r,l,u,.05,t,e))return NaN;var c=(t-i)*(r-u);if(0===c)return 0;var p=((t*n-e*i)*(o-l)-(t-i)*(o*u-r*l))/c;if(e=(t*n-e*i)*(r-u)/c,p>=t)return 0;if((o>l?o-l:l-o)<(r>u?r-u:u-r)){if(r<u){if(e<r||e>u)return 0}else if(e<u||e>r)return 0}else if(o<l){if(p<o||p>l)return 0}else if(p<l||p>o)return 0;return 0<c?1:-1}function Lg(t,e,i,n){for(var o=(t=t.figures.s).length,r=0;r<o;r++)if(t[r].ca(e,i,n))return!0;return!1}function Ng(t){if(null===t.sk){var e=t.sk=[],i=t.ym=[],n=[],o=[];if(t.type===lt.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),o.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(o);else if(t.type===lt.u)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),i.push(o);else if(t.type===lt.F){var r=new oi;r.startX=t.endX,r.startY=(t.startY+t.endY)/2;var l=new _t(Ve);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,r.add(l),0===(o=(t=Qo(l,r)).length))n.push(l.centerX),n.push(l.centerY);else{l=r.startX,r=r.startY;for(var u=0;u<o;u++){var c=t[u];_.Qe(l,r,c[2],c[3],c[4],c[5],c[6],c[7],.5,n),l=c[6],r=c[7]}}e.push(n),i.push(Rd(n))}else for(t=t.figures.iterator;t.next();){(n=[]).push((o=t.value).startX),n.push(o.startY),u=l=o.startX,c=r=o.startY;for(var p=o.segments.s,m=p.length,x=0;x<m;x++){var b=p[x];switch(b.type){case Wn:4<=n.length&&(e.push(n),i.push(Rd(n))),(n=[]).push(b.endX),n.push(b.endY),u=l=b.endX,c=r=b.endY;break;case we:n.push(b.endX),n.push(b.endY),l=b.endX,r=b.endY;break;case vn:_.Qe(l,r,b.point1X,b.point1Y,b.point2X,b.point2Y,b.endX,b.endY,.5,n),l=b.endX,r=b.endY;break;case vo:_.ep(l,r,b.point1X,b.point1Y,b.endX,b.endY,.5,n),l=b.endX,r=b.endY;break;case Ve:var M=Qo(b,o),A=M.length;if(0===A){n.push(b.centerX),n.push(b.centerY),l=b.centerX,r=b.centerY;break}for(var L=0;L<A;L++){var D=M[L];_.Qe(l,r,D[2],D[3],D[4],D[5],D[6],D[7],.5,n),l=D[6],r=D[7]}break;case oo:if(M=Ss(b,o,l,r),L=b.endX,D=b.endY,0===(A=M.length)){n.push(L),n.push(D),l=L,r=D;break}for(L=0;L<A;L++)_.Qe(l,r,(D=M[L])[2],D[3],D[4],D[5],D[6],D[7],.5,n),l=D[6],r=D[7];break;default:it("Segment not of valid type: "+b.type)}b.isClosed&&(n.push(u),n.push(c))}4<=n.length&&(e.push(n),i.push(Rd(n)))}}}function Rd(t){for(var e=[],i=0,n=0,o=t.length,r=0;r<o;r+=2){var l=t[r],u=t[r+1];0!==r&&e.push(Math.sqrt(mo(i,n,l,u))),i=l,n=u}return e}function oi(t,e,i,n,o){ee(this),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!1),this.l=2|(i?4:0)|(n?8:0)|(o?16:0),this.od=void 0!==t?t:0,this.pd=void 0!==e?e:0,this.pl=new ot,this.sr=this.pl.Ja,this.gw=null}function _t(t,e,i,n,o,r,l,u){ee(this),void 0===t&&(t=we),this.na=t,this.l=2,this.Dc=void 0!==e?e:0,this.Ec=void 0!==i?i:0,void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===l&&(l=0),t===oo?(0>(t=r%360)&&(t+=360),this.Ne=t,this.Vh=0,this.Wh=Math.max(n,0),this.Pg=Math.max(o,0),"boolean"==typeof l?l&&(this.isLargeArc=!0):"number"==typeof l&&l&&(this.isLargeArc=!0),u&&(this.isClockwiseArc=!0)):(this.Ne=n,this.Vh=o,t===Ve&&(r=Math.max(r,0)),this.Wh=r,"number"==typeof l?(t===Ve&&(l=Math.max(l,0)),this.Pg=l):this.Pg=0),this.ae=null}function Qo(t,e){if(null!==t.ae&&!1===e._isInvalidBounds)return t.ae;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.ae=[],t.ae;e=t.Ne;var o=t.Vh,r=_.kx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=zt.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),lt.Ha(r,l),zt.free(l)}for(i=r.length,n=0;n<i;n++)(l=r[n])[0]+=e,l[1]+=o,l[2]+=e,l[3]+=o,l[4]+=e,l[5]+=o,l[6]+=e,l[7]+=o;return t.ae=r,t.ae}function Ss(t,e,i,n){function o(L,D,I,z){return(L*z<D*I?-1:1)*Math.acos((L*I+D*z)/(Math.sqrt(L*L+D*D)*Math.sqrt(I*I+z*z)))}if(null!==t.ae&&!1===e._isInvalidBounds)return t.ae;if(0===t.radiusX||0===t.radiusY)return t.ae=[],t.ae;var r=t.Pg;0===(e=t.Wh)&&(e=1e-4),0===r&&(r=1e-4);var l=Math.PI/180*t.Ne,u=t.isLargeArc,c=t.isClockwiseArc,p=t.Dc,m=t.Ec,x=Math.cos(l),b=Math.sin(l),M=x*(i-p)/2+b*(n-m)/2,A=M*M/(e*e)+(l=-b*(i-p)/2+x*(n-m)/2)*l/(r*r);return 1<A&&(e*=Math.sqrt(A),r*=Math.sqrt(A)),A=(u===c?-1:1)*Math.sqrt((e*e*r*r-e*e*l*l-r*r*M*M)/(e*e*l*l+r*r*M*M)),isNaN(A)&&(A=0),u=A*e*l/r,A=A*-r*M/e,isNaN(u)&&(u=0),isNaN(A)&&(A=0),i=(i+p)/2+x*u-b*A,n=(n+m)/2+b*u+x*A,m=o(1,0,(M-u)/e,(l-A)/r),l=o(x=(M-u)/e,p=(l-A)/r,M=(-M-u)/e,u=(-l-A)/r),-1>=(M=(x*M+p*u)/(Math.sqrt(x*x+p*p)*Math.sqrt(M*M+u*u)))?l=Math.PI:1<=M&&(l=0),!c&&0<l&&(l-=2*Math.PI),c&&0>l&&(l+=2*Math.PI),c=e>r?1:e/r,M=e>r?r/e:1,e=_.kx(0,0,e>r?e:r,m,m+l,!0),(r=zt.alloc()).reset(),r.translate(i,n),r.rotate(t.Ne,0,0),r.scale(c,M),lt.Ha(e,r),zt.free(r),t.ae=e,t.ae}_.za=_.BA,lt.prototype.copy=function(){var t=new lt;if(t.l=-2&this.l,t.na=this.na,t.od=this.od,t.pd=this.pd,t.Dc=this.Dc,t.Ec=this.Ec,this.na===lt.o){for(var e=this.ee.s,i=t.ee,n=0;n<e.length;n++)i.add(e[n].copy());t.ee=i}else t.ee=this.ee;return t.aq=this.aq,t.Ip.assign(this.Ip),t.sk=this.sk,t.ym=this.ym,t.zm=this.zm,t.fg=this.fg.J(),t.gg=this.gg.J(),t.Rk=this.Rk,t.Qk=this.Qk,t.Uf=this.Uf,t},lt.prototype.ja=function(){return this.freeze(),Object.freeze(this),this},lt.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==lt.o)return this;var t=this.figures;t.freeze();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].freeze();return this},lt.prototype.ka=function(){if(Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==lt.o)return this;var t=this.figures;t.ka();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].ka();return this},lt.prototype.Xa=function(t){if(!(t instanceof lt))return!1;if(this.type!==t.type)return this.type===lt.j&&t.type===lt.o?Pg(this,t):t.type===lt.j&&this.type===lt.o&&Pg(t,this);if(this.type===lt.o){var e=this.figures.s,i=e.length;if(i!==(t=t.figures.s).length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0}return _.B(this.startX,t.startX)&&_.B(this.startY,t.startY)&&_.B(this.endX,t.endX)&&_.B(this.endY,t.endY)},lt.ia=function(t){return t.toString()},lt.prototype.qb=function(t){t.classType===lt&&(this.type=t)},lt.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case lt.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case lt.u:var e=new $(this.startX,this.startY,0,0);return e.Lv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case lt.F:if((e=new $(this.startX,this.startY,0,0)).Lv(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case lt.o:e="";for(var n=(i=this.figures.s).length,o=0;o<n;o++){var r=i[o];0<o&&(e+=" x "),r.isFilled&&(e+="F "),e+=r.toString(t)}return e;default:return this.type.toString()}},lt.nb=function(t){for(var e=(t=t.split(/[Xx]/)).length,i="",n=0;n<e;n++){var o=t[n];i=null!==o.match(/[Ff]/)?0===n?i+o:i+"X"+(" "===o[0]?"":" ")+o:i+(0===n?"":"X ")+"F"+(" "===o[0]?"":" ")+o}return i},lt.parse=function(t,e){function i(){return L>=V-1||null!==p[L+1].match(Z)}function n(){return L++,p[L]}function o(Lt){var Ct=parseFloat(n()),Wt=parseFloat(n());D===D.toLowerCase()&&(Ct=X.x+Ct,Wt=X.y+Wt),Lt.h(Ct,Wt)}function r(){return o(X),X}function l(){return o(z),z}function u(){var Lt=I.toLowerCase();return"c"!==Lt&&"s"!==Lt&&"q"!==Lt&&"t"!==Lt?new B(X.x,X.y):new B(2*X.x-z.x,2*X.y-z.y)}void 0===e&&(e=!1);var c=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,p=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(c,"$1 $2")).replace(c,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<p.length;t++){var m=p[t];if(null!==m.match(/(\.[0-9]*)(\.)/gm)){c=te();for(var x="",b=!1,M=0;M<m.length;M++){var A=m[M];"."!==A||b?"."===A?(c.push(x),x="."):x+=A:(b=!0,x+=A)}for(c.push(x),p.splice(t,1),m=0;m<c.length;m++)p.splice(t+m,0,c[m]);t+=c.length-1,$t(c)}}var L=-1,D="",I="";c=new B(0,0);var z=new B(0,0),X=new B(0,0),V=p.length;t=I0(null),b=x=m=!1,M=!0,A=null;for(var Z=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(L>=V-1);)if(I=D,""!==(D=n()))switch(D.toUpperCase()){case"X":M=!0,x=m=!1;break;case"M":for(A=r(),null===t.nc||!0===M?(ml(t,A.x,A.y,m,!x,b),M=!1):t.moveTo(A.x,A.y),c.assign(X);!i();)A=r(),t.lineTo(A.x,A.y);break;case"L":for(;!i();)A=r(),t.lineTo(A.x,A.y);break;case"H":for(;!i();)X.h((D===D.toLowerCase()?X.x:0)+parseFloat(n()),X.y),t.lineTo(X.x,X.y);break;case"V":for(;!i();)X.h(X.x,(D===D.toLowerCase()?X.y:0)+parseFloat(n())),t.lineTo(X.x,X.y);break;case"C":for(;!i();){o(A=new B);var J=l(),ct=r();Fr(t,A.x,A.y,J.x,J.y,ct.x,ct.y)}break;case"S":for(;!i();)A=u(),J=l(),ct=r(),Fr(t,A.x,A.y,J.x,J.y,ct.x,ct.y);break;case"Q":for(;!i();)A=l(),J=r(),Cc(t,A.x,A.y,J.x,J.y);break;case"T":for(;!i();)A=u(),z.assign(A),J=r(),Cc(t,A.x,A.y,J.x,J.y),z.assign(J);break;case"B":for(;!i();){A=parseFloat(n()),J=parseFloat(n()),ct=parseFloat(n());var mt=parseFloat(n()),ft=parseFloat(n()),at=ft,Q=!1;i()||(at=parseFloat(n()),i()||(Q=0!==parseFloat(n()))),D===D.toLowerCase()&&(ct+=X.x,mt+=X.y),t.arcTo(A,J,ct,mt,ft,at,Q)}break;case"A":for(;!i();)A=Math.abs(parseFloat(n())),J=Math.abs(parseFloat(n())),ct=parseFloat(n()),ft=mt=!1,Q=at=0,1===(at=n()).length?(mt=!!parseFloat(at),ft=!!parseFloat(n()),at=parseFloat(n())):2===at.length?(mt=!!parseFloat(at[0]),ft=!!parseFloat(at[1]),at=parseFloat(n())):(mt=!!parseFloat(at[0]),ft=!!parseFloat(at[1]),at=parseFloat(at.slice(2))),Q=parseFloat(n()),D===D.toLowerCase()&&(at=X.x+at,Q=X.y+Q),X.h(at,Q),$v(t,A,J,ct,mt,ft,at,Q);break;case"Z":qv(t),X.assign(c);break;case"F":for(A="",J=1;p[L+J];)if("0"===p[L+J])b=!0,J++;else if(null!==p[L+J].match(/[Uu]/))J++;else{if(null!==p[L+J].match(Z)){A=p[L+J];break}J++}A.match(/[Mm]/)?m=!0:0<t.nc.segments.length&&(t.nc.isFilled=!0);break;case"U":for(A="",J=1;p[L+J];)if(null!==p[L+J].match(/[Ff]/))J++;else{if(null!==p[L+J].match(Z)){A=p[L+J];break}J++}A.match(/[Mm]/)?x=!0:t.nc.isShadowed=!1}if(c=t.os,Ac=t,e)for(e=c.figures.iterator;e.next();)e.value.isFilled=!0;return c},lt.Ha=function(t,e){for(var i=t.length,n=B.alloc(),o=0;o<i;o++){var r=t[o];n.x=r[0],n.y=r[1],e.Ga(n),r[0]=n.x,r[1]=n.y,n.x=r[2],n.y=r[3],e.Ga(n),r[2]=n.x,r[3]=n.y,n.x=r[4],n.y=r[5],e.Ga(n),r[4]=n.x,r[5]=n.y,n.x=r[6],n.y=r[7],e.Ga(n),r[6]=n.x,r[7]=n.y}B.free(n)},lt.prototype.$u=function(){if(this._isInvalidBounds)return!0;if(this.type===lt.o){if(this.aq!==this.figures.Ja)return!0;for(var t=this.figures.s,e=t.length,i=0;i<e;i++)if(t[i].$u())return!0}return!1},lt.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.ym=this.sk=null,this.zm=NaN,this.type===lt.o){this.aq=this.figures.Ja;for(var t=this.figures.s,e=t.length,i=0;i<e;i++){var n=t[i];n._isInvalidBounds=!1;var o=n.segments;n.sr=o.Ja,o=(n=o.s).length;for(var r=0;r<o;r++){var l=n[r];l._isInvalidBounds=!1,l.ae=null}}}(t=this.Ip).ka(),isNaN(this.Rk)||isNaN(this.Qk)?t.h(0,0,0,0):t.h(0,0,this.Rk,this.Qk),Tg(this,t,!1),ii(t,0,0,0,0),t.freeze()},lt.prototype.jx=function(){var t=new $;return Tg(this,t,!0),t},lt.prototype.normalize=function(){this._isFrozen&&Rt(this);var t=this.jx();return this.offset(-t.x,-t.y),new B(-t.x,-t.y)},lt.prototype.offset=function(t,e){return this._isFrozen&&Rt(this),this.transform(1,0,0,1,t,e),this},lt.prototype.scale=function(t,e){return this._isFrozen&&Rt(this),this.transform(t,0,0,e,0,0),this},lt.prototype.rotate=function(t,e,i){this._isFrozen&&Rt(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=zt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),zt.free(n),this},(v=lt.prototype).transform=function(t,e,i,n,o,r){switch(this.type){case lt.j:case lt.u:case lt.F:var l=this.od,u=this.pd;this.od=l*t+u*i+o,this.pd=l*e+u*n+r,this.Dc=(l=this.Dc)*t+(u=this.Ec)*i+o,this.Ec=l*e+u*n+r;break;case lt.o:for(var c=this.figures.s,p=c.length,m=0;m<p;m++){var x=c[m];x.startX=(l=x.startX)*t+(u=x.startY)*i+o,x.startY=l*e+u*n+r;for(var b=(x=x.segments.s).length,M=0;M<b;M++){var A=x[M];switch(A.type){case we:case Wn:A.endX=(l=A.endX)*t+(u=A.endY)*i+o,A.endY=l*e+u*n+r;break;case vn:A.point1X=(l=A.point1X)*t+(u=A.point1Y)*i+o,A.point1Y=l*e+u*n+r,A.point2X=(l=A.point2X)*t+(u=A.point2Y)*i+o,A.point2Y=l*e+u*n+r,A.endX=(l=A.endX)*t+(u=A.endY)*i+o,A.endY=l*e+u*n+r;break;case vo:A.point1X=(l=A.point1X)*t+(u=A.point1Y)*i+o,A.point1Y=l*e+u*n+r,A.endX=(l=A.endX)*t+(u=A.endY)*i+o,A.endY=l*e+u*n+r;break;case Ve:A.centerX=(l=A.centerX)*t+(u=A.centerY)*i+o,A.centerY=l*e+u*n+r,0!==e&&(0>(l=180*Math.atan2(e,t)/Math.PI)&&(l+=360),A.startAngle+=l),0>t&&(A.startAngle=180-A.startAngle,A.sweepAngle=-A.sweepAngle),0>n&&(A.startAngle=-A.startAngle,A.sweepAngle=-A.sweepAngle),A.radiusX*=Math.sqrt(t*t+i*i),void 0!==A.radiusY&&(A.radiusY*=Math.sqrt(e*e+n*n));break;case oo:if(A.endX=(l=A.endX)*t+(u=A.endY)*i+o,A.endY=l*e+u*n+r,0===A.radiusX||0===A.radiusY)break;0!==e&&(0>(l=180*Math.atan2(e,t)/Math.PI)&&(l+=360),A.xAxisRotation+=l),0>t&&(A.xAxisRotation=180-A.xAxisRotation,A.isClockwiseArc=!A.isClockwiseArc),0>n&&(A.xAxisRotation=-A.xAxisRotation,A.isClockwiseArc=!A.isClockwiseArc),A.radiusX*=Math.sqrt(t*t+i*i),A.radiusY*=Math.sqrt(e*e+n*n);break;default:it("Unknown Segment type: "+A.type)}}}}return this._isInvalidBounds=!0,this},v.ca=function(t,e){void 0===e&&(e=0);var i=this.od,n=this.pd,o=this.Dc,r=this.Ec;switch(this.type){case lt.j:return _.Zb(i,n,o,r,e,t.x,t.y);case lt.u:var l=$.allocAt(Math.min(i,o)-e,Math.min(n,r)-e,Math.abs(o-i)+2*e,Math.abs(r-n)+2*e);return t=l.ca(t),$.free(l),t;case lt.F:l=Math.min(i,o)-e;var u=Math.min(n,r)-e;return i=(Math.abs(o-i)+2*e)/2,e=(Math.abs(r-n)+2*e)/2,!(0>=i||0>=e)&&1>=(l=t.x-(l+i))*l/(i*i)+(u=t.y-(u+e))*u/(e*e);case lt.o:return zd(this,t,e,!0,!1);default:return!1}},v.Qu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new B),this.type===lt.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,o=i.length,r=this.flattenedTotalLength*t,l=0,u=0;u<o;u++){var c=n[u],p=c.length;for(t=0;t<p;t++){var m=c[t];if(l+m>=r)return n=r-l,e.h((u=(i=i[u])[2*t])+(i[2*t+2]-u)*(n=0===m?0:n/m),(o=i[2*t+1])+(i[2*t+3]-o)*n),e;l+=m}}return e},v.xx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===lt.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,o=this.flattenedTotalLength*t,r=0,l=0;l<n;l++){var u=i[l],c=u.length;for(t=0;t<c;t++){var p=u[t];if(r+p>=o)return e=(o=e[l])[2*t],i=o[2*t+1],n=o[2*t+2],t=o[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;r+=p}}return NaN},v.Ru=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===lt.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,o=i.length,r=this.flattenedTotalLength*t,l=0,u=0;u<o;u++){var c=n[u],p=c.length;for(t=0;t<p;t++){var m=c[t];if(l+m>=r)return n=r-l,n=0===m?0:n/m,i=(m=i[u])[2*t],u=m[2*t+1],o=m[2*t+2],t=m[2*t+3],e[0]=i+(o-i)*n,e[1]=u+(t-u)*n,e[2]=1>Math.abs(o-i)&&1>Math.abs(t-u)?0:1>Math.abs(o-i)?0<=t-u?90:270:1>Math.abs(t-u)?0<=o-i?0:180:180*Math.atan2(t-u,o-i)/Math.PI,e;l+=m}}return e},v.yx=function(t){if(this.type===lt.j){var e=this.startX,i=this.startY,n=this.endX,o=this.endY;if(e!==n||i!==o){var r=t.x;if(t=t.y,e===n){if(i<o){var l=i;n=o}else l=o,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===o)return e<n?l=e:(l=n,n=e),r<=l?l===e?0:1:r>=n?n===e?0:1:Math.abs(r-e)/(n-l);l=(n-e)*(n-e)+(o-i)*(o-i);var u=B.alloc();return _.qh(e,i,n,o,r,t,u),t=u.x,r=u.y,B.free(u),Math.sqrt(((t-e)*(t-e)+(r-i)*(r-i))/l)}}else{if(this.type!==lt.u){e=this.flattenedSegments,i=this.flattenedLengths,r=this.flattenedTotalLength,n=B.alloc(),o=1/0,u=l=0,c=e.length;for(var m=p=0,x=0;x<c;x++)for(var b=e[x],M=i[x],A=b.length,L=0;L<A;L+=2){var D=b[L],I=b[L+1];if(0!==L){_.qh(p,m,D,I,t.x,t.y,n);var z=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);z<o&&(o=z,l=u,l+=Math.sqrt((n.x-p)*(n.x-p)+(n.y-m)*(n.y-m))),u+=M[(L-2)/2]}p=D,m=I}return B.free(n),0>(t=l/r)?0:1<t?1:t}u=this.startY;var c=this.endX;if(o=this.endY,(l=this.startX)!==c||u!==o){r=2*(e=c-l)+2*(i=o-u),n=t.x,t=t.y,n=Math.min(Math.max(n,l),c),t=Math.min(Math.max(t,u),o),l=Math.abs(n-l),c=Math.abs(n-c),u=Math.abs(t-u),o=Math.abs(t-o);var p=Math.min(l,c,u,o);if(p===u)return n/r;if(p===c)return(e+t)/r;if(p===o)return(2*e+i-n)/r;if(p===l)return(2*e+2*i-t)/r}}return 0},v.add=function(t){return this.ee.add(t),this},v.pm=function(t,e,i,n,o,r,l,u){return this._isFrozen&&Rt(this),this.fg=new f(t,e,o,r).freeze(),this.gg=new f(i,n,l,u).freeze(),this},Ot.Object.defineProperties(lt.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},flattenedSegments:{get:function(){return Ng(this),this.sk}},flattenedLengths:{get:function(){return Ng(this),this.ym}},flattenedTotalLength:{get:function(){var t=this.zm;if(isNaN(t)){if(this.type===lt.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===lt.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var i=(e=this.flattenedLengths).length,n=t=0;n<i;n++)for(var o=e[n],r=o.length,l=0;l<r;l++)t+=o[l];this.zm=t}return t}},type:{get:function(){return this.na},set:function(t){this.na!==t&&(this._isFrozen&&Rt(this,t),this.na=t,t===lt.o?this.ee=new ot:(null===lt.V&&(lt.V=(new ot).freeze()),this.ee=lt.V),this._isInvalidBounds=!0)}},startX:{get:function(){return this.od},set:function(t){this.od!==t&&(this._isFrozen&&Rt(this,t),this.od=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this._isFrozen&&Rt(this,t),this.pd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.Dc},set:function(t){this.Dc!==t&&(this._isFrozen&&Rt(this,t),this.Dc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.Ec},set:function(t){this.Ec!==t&&(this._isFrozen&&Rt(this,t),this.Ec=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.ee},set:function(t){this.ee!==t&&(this._isFrozen&&Rt(this,t),this.ee=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.fg},set:function(t){this._isFrozen&&Rt(this,t),this.fg=t.J()}},spot2:{get:function(){return this.gg},set:function(t){this._isFrozen&&Rt(this,t),this.gg=t.J()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this._isFrozen&&Rt(this,t),this.Uf=t}},bounds:{get:function(){return this.$u()&&this.computeBounds(),this.Ip}}}),lt.prototype.setSpots=lt.prototype.pm,lt.prototype.add=lt.prototype.add,lt.prototype.getFractionForPoint=lt.prototype.yx,lt.prototype.getPointAndAngleAlongPath=lt.prototype.Ru,lt.prototype.getAngleAlongPath=lt.prototype.xx,lt.prototype.getPointAlongPath=lt.prototype.Qu,lt.prototype.containsPoint=lt.prototype.ca,lt.prototype.transform=lt.prototype.transform,lt.prototype.rotate=lt.prototype.rotate,lt.prototype.scale=lt.prototype.scale,lt.prototype.offset=lt.prototype.offset,lt.prototype.normalize=lt.prototype.normalize,lt.prototype.computeBoundsWithoutOrigin=lt.prototype.jx,lt.prototype.equalsApprox=lt.prototype.Xa,lt.className="Geometry",lt.j=new ut(lt,"Line",0),lt.u=new ut(lt,"Rectangle",1),lt.F=new ut(lt,"Ellipse",2),lt.o=new ut(lt,"Path",3),lt.V=null,lt.hb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",lt.className="Geometry",lt.stringify=lt.ia,lt.fillPath=lt.nb,lt.parse=lt.parse,lt.Line=lt.j,lt.Rectangle=lt.u,lt.Ellipse=lt.F,lt.Path=lt.o,oi.prototype.copy=function(){var t=new oi;t.l=-2&this.l,t.od=this.od,t.pd=this.pd;for(var e=this.pl.s,i=e.length,n=t.pl,o=0;o<i;o++){var r=e[o].copy();n.add(r)}return t.sr=this.sr,t.gw=this.gw,t},(v=oi.prototype).Xa=function(t){if(!(t instanceof oi&&_.B(this.startX,t.startX)&&_.B(this.startY,t.startY)))return!1;var e=this.segments.s,i=e.length;if(i!==(t=t.segments.s).length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0},v.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.s,n=i.length,o=0;o<n;o++)e+=" "+i[o].toString(t);return e},v.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},v.ka=function(){this._isFrozen=!1;var t=this.segments;t.ka();for(var e=(t=t.s).length,i=0;i<e;i++)t[i].ka();return this},v.$u=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.sr!==t.Ja)return!0;for(var e=(t=t.s).length,i=0;i<e;i++)if(t[i]._isInvalidBounds)return!0;return!1},v.add=function(t){return this.pl.add(t),this},v.ca=function(t,e,i){for(var n=this.startX,o=this.startY,r=n,l=o,u=this.segments.s,c=u.length,p=0;p<c;p++){var m=u[p];switch(m.type){case Wn:r=m.endX,l=m.endY,n=m.endX,o=m.endY;break;case we:if(_.Zb(n,o,m.endX,m.endY,i,t,e))return!0;n=m.endX,o=m.endY;break;case vn:if(_.cs(n,o,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,t,e,i))return!0;n=m.endX,o=m.endY;break;case vo:if(_.kv(n,o,m.point1X,m.point1Y,m.endX,m.endY,.5,t,e,i))return!0;n=m.endX,o=m.endY;break;case Ve:case oo:var x=m.type===Ve?Qo(m,this):Ss(m,this,n,o),b=x.length,M=m.type===Ve?m.centerX:m.endX,A=m.type===Ve?m.centerY:m.endY;if(0===b){if(_.Zb(n,o,M,A,i,t,e))return!0;n=M,o=A;break}for(M=null,A=0;A<b;A++)if(M=x[A],0===A&&_.Zb(n,o,M[0],M[1],i,t,e)||_.cs(M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],.5,t,e,i))return!0;null!==M&&(n=M[6],o=M[7]);break;default:it("Unknown Segment type: "+m.type)}if(m.isClosed&&(n!==r||o!==l)&&_.Zb(n,o,r,l,i,t,e))return!0}return!1},Ot.Object.defineProperties(oi.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},isFilled:{get:function(){return 0!=(4&this.l)},set:function(t){this._isFrozen&&Rt(this,t),this.l=t?4|this.l:-5&this.l}},isShadowed:{get:function(){return 0!=(8&this.l)},set:function(t){this._isFrozen&&Rt(this,t),this.l=t?8|this.l:-9&this.l}},isEvenOdd:{get:function(){return 0!=(16&this.l)},set:function(t){this._isFrozen&&Rt(this,t),this.l=t?16|this.l:-17&this.l}},startX:{get:function(){return this.od},set:function(t){this._isFrozen&&Rt(this,t),this.od=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.pd},set:function(t){this._isFrozen&&Rt(this,t),this.pd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.pl},set:function(t){this._isFrozen&&Rt(this,t),this.pl=t,this._isInvalidBounds=!0}}}),oi.prototype.add=oi.prototype.add,oi.prototype.equalsApprox=oi.prototype.Xa,oi.className="PathFigure",_t.prototype.copy=function(){var t=new _t;return t.na=this.na,t.l=-2&this.l,t.Dc=this.Dc,t.Ec=this.Ec,t.Ne=this.Ne,t.Vh=this.Vh,t.Wh=this.Wh,t.Pg=this.Pg,t},(v=_t.prototype).Xa=function(t){if(!(t instanceof _t)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Wn:case we:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY);case vn:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.point1X,t.point1X)&&_.B(this.point1Y,t.point1Y)&&_.B(this.point2X,t.point2X)&&_.B(this.point2Y,t.point2Y);case vo:return _.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.point1X,t.point1X)&&_.B(this.point1Y,t.point1Y);case Ve:return _.B(this.startAngle,t.startAngle)&&_.B(this.sweepAngle,t.sweepAngle)&&_.B(this.centerX,t.centerX)&&_.B(this.centerY,t.centerY)&&_.B(this.radiusX,t.radiusX)&&_.B(this.radiusY,t.radiusY);case oo:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&_.B(this.xAxisRotation,t.xAxisRotation)&&_.B(this.endX,t.endX)&&_.B(this.endY,t.endY)&&_.B(this.radiusX,t.radiusX)&&_.B(this.radiusY,t.radiusY);default:return!1}},v.qb=function(t){t.classType===_t&&(this.type=t)},v.toString=function(t){switch(void 0===t&&(t=-1),this.type){case Wn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case we:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vo:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Ve:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case oo:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return this._isFrozen=!1,this},v.close=function(){return this.isClosed=!0,this},Ot.Object.defineProperties(_t.prototype,{_isFrozen:{get:function(){return 0!=(1&this.l)},set:function(t){this.l=t?1|this.l:-2&this.l}},_isInvalidBounds:{get:function(){return 0!=(2&this.l)},set:function(t){this.l=t?2|this.l:-3&this.l}},isClosed:{get:function(){return 0!=(8&this.l)},set:function(t){this.isClosed!==t&&(this.l=t?8|this.l:-9&this.l,this._isInvalidBounds=!0)}},type:{get:function(){return this.na},set:function(t){this._isFrozen&&Rt(this,t),this.na=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.Dc},set:function(t){this._isFrozen&&Rt(this,t),this.Dc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.Ec},set:function(t){this._isFrozen&&Rt(this,t),this.Ec=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Rt(this,t),this.Ne=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Vh},set:function(t){this._isFrozen&&Rt(this,t),this.Vh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Wh},set:function(t){this._isFrozen&&Rt(this,t),this.Wh=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Pg},set:function(t){this._isFrozen&&Rt(this,t),this.Pg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Rt(this,t),this.Ne=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Vh},set:function(t){this._isFrozen&&Rt(this,t),this.Vh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Wh},set:function(t){0>t&&le(t,">= zero",_t,"radiusX"),this._isFrozen&&Rt(this,t),this.Wh=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Pg},set:function(t){0>t&&le(t,">= zero",_t,"radiusY"),this._isFrozen&&Rt(this,t),this.Pg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.Dc},set:function(t){this._isFrozen&&Rt(this,t),0>(t%=360)&&(t+=360),this.Dc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.Ec},set:function(t){this._isFrozen&&Rt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Ec=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return 0!=(4&this.l)},set:function(t){this._isFrozen&&Rt(this,t),this.l=t?4|this.l:-5&this.l,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return 0!=(16&this.l)},set:function(t){this._isFrozen&&Rt(this,t),this.l=t?16|this.l:-17&this.l,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ne},set:function(t){this._isFrozen&&Rt(this,t),0>(t%=360)&&(t+=360),this.Ne=t,this._isInvalidBounds=!0}}}),_t.prototype.equalsApprox=_t.prototype.Xa;var Wn=new ut(_t,"Move",0),we=new ut(_t,"Line",1),vn=new ut(_t,"Bezier",2),vo=new ut(_t,"QuadraticBezier",3),Ve=new ut(_t,"Arc",4),oo=new ut(_t,"SvgArc",4);function xn(){this.H=null,this.xu=new B(0,0).freeze(),this.mt=new B(0,0).freeze(),this.Bp=this.Rq=0,this.Cp=1,this.xq="",this.Wr=this.Tp=!1,this.Rp=this.Ep=0,this.xg=this.nq=this.tq=!1,this.Zp=null,this.Rr=0,this.xd=this.Nr=null}function qs(){this.H=null,this.xa="",this.ar=this.Lr=null}function be(){this.Fm=ve,this.rf=this.Qq="",this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.dc=null}_t.className="PathSegment",_t.Move=Wn,_t.Line=we,_t.Bezier=vn,_t.QuadraticBezier=vo,_t.Arc=Ve,_t.SvgArc=oo,xn.prototype.copy=function(){var t=new xn;return this.clone(t)},xn.prototype.clone=function(t){return t.H=this.H,t.xu.assign(this.viewPoint),t.mt.assign(this.documentPoint),t.Rq=this.Rq,t.Bp=this.Bp,t.Cp=this.Cp,t.xq=this.xq,t.Tp=this.Tp,t.Wr=this.Wr,t.Ep=this.Ep,t.Rp=this.Rp,t.tq=this.tq,t.nq=this.nq,t.xg=this.xg,t.Zp=this.Zp,t.Rr=this.Rr,t.Nr=this.Nr,t.xd=this.xd,t},xn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},xn.prototype.So=function(t,e){var i=this.diagram;return null===i||vm(i,t,e),e},xn.prototype.Cz=function(t,e){var i=this.diagram;return null===i||(vm(i,t,e),e.assign(i.Ps(e))),e},Ot.Object.defineProperties(xn.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.xu},set:function(t){this.xu.assign(t)}},documentPoint:{get:function(){return this.mt},set:function(t){this.mt.assign(t)}},modifiers:{get:function(){return this.Rq},set:function(t){this.Rq=t}},button:{get:function(){return this.Bp},set:function(t){if(this.Bp=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Cp},set:function(t){this.Cp=t}},key:{get:function(){return this.xq},set:function(t){this.xq=t}},down:{get:function(){return this.Tp},set:function(t){this.Tp=t}},up:{get:function(){return this.Wr},set:function(t){this.Wr=t}},clickCount:{get:function(){return this.Ep},set:function(t){this.Ep=t}},delta:{get:function(){return this.Rp},set:function(t){this.Rp=t}},isMultiTouch:{get:function(){return this.tq},set:function(t){this.tq=t}},handled:{get:function(){return this.nq},set:function(t){this.nq=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Zp},set:function(t){this.Zp=t}},isTouchEvent:{get:function(){var t=this.event;return null!==t&&("touch"===t.pointerType||"pen"===t.pointerType)}},timestamp:{get:function(){return this.Rr},set:function(t){this.Rr=t}},targetDiagram:{get:function(){return this.Nr},set:function(t){this.Nr=t}},targetObject:{get:function(){return this.xd},set:function(t){this.xd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),xn.prototype.getMultiTouchDocumentPoint=xn.prototype.Cz,xn.prototype.getMultiTouchViewPoint=xn.prototype.So,xn.className="InputEvent",qs.prototype.copy=function(){var t=new qs;return t.H=this.H,t.xa=this.xa,t.Lr=this.Lr,t.ar=this.ar,t},qs.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},Ot.Object.defineProperties(qs.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},subject:{get:function(){return this.Lr},set:function(t){this.Lr=t}},parameter:{get:function(){return this.ar},set:function(t){this.ar=t}}}),qs.className="DiagramEvent",be.prototype.clear=function(){this.Ln=this.Mn=this.Rn=this.Sn=this.Qn=this.H=this.dc=null},be.prototype.copy=function(){var t=new be;t.Fm=this.Fm,t.Qq=this.Qq,t.rf=this.rf,t.dc=this.dc,t.H=this.H,t.Qn=this.Qn;var e=this.Sn;return t.Sn=ue(e)&&"function"==typeof e.J?e.J():e,t.Rn=ue(e=this.Rn)&&"function"==typeof e.J?e.J():e,t.Mn=ue(e=this.Mn)&&"function"==typeof e.J?e.J():e,t.Ln=ue(e=this.Ln)&&"function"==typeof e.J?e.J():e,t},be.prototype.qb=function(t){t.classType===be&&(this.change=t)},be.prototype.toString=function(){var t="";return t=this.change===ro?t+"* ":this.change===ve?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===ro?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=bi(this.object)),null!==this.oldValue&&(t+="  old: "+bi(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+bi(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},be.prototype.I=function(t){return t?this.oldValue:this.newValue},be.prototype.Ez=function(t){return t?this.oldParam:this.newParam},be.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},be.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},be.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},be.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},Ot.Object.defineProperties(be.prototype,{model:{get:function(){return this.dc},set:function(t){this.dc=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.Fm},set:function(t){this.Fm=t}},modelChange:{get:function(){return this.Qq},set:function(t){this.Qq=t}},propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},isTransactionFinished:{get:function(){return this.Fm===ro&&("CommittedTransaction"===this.rf||"FinishedUndo"===this.rf||"FinishedRedo"===this.rf)}},object:{get:function(){return this.Qn},set:function(t){this.Qn=t}},oldValue:{get:function(){return this.Sn},set:function(t){this.Sn=t}},oldParam:{get:function(){return this.Rn},set:function(t){this.Rn=t}},newValue:{get:function(){return this.Mn},set:function(t){this.Mn=t}},newParam:{get:function(){return this.Ln},set:function(t){this.Ln=t}}}),be.prototype.redo=be.prototype.redo,be.prototype.canRedo=be.prototype.canRedo,be.prototype.undo=be.prototype.undo,be.prototype.canUndo=be.prototype.canUndo,be.prototype.getParam=be.prototype.Ez,be.prototype.getValue=be.prototype.I,be.prototype.clear=be.prototype.clear;var ro=new ut(be,"Transaction",-1),ve=new ut(be,"Property",0),Ke=new ut(be,"Insert",1),Qe=new ut(be,"Remove",2);function hi(){this.o=(new ot).freeze(),this.xa="",this.j=!1}function Ce(){this.Pt=new rt,this.Jd=!1,this.u=(new ot).freeze(),this.Ce=-1,this.o=999,this.Fe=!1,this.Np=null,this.bi=0,this.j=!1,this.Ie=(new ot).freeze(),this.gl=new ot,this.tt=!0,this.Dt=this.rq=this.Gt=this.Ft=!1}function Fg(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Pi("Ending transaction without having started a transaction: "+i);var n=1===t.transactionLevel,o=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Pb("CommittingTransaction",i,o));var r=0;if(0<t.transactionLevel&&(t.bi--,t.isEnabled)){var l=t.Ie.count;0<l&&(""===i&&(i=t.Ie.M(0)),t.Ie.ka(),t.Ie.mb(l-1),t.Ie.freeze()),0<(l=t.gl.count)&&(r=t.gl.M(l-1),t.gl.mb(l-1))}if(n){if(e)t.rq=!1,null===o&&""!==i&&(o=t.currentTransaction),t.isEnabled&&null!==o&&(o.isComplete||(o.isComplete=!0,o.name=i),t.mx(),(e=t.history).ka(),0<=(n=t.maxHistoryLength)&&(0===n?e.clear():e.count>=n&&(null!==(r=e.M(0))&&r.clear(),e.mb(0),t.Ce--)),0===n||0!==e.count&&e.get(e.count-1)===o||(e.add(o),t.Ce++),e.freeze()),t.isInternalTransaction||t.Pb("CommittedTransaction",i,o);else{t.Fe=!0;try{t.isEnabled&&null!==o&&(o.isComplete=!0,o.undo())}finally{t.isInternalTransaction||t.Pb("RolledBackTransaction",i,o),t.Fe=!1}null!==o&&o.clear()}return t.Np=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==o){for(t=r,o=(i=o.changes).count-1;o>=t;o--)null!==(e=i.M(o))&&e.undo(),i.ka(),i.mb(o);i.freeze()}return!1}function Zt(){ee(this),this.H=Za,this.xa="",this.Jd=!0,this.nb=!1,this.wm=null,this.zy=new xn,this.Zr=-1}function Se(){Zt.call(this),this.name="ToolManager",this.hb=new ot,this.ob=new ot,this.Ib=new ot,this.F=this.V=850,this.o=new Pt(2,2).ja(),this.Ha=5e3,this.ia=za,this.u=Og,this.Mp=this.j=null,this.zj=-1}function Ig(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}be.className="ChangedEvent",be.Transaction=ro,be.Property=ve,be.Insert=Ke,be.Remove=Qe,hi.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.M(i);null!==n&&(e+="\n  "+n.toString())}}return e},hi.prototype.clear=function(){var t=this.changes;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);null!==i&&i.clear()}t.clear(),t.freeze()},hi.prototype.canUndo=function(){return this.isComplete},hi.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.M(t);null!==e&&e.undo()}},hi.prototype.canRedo=function(){return this.isComplete},hi.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.M(e);null!==i&&i.redo()}},hi.prototype.$j=function(){if(this.isComplete){var t=this.changes;t.ka();for(var e=new Tt,i=0;i<t.count;i++){var n=t.M(i);if(null!==n&&n.change===ve&&n.object){var o=e.get(n.object);o||(o=new Tt,e.set(n.object,o));var r=o.get(n.propertyName);null===r?o.set(n.propertyName,-1):(0<r&&t.cd(r,null),o.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)null!==(n=t.M(i))&&(i>e&&t.cd(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},Ot.Object.defineProperties(hi.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),hi.prototype.optimize=hi.prototype.$j,hi.prototype.redo=hi.prototype.redo,hi.prototype.canRedo=hi.prototype.canRedo,hi.prototype.undo=hi.prototype.undo,hi.prototype.canUndo=hi.prototype.canUndo,hi.prototype.clear=hi.prototype.clear,hi.className="Transaction",Ce.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.M(n);if(e+="]",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+="\n "+this.history.M(n).toString(t-1);return e},Ce.prototype.clear=function(){var t=this.history;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);null!==i&&i.clear()}t.clear(),this.Ce=-1,t.freeze(),this.Fe=!1,this.Np=null,this.bi=0,this.Ie.ka(),this.Ie.clear(),this.Ie.freeze(),this.gl.clear(),this.Dt=this.rq=this.Gt=this.Ft=!1},Ce.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(v=Ce.prototype).Yw=function(t){this.Pt.add(t)},v.Sx=function(t){this.Pt.remove(t)},v.Ea=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.tt&&(this.tt=!1,this.bi++,this.isInternalTransaction||this.Pb("StartingFirstTransaction",t,this.currentTransaction),0<this.bi&&this.bi--),this.isEnabled&&(this.Ie.ka(),this.Ie.add(t),this.Ie.freeze(),this.gl.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.bi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Pb("StartedTransaction",t,this.currentTransaction)),e},v.eb=function(t){return void 0===t&&(t=""),Fg(this,!0,t)},v.Kf=function(){return Fg(this,!1,"")},v.mx=function(){if(!this.isUndoingRedoing&&this.canRedo()){var t=this.history;t.ka();for(var e=t.count-1;e>this.historyIndex;e--){var i=t.M(e);null!==i&&i.clear(),t.mb(e),this.rq=!0}t.freeze()}},Ce.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Ce.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.Fe=!0,this.Pb("StartingUndo","Undo",t),this.Ce--,t.undo()}catch(e){Pi("undo error: "+e.toString())}finally{this.Pb("FinishedUndo","Undo",t),this.Fe=!1}}},Ce.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Ce.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.Fe=!0,this.Pb("StartingRedo","Redo",t),this.Ce++,t.redo()}catch(e){Pi("redo error: "+e.toString())}finally{this.Pb("FinishedRedo","Redo",t),this.Fe=!1}}},Ce.prototype.Pb=function(t,e,i){void 0===i&&(i=null);var n=new be;for(n.change=ro,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)n.model=e=t.value,e.ds(n)},Ce.prototype.Uu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Np=e=new hi);var i=t.copy();(e=e.changes).ka(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.tt&&(null!==(t=t.diagram)&&!1===t.pi||Pi("Change not within a transaction: "+i.toString()))}},Ce.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Ot.Object.defineProperties(Ce.prototype,{models:{get:function(){return this.Pt.iterator}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.M(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.M(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.Fe}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.Ce}},currentTransaction:{get:function(){return this.Np}},transactionLevel:{get:function(){return this.bi}},isInTransaction:{get:function(){return 0<this.bi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.Ie}},isPendingClear:{get:function(){return this.Ft},set:function(t){this.Ft=t}},isPendingUnmodified:{get:function(){return this.Gt},set:function(t){this.Gt=t}},isInternalTransaction:{get:function(){return this.Dt},set:function(t){this.Dt=t}},isJustDiscarded:{get:function(){return this.rq}}}),Ce.prototype.handleChanged=Ce.prototype.Uu,Ce.prototype.redo=Ce.prototype.redo,Ce.prototype.undo=Ce.prototype.undo,Ce.prototype.canUndo=Ce.prototype.canUndo,Ce.prototype.discardHistoryAfterIndex=Ce.prototype.mx,Ce.prototype.rollbackTransaction=Ce.prototype.Kf,Ce.prototype.commitTransaction=Ce.prototype.eb,Ce.prototype.startTransaction=Ce.prototype.Ea,Ce.prototype.removeModel=Ce.prototype.Sx,Ce.prototype.addModel=Ce.prototype.Yw,Ce.prototype.clear=Ce.prototype.clear,Ce.className="UndoManager",Zt.prototype.toString=function(){return""!==this.name?this.name+" Tool":io(this.constructor)},Zt.prototype.updateAdornments=function(){},Zt.prototype.canStart=function(){return this.isEnabled},Zt.prototype.doStart=function(){},Zt.prototype.doActivate=function(){this.isActive=!0},Zt.prototype.doDeactivate=function(){this.isActive=!1},Zt.prototype.doStop=function(){},Zt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Zt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Zt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Zt.prototype.doMouseMove=function(){},Zt.prototype.doMouseUp=function(){this.stopTool()},Zt.prototype.doMouseWheel=function(){},Zt.prototype.canStartMultiTouch=function(){return!0},Zt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,B.allocAt(NaN,NaN)),n=e.So(1,B.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){t.Cw=t.scale;var o=n.x-i.x,r=n.y-i.y;t.Kw=Math.sqrt(o*o+r*r),e.bubbles=!1}B.free(i),B.free(n)},Zt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.So(0,B.allocAt(NaN,NaN)),n=e.So(1,B.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){var o=n.x-i.x,r=n.y-i.y;r=Math.sqrt(o*o+r*r)/t.Kw,o=new B((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2);var l=t.commandHandler;if((r*=t.Cw)!==t.scale&&l.canResetZoom(r)){var u=t.zoomPoint;t.zoomPoint=o,l.resetZoom(r),t.zoomPoint=u}e.bubbles=!1}B.free(i),B.free(n)},Zt.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Zt.prototype.doKeyUp=function(){},Zt.prototype.Ea=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.Ea(t)},Zt.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Kf():t.eb(this.transactionResult)},Zt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Ol(e.documentPoint,!1);if(null!==i){if(gn?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.S("ChangingSelection",t.selection),e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(gn?e.meta:e.control)||e.shift||t.clearSelection()}},Zt.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(o){return!o.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.jc(n.documentPoint,t,e),n.targetObject=t,function xv(t,e,i){if(e.handled=!1,null===t||t.If()){var n=0;e.left?n=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(n=3);var o="ObjectSingleClicked";if(null!==t){switch(n){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==n&&i.S(o,t)}else{switch(n){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==n&&i.S(o)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(null!==i&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}null!==t&&t(e)}}}(t,n,i),n.handled},Zt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.Ab){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.ca(e.documentPoint)?t.jc(e.documentPoint,null,null):null;!e.event||"pointercancel"!==e.event.type&&"pointerout"!==e.event.type||(n=null),e.targetObject=n;var o=!1;if(n!==t.Bk){var r=t.Bk,l=r;for(t.Bk=n,this.doCurrentObjectChanged(r,n),e.handled=!1;null!==r;){var u=r.mouseLeave;if(null!==u&&(n===r||null!==n&&n.rg(r)||(u(e,r,n),o=!0,e.handled)))break;r=r.panel}for(r=l,e.handled=!1;null!==n&&(null===(l=n.mouseEnter)||!(r===n||null!==r&&r.rg(n)||(l(e,n,r),o=!0,e.handled)));)n=n.panel;n=t.Bk}if(null!==n){for(r=n,l="";null!==r&&""===(l=r.cursor);)r=r.panel;for(t.currentCursor=l,e.handled=!1,r=n;null!==r&&(null===(n=r.mouseOver)||(n(e,r),o=!0,!e.handled));)r=r.panel}else this.doUpdateCursor(null),null!==(n=t.mouseOver)&&(n(e),o=!0);o&&t.ac(),t.skipsUndoManager=i}},Zt.prototype.doUpdateCursor=function(){var t=this.diagram;t&&(t.currentCursor="")},Zt.prototype.doCurrentObjectChanged=function(){},Zt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(0!==i&&t.documentBounds.w()){var n=t.commandHandler,o=t.toolManager.mouseWheelBehavior;if(null!==n&&(o===Jl&&!e.shift||o===za&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(o=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=o),e.bubbles=!1;else if(o===Jl&&e.shift||o===za&&!e.control){n=t.position.copy();var r=e.event;o=r.deltaMode;var l=r.deltaX;r=r.deltaY;var u="pixel";if(0===l&&0===r||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll(u,0<(i=3*i*t.scrollVerticalLineChange)?"up":"down",Math.abs(i)):e.shift&&t.allowHorizontalScroll&&t.scroll(u,0<(i=3*i*t.scrollHorizontalLineChange)?"left":"right",Math.abs(i));else{switch(o){case 0:u="pixel";break;case 1:u="line";break;case 2:u="page"}0!==l&&t.allowHorizontalScroll&&t.scroll(u,0<(l*=t.scrollHorizontalLineChange/16)?"right":"left",Math.abs(l)),0!==r&&t.allowVerticalScroll&&t.scroll(u,0<(r*=t.scrollVerticalLineChange/16)?"down":"up",Math.abs(r))}this.doWheelChange(t,n,e)}}},Zt.prototype.doWheelChange=function(t,e,i){t.position.D(e)&&0===i.event.wheelDeltaX||(i.bubbles=!1)},Zt.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.zy);this.Zr=si(function(){i.doWaitAfter(n)},t)},Zt.prototype.cancelWaitAfter=function(){-1!==this.Zr&&At.clearTimeout(this.Zr),this.Zr=-1},Zt.prototype.doWaitAfter=function(){},Zt.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.jc(t,function(i){for(;null!==i&&!(i.panel instanceof Vt);)i=i.panel;return i}))?null:t.part.category===e?t:null},Zt.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;void 0===t&&(t=i.firstInput.viewPoint),void 0===e&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,o=n.width;return n=n.height,i.firstInput.isTouchEvent&&(o+=6,n+=6),Math.abs(e.x-t.x)>o||Math.abs(e.y-t.y)>n},Ot.Object.defineProperties(Zt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof q&&(this.H=t)}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},isActive:{get:function(){return this.nb},set:function(t){this.nb=t}},transactionResult:{get:function(){return this.wm},set:function(t){this.wm=t}}}),Zt.prototype.startTransaction=Zt.prototype.Ea,Zt.className="Tool",Ut(Se,Zt),Se.prototype.initializeStandardTools=function(){},Se.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Vt&&this.Mp===t){var i=e.adornedObject;(null!==t?i.part===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},Se.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Cu&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Yd)return void(e.bubbles=!0);if(this.gestureBehavior===Cu)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var o=this.mouseDownTools.M(n);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===za?this.mouseWheelBehavior=Jl:this.mouseWheelBehavior===Jl&&(this.mouseWheelBehavior=za)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Se.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Yd)return void(e.bubbles=!0);if(this.gestureBehavior===Cu)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var o=this.mouseMoveTools.M(n);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseMove()))}Ig(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Se.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Vt&&(e===t||e.rg(t))||this.hideToolTip()},Se.prototype.doWaitAfter=function(t){var e=this.diagram;null!==e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.qu=!0,e.doMouseUp()))},Se.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.jc(e.documentPoint,null,null));var i=e.targetObject;if(null!==i)for(e.handled=!1;null!==i&&(null===(t=this.isActive?i.mouseHold:i.mouseHover)||(t(e,i),!e.handled));)i=i.panel;else null!==(i=this.isActive?t.mouseHold:t.mouseHover)&&i(e)},Se.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.jc(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Vt)||e!==t&&!e.rg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Se.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Vt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Va(),this.positionToolTip(t,e)}else t instanceof br&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,-1!==this.zj&&(At.clearTimeout(this.zj),this.zj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var o=this;this.zj=si(function(){o.hideToolTip()},t)}},Se.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5/e.scale),i.x<o.x&&(i.x=o.x),i.y=i.y+20/e.scale+n.height>o.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<o.y&&(i.y=o.y),t.position=i}},Se.prototype.hideToolTip=function(){-1!==this.zj&&(At.clearTimeout(this.zj),this.zj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Vt?(t.remove(e),null!==this.Mp&&this.Mp.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof br&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Se.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.M(i);if(n.diagram=this.diagram,n.canStart())return t.doFocus(),t.currentTool=n,void(t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()},Se.prototype.doMouseWheel=function(){this.standardMouseWheel()},Se.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Se.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Se.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.M(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if((n=this.mouseMoveTools.M(i)).name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if((n=this.mouseUpTools.M(i)).name===t)return n;return null},Se.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var o=this.mouseDownTools.M(n);if(o.name===t)return null!==e?this.mouseDownTools.cd(n,e):this.mouseDownTools.mb(n),o}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if((o=this.mouseMoveTools.M(n)).name===t)return null!==e?this.mouseMoveTools.cd(n,e):this.mouseMoveTools.mb(n),o;for(i=this.mouseUpTools.length,n=0;n<i;n++)if((o=this.mouseUpTools.M(n)).name===t)return null!==e?this.mouseUpTools.cd(n,e):this.mouseUpTools.mb(n),o;return null},Se.prototype.gb=function(t,e,i){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&i.add(e)},Ot.Object.defineProperties(Se.prototype,{mouseWheelBehavior:{get:function(){return this.ia},set:function(t){this.ia=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Mp=null!==t&&t instanceof Vt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.hb}},mouseMoveTools:{get:function(){return this.ob}},mouseUpTools:{get:function(){return this.Ib}},hoverDelay:{get:function(){return this.V},set:function(t){this.V=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.J()}},toolTipDuration:{get:function(){return this.Ha},set:function(t){this.Ha=t}}}),Se.prototype.replaceStandardTool=Se.prototype.gb;var $s,za=new ut(Se,"WheelScroll",0),Jl=new ut(Se,"WheelZoom",1),wv=new ut(Se,"WheelNone",2),Og=new ut(Se,"GestureZoom",3),Cu=new ut(Se,"GestureCancel",4),Yd=new ut(Se,"GestureNone",5);function ke(){Zt.call(this),this.name="Dragging",this.u=this.Tw=this.ob=!0,this.o=this.Ha=this.V=this.Oe=null,this.Ym=this.Ib=!1,this.tl=new B(NaN,NaN),this.Fr=new B,this.hb=!0,this.Hk=100,this.Cg=[],this.te=(new rt).freeze(),this.ia=new tl,this.Bn=null,this.F="copy",this.Oc="",this.Pc="no-drop"}function Xd(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.Vj()&&1===e.count&&e.first()instanceof st?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Dj(),t.Oe=i.toolManager.findTool("Relinking"),null===t.Oe&&(t.Oe=new In,t.Oe.diagram=i),t.Oe.originalLink=t.draggedLink):(t.draggedLink=null,t.Oe=null))}}function Hd(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,jg(t,e.lastInput,null),e.skipsUndoManager=i,t.Cg.length=0}function Eg(){var t=ci;Jr(t),Gd(t);var e=t.diagram;t.tl.w()&&(e.position=t.tl),e.ug()}function Vd(t,e){if(null===t.copiedParts){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&null!==t.draggedParts){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?null!==n.currentTransaction&&0<n.currentTransaction.changes.count&&(i.undoManager.Kf(),i.Ea("Drag")):Gd(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Lf():i.selection,e=i.Jj(e,i,!0),i=new Tt,n=t.draggedParts.iterator;n.next();){var o=n.key;if(o.Zc()&&o.canCopy()){var r=e.I(o);null!==r&&(r.location=o.location,r.Va(),i.add(r,t.Pd(r.location)))}}for(e=e.iterator;e.next();)(n=e.value)instanceof st&&n.canCopy()&&i.add(n,t.Pd());t.copiedParts=i,Xd(t,i.Lf()),null!==t.draggedLink&&Er(i=t.draggedLink,t.startPoint.x-((e=i.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null)}}}function Jr(t){var e=t.diagram;if(null!==t.copiedParts){if(e.Is(t.copiedParts.Lf(),!1),t.copiedParts=null,null!==t.draggedParts)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof st&&(i.value.point=new B(0,0));t.doUpdateCursor(null)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Dg(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.Oe){var e=t.Oe;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Oe.originalLink=null}t.draggedLink=null,t.Oe=null}}function Qs(t,e,i){var n=t.diagram,o=t.startPoint,r=B.alloc();r.assign(n.lastInput.documentPoint),t.moveParts(e,r.re(o),i),B.free(r),!0===n.Gf("temporaryPixelRatio")&&null===n.Yh&&30<n.ax&&(oh(n),n.gk())}function Gd(t){if(null!==t.draggedParts){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Zc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if((n=i.key)instanceof st&&n.suspendsRouting){var o=i.value.point;t.draggedParts.add(n,t.Pd()),Er(n,-o.x,-o.y)}e.bd()}}function Wd(t,e){var i=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Rg(t,!1));var n=t.findDragOverObject(e),o=i.lastInput;o.targetObject=n,t.doUpdateCursor(n);var r=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=jg(t,o,n),!t.isActive&&null===ci)return;var u=null!==n?n.part:null;if(null===u||i.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof Nt)){var c=i.mouseDragOver;null!==c&&(c(o),l=!0)}if(!t.isActive&&null===ci||(t.doDragOver(e,n),!t.isActive&&null===ci))return}finally{i.skipsUndoManager=r,l&&i.bd()}t.Bn=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.gs(o.viewPoint)}function jg(t,e,i){var n=!1,o=t.Cg.length,r=0<o?t.Cg[0]:null;if(i===r)return!1;e.handled=!1;for(var l=0;l<o;l++){var u=t.Cg[l],c=u.mouseDragLeave;if(null!==c&&(c(e,u,i),n=!0,e.handled))break}if(t.Cg.length=0,!t.isActive&&null===ci||null===i)return n;for(e.handled=!1,o=i;null!==o;)t.Cg.push(o),o=Bg(o);for(o=t.Cg.length,i=0;i<o&&(null===(u=(l=t.Cg[i]).mouseDragEnter)||(u(e,l,r),n=!0,!e.handled));i++);return n}function Bg(t){var e=t.panel;return null!==e?e:t instanceof wt&&!(t instanceof Nt)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function zg(t,e,i){var n=t.Oe;if(null===n)return null;var o=t.diagram.og(e,n.portGravity,function(p){return n.findValidLinkablePort(p,i)});t=B.alloc();var r=1/0,l=null;for(o=o.iterator;o.next();){var u=o.value;if(null!==u.part){var c=u.ga(P,t);(c=e.Bf(c))<r&&(l=u,r=c)}}return B.free(t),l}function Rg(t,e){var i=t.draggedLink;if(null!==i&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var o=t.Oe;if(null!==o){var r=null,l=null;null===i.fromNode&&null!==(r=zg(t,i.i(0),!1))&&(l=r.part);var u=null,c=null;null===i.toNode&&null!==(u=zg(t,i.i(i.pointsCount-1),!0))&&(c=u.part),o.isValidLink(l,r,c,u)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,null!==r&&(i.fromPortId=r.portId),i.toNode=c,null!==u&&(i.toPortId=u.portId),i.fromPort!==n.Nx&&n.S("LinkRelinked",i,n.Nx),i.toPort!==n.Ox&&n.S("LinkRelinked",i,n.Ox)):Ug(o,l,r,c,u):Ug(o,null,null,null,null)}}}}function Yg(t,e){var i=t.diagram;t.dragsLink&&Rg(t,!0),Hd(t);var n=t.findDragOverObject(e),o=i.lastInput;if(o.targetObject=n,null!==n){o.handled=!1;for(var r=n;null!==r;){var l=r.mouseDrop;if(null!==l&&(l(o,r),o.handled))break;bv(t,o,r),r=Bg(r)}}else null!==(r=i.mouseDrop)&&r(o);if(t.isActive||null!==ci){for(o=(t.copiedParts||t.draggedParts).iterator;o.next();)(r=o.key)instanceof dt&&r.linksConnected.each(function(u){u.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||null!==ci){for(t=$.alloc(),e=i.selection.iterator;e.next();)(n=e.value)instanceof dt&&Sv(i,n,t);$.free(t)}}}function bv(t,e,i){i=i.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof Nt||null!==(i=t.mouseDrop)&&i(e)}function Sv(t,e,i){var n=!1;if(i=e.getAvoidableRect(i),t.viewportBounds.Re(i)&&(n=!0),0!==(t=t.Ou(i,function(o){return o.part},function(o){return o instanceof st},!0,function(o){return o instanceof st},n)).count)for(t=t.iterator;t.next();)!(i=t.value).Td(e)&&i.isAvoiding&&i.bb()}function Xg(t,e,i,n){if(null===t.copiedParts){var o=t.diagram;if(!o.isReadOnly&&!o.isModelReadOnly){o.skipsUndoManager=!i,o.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=o.Jj(e,o,!0);var r=$.alloc();o=n=1/0;for(var l=-1/0,u=-1/0,c=e.iterator;c.next();){var p=c.value;if(p.isVisible()){var m=p.location;p=m.x,m=m.y,isNaN(p)||isNaN(m)||(p<n&&(n=p),m<o&&(o=m),p>l&&(l=p),m>u&&(u=m))}}for(n===1/0?r.h(0,0,0,0):r.h(n,o,l-n,u-o),n=r.x+r.width/2,o=r.y+r.height/2,$.free(r),r=t.Fr,l=new Tt,u=B.alloc(),c=e.iterator;c.next();)(p=c.value)instanceof st&&p.canCopy()&&null!==(m=i.I(p))&&(m.points=p.points,Er(m,r.x-n,r.y-o),m.suspendsRouting=!0,l.add(m,t.Pd()));for(e=e.iterator;e.next();)(p=e.value).Zc()&&p.canCopy()&&null!==(c=i.I(p))&&(u.h(r.x-(n-(p=p.location).x),r.y-(o-p.y)),c.location=u,c.Va(),l.add(c,t.Pd(u)));B.free(u),t.copiedParts=l,Xd(t,l.Lf()),null!==t.draggedLink&&Er(i=t.draggedLink,t.startPoint.x-((e=i.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null)}}}Se.className="ToolManager",Se.WheelScroll=za,Se.WheelZoom=Jl,Se.WheelNone=wv,Se.GestureZoom=Og,Se.GestureCancel=Cu,Se.GestureNone=Yd,Ut(ke,Zt),ke.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Hk))&&null!==this.findDraggablePart()},ke.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.Ol(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},ke.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Ol(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(gn?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},ke.prototype.doActivate=function(){var t=this.diagram;this.Bn=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.Gu(!0),ci=null,this.isActive=!0,this.tl.set(t.position),Xd(this,t.selection),this.Cg.length=0,t.animationManager.Cc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.Tw=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.Ns=!0,!0===t.Gf("temporaryPixelRatio")&&30<t.ax&&oh(t),Xu(t,this.draggedParts),this.Ea("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Ym=!1,ci=this,ks=this.diagram,this.doSimulatedDragOut()))},ke.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ke.prototype.Pd=function(t){return new qr(void 0===t?no:this.isGridSnapEnabled?new B(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},ke.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.Tw,t.Gu(!1),t.ug(),Hd(this),ah(t,this.draggedParts),this.draggedParts=this.currentPart=this.Bn=null,this.Ym=this.isDragOutStarted=!1,0<$s.count){for(var e=$s,i=e.length,n=0;n<i;n++){var o=e.M(n);Dg(o),Jr(o),Hd(o),o.diagram.ug()}e.clear()}Dg(this),this.tl.h(NaN,NaN),null!==ks&&(ks.currentCursor=""),ci=ks=null,Jr(this),t.isMouseCaptured=!1,t.currentCursor="",t.Ns=!1,this.stopTransaction(),Bu(t,!0)},ke.prototype.stopTransaction=function(){var t=this.diagram,e=Zt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},ke.prototype.doCancel=function(){Jr(this),Gd(this);var t=this.diagram;this.tl.w()&&(t.position=this.tl),this.stopTool()},ke.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ke.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},ke.prototype.moveParts=function(t,e,i){void 0===i&&(i=!1);var n=this.diagram;null!==n&&gf(n,t,e,this.dragOptions,i)},ke.prototype.findDragOverObject=function(t){var e=this;return hf(this.diagram,t,null,function(i){return!(i=null===i||!!(null===(i=i.part)||i instanceof Vt||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i)))})},ke.prototype.doUpdateCursor=function(t){var e=this.diagram;(null===t||this.Bn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},ke.prototype.doDragOver=function(){},ke.prototype.doDropOnto=function(){},ke.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Vd(this,!1),Xu(t,this.copiedParts),Qs(this,this.copiedParts,!1),ah(t,this.copiedParts)):this.mayMove()?(Jr(this),Qs(this,this.draggedParts,!0)):this.mayDragOut()?(Vd(this,!1),Qs(this,this.copiedParts,!1)):Jr(this),Wd(this,t.lastInput.documentPoint))}},ke.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&null!==this.copiedParts?(Jr(this),Vd(this,!0),Xu(t,this.copiedParts),Qs(this,this.copiedParts,!1),ah(t,this.copiedParts),null!==this.copiedParts&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(o){o.isSelected=!0}))):(e=!0,Jr(this),this.mayMove()&&(Qs(this,this.draggedParts,!0),Wd(this,t.lastInput.documentPoint))),this.Ym=!0,Yg(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Lf():this.draggedParts.Lf();this.copiedParts=null,e&&function kv(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof dt&&(null===(i=i.containingGroup)||null===i.placeholder||t.draggedParts.contains(i)||i.placeholder.v())}}(this),t.Ya(),ah(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.S(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.S("ChangedSelection",t.selection)}}},ke.prototype.simulatedMouseMove=function(t,e,i){if(null===ci)return!1;var n=ci.diagram;i instanceof q||(i=null);var o=ks;return i!==o&&(null!==o&&o!==n&&(o.ug(),ci.isDragOutStarted=!1,null!==(o=o.toolManager.findTool("Dragging"))&&o.doSimulatedDragLeave()),ks=i,null!==i&&i!==n&&(Eg(),null!==(o=i.toolManager.findTool("Dragging"))&&($s.contains(o)||$s.add(o),o.doSimulatedDragEnter())),this.doUpdateCursor(null)),!(null===i||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert||(null!==(n=i.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),0))},ke.prototype.simulatedMouseUp=function(t,e,i){if(null===ci)return!1;var n=ks,o=ci.diagram;if(null===i)return ci.doCancel(),!0;if(i!==n){var r=n.toolManager.findTool("Dragging");if(null!==n&&n!==o&&null!==r)return n.ug(),ci.isDragOutStarted=!1,r.doSimulatedDragLeave(),!1;ks=i,null!==(n=i.toolManager.findTool("Dragging"))&&(Eg(),$s.contains(n)||$s.add(n),n.doSimulatedDragEnter())}return i!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):null===e&&(e=new B),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!0,null!==(t=i.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=ci)&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0)},ke.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(gn?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ke.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},ke.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},ke.prototype.computeBorder=function(t,e,i){return this.Ym||null===this.draggedParts||this.draggedParts.contains(t)?null:i.assign(e)},ke.prototype.Bz=function(){return ci},ke.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===ci||ci.diagram.model.dataFormat!==t.model.dataFormat)},ke.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Cc(),kr(t),t.animationManager.Cc(),null!==(t=ci)&&(t.diagram.Ns=!1),this.doUpdateCursor(null)}},ke.prototype.doSimulatedDragLeave=function(){null!==ci&&ci.doSimulatedDragOut(),this.doCancel()},ke.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Dm=!0;var e=ci;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;Xg(this,e.draggedParts.Lf(),!1,t.firstInput),Qs(this,this.copiedParts,!1),Wd(this,t.lastInput.documentPoint)}t.animationManager.Dm=!1},ke.prototype.doSimulatedDrop=function(){var t=this.diagram,e=ci;if(null!==e){var i=e.diagram;if(e.Ym=!0,Jr(this),!this.mayDragIn())return;t.animationManager.Dm=!0,t.S("ChangingSelection",t.selection),this.Ea("Drop"),Xg(this,e.draggedParts.Lf(),!0,t.lastInput),Qs(this,this.copiedParts,!1);var n=new rt;null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(o){o.isSelected=!0,n.add(o)})),Yg(this,t.lastInput.documentPoint),t.Ya(),null!==this.copiedParts&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",n,i),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.Dm=!1},ke.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Ns=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.Bn=null},ke.prototype.computeMove=function(t,e,i,n){return null!==(i=this.diagram)?i.computeMove(t,e,this.dragOptions,n):new B},Ot.Object.defineProperties(ke.prototype,{isCopyEnabled:{get:function(){return this.ob},set:function(t){this.ob=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ia},set:function(t){this.ia=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.hb},set:function(t){this.hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.D(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Oc},set:function(t){this.Oc=t}},nodropCursor:{get:function(){return this.Pc},set:function(t){this.Pc=t}},currentPart:{get:function(){return this.V},set:function(t){this.V=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ha},set:function(t){this.Ha=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Lf():null!==this.draggedParts?this.draggedParts.Lf():this.te}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Ib},set:function(t){this.Ib=t}},startPoint:{get:function(){return this.Fr},set:function(t){this.Fr.D(t)||this.Fr.assign(t)}},delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}}}),ke.prototype.getDraggingSource=ke.prototype.Bz;var ci=null,ks=null;function vi(){Zt.call(this),this.te=100,this.Ha=!1,this.u="pointer";var t=new st,e=new It;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new It).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Ci=t,t=new dt,(e=new It).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Ta,t.add(e),t.selectable=!1,t.layerName="Tool",this.Bi=t,this.j=e,t=new dt,(e=new It).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Ta,t.add(e),t.selectable=!1,t.layerName="Tool",this.Di=t,this.o=e,this.Pc=this.Oc=this.ob=this.hb=this.Ib=null,this.ia=!0,this.iy=new Tt,this.Of=this.gj=this.Pf=null}function Ud(t,e,i,n){if(e===i)return!0;var o=e.fromNode;return!(null===o||!o.isLinkLabel||(n.add(o),!Ud(t,o.labeledLink,i,n)))||!(null===(e=e.toNode)||!e.isLinkLabel||(n.add(e),!Ud(t,e.labeledLink,i,n)))}function ql(t,e,i,n,o){if(e===i)return!0;if(null===e||null===i)return!1;for(var r=e.linksConnected;r.next();){var l=r.value;if(l!==n&&(!o||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode)!==e&&ql(t,l,i,n,o))return!0}return!1}function Hg(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var r=i.linksConnected;r.next();){var l=r.value;if(l!==o&&l.toNode===i&&(l=l.fromNode)!==i&&Hg(t,e,l,n,o))return!0}return!1}function Vg(t,e,i,n,o){if(i===n)return!0;if(null===i||null===n||e.contains(i))return!1;e.add(i);for(var r=i.linksConnected;r.next();){var l=r.value;if(l!==o){var u=l.fromNode;if(l=l.toNode,(u=u===i?l:u)!==i&&Vg(t,e,u,n,o))return!0}}return!1}function Wi(){vi.call(this),this.name="Linking",this.V={},this.F=null,this.K=Au,this.Xd=null}ke.className="DraggingTool",$s=new ot,ln("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),Se.prototype.doCancel=function(){null!==ci&&ci.doCancel(),Zt.prototype.doCancel.call(this)},Ut(vi,Zt),vi.prototype.doStop=function(){this.diagram.ug(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},vi.prototype.copyPortProperties=function(t,e,i,n,o){if(null!==t&&null!==e&&null!==i&&null!==n){var r=e.Df(),l=Pt.alloc();l.width=e.naturalBounds.width*r,l.height=e.naturalBounds.height*r,n.desiredSize=l,Pt.free(l),o?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=P,r=B.alloc(),i.location=e.ga(P,r),B.free(r),n.angle=e.li(),null!==this.portTargeted&&this.portTargeted(t,e,i,n,o)}},vi.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.desiredSize=Ta,e.fromSpot=y,e.toSpot=y),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,i)},vi.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},vi.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof dt){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},vi.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.part;if(!(i instanceof dt))return null;for(;null!==t;){var n=e?t.toLinkable:t.fromLinkable;if(!0===n&&(null!==t.portId||t instanceof dt)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.panel}return null},vi.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var o=this,r=e.og(i,n,function(x){return o.findValidLinkablePort(x,t)},null,!0);for(n=1/0,e=null,r=r.iterator;r.next();){var l=r.value,u=l.part;if(u instanceof dt){var c=l.ga(P,B.alloc()),p=i.x-c.x,m=i.y-c.y;B.free(c),(c=p*p+m*m)<n&&(null!==(p=this.validPortsCache.I(l))?p&&(e=l,n=c):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,u,l)||!t&&this.isValidLink(u,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=c):this.validPortsCache.add(l,!1))}}return null!==e&&(i=e.part)instanceof dt&&(null===i.layer||i.layer.allowLink)?e:null},vi.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var i=e.fromMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Mo(e).count>=i)return!1}return!0},vi.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var i=e.toMaxLinks;if(1/0>i){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Sd(e).count>=i)return!1}return!0},vi.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},vi.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.part;if(!(i instanceof dt))return!1;null===(t=t.portId)&&(t="");var n=e.part;if(!(n instanceof dt))return!1;for(null===(e=e.portId)&&(e=""),e=n.Sd(e);e.next();)if((n=e.value).fromNode===i&&n.fromPortId===t)return!0;return!1},vi.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==i&&this.isLabelDependentOnLink(i,this.originalLink))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.originalLink))return!1;if(null!==t){var o=t.linkValidation;if(null!==o&&!o(t,e,i,n,this.originalLink))return!1}return!(null!==i&&(o=i.linkValidation,null!==o&&!o(t,e,i,n,this.originalLink)))&&(null===(o=this.linkValidation)||o(t,e,i,n,this.originalLink))},vi.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.labeledLink;if(null===i)return!1;if(i===e)return!0;var n=new rt;return n.add(t),Ud(this,i,e,n)},vi.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Pf){if(n===jm){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var o=n.value;if(o!==i&&o.isTreeLink&&o.toNode===e)return!1}return!ql(this,t,e,i,!0)}if(n===Bm){if(null!==(n=i||this.temporaryLink)&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if((o=n.value)!==i&&o.isTreeLink&&o.fromNode===t)return!1;return!ql(this,t,e,i,!0)}if(n===Om)return t===e?t=!0:((n=new rt).add(e),t=Hg(this,n,t,e,i)),!t;if(n===Em)return!ql(this,t,e,i,!1);if(n===Dm)return t===e?t=!0:((n=new rt).add(e),t=Vg(this,n,t,e,i)),!t}return!0},Ot.Object.defineProperties(vi.prototype,{portGravity:{get:function(){return this.te},set:function(t){0<=t&&(this.te=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.Ci},set:function(t){this.Ci=t}},temporaryFromNode:{get:function(){return this.Bi},set:function(t){(this.Bi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var i=e.O.indexOf(this.j);e.mb(i),e.Hb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.Di},set:function(t){(this.Di=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(null!==this.o){var e=this.o.panel;if(null!==e){var i=e.O.indexOf(this.o);e.mb(i),e.Hb(i,t)}}this.o=t}},originalLink:{get:function(){return this.Ib},set:function(t){this.Ib=t}},originalFromNode:{get:function(){return this.hb},set:function(t){this.hb=t}},originalFromPort:{get:function(){return this.ob},set:function(t){this.ob=t}},originalToNode:{get:function(){return this.Oc},set:function(t){this.Oc=t}},originalToPort:{get:function(){return this.Pc},set:function(t){this.Pc=t}},isForwards:{get:function(){return this.ia},set:function(t){this.ia=t}},validPortsCache:{get:function(){return this.iy}},targetPort:{get:function(){return this.Pf},set:function(t){this.Pf=t}},linkValidation:{get:function(){return this.gj},set:function(t){this.gj=t}},portTargeted:{get:function(){return this.Of},set:function(t){this.Of=t}}}),vi.className="LinkingBaseTool",Ut(Wi,vi),Wi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.xs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Wi.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.jc(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof dt))return null;var i=this.direction;if(i===Au||i===Gg){var n=this.findValidLinkablePort(e,!1);if(null!==n||this.startObject===t&&this.findValidLinkablePort(n=t.port,!1))return this.isForwards=!0,n}return i!==Au&&i!==Wg||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},Wi.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null!==this.temporaryToNode&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof dt&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null!==this.temporaryFromNode&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof dt&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Va(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Va(),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0)},Wi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Wi.prototype.doStop=function(){vi.prototype.doStop.call(this),this.startObject=null},Wi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,o=null,r=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(null!==l){var u=l.part;u instanceof dt&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,i=this.originalFromPort),n=u,o=l):(e=u,i=l,null!==this.originalToNode&&(n=this.originalToNode,o=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(n=this.originalToNode,o=this.originalToPort);null!==e||null!==n?null!==(r=this.insertLink(e,i,n,o))?(null===l&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),r.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",r)):this.doNoLink(e,i,n,o):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),r&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},Wi.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof st)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},Wi.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Wi.prototype.doNoLink=function(){},Ot.Object.defineProperties(Wi.prototype,{archetypeLinkData:{get:function(){return this.V},set:function(t){this.V=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Xd},set:function(t){this.Xd=t}}});var Au=new ut(Wi,"Either",0),Gg=new ut(Wi,"ForwardsOnly",0),Wg=new ut(Wi,"BackwardsOnly",0);function In(){vi.call(this),this.name="Relinking";var t=new It;t.figure="Diamond",t.desiredSize=xr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.V=t,(t=new It).figure="Diamond",t.desiredSize=xr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Xd=t,this.F=null,this.Fw=new $}function Ug(t,e,i,n,o){null!==e?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==n?(t.copyPortProperties(n,o,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function Ge(){Zt.call(this),this.name="LinkReshaping";var t=new It;t.figure="Rectangle",t.desiredSize=La,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,(t=new It).figure="Diamond",t.desiredSize=xr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.Ts=this.j=null,this.Gw=new B,this.Yq=new ot}function Ra(t,e,i,n,o,r){return r?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-o.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-o.x)<t.resegmentingDistance}Wi.className="LinkingTool",Wi.Either=Au,Wi.ForwardsOnly=Gg,Wi.BackwardsOnly=Wg,Ut(In,vi),In.prototype.updateAdornments=function(t){if(null!==t&&t instanceof st){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;null!==n&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&null===(i=t.Oj(e))&&(i=this.makeAdornment(n,!1),t.bh(e,i))}null===i&&t.Jf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(n=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(null===(i=t.Oj(e))?(i=this.makeAdornment(n,!0),t.bh(e,i)):i.v()),null===i&&t.Jf(e)}},In.prototype.makeAdornment=function(t,e){var i=new Vt;return i.type=nt.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&i.add(e.copy()),i.adornedObject=t,i},In.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.xs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},In.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var i=e.part;if(!(i instanceof Vt&&i.adornedPart instanceof st))return;this.handle=e,this.isForwards=null===i||"RelinkTo"===i.category,this.originalLink=i.adornedPart}this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Fw.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=vr),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=vr),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0},In.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===xl||i===Dr)&&(i=Oi),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},In.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},In.prototype.doStop=function(){vi.prototype.doStop.call(this),this.handle=null},In.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,o=this.originalToPort,r=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var l=this.targetPort.part;l instanceof dt&&(this.isForwards?(n=l,o=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?o=n=null:i=e=null:r=null;null!==r?(this.reconnectLink(r,this.isForwards?n:e,this.isForwards?o:i,this.isForwards),null===this.targetPort&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint,r.bb()),this.transactionResult=this.name,t.S("LinkRelinked",r,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Xo(this.Fw)}finally{this.stopTool()}}},In.prototype.reconnectLink=function(t,e,i,n){return i=null!==i&&null!==i.portId?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},In.prototype.doNoRelink=function(){},Ot.Object.defineProperties(In.prototype,{fromHandleArchetype:{get:function(){return this.V},set:function(t){this.V=t}},toHandleArchetype:{get:function(){return this.Xd},set:function(t){this.Xd=t}},handle:{get:function(){return this.F},set:function(t){if(null!==t&&!(t.part instanceof Vt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),In.className="RelinkingTool",ln("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),ln("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)}),Ut(Ge,Zt),Ge.prototype.Su=function(t){return t&&0!==t.reshapingBehavior.value?t.reshapingBehavior:Zd},Ge.prototype.om=function(t,e){t.reshapingBehavior=e},Ge.prototype.updateAdornments=function(t){if(null!==t&&t instanceof st){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;null!==i&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.Ed()&&(null===(e=t.Oj(this.name))||e.Bw!==t.pointsCount||e.Vw!==t.resegmentable)&&null!==(e=this.makeAdornment(i))&&(e.Bw=t.pointsCount,e.Vw=t.resegmentable,t.bh(this.name,e))}null===e&&t.Jf(this.name)}},Ge.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,o=null;if(null!==e.points&&1<i){(o=new Vt).type=nt.Link,i=e.firstPickIndex;var r=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==dn)for(var u=i+l;u<r-l;u++){var c=this.makeResegmentHandle(t,u);null!==c&&(c.segmentIndex=u,c.segmentFraction=.5,c.fromMaxLinks=999,o.add(c))}for(l=i+1;l<r;l++)if(null!==(u=this.makeHandle(t,l))){if(u.segmentIndex=l,l!==i)if(l===i+1&&n){c=e.i(i);var p=e.i(i+1);_.B(c.x,p.x)&&_.B(c.y,p.y)&&(p=e.i(i-1)),_.B(c.x,p.x)?(this.om(u,Xa),u.cursor="n-resize"):_.B(c.y,p.y)&&(this.om(u,Ya),u.cursor="w-resize")}else l===r-1&&n?(c=e.i(r-1),p=e.i(r),_.B(c.x,p.x)&&_.B(c.y,p.y)&&(c=e.i(r+1)),_.B(c.x,p.x)?(this.om(u,Xa),u.cursor="n-resize"):_.B(c.y,p.y)&&(this.om(u,Ya),u.cursor="w-resize")):l!==r&&(this.om(u,_d),u.cursor="move");o.add(u)}o.adornedObject=t}return o},Ge.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},Ge.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},Ge.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Ge.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof st){if(this.Ts=e,t.isMouseCaptured=!0,this.Ea(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.Hb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.Hb(this.handle.segmentIndex+1,n),e.points=i,e.Xb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.Gw=e.i(this.handle.segmentIndex),this.Yq=e.points.copy(),this.isActive=!0}}},Ge.prototype.doDeactivate=function(){this.stopTransaction(),this.Ts=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Ge.prototype.stopTransaction=function(){var t=this.diagram,e=Zt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},Ge.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Yq),this.stopTool()},Ge.prototype.getResegmentingPoint=function(){return this.handle.ga(P)},Ge.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Ge.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),o=e.i(i),r=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-o.x)<this.resegmentingDistance&&Math.abs(n.y-o.y)<this.resegmentingDistance&&(Ra(this,l,n,o,r,!0)||Ra(this,l,n,o,r,!1))){var u=e.points.copy();Ra(this,l,n,o,r,!0)?(u.cd(i-2,new B(l.x,(r.y+l.y)/2)),u.cd(i+1,new B(r.x,(r.y+l.y)/2))):(u.cd(i-2,new B((r.x+l.x)/2,l.y)),u.cd(i+1,new B((r.x+l.x)/2,r.y))),u.mb(i),u.mb(i-1),e.points=u,e.Xb()}else l=e.i(i+2),Math.abs(o.x-r.x)<this.resegmentingDistance&&Math.abs(o.y-r.y)<this.resegmentingDistance&&(Ra(this,n,o,r,l,!0)||Ra(this,n,o,r,l,!1))&&(u=e.points.copy(),Ra(this,n,o,r,l,!0)?(u.cd(i-1,new B(n.x,(n.y+l.y)/2)),u.cd(i+2,new B(l.x,(n.y+l.y)/2))):(u.cd(i-1,new B((n.x+l.x)/2,n.y)),u.cd(i+2,new B((n.x+l.x)/2,l.y))),u.mb(i+1),u.mb(i),e.points=u,e.Xb())}}else l=B.alloc(),_.qh(n.x,n.y,r.x,r.y,o.x,o.y,l)&&l.Bf(o)<this.resegmentingDistance*this.resegmentingDistance&&((n=e.points.copy()).mb(i),e.points=n,e.Xb()),B.free(l)}t.Ya(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Yq)}this.stopTool()},Ge.prototype.reshape=function(t){var e=this.adornedLink;e.uh();var i=this.handle.segmentIndex,n=this.Su(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===Xa?(e.L(i,e.i(i-1).x,t.y),e.L(i+1,e.i(i+2).x,t.y)):n===Ya&&(e.L(i,t.x,e.i(i-1).y),e.L(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===Xa?(e.L(i-1,e.i(i-2).x,t.y),e.L(i,e.i(i+1).x,t.y)):n===Ya&&(e.L(i-1,t.x,e.i(i-2).y),e.L(i,t.x,e.i(i+1).y));else{var o=e.i(n=i),r=e.i(n-1),l=e.i(n+1);_.B(r.x,o.x)&&_.B(o.y,l.y)?(_.B(r.x,e.i(n-2).x)&&!_.B(r.y,e.i(n-2).y)?(e.m(n,t.x,r.y),i++,n++):e.L(n-1,t.x,r.y),_.B(l.y,e.i(n+2).y)&&!_.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)):_.B(r.y,o.y)&&_.B(o.x,l.x)?(_.B(r.y,e.i(n-2).y)&&!_.B(r.x,e.i(n-2).x)?(e.m(n,r.x,t.y),i++,n++):e.L(n-1,r.x,t.y),_.B(l.x,e.i(n+2).x)&&!_.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):_.B(r.x,o.x)&&_.B(o.x,l.x)?(_.B(r.x,e.i(n-2).x)&&!_.B(r.y,e.i(n-2).y)?(e.m(n,t.x,r.y),i++,n++):e.L(n-1,t.x,r.y),_.B(l.x,e.i(n+2).x)&&!_.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):_.B(r.y,o.y)&&_.B(o.y,l.y)&&(_.B(r.y,e.i(n-2).y)&&!_.B(r.x,e.i(n-2).x)?(e.m(n,r.x,t.y),i++,n++):e.L(n-1,r.x,t.y),_.B(l.y,e.i(n+2).y)&&!_.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)),e.L(i,t.x,t.y)}else e.L(i,t.x,t.y),o=e.fromPort,null!==(n=e.fromNode)&&null!==(r=n.findVisibleNode())&&r!==n&&(o=(n=r).port),1===i&&e.computeSpot(!0,o).Mc()&&(r=o.ga(P,B.alloc()),n=e.getLinkPointFromPoint(n,o,r,t,!0,B.alloc()),e.L(0,n.x,n.y),B.free(r),B.free(n)),o=e.toPort,null!==(n=e.toNode)&&null!==(r=n.findVisibleNode())&&r!==n&&(o=(n=r).port),i===e.pointsCount-2&&e.computeSpot(!1,o).Mc()&&(i=o.ga(P,B.alloc()),t=e.getLinkPointFromPoint(n,o,i,t,!1,B.alloc()),e.L(e.pointsCount-1,t.x,t.y),B.free(i),B.free(t));e.zf()},Ge.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Su(this.handle)){case _d:return t;case Xa:return new B(e.i(i).x,t.y);case Ya:return new B(t.x,e.i(i).y);default:return e.i(i)}},Ot.Object.defineProperties(Ge.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Vt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.Ts}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.Gw}},originalPoints:{get:function(){return this.Yq}}}),Ge.prototype.setReshapingBehavior=Ge.prototype.om,Ge.prototype.getReshapingBehavior=Ge.prototype.Su;var Zd=new ut(Ge,"None",0),Ya=new ut(Ge,"Horizontal",1),Xa=new ut(Ge,"Vertical",2),_d=new ut(Ge,"All",3);function Li(){Zt.call(this),this.name="Resizing",this.o=new Pt(1,1).freeze(),this.j=new Pt(9999,9999).freeze(),this.yg=new Pt(NaN,NaN).freeze(),this.V=!1,this.ia=!0,this.ue=null;var t=new It;t.alignmentFocus=P,t.figure="Rectangle",t.desiredSize=La,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.Xq=new B,this.Ew=new Pt,this.Tn=new B,this.rt=new Pt(0,0),this.qt=new Pt(1/0,1/0),this.pt=new Pt(1,1)}function hn(){Zt.call(this),this.name="Rotating",this.ia=45,this.V=2,this.Tn=new B,this.ue=null;var t=new It;t.figure="Ellipse",t.desiredSize=xr,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Dw=0,this.kr=new B(NaN,NaN),this.u=0,this.F=50}function Ha(){Zt.call(this),this.name="ClickSelecting"}function wr(){Zt.call(this),this.name="Action",this.nk=null}function Ms(){Zt.call(this),this.name="ClickCreating",this.Ri=null,this.o=!0,this.j=!1,this.nw=new B(0,0)}function Lo(){Zt.call(this),this.name="DragSelecting",this.Hk=175,this.o=!1;var t=new wt;t.layerName="Tool",t.selectable=!1;var e=new It;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function No(){Zt.call(this),this.name="Panning",this.Xt=new B,this.yy=new B,this.xg=!1;var t=this;this.Lw=function(){var e=t.diagram;null!==e&&e.removeEventListener(At.document,"scroll",t.Lw,!1),t.stopTool()}}function br(){this.F=this.u=this.j=this.o=null}function so(t,e,i){this.text=t,this.ix=e,this.visible=i}function qi(){Zt.call(this),this.name="ContextMenu",this.o=this.ht=this.j=null,this.zw=new B,this.jt=null,this.Et=!1;var t=this;this.tu=function(){t.stopTool()}}function Kd(t){return t.preventDefault(),!1}function Zg(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(null!==i){var n=null;i instanceof br||null!==(n=e.jc(e.lastInput.documentPoint,null,null))&&n.rg(i)&&t.standardMouseClick(null,null),t.maybeStopTool(n)}}else t.canStart()&&(_g(t,!0),t.isActive||t.stopTool())}function _g(t,e,i){if(void 0===i&&(i=null),!t.Et&&(t.Et=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Et=!1,!e)){if(t.isActive=!0,e=Va,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.currentObject=i instanceof vt?i:null,t.showContextMenu(n,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Vt&&!t.currentContextMenu.visible&&t.stopTool()}}Ge.className="LinkReshapingTool",Ge.None=Zd,Ge.Horizontal=Ya,Ge.Vertical=Xa,Ge.All=_d,ln("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)}),Ut(Li,Zt),Li.prototype.updateAdornments=function(t){if(!(null===t||t instanceof st)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Oj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()&&((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i))return e=e.li(),es(t)&&this.updateResizeHandles(i,e),void t.bh(this.name,i)}t.Jf(this.name)}},Li.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Vt).type=nt.Spot,e.locationSpot=P;var i=new Ii;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,w)),e.add(this.makeHandle(t,C)),e.add(this.makeHandle(t,Y)),e.add(this.makeHandle(t,O)),e.add(this.makeHandle(t,ye)),e.add(this.makeHandle(t,Le)),e.add(this.makeHandle(t,ni)),e.add(this.makeHandle(t,_e))}else if(En(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Li.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},Li.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Yb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.Mc()&&(i=P),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else{if(!(1<=i.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof nt)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},Li.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Li.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.Cc(),this.Ea(this.name),this.Xq.set(this.adornedObject.ga(this.handle.alignment.hv())),this.Tn.set(this.adornedObject.part.location),this.Ew.set(this.adornedObject.desiredSize),this.pt=this.computeCellSize(),this.rt=this.computeMinSize(),this.qt=this.computeMaxSize(),this.isActive=!0))},Li.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.isActive=t.isMouseCaptured=!1},Li.prototype.stopTransaction=function(){var t=this.diagram,e=Zt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},Li.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Li.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,o=this.adornedObject.qs(t.lastInput.documentPoint,B.alloc()),r=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,r),this.resize(e),t.bd(),B.free(o)}},Li.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.rt,i=this.qt,n=this.pt,o=this.adornedObject.qs(t.lastInput.documentPoint,B.alloc()),r=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,r),this.resize(e),B.free(o),t.Ya(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Li.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(null!==i){if(i.desiredSize=t.size,(t=i.part).Va(),i=i.ga(this.handle.alignment.hv()),t instanceof Nt){var n=new ot;if(n.add(t),!this.dragsMembers&&null===t.placeholder){var o=new tl;o.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().re(i),!0,o)}else t.location=t.location.copy().re(i).add(this.oppositePoint);e.bd()}},Li.prototype.computeResize=function(t,e,i,n,o,r){e.Mc()&&(e=P);var l=this.adornedObject.naturalBounds,u=l.x,c=l.y,p=l.x+l.width,m=l.y+l.height,x=1;if(!r){var b=l.height;0>=(x=l.width)&&(x=1),0>=b&&(b=1),x=b/x}return b=B.alloc(),_.No(t.x,t.y,u,c,o.width,o.height,b),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(b.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=Math.max(p-t.x,i.width),t.y=Math.max(b.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=Math.max(m-t.y,i.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x):(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width),t.x=p-t.width,t.y=m-t.height)):1<=e.y?(t.x=Math.max(b.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=Math.max(p-t.x,i.width),t.height=Math.max(Math.min(b.y-c,n.height),i.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x):(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width),t.x=p-t.width)):(t.x=Math.max(b.x,p-n.width),t.x=Math.min(t.x,p-i.width),t.width=p-t.x,r||(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x,t.y=c+.5*(m-c-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(b.x-u,n.width),i.width),t.y=Math.max(b.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=Math.max(m-t.y,i.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x):(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width),t.y=m-t.height)):1<=e.y?(t.width=Math.max(Math.min(b.x-u,n.width),i.width),t.height=Math.max(Math.min(b.y-c,n.height),i.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x):(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width))):(t.width=Math.max(Math.min(b.x-u,n.width),i.width),r||(t.height=Math.max(Math.min(x*t.width,n.height),i.height),t.width=t.height/x,t.y=c+.5*(m-c-t.height))):0>=e.y?(t.y=Math.max(b.y,m-n.height),t.y=Math.min(t.y,m-i.height),t.height=m-t.y,r||(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width,t.x=u+.5*(p-u-t.width))):1<=e.y&&(t.height=Math.max(Math.min(b.y-c,n.height),i.height),r||(t.width=Math.max(Math.min(t.height/x,n.width),i.width),t.height=x*t.width,t.x=u+.5*(p-u-t.width))),B.free(b),t},Li.prototype.computeReshape=function(){var t=Ne;return this.adornedObject instanceof It&&(t=rp(this.adornedObject)),!(t===xo||this.diagram.lastInput.shift)},Li.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Li.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Li.prototype.computeCellSize=function(){var t=new Pt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},Ot.Object.defineProperties(Li.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(null!==t&&!(t.part instanceof Vt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(null!==t&&t.part instanceof Vt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},minSize:{get:function(){return this.o},set:function(t){if(!this.o.D(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.o.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.D(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.V},set:function(t){this.V=t}},dragsMembers:{get:function(){return this.ia},set:function(t){this.ia=t}},oppositePoint:{get:function(){return this.Xq},set:function(t){this.Xq.D(t)||this.Xq.assign(t)}},originalDesiredSize:{get:function(){return this.Ew}},originalLocation:{get:function(){return this.Tn}}}),Li.className="ResizingTool",ln("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)}),Ut(hn,Zt),hn.prototype.updateAdornments=function(t){if(null!==t){if(t.ph()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()){var i=t.Oj(this.name);if((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i)return i.angle=e.li(),null===i.placeholder&&(i.location=this.computeAdornmentLocation(e)),void t.bh(this.name,i)}t.Jf(this.name)}},hn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Vt).type=nt.Position,e.locationSpot=P;var i=this.handleArchetype;null!==i&&e.add(i.copy())}else if(En(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},hn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},hn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ea(this.name),this.Dw=this.adornedObject.angle,this.kr=this.computeRotationPoint(this.adornedObject),this.Tn=this.adornedObject.part.location.copy(),this.isActive=!0)},hn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.sb()?t.ga(e.rotationSpot):t===e||t===i?i.ga(e.locationSpot):t.ga(P)},hn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.qs(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return 0===i?e.x=t.naturalBounds.width+n:45===i?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):90===i?e.y=t.naturalBounds.height+n:135===i?(e.x=-n,e.y=t.naturalBounds.height+n):180===i?e.x=-n:225===i?(e.x=-n,e.y=-n):270===i?e.y=-n:315===i&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ga(e)},hn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.kr=new B(NaN,NaN),this.isActive=t.isMouseCaptured=!1},hn.prototype.stopTransaction=function(){var t=this.diagram,e=Zt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.$j(),e},hn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},hn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},hn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Ya(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},hn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Va();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Tn.copy(),e.location=i.re(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.bd()}},hn.prototype.computeRotate=function(t){t=this.rotationPoint.ab(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.li()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Ot.Object.defineProperties(hn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Vt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(null!==t&&t.part instanceof Vt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},snapAngleMultiple:{get:function(){return this.ia},set:function(t){this.ia=t}},snapAngleEpsilon:{get:function(){return this.V},set:function(t){this.V=t}},originalAngle:{get:function(){return this.Dw}},rotationPoint:{get:function(){return this.kr},set:function(t){this.kr=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),hn.className="RotatingTool",ln("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)}),Ut(Ha,Zt),Ha.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Ha.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Ha.className="ClickSelectingTool",Ut(wr,Zt),wr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.jc(e.documentPoint,function(n){for(;null!==n.panel&&!n.isActionable;)n=n.panel;return n});return!(null===i||!i.isActionable||(this.nk=i,t.Bk=t.jc(e.documentPoint,null,null),0))},wr.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},wr.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},wr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;null!==i.panel&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},wr.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.nk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},wr.prototype.doStop=function(){this.nk=null},wr.className="ActionTool",Ut(Ms,Zt),Ms.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.nw=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.nw))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.Ol(t.lastInput.documentPoint,!0))},Ms.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},Ms.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(null===i)return null;var n=null;try{if(e.S("ChangingSelection",e.selection),this.Ea(this.name),i instanceof wt)i.Zc()&&(En(i),null!==(n=i.copy())&&e.add(n));else if(null!==i){var o=e.model.copyNodeData(i);ue(o)&&(e.model.xf(o),n=e.Lc(o))}if(null!==n){var r=B.allocAt(t.x,t.y);this.isGridSnapEnabled&&yf(this.diagram,n,t,r),n.location=r,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),B.free(r)}e.Ya(),this.transactionResult=this.name,e.S("PartCreated",n)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return n},Ot.Object.defineProperties(Ms.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){this.Ri=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),Ms.className="ClickCreatingTool",Ut(Lo,Zt),Lo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.Ol(e.documentPoint,!0)))},Lo.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Lo.prototype.doDeactivate=function(){var t=this.diagram;t.ug(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Lo.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),i=this.box.fb("SHAPE");null===i&&(i=this.box.Qb());var n=Pt.alloc().h(e.width,e.height);i.desiredSize=n,this.box.mm(e.x,e.y,!1),Pt.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},Lo.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Lo.prototype.computeBoxBounds=function(){var t=this.diagram;return new $(t.firstInput.documentPoint,t.lastInput.documentPoint)},Lo.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.vx(t,this.isPartialInclusion),gn?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(i=new ot,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},Ot.Object.defineProperties(Lo.prototype,{delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Lo.className="DragSelectingTool",Ut(No,Zt),No.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},No.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener(At.document,"scroll",this.Lw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Xt.assign(t.position)),this.isActive=!0},No.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},No.prototype.doCancel=function(){var t=this.diagram;t.position=this.Xt,t.isMouseCaptured=!1,this.stopTool()},No.prototype.doMouseMove=function(){this.move()},No.prototype.doMouseUp=function(){this.move(),this.stopTool()},No.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,o=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(o=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.yy.h(o,i)}},Ot.Object.defineProperties(No.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Xt}}}),No.className="PanningTool",ln("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),ln("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),ln("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),ln("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),ln("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)}),Ot.Object.defineProperties(br.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),br.className="HTMLInfo",so.className="ContextMenuButtonInfo",Ut(qi,Zt),qi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},qi.prototype.doStart=function(){this.zw.set(this.diagram.firstInput.documentPoint)},qi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},qi.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,n=null;if(t instanceof q||(n=t instanceof vt?t:e.jc(e.lastInput.documentPoint,null,function(o){return!o.layer.isTemporary})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(null!==e.contextMenu)return e;return null},qi.prototype.doActivate=function(){},qi.prototype.doMouseDown=function(){if(Zt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Vt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Zg(this)},qi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Vt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Zg(this)},qi.prototype.maybeStopTool=function(){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())},qi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},qi.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Vt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale);var n=t.diagram;null!==n&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Va(),this.positionContextMenu(t,e)}else t instanceof br&&t.show(e,i,this);this.currentContextMenu=t},qi.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5/e.scale),i.x<o.x&&(i.x=o.x),i.y+n.height>o.bottom&&(i.y-=n.height+5/e.scale),i.y<o.y&&(i.y=o.y),t.position=i}},qi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Vt?(t.remove(e),null!==this.ht&&this.ht.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof br&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},qi.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.jt&&(this.jt=function Cv(t){var e=new ot;return e.add(new so("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new so("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new so("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new so("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new so("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new so("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new so("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new so("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new so("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new so("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new so("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new so("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new so("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}(this)),Ql.innerHTML="",$l.addEventListener("pointerdown",this.tu,!1);var e=this,i=kt("ul");i.className="goCXul",Ql.appendChild(i),i.innerHTML="";for(var n=this.jt.iterator;n.next();){var o=n.value,r=o.visible;if("function"==typeof o.ix&&("function"!=typeof r||r(t))){(r=kt("li")).className="goCXli";var l=kt("a");l.className="goCXa",l.href="#",l.ly=o.ix,l.addEventListener("pointerdown",function(u){return this.ly(t),e.stopTool(),u.preventDefault(),!1},!1),l.textContent=o.text,r.appendChild(l),i.appendChild(r)}}Ql.style.display="block",$l.style.display="block"},qi.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Va){Ql.style.display="none",$l.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener($l,"pointerdown",this.tu,!1),this.currentContextMenu=null}},Ot.Object.defineProperties(qi.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.ht=t instanceof Vt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Jd&&null===Va&&Un&&function Mv(t){var e=new br;e.show=function(o,r,l){l.showDefaultContextMenu()},e.hide=function(o,r){r.hideDefaultContextMenu()},Va=e,t.tu=function(){t.stopTool()},e=kt("div");var i=kt("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=kt("style");At.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(n=t.diagram)&&(n.addEventListener(e,"contextmenu",Kd,!1),n.addEventListener(e,"selectstart",Kd,!1),n.addEventListener(i,"contextmenu",Kd,!1)),e.className="goCXforeground",i.className="goCXbackground",At.document.body&&(At.document.body.appendChild(e),At.document.body.appendChild(i)),Ql=e,$l=i,Jd=!0}(this),Va},set:function(t){null===t&&(Jd=!0),Va=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.zw}}});var Va=null,Jd=!1,$l=null,Ql=null;function ge(){Zt.call(this),this.name="TextEditing",this.Zh=new re,this.ia=null,this.V=$d,this.vj=null,this.qa=th,this.u=1,this.F=!0,this.o=null,this.j=new br,this.kt=null,function Av(t,e){if(Un){var i=kt("textarea");t.kt=i,i.addEventListener("input",function(){if(null!==t.textBlock){var n=t.Mx(this.value);this.style.width=20+n.measuredBounds.width*this.xA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(!n.isComposing&&null!==t.textBlock){var o=n.key;"Enter"===o?(!1===t.textBlock.isMultiline&&n.preventDefault(),t.acceptText(Tu)):"Tab"===o?(t.acceptText(qd),n.preventDefault()):"Escape"===o&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==th){var n=t.kt;t.qa===eh&&(t.qa=Lu),"function"==typeof n.select&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==th){var n=t.kt;"function"==typeof n.focus&&n.focus(),"function"==typeof n.select&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,o,r){if(n instanceof re&&r instanceof ge)if(r.state===ih)i.style.border="3px solid red",i.focus();else{var l=n.ga(P),u=o.position,c=o.scale,p=n.Df()*c;p<r.minimumEditorScale&&(p=r.minimumEditorScale);var m=n.naturalBounds.width*p+6,x=n.naturalBounds.height*p+2,b=(l.x-u.x)*c;l=(l.y-u.y)*c,x=(u=n.verticalAlignment).y*x-u.y*(c=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*p)+u.offsetY-(.5*x-.5*c)-c/2,i.value=n.text,o.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*p+"%",i.style.lineHeight="normal",i.style.width=m+"px",i.style.left=(b-m/2|0)-1+"px",i.style.top=(l+x|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.xA=p,i.className="goTXarea",o.div.appendChild(i),i.focus(),r.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}(this,this.j)}function Kg(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(null!==e&&null!==n){var o=e.text,r="";null!==n.valueFunction&&(r=n.valueFunction()),t.isValidText(e,o,r)?(t.Ea(t.name),t.qa=tf,t.transactionResult=t.name,e.text=r,t.doSuccess(o,r),null!==i&&i.S("TextEdited",e,o),t.stopTransaction(),t.stopTool(),null!==i&&i.doFocus()):(t.qa=ih,t.doError(o,r))}}qi.className="ContextMenuTool",ln("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)}),Ut(ge,Zt),ge.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||ta&&ta!==this&&(ta.acceptText(Pu),ta&&ta!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.jc(t.lastInput.documentPoint);return!!(null!==e&&e instanceof re&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===$d&&!e.isSelected||this.starting===qg&&2>t.lastInput.clickCount)},ge.prototype.doStart=function(){ta=this,null!==this.textBlock&&this.doActivate()},ge.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.jc(t.lastInput.documentPoint)),null!==e&&e instanceof re&&(this.textBlock=e,null!==e.part)){t.animationManager.Cc(),this.isActive=!0,this.qa=eh;var i=this.defaultTextEditor;null!==e.textEditor&&(i=e.textEditor),this.Zh=this.textBlock.copy();var n=new $(this.textBlock.ga(w),this.textBlock.ga(Y));t.uv(n),i.show(e,t,this),this.currentTextEditor=i}}}},ge.prototype.doCancel=function(){this.stopTool()},ge.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},ge.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Pu)},ge.prototype.acceptText=function(t){switch(t){case Pu:this.qa===tf?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.qa===eh||this.qa===ih||this.qa===Lu)&&(this.qa=Qd,Kg(this));break;case Jg:case Tu:case qd:(Tu!==t||!0!==this.textBlock.isMultiline)&&(this.qa===eh||this.qa===ih||this.qa===Lu)&&(this.qa=Qd,Kg(this))}},ge.prototype.doError=function(t,e){var i=this.textBlock;null!==i.errorFunction&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},ge.prototype.doSuccess=function(t,e){var i=this.textBlock;null!==i.textEdited&&i.textEdited(i,t,e)},ge.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.qa=th,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},ge.prototype.doStop=function(){ta=null},ge.prototype.isValidText=function(t,e,i){var n=this.textValidation;return!(null!==n&&!n(t,e,i)||null!==(n=t.textValidation)&&!n(t,e,i))},ge.prototype.Mx=function(t){var e=this.Zh;return e.text=t,e.measure(this.textBlock.Ih,1/0),e},Ot.Object.defineProperties(ge.prototype,{textBlock:{get:function(){return this.ia},set:function(t){this.ia=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.V},set:function(t){this.V=t}},textValidation:{get:function(){return this.vj},set:function(t){this.vj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this.qa=t)}}}),ge.prototype.measureTemporaryTextBlock=ge.prototype.Mx;var Jg=new ut(ge,"LostFocus",0),Pu=new ut(ge,"MouseDown",1),qd=new ut(ge,"Tab",2),Tu=new ut(ge,"Enter",3),Pv=new ut(ge,"SingleClick",0),$d=new ut(ge,"SingleClickSelected",1),qg=new ut(ge,"DoubleClick",2),th=new ut(ge,"StateNone",0),eh=new ut(ge,"StateActive",1),Lu=new ut(ge,"StateEditing",2),Qd=new ut(ge,"StateValidating",3),ih=new ut(ge,"StateInvalid",4),tf=new ut(ge,"StateValidated",5),ta=null;function wn(t){Ou||(em(),Ou=!0),this.H=Za,this.Nk=this.Ab=this.vq=this.cc=!1,this.Rw=!0,this.Ok=Eu,this.Dm=!1,this.Gh=this.Jd=!0,this.Dg=600,this.dw=this.Pw=!1,this.Zd=new rt,this.ce=new Si,this.ce.Yd=this,this.Ei=new rt,this.pu=new rt,this.Sr=new rt,this.pr=new rt,t&&Object.assign(this,t)}function Sr(t,e){t.Jd&&t.canStart(e)&&(t.Zd.add(e),t.defaultAnimation.isAnimating&&t.Cc(),Ni(t.H),t.Ab=!0)}function ef(t){if(t.Jd&&t.Ab){var e=t.ce,i=t.H,n=t.Zd.contains("Model");n&&(t.Nk=!0,t.Ok===Eu?(e.isViewportUnconstrained=!0,e.vc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Ok===nm&&e.vc.clear(),t.Rw=!(t.Ok!==im||!i.du.D(i.pa)),i.S("InitialAnimationStarting",t)),n&&!t.Gh||0===e.vc.count?(t.Zd.clear(),t.Ab=!1,e.vc.clear(),Du(e,i),t.Nk=!1,i.N()):(t.Zd.clear(),i.kg=!1,n=e.vc.get(i),i.autoScale!==bn&&null!==n&&(delete n.start.scale,delete n.end.scale),At.requestAnimationFrame(function(){!1===t.Ab||e.cc||(i.Gf("temporaryPixelRatio")&&oh(i),af(i),t.Ab=!1,e.start(),e.cc&&(Ga(t),i.Ya(),rm(e,0),kr(i,!0),Wa(t),i.S("AnimationStarting",t)))}))}}function Nu(t){return t.Zd.contains("Trigger")&&1===t.Zd.count}function $g(t,e,i,n){t.isTicking||Nu(t)||e instanceof st&&(null!==e.fromNode||null!==e.toNode)||t.ce.add(e,"position",i,n,!1)}function Ga(t){if(!t.vq){var e=t.H;t.Pw=e.skipsUndoManager,t.dw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.vq=!0}}function Wa(t){var e=t.H;e.skipsUndoManager=t.Pw,e.skipsModelSourceBindings=t.dw,t.vq=!1}function Qg(t,e,i){!t.Ab||e.D(i)||Nu(t)||(t.H.pi||(e=i.copy()),of(t.ce,t.H,"position",e,i))}function nf(t,e,i){e.fd&&(e.Tg=i,t.pr.add(e))}function tm(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.fd&&(i.Tg=i.points.copy(),t.pr.add(i))}}function Fu(t,e,i,n,o){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var r=t[0],l=t[1],u=t[2];t=t[3];var c=e[0],p=e[1],m=e[2];return e=e[3],0===u||100===u?(r=c,l=p):(0===m||100===m)&&(c=r,p=l),180<Math.abs(c-r)&&(c>r?r+=360:c+=360),"hsla("+(r=o(i,r,c-r,n)%360)+", "+(l=o(i,l,p-l,n))+"%, "+(u=o(i,u,m-u,n))+"%, "+(i=o(i,t,e-t,n))+")"}function em(){function t(i,n,o,r,l,u){i.position=new B(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u))}var e=new Tt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,o,r,l,u){l<u?i.mm(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u),!1):i.position=new B(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u))}),e.add("location",function(i,n,o,r,l,u){l<u?i.mm(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u),!0):i.location=new B(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u))}),e.add("position:placeholder",function(i,n,o,r,l,u){l<u?i.mm(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u),!1):i.position=new B(r(l,n.x,o.x-n.x,u),r(l,n.y,o.y-n.y,u))}),e.add("position:nodeCollapse",function(i,n,o,r,l,u){var c=i.actualBounds,p=o.actualBounds;o=p.x+p.width/2-c.width/2,c=p.y+p.height/2-c.height/2,l<u?i.mm(r(l,n.x,o-n.x,u),r(l,n.y,c-n.y,u),!1):i.position=new B(r(l,n.x,o-n.x,u),r(l,n.y,c-n.y,u))}),e.add("desiredSize",function(i,n,o,r,l,u){i.desiredSize=new $(r(l,n.width,o.width-n.width,u),r(l,n.height,o.height-n.height,u))}),e.add("width",function(i,n,o,r,l,u){i.width=r(l,n,o-n,u)}),e.add("height",function(i,n,o,r,l,u){i.height=r(l,n,o-n,u)}),e.add("fill",function(i,n,o,r,l,u){i.fill=Fu(n,o,l,u,r)}),e.add("stroke",function(i,n,o,r,l,u){i.stroke=Fu(n,o,l,u,r)}),e.add("strokeWidth",function(i,n,o,r,l,u){i.strokeWidth=r(l,n,o-n,u)}),e.add("strokeDashOffset",function(i,n,o,r,l,u){i.strokeDashOffset=r(l,n,o-n,u)}),e.add("background",function(i,n,o,r,l,u){i.background=Fu(n,o,l,u,r)}),e.add("areaBackground",function(i,n,o,r,l,u){i.areaBackground=Fu(n,o,l,u,r)}),e.add("opacity",function(i,n,o,r,l,u){i.opacity=r(l,n,o-n,u)}),e.add("scale",function(i,n,o,r,l,u){i.scale=r(l,n,o-n,u)}),e.add("angle",function(i,n,o,r,l,u){i.angle=r(l,n,o-n,u)}),Iu=e}ge.className="TextEditingTool",ge.LostFocus=Jg,ge.MouseDown=Pu,ge.Tab=qd,ge.Enter=Tu,ge.SingleClick=Pv,ge.SingleClickSelected=$d,ge.DoubleClick=qg,ge.StateNone=th,ge.StateActive=eh,ge.StateEditing=Lu,ge.StateValidating=Qd,ge.StateInvalid=ih,ge.StateValidated=tf,ln("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)}),wn.prototype.Xe=function(t){this.H=t},wn.prototype.canStart=function(){return!0},(v=wn.prototype).gv=function(t){return this.ce.gv(t)},v.Yu=function(t){return this.ce.Yu(t)},v.Cc=function(t){var e=this.ce;if(!0===this.Ab&&(this.Nk=this.Ab=!1,this.Zd.clear(),0<e.vc.count&&this.H.ac()),this.cc){if(e.Ml(!0),e.vc.clear(),Du(e,null),!0===t)for(t=this.Ei.Fa(),e=0;e<t.length;e++)t[e].Ml(!0)}else e.vc.clear(),Du(e,this.H)},v.Ml=function(t){t===this.defaultAnimation&&this.defaultAnimation.vc.clear(),this.Ei.remove(t),0===this.Ei.count&&(this.cc=!1,this.H.ac()),t===this.defaultAnimation&&(this.defaultAnimation.vc.clear(),this.H.S("AnimationFinished",this))},v.Cj=function(t,e){this.Ab&&(this.Zd.contains("Expand Tree")||this.Zd.contains("Expand SubGraph"))&&(this.ce.Cj(t,e),tm(this,t))},v.Aj=function(t,e){this.Ab&&(this.Zd.contains("Collapse Tree")||this.Zd.contains("Collapse SubGraph"))&&(this.ce.Aj(t,e),of(this.ce,e,"position",e.position,e.position),tm(this,t))},Ot.Object.defineProperties(wn.prototype,{animationReasons:{get:function(){return this.Zd}},isEnabled:{get:function(){return this.Jd},set:function(t){(this.Jd=t)&&this.Ei.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Dg},set:function(t){1>t&&le(t,">= 1",wn,"duration"),this.Dg=t}},isAnimating:{get:function(){return this.cc}},isTicking:{get:function(){return this.vq}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t}},defaultAnimation:{get:function(){return this.ce}},activeAnimations:{get:function(){return this.Ei}},initialAnimationStyle:{get:function(){return this.Ok},set:function(t){this.Ok=t}}}),wn.prototype.stopAnimation=wn.prototype.Cc;var Iu=null,Ou=!1,Eu=new ut(wn,"Default",1),im=new ut(wn,"AnimateLocations",2),nm=new ut(wn,"None",3);function Si(t){this.vu=this.Ow=this.Yd=this.H=null,this.Wk=this.cc=this.j=!1,this.cn=this.Qd=0,this.Lp=this.ot=sm,this.Vk=this.ho=!1,this.cu=1,this.au=0,this.Gd=this.Dg=NaN,this.hw=0,this.dn=null,this.o=no,this.vc=new Tt,this.Tt=new Tt,this.yl=new rt,this.Ut=new rt,this.ew=As,t&&Object.assign(this,t)}function Du(t,e){if(t.Tt.clear(),t.Vk=!1,t.au=0,t.Gd=NaN,0<t.yl.count&&t.yl.clear(),0<t.Ut.count&&t.Ut.clear(),null!==e)for(t=e.links;t.next();)t.value.Tg=null}function of(t,e,i,n,o,r){var l=t.vc;if(e instanceof q&&"position"===i&&(i="position:diagram"),("fill"===i||"stroke"===i||"background"===i||"areaBackground"===i)&&(ir(n),Xf(),n=[cn.j,cn.u,cn.o,cn.F],ir(o),Xf(),o=[cn.j,cn.u,cn.o,cn.F]),l.contains(e)){var u=l.I(e),c=u.start,p=u.end;void 0===c[i]&&(c[i]=Ua(n)),p[i]=Ua(o)}else p={},(c={})[i]=Ua(n),p[i]=Ua(o),u=c.position,e instanceof vt&&u instanceof B&&!u.w()&&e.diagram.animationManager.Zd.contains("Expand SubGraph")&&u.assign(p.position),u=new lm(c,p,r),l.add(e,u);(l=c[i])instanceof B&&!l.w()&&l.assign(t.o),r&&0===i.indexOf("position:")&&e instanceof wt?u.Lu.location=Ua(e.location):r&&(u.Lu[i]=Ua(n))}function Ua(t){return t instanceof B||t instanceof Pt?t.copy():t}function om(t,e){if(!t.Wk||e){var i=t.Yd;if(!1!==t.cc){var n=+new Date,o=n>t.cn?t.Gd:n-t.Qd;e&&((o=t.hw)<t.Gd?(t.Qd=+new Date-o,t.cn=t.Qd+t.Gd):o=t.Gd),Ga(i),rm(t,o),kr(t.H,!0),Wa(i),n>t.cn&&(t.ho&&!t.Vk?(t.Qd=+new Date,t.cn=t.Qd+t.Gd,t.Vk=!0):t.Ml(!1))}}}function rm(t,e){for(var i=t.Gd,n=t.vc.iterator,o=t.Vk;n.next();){var r=n.key;if(!(r instanceof vt&&null===r.diagram)){var l=n.value,u=o?l.end:l.start;l=o?l.start:l.end;var p,c=Iu;for(p in l)"position"===p&&(l["position:placeholder"]||l["position:nodeCollapse"])||null===c.get(p)||c.get(p)(r,u[p],l[p],t.Lp,e,i,t)}}}function sm(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function am(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function lm(t,e,i){this.start=t,this.end=e,this.Lu={},this.Iu=i,this.ov=!1}function Fo(t,e,i){this.xd=null,this.rf=t,this.so=i||hm,this.tk=null,void 0!==e&&(this.tk=e,void 0===i&&(this.so=rf))}wn.className="AnimationManager",wn.defineAnimationEffect=function(t,e){Ou||(em(),Ou=!0),Iu.add(t,e)},wn.Default=Eu,wn.AnimateLocations=im,wn.None=nm,Si.prototype.suspend=function(){this.Wk=!0},Si.prototype.advanceTo=function(t,e){e&&(this.Wk=!1),this.ho&&t>=this.Gd&&(this.Vk=!0,t-=this.Gd),this.hw=t,om(this,!0),Ga(this.Yd),kr(this.H),Wa(this.Yd),this.H.redraw()},(v=Si.prototype).start=function(){if(0===this.vc.count||this.cc)return this;for(var t=this.H,e=this.vc.iterator;e.next();){var i=e.key;null===t&&(i instanceof q?t=i:i instanceof vt&&(t=i.diagram))}return null===t||(this.H=t,this.Yd=t.animationManager,!1===(e=this.Yd).isEnabled||(this.Gd=isNaN(this.Dg)?e.duration:this.Dg,this.Lp=this.ot,e.Nk&&e.Ok===Eu&&this===e.defaultAnimation&&(this.Lp=am,this.Gd=isNaN(this.Dg)?600===e.duration?900:e.duration:this.Dg),this.ew=t.scrollMode,this.isViewportUnconstrained&&(t.sj=Tf),Ga(e),this.yl.each(function(n){n.data=null,t.add(n)}),Wa(e),this.cc=!0,this.Qd=+new Date,this.cn=this.Qd+this.Gd,function Tv(t,e){function i(){if(0<o.Sr.count&&(n.addAll(o.Sr),o.Sr.clear(),o.cc=!0),!1!==o.cc&&0!==n.count){o.pu.addAll(n);for(var r=o.pu.iterator;r.next();){var l=r.value;if(!1!==l.cc){t:if(0<l.yl.count)var u=!0;else{for(u=l.vc.iterator;u.next();){var c=u.key;if(c instanceof vt&&null!==c.diagram||c instanceof q){u=!0;break t}}u=!1}u?om(l,!1):l.Wk=!0}}o.pu.clear(),!1!==o.cc&&(Ga(o),kr(o.H),Wa(o)),At.requestAnimationFrame(i)}}var n=t.Ei,o=t;t.cc?t.Sr.add(e):(t.cc=!0,n.add(e),At.requestAnimationFrame(function(){i()}))}(e,this))),this},v.Jy=function(t,e){return t.Zc()?(this.yl.add(t),this.H=e,this):this},v.add=function(t,e,i,n,o){if("position"===e&&i.Xa(n))return this;if(null===this.H&&(t instanceof q?this.H=t:t instanceof vt&&null!==t.diagram&&(this.H=t.diagram)),t instanceof wt){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return of(this,t,e,i,n,o),this},v.gv=function(t){return!!this.cc&&null!==(t=this.vc.I(t))&&t.ov},v.Yu=function(t){return!!this.cc&&null!==(t=this.vc.I(t))&&(t.start.position||t.start.location)},v.stop=function(){return this.cc?(this.Ml(!0),this):this},v.Ml=function(t){if(null!==this.vu&&this.vu.jo.remove(this.Ow),this.cc){var e=this.H,i=this.Yd;this.Wk=this.cc=i.Nk=!1,Ga(i);for(var n=this.vc,o=this.yl.iterator;o.next();)e.remove(o.value);for(o=this.Ut.iterator;o.next();)o.value.v();o=this.ho,n=n.iterator;for(var r=Iu;n.next();){var x,l=n.key,u=n.value,c=o?u.end:u.start,p=o?u.start:u.end,m=u.Lu;for(x in p)if(null!==r.get(x)){var b=x;!u.Iu||"position:nodeCollapse"!==b&&"position:placeholder"!==b||(b="position"),r.get(b)(l,c[x],void 0!==m[x]?m[x]:u.Iu?c[x]:p[x],this.Lp,this.Gd,this.Gd,this)}u.Iu&&void 0!==m.location&&l instanceof wt&&(l.location=m.location),u.ov&&l instanceof wt&&l.$b(!1)}if(e.As.clear(),Bu(e,!1),e.Ya(),e.N(),kr(e,!0),i.defaultAnimation===this){for(x=i.pr.iterator;x.next();)null!==(o=x.value).Tg&&(o.points=o.Tg,o.Tg=null);i.pr.clear()}kr(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.ew),Wa(i),this.au++,!t&&this.cu>this.au?(this.Vk=!1,this.start()):(this.dn&&this.dn(this),Du(this,null),i.Ml(this),e.ac())}},v.Cj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof Nt&&(n=e.placeholder),null!==n?((i=n.ga(w)).x+=(n=n.padding).left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new B(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof Nt)for(t=t.memberParts;t.next();)(n=t.value)instanceof dt&&this.Cj(n,e)},v.Aj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof Nt&&(i=e.placeholder),null!==i){var n=i.ga(w);n.x+=(i=i.padding).left,n.y+=i.top,this.add(t,"position:placeholder",t.position,n,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);if(this.add(t,"scale",t.scale,.01,!0),(n=this.vc).contains(t)&&(n.I(t).ov=!0),t instanceof Nt)for(t=t.memberParts;t.next();)(n=t.value)instanceof dt&&this.Aj(n,e)}},v.Fz=function(t){var e=this.Tt.get(t);return null===e&&this.Tt.add(t,e={}),e},Ot.Object.defineProperties(Si.prototype,{duration:{get:function(){return this.Dg},set:function(t){1>t&&le(t,">= 1",Si,"duration"),this.Dg=t}},reversible:{get:function(){return this.ho},set:function(t){this.ho=t}},runCount:{get:function(){return this.cu},set:function(t){0<t?this.cu=t:it("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t)}},easing:{get:function(){return this.ot},set:function(t){this.ot=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.cc}}}),Si.prototype.getTemporaryState=Si.prototype.Fz,Si.prototype.stop=Si.prototype.stop,Si.prototype.add=Si.prototype.add,Si.prototype.addTemporaryPart=Si.prototype.Jy,Si.className="Animation",Si.EaseLinear=function(t,e,i,n){return i*t/n+e},Si.EaseInOutQuad=sm,Si.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},Si.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},Si.EaseInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},Si.EaseOutExpo=am,lm.className="AnimationState",Fo.prototype.copy=function(){var t=new Fo(this.rf);t.so=this.so;var e=this.tk;if(null!==e){var i={};void 0!==e.duration&&(i.duration=e.duration),void 0!==e.finished&&(i.finished=e.finished),void 0!==e.easing&&(i.easing=e.easing),t.tk=i}return t},Ot.Object.defineProperties(Fo.prototype,{propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},animationSettings:{get:function(){return this.tk},set:function(t){this.tk=t}},startCondition:{get:function(){return this.so},set:function(t){this.so=t}}});var cm,Za,hm=new ut(Fo,"Default",1),rf=new ut(Fo,"Immediate",2),um=new ut(Fo,"Bundled",3);function ki(t){ee(this),this.H=null,this.Pa=new ot,this.xa="",this.pb=1,this.o=!1,this.j=this.Uh=this.u=this.Oi=this.Ni=this.Mi=this.Li=this.Ji=this.Ki=this.Ii=this.Qi=this.Hi=this.Pi=this.Gi=this.Fi=!0,this.Zq=[],t&&Object.assign(this,t)}function nh(t,e){var i=1;return 1!==t.pb&&(e.globalAlpha=(i=e.globalAlpha)*t.pb),i}function Fv(t,e,i,n,o){if(t.visible&&0!==t.pb&&(o||!t.isTemporary)){var r=(o=t.Pa.s).length;if(0!==r){var l=nh(t,e),u=t.Zq;u.length=0;for(var c=i.scale,p=$.alloc(),m=0;m<r;m++){var x=o[m];n.contains(x)&&t.Nj(e,x,i,u,c,p,!1)}$.free(p),e.globalAlpha=l}}}function ju(t,e,i){if(e=function Iv(t,e,i){var n=i.zOrder;if(isNaN(n))return e;var o=(t=t.Pa).count;if(1>=o)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var r=e-1,l=NaN;0<=r&&(l=t.M(r).zOrder,isNaN(l));)r--;for(var u=e+1,c=NaN;u<o&&(c=t.M(u).zOrder,isNaN(c));)u++;if(!isNaN(l)&&l>n)for(;;){if(-1===r||l<=n){if(++r===e)break;return t.mb(e),t.Hb(r,i),r}for(l=NaN;0<=--r&&(l=t.M(r).zOrder,isNaN(l)););}else if(!isNaN(c)&&c<n)for(;;){if(u===o||c>=n){if(--u===e)break;return t.mb(e),t.Hb(u,i),u}for(c=NaN;++u<o&&(c=t.M(u).zOrder,isNaN(c)););}return e}(t,e,i),i instanceof Nt&&null!==i&&isNaN(i.zOrder)){if(0!==i.memberParts.count){for(var n=-1,o=t.Pa.s,r=o.length,l=0;l<r;l++){var u=o[l];if(u===i&&(e=l,0<=n)||0>n&&u.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&((o=t.Pa).mb(e),o.Hb(n,i))}null!==(e=i.containingGroup)&&ju(t,-1,e)}null!==i.svg&&i.svg.remove()}function q(t,e){if(Rm||(function Gv(){if(Un){var t=At.document.createElement("canvas");t.getContext("2d"),zm=t}}(),Rm=!0),ee(this),Za=this,this.wb=!0,this.Ka=null,this.ya=this.Aa=0,this.ta=null,Un){var i=this,n=function(){i.removeEventListener(At.document,"DOMContentLoaded",n,!1),i.setRTL()};null!==At.document.body?this.setRTL():i.addEventListener(At.document,"DOMContentLoaded",n,!1)}this.ol=null,Vu.add("Model",Jt);var o=this;return this.Ib=function(r){var l=o.partManager;if(r.model===l.diagram.model&&l.diagram.aa){l.diagram.aa=!1;try{""===r.modelChange&&r.change===ve&&l.updateDataBindings(r.object,r.propertyName)}finally{l.diagram.aa=!0}}},this.Oc=function(r){o.partManager.doModelChanged(r)},this.hu=this.ku=null,dm(this),this.model=Gp(),this.Wg=!0,gm(this),this.layout=new pe,this.Wg=!1,this.bk=this.dk=this.ek=this.ck=this.ui=this.bA=this.Zj=this.Pv=null,this.gk=function(){},this.preventDefault=null,this.rn=!1,this.Yf=new Ym,void 0!==t&&("string"==typeof t||At.Element&&t instanceof Element?sf(this,t):e=t),this.wb=!1,e&&this.nm(e),this}function dm(t){t.Yd=new wn,t.Yd.Xe(t),t.Eb=17,t.Hw=!1,t.tn=!1,t.bu="default",t.Wa=new ot,t.pj=new Tt,t.nl="default",t.Ux(),t.Tx(),t.pb=1,t.pa=new B(NaN,NaN).freeze(),t.du=new B(NaN,NaN),t.Ca=1,t.Pp=1,t.zt=new B(NaN,NaN).freeze(),t.At=NaN,t.Ot=1e-4,t.Mt=100,t.Bb=new zt,t.zu=new B(NaN,NaN).freeze(),t.ut=new $(NaN,NaN,NaN,NaN).freeze(),t.rj=new R(0,0,0,0).freeze(),t.sj=As,t.nu=!1,t.Zt=null,t.fu=null,t.yh=bn,t.yk=Bt,t.Fg=bn,t.pq=Bt,t.yt=w,t.Bt=w,t.Fc=!0,t.pn=!1,t.De=new rt,t.Eh=new Tt,t.Xm=!0,t.vp=250,t.uk=-1,t.xp=new R(16,16,16,16).freeze(),t.kg=!1,t.Ik=!1,t.fn=!0,t.bq=new xn,t.bq.diagram=t,t.Qg=new xn,t.Qg.diagram=t,t.cj=new xn,t.cj.diagram=t,t.zg=null,t.pf=null,t.qu=!1,function Hv(t){function e(o){var r=o.toLowerCase(),l=new ot;i.add(o,l),i.add(r,l),n.add(o,o),n.add(r,o)}var i=new Tt,n=new Tt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.jw=i,t.iw=n}(t),t.ai=new rt,t.Ht=!0,t.uu=ia,t.qw=!1,t.wu=Pf,t.it="auto",t.Op="auto",t.zh=null,t.Fh=null,t.Bh=null,t.Qh=null,t.Oh=null,t.Nh=null,t.Qt=null,t.Lh=null,t.xt=!1,t.Mh=null,t.Ph=null,t.$h=null,t.Ch=null,t.Rt=!1,t.Yt={},t.oj=[null,null],t.Wg=!1,t.Jw=!1,t.ou=!1,t.lt=!1,t.sw=!0,t.ld=!1,t.$i=!1,t.Uw=!0,t.Ce=-2,t.Og=new Tt,t.Xn=new ot,t.Gg=!1,t.Jd=!0,t.Us=!0,t.Fi=!0,t.Gi=!0,t.Vs=!1,t.Ws=!0,t.Pi=!0,t.Hi=!0,t.Qi=!0,t.Ys=!0,t.Ii=!0,t.Ki=!0,t.Ji=!0,t.Li=!0,t.Mi=!0,t.Ni=!0,t.Oi=!0,t.Zs=!0,t.at=!0,t.rw=!1,t.Uk=!1,t.mn=!0,t.nn=!0,t.Xs=!0,t.$s=!0,t.iu=16,t.mu=16,t.qr=!1,t.gu=!1,t.lu=0,t.ju=0,t.zb=new R(5).freeze(),t.Iw=(new rt).freeze(),t.Nt=999999999,t.ow=(new rt).freeze(),t.Zi=!0,t.Ee=!0,t.vd=!0,t.Be=!1,t.gf=!1,t.xh=!0,t.hf=!1,t.ty=new rt,t.pw=new rt,t.Xh=null,t.bw=new Pt(8,8),t.cw=999,t.Cw=1,t.Kw=0,t.gc={scale:1,position:new B,bounds:new $,Qy:new Pt,cA:new Pt,Pz:!1},t.gc.canvasSize=t.gc.Qy,t.gc.newCanvasSize=t.gc.cA,t.gc.isScroll=!1,t.Sw=new $(NaN,NaN,NaN,NaN).freeze(),t.wo=new Pt(NaN,NaN).freeze(),t.Sp=new $(NaN,NaN,NaN,NaN).freeze(),t.It=!1,t.Lg=new Tt;var e=new dt,i=new re;i.bind(new Ee("text","",bi)),e.add(i),t.oy=e,t.Lg.add("",e),e=new dt,(i=new re).stroke="brown",i.bind(new Ee("text","",bi)),e.add(i),t.Lg.add("Comment",e),(e=new dt).selectable=!1,e.avoidable=!1,(i=new It).figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new Pt(3,3).ja(),e.add(i),t.Lg.add("LinkLabel",e),t.Yi=new Tt,(e=new Nt).selectionObjectName="GROUPPANEL",e.type=nt.Vertical,(i=new re).font="bold 12pt sans-serif",i.bind(new Ee("text","",bi)),e.add(i),(i=new nt(nt.Auto)).name="GROUPPANEL";var n=new It;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),(n=new Ii).padding=new R(5,5,5,5).ja(),i.add(n),e.add(i),t.my=e,t.Yi.add("",e),t.Kh=new Tt,e=new st,(i=new It).isPanelMain=!0,e.add(i),(i=new It).toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.ny=e,t.Kh.add("",e),e=new st,(i=new It).isPanelMain=!0,i.stroke="brown",e.add(i),t.Kh.add("Comment",e),(e=new Vt).type=nt.Auto,(i=new It).fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),(i=new Ii).margin=new R(1.5,1.5,1.5,1.5).ja(),e.add(i),t.St=e,t.wt=e,(e=new Vt).type=nt.Link,(i=new It).isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Kt=e,t.fe=null,t.mq=!1,t.Bk=null,t.partManager=new Jt,t.toolManager=new Se,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.nt=null,t.Wm=new tl,t.Vt=null,t.Wt=null,t.Mr=!1,t.commandHandler=pm(),t.eq=null,t.fq=Ks,t.Qw=!1,t.Nb=1,t.Yh=null,t.Oq=1,t.Sq=0,t.Aw=[0,0,0,0,0],t.Tq=0,t.yq=1,t.uw=0,t.vw=new B,t.Ay=500,t.wp=new B,t.wq=!1}function fm(t,e){t.animationManager.Cc(!0),t.Iw=(new rt).freeze(),t.ow=(new rt).freeze();var i=t.skipsUndoManager,n=null!=t.dc;n&&(t.skipsUndoManager=!0);var o=null;null!==t.fe&&null!==(o=t.fe.part)&&t.remove(o);var r=[],l=t.Wa.length;if(e){for(e=0;e<l;e++)for(var u=t.Wa.s[e].parts;u.next();){var c=u.value;c!==o&&null===c.data&&r.push(c)}for(e=0;e<r.length;e++)t.remove(r[e])}for(e=0;e<l;e++)t.Wa.s[e].clear();return t.partManager.clear(),t.De.clear(),t.Eh.clear(),t.ai.clear(),t.Bk=null,t.Xn.clear(),pl(),t.Og.clear(),bs=[],null!==o&&(t.add(o),t.partManager.parts.remove(o)),n&&(t.skipsUndoManager=i),r}function pm(){return null}function sf(t,e){if(Un){if(null!=e||it("Diagram setup requires an argument DIV."),null!==t.Ka&&it("Diagram has already completed setup."),"string"==typeof e?t.Ka=At.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:it("No DIV or DIV id supplied: "+e),null===t.Ka&&it("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ka.H&&it("Invalid div id; div already has a Diagram associated with it."),!t.ol&&At.ResizeObserver){var i=To(function(){t.ac()},250);t.ol=new At.ResizeObserver(function(){i()}),t.ol.observe(t.Ka)}"static"===At.getComputedStyle(t.Ka,null).position&&(t.Ka.style.position="relative");var n="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=n,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=At.go;var o=new On(t);if(void 0!==o.style&&(o.style.position="absolute",o.style.top="0px",o.style.left="0px","rtl"===At.getComputedStyle(t.Ka,null).getPropertyValue("direction")&&(t.tn=!0),o.style.zIndex="2",o.style.userSelect="none",o.style.MozUserSelect="none",o.style.touchAction="none",o.style.letterSpacing="normal !important",o.style.wordSpacing="normal !important"),t.ta=o,t.ib=o.context,n=t.ib,t.Nb=t.computePixelRatio(),t.viewSize.w()||(t.Aa=t.Ka.clientWidth||1,t.ya=t.Ka.clientHeight||1),xm(t,t.Aa,t.ya),t.Ka.insertBefore(o.Oa,t.Ka.firstChild),(o=new On(null)).width=1,o.height=1,t.kw=o,t.py=o.context,Un){o=kt("div");var r=kt("div");o.style.position="absolute",o.style.overflow="auto",o.style.width=t.Aa+"px",o.style.height=t.ya+"px",o.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",t.Ka.appendChild(o),o.appendChild(r),o.onscroll=Ev,o.addEventListener("pointerdown",Dv),o.H=t,o.vy=!0,o.wy=!0,t.ku=o,t.hu=r}t.gk=To(function(){t.Yh=null,t.N()},300),t.Pv=To(function(){af(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.Zj=function(l){if(t.isEnabled){var u=ea(t,l,!0);u.bubbles=!0;var c=0,p=0;u.delta=0,void 0!==l.deltaX?(0!==l.deltaX&&(c=0<l.deltaX?1:-1),0!==l.deltaY&&(p=0<l.deltaY?1:-1),u.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-c:-p):void 0!==l.wheelDeltaX?(0!==l.wheelDeltaX&&(c=0<l.wheelDeltaX?-1:1),0!==l.wheelDeltaY&&(p=0<l.wheelDeltaY?-1:1),u.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-c:-p):void 0!==l.wheelDelta&&0!==l.wheelDelta&&(u.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),Cs(u,l)}},t.bA=function(l){t.isEnabled&&(t.Uk=!1,ea(t,l,!0),(l=t.currentTool).cancelWaitAfter(),l.standardMouseOver())},t.ui=function(l){if(t.isEnabled){t.Uk=!0;var u=t.Yt;void 0===u[l.pointerId]&&(u[l.pointerId]=l);var c=!1;if(null===(u=t.oj)[0]||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType)if(null!==u[1]&&u[1].pointerId===l.pointerId)u[1]=l,c=!0;else if(null===u[0])u[0]=l;else{if(null!==u[1])return void l.preventDefault();u[1]=l,c=!0}else u[0]=l;(u="touch"===l.pointerType||"pen"===l.pointerType)&&(t.qu=!1,t.wq=!0);var p=c;c=cf(t,l,!0,!1,!0,p),rh(t,l,c),c.targetDiagram=uf(l,l.target),c.targetObject=null,p||c.clone(t.bq),p=t.vw,u=u?25:10,l.timeStamp-t.uw<t.Ay&&!(Math.abs(p.x-l.screenX)>u||Math.abs(p.y-l.screenY)>u)?t.yq++:t.yq=1,c.clickCount=t.yq,t.uw=l.timeStamp,t.vw.sg(l.screenX,l.screenY),t.doMouseDown(),1===l.button?l.preventDefault():Cs(c,l)}},t.ck=function(l){if(t.isEnabled){t.Uk=!0;var u=t.oj;if(null===u[0]||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType){if(null!==u[1]&&u[1].pointerId===l.pointerId)return void(u[1]=l);if(null!==u[0])return;u[0]=l}else u[0]=l;if(u[0].pointerId===l.pointerId){u=cf(t,l,!1,!1,!1,null!==u[1]);var c=At.document.elementFromPoint(l.clientX,l.clientY)||null;null!==c&&null!=c.shadowRoot&&(c=c.shadowRoot.elementFromPoint(l.clientX,l.clientY));var p=t,m=l;c&&c.H&&(m=l,p=c.H),u.targetDiagram=p,rh(t,m,u),u.targetObject=null,t.doMouseMove(),Cs(u,l)}}},t.ek=function(l){if(t.isEnabled){t.Uk=!0;var u="touch"===l.pointerType||"pen"===l.pointerType,c=t.Yt;if(u&&t.qu)delete c[l.pointerId],l.preventDefault();else if(null===(c=t.oj)[0]||c[0].pointerId!==l.pointerId&&c[0].pointerType===l.pointerType)null!==c[1]&&c[1].pointerId===l.pointerId&&(c[1]=null);else{c[0]=null,c=cf(t,l,!1,!0,!0,!1);var p=At.document.elementFromPoint(l.clientX,l.clientY)||null;null!==p&&null!=p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(l.clientX,l.clientY)),null!==p&&p.H instanceof q&&p.H!==t&&rh(p.H,l,c),null===p&&(p=l.target),rh(t,l,c),c.clickCount=t.yq,c.targetDiagram=uf(l,p),c.targetObject=null,t.doMouseUp(),Cs(c,l),u&&(t.wq=!1)}}},t.dk=function(l){if(t.isEnabled){t.Uk=!1;var u=t.Yt;u[l.pointerId]&&delete u[l.pointerId],null!==(u=t.oj)[0]&&u[0].pointerId===l.pointerId&&(u[0]=null),null!==u[1]&&u[1].pointerId===l.pointerId&&(u[1]=null),"touch"!==l.pointerType&&"pen"!==l.pointerType&&((l=t.currentTool).cancelWaitAfter(),l.standardMouseOver())}},t.bk=function(l){var u=t.oj;null!==u[0]&&u[0].pointerId===l.pointerId?(u[0]=null,t.wq=!1):null!==u[1]&&u[1].pointerId===l.pointerId&&(u[1]=null)},t.Vp=n.Z["d"+Xm[1]+Xm[2]+"wI"+$a.slice(1,5)]["b"+lx.slice(1,e)](n.Z,zm,e,e),n.Vc(!0),function Ov(t){var e=t.ta.Oa;e instanceof HTMLCanvasElement||(e=t.div),t.addEventListener(e,"pointerdown",t.ui,!1),t.addEventListener(e,"pointermove",t.ck,!1),t.addEventListener(e,"pointerup",t.ek,!1),t.addEventListener(e,"pointerout",t.dk,!1),t.addEventListener(e,"pointercancel",t.bk,!1),t.addEventListener(e,"pointerenter",t.cz,!1),t.addEventListener(e,"pointerleave",t.dz,!1),t.addEventListener(e,"wheel",t.Zj,!1),t.addEventListener(e,"keydown",t.Rz,!1),t.addEventListener(e,"keyup",t.Sz,!1),t.addEventListener(e,"blur",t.Oy,!1),t.addEventListener(e,"focus",t.Py,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(At,"resize",t.Pv,!1)}(t),"svg"===t.nl&&(e=t.pj.get("svg"),t.Ka.appendChild(e.Oa),t.ib=e.context)}}function oh(t){30<t.Sq&&(t.Yh=1)}function Bu(t,e){null!==t.Yh&&(t.Yh=null,e&&t.gk(),pt&&pt.ox||(t.Sq=0,t.Aw=[0,0,0,0,0],t.Tq=0))}function af(t){if(null!==t.ta){var e=t.Ka;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.Hw||t.setScrollWidth();var i=t.gf?t.Eb:0,n=t.Be?t.Eb:0,o=t.Nb;t.Nb=t.computePixelRatio(),t.Nb!==o&&(t.pn=!0,t.ac()),(e.clientWidth!==t.Aa+i||e.clientHeight!==t.ya+n)&&(t.Ee=!0,t.Fc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===bn&&(t.Ik=!0,e.C()),t.ld||t.ac())}}}function gm(t){var e=new ki;e.name="Background",t.Al(e),(e=new ki).name="",t.Al(e),(e=new ki).name="Foreground",t.Al(e),(e=new ki).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Al(e),(e=new ki).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Al(e),(e=new ki).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Xw(e,t.Pj("Background"))}function mm(t){var e=new nt(nt.Grid);e.name="GRID";var i=new It;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new It).figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new It).figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),(i=new It).figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),(i=new It).figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),(i=new It).figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),(i=new wt).add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function Ev(){this.H.gu?this.H.gu=!1:this.H.isEnabled?this.H.lx(this):ff(this.H)}function Dv(t){this.H.isEnabled?(this.H.lu=t.target.scrollTop,this.H.ju=t.target.scrollLeft):ff(this.H)}function ym(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.Co(t.zb),e;for(var i=!0,n=t.Wa.s,o=n.length,r=0;r<o;r++){var l=n[r];if(l.visible&&l.isInDocumentBounds)for(var u=(l=l.Pa.s).length,c=0;c<u;c++){var p=l[c];p.isInDocumentBounds&&p.isVisible()&&(p=p.actualBounds).w()&&(i?(i=!1,e.assign(p)):e.ed(p))}}return i&&e.h(0,0,0,0),e.Co(t.zb),e}function ao(t,e){if((e||t.hf)&&!t.wb&&null!==t.ta&&t.documentBounds.w()){if(t.wb=!0,e){var i=t.initialPosition;if(i.w())return t.wb=!1,void(t.position=i);(i=B.alloc()).xi(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=$.allocAt(0,0,n.width,n.height);var o=B.alloc();o.xi(n,t.initialViewportSpot),o.h(i.x-o.x,i.y-o.y),t.position=o,$.free(n),B.free(o),B.free(i)}i=t.yh,e&&t.Fg!==bn&&(i=t.Fg);var r=i!==bn?_a(t,i):t.scale;i=t.pa.x,n=t.pa.y,o=t.Aa/r;var l=t.ya/r,u=t.yk,c=t.pq;e&&!u.sb()&&(c.sb()||c.Yb())&&(u=c.Yb()?P:c),lf(t,t.documentBounds,o,l,u,e),e=t.scale,t.scale=r,t.wb=!1,_.B((r=t.viewportBounds).x,i)&&_.B(r.y,n)&&_.B(r.width,o)&&_.B(r.height,l)||t.onViewportBoundsChanged(new $(i,n,o,l),r,e,!1)}}function _a(t,e){var i=t.Pp;if(null===t.ta)return i;t.Va();var n=t.documentBounds;if(!n.w())return i;var o=n.width,r=t.Aa+(t.gf?t.Eb:0),l=t.ya+(t.Be?t.Eb:0),u=r/o,c=l/(n=n.height);return e===qa?((e=Math.min(c,u))>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Gu?((e=c>u?(l-t.Eb)/n:(r-t.Eb)/o)>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function lf(t,e,i,n,o,r){var l=B.allocAt(t.pa.x,t.pa.y),u=l.x,c=l.y;if(null!==t.eq){var p=B.alloc();u=(p=t.eq.ga(w,p)).x-t.fq.x/t.scale,c=p.y-t.fq.y/t.scale,o=y,B.free(p)}(r||t.scrollMode===As)&&(o.sb()&&(i>e.width&&(u=e.x+(o.x*e.width+o.offsetX)-(o.x*i-o.offsetX)),n>e.height&&(c=e.y+(o.y*e.height+o.offsetY)-(o.y*n-o.offsetY))),r=i-e.width,i<e.width+(o=t.rj).left+o.right?(u=Math.min(u+i/2,e.right+Math.max(r,o.right)-i/2),u=Math.max(u,e.left-Math.max(r,o.left)+i/2),u-=i/2):u>e.left?u=e.left:u<e.right-i&&(u=e.right-i),i=n-e.height,n<e.height+o.top+o.bottom?(c=Math.min(c+n/2,e.bottom+Math.max(i,o.bottom)-n/2),c=Math.max(c,e.top-Math.max(i,o.top)+n/2),c-=n/2):c>e.top?c=e.top:c<e.bottom-n&&(c=e.bottom-n)),l.x=isFinite(u)?u:-t.zb.left,l.y=isFinite(c)?c:-t.zb.top,null!==t.positionComputation&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),Qg(t.Yd,t.pa,l),t.pa.h(l.x,l.y),Ar(t),B.free(l)}function hf(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),Ni(t),t=t.Wa.iteratorBackwards;t.next();){var o=t.value;if(o.visible&&!o.isTemporary&&null!==(o=o.jc(e,i,n)))return o}return null}function ea(t,e,i){var n=t.Qg;return t.Qg=t.cj,t.cj=n,n.diagram=t,n.event=e,i?rh(t,e,n):(n.viewPoint=t.Qg.viewPoint,n.documentPoint=t.Qg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,void 0!==e.buttons&&(n.buttons=e.buttons),gn&&0===e.button&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=uf(e,e.target),n.targetObject=null,n}function uf(t,e){return null===e?null:(e=e.H)?e:((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function cf(t,e,i,n,o,r){var l=t.Qg;return t.Qg=t.cj,t.cj=l,l.diagram=t,l.clickCount=1,t=l.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),l.modifiers=t,l.event=e,l.timestamp=e.timeStamp,l.button=e.button,l.buttons=e.buttons,gn&&0===e.button&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=o,l.isMultiTouch=r,l}function Cs(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function rh(t,e,i){var n=t.ta,o=t.Aa,r=t.ya,l=0,u=0;null!==n&&(n=n.getBoundingClientRect(),l=e.clientX-o/n.width*n.left,u=e.clientY-r/n.height*n.top),i.viewPoint.h(l,u),null!==t.Bb?(e=B.allocAt(l,u),t.Bb.Cd(e),i.documentPoint.assign(e),B.free(e)):i.documentPoint.h(l,u)}function vm(t,e,i){if(null!==t.oj[0]){e=t.oj[e];var n=t.ta;null!==n&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Aa/n.width*n.left,e.clientY-t.ya/n.height*n.top))}}function zu(t,e,i){!t.Ee||t.wb||t.animationManager.defaultAnimation.isAnimating||ff(t)||(e&&Ni(t),i&&ao(t,!1))}function kr(t,e){if(!t.ld&&(t.kg=!1,null!==t.Ka||t.wo.w())){t.ld=!0;var i=t.animationManager,n=t.Xn;if(!i.isAnimating&&0!==n.length){for(var o=n.s,r=o.length,l=0;l<r;l++){var u=o[l];Sn(u,!1),u.v()}n.clear()}0<(n=t.pw).count&&(n.each(function(c){c.Ov()}),n.clear()),o=n=!1,i.defaultAnimation.isAnimating&&(o=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.Ab||af(t),zu(t,!1,!0),null!==t.fe&&(t.fe.visible&&!t.mq&&(Cr(t),t.mq=!0),!t.fe.visible&&t.mq&&(t.mq=!1)),Ni(t),r=!1,(!t.hf||t.xh)&&(t.hf?Sf(t,!t.Ik):(t.Ea("Initial Layout"),!1===i.isEnabled&&i.Cc(),Sf(t,!1)),r=!0),t.Ik=!1,Ni(t),t.ou||function Rv(t){t.ld||Ni(t),t.Va()}(t),zu(t,!0,!1),l=!1,r?((i=$.alloc()).assign(t.viewportBounds),t.hf||(l=t.hf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function Yv(t){if(t.Fg!==bn)t.scale=_a(t,t.Fg);else if(t.yh!==bn)t.scale=_a(t,t.yh);else{var e=t.initialScale;isFinite(e)&&0<e&&(t.scale=e)}ao(t,!0),t.Fd(e=t.Wa.s,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.du.assign(t.pa),Cr(t)}(t)),t.S("LayoutCompleted"),zu(t,!0,!1),$.free(i)):i.Nk&&i.Rw&&(t.Fg!==bn?t.scale=_a(t,t.Fg):t.yh!==bn?t.scale=_a(t,t.yh):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),ao(t,!0)),r&&l&&t.eb("Initial Layout"),Ni(t),e||t.hc(t.ib),o&&(t.skipsUndoManager=n),t.ld=!1}}function Ni(t){if(0!==t.De.count&&(t.ld||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.De.iterator;if(null===i||0===t.De.count)break;t.De=new rt,t.Ov(i,t.De)}t.nodes.each(function(n){n instanceof Nt&&65536&n.R&&(n.R=65536^n.R)})}}function df(t,e){for(var i=te(),n=te(),o=e.memberParts;o.next();){var r=o.value;r.isVisible()&&(r instanceof Nt?(Pr(r)||_n(r)||ts(r))&&df(t,r):r instanceof st?r.fromNode===e||r.toNode===e?n.push(r):i.push(r):(r.measure(1/0,1/0),r.arrange()))}for(t=i.length,o=0;o<t;o++)(r=i[o]).measure(1/0,1/0),r.arrange();for($t(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)(i=n[e]).measure(1/0,1/0),i.arrange();$t(n)}function Ru(t,e,i,n,o,r,l,u,c,p){if(null!==t.Ka){null===t.ta&&it("No canvas specified"),void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=!1),void 0===p&&(p=!1),Ka(t),t.ib.Vc(!0),t.vd=!0,t.$i=!0;var m=t.Ca;t.Ca=o;var x=t.Wa.s,b=x.length;try{var M=new $(r.x,r.y,n.width/o,n.height/o),A=M.copy();A.Co(i),Cr(t,A),Ni(t),t.Fd(x,b,t,M),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),null!==u&&""!==u&&(e.fillStyle=u,e.px(0,0,n.width,n.height));var L=t.Nb;e.scale(L,L);var D=zt.alloc();D.reset(),D.translate(i.left,i.top),D.scale(o),0===r.x&&0===r.y||D.translate(-r.x,-r.y),e.setTransform(D.m11,D.m12,D.m21,D.m22,D.dx,D.dy),e.yc(),e instanceof $i&&Jm(e,D.m11,D.m12,D.m21,D.m22,D.dx,D.dy),zt.free(D),Yu(t,e),e.globalAlpha=t.pb;var I=t.Pj("Grid");if(l){var z=new rt,X=l.iterator;for(X.reset();X.next();){var V=X.value;V instanceof wt&&(p||V.layer!==I)&&(V.Fj(),z.add(V))}for(p=0;p<b;p++)Fv(x[p],e,t,z,c);z.each(function(J){return J.Fj()})}else for(z=0;z<b;z++){var Z=x[z];Z===I?p&&Z.hc(e,t,!0):Z.hc(e,t,c)}t.$i=!1,t.Yf&&Qa(t.Yf,t)&&t.Vp()}finally{t.Ca=m,t.ib.Vc(!0),t.vd=!0,t.Fd(x,b,t,t.viewportBounds),Cr(t),t.ib instanceof $i&&(t.ib.Mj.replaceChildren(),t.redraw())}}}function Yu(t,e){null!==(t=t.Rg)&&(void 0!==t.imageSmoothingEnabled&&e.Xx(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function sh(t,e){var o,i=t instanceof nt,n=t instanceof q;for(o in e){""===o&&it("Setting properties requires non-empty property names");var r=t,l=o;if(i||n){var u=o.indexOf(".");if(0<u){var c=o.substring(0,u);i?r=t.fb(c):null==(r=t[c])&&(r=t.toolManager[c]),ue(r)?l=o.substr(u+1):it("Unable to find object named: "+c+" in "+t.toString()+" when trying to set property: "+o)}}if("_"!==l[0]&&!mr(r,l)){if(n&&"ModelChanged"===l){t.Zw(e[l]);continue}if(n&&"Changed"===l){t.Pe(e[l]);continue}if(n&&mr(t.toolManager,l))r=t.toolManager;else{if(n&&Am(t,l)){t.Bj(l,e[l]);continue}if(t instanceof yt&&"Changed"===l){t.Pe(e[l]);continue}it('Trying to set undefined property "'+l+'" on object: '+r.toString())}}r[l]=e[o],"_"===l[0]&&r instanceof vt&&r.Ww(l)}}function Ka(t){!1!==t.pn&&(t.pn=!1,xm(t,t.Aa,t.ya))}function xm(t,e,i){Ar(t);var n=t.Nb;t.ta.resize(e*n,i*n,e,i)&&(t.Fc=!0,t.ib.Vc(!0))}function ff(t){var e=t.ta;if(null===e||t.wo.w())return!0;var i=t.Aa,n=t.ya,o=t.Ka,r=!1,l=t.gf?t.Eb:0,u=t.Be?t.Eb:0,c=o.clientWidth||i+l,p=o.clientHeight||n+u,m=t.viewportBounds;o=m.x;var x=m.y,b=m.width,M=m.height;if((c!==i+l||p!==n+u)&&(t.gf=!1,t.Be=!1,u=l=0,t.Aa=c,t.ya=p,r=t.pn=!0,Ar(t)),!t.hf||!t.viewportBounds.w())return!0;var A=t.ku,L=t.hu;if(t.Ee=!1,!(r||t.gf||t.Be||t.mn||t.nn))return!0;var D=t.documentBounds,I=0,z=0,X=0,V=0,Z=m.width,J=m.height,ct=t.rj;t.contentAlignment.sb()?(D.width>Z&&(I=ct.left,z=ct.right),D.height>J&&(X=ct.top,V=ct.bottom)):(I=ct.left,z=ct.right,X=ct.top,V=ct.bottom);var mt=D.width+I+z,ft=D.height+X+V,at=mt>c/(ct=t.scale),Q=ft>p/ct;if(!(r||t.gf||t.Be||at||Q))return!0;I=D.x-I,c=m.x,z=D.right+z,p=m.right+l,X=D.y-X;var Lt=m.y;D=D.bottom+V,m=m.bottom+u;var Ct="1px";if(V="1px",t.scrollMode===As&&(at||Q)&&(at&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(at=1,I+1<c&&(at=Math.max((c-I)*ct+t.Aa,at)),z>p+1&&(at=Math.max((z-p)*ct+t.Aa,at)),Z+l+1<mt&&(at=Math.max((mt-Z)*ct+t.Aa,at)),Ct=at.toString()+"px"),Q&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(at=1,X+1<Lt&&(at=Math.max((Lt-X)*ct+t.ya,at)),D>m+1&&(at=Math.max((D-m)*ct+t.ya,at)),J+u+1<ft&&(at=Math.max((ft-J)*ct+t.ya,at)),V=at.toString()+"px")),Q="1px"!==V,(at="1px"!==Ct)&&Q||!at&&!Q||(Q&&(p-=t.Eb),at&&(m-=t.Eb),mt<Z+l||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(l=1,I+1<c&&(l=Math.max((c-I)*ct+t.Aa,l)),z>p+1&&(l=Math.max((z-p)*ct+t.Aa,l)),Z+1<mt&&(l=Math.max((mt-Z)*ct+t.Aa,l)),Ct=l.toString()+"px"),l=t.ya,(at="1px"!==Ct)!==t.Be&&(l=at?t.ya-t.Eb:t.ya+t.Eb),ft<J+u||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(u=1,X+1<Lt&&(u=Math.max((Lt-X)*ct+l,u)),D>m+1&&(u=Math.max((D-m)*ct+l,u)),J+1<ft&&(u=Math.max((ft-J)*ct+l,u)),V=u.toString()+"px"),Q="1px"!==V),t.qr&&at===t.Be&&Q===t.gf)return i===t.Aa&&n===t.ya||t.bd(),!1;if(at!==t.Be&&(t.ya="1px"===Ct?t.ya+t.Eb:Math.max(t.ya-t.Eb,1),r=!0),t.Be=at,L.style.width=Ct,Q!==t.gf&&(t.Aa="1px"===V?t.Aa+t.Eb:Math.max(t.Aa-t.Eb,1),r=!0,t.tn&&(u=B.alloc(),Q?(e.style.left=t.Eb+"px",t.position=u.h(t.pa.x+t.Eb/t.scale,t.pa.y)):(e.style.left="0px",t.position=u.h(t.pa.x-t.Eb/t.scale,t.pa.y)),B.free(u))),r&&Ar(t),t.gf=Q,L.style.height=V,t.gu=!0,r&&(t.pn=!0),e=A.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(Z+1<mt?e=(t.position.x-I)*ct:I+1<c?e=A.scrollWidth-A.clientWidth:z>p+1&&(e=t.position.x*ct)),t.tn)switch(t.bu){case"negative":e=-(A.scrollWidth-e-A.clientWidth);break;case"reverse":e=A.scrollWidth-e-A.clientWidth}return A.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(J+1<ft?A.scrollTop=(t.position.y-X)*ct:X+1<Lt?A.scrollTop=A.scrollHeight-A.clientHeight:D>m+1&&(A.scrollTop=t.position.y*ct)),p=t.ya,A.style.width=(c=t.Aa)+(t.gf?t.Eb:0)+"px",A.style.height=p+(t.Be?t.Eb:0)+"px",i===c&&n===p&&!t.animationManager.Ab||(i=$.allocAt(o,x,b,M),t.onViewportBoundsChanged(i,t.viewportBounds,ct,r),$.free(i),!1)}function pf(t,e,i){var n=e.layer;null!==n&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.Kj(),0<=(i=n.qc(-1,e,!1))&&t.cb(Qe,"parts",n,e,null,i,null),null!==(t=e.layerChanged)&&t(e,n,null))}function Mr(t,e,i,n,o,r){if(!e.contains(i)&&(void 0===r&&(r=!1),!n||r||i.canMove()||i.canCopy()))if(void 0===o&&(o=mf(t)),i instanceof dt){if(e.add(i,t.Pd(o,i,i.location)),i instanceof Nt&&(null!==i.placeholder||o.dragsMembers))for(r=i.memberParts;r.next();)Mr(t,e,r.value,n,o,o.groupsAlwaysMove);for(r=i.linksConnected;r.next();){var l=r.value;if(!e.contains(l)){var u=l.fromNode,c=l.toNode;null!==u&&e.contains(u)&&null!==c&&e.contains(c)&&Mr(t,e,l,n,o)}}if(o.dragsTree)for(i=i.Pu();i.next();)Mr(t,e,i.value,n,o)}else if(i instanceof st)for(e.add(i,t.Pd(o,i)),i=i.labelNodes;i.next();)Mr(t,e,i.value,n,o);else i instanceof Vt||e.add(i,t.Pd(o,i,i.location))}function gf(t,e,i,n,o){if(null!==e&&0!==e.count){var r=B.alloc(),l=B.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Mr)||Xu(t,e);for(var u=te(),c=te(),p=e.iterator,m=B.alloc();p.next();){var x=p.key,b=p.value;if(x.Zc()){var M=wm(t,x,e);null!==M?u.push(new Hm(x,b,M)):(!o||x.canMove())&&(r.assign(M=b.point),t.computeMove(x,r.add(l),n,m),x.location=m,void 0===b.shifted&&(b.shifted=new B),b.shifted.assign(m.re(M)))}else p.key instanceof st&&c.push(p.sa)}for(B.free(m),o=u.length,p=0;p<o;p++)r.assign((x=u[p]).info.point),void 0===x.Tu.shifted&&(x.Tu.shifted=new B),x.node.location=r.add(x.Tu.shifted);for(o=B.alloc(),p=B.alloc(),x=c.length,b=0;b<x;b++){var A=c[b];if((M=A.key)instanceof st)if(M.suspendsRouting){M.Tg=null,m=M.fromNode;var L=M.toNode;if(null!==t.draggedLink&&n.dragsLink)if(L=A.value.point,null===M.dragComputation)e.add(M,t.Pd(n,M,l)),Er(M,l.x-L.x,l.y-L.y);else{A=B.allocAt(0,0),(m=M.i(0))&&m.w()&&A.assign(m);var D=m=B.alloc().assign(A).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&yf(t,M,m,D=B.alloc(),n),m.assign(M.dragComputation(M,m,D)).re(A),e.add(M,t.Pd(n,M,m)),Er(M,m.x-L.x,m.y-L.y),B.free(A),B.free(m),D!==m&&B.free(D)}else null!==m&&(o.assign(m.location),null!==(D=e.I(m))&&o.re(D.point)),null!==L&&(p.assign(L.location),null!==(D=e.I(L))&&p.re(D.point)),null!==m&&null!==L?o.Xa(p)?(m=A.value.point,(L=r).assign(o),L.re(m),e.add(M,t.Pd(n,M,o)),Er(M,L.x,L.y)):(M.suspendsRouting=!1,M.bb()):(A=A.value.point,e.add(M,t.Pd(n,M,m=null!==m?o:null!==L?p:l)),Er(M,m.x-A.x,m.y-A.y))}else(null===M.fromNode||null===M.toNode)&&(m=A.value.point,e.add(M,t.Pd(n,M,l)),Er(M,l.x-m.x,l.y-m.y))}B.free(r),B.free(l),B.free(o),B.free(p),$t(u),$t(c),i||(Ni(t),ah(t,e))}}function mf(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Wm}function yf(t,e,i,n,o){if(void 0===o&&(o=mf(t)),n.assign(i),null!==e){var r=t.grid;t=(e=o.gridSnapCellSize).width,e=e.height;var l=o.gridSnapOrigin,u=l.x;if(l=l.y,o=o.gridSnapCellSpot,null!==r){var c=r.gridCellSize;isNaN(t)&&(t=c.width),isNaN(e)&&(e=c.height),r=r.gridOrigin,isNaN(u)&&(u=r.x),isNaN(l)&&(l=r.y)}(r=B.allocAt(0,0)).yi(0,0,t,e,o),_.No(i.x,i.y,u+r.x,l+r.y,t,e,n),B.free(r)}}function Xu(t,e){if(null!==e)for(t.Mr=!0,t=e.iterator;t.next();)(e=t.key)instanceof st&&(e.suspendsRouting=!0)}function ah(t,e){if(null!==e){for(e=e.iterator;e.next();){var i=e.key;i instanceof st&&(i.suspendsRouting=!1,iy(i)&&i.bb())}t.Mr=!1}}function wm(t,e,i){return null===(e=e.containingGroup)||null===(t=wm(t,e,i))&&null===(t=i.I(e))?null:t}function vf(t,e,i){if(null!==e.diagram&&e.diagram!==t&&it("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===i?null!==e.diagram&&it("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&it("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&it("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,i=(t=t.Wa).count;for(var n=0;n<i;n++)t.M(n).name===e&&it("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function bm(t,e,i){var n=t.animationManager;if(t.wb||t.ld)t.Ca=i,Ar(t),t.N(),t.Ee=!0,n.Ab&&(Nu(n)||n.ce.add(n.H,"scale",e,t.Ca));else if(null===t.ta)t.Ca=i,Ar(t);else{t.wb=!0;var o=t.viewportBounds.copy(),r=t.Aa,l=t.ya,u=t.zoomPoint.x,c=t.zoomPoint.y,p=t.contentAlignment;isNaN(u)&&(p.$c()?p.Hf(U)?u=0:p.Hf(S)&&(u=r-1):u=p.sb()?p.x*(r-1):r/2),isNaN(c)&&(p.$c()?p.Hf(G)?c=0:p.Hf(N)&&(c=l-1):c=p.sb()?p.y*(l-1):l/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),r=B.allocAt(t.pa.x+u/e-u/i,t.pa.y+c/e-c/i),t.position=r,B.free(r),t.Ca=i,Ar(t),t.wb=!1,t.onViewportBoundsChanged(o,t.viewportBounds,e,!1),ao(t,!1),n.Ab&&(Nu(n)||n.ce.add(n.H,"scale",e,t.Ca))}}function Cr(t,e){var i=t.fe;if(null!==i&&i.visible){for(var n=Pt.alloc(),o=1,r=1,l=i.O.s,u=l.length,c=0;c<u;c++){var p=l[c],m=Math.abs(p.interval);2>m||(Jf(p.figure)?r=r*m/_.wx(r,m):o=o*m/_.wx(o,m))}if(n.h(r*(l=i.gridCellSize).width,o*l.height),void 0!==e)o=e.width,r=e.height,t=e.x,l=e.y;else{if((e=$.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.w())return void $.free(e);o=e.width,r=e.height,t=e.x,l=e.y,$.free(e)}i.width=o+2*n.width,i.height=r+2*n.height,e=B.alloc(),_.No(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),Pt.free(n),i.part.location=e,B.free(e)}}function Sm(t){var e=t.isModified;t.Uw!==e&&(t.Uw=e,t.S("Modified"))}function km(t,e){for(var i=(e=e.O.s).length,n=0;n<i;n++)xf(t,e[n])}function xf(t,e){if(e instanceof Xi){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){i.Bg instanceof rt&&i.Bg.add(t);var n=e.Eg;if(null!==n&&!0===n.sq&&null!==e.diagram&&e.diagram.Xn.add(e),i.hn)if(i=i.getAttribute("src")||"",null===(n=t.Og.I(i)))(n=[]).push(e),t.Og.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function wf(t,e){if(e instanceof Xi){var i=e.element;if(null!==i&&i instanceof HTMLImageElement&&i.hn){var n=i.getAttribute("src")||"",o=t.Og.I(n);if(null!==o)for(var r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1),0===o.length&&(t.Og.remove(n),i.Fq&&i.removeEventListener("load",i.Fq),i.Yp&&i.removeEventListener("error",i.Yp),delete i.Fq,delete i.Yp,i.Bg instanceof rt&&i.Bg.remove(t),pl(n));break}}}}function Ar(t){var e=t.pa,i=t.Ca;t.Sw.h(e.x,e.y,Math.max(t.Aa,0)/i,Math.max(t.ya,0)/i),t.vd=!0}function bf(t,e){t.Zi=!1;var i=t.Sp;i.D(e)||(i=i.copy(),t.Sp.assign(e),ao(t,!1),t.S("DocumentBoundsChanged",void 0,i),t.Ee=!0,t.N())}function Hu(t,e){for(var i=t.ai.iterator;i.next();)Mm(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function Mm(t,e,i){if(null!==e){for(var n=e.fl.iterator;n.next();)Mm(t,n.value,i);null!==e.layout&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function Sf(t,e){if(t.xh&&!t.lt){var i=t.aa;t.aa=!0;var n=t.undoManager.transactionLevel,o=t.layout,r=t.animationManager;try{0===n&&(t.undoManager.isInternalTransaction=!0,t.Ea("Layout")),1>=n&&!r.defaultAnimation.isAnimating&&!r.Ab&&(e||Sr(r,"Layout")),t.xh=!1;for(var l=t.ai.iterator;l.next();)Cm(t,l.value,e,n);o.isValidLayout||(!e||o.isRealtime||null===o.isRealtime||0===n?(o.doLayout(t),Ni(t),o.isValidLayout=!0):t.xh=!0)}finally{e=t.undoManager.isInternalTransaction,0===n&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==n&&1!==n||ef(r),t.aa=i}}}function Cm(t,e,i,n){if(null!==e){for(var o=e.fl.iterator;o.next();)Cm(t,o.value,i,n);null===(o=e.layout)||o.isValidLayout||(!i||o.isRealtime||0===n?(e.rh=!e.location.w(),o.doLayout(e),e.C(32),df(t,e),o.isValidLayout=!0):t.xh=!0)}}function Am(t,e){var i=t.iw.I(e);return null!==i?i:t.iw.I(e.toLowerCase())}function kf(t,e){var i=t.jw.I(e);if(null!==i||null!==(i=t.jw.I(e.toLowerCase())))return i;it("Unknown DiagramEvent name: "+e)}function Pm(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.Mr||e.isComplexRoutingRealtime}function Mf(t,e,i,n){var o=t.Xh;if(null===o&&(t.Xh=o=new jh(t.avoidanceCellSize)),o.vs||o.group!==i||o.Zx!==n){if(o.Ix=Math.max(o.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),o.Jx=Math.max(o.Os+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),null!==i&&(i=Tm(t,i)),null===i){e=$.alloc(),t.computeOccupiedArea(e),e.Bc(100,100),o.initialize(e);for(var r=t.nodes;r.next();){var l=r.value,u=l.layer;null!==u&&u.visible&&!u.isTemporary&&Cf(t,l,n,e)}$.free(e)}else{for(0<i.memberParts.count&&((e=t.computePartsBounds(i.memberParts,!1)).Bc(20,20),o.initialize(e)),e=$.alloc(),r=i.memberParts;r.next();)(l=r.value)instanceof dt&&Cf(t,l,n,e);$.free(e)}o.group=i,o.Zx=n,o.vs=!1}else e&&ay(o);return o}function Tm(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?Tm(t,e.containingGroup):null}function Cf(t,e,i,n){if(e!==i&&e.isVisible()){var o=e.avoidable&&!e.isLinkLabel;if(o){var r=e.getAvoidableRect(n),l=t.Xh,u=r.x,c=r.y;if(wl(l,u,c)){var p=(c-l.Od)/l.tc|0,m=Math.min((u+r.width-l.Nd)/l.sc|0,l.di);for(r=Math.min((c+r.height-l.Od)/l.tc|0,l.ei),u=(u-l.Nd)/l.sc|0;u<=m;u++)if((c=l.bc[u]).fill)c.fill(jr,p,r+1);else for(var x=p;x<=r;x++)c[x]=jr}}if(e instanceof Nt&&(!o||e.avoidableMembers))for(e=e.memberParts;e.next();)(o=e.value)instanceof dt&&Cf(t,o,i,n)}}function Af(t,e){null===t.Xh||t.Xh.vs||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.Xh.vs=!0)}function Lm(t){-1===t.uk&&(t.uk=si(function(){if(-1!==t.uk&&(t.ug(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.wp);e.Xa(t.position)||(t.position=e,t.lastInput.documentPoint=t.Ps(t.wp),t.doMouseMove(),t.Zi=!0,e=$.alloc(),t.computeBounds(e),e.ed(t.documentBounds),bf(t,e),$.free(e),t.Fc=!0,t.bd(),Lm(t))}},t.vp))}function Nm(t,e,i){function n(){var m=+new Date;for(r=!0,l.reset();l.next();)if(!l.value[0].$k){r=!1;break}r||m-p>c?e(i,o,u):At.requestAnimationFrame(n)}for(var o=i.callback,r=!0,l=t.Og.iterator;l.next();)if(!l.value[0].$k){r=!1;break}if("function"!=typeof o||r)return e(i,o,t);var u=t,c=i.callbackTimeout||300,p=+new Date;return At.requestAnimationFrame(function(){n()}),null}function Fm(t,e,i,n){if(t.animationManager.Cc(),t.bd(),null===t.ta)return null;"object"!=typeof e&&it("properties argument must be an Object.");var o=e.size||null,r=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(r="NaN");var l=e.maxSize;void 0===e.maxSize&&(l="SVG"===i?new Pt(1/0,1/0):new Pt(2e3,2e3));var u=e.position||null,c=e.parts||null,p=void 0===e.padding?1:e.padding,m=e.background||null,x=e.omitTemporary;void 0===x&&(x=!0);var b=e.document||document,M=e.elementFinished||null,A=e.showTemporary;void 0===A&&(A=!x),void 0===(e=e.showGrid)&&(e=A),null!==o&&isNaN(o.width)&&isNaN(o.height)&&(o=null),"number"==typeof p?p=new R(p):p instanceof R||it("MakeImage padding must be a Margin or a number."),p.left=Math.max(p.left,0),p.right=Math.max(p.right,0),p.top=Math.max(p.top,0),p.bottom=Math.max(p.bottom,0),t.ib.Vc(!0);var L=(x=new On(null,b,void 0,!0)).context;if(!(o||r||c||u))return x.width=t.Aa+Math.ceil(p.left+p.right),x.height=t.ya+Math.ceil(p.top+p.bottom),"SVG"===i?null===n?null:(n.resize(x.width,x.height,x.width,x.height),n.ownerDocument=b,n.hs=M,Ru(t,n.context,p,new Pt(x.width,x.height),t.Ca,t.pa,c,m,A,e),n.context):(t.Xm=!1,Ru(t,L,p,new Pt(x.width,x.height),t.Ca,t.pa,c,m,A,e),t.Xm=!0,x.context);var D=t.Pp,I=t.documentBounds.copy();if(I.Gv(t.zb),A)for(var z=t.Wa.s,X=z.length,V=0;V<X;V++){var Z=z[V];if(Z.visible&&Z.isTemporary)for(var J=(Z=Z.Pa.s).length,ct=0;ct<J;ct++){var mt=Z[ct];mt.isInDocumentBounds&&mt.isVisible()&&(mt=mt.actualBounds).w()&&I.ed(mt)}}if(z=new B(I.x,I.y),null!==c){for(X=new $(0,0,0,0),V=!0,(Z=c.iterator).reset();Z.next();)(J=Z.value)instanceof wt&&(null!==(ct=J.layer)&&!ct.visible||null!==ct&&!A&&ct.isTemporary||!J.isVisible()||(J=J.actualBounds).w()&&(V?(V=!1,X.assign(J)):X.ed(J)));I.width=X.width,I.height=X.height,z.x=X.x,z.y=X.y}return null!==u&&u.w()&&(z=u,r||(r=D)),X=u=0,null!==p&&(u=p.left+p.right,X=p.top+p.bottom),V=Z=0,null!==o&&(Z=o.width,V=o.height,isFinite(Z)&&(Z=Math.max(0,Z-u)),isFinite(V)&&(V=Math.max(0,V-X))),null!==o&&null!==r?("NaN"===r&&(r=D),o.w()?(o=Z,I=V):isNaN(V)?(o=Z,I=I.height*r):(o=I.width*r,I=V)):null!==o?o.w()?(r=Math.min(Z/I.width,V/I.height),o=Z,I=V):isNaN(V)?(o=Z,I=I.height*(r=Z/I.width)):(o=I.width*(r=V/I.height),I=V):null!==r?"NaN"===r&&l.w()?(r=Math.min((l.width-u)/I.width,(l.height-X)/I.height))>D?(r=D,o=I.width,I=I.height):(o=l.width,I=l.height):(o=I.width*r,I=I.height*r):(r=D,o=I.width,I=I.height),null!==p?(o+=u,I+=X):p=new R(0),null!==l&&(D=l.width,l=l.height,isNaN(D)&&(D=2e3),isNaN(l)&&(l=2e3),isFinite(D)&&(o=Math.min(o,D)),isFinite(l)&&(I=Math.min(I,l))),x.width=Math.ceil(o),x.height=Math.ceil(I),"SVG"===i?null===n?null:(n.resize(x.width,x.height,x.width,x.height),n.ownerDocument=b,n.hs=M,Ru(t,n.context,p,new Pt(Math.ceil(o),Math.ceil(I)),r,z,c,m,A,e),n.context):(t.Xm=!1,Ru(t,L,p,new Pt(Math.ceil(o),Math.ceil(I)),r,z,c,m,A,e),t.Xm=!0,x.context)}Fo.className="AnimationTrigger",Fo.Default=hm,Fo.Immediate=rf,Fo.Bundled=um,(v=ki.prototype).clear=function(){for(var t=this.Pa,e=0;e<t.length;e++){var i=t.s[e];i.Ig=null,Df(i)}t.clear(),this.Zq.length=0},v.Xe=function(t){this.H=t},v.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,o=0,r=0,l=0,u=this.Pa.iterator;u.next();){var c=u.value;c instanceof Nt?o++:c instanceof dt?n++:c instanceof st?r++:c instanceof Vt?l++:i++}if(u="",0<i&&(u+=i+" Parts "),0<n&&(u+=n+" Nodes "),0<o&&(u+=o+" Groups "),0<r&&(u+=r+" Links "),0<l&&(u+=l+" Adornments "),1<t)for(t=this.Pa.iterator;t.next();)u+="\n    "+(i=t.value).toString(),null!==(n=i.data)&&Ae(n)&&(u+=" #"+Ae(n)),i instanceof dt?u+=" "+bi(n):i instanceof st&&(u+=" "+bi(i.fromNode)+" "+bi(i.toNode));return e+" "+this.Pa.count+": "+u},v.jc=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.Uh)return null;var n=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(n=!0);for(var o=B.alloc(),r=this.Pa.s,l=r.length;l--;){var u=r[l];if((!0!==n||!1!==es(u))&&u.isVisible()&&(o.assign(t),pi(o,u.oe),null!==(u=u.jc(o,e,i))&&(null!==e&&(u=e(u)),null!==u&&(null===i||i(u)))))return B.free(o),u}return B.free(o),null},v.ji=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof ot||n instanceof rt||(n=new rt),!1===this.Uh)return n;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(o=!0);for(var r=B.alloc(),l=this.Pa.s,u=l.length;u--;){var c=l[u];if((!0!==o||!1!==es(c))&&c.isVisible()){r.assign(t),pi(r,c.oe);var p=c;c.ji(r,e,i,n)&&(null!==e&&(p=e(p)),null===p||null!==i&&!i(p)||n.add(p))}}return B.free(r),n},v.Cf=function(t,e,i,n,o){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof ot||o instanceof rt||(o=new rt),!1===this.Uh)return o;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.Re(t)&&(r=!0);for(var l=this.Pa.s,u=l.length;u--;){var c=l[u];if((!0!==r||!1!==es(c))&&c.isVisible()){var p=c;c.Cf(t,e,i,n,o)&&(null!==e&&(p=e(p)),null===p||null!==i&&!i(p)||o.add(p))}}return o},v.Ou=function(t,e,i,n,o,r,l){if(!1===this.Uh)return o;for(var u=this.Pa.s,c=u.length;c--;){var p=u[c];if((!0!==l||!1!==es(p))&&r(p)&&p.isVisible()){var m=p;p.Cf(t,e,i,n,o)&&(null!==e&&(m=e(m)),null===m||null!==i&&!i(m)||o.add(m))}}return o},v.og=function(t,e,i,n,o,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof ot||o instanceof rt)&&(r=o),o=!0),r instanceof ot||r instanceof rt||(r=new rt),!1===this.Uh)return r;var l=!1;null!==this.diagram&&this.diagram.viewportBounds.ca(t)&&(l=!0);for(var u=B.alloc(),c=B.alloc(),p=this.Pa.s,m=p.length;m--;){var x=p[m];if((!0!==l||!1!==es(x))&&x.isVisible()){u.assign(t),pi(u,x.oe),c.h(t.x+e,t.y),pi(c,x.oe);var b=x;x.og(u,c,i,n,o,r)&&(null!==i&&(b=i(b)),null===b||null!==n&&!n(b)||r.add(b))}}return B.free(u),B.free(c),r},v.Fd=function(t,e){if(this.visible){var i=this.Pa.s,n=i.length;if(0!==n){t=te();for(var o=te(),r=0;r<n;r++){var l=i[r];if(l.ww=r,l instanceof st){if(!1===l.fd)continue}else if(l instanceof Vt&&null!==l.adornedPart)continue;var u=l.actualBounds;l.isVisible()&&ku(u,e)?(l.Fd(!0),t.push(l)):(l.Fd(!1),null!==l.adornments&&0<l.adornments.count&&o.push(l))}for(e=0;e<t.length;e++)for(mp(i=t[e]),i=i.adornments;i.next();)(n=i.value).measure(1/0,1/0),n.arrange(),n.Fd(!0);for(e=0;e<o.length;e++)mp(o[e]);$t(t),$t(o)}}},v.hc=function(t,e,i){if(this.visible&&0!==this.pb&&(void 0===i&&(i=!0),i||!this.isTemporary)){var n=(i=this.Pa.s).length;if(0!==n){if(t.isTemporary)for(var o=0;o<n;o++)i[o].Fj();o=nh(this,t);var r=this.Zq;r.length=0;for(var l=e.scale,u=$.alloc(),c=0;c<n;c++)this.Nj(t,i[c],e,r,l,u,!0);if($.free(u),t.isTemporary)for(e=0;e<n;e++)i[e].Fj();t.globalAlpha=o}}},v.Nj=function(t,e,i,n,o,r,l){if(l&&!es(e))t.Hs(e);else{if(null!==n&&e instanceof st&&(e.isOrthogonal&&n.push(e),!1===e.fd))return void t.Hs(e);for(l=!1,n=e.containingGroup;null!==n;)l?null!==n.tb&&r.Fx(n.tb):null!==n.tb&&(l=!0,r.assign(n.tb)),n=n.containingGroup;var u=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!r.Yc(u))return void t.Hs(e);n=!r.Re(u)}n&&(t.save(),t instanceof $i?t.ak=r.copy():(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.clip())),u.width*o>i.Oq||u.height*o>i.Oq?e.hc(t,i):(r=e.naturalBounds,0===(o=e.actualBounds).width||0===o.height||isNaN(o.x)||isNaN(o.y)||!e.isVisible()||(i=e.transform,null!==e.areaBackground&&(un(e,t,e.areaBackground,!0,!0,r,o),t.fillRect(o.x,o.y,o.width,o.height)),null===e.areaBackground&&null===e.background&&(un(e,t,"rgba(0,0,0,0.3)",!0,!1,r,o),t.fillRect(o.x,o.y,o.width,o.height)),null!==e.background&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),un(e,t,e.background,!0,!1,r,o),t.fillRect(0,0,r.width/2,r.height/2),i.ws()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))))),n&&(t.restore(),t.Vc(!0))}},v.g=function(t,e,i,n,o){var r=this.diagram;null!==r&&r.cb(ve,t,this,e,i,n,o)},v.oi=function(t,e,i){var n=this.Pa;if(e.Ig=this,null===this&&Df(e),t>=n.count)t=n.count;else if(n.M(t)===e)return-1;return n.Hb(t,e),e.Vo(i),null!==(n=this.diagram)&&(i?n.N():n.oi(e)),ju(this,t,e),t},v.qc=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.qc(t,e,i);var n=this.Pa;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.M(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.Wo(i),n.mb(t),null!==(n=this.diagram)&&(i?n.N():n.qc(e)),e.Ig=null,Df(e),t},Ot.Object.defineProperties(ki.prototype,{parts:{get:function(){return this.Pa.iterator}},partsBackwards:{get:function(){return this.Pa.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.xa},set:function(t){var e=this.xa;if(e!==t){var i=this.diagram;if(null!==i)for(""===e&&it("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&it("Layer.name is already present in this diagram: "+t);for(this.xa=t,this.g("name",e,t),t=this.Pa.iterator;t.next();)t.value.layerName=this.xa}}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",ki,"opacity"),this.pb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Pa.iterator;e.next();)e.value.$b(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Ya())}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}}}),ki.prototype.findObjectsNear=ki.prototype.og,ki.prototype.findObjectsIn=ki.prototype.Cf,ki.prototype.findObjectsAt=ki.prototype.ji,ki.prototype.findObjectAt=ki.prototype.jc,ki.className="Layer",q.prototype.clear=function(){this.animationManager.Cc(),this.model.clear(),Ja=null,lh="",fm(this,!1),this.Xn.clear(),pl(),this.Og.clear(),this.Xh=null,this.Ya(),this.Va(),this.N()},q.prototype.reset=function(){this.clear(),this.wb=!0,dm(this),Ar(this),this.Wg=!0,gm(this),this.layout=new pe,this.Wg=!1,this.model=Gp(),this.model.undoManager=new Ce,this.wb=this.rn=!1,this.N()},q.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=At.document.body);var e=kt("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,0===e.scrollLeft&&(i="negative")),t.removeChild(e),this.bu=i},q.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=At.document.body);var e=0;if(Un){var i=Im;e=cm,null===i&&((i=Im=kt("p")).style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",(e=cm=kt("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",n===(i=i.offsetWidth)&&(i=e.clientWidth),t.removeChild(e),0!=(e=n-i)||gn||(e=11)}this.Eb=e,this.Hw=!0},q.prototype.qb=function(t){t.classType===q&&(this.autoScale=t)},q.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Wa.iterator;i.next();)e+="\n  "+i.value.toString(t-1);return e},q.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},q.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})},q.prototype.computePixelRatio=function(){return null!==this.Yh?this.Yh:At.devicePixelRatio||1},q.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},q.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},q.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},q.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},q.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},q.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},q.prototype.doFocus=function(){this.focus()},q.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=At.scrollX||At.pageXOffset,e=At.scrollY||At.pageYOffset;this.ta.focus(),At.scrollTo(t,e)}},q.prototype.Py=function(){this.H.S("GainedFocus")},q.prototype.Oy=function(){this.H.S("LostFocus")},q.prototype.lx=function(t){if(null!==this.ta){var e=this.ku,i=this.hu;this.qr=!0;var n=this.documentBounds,o=this.viewportBounds,r=this.rj,l=n.x-r.left,u=n.y-r.top,c=n.width+r.left+r.right,p=n.height+r.top+r.bottom,m=n.right+r.right;r=n.bottom+r.bottom;var x=o.x;n=o.y;var b=o.width,M=o.height,A=o.right,L=o.bottom;o=this.scale;var D=t.scrollLeft;if(this.tn)switch(this.bu){case"negative":D=D+t.scrollWidth-t.clientWidth;break;case"reverse":D=t.scrollWidth-D-t.clientWidth}var I=D;b<c||M<p?(D=B.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.ju!==I&&(D.x=I/o+l,this.ju=I),this.allowVerticalScroll&&this.lu!==t.scrollTop&&(D.y=t.scrollTop/o+u,this.lu=t.scrollTop),this.position=D,B.free(D),this.Ee=this.qr=!1):(D=B.alloc(),t.vy&&this.allowHorizontalScroll&&(l<x&&(this.position=D.h(I+l,this.position.y)),m>A&&(this.position=D.h(-(e.scrollWidth-this.Aa)+I-this.Aa/o+m,this.position.y))),t.wy&&this.allowVerticalScroll&&(u<n&&(this.position=D.h(this.position.x,t.scrollTop+u)),r>L&&(this.position=D.h(this.position.x,-(e.scrollHeight-this.ya)+t.scrollTop-this.ya/o+r))),B.free(D),this.vd=!0,this.Ee=this.qr=!1,m=(n=this.documentBounds).right,A=(o=this.viewportBounds).right,r=n.bottom,L=o.bottom,l=n.x,x=o.x,u=n.y,n=o.y,b>=c&&l>=x&&m<=A&&(i.style.width="1px"),M>=p&&u>=n&&r<=L&&(i.style.height="1px"))}},q.prototype.computeBounds=function(t){return void 0===t&&(t=new $),Ni(this),ym(this,t)},q.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var i=null;if(Xe(t))for(var n=0;n<t.length;n++){var o=t[n];!e&&o instanceof st||(o.Va(),null===i?i=o.actualBounds.copy():i.ed(o.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof st||(n.Va(),null===i?i=n.actualBounds.copy():i.ed(n.actualBounds));return null===i?new $(NaN,NaN,0,0):i},q.prototype.zoomToFit=function(){var t=this.sj;this.sj=As,this.scale=_a(this,qa),t!==As&&(ao(this,!1),lf(this,this.documentBounds,this.Aa/this.Ca,this.ya/this.Ca,this.yk,!1)),this.sj=t},(v=q.prototype).CA=function(t,e){void 0===e&&(e=qa);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var o=1;if(e===qa||e===Gu)if(isNaN(i))o=this.viewportBounds.height*this.scale/n;else if(isNaN(n))o=this.viewportBounds.width*this.scale/i;else{o=this.Aa;var r=this.ya;o=e===Gu?r/n>o/i?(r-(this.Be?this.Eb:0))/n:(o-(this.gf?this.Eb:0))/i:Math.min(r/n,o/i)}this.scale=o,this.position=new B(t.x,t.y)}},v.Ky=function(t,e){this.Va();var i=this.documentBounds,n=this.viewportBounds;this.position=new B(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},v.Az=function(t){if(t instanceof vt){this.eq=t;var e=B.alloc();this.fq=this.op(t.ga(w,e)),B.free(e)}else this.eq=null,this.fq=Ks},v.Ol=function(t,e){if(void 0===e&&(e=!0),e){if((t=hf(this,t,function(i){return i.part},function(i){return i.canSelect()}))instanceof wt)return t}else if((t=hf(this,t,function(i){return i.part}))instanceof wt)return t;return null},v.jc=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),Ni(this);for(var n=this.Wa.iteratorBackwards;n.next();){var o=n.value;if(o.visible&&null!==(o=o.jc(t,e,i)))return o}return null},v.mz=function(t,e,i){return void 0===e&&(e=!0),function jv(t,e,i,n,o){for(void 0===i&&(i=null),void 0===n&&(n=null),o instanceof ot||o instanceof rt||(o=new rt),Ni(t),t=t.Wa.iteratorBackwards;t.next();){var r=t.value;r.visible&&!r.isTemporary&&r.ji(e,i,n,o)}return o}(this,t,function(n){return n.part},e?function(n){return n instanceof wt&&n.canSelect()}:null,i)},v.ji=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof ot||n instanceof rt||(n=new rt),Ni(this);for(var o=this.Wa.iteratorBackwards;o.next();){var r=o.value;r.visible&&r.ji(t,e,i,n)}return n},v.vx=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=!0),function Bv(t,e,i,n,o){var r=null;for(void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof ot||o instanceof rt||(o=new rt),Ni(t),t=t.Wa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.Cf(e,r,i,n,o)}return o}(this,t,function(o){return o instanceof wt&&(!i||o.canSelect())},e,n)},v.Cf=function(t,e,i,n,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof ot||o instanceof rt||(o=new rt),Ni(this);for(var r=this.Wa.iteratorBackwards;r.next();){var l=r.value;l.visible&&l.Cf(t,e,i,n,o)}return o},v.Ou=function(t,e,i,n,o,r){var l=new rt;Ni(this);for(var u=this.Wa.iteratorBackwards;u.next();){var c=u.value;c.visible&&c.Ou(t,e,i,n,l,o,r)}return l},v.nz=function(t,e,i,n,o){return void 0===i&&(i=!0),void 0===n&&(n=!0),function zv(t,e,i,n,o,r){var l=null;for(void 0===l&&(l=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof ot||o instanceof rt)&&(r=o),o=!0),r instanceof ot||r instanceof rt||(r=new rt),Ni(t),t=t.Wa.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.og(e,i,l,n,o,r)}return r}(this,t,e,function(r){return r instanceof wt&&(!n||r.canSelect())},i,o)},v.og=function(t,e,i,n,o,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof ot||o instanceof rt)&&(r=o),o=!0),r instanceof ot||r instanceof rt||(r=new rt),Ni(this);for(var l=this.Wa.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.og(t,e,i,n,o,r)}return r},q.prototype.acceptEvent=function(t){return ea(this,t,t instanceof MouseEvent)},q.prototype.Rz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var i=ea(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),Cs(i,t)},q.prototype.Sz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=ea(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),Cs(i,t)},q.prototype.cz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=ea(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(i),e.currentTool.standardMouseOver(),Cs(i,t)},q.prototype.dz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=ea(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(i),Cs(i,t)},q.prototype.getMouse=function(t){var e=this.ta;if(null===e)return new B(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.Aa/i.width*i.left,t=t.clientY-this.ya/i.height*i.top,null!==this.Bb?pi(new B(e,t),this.Bb):new B(e,t)},q.prototype.Ya=function(){this.Zi||(this.Zi=!0,this.ac(!1))},q.prototype.redraw=function(){this.wb||this.ld||(this.N(),this.bd())},(v=q.prototype).Qz=function(){return this.kg},v.Yy=function(t){void 0===t&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Cc(),e.isEnabled=!1,kr(this),this.hf=!1,this.du=new B(NaN,NaN),e.isEnabled=i,this.ld=!0;var n=this;null!==t&&si(function(){n.ld=!1,Sr(e,"Model"),t(n)},1)},v.ac=function(t){if(void 0===t&&(t=!1),!0!==this.kg&&!(this.wb||!1===t&&this.ld)){this.kg=!0;var e=this;At.requestAnimationFrame(function(){e.kg&&e.bd()})}},v.bd=function(){(!this.fn||this.kg)&&(this.fn&&(this.fn=!1),kr(this))},v.Ov=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Zc()||i instanceof Nt||(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof Nt&&i.isVisible()&&df(this,i);for(t.reset();t.next();)(i=t.value)instanceof st&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof Vt&&i.isVisible()&&(i.si()?(i.measure(1/0,1/0),i.arrange()):e.add(i))},v.Fd=function(t,e,i,n){if(this.vd||this.animationManager.isAnimating)for(var o=0;o<e;o++)t[o].Fd(i,n)},v.hc=function(t){if(null!==this.Ka)if(null===this.ta&&it("No canvas specified"),"svg"===this.nl){if(null!==this.Ka){var e=this.animationManager;if(!e.Ab&&(!e.isAnimating||e.isTicking)){Ka(this);var i=this.Aa,n=this.ya;if(t.Hv.resize(i,n,i,n),this.Fd(i=this.Wa.s,n=i.length,this,this.viewportBounds),this.Fc||e.isAnimating){e=this.pa;var o=this.Ca,r=Math.round(e.x*o)/o,l=Math.round(e.y*o)/o,u=this.Bb;for(u.reset(),1!==o&&u.scale(o),0===e.x&&0===e.y||u.translate(-r,-l),t.ti=null,Jm(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),1!==this.pb&&(t.globalAlpha=this.pb),Yu(this,t),this.ta.context.setTransform(e=this.Nb,0,0,e,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya),e=0;e<n;e++)i[e].hc(t,this);t=!1,this.Yf?Qa(this.Yf,this)&&(t=this.Vp()):t=!0,t&&(zt.prototype.Cd=zt.prototype.Fu),this.Fc=this.vd=!1}}}}else t:if(r=this.animationManager,!r.Ab&&(!r.isAnimating||r.isTicking)&&(i=new Date,Ka(this),"0"!==this.Ka.style.opacity)){if(n=t!==this.ib,this.Fd(e=this.Wa.s,o=e.length,this,this.viewportBounds),n)t.Vc(!0),this.vd=!0;else if(!this.Fc&&!r.isAnimating)break t;(r=this.Bb).reset(),l=this.Nb,u=this.pa;var c=this.Ca,p=Math.round(u.x*c)/c,m=Math.round(u.y*c)/c;for(1!==c&&r.scale(c),0===u.x&&0===u.y||r.translate(-p,-m),t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.Aa,this.ya),1!==this.pb&&(t.globalAlpha=this.pb),Yu(this,t),u=0;u<o;u++)t.setTransform(l,0,0,l,0,0),t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),t.yc(),e[u].hc(t,this);if(e=!1,this.Yf?Qa(this.Yf,this)&&(e=this.Vp()):e=!0,e&&(zt.prototype.Cd=zt.prototype.Fu),n?(this.ib.Vc(!0),this.vd=!0):this.Fc=this.vd=!1,e=+new Date-+i,i=this.Aw,(n=pt&&pt.ox)||null===this.Yh){for(i[this.Tq]=e,this.Tq=(this.Tq+1)%i.length,o=e=0;o<i.length;o++)e+=i[o];this.Sq=e/i.length}if(1!==this.pb&&(t.globalAlpha=1),n)for(t.setTransform(1,0,0,1,0,0),n=0;n<i.length;n++)t.fillText(i[n].toString(),20,150+20*n)}},v.Gf=function(t){return this.Rg[t]},v.Yx=function(t,e){"minDrawingLength"===t&&(this.Oq=e),this.Rg[t]=e,this.redraw()},v.Ux=function(){this.Rg=new Ht,this.Rg.drawShadows=!0,this.Rg.textGreeking=!0,this.Rg.viewportOptimizations=!(gn||Vn),this.Rg.temporaryPixelRatio=!0,this.Rg.pictureRatioOptimization=!0,this.Oq=this.Rg.minDrawingLength=1},v.Ql=function(t){return this.on[t]},v.tA=function(t,e){this.on[t]=e},v.Tx=function(){this.on=new Ht,this.on.extraTouchArea=10,this.on.extraTouchThreshold=10,this.on.hasGestureZoom=!0},v.set=function(t){return Object.assign(this,t),this},v.Eu=function(t){return this.nm(t)},v.nm=function(t){return sh(this,t),this},v.ex=function(){if(0!==this.Eh.count&&!(1<this.undoManager.transactionLevel)){for(;0<this.Eh.count;){var t=this.Eh;for(this.Eh=new Tt,t=t.iterator;t.next();){var e=t.key;e.Xo(t.value),e.rc()}}this.N()}},v.N=function(t){if(void 0===t)this.Fc=!0,this.ac();else{var e=this.viewportBounds;t.w()&&e.Yc(t)&&(this.Fc=!0,this.ac())}this.S("InvalidateDraw")},q.prototype.invalidateViewport=function(t,e){if(!0!==this.Fc)if(this.Fc=!0,"svg"===this.nl)this.bd();else{var i=!0===this.Gf("temporaryPixelRatio");if(!0===this.Gf("viewportOptimizations")&&this.scrollMode!==Tf&&this.rj.hi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,o=Math.max(t.y,e.y),r=Math.min(t.y+t.height,e.y+e.height);if(0<Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*n&&0<Math.max(0,r-o)*n){if(!(this.ld||(this.kg=!1,null===this.Ka||(this.ld=!0,this.documentBounds.w()||(n=$.alloc(),bf(this,this.computeBounds(n)),$.free(n)),n=this.ta,null===n||n instanceof wo)))){var l=this.Nb;o=this.Aa*l;var u=this.ya*l,c=this.scale*l;r=Math.round(Math.round(e.x*c)-Math.round(t.x*c)),e=Math.round(Math.round(e.y*c)-Math.round(t.y*c)),t=this.py,(c=this.kw).width!==o&&(c.width=o),c.height!==u&&(c.height=u),t.clearRect(0,0,o,u),c=190*l;var p=70*l,m=Math.max(r,0),x=Math.max(e,0),b=Math.floor(o-m),M=Math.floor(u-x);t.drawImage(n.Oa,m,x,b,M,0,0,b,M),Qa(this.Yf,this)&&t.clearRect(0,0,c,p),n=te(),t=te(),M=Math.abs(r),b=Math.abs(e);var A=0===m?0:o-M;m=B.allocAt(A,0),M=B.allocAt(M+A,u),t.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y)));var L=this.Bb;if(L.reset(),L.scale(l,l),1!==this.Ca&&L.scale(this.Ca),(0!==(l=this.pa).x||0!==l.y)&&isFinite(l.x)&&isFinite(l.y)&&L.translate(-l.x,-l.y),pi(m,L),pi(M,L),n.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y))),m.h(0,A=0===x?0:u-b),M.h(o,b+A),t.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y))),pi(m,L),pi(M,L),n.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y))),Qa(this.Yf,this)&&(m.h(o=0<r?0:-r,u=0<e?0:-e),M.h(c+o,p+u),t.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y))),pi(m,L),pi(M,L),n.push(new $(Math.min(m.x,M.x),Math.min(m.y,M.y),Math.abs(m.x-M.x),Math.abs(m.y-M.y)))),B.free(m),B.free(M),zu(this,!1,!0),null===this.Ka&&it("No div specified"),null===this.ta&&it("No canvas specified"),!this.animationManager.Ab&&(o=this.ib,this.Fc)){for(Ka(this),u=this.Nb,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,this.Aa*u,this.ya*u),o.drawImage(this.kw.Oa,0<r?0:Math.round(-r),0<e?0:Math.round(-e)),r=this.pa,l=this.Ca,c=Math.round(r.x*l)/l,p=Math.round(r.y*l)/l,(e=this.Bb).reset(),1!==l&&e.scale(l),0===r.x&&0===r.y||e.translate(-c,-p),o.save(),o.beginPath(),r=t.length,l=0;l<r;l++)0!==(c=t[l]).width&&0!==c.height&&o.rect(Math.floor(c.x),Math.floor(c.y),Math.ceil(c.width),Math.ceil(c.height));for(o.clip(),o.setTransform(u,0,0,u,0,0),o.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),o.yc(),this.Fd(e=this.Wa.s,r=e.length,this,this.viewportBounds),Yu(this,o),o.globalAlpha=this.pb,u=0;u<r;u++)if(c=n,(l=e[u]).visible&&0!==l.pb){p=nh(l,o),(x=l.Zq).length=0,m=this.scale,b=$.alloc(),L=(M=l.Pa.s).length,A=c.length;for(var D=0;D<L;D++){var I=M[D],z=Ds(I,I.actualBounds);t:{for(var X=2/m,V=4/m,Z=0;Z<A;Z++){var J=c[Z];if(0!==J.width&&0!==J.height&&z.Wu(J.x-X,J.y-X,J.width+V,J.height+V)){z=!0;break t}}z=!1}z&&l.Nj(o,I,this,x,m,b,!0)}$.free(b),o.globalAlpha=p}o.restore(),o.Vc(!0),this.Yf&&Qa(this.Yf,this)&&this.Vp(),this.Fc=this.vd=!1,this.gk()}$t(n),$t(t),this.ld=!1}}else this.bd();i&&(oh(this),this.bd(),Bu(this,!0))}else i?(oh(this),this.bd(),Bu(this,!0)):this.bd()}},(v=q.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&it("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Pj(t.layerName))&&(e=this.Pj("")),null===e&&it('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.oi(99999999,t,t.diagram===this);0<=i&&this.cb(Ke,"parts",e,null,t,null,i),e.isTemporary||this.Ya(),t.C(1),null!==(i=t.layerChanged)&&i(t,null,e)}},v.oi=function(t){this.partManager.oi(t);var e=this;Is(t,function(i){km(e,i)}),(t instanceof Vt||t instanceof Nt&&null!==t.placeholder)&&t.v(),null!==t.data&&Is(t,function(i){Xp(e.partManager,i)}),!0!==_n(t)&&!0!==ts(t)||this.De.add(t),R0(t,!0,this),X0(t)?(t.actualBounds.w()&&this.N(Ds(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Ds(t,t.actualBounds)),this.ac()},v.qc=function(t){t.Dj(),this.partManager.qc(t);var e=this;null!==t.data&&Is(t,function(i){Hp(e.partManager,i,e)}),this.De.remove(t),X0(t)?(t.actualBounds.w()&&this.N(Ds(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Ds(t,t.actualBounds)),this.ac()},v.remove=function(t){pf(this,t,!0)},v.Is=function(t,e){if(void 0===e&&(e=!1),Xe(t))for(var i=t.length,n=0;n<i;n++){var o=t[n];e&&!o.canDelete()||this.remove(o)}else for((i=new rt).addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},v.Jj=function(t,e,i){return void 0===i&&(i=!1),this.partManager.Jj(t,e,i)},q.prototype.moveParts=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=mf(this)),null!==this.toolManager){var o=new Tt;if(null!==t)if(Xe(t))for(var r=0;r<t.length;r++)Mr(this,o,t[r],i,n);else for(t=t.iterator;t.next();)Mr(this,o,t.value,i,n);else{for(t=this.parts;t.next();)Mr(this,o,t.value,i,n);for(t=this.nodes;t.next();)Mr(this,o,t.value,i,n);for(t=this.links;t.next();)Mr(this,o,t.value,i,n)}gf(this,o,e,n,i)}},q.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new B),n.assign(e),null===t)return n;var o=e,r=i.isGridSnapEnabled;r&&(i.isGridSnapRealtime||this.lastInput.up)&&yf(this,t,e,o=B.alloc(),i),i=null!==t.dragComputation?t.dragComputation(t,e,o):o;var l=t.minLocation,u=l.x;isNaN(u)&&(u=r?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=r?Math.round(1e3*t.location.y)/1e3:t.location.y);var c=t.maxLocation,p=c.x;return isNaN(p)&&(p=r?Math.round(1e3*t.location.x)/1e3:t.location.x),c=c.y,isNaN(c)&&(c=r?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(u,Math.min(i.x,p)),Math.max(l,Math.min(i.y,c))),o!==e&&B.free(o),n},(v=q.prototype).Pd=function(t,e,i){if(void 0===i)return new qr(no);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(n=!1),new qr(n?new B(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3):i.copy())},v.Al=function(t){vf(this,t,null),t.Xe(this);var e=this.Wa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.M(i).isTemporary;)i--;return e.Hb(i+1,t),null!==this.dc&&this.cb(Ke,"layers",this,null,t,null,i+1),this.N(),this.Ya(),this},v.Xw=function(t,e){vf(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.dc&&this.cb(Qe,"layers",this,t,null,n,null));var r,o=i.count;for(r=0;r<o;r++)if(i.M(r)===e){i.Hb(r,t);break}return null!==this.dc&&this.cb(Ke,"layers",this,null,t,null,r),this.N(),0>n&&this.Ya(),this},v.Dy=function(t,e){vf(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.dc&&this.cb(Qe,"layers",this,t,null,n,null));var r,o=i.count;for(r=0;r<o;r++)if(i.M(r)===e){i.Hb(r+1,t);break}return null!==this.dc&&this.cb(Ke,"layers",this,null,t,null,r+1),this.N(),0>n&&this.Ya(),this},v.lA=function(t){if(t.diagram!==this&&it("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Wa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Pa.copy().iterator;e.next();){var n=e.value,o=n.layerName;n.layerName=o!==t.name?o:""}null!==this.dc&&this.cb(Qe,"layers",this,t,null,i,null),this.N(),this.Ya()}}},v.Pj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},v.Zw=function(t){return null===this.pf&&(this.pf=new ot),this.pf.add(t),this.model.Pe(t),this},v.nA=function(t){null!==this.pf&&(this.pf.remove(t),0===this.pf.count&&(this.pf=null)),this.model.hk(t)},v.Pe=function(t){return null===this.zg&&(this.zg=new ot),this.zg.add(t),this},v.hk=function(t){null!==this.zg&&(this.zg.remove(t),0===this.zg.count&&(this.zg=null))},v.ds=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Uu(t),t.change!==ro&&(this.isModified=!0),null!==this.zg)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.M(n)(t)},v.cb=function(t,e,i,n,o,r,l){void 0===r&&(r=null),void 0===l&&(l=null);var u=new be;u.diagram=this,u.change=t,u.propertyName=e,u.object=i,u.oldValue=n,u.oldParam=r,u.newValue=o,u.newParam=l,this.ds(u)},v.g=function(t,e,i,n,o){this.cb(ve,t,this,e,i,n,o)},q.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===ve){var o=t.object;if(de(o,t.propertyName,t.I(e)),o instanceof vt){var r=o.part;null!==r&&r.Xb()}this.isModified=!0}else if(n===Ke){var l=t.object,u=t.newParam,c=t.newValue;if(l instanceof nt)if("number"==typeof u&&c instanceof vt){e?l.qc(u):l.Hb(u,c);var p=l.part;null!==p&&p.Xb()}else"number"==typeof u&&c instanceof Re&&(c.isRow?d0(l,u,e?void 0:c):f0(l,u,e?void 0:c));else if(l instanceof ki){var m=!0===t.oldParam;"number"==typeof u&&c instanceof wt&&(e?(c.isSelected=!1,c.isHighlighted=!1,c.Xb(),l.qc(m?u:-1,c,m)):l.oi(u,c,m))}else l instanceof q?"number"==typeof u&&c instanceof ki&&(e?this.Wa.mb(u):(c.Xe(this),this.Wa.Hb(u,c))):it("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Qe){var x=t.object,b=t.oldParam,M=t.oldValue;if(x instanceof nt)"number"==typeof b&&M instanceof vt?e?x.Hb(b,M):x.qc(b):"number"==typeof b&&M instanceof Re&&(M.isRow?d0(x,b,e?M:void 0):f0(x,b,e?M:void 0));else if(x instanceof ki){var A=!0===t.newParam;"number"==typeof b&&M instanceof wt&&(e?0>x.Pa.indexOf(M)&&x.oi(b,M,A):(M.isSelected=!1,M.isHighlighted=!1,M.Xb(),x.qc(A?b:-1,M,A)))}else x instanceof q?"number"==typeof b&&M instanceof ki&&(e?(M.Xe(this),this.Wa.Hb(b,M)):this.Wa.mb(b)):it("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==ro&&it("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},q.prototype.Ea=function(t){return this.undoManager.Ea(t)},q.prototype.eb=function(t){return this.undoManager.eb(t)},q.prototype.Kf=function(){return this.undoManager.Kf()},q.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},q.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},q.prototype.rp=function(){this.partManager.rp()},q.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.D(e)){void 0===n&&(n=!1),n||(this.Ee=!0),this.vd=!0;var o=this.layout;null===o||!o.isViewportSized||this.autoScale!==bn||t.width===e.width&&t.height===e.height||o.C(),o=this.currentTool,!0===this.Uk&&o instanceof Se&&(this.lastInput.documentPoint=this.Ps(this.lastInput.viewPoint),Ig(o,this)),this.wb||this.invalidateViewport(t,e),Cr(this),this.gc.scale=i,this.gc.position.x=t.x,this.gc.position.y=t.y,this.gc.bounds.assign(t),this.gc.canvasSize.width=Math.round(t.width*i),this.gc.canvasSize.height=Math.round(t.height*i),this.gc.newCanvasSize.width=this.Aa,this.gc.newCanvasSize.height=this.ya,this.gc.isScroll=n,this.S("ViewportBoundsChanged",this.gc,t),this.isVirtualized&&this.links.each(function(r){r.isAvoiding&&r.actualBounds.Yc(e)&&r.bb()})}},q.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.S("ChangingSelection",e);for(var i=e.Fa(),n=i.length,o=0;o<n;o++)i[o].isSelected=!1;e.ka(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},q.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},q.prototype.sA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),Xe(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof wt||it("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof wt||it("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},q.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Fa(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ka(),t.clear(),t.freeze()}},(v=q.prototype).Jz=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},v.Kz=function(t){t=(new rt).addAll(t);for(var e=this.highlighteds.copy().hp(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof wt||it("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},v.scroll=function(t,e,i){void 0===i&&(i=1);var n="up"===e||"down"===e,o=0,r=B.alloc();if("pixel"===t)o=i;else if("line"===t)o=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=n?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(o=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return o=this.documentBounds,i=this.viewportBounds,"up"===e?this.position=r.h(i.x,o.y):"left"===e?this.position=r.h(o.x,i.y):"down"===e?this.position=r.h(i.x,o.bottom-i.height):"right"===e&&(this.position=r.h(o.right-i.width,i.y)),void B.free(r);it("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,i=this.position,"up"===e?this.position=r.h(i.x,i.y-o):"down"===e?this.position=r.h(i.x,i.y+o):"left"===e?this.position=r.h(i.x-o,i.y):"right"===e?this.position=r.h(i.x+o,i.y):it("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),B.free(r)},v.uv=function(t){var e=this.viewportBounds;e.Re(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},v.es=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},v.op=function(t){var e=this.Bb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var i=this.pa;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.Bb)},v.AA=function(t){var e=this.Bb,i=t.x,n=t.y,o=i+t.width,r=n+t.height,l=e.m11,u=e.m12,c=e.m21,p=e.m22,m=e.dx,x=e.dy,b=i*l+n*c+m;e=i*u+n*p+x;var M=o*l+n*c+m;return t=o*u+n*p+x,n=i*l+r*c+m,i=i*u+r*p+x,l=o*l+r*c+m,o=o*u+r*p+x,r=Math.min(b,M),b=Math.max(b,M),M=Math.min(e,t),e=Math.max(e,t),r=Math.min(r,n),b=Math.max(b,n),M=Math.min(M,i),e=Math.max(e,i),r=Math.min(r,l),b=Math.max(b,l),new $(r,M=Math.min(M,o),b-r,(e=Math.max(e,o))-M)},v.Ps=function(t){var e=this.Bb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var i=this.pa;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),pi(t.copy(),this.Bb)},q.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===ro&&"S"===n[0])if("StartingFirstTransaction"===n){var o=this;(t=this.toolManager).mouseDownTools.each(function(c){return c.diagram=o}),t.mouseMoveTools.each(function(c){return c.diagram=o}),t.mouseUpTools.each(function(c){return c.diagram=o}),this.ld||this.hf||(this.Ik=!0,this.fn&&(this.kg=!0))}else"StartingUndo"===n||"StartingRedo"===n?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc(),this.S("ChangingSelection",this.selection)):"StartedTransaction"===n&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc();else if(this.aa){this.aa=!1;try{if(""===t.modelChange&&i===ro){("FinishedUndo"===n||"FinishedRedo"===n)&&(this.S("ChangedSelection",this.selection),Ni(this));var r=this.animationManager;"RolledBackTransaction"===n&&r.Cc(),this.ex(),this.Ik=!0,this.bd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||ef(r),"CommittedTransaction"===n&&this.undoManager.isJustDiscarded&&(this.Ce=Math.min(this.Ce,this.undoManager.historyIndex-1)),"CommittedTransaction"!==n&&"RolledBackTransaction"!==n||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(Sm(this),this.As.clear(),function Lv(t){for(t=t.Ei.iterator;t.next();)t.value.Wk=!1}(this.animationManager)),!this.Rt&&l&&this.lastInput.targetDiagram){this.Rt=!0;var u=this;si(function(){u.currentTool.standardMouseOver(),u.Rt=!1},10)}}}finally{this.aa=!0}}}},q.prototype.Wd=function(){this.partManager.Wd()},q.prototype.Aj=function(t,e){this.Yd.Aj(t,e)},q.prototype.Cj=function(t,e){this.Yd.Cj(t,e)},q.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},q.prototype.Wb=function(t){return this.partManager.Wb(t)},q.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(v=q.prototype).Lc=function(t){return this.partManager.Lc(t)},v.ii=function(t){return this.partManager.ii(t)},v.Kc=function(t){return this.partManager.Kc(t)},v.ms=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ms.apply(this.partManager,e instanceof Array?e:Zs(xt(e)))},v.ls=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ls.apply(this.partManager,e instanceof Array?e:Zs(xt(e)))},v.Va=function(){if(this.Zi){var t=$.alloc();bf(this,this.computeBounds(t)),$.free(t)}},v.sz=function(){for(var t=new rt,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)(i=e.value).isTopLevel&&t.add(i);return t.iterator},v.rz=function(){return this.ai.iterator},v.Vz=function(t){Ni(this),t&&Hu(this,!0),this.ld?Sf(this,!1):(this.Ik=!0,kr(this))},v.zz=function(){for(var t=new ot,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&null===i.kh()&&t.add(i)}return t.iterator},v.Bj=function(t,e){return null!==(t=kf(this,t))&&t.add(e),this},v.am=function(t,e){null!==(t=kf(this,t))&&t.remove(e)},v.S=function(t,e,i){var n=kf(this,t),o=new qs;if(o.diagram=this,null!==(t=Am(this,t))&&(o.name=t),void 0!==e&&(o.subject=e),void 0!==i&&(o.parameter=i),1===(e=n.length))n.M(0)(o);else if(0!==e)for(n=n.Fa(),i=0;i<e;i++)(0,n[i])(o)},v.Xj=function(t,e){return Mf(this,!1,null,e||null).Xj(t.x,t.y,t.width,t.height)},q.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Zi?ym(this,t):t.assign(this.documentBounds)},q.prototype.gs=function(t){this.wp.assign(t),this.computeAutoScrollPosition(this.wp).Xa(this.position)?this.ug():Lm(this)},q.prototype.ug=function(){-1!==this.uk&&(At.clearTimeout(this.uk),this.uk=-1)},q.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.xp;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,o=this.scale;n=$.allocAt(0,0,n.width*o,n.height*o);var r=B.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);r.x-=l|=0,t.x<n.x+i.left/2&&(r.x-=l),t.x<n.x+i.left/4&&(r.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),r.x+=l|=0,t.x>n.x+n.width-i.right/2&&(r.x+=l),t.x>n.x+n.width-i.right/4&&(r.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),r.y-=l|=0,t.y<n.y+i.top/2&&(r.y-=l),t.y<n.y+i.top/4&&(r.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),r.y+=l|=0,t.y>n.y+n.height-i.bottom/2&&(r.y+=l),t.y>n.y+n.height-i.bottom/4&&(r.y+=4*l)),r.Xa(no)||(e=new B(e.x+r.x/o,e.y+r.y/o)),$.free(n),B.free(r),e},(v=q.prototype).Cs=function(){return null},v.bv=function(){return null},v.bs=function(t,e){this.pj.add(t,e)},v.Gu=function(t){(this.Qw=t)||this.nodes.each(function(e){e instanceof Nt&&(e.$p=null)})},v.Xz=function(t){return Un?(void 0===t&&(t={}),t.returnType="Image",this.Kx(t)):null},v.Kx=function(t){return void 0===t&&(t={}),Nm(this,this.Yz,t)},v.Yz=function(t,e,i){var n=Fm(i,t,"canvas",null);if(null===n)return null;var o=null;if(null!==(i=n.Z.canvas))switch(o=t.returnType,o=void 0===o?"string":o.toLowerCase(),o){case $a+"data":o=n.getImageData(0,0,i.width,i.height);break;case $a:(n=(t.document||document).createElement("img")).src=i.toDataURL(t.type,t.details),o=n;break;case"blob":return"function"!=typeof e&&it('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof i.toBlob?(i.toBlob(e,t.type,t.details),"toBlob"):(e(null),null);default:o=i.toDataURL(t.type,t.details)}return"function"==typeof e?(e(o),null):o},Ot.Object.defineProperties(q.prototype,{renderer:{get:function(){return this.nl},set:function(t){this instanceof Io||(""===t&&(t="default"),(t=t.toLowerCase())!==this.nl&&(this.nl=t,"default"===t||"canvas"===t?(null!==(t=this.pj.get("svg"))&&t.Oa.remove(),this.ta&&(this.ib=this.ta.context)):"svg"===t?(this.pj.contains("svg")?t=this.pj.get("svg"):(t=new wo(this,At.document),this.bs("svg",t)),null!==this.div&&this.div.appendChild(t.Oa),this.ib=t.context,this.ta&&(this.ta.context.setTransform(this.Nb,0,0,this.Nb,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya))):"debug"!==t||this.pj.contains("SVG")||(t=new wo(this,At.document),this.bs("SVG",t),t.Oa.style.backgroundColor="whitesmoke",null!==this.div&&this.div.after(t.Oa)),this.gk()))}},div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;null!==e?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.ta&&(this.removeEventListener(e=this.ta.Oa,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.ta.nx()),this.ol&&(this.ol.disconnect(),this.ol=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.ta=null,this.removeEventListener(At,"resize",this.Pv,!1),this.removeEventListener(At,"wheel",this.Zj,!0),Za===this&&(Za=null)):null===this.ui&&(this.hf=!1),this.Ka=null,null!==t&&((e=t.H)&&(e.div=null),sf(this,t),this.gk())}}},ax:{get:function(){return this.Sq}},pi:{get:function(){return this.hf}},draggedLink:{get:function(){return this.nt},set:function(t){this.nt!==t&&(this.nt=t,null!==t&&(this.Vt=t.fromPort,this.Wt=t.toPort))}},Nx:{get:function(){return this.Vt},set:function(t){this.Vt=t}},Ox:{get:function(){return this.Wt},set:function(t){this.Wt=t}},animationManager:{get:function(){return this.Yd}},undoManager:{get:function(){return this.dc.undoManager}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t,this.dc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.lt},set:function(t){this.lt=t}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",q,"opacity"),this.pb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.wu},set:function(t){var e=this.wu;e!==t&&(this.wu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Wa.iterator}},isModelReadOnly:{get:function(){var t=this.dc;return null!==t&&t.isReadOnly},set:function(t){var e=this.dc;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Jd},set:function(t){var e=this.Jd;e!==t&&(this.Jd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(this.Us=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(this.Ys=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.Ee=!0,this.N(),this.g("hasVerticalScrollbar",e,t),ao(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.mn},set:function(t){var e=this.mn;e!==t&&(this.mn=t,this.Ee=!0,this.N(),this.g("hasHorizontalScrollbar",e,t),ao(this,!1))}},allowHorizontalScroll:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e!==t&&(this.Xs=t,this.g("allowHorizontalScroll",e,t),ao(this,!1))}},allowVerticalScroll:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("allowVerticalScroll",e,t),ao(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.iu},set:function(t){var e=this.iu;e!==t&&(0>t&&le(t,">= 0",q,"scrollHorizontalLineChange"),this.iu=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.mu},set:function(t){var e=this.mu;e!==t&&(0>t&&le(t,">= 0",q,"scrollVerticalLineChange"),this.mu=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.cj},set:function(t){this.cj=t}},previousInput:{get:function(){return this.Qg},set:function(t){this.Qg=t}},firstInput:{get:function(){return this.bq},set:function(t){this.bq=t}},currentCursor:{get:function(){return this.it},set:function(t){if(""===t&&(t=this.Op),this.it!==t){var e=this.ta,i=this.Ka;if(null!==e&&null!==i){this.it=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Op},set:function(t){""===t&&(t="auto");var e=this.Op;e!==t&&(this.Op=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.zh},set:function(t){var e=this.zh;e!==t&&(this.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Qt},set:function(t){var e=this.Qt;e!==t&&(this.Qt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t,t.Xe(this))}},toolManager:{get:function(){return this.te},set:function(t){this.te!==t&&(this.te=t,t.diagram=this)}},defaultTool:{get:function(){return this.ob},set:function(t){var e=this.ob;e!==t&&(this.ob=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hb},set:function(t){var e=this.hb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.hb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Iw}},maxSelectionCount:{get:function(){return this.Nt},set:function(t){var e=this.Nt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Nt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.S("ChangingSelection",this.selection),e=this.selection.Fa();for(var i=0;i<t;i++)e[i].isSelected=!1;this.S("ChangedSelection",this.selection)}}else le(t,">= 0",q,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(this.St=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.wt},set:function(t){var e=this.wt;e!==t&&(this.wt=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Kt},set:function(t){var e=this.Kt;e!==t&&(this.Kt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.ow}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.rn&&this.Ce!==t.historyIndex:this.rn},set:function(t){if(this.rn!==t){this.rn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Ce=e.historyIndex),t||Sm(this)}}},model:{get:function(){return this.dc},set:function(t){var e=this.dc;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&it("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Cc(!0);var i=fm(this,!0);this.hf=!1,this.fn=!0,this.Ce=-2,this.kg=!1;var n=this.wb;this.wb=!0,Sr(this.animationManager,"Model"),e&&(null!==this.pf&&this.pf.each(function(r){return e.hk(r)}),e.hk(this.Oc)),this.dc=t,this.partManager=function Xv(t){return null!==(t=Vu.get(t))?new t:new Jt}(this.dc.type);for(var o=0;o<i.length;o++)this.add(i[o]);t.Pe(this.Ib),this.partManager.addAllModeledParts(),t.hk(this.Ib),t.Pe(this.Oc),null!==this.pf&&this.pf.each(function(r){return t.Pe(r)}),this.wb=n,this.Ya(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},aa:{get:function(){return this.sw},set:function(t){this.sw=t}},As:{get:function(){return this.ty}},skipsModelSourceBindings:{get:function(){return this.Jw},set:function(t){this.Jw=t}},Ns:{get:function(){return this.ou},set:function(t){this.ou=t}},nodeTemplate:{get:function(){return this.Lg.I("")},set:function(t){var e=this.Lg.I("");e!==t&&(this.Lg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},nodeTemplateMap:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplate:{get:function(){return this.Yi.I("")},set:function(t){var e=this.Yi.I("");e!==t&&(this.Yi.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplateMap:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplate:{get:function(){return this.Kh.I("")},set:function(t){var e=this.Kh.I("");e!==t&&(this.Kh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplateMap:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},isMouseCaptured:{get:function(){return this.rw},set:function(t){var e=this.ta;null!==e&&((e=e.Oa)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.ui,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.addEventListener(At,"pointermove",this.ck,!0),this.addEventListener(At,"pointerdown",this.ui,!0),this.addEventListener(At,"pointerup",this.ek,!0),this.addEventListener(At,"pointerout",this.dk,!0),this.addEventListener(At,"pointercancel",this.bk,!0),this.removeEventListener(e,"wheel",this.Zj,!1),this.addEventListener(At,"wheel",this.Zj,!0),this.addEventListener(At,"selectstart",this.preventDefault,!1)):(this.removeEventListener(At,"pointermove",this.ck,!0),this.removeEventListener(At,"pointerdown",this.ui,!0),this.removeEventListener(At,"pointerup",this.ek,!0),this.removeEventListener(At,"pointerout",this.dk,!0),this.removeEventListener(At,"pointercancel",this.bk,!0),this.addEventListener(e,"pointermove",this.ck,!1),this.addEventListener(e,"pointerdown",this.ui,!1),this.addEventListener(e,"pointerup",this.ek,!1),this.addEventListener(e,"pointerout",this.dk,!1),this.addEventListener(e,"pointercancel",this.bk,!1),this.removeEventListener(At,"wheel",this.Zj,!0),this.removeEventListener(At,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Zj,!1)),this.rw=t))}},position:{get:function(){return this.pa},set:function(t){var e=B.alloc().assign(this.pa);if(!e.D(t)){var i=this.viewportBounds.copy();this.pa.assign(t),Qg(this.animationManager,e,this.pa),this.wb||null===this.ta&&!this.wo.w()?Ar(this):(this.wb=!0,lf(this,this.Sp,this.Aa/(t=this.scale),this.ya/t,this.yk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(i,this.viewportBounds,this.Ca,!1)}B.free(e)}},initialPosition:{get:function(){return this.zt},set:function(t){this.zt.D(t)||(this.zt=t.J())}},initialScale:{get:function(){return this.At},set:function(t){this.At!==t&&(this.At=t)}},grid:{get:function(){return null===this.fe&&(this.fe=mm(this)),this.fe},set:function(t){var e=this.fe;if(e!==t){null===e&&(e=this.fe=mm(this)),t.type!==nt.Grid&&it("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;null!==i&&i.remove(e),this.fe=t,t.name="GRID",null!==i&&i.add(t),Cr(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.Sw}},viewSize:{get:function(){return this.wo},set:function(t){var e=this.viewSize;e.D(t)||(this.wo=t=t.J(),this.ya=this.Aa=0,t.w()?(this.Aa=t.width,this.ya=t.height):null!==this.Ka&&(this.Aa=this.Ka.clientWidth||1,this.ya=this.Ka.clientHeight||1),Ar(this),this.Ya(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.ut},set:function(t){var e=this.ut;e.D(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||it("fixedBounds width/height must not be Infinity"),this.ut=t=t.J(),this.Ya(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.rj},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.rj;e.D(t)||(this.rj=t=t.J(),this.g("scrollMargin",e,t),this.gk())}},scrollMode:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,t===As&&ao(this,!1),this.g("scrollMode",e,t),this.Ee=!0,this.N())}},scrollsPageOnFocus:{get:function(){return this.nu},set:function(t){var e=this.nu;e!==t&&(this.nu=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Zt},set:function(t){var e=this.Zt;e!==t&&(this.Zt=t,ao(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.fu},set:function(t){var e=this.fu;e!==t&&(this.fu=t,bm(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Sp}},isVirtualized:{get:function(){return this.It},set:function(t){var e=this.It;e!==t&&(this.It=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&bm(this,e,t)}},defaultScale:{get:function(){return this.Pp},set:function(t){this.Pp=t}},autoScale:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("autoScale",e,t),t!==bn&&ao(this,!1))}},initialAutoScale:{get:function(){return this.Fg},set:function(t){var e=this.Fg;e!==t&&(this.Fg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Bt},set:function(t){var e=this.Bt;e!==t&&(t.sb()||it("initialViewportSpot must be a specific Spot: "+t),this.Bt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.yt},set:function(t){var e=this.yt;e!==t&&(t.sb()||it("initialViewportSpot must be a specific Spot: "+t),this.yt=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0<t?(this.Ot=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):le(t,"> 0",q,"minScale"))}},maxScale:{get:function(){return this.Mt},set:function(t){var e=this.Mt;e!==t&&(0<t?(this.Mt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):le(t,"> 0",q,"maxScale"))}},zoomPoint:{get:function(){return this.zu},set:function(t){this.zu.D(t)||(this.zu=t=t.J())}},contentAlignment:{get:function(){return this.yk},set:function(t){var e=this.yk;e.D(t)||(this.yk=t=t.J(),this.g("contentAlignment",e,t),ao(this,!1))}},initialContentAlignment:{get:function(){return this.pq},set:function(t){var e=this.pq;e.D(t)||(this.pq=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.zb},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.Ya(),this.g("padding",e,t))}},partManager:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(null!==t.diagram&&it("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Xe(null),this.Pc=t,t.Xe(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Sc},set:function(t){var e=this.Sc;e!==t&&(this.Sc=t,t.diagram=this,t.group=null,this.xh=!0,this.g("layout",e,t),this.ac())}},isTreePathToChildren:{get:function(){return this.Ht},set:function(t){var e=this.Ht;if(e!==t&&(this.Ht=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Ah(t.value)}},treeCollapsePolicy:{get:function(){return this.uu},set:function(t){var e=this.uu;e!==t&&(t!==ia&&t!==Lf&&t!==Nf&&it("Unknown Diagram.treeCollapsePolicy: "+t),this.uu=t,this.g("treeCollapsePolicy",e,t))}},Ue:{get:function(){return this.qw},set:function(t){this.qw=t}},avoidanceCellSize:{get:function(){return this.bw},set:function(t){this.Xh=null,this.bw=new Pt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.cw},set:function(t){this.cw=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.xp},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.xp;e.D(t)||(this.xp=t=t.J(),this.Ya(),this.g("autoScrollRegion",e,t))}}}),Ot.Object.defineProperties(q,{licenseKey:{get:function(){return Ff.kc()},set:function(t){Ff.add(t.replace(/\s/g,""))}},version:{get:function(){return Vv}}}),q.prototype.makeImageData=q.prototype.Kx,q.prototype.makeImage=q.prototype.Xz,q.prototype.cacheGroupExternalLinks=q.prototype.Gu,q.prototype.addRenderer=q.prototype.bs,q.prototype.makeSVG=q.prototype.bv,q.prototype.makeSvg=q.prototype.Cs,q.prototype.stopAutoScroll=q.prototype.ug,q.prototype.doAutoScroll=q.prototype.gs,q.prototype.isUnoccupied=q.prototype.Xj,q.prototype.raiseDiagramEvent=q.prototype.S,q.prototype.removeDiagramListener=q.prototype.am,q.prototype.addDiagramListener=q.prototype.Bj,q.prototype.findTreeRoots=q.prototype.zz,q.prototype.layoutDiagram=q.prototype.Vz,q.prototype.findTopLevelGroups=q.prototype.rz,q.prototype.findTopLevelNodesAndLinks=q.prototype.sz,q.prototype.ensureBounds=q.prototype.Va,q.prototype.findLinksByExample=q.prototype.ls,q.prototype.findNodesByExample=q.prototype.ms,q.prototype.findLinkForData=q.prototype.Kc,q.prototype.findNodeForData=q.prototype.ii,q.prototype.findPartForData=q.prototype.Lc,q.prototype.findLinkForKey=q.prototype.findLinkForKey,q.prototype.findNodeForKey=q.prototype.Wb,q.prototype.findPartForKey=q.prototype.findPartForKey,q.prototype.rebuildParts=q.prototype.Wd,q.prototype.transformViewToDoc=q.prototype.Ps,q.prototype.transformRectDocToView=q.prototype.AA,q.prototype.transformDocToView=q.prototype.op,q.prototype.centerRect=q.prototype.es,q.prototype.scrollToRect=q.prototype.uv,q.prototype.scroll=q.prototype.scroll,q.prototype.highlightCollection=q.prototype.Kz,q.prototype.highlight=q.prototype.Jz,q.prototype.selectCollection=q.prototype.sA,q.prototype.select=q.prototype.select,q.prototype.updateAllRelationshipsFromData=q.prototype.rp,q.prototype.updateAllTargetBindings=q.prototype.updateAllTargetBindings,q.prototype.commit=q.prototype.commit,q.prototype.rollbackTransaction=q.prototype.Kf,q.prototype.commitTransaction=q.prototype.eb,q.prototype.startTransaction=q.prototype.Ea,q.prototype.raiseChanged=q.prototype.g,q.prototype.raiseChangedEvent=q.prototype.cb,q.prototype.removeChangedListener=q.prototype.hk,q.prototype.addChangedListener=q.prototype.Pe,q.prototype.removeModelChangedListener=q.prototype.nA,q.prototype.addModelChangedListener=q.prototype.Zw,q.prototype.findLayer=q.prototype.Pj,q.prototype.removeLayer=q.prototype.lA,q.prototype.addLayerAfter=q.prototype.Dy,q.prototype.addLayerBefore=q.prototype.Xw,q.prototype.addLayer=q.prototype.Al,q.prototype.moveParts=q.prototype.moveParts,q.prototype.copyParts=q.prototype.Jj,q.prototype.removeParts=q.prototype.Is,q.prototype.remove=q.prototype.remove,q.prototype.add=q.prototype.add,q.prototype.clearDelayedGeometries=q.prototype.ex,q.prototype.setProperties=q.prototype.nm,q.prototype.attach=q.prototype.Eu,q.prototype.set=q.prototype.set,q.prototype.resetInputOptions=q.prototype.Tx,q.prototype.setInputOption=q.prototype.tA,q.prototype.getInputOption=q.prototype.Ql,q.prototype.resetRenderingHints=q.prototype.Ux,q.prototype.setRenderingHint=q.prototype.Yx,q.prototype.getRenderingHint=q.prototype.Gf,q.prototype.maybeUpdate=q.prototype.bd,q.prototype.requestUpdate=q.prototype.ac,q.prototype.delayInitialization=q.prototype.Yy,q.prototype.isUpdateRequested=q.prototype.Qz,q.prototype.invalidateDocumentBounds=q.prototype.Ya,q.prototype.findObjectsNear=q.prototype.og,q.prototype.findPartsNear=q.prototype.nz,q.prototype.findObjectsIn=q.prototype.Cf,q.prototype.findPartsIn=q.prototype.vx,q.prototype.findObjectsAt=q.prototype.ji,q.prototype.findPartsAt=q.prototype.mz,q.prototype.findObjectAt=q.prototype.jc,q.prototype.findPartAt=q.prototype.Ol,q.prototype.focusObject=q.prototype.Az,q.prototype.alignDocument=q.prototype.Ky,q.prototype.zoomToRect=q.prototype.CA,q.prototype.zoomToFit=q.prototype.zoomToFit,q.prototype.diagramScroll=q.prototype.lx,q.prototype.focus=q.prototype.focus;var Vu=new Tt,Im=null,Un=void 0!==At.document,Ja=null,lh="",bn=new ut(q,"None",0),qa=new ut(q,"Uniform",1),Gu=new ut(q,"UniformToFill",2),Pf=new ut(q,"CycleAll",10),Om=new ut(q,"CycleNotDirected",11),Em=new ut(q,"CycleNotDirectedFast",12),Dm=new ut(q,"CycleNotUndirected",13),jm=new ut(q,"CycleDestinationTree",14),Bm=new ut(q,"CycleSourceTree",15),As=new ut(q,"DocumentScroll",1),Tf=new ut(q,"InfiniteScroll",2),ia=new ut(q,"TreeParentCollapsed",21),Lf=new ut(q,"AllParentsCollapsed",22),Nf=new ut(q,"AnyParentsCollapsed",23),Ff=new ot,Vv="2.3.13",$a="image",zm=null,Rm=!1;function Ym(){this.xy=null,this.j="zz@orderNum",this.Rc="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function Qa(t,e){if(e.ib.setTransform(e.Nb,0,0,e.Nb,0,0),e.ib.yc(),null===t.Rc)t:{e="f";var i=At[Qt("76a715b2f73f148a")][Qt("72ba13b5")]||"";if(t.Rc=!0,Un){var n=q[Qt("76a115b6ed251eaf4692")];if(n)for(var o=Ff.iterator;o.next()&&!(6>(n=Qt(n=o.value).split(Qt("39e9"))).length);){var r=Qt(n[1]).split(".");if("7da71ca0"!==n[4])break;var l=Qt(ht[Qt("6cae19")]).split(".");if(r[0]>l[0]||r[0]===l[0]&&r[1]>=l[1]){var u=At[Qt("74a900bae4370f8b51")][Qt("6fbb13a1c2311e8a57")].toLowerCase();if(l=u[Qt("73a612b6fb191d")](Qt("3aad1ab6e022098b4dc4")),r=Qt(n[2]),-1<l&&(u=u[Qt("73a612b6fb191d")](r.toLowerCase()+"/"),t.Rc=!(-1<u&&u<l),!t.Rc))break;for(l=i[Qt("76ad18b4f73e")],u=i[Qt("73a612b6fb191d")](Qt("35e7"))+2;u<l;u++)e+=i[u];if(0>(l=e[Qt("73a612b6fb191d")](r))&&r!==Qt("7da71ca0ad381e90")&&(l=e[Qt("73a612b6fb191d")](Qt("76a715b2ef3e149757"))),0>l&&(l=e[Qt("73a612b6fb191d")](Qt("76a715b2ef3e149757"))),0>l&&(l=e[Qt("73a612b6fb191d")](Qt("2bfa41fdb3784bca12"))),0>l&&(l=i[Qt("73a612b6fb191d")](Qt("7baa19a6f76c1988428554"))),t.Rc=!(0<=l&&l<e[Qt("73a612b6fb191d")](Qt("35"))||-1===e[Qt("73a612b6fb191d")](Qt("35"))),!t.Rc||i[Qt("73a612b6fb191d")](Qt("7fb002b6ed25128b4da25b2e"))&&(t.Rc=!(-1<i[Qt("73a612b6fb191d")](r)),!t.Rc)||-1<(u=(l=At[Qt("76a715b2f73f148a")][Qt("69ad17a1e03e")])[Qt("73a612b6fb191d")](Qt("7fb002b6ed25128b4da25b2e")))&&(t.Rc=!(l[Qt("73a612b6fb191d")](r)>u),!t.Rc))break;if("#"===r[0]){l=At.document.createElement("div");for(var c=n[0].replace(/[A-Za-z]/g,"");4>c.length;)c+="9";if(u=c,c=c.substr(c.length-4),n="",n+=["gsh","gsf"][parseInt(c.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(c.substr(0,1),10)%4],l[Qt("79a417a0f0181a8946")]=n,At.document[Qt("78a712aa")]){At.document[Qt("78a712aa")][Qt("7bb806b6ed32388c4a875b")](l),c=At.getComputedStyle(l).getPropertyValue(Qt("78a704b7e62456904c9b12701b6532a8"));var p=At.getComputedStyle(l).getPropertyValue(Qt("75b817b0ea2202"));if(At.document[Qt("78a712aa")][Qt("68ad1bbcf533388c4a875b")](l),c){if(l=At[Qt("77a902b0eb1b1e804a8a")],p==="0."+parseInt(u,10)%100||-1!==c.indexOf(parseInt(r[1]+r[2],16))&&-1!==c.indexOf(parseInt(r[3]+r[4],16))){t.Rc=!1;break}if(l&&l(Qt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,r=0;r<document.styleSheets.length;r++)for(var m in l=document.styleSheets[r].rules||document.styleSheets[r].cssRules)if(n===l[m].selectorText){t.Rc=!1;break t}}}else t.Rc=null,t.Rc=!1}}}else{for(m=i[Qt("76ad18b4f73e")],o=i[Qt("73a612b6fb191d")](Qt("35e7"))+2;o<m;o++)e+=i[o];i=e[Qt("73a612b6fb191d")](Qt("7da71ca0ad381e90")),t.Rc=!(0<=i&&i<e[Qt("73a612b6fb191d")](Qt("35")))}}}return 0<t.Rc&&t!==t.xy}function qr(t){this.j=void 0===t?new B:t,this.o=new B}q.className="Diagram",q.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=At.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof q?e.H:null},q.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},q.useDOM=function(t){Un=!!t&&void 0!==At.document},q.isUsingDOM=function(){return Un},q.None=bn,q.Uniform=qa,q.UniformToFill=Gu,q.CycleAll=Pf,q.CycleNotDirected=Om,q.CycleNotDirectedFast=Em,q.CycleNotUndirected=Dm,q.CycleDestinationTree=jm,q.CycleSourceTree=Bm,q.DocumentScroll=As,q.InfiniteScroll=Tf,q.TreeParentCollapsed=ia,q.AllParentsCollapsed=Lf,q.AnyParentsCollapsed=Nf,Ym.className="DiagramHelper",Ot.Object.defineProperties(qr.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var Oe,Ne,xo,gi,xi,Zn,uh,ch,dh,fh,Xm="DraggingInfo";function Hm(t,e,i){this.node=t,this.info=e,this.Tu=i}function tl(){this.reset()}function Wu(t,e){if("string"==typeof t||At.Element&&t instanceof Element)var i=q.call(this,t)||this;else i=q.call(this)||this,e=t;return Vm(i),e&&i.nm(e),i}function Vm(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=k,t.layout=new ri}function Io(t,e){if("string"==typeof t||At.Element&&t instanceof Element)var i=q.call(this,t)||this;else i=q.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.wb=!0,i.V=null,i.mn=!1,i.nn=!1,i.F=!0,i.u=!0,i.ia=0,i.o=!1,i.ql=null,i.Yx("drawShadows",!1),t=new wt;var o=new It;return o.stroke="magenta",o.strokeWidth=2,o.fill="transparent",o.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(o),i.j=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new R(0,0,0,0),i.pa.h(0,0),i.toolManager.gb("Dragging",new na,i.toolManager.mouseMoveTools),i.click=function(){var r=n.observed;if(null!==r){var l=r.viewportBounds,u=n.lastInput.documentPoint;r.position=new B(u.x-l.width/2,u.y-l.height/2)}},i.Pf=function(){n.Ya(),hh(n)},i.Xd=function(){null!==n.observed&&(n.Ya(),n.N())},i.Ha=function(){1>n.updateDelay?n.N():n.o||(n.o=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.Of=function(){null!==n.observed&&hh(n)},i.autoScale=qa,i.wb=!1,e&&Object.assign(i,e),i}function Gm(t){var e=t.observed;if(null!==e){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,o=e.grid;n&&null!==o&&o.visible&&!isNaN(o.width)&&!isNaN(o.height)&&(Cr(e,o=$.alloc().assign(t.viewportBounds).ed(e.viewportBounds)),$.free(o),Ni(e));var r=t.Bb;r.reset(),1!==t.scale&&r.scale(t.scale),0===t.position.x&&0===t.position.y||r.translate(-t.position.x,-t.position.y),(o=t.ib).scale(t.Nb,t.Nb),o.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),o.yc(),r=(e=e.Wa.s).length;for(var l=0;l<r;l++){var u=e[l],c=t;if(u.visible&&0!==u.opacity){var p=u.diagram.grid.part;if(!i&&u.isTemporary)n&&p.layer===u&&(u=nh(u,o),p.hc(o,c),o.globalAlpha=u);else{for(var m=nh(u,o),x=c.scale,b=$.alloc(),M=u.Pa.s,A=M.length,L=0;L<A;L++){var D=M[L];(n||D!==p)&&u.Nj(o,D,c,null,x,b,!1)}$.free(b),o.globalAlpha=m}}}}}function hh(t){var e=t.box;if(null!==e){var i=t.observed;if(null!==i){t.Fc=!0,i=i.viewportBounds;var n=e.selectionObject,o=Pt.alloc();o.h(i.width,i.height),n.desiredSize=o,Pt.free(o),t=2/t.scale,n instanceof It&&(n.strokeWidth=t),e.location=new B(i.x-t/2,i.y-t/2),e.isSelected=!0}}}function na(){ke.call(this),this.j=null}function ne(){ee(this),this.H=Za,this.Ha=this.u=this.o=!0,this.F=this.V=this.nb=this.ia=!1,this.ij=this.j=null,this.Ib=1.05,this.Jt=NaN,this.tw=null,this.Au=NaN,this.yu=Js,this.hb=!0,this.cg=null,this.ob=200}function oa(t,e,i){if(e.isVisible())return i;if(e instanceof Vt)oa(t,e.adornedPart,i);else if(e instanceof st){var n=e.fromNode;null!==n&&oa(t,n,i),null!==(e=e.toNode)&&oa(t,e,i)}else e instanceof dt&&(null!==(n=e.labeledLink)&&oa(t,n,i),null!==(n=e.pg())&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),oa(t,n,i))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),oa(t,e,i));return i}function If(t){var e=te();for(t=t.iterator;t.next();){var i=t.value;i instanceof st||e.push(i)}t=new rt,i=e.length;for(var n=0;n<i;n++){for(var o=e[n],r=!0,l=0;l<i;l++)if(o.Td(e[l])){r=!1;break}r&&t.add(o)}return $t(e),t}function vt(){ee(this),this.l=30723,this.pb=1,this.bn="",this.Ma=this.Me=null,this.pa=new B(NaN,NaN).freeze(),this.jd=Na,this.Bb=new zt,this.wh=new zt,this.Mb=null,this.Ca=this.Jk=1,this.Lb=0,this.Kg=h,this.uc=new $(NaN,NaN,NaN,NaN).freeze(),this.Jb=new $(NaN,NaN,NaN,NaN).freeze(),this.ec=new $(0,0,NaN,NaN).freeze(),this.ba=this.Yn=this.Zn=null,this.rk=this.Kb=Bt,this.Ag=this.io=0,this.V=this.tb=this.Dh=this.A=this.Ua=null,this.Uc=!1,this.jo=this.Ng=null}function Je(t){null===t.A?t.A=new sa:t.A.oc&&(t.A=t.A.copy())}function Ps(t,e,i){var n=t.ih();if(null!==n)for(var o=t.localBindings.iterator;o.next();){var r=o.value,l=null;if(null!==r.sourceName){if(null===(l=Ly(r,n,t)))continue;r.sp(t,l,i,null)}else if(r.isToModel){var u=e.diagram;null===u||u.skipsModelSourceBindings||r.sp(t,u.model.modelData,i,n)}else{if(null===(u=n.data))continue;var c=e.diagram;null===c||c.skipsModelSourceBindings||r.sp(t,u,i,n)}l===t&&null!==(u=n.ks(r.Ai))&&r.Nv(u,l,i)}}function Wm(t,e,i,n){return!1!==t.pickable&&(n.multiply(t.transform),i?t.Yc(e,n):t.fh(e,n))}function Of(t,e,i,n,o){if(t.Jb.h(e,i,n,o),!t.desiredSize.w()){var r=t.uc,l=(i=t.Kg).top+i.bottom;switch(i=r.width+(e=i.right+i.left),r=r.height+l,n+=e,o+=l,e=lo(t,!0),i===n&&r===o&&(e=Ne),e){case Ne:(i>n||r>o)&&(Sn(t,!0),t.measure(i>n?n:i,r>o?o:r,0,0));break;case Oe:Sn(t,!0),t.measure(n,o,0,0);break;case gi:Sn(t,!0),t.measure(n,r,0,0);break;case xi:Sn(t,!0),t.measure(i,o,0,0)}}}function Uu(t,e){return null!==e&&(Nr(e)&&(e=e.panel),0!=(512&e.l)||(e.type===nt.Auto||e.type===nt.Spot)&&e.Qb()!==t)}function Ef(t,e,i,n){un(t,e,t.areaBackground,!0,!0,i,n),t.areaBackground instanceof Kt&&t.areaBackground.type===Mn?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.ng(t.areaBackground)):e.fillRect(n.x,n.y,n.width,n.height)}function Zu(t,e,i,n){var o=t.kq(),r=i.x,l=i.y,u=i.width+o,c=i.height+o;un(t,e,t.Ma,!0,!1,i,n),t.Ma instanceof Kt&&t.Ma.type===Mn?(e.beginPath(),e.rect(r-o/2,l-o/2,u,c),e.ng(t.Ma)):e.fillRect(r-o/2,l-o/2,u,c)}function Um(t,e,i){for(var n=e.O.s,o=n.length,r=-1,l=0;l<o;l++)if(n[l]===t){r=l;break}if(-1!==(t=r))if(0===t)e.svg.gd?e.svg.gd.after(i):e.svg.Ma?e.svg.Ma.after(i):e.type===nt.Table?null!==(e=0!==(e=e.svg.getElementsByClassName("gojs-ts")).length?e[0]:null)&&e.after(i):e.svg.prepend(i);else{for(;0!==t&&!e.M(t-1).Ed();)t--;0===t?e.svg.prepend(i):null!==(t=e.M(t-1).svg)?t.after(i):e.svg.appendChild(i)}}function Zm(t,e){e=e.dataset,t instanceof vt&&(null!==t.portId&&(e.portId=t.portId),t instanceof nt&&(isNaN(t.itemIndex)||(e.itemIndex=t.itemIndex.toString()),t instanceof wt&&(e.className=io(t),void 0!==t.key&&(e.key=t.key.toString()),t instanceof st&&(null!==t.fromNode&&void 0!==t.fromNode.key&&(e.fromKey=t.fromNode.key.toString()),""!==t.fromPortId&&(e.fromPortId=t.fromPortId),null!==t.toNode&&void 0!==t.toNode.key&&(e.toKey=t.toNode.key.toString()),""!==t.toPortId&&(e.toPortId=t.toPortId)))))}function _m(t,e){null!==(e=e.getAttribute("clip-path"))&&null!==(t=t.svg.getElementById(e.split("#")[1].slice(0,-1)))&&t.remove()}function Df(t){if(null!==t.svg){var e=t.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),i=t.svg.ownerDocument;if(null!==e)for(var n=(e=xt(e)).next();!n.done;n=e.next())null!==(n=i.getElementById(n.value.split("#")[1].slice(0,-1)))&&n.remove();t.svg.remove()}}function un(t,e,i,n,o,r,l){if(null!==i){var u=1,c=1;if("string"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Lr)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var p=t.kq();if(u=r.width,c=r.height,o?(u=l.width,c=l.height):n||(u+=p,c+=p),(r=e instanceof Fs)&&i.xe&&(i.type===hl||i.xk===u&&i.ft===c))var m=i.xe;else{var x=0,b=0,M=0,A=0,L=0,D=0;if(D=L=0,o?(L=l.x,D=l.y):n||(L-=p/2,D-=p/2),x=i.start.x*u+i.start.offsetX,b=i.start.y*c+i.start.offsetY,M=i.end.x*u+i.end.offsetX,A=i.end.y*c+i.end.offsetY,x+=L,M+=L,b+=D,A+=D,i.type===nr)m=e.createLinearGradient(x,b,M,A);else if(i.type===Mn)D=isNaN(i.endRadius)?Math.max(u,c)/2:i.endRadius,isNaN(i.startRadius)?(L=0,D=Math.max(u,c)/2):L=i.startRadius,m=e.createRadialGradient(x,b,L,M,A,D);else if(i.type===hl)try{m=e.createPattern(i.pattern,"repeat")}catch{m=null}if(i.type!==hl&&null!==(o=i.colorStops))for(o=o.iterator;o.next();)m.addColorStop(o.key,o.value);if(r&&(i.xe=m,null!==m&&(i.xk=u,i.ft=c),null===m&&i.type===hl&&-1!==i.xk)){i.xk=-1;var I=t.diagram;null!==I&&-1===i.xk&&si(function(){I.redraw()},600)}}n?e.fillStyle=m:e.strokeStyle=m}}}function _u(t){if(2048&t.l){var e=t.Bb;if(e.reset(),!t.Jb.w()||!t.uc.w())return void il(t,!1);if(e.translate(t.Jb.x-t.uc.x,t.Jb.y-t.uc.y),1!==t.scale||0!==t.angle){var i=t.naturalBounds;t.no(e,i.x,i.y,i.width,i.height)}il(t,!1),$r(t,!0)}4096&t.l&&(null===(e=t.panel)?(t.wh.set(t.Bb),t.Jk=t.scale,$r(t,!1)):null!==e.oe&&((i=t.wh).reset(),e.se()?i.multiply(e.wh):null!==e.panel&&i.multiply(e.panel.wh),i.multiply(t.Bb),t.Jk=t.scale*e.Jk,$r(t,!1)))}function el(t){if(!_n(t)){var e=t.panel;null!==e?e.v():t.Dd()&&null!==(e=t.diagram)&&(e.De.add(t),t instanceof dt&&t.Bd(),e.ac()),Ts(t,!0)}}function lo(t,e){var i=t.stretch,n=t.panel;return null!==n&&n.type===nt.Table?ph(t,n.Gb(t.row),n.Fb(t.column),e):null!==n&&n.type===nt.Auto&&n.Qb()===t?tr(t,Oe,e):i===Zn?null!==n?n.type===nt.Spot&&n.Qb()===t?tr(t,Oe,e):tr(t,(i=n.defaultStretch)===Zn?Ne:i,e):tr(t,Ne,e):tr(t,i,e)}function ph(t,e,i,n){var o=t.stretch;if(o!==Zn)return tr(t,o,n);var r=o=null;switch(e.stretch){case xi:case Oe:r=!0}switch(i.stretch){case gi:case Oe:o=!0}return e=t.panel.defaultStretch,null===o&&(o=e===gi||e===Oe),null===r&&(r=e===xi||e===Oe),tr(t,!0===o&&!0===r?Oe:!0===o?gi:!0===r?xi:Ne,n)}function tr(t,e,i){if(i)return e;if(e===Ne||(i=t.desiredSize).w())return Ne;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===gi)return Ne;if(e===Oe)return xi}else{if(e===xi)return Ne;if(e===Oe)return gi}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===xi)return Ne;if(e===Oe)return gi}else{if(e===gi)return Ne;if(e===Oe)return xi}return e}function Ku(t,e){t.l=e?512|t.l:-513&t.l}function ra(t){return 0!=(1024&t.l)}function jf(t,e){t.l=e?1024|t.l:-1025&t.l}function il(t,e){t.l=e?2048|t.l:-2049&t.l}function $r(t,e){t.l=e?4096|t.l:-4097&t.l}function Pr(t){return 0!=(8192&t.l)}function Sn(t,e){t.l=e?8192|t.l:-8193&t.l}function _n(t){return 0!=(16384&t.l)}function Ts(t,e){t.l=e?16384|t.l:-16385&t.l}function Ls(t){var e=t.part;if(e instanceof dt&&(null!==t.portId||t===e.port)){var i=e.diagram;null===i||i.undoManager.isUndoingRedoing||W0(e,t)}}function Km(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof nt?t instanceof dt?t.Bd():t.qm(t,function(i){Ls(i)}):Ls(t))}function kn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,o=null;if("function"==typeof t)o=t;else if("string"==typeof t){var r=nl.I(t);"function"==typeof r?ue(n=r(i=Nn(arguments)))||it('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):o=At.go[t]}if(null===n&&(null!=o&&o.constructor||it("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new o),o=1,n instanceof q&&1<i.length){r=n;var l=i[1];("string"==typeof l||l instanceof HTMLDivElement)&&(sf(r,l),o++)}for(;o<i.length;o++)void 0===(r=i[o])?it("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+n):Bf(n,r);return n}function Bf(t,e){if("string"==typeof e)if(t instanceof re)t.text=e;else if(t instanceof It)t.figure=e;else if(t instanceof Xi)t.source=e;else if(t instanceof nt)null!==(e=Kn.I(e))&&(t.type=e);else if(t instanceof Kt){var i=Ti(Kt,e);null!==i?t.type=i:it("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof lt?null!==(e=Ti(lt,e))&&(t.type=e):t instanceof _t&&null!==(e=Ti(_t,e))&&(t.type=e);else if(e instanceof vt)t instanceof nt||it("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Re){var n;e.isRow&&"function"==typeof t.getRowDefinition?n=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(n=t.getColumnDefinition(e.index)),n instanceof Re?pc(n,e):it("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof ut)"function"==typeof t.qb&&t.qb(e);else if(e instanceof We)t.type=e;else if(e instanceof Ee)t instanceof vt||t instanceof Re?t.bind(e):it("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Fo)t instanceof vt?t.Kv(e):it("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof oi)t instanceof lt&&t.type===lt.o?t.figures.add(e):it("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof _t)t instanceof oi?t.segments.add(e):it("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof pe)t instanceof q||t instanceof Nt?t.layout=e:it("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Bf(t,e[i]);else if("object"==typeof e&&null!==e)if(t instanceof Kt){for(var o in i=new Ht,e)n=parseFloat(o),isNaN(n)?i[o]=e[o]:t.addColorStop(n,e[o]);sh(t,i)}else if(t instanceof Re){for(i in void 0!==e.row?((null==(o=e.row)||o===1/0||isNaN(o)||0>o)&&it("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+o),t.isRow=!0,t.index=o):void 0!==e.column&&((null==(o=e.column)||o===1/0||isNaN(o)||0>o)&&it("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+o),t.isRow=!1,t.index=o),o=new Ht,e)"row"!==i&&"column"!==i&&(o[i]=e[i]);sh(t,o)}else sh(t,e);else it('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Tr(t,e){nl.add(t,e)}function Ju(t,e,i){void 0===i&&(i=null);var n=t[1];if("function"==typeof i?i(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}qr.className="DraggingInfo",Hm.className="DraggingNodeInfoPair",tl.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Pt(NaN,NaN).freeze(),this.gridSnapCellSpot=w,this.gridSnapOrigin=new B(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},tl.className="DraggingOptions",Ut(Wu,q),Wu.prototype.reset=function(){q.prototype.reset.call(this),Vm(this)},Wu.className="Palette",Ut(Io,q),Io.prototype.computePixelRatio=function(){return 1},Io.prototype.redraw=function(){if(this.o&&1<=this.updateDelay){this.o=!1;var t=this.ta,e=this.ib;if(null!==t&&null!==e){if(Ka(this),null===this.ql){var i=new On(null);i.width=t.width,i.height=t.height,this.ql=i}try{this.ta=this.ql,this.ib=this.ta.context,this.ib.Vc(!0),this.ib.setTransform(1,0,0,1,0,0),this.ib.clearRect(0,0,this.ta.width,this.ta.height),Gm(this)}finally{this.ta=t,this.ib=e}}}q.prototype.redraw.call(this)},Io.prototype.hc=function(){if(null===this.Ka&&it("No div specified"),null===this.ta&&it("No canvas specified"),!(this.ta instanceof wo)&&(mp(this.box),this.Fc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.pi){Ka(this);var e=this.ta;(t=this.ib).Vc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Gm(this):null!==this.ql&&(t.drawImage(this.ql.Oa,0,0),(e=this.Bb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Nb,this.Nb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.yc());for(var i=(e=this.Wa.s).length,n=0;n<i;n++)e[n].hc(t,this);this.Fc=this.vd=!1}}},Io.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Js;var e=t.documentBounds.copy();return e.ed(t.viewportBounds),e},Io.prototype.invalidateViewport=function(){!0!==this.Fc&&(this.Fc=!0,this.ac())},Io.prototype.onViewportBoundsChanged=function(t,e,i,n){this.wb||(this.vd=!0,this.N(),this.Ee=!0,this.Ya(),hh(this),this.gc.scale=i,this.gc.position.x=t.x,this.gc.position.y=t.y,this.gc.bounds.assign(t),this.gc.Pz=n,this.S("ViewportBoundsChanged",this.gc,t))},Ot.Object.defineProperties(Io.prototype,{observed:{get:function(){return this.V},set:function(t){var e=this.V;if(t instanceof Io&&it("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.am("ViewportBoundsChanged",this.Pf),e.am("DocumentBoundsChanged",this.Xd),e.am("InvalidateDraw",this.Ha),e.am("AnimationFinished",this.Of)),this.V=t,null!==t&&(t.Bj("ViewportBoundsChanged",this.Pf),t.Bj("DocumentBoundsChanged",this.Xd),t.Bj("InvalidateDraw",this.Ha),t.Bj("AnimationFinished",this.Of),this.add(this.box)),this.Ya(),null===t){this.ql=null;var i=this.ta,n=this.ib;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Ha(null),hh(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),hh(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ia},set:function(t){0>t&&(t=0),this.ia!==t&&(this.ia=t)}}}),Io.className="Overview",Ut(na,ke),na.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var i=t.lastInput;return!(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new B((i=e.viewportBounds).width/2,i.height/2),e.position=new B((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},na.prototype.doActivate=function(){this.j=null,ke.prototype.doActivate.call(this)},na.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},na.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var i=t.box;if(null!==i){if(null===this.j){var n=t.firstInput.documentPoint;this.j=new B(n.x-(i=i.location).x,n.y-i.y)}e.position=new B((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},na.className="OverviewDraggingTool",ne.prototype.toString=function(){return"CommandHandler"},ne.prototype.Xe=function(t){this.H=t},ne.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=gn?e.meta:e.control,n=e.shift,o=e.alt,r=e.key;!i||"C"!==r&&"Insert"!==r?i&&"X"===r||n&&"Del"===r?this.canCutSelection()&&this.cutSelection():i&&"V"===r||n&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===r||o&&n&&"Backspace"===r?this.canRedo()&&this.redo():i&&"Z"===r||o&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","up"):"Down"===r?t.allowVerticalScroll&&t.scroll(i?"pixel":"line","down"):"Left"===r?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","left"):"Right"===r?t.allowHorizontalScroll&&t.scroll(i?"pixel":"line","right"):"PageUp"===r?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===r?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===r?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===r?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===r?this.canScrollToPart()&&this.scrollToPart():"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===r?this.canResetZoom()&&this.resetZoom():n&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():i&&!n&&"G"===r?this.canGroupSelection()&&this.groupSelection():i&&n&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():"F2"===r||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===r||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},ne.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},ne.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Se&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},ne.prototype.canStopCommand=function(){return!0},ne.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},ne.prototype.canSelectAll=function(){return this.diagram.allowSelect},ne.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new rt,i=t.selection.iterator;i.next();)is(e,i.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(n){return n.canDelete()});t.Is(e,!0),t.S("SelectionDeleted",e)}finally{t.eb("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},ne.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},ne.prototype.copySelection=function(){var t=this.diagram,e=new rt;for(t=t.selection.iterator;t.next();)is(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},ne.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},ne.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},ne.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},ne.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(null===t)Ja=null,lh="";else{i=e.model;var n=!1,o=!1,r=null;try{i.Tl()&&(n=i.Ij,i.Ij=this.copiesParentKey),i.Vj()&&(o=i.Hj,i.Hj=this.copiesGroupKey),r=e.Jj(t,null,!0)}finally{i.Tl()&&(i.Ij=n),i.Vj()&&(i.Hj=o),(i=new ot).addAll(r),Ja=i,lh=e.model.dataFormat}}e.S("ClipboardChanged",i)},ne.prototype.pasteFromClipboard=function(){var t=new rt,e=Ja;if(null===e)return t;var i=this.diagram;if(lh!==i.model.dataFormat)return t;var n=i.model,o=!1,r=!1,l=null;try{n.Tl()&&(o=n.Ij,n.Ij=this.copiesParentKey),n.Vj()&&(r=n.Hj,n.Hj=this.copiesGroupKey),l=i.Jj(e,i,!1)}finally{for(n.Tl()&&(n.Ij=o),n.Vj()&&(n.Hj=r),e=l.iterator;e.next();)n=e.key,(i=e.value).location.w()||(n.location.w()?i.location=n.location:!i.position.w()&&n.position.w()&&(i.position=n.position)),t.add(i)}return t},ne.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(null!==t){var o=e.computePartsBounds(e.selection);o.w()&&gf(e,this.computeEffectiveCollection(e.selection,e.Wm),new B(t.x-o.centerX,t.y-o.centerY),e.Wm,!1)}e.S("ClipboardPasted",i)}finally{e.eb("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},ne.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Ja||0===Ja.count||lh!==t.model.dataFormat)},ne.prototype.undo=function(){this.diagram.undoManager.undo()},ne.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},ne.prototype.redo=function(){this.diagram.undoManager.redo()},ne.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},ne.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===bn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},ne.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===bn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===bn&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},ne.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===bn&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},ne.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},ne.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Cc(),t.redraw();var i=t.position,n=t.scale;Sr(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Au&&!isNaN(this.Jt)&&t.documentBounds.D(this.yu)?(t.scale=this.Jt,t.position=this.tw,this.Au=NaN,this.yu=Js):(this.Jt=n,this.tw=i.copy(),t.zoomToFit(),this.Au=t.scale,this.yu=t.documentBounds.copy()),ef(e)},ne.prototype.canZoomToFit=function(){return this.diagram.allowZoom},ne.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Va(),null===t){try{null!==this.cg&&(this.cg.next()?t=this.cg.value:this.cg=null)}catch{this.cg=null}null===t&&(0<e.highlighteds.count?this.cg=e.highlighteds.iterator:0<e.selection.count&&(this.cg=e.selection.iterator),null!==this.cg&&this.cg.next()&&(t=this.cg.value))}if(null!==t){var i=e.animationManager;Sr(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var o=oa(this,t,[t]);if(1===o.length)e.Ea(),e.es(t.actualBounds),e.eb("Scroll To Part");else{var r=function(){e.Ea();for(var c=o.pop();0<o.length&&c instanceof dt&&c.isTreeExpanded&&(!(c instanceof Nt)||c.isSubGraphExpanded);)c=o.pop();0<o.length?(c instanceof wt&&e.uv(c.actualBounds),c instanceof dt&&!c.isTreeExpanded&&(c.isTreeExpanded=!0),c instanceof Nt&&!c.isSubGraphExpanded&&(c.isSubGraphExpanded=!0)):(c instanceof wt&&e.es(c.actualBounds),e.am("LayoutCompleted",l)),e.eb("Scroll To Part")},l=function(){si(r,(i.isEnabled?i.duration:0)+n)};e.Bj("LayoutCompleted",l),r()}}else{var u=e.position.copy();e.es(t.actualBounds),u.Xa(e.position)&&i.Cc()}}},ne.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof wt)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},ne.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Collapse Tree"),Sr(e.animationManager,"Collapse Tree");var i=new ot;if(null!==t&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof dt&&o.isTreeExpanded&&(o.collapseTree(),i.add(o))}e.S("TreeCollapsed",i)}finally{e.eb("Collapse Tree")}},ne.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof dt&&t.isTreeExpanded))return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof dt&&e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},ne.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Expand Tree"),Sr(e.animationManager,"Expand Tree");var i=new ot;if(null===t||t.isTreeExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof dt&&!o.isTreeExpanded&&(o.expandTree(),i.add(o))}}else t.expandTree(),i.add(t);e.S("TreeExpanded",i)}finally{e.eb("Expand Tree")}},ne.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof dt)||t.isTreeExpanded)return!1;if(0<t.Qo().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof dt&&!e.isTreeExpanded&&0<e.Qo().count)return!0;return!1},ne.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Wj()){var i=this.archetypeGroupData;if(null!==i){var n=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Group");for(var o=new ot,r=t.selection.iterator;r.next();){var l=r.value;l.Zc()&&l.canGroup()&&o.add(l)}for(var u=new ot,c=o.iterator;c.next();){var p=c.value;r=!1;for(var m=o.iterator;m.next();)if(p.Td(m.value)){r=!0;break}r||u.add(p)}if(0<u.count){var x=u.first().containingGroup;if(null!==x)for(;null!==x;){o=!1;for(var b=u.iterator;b.next();)if(!b.value.Td(x)){o=!0;break}if(!o)break;x=x.containingGroup}if(i instanceof Nt)En(i),null!==(n=i.copy())&&t.add(n);else if(e.Zu(i)){var M=e.copyNodeData(i);ue(M)&&(e.xf(M),n=t.ii(M))}if(null!==n){null!==x&&this.isValidMember(x,n)&&(n.containingGroup=x);for(var A=u.iterator;A.next();){var L=A.value;this.isValidMember(n,L)&&(L.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.S("SelectionGrouped",n)}finally{t.eb("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},ne.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Wj()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Zc()&&e.canGroup())return!0}return!1},ne.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof st)return!1;if(null!==t){if(t===e||t.Td(e))return!1;var i=t.memberValidation;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.memberValidation)||i(t,e)},ne.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.model;if(i.Wj())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Ungroup");var n=new ot;if(null!==t)n.add(t);else for(var o=e.selection.iterator;o.next();){var r=o.value;r instanceof Nt&&r.canUngroup()&&n.add(r)}var l=new ot;if(0<n.count){e.clearSelection(!0);for(var u=n.iterator;u.next();){var c=u.value;c.expandSubGraph();var p=c.containingGroup,m=null!==p&&null!==p.data?i.wa(p.data):void 0;l.addAll(c.memberParts);for(var x=l.iterator;x.next();){var b=x.value;if(b.isSelected=!0,!(b instanceof st)){var M=b.data;null!==M?i.mp(M,m):b.containingGroup=p}}e.remove(c)}}e.S("SelectionUngrouped",n,l)}finally{e.eb("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},ne.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Wj())return!1;if(null!==t){if(!(t instanceof Nt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Nt&&e.canUngroup())return!0;return!1},ne.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=If(t).iterator;t.next();){var n=t.value;null!==n.containingGroup&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},ne.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Collapse SubGraph"),Sr(e.animationManager,"Collapse SubGraph");var i=new ot;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Nt&&o.isSubGraphExpanded&&(o.collapseSubGraph(),i.add(o))}e.S("SubGraphCollapsed",i)}finally{e.eb("Collapse SubGraph")}},ne.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof Nt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Nt&&e.isSubGraphExpanded)return!0;return!1},ne.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Ea("Expand SubGraph"),Sr(e.animationManager,"Expand SubGraph");var i=new ot;if(null===t||t.isSubGraphExpanded){if(null===t)for(var n=e.selection.iterator;n.next();){var o=n.value;o instanceof Nt&&!o.isSubGraphExpanded&&(o.expandSubGraph(),i.add(o))}}else t.expandSubGraph(),i.add(t);e.S("SubGraphExpanded",i)}finally{e.eb("Expand SubGraph")}},ne.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof Nt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Nt&&!e.isSubGraphExpanded)return!0;return!1},ne.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(null!==i){if(null===t){t=null;for(var n=e.selection.iterator;n.next();){var o=n.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.Nl(function(r){return r instanceof re&&r.editable})}null!==t&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},ne.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof re))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.Nl(function(i){return i instanceof re&&i.editable})))return!0;return!1},ne.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=e.lastInput,o=null;t instanceof vt?o=t.ga(P):e.viewportBounds.ca(n.documentPoint)||(o=new B((o=e.viewportBounds).x+o.width/2,o.y+o.height/2)),null!==o&&(n.viewPoint=e.op(o),n.documentPoint=o,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,_g(i,!1,t)}},ne.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},ne.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),o=i.currentTool===n;if(void 0===e&&(e=o?n.dragOptions:i.Wm),n=new Tt,null===t)return n;for(var r=t.iterator;r.next();)Mr(i,n,r.value,o,e);if(null!==i.draggedLink&&e.dragsLink)return n;for(r=t.iterator;r.next();)(t=r.value)instanceof st&&((null===(e=t.fromNode)||n.contains(e))&&(null===(e=t.toNode)||n.contains(e))||n.remove(t));return n},Ot.Object.defineProperties(ne.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesTree:{get:function(){return this.ia},set:function(t){this.ia=t}},deletesTree:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesParentKey:{get:function(){return this.V},set:function(t){this.V=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ij},set:function(t){this.ij=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Ib},set:function(t){1<t||it("zoomFactor must be larger than 1.0, not: "+t),this.Ib=t}},isZoomToFitRestoreEnabled:{get:function(){return this.hb},set:function(t){this.hb=t}},scrollToPartPause:{get:function(){return this.ob},set:function(t){this.ob=t}}}),ne.className="CommandHandler",pm=function(){return new ne},vt.prototype.cloneProtected=function(t){t.l=6144|this.l,t.pb=this.pb,t.bn=this.bn,t.Ma=this.Ma,t.pa.assign(this.pa),t.jd=this.jd.J(),t.Mb=null!==this.Mb?this.Mb.copy():null,t.Ca=this.Ca,t.Lb=this.Lb,t.Kg=this.Kg.J(),t.uc.assign(this.uc),t.Jb.assign(this.Jb),t.ec.assign(this.ec),t.Yn=this.Yn,null!==this.ba&&(t.ba=this.ba.copy()),t.Kb=this.Kb.J(),t.rk=this.rk.J(),t.io=this.io,t.Ag=this.Ag,null!==this.Ua&&(t.Ua=this.Ua.copy()),null!==this.A&&(t.A=this.A.oc?this.A:this.A.copy()),null!==this.Dh&&(t.Dh=Nn(this.Dh)),null!==this.tb&&(t.tb=this.tb.copy())},vt.prototype.Ww=function(t){var e=this.Dh;if(Xe(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Dh=e=[];e.push(t)},vt.prototype.Af=function(t){t.Zn=null,t.Ng=null,t.v()},vt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Dh)for(var e=0;e<this.Dh.length;e++){var i=this.Dh[e];t[i]=this[i]}return t},vt.prototype.copy=function(){return this.clone()},(v=vt.prototype).qb=function(t){t.classType===st?0===t.name.indexOf("Orient")?this.segmentOrientation=t:it("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===vt&&(this.stretch=t)},v.toString=function(){return io(this.constructor)+"#"+Ae(this)},v.th=function(){null!==this.A&&(this.A.oc=!0)},v.Xc=function(){if(null===this.ba){var t=new gh;t.Xi=y,t.yj=y,t.Vi=10,t.wj=10,t.Wi=0,t.xj=0,this.ba=t}},v.cb=function(t,e,i,n,o,r,l){var u=this.part;if(null!==u&&(u.fk(t,e,i,n,o,r,l),i===this&&t===ve&&ra(this)&&Ps(this,u,e),r=this.diagram,null===this.animationTriggers||null===r||!r.pi||r.undoManager.isUndoingRedoing||r.animationManager.Dm||null!==(t=this.animationTriggers.get(e))&&r.animationManager.isEnabled&&!r.animationManager.isTicking&&(null===this.jo&&(this.jo=new Tt),l=0===r.undoManager.transactionLevel,t.startCondition===rf?l=!0:t.startCondition===um&&(l=!1),l?(function Nv(t,e){null!==(t=t.tk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,r=new Si),null!==(l=this.jo.get(t))&&l.stop(),this.jo.add(t,r),r.vu=this,r.Ow=t,r.add(this,e,n,o),r.start()):(Sr(r.animationManager,"Trigger"),r.animationManager.defaultAnimation.add(this,e,n,o))),this instanceof nt&&i===u&&0!=(16777216&u.l)&&null!==u.data))for(n=(i=this.O.s).length,o=0;o<n;o++)(u=i[o])instanceof nt&&Is(u,function(c){null!==c.data&&16777216&c.l&&c.La(e)})},v.ks=function(t){return this.bindingId===t?this:null},v.g=function(t,e,i){this.cb(ve,t,this,e,i)},v.Ge=function(t,e,i,n){var o=this.uc;if(o.h(t,e,i,n),1!==this.Ca||0!==this.Lb){null===this.Mb&&(this.Mb=new zt);var r=this.Mb;r.reset(),this.no(r,t,e,i,n),r.pp(o)}},v.ux=function(t,e,i){if(!1===this.pickable)return!1;var n=this.naturalBounds;return e=t.Bf(e),i?yi(t.x,t.y,0,0,0,n.height)<=e||yi(t.x,t.y,0,n.height,n.width,n.height)<=e||yi(t.x,t.y,n.width,n.height,n.width,0)<=e||yi(t.x,t.y,n.width,0,0,0)<=e:t.zd(0,0)<=e&&t.zd(0,n.height)<=e&&t.zd(n.width,0)<=e&&t.zd(n.width,n.height)<=e},v.se=function(){return!0},v.ca=function(t){var e=B.alloc();e.assign(t),this.transform.Ga(e);var i=this.actualBounds;if(!i.w())return B.free(e),!1;var n=this.diagram;if(null!==n&&n.wq){var o=n.Ql("extraTouchThreshold"),r=n.Ql("extraTouchArea"),l=r/2,u=this.naturalBounds,c=1/(n=this.Df()*n.scale);if(u.width*n<o&&u.height*n<o)return t=Fn(i.x-l*c,i.y-l*c,i.width+r*c,i.height+r*c,e.x,e.y),B.free(e),t}return o=!1,(this instanceof Vt||this instanceof It?Fn(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.ca(e))&&(o=!(this.tb&&!this.tb.ca(e))&&(!!(null!==this.areaBackground&&i.ca(e)||null!==this.Ma&&this.ec.ca(t))||this.gh(t))),B.free(e),o},v.gh=function(t){var e=this.naturalBounds;return Fn(0,0,e.width,e.height,t.x,t.y)},v.Re=function(t){if(0===this.angle)return this.actualBounds.Re(t);var e=this.naturalBounds;e=$.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,o=B.allocAt(t.x,t.y);return e.ca(i.Cd(o))&&(o.h(t.x,t.bottom),e.ca(i.Cd(o))&&(o.h(t.right,t.bottom),e.ca(i.Cd(o))&&(o.h(t.right,t.y),e.ca(i.Cd(o))&&(n=!0)))),B.free(o),$.free(e),n},v.fh=function(t,e){if(void 0===e)return t.Re(this.actualBounds);var i=this.naturalBounds,n=!1,o=B.allocAt(0,0);return t.ca(e.Ga(o))&&(o.h(0,i.height),t.ca(e.Ga(o))&&(o.h(i.width,i.height),t.ca(e.Ga(o))&&(o.h(i.width,0),t.ca(e.Ga(o))&&(n=!0)))),B.free(o),n},v.Yc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Yc(this.actualBounds);var i=this.naturalBounds,n=B.allocAt(0,0),o=B.allocAt(0,i.height),r=B.allocAt(i.width,i.height),l=B.allocAt(i.width,0),u=!1;if(t.ca(e.Ga(n))||t.ca(e.Ga(o))||t.ca(e.Ga(r))||t.ca(e.Ga(l)))u=!0;else{i=$.allocAt(0,0,i.width,i.height);var c=B.allocAt(t.x,t.y);i.ca(e.Cd(c))?u=!0:(c.h(t.x,t.bottom),i.ca(e.Cd(c))?u=!0:(c.h(t.right,t.bottom),i.ca(e.Cd(c))?u=!0:(c.h(t.right,t.y),i.ca(e.Cd(c))&&(u=!0)))),B.free(c),$.free(i),!u&&(_.us(t,n,o)||_.us(t,o,r)||_.us(t,r,l)||_.us(t,l,n))&&(u=!0)}return B.free(n),B.free(o),B.free(r),B.free(l),u},v.ga=function(t,e){if(void 0===e&&(e=new B),t instanceof f){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},v.mi=function(t){void 0===t&&(t=new $);var e=this.naturalBounds,i=this.oe,n=B.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),ii(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),ii(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),ii(t,n.x,n.y,0,0),B.free(n),t},v.li=function(){var t=this.oe;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},v.Df=function(){if(!(4096&this.l))return this.Jk;var t=this.Ca;return null!==this.panel?t*this.panel.Df():t},v.qs=function(t,e){return void 0===e&&(e=new B),e.assign(t),this.oe.Cd(e),e},v.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},v.Rj=function(t,e,i,n,o){var r=this.transform,l=1/(r.m11*r.m22-r.m12*r.m21),u=r.m22*l,c=-r.m12*l,p=-r.m21*l,m=r.m11*l,x=l*(r.m21*r.dy-r.m22*r.dx),b=l*(r.m12*r.dx-r.m11*r.dy);return null!==this.areaBackground?_.Ff((r=this.actualBounds).left,r.top,r.right,r.bottom,t,e,i,n,o):(l=t*u+e*p+x,t=t*c+e*m+b,e=i*u+n*p+x,i=i*c+n*m+b,o.h(0,0),i=_.Ff(0,0,(n=this.naturalBounds).width,n.height,l,t,e,i,o),o.transform(r),i)},vt.prototype.measure=function(t,e,i,n){if(!1!==Pr(this)){var o=this.Kg,r=o.right+o.left;o=o.top+o.bottom,t=Math.max(t-r,0),e=Math.max(e-o,0),i=Math.max((i||0)-r,0),n=Math.max((n||0)-o,0),r=this.angle,o=this.desiredSize;var l=this.kq();90===r||270===r?(t=isFinite(o.height)?o.height+l:t,e=isFinite(o.width)?o.width+l:e):(t=isFinite(o.width)?o.width+l:t,e=isFinite(o.height)?o.height+l:e),o=i||0,l=n||0;var u=this instanceof nt;switch(lo(this,!0)){case Ne:l=o=0,u&&(e=t=1/0);break;case Oe:isFinite(t)&&t>i&&(o=t),isFinite(e)&&e>n&&(l=e);break;case gi:isFinite(t)&&t>i&&(o=t),l=0,u&&(e=1/0);break;case xi:isFinite(e)&&e>n&&(l=e),o=0,u&&(t=1/0)}var c=this.minSize;o>(u=this.maxSize).width&&c.width<u.width&&(o=u.width),l>u.height&&c.height<u.height&&(l=u.height),i=Math.max(o,c.width),n=Math.max(l,c.height),u.width<i&&(i=Math.min(c.width,i)),u.height<n&&(n=Math.min(c.height,n)),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(i,t),e=Math.max(n,e),(90===r||270===r)&&(r=t,t=e,e=r,r=i,i=n,n=r),this.uc.ka(),this.Wl(t,e,i,n),this.uc.freeze(),this.uc.w()||it("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.uc.toString()),Sn(this,!1)}},vt.prototype.Wl=function(){},vt.prototype.Dd=function(){return!1},vt.prototype.arrange=function(t,e,i,n,o){this.Tk();var r=$.alloc();r.assign(this.Jb),this.Jb.ka(),!1===_n(this)?this.Jb.h(t,e,i,n):this.eh(t,e,i,n),this.Jb.freeze(),this.tb=void 0===o?null:o,i=!1,void 0!==o?i=!0:(null!==(o=this.panel)&&Nr(o)&&(o=o.panel),null!==o&&(o=o.ec,n=this.measuredBounds,null!==this.areaBackground&&(n=this.Jb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=o.width+.05&&0<=e+.05&&i<=o.height+.05),this instanceof re&&(this.Lq>(t=this.naturalBounds).height||this.Db>t.width))&&(i=!0)),this.l=i?256|this.l:-257&this.l,this.Jb.w()||it("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Jb.toString()),this.Xl(r,this.Jb),Ts(this,!1),$.free(r)},(v=vt.prototype).eh=function(){},v.Xl=function(t,e){var i=this.part;null!==i&&null!==i.diagram&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||xp(i,!0),this.N(),Ea(t,e)||(i.oh(),this.Pn(i)))},v.Pn=function(t){null!==this.portId&&(xp(t,!0),t instanceof dt&&W0(t,this))},v.hc=function(t,e){if(!function Wv(t,e,i){if(!(e instanceof $i))return!1;if(!t.visible||0===t.opacity||t.Dd()&&!t.isVisible())return null!==t.svg&&null!==t.svg.parentNode&&t.svg.remove(),!0;var n=t.panel,o=t.mk(e);if(t.jk(e,i,o))return Zm(t,t.svg),null!==t.svg.parentElement?(t.Dd()&&(e.ti=t.svg),!0):(t.Dd()?(null!==e.ti?e.ti.after(t.svg):e.Mj.prepend(t.svg),e.ti=t.svg):n&&Um(t,n,t.svg),!0);if(t.Dd()&&t.isShadowed){var r=t.shadowOffset;e.Fv(r.x*i.scale*t.scale*i.Nb,r.y*i.scale*t.scale*i.Nb,t.shadowBlur),er(e),e.shadowColor=t.shadowColor}t instanceof re&&(e.font=t.font),e.yd=null;var l=t.transform;r=t instanceof nt;var u=t instanceof nt&&Nr(t);4096&t.l&&_u(t);var c=t.Jb;if(e.rb.ha=[1,0,0,1,0,0],e.o=!1,o&&(e.o=!0,r&&u?(mh(e,1,0,0,1,0,0),t.svg=e.ad):r?(mh(e,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),t.svg=e.ad):mh(e,1,0,0,1,0,0)),o=t.naturalBounds,null!==t.areaBackground){var p=l.copy().Uj();e.rb.ha=[p.m11,p.m12,p.m21,p.m22,p.dx,p.dy],Ef(t,e,o,c),e.rb.ha=[1,0,0,1,0,0],e.yd.gd=e.ad,e.yd.prepend(e.ad)}return r||(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),null!==t.background&&(r?(u&&(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),Zu(t,e,o,c),u&&(e.rb.ha=[1,0,0,1,0,0])):(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Zu(t,e,o,c)),e.yd.Ma=e.ad,e.yd.prepend(e.ad)),l=e.yd,u=!1,(o=t.part)&&i.Gf("drawShadows")&&(u=o.isShadowed),e.clipInsteadOfFill&&(u=!1),t.Dd()&&u&&er(e),u&&!0===t.shadowVisible?er(e):u&&!1===t.shadowVisible&&Oo(e),o=t.panel,u&&Uu(t,o)&&null===t.shadowVisible&&Oo(e),e.Il&&(p=i.computePixelRatio(),p="drop-shadow("+e.shadowOffsetX/p+"px "+e.shadowOffsetY/p+"px "+e.shadowBlur/p/2+"px "+e.shadowColor+")",null!==t.background&&l.Ma.setAttributeNS(null,"filter",p),null!==t.areaBackground&&l.gd.setAttributeNS(null,"filter",p)),u&&(null!==t.Ma||null!==t.areaBackground||Uu(t,o))?(Ku(t,!0),null===t.shadowVisible&&Oo(e)):Ku(t,!1),o=u,t.hh(e,i),r&&e.nh.pop(),e.o&&e.nh.pop(),l=e.Hv.hs,u=r?t.svg:e.yd,p=t.svg,r||null===p||u===p||p.parentNode!==t.panel.svg?(t.svg=u,null!==l&&null===u&&(qu(e),e.nh.pop()),null===u||(t.$o(e,n,c,u),e.Il&&(i=i.computePixelRatio(),t.Ev(u,"drop-shadow("+e.shadowOffsetX/i+"px "+e.shadowOffsetY/i+"px "+e.shadowBlur/i/2+"px "+e.shadowColor+")")),o&&512&t.l&&er(e),t.Dd()&&Oo(e),1!==(i=t.Dd()?t.opacity*e.globalAlpha:t.opacity)&&u.setAttributeNS(null,"opacity",i.toString()),""!==t.filter&&u.setAttributeNS(null,"filter",t.filter),t.Dd()?(e.ti?e.ti.after(u):e.Mj.prepend(u),e.ti=u):null!==n&&Um(t,n,u),null!==l&&l(t,u),Zm(t,u)),!0):(t.svg.replaceWith(u),t.svg=u,null!==u&&t.$o(e,n,c,u),_m(e,p),!0)}(this,t,e)&&this.visible){var i=this.opacity;if(0!==i){var n=1;1!==i&&(t.globalAlpha=(n=t.globalAlpha)*i);var o="";""!==this.filter&&(o=t.filter,t.filter=this.filter);var r=this instanceof nt&&Nr(this),l=this.Jb;if(r){var u=this.Jb,c=this.ec,p=this.areaBackground,m=this.Ma;null===p&&null===m||t.yc(),null!==p&&(un(this,t,p,!0,!0,c,u),p instanceof Kt&&p.type===Mn?(t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.ng(p)):t.fillRect(u.x,u.y,u.width,u.height)),null!==m&&(un(this,t,m,!0,!1,c,u),m instanceof Kt&&m.type===Mn?(t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.ng(m)):t.fillRect(u.x,u.y,u.width,u.height)),this.hh(t,e)}if(!r&&(r||0!==l.width&&0!==l.height&&!isNaN(l.x)&&!isNaN(l.y))){r=this.transform,u=this.panel,4096&this.l&&_u(this),c=!1;var b,x=0;if((p=this.part)&&e.Gf("drawShadows")&&(c=p.isShadowed)&&(m=p.shadowOffset,x=Math.max(m.y,m.x)*e.scale*e.Nb),m=this.Dd(),!(b=e.$i||!m)){var V,M=this.naturalBounds,A=(b=this.wh).m11,L=b.m21,D=b.dx,I=b.m12,z=b.m22,X=b.dy,Z=V=0;b=V*A+Z*L+D;var J=V*I+Z*z+X,ct=(V=M.width+x)*A+(Z=0)*L+D;V=V*I+Z*z+X,Z=Math.min(b,ct);var mt=Math.min(J,V),ft=Math.max(b+0,ct)-Z,at=Math.max(J+0,V)-mt;b=Z,J=mt,ct=(V=M.width+x)*A+(Z=M.height+x)*L+D,V=V*I+Z*z+X,Z=Math.min(b,ct),mt=Math.min(J,V),ft=Math.max(b+ft,ct)-Z,at=Math.max(J+at,V)-mt,b=Z,J=mt,ct=(V=0)*A+(Z=M.height+x)*L+D,V=V*I+Z*z+X,Z=Math.min(b,ct),mt=Math.min(J,V),ft=Math.max(b+ft,ct)-Z,at=Math.max(J+at,V)-mt,J=mt,A=(x=e.viewportBounds).y,b=!((b=Z)>x.width+(M=x.x)||M>ft+b||J>x.height+A||A>at+J)}if(b){if(b=0!=(256&this.l),t.clipInsteadOfFill&&(b=!1),this instanceof re&&(t.font=this.font),b){if(J=u.se()?u.naturalBounds:u.actualBounds,ft=Math.max(l.x,J.x),at=Math.max(l.y,J.y),x=Math.min(l.right,J.right)-ft,M=Math.min(l.bottom,J.bottom)-at,null!==(A=this.tb)&&(ft=A.x,at=A.y,x=A.width,M=A.height),ft>l.width+l.x||l.x>J.width+J.x)return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=o));t.save(),t.beginPath(),t.rect(ft,at,x,M),t.clip()}if(m){if(!p.isVisible())return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=o));c&&(t.Fv((J=p.shadowOffset).x*e.scale*this.scale*e.Nb,J.y*e.scale*this.scale*e.Nb,p.shadowBlur),er(t),t.shadowColor=p.shadowColor)}c&&!0===this.shadowVisible?er(t):c&&!1===this.shadowVisible&&Oo(t),p=this.naturalBounds,null!==this.areaBackground&&(t.yc(),Ef(this,t,p,l)),t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),c&&Uu(this,u)&&null===this.shadowVisible&&Oo(t),null!==this.Ma&&(t.yc(),Zu(this,t,p,l)),c&&(null!==this.Ma||null!==this.areaBackground||Uu(this,u))?(Ku(this,!0),null===this.shadowVisible&&Oo(t)):Ku(this,!1),this.hh(t,e),c&&512&this.l&&er(t),m&&c&&Oo(t),b&&(t.restore(),t.Vc(this instanceof nt)),r.ws()||t.transform(r.m22*(e=1/(r.m11*r.m22-r.m12*r.m21)),-r.m12*e,-r.m21*e,r.m11*e,e*(r.m21*r.dy-r.m22*r.dx),e*(r.m12*r.dx-r.m11*r.dy))}}1!==i&&(t.globalAlpha=n),""!==this.filter&&(t.filter=o)}}},v.Ev=function(){},v.$o=function(t,e,i,n){var o=0!=(256&this.l);if(t.clipInsteadOfFill&&(o=!1),o){var r=e.se()?e.naturalBounds:e.actualBounds;e=Math.max(i.x,r.x),o=Math.max(i.y,r.y);var l=Math.min(i.right,r.right)-e;i=Math.min(i.bottom,r.bottom)-o,null!==(r=this.tb)&&(e=r.x,o=r.y,l=r.width,i=r.height);var u=null;null!==(r=n.getAttribute("clip-path"))&&(u=t.svg.getElementById(r.split("#")[1].slice(0,-1))),null===u?(r="CLIP"+mn++,u=t.Ud("clipPath",{id:r}),e=t.Ud("rect",{x:e,y:o,width:l,height:i}),this instanceof nt&&(o=this.transform.copy().Uj(),e.setAttribute("transform","matrix("+o.m11+", "+o.m12+", "+o.m21+", "+o.m22+", "+o.dx+", "+o.dy+")")),u.appendChild(e),t.svg.appendChild(u),n.setAttributeNS(null,"clip-path","url(#"+r+")")):((t=u.firstElementChild).setAttribute("x",e.toString()),t.setAttribute("y",o.toString()),t.setAttribute("width",l.toString()),t.setAttribute("height",i.toString()))}else n.removeAttributeNS(null,"clip-path"),_m(t,n)},v.hh=function(){},v.mv=function(){this.Uc=!0},v.jk=function(t,e,i){if(this.Uc)return this.mv(),this.Uc=!1;if(null===(e=this.svg))return!1;if(!this.visible)return e.remove(),!1;if("g"!==e.nodeName&&i||"g"===e.nodeName&&!i)return!1;var n=this.transform,o=this instanceof nt&&Nr(this);if(!(this instanceof nt&&o))if(this instanceof Xi){var r=this.bt;t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy],null!==r&&qm(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]),i?e.lastElementChild.setAttributeNS(null,"transform",$m(t)):e.setAttributeNS(null,"transform",$m(t))}else if(!i||this instanceof nt)e.setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");else if(this instanceof It){r=e.getElementsByTagName("path");for(var l=0;l<r.length;l++)r[l].setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")")}else(e.lastElementChild||e).setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");return 1===(r=this.Dd()?this.opacity*t.globalAlpha:this.opacity)?e.removeAttribute("opacity"):e.setAttributeNS(null,"opacity",r.toString()),t.rb.ha=[1,0,0,1,0,0],(null!==this.areaBackground||void 0!==e.gd)&&(r=e.gd,null===this.areaBackground?(e.gd.remove(),e.gd=void 0):(l=n.copy().Uj(),t.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Ef(this,t,this.naturalBounds,this.actualBounds),t.rb.ha=[1,0,0,1,0,0],e.gd?(null!==(l=e.gd.getAttribute("filter"))&&t.ad.setAttribute("filter",l),e.gd.replaceWith(t.ad)):e.prepend(t.ad),e.gd=t.ad),r&&$u(t,r)),(null!==this.background||void 0!==e.Ma)&&(r=e.Ma,null===this.background?($u(t,e.Ma),e.Ma.remove(),e.Ma=void 0):((o||i&&!(this instanceof nt))&&(t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy]),Zu(this,t,this.naturalBounds,this.actualBounds),e.Ma?($u(t,e.Ma),null!==(i=e.Ma.getAttribute("filter"))&&t.ad.setAttribute("filter",i),e.Ma.replaceWith(t.ad)):e.prepend(t.ad),e.Ma=t.ad),r&&$u(t,r)),this.$o(t,this.panel,this.actualBounds,e),!0},v.mk=function(t){if(null!==this.background||null!==this.areaBackground)return!0;var e=0!=(256&this.l);return t.clipInsteadOfFill&&(e=!1),!!e},v.rg=function(t){if(t instanceof nt)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},v.Ed=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ed()},v.If=function(){for(var t=this instanceof nt?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},v.no=function(t,e,i,n,o){if(1!==this.Ca&&t.scale(this.Ca),0!==this.Lb){var r=B.alloc();r.yi(e,i,n,o,P),t.rotate(this.Lb,r.x,r.y),B.free(r)}},v.v=function(t){if(!Pr(this)){void 0===t&&(t=!1),Sn(this,!0),Ts(this,!0);var e=this.panel;null===e||t||e.v()}},v.Tj=function(){Pr(this)||(Sn(this,!0),Ts(this,!0))},v.Tk=function(){!(2048&this.l)&&(il(this,!0),$r(this,!0))},v.Xu=function(){$r(this,!0)},v.N=function(){var t=this.part;null!==t&&t.N()},v.Fj=function(){this.svg=null},v.wi=function(t){this.Me=t,null!==this.svg&&this.svg.remove()},v.Bv=function(){},v.Av=function(t){return this.pa=t,el(this),!0},v.mm=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Tk())},v.kq=function(){return 0},v.bind=function(t,e,i,n){var o=null;return(o="string"==typeof t?new Ee(t,e,i,n):t).xd=this,null!==(t=this.ih())&&p0(t)&&it("Cannot add a Binding to a template that has already been copied: "+o),null===this.localBindings&&(this.localBindings=new ot),this.localBindings.add(o),this},v.set=function(t){return Object.assign(this,t),this},v.Eu=function(t){return Bf(this,t),this},v.apply=function(t){return t(this),this},v.nm=function(t){return sh(this,t),this},v.qz=function(){return this.ih()},v.ih=function(){for(var t=this instanceof nt?this:this.panel;null!==t;){if(null!==t.allBindings)return t;t=t.panel}return null},v.Kv=function(t){return t.xd=this,null===this.animationTriggers&&(this.animationTriggers=new Tt),this.animationTriggers.add(t.propertyName,t),this},Ot.Object.defineProperties(vt.prototype,{bindingId:{get:function(){return null!==this.A?this.A.zp:-1},set:function(t){this.bindingId!==t&&(null===this.A&&(this.A=new sa),this.A.zp=t)}},localBindings:{get:function(){return null!==this.A?this.A.te:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new sa),this.A.te=t)}},srcBindings:{get:function(){return null!==this.A?this.A.wm:null},set:function(t){this.srcBindings!==t&&(null===this.A&&(this.A=new sa),this.A.wm=t)}},shadowVisible:{get:function(){return null!==this.A?this.A.Ci:null},set:function(t){var e=this.shadowVisible;e!==t&&(Je(this),this.A.Ci=t,this.Uc=!0,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.A?this.A.Ib:null},set:function(t){var e=this.enabledChanged;e!==t&&(Je(this),this.A.Ib=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return null!==this.Ua?this.Ua.rr:Oi},set:function(t){var e=this.segmentOrientation;e!==t&&(null===this.Ua&&(this.Ua=new Qr),this.Ua.rr=t,this.v(),this.g("segmentOrientation",e,t),t===Oi&&(this.angle=0))}},segmentIndex:{get:function(){return null!==this.Ua?this.Ua.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(null===this.Ua&&(this.Ua=new Qr),this.Ua.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return null!==this.Ua?this.Ua.o:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(null===this.Ua&&(this.Ua=new Qr),this.Ua.o=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return null!==this.Ua?this.Ua.F:no},set:function(t){var e=this.segmentOffset;e.D(t)||(t=t.J(),null===this.Ua&&(this.Ua=new Qr),this.Ua.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return null!==this.A?this.A.hg:Zn},set:function(t){var e=this.stretch;e!==t&&(Je(this),this.A.hg=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return null!==this.A?this.A.xa:""},set:function(t){var e=this.name;e!==t&&(Je(this),this.A.xa=t,null!==this.part&&(this.part.Rh=null),this.g("name",e,t))}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",vt,"opacity"),this.pb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Ds(e,e.actualBounds)))}},filter:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.Uc=!0,this.g("filter",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Ds(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.l)},set:function(t){var e=0!=(1&this.l);e!==t&&(this.l^=1,this.g("visible",e,t),null!==(e=this.panel)?e.v():this.Dd()&&this.$b(t),this.N(),Km(this))}},pickable:{get:function(){return 0!=(2&this.l)},set:function(t){var e=0!=(2&this.l);e!==t&&(this.l^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.l)},set:function(t){var e=0!=(4&this.l);e!==t&&(this.l^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.l)},set:function(t){var e=0!=(8&this.l);e!==t&&(this.l^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.l)},set:function(t){var e=0!=(16&this.l);e!==t&&(this.l^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.l)},set:function(t){var e=0!=(32&this.l);e!==t&&(this.l^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.l)},set:function(t){var e=0!=(64&this.l);e!==t&&(this.l^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.l)},set:function(t){var e=0!=(128&this.l);e!==t&&(this.l^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return null!==this.A?this.A.gd:null},set:function(t){var e=this.areaBackground;e!==t&&(null!==t&&la(t,"GraphObject.areaBackground"),t instanceof Kt&&t.freeze(),Je(this),this.A.gd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(null!==t&&la(t,"GraphObject.background"),t instanceof Kt&&t.freeze(),this.Ma=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Dd())return this;if(null!==this.Ng)return this.Ng;var t;for(t=this.panel;t;){if(t instanceof wt)return this.Ng=t;t=t.panel}return null}},svg:{get:function(){return this.V},set:function(t){this.V=t}},panel:{get:function(){return this.Me}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,i=t.y,n=this.pa,o=n.x;n=n.y,(o===e||isNaN(o)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Bv():(t=t.copy(),this.Av(t,o,n)&&this.g("position",new B(o,n),t))}},actualBounds:{get:function(){return this.Jb}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&(0>=t&&it("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Ca=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Lb},set:function(t){var e=this.Lb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Lb=t,Km(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.jd},set:function(t){var e=t.width,i=t.height,n=this.jd,o=n.width,r=n.height;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))||(this.jd=t=t.J(),this.v(),this instanceof It&&this.rc(),this.g("desiredSize",n,t),ra(this)&&null!==(t=this.part)&&(Ps(this,t,"width"),Ps(this,t,"height")))}},width:{get:function(){return this.jd.width},set:function(t){var e=this.jd.width;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new Pt(t,this.jd.height).freeze(),this.v(),this instanceof It&&this.rc(),this.g("desiredSize",e,t),ra(this)&&null!==(t=this.part)&&Ps(this,t,"width"))}},height:{get:function(){return this.jd.height},set:function(t){var e=this.jd.height;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new Pt(this.jd.width,t).freeze(),this.v(),this instanceof It&&this.rc(),this.g("desiredSize",e,t),ra(this)&&null!==(t=this.part)&&Ps(this,t,"height"))}},minSize:{get:function(){return null!==this.A?this.A.u:vr},set:function(t){var e=this.minSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),Je(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return null!==this.A?this.A.o:Zl},set:function(t){var e=this.maxSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),Je(this),this.A.o=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.uc}},naturalBounds:{get:function(){return this.ec}},margin:{get:function(){return this.Kg},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.Kg;e.D(t)||(this.Kg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return 2048&this.l&&_u(this),this.Bb}},oe:{get:function(){return 4096&this.l&&_u(this),this.wh}},animationTriggers:{get:function(){return null!==this.A?this.A.hb:null},set:function(t){this.animationTriggers!==t&&(Je(this),this.A.hb=t)}},reshapingBehavior:{get:function(){return null!==this.A?this.A.Pf:Ne},set:function(t){this.reshapingBehavior!==t&&(Je(this),this.A.Pf=t)}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(t.Mc()&&!t.Yb()&&it("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Kb=t=t.J(),el(this),this.g("alignment",e,t))}},column:{get:function(){return this.Ag},set:function(t){t=Math.round(t);var e=this.Ag;e!==t&&(0>t&&le(t,">= 0",vt,"column"),this.Ag=t,this.v(),this.g("column",e,t),null!==this.svg&&this.svg.remove())}},columnSpan:{get:function(){return null!==this.A?this.A.ob:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&le(t,">= 1",vt,"columnSpan"),Je(this),this.A.ob=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.io},set:function(t){t=Math.round(t);var e=this.io;e!==t&&(0>t&&le(t,">= 0",vt,"row"),this.io=t,this.v(),this.g("row",e,t),null!==this.svg&&this.svg.remove())}},rowSpan:{get:function(){return null!==this.A?this.A.Bi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&le(t,">= 1",vt,"rowSpan"),Je(this),this.A.Bi=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return null!==this.A?this.A.Di:null},set:function(t){var e=this.spanAllocation;e!==t&&(Je(this),this.A.Di=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.rk},set:function(t){var e=this.rk;e.D(t)||(this.rk=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Yn},set:function(t){var e=this.Yn;if(e!==t){var i=this.part;null===i||i instanceof dt||it("Cannot set portID on a Link: "+t),null!==e&&null!==i&&kp(i,this),this.Yn=t,null!==t&&null!==i&&(i.Te=!0,_0(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.ba?this.ba.yj:y},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.yj=t,this.g("toSpot",e,t),Ls(this))}},toEndSegmentLength:{get:function(){return null!==this.ba?this.ba.wj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",vt,"toEndSegmentLength"),this.Xc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),Ls(this))}},toShortLength:{get:function(){return null!==this.ba?this.ba.xj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.xj=t,this.g("toShortLength",e,t),Ls(this))}},toLinkable:{get:function(){return null!==this.ba?this.ba.Tr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Xc(),this.ba.Tr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.ba?this.ba.Ur:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&le(t,">= 0",vt,"toMaxLinks"),this.Xc(),this.ba.Ur=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.ba?this.ba.Xi:y},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Xi=t,this.g("fromSpot",e,t),Ls(this))}},fromEndSegmentLength:{get:function(){return null!==this.ba?this.ba.Vi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",vt,"fromEndSegmentLength"),this.Xc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),Ls(this))}},fromShortLength:{get:function(){return null!==this.ba?this.ba.Wi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Wi=t,this.g("fromShortLength",e,t),Ls(this))}},fromLinkable:{get:function(){return null!==this.ba?this.ba.hq:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Xc(),this.ba.hq=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.ba?this.ba.iq:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&le(t,">= 0",vt,"fromMaxLinks"),this.Xc(),this.ba.iq=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return null!==this.A?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(Je(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.A?this.A.zh:null},set:function(t){var e=this.click;e!==t&&(Je(this),this.A.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.A?this.A.Fh:null},set:function(t){var e=this.doubleClick;e!==t&&(Je(this),this.A.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.A?this.A.Bh:null},set:function(t){var e=this.contextClick;e!==t&&(Je(this),this.A.Bh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.A?this.A.Mh:null},set:function(t){var e=this.mouseEnter;e!==t&&(Je(this),this.A.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.A?this.A.Ph:null},set:function(t){var e=this.mouseLeave;e!==t&&(Je(this),this.A.Ph=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.A?this.A.Qh:null},set:function(t){var e=this.mouseOver;e!==t&&(Je(this),this.A.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.A?this.A.Oh:null},set:function(t){var e=this.mouseHover;e!==t&&(Je(this),this.A.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.A?this.A.Nh:null},set:function(t){var e=this.mouseHold;e!==t&&(Je(this),this.A.Nh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.A?this.A.Of:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(Je(this),this.A.Of=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.A?this.A.Xd:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(Je(this),this.A.Xd=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.A?this.A.Lh:null},set:function(t){var e=this.mouseDrop;e!==t&&(Je(this),this.A.Lh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.A?this.A.V:null},set:function(t){var e=this.actionDown;e!==t&&(Je(this),this.A.V=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.A?this.A.ia:null},set:function(t){var e=this.actionMove;e!==t&&(Je(this),this.A.ia=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.A?this.A.Ha:null},set:function(t){var e=this.actionUp;e!==t&&(Je(this),this.A.Ha=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.A?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(Je(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.A?this.A.$h:null},set:function(t){var e=this.toolTip;e!==t&&(Je(this),this.A.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.A?this.A.Ch:null},set:function(t){var e=this.contextMenu;e!==t&&(Je(this),this.A.Ch=t,this.g("contextMenu",e,t))}}}),vt.prototype.trigger=vt.prototype.Kv,vt.prototype.findBindingPanel=vt.prototype.ih,vt.prototype.findTemplateBinder=vt.prototype.qz,vt.prototype.setProperties=vt.prototype.nm,vt.prototype.apply=vt.prototype.apply,vt.prototype.attach=vt.prototype.Eu,vt.prototype.set=vt.prototype.set,vt.prototype.isEnabledObject=vt.prototype.If,vt.prototype.isVisibleObject=vt.prototype.Ed,vt.prototype.isContainedBy=vt.prototype.rg,vt.prototype.getNearestIntersectionPoint=vt.prototype.rs,vt.prototype.getLocalPoint=vt.prototype.qs,vt.prototype.getDocumentScale=vt.prototype.Df,vt.prototype.getDocumentAngle=vt.prototype.li,vt.prototype.getDocumentBounds=vt.prototype.mi,vt.prototype.getDocumentPoint=vt.prototype.ga,vt.prototype.intersectsRect=vt.prototype.Yc,vt.prototype.containedInRect=vt.prototype.fh,vt.prototype.containsRect=vt.prototype.Re,vt.prototype.containsPoint=vt.prototype.ca,vt.prototype.raiseChanged=vt.prototype.g,vt.prototype.raiseChangedEvent=vt.prototype.cb,vt.prototype.addCopyProperty=vt.prototype.Ww;var nl=null;function sa(){this.oc=!1,this.xa="",this.zp=-1,this.nb=this.wm=this.te=null,this.j="",this.hb=this.Di=this.Ib=this.Ch=this.$h=this.F=this.Ha=this.ia=this.V=this.Lh=this.Xd=this.Of=this.Nh=this.Oh=this.Qh=this.Ph=this.Mh=this.Bh=this.Fh=this.zh=null,this.u=vr,this.o=Zl,this.hg=Zn,this.ob=this.Bi=1,this.Pf=Ne,this.Pc=this.Ci=this.gd=null,this.Oc="category"}function Qr(){this.u=-1/0,this.o=0,this.F=no,this.rr=Oi,this.j=this.V="None"}function gh(){this.yj=this.Xi=Bt,this.xj=this.Wi=this.wj=this.Vi=NaN,this.Tr=this.hq=null,this.Ur=this.iq=1/0}function Ns(){this.ha=[1,0,0,1,0,0]}function aa(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.hx=[],this.pattern=null}function wo(t,e,i){this.ownerDocument=t=void 0===e?At.document:e,this.dA="http://www.w3.org/2000/svg",void 0!==t&&(this.Oa=this.Ud("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.hs=null,this.context=new $i(this,i)}function $i(t,e){this.Hv=t,this.svg=t.Oa,this.stack=[],this.nh=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.Il=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Vg=this.Br=this.Ar=0,this.yd=this.ad=null,this.path=[],this.Yl={},this.Ct=!1,this.Yg=null,this.uj=0,this.rb=new Ns,this.j=qu(this),this.Mj=qu(this,"gojs-diagram"),this.Hl=this.ti=null;var i=mn++,n=this.Ud("clipPath",{id:"mainClip"+i});n.appendChild(this.Ud("rect",{x:0,y:0,width:t.width,height:t.height})),this.xw=n,this.svg.appendChild(this.j),this.j.appendChild(this.Mj),this.svg.appendChild(n),this.j.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.fA={},this.isTemporary=!!e,this.filter="",this.ak=null}function Jm(t,e,i,n,o,r,l){void 0===t.Mj?mh(t,e,i,n,o,r,l):t.Mj.setAttribute("transform","matrix("+e+", "+i+", "+n+", "+o+", "+r+", "+l+")")}function qm(t,e,i,n,o,r,l,u,c){n=u/n,o=c/o,0===r&&0===l||t.rb.translate(r,l),1===n&&1===o||t.rb.scale(n,o),0===e&&0===i||t.rb.translate(-e,-i)}function $m(t){return"matrix("+(t=t.rb.ha)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ol(t,e,i,n){"fill"===e?zf(t,i):"stroke"===e&&t0(t,i),null!==n&&(i.transform="matrix("+(t=n.ha)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")")}function zf(t,e){t.fillStyle instanceof aa?e.fill=Rf(t,t.fillStyle,!0):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle}function Qm(t,e,i){i=i?"fill":"stroke",t.fillStyle instanceof aa?e.setAttributeNS(null,"fill",Rf(t,t.fillStyle,!0)):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.setAttributeNS(null,i,"rgb("+t[1]+","+t[2]+","+t[3]+")"),e.setAttributeNS(null,i+"-opacity",t[4])):e.setAttributeNS(null,i,t.fillStyle)}function t0(t,e){if(t.strokeStyle instanceof aa)e.stroke=Rf(t,t.strokeStyle,!1);else if(/^rgba\(/.test(t.strokeStyle)){var i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle);e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]}else e.stroke=t.strokeStyle;e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit,t.Ct&&(e["stroke-dasharray"]=t.Yg.toString(),e["stroke-dashoffset"]=t.uj)}function Rf(t,e,i){var n="";if(null!==(n=null!==t.Hl?t.Hl.getAttribute(i?"fill":"stroke"):null)&&-1!==n.indexOf("GRAD")?(n=n.split("#")[1].slice(0,-1),null!==(i=t.svg.getElementById(n))&&i.remove()):n="GRAD"+mn++,"linear"===e.type)i=t.Ud("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.Ud("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var o=e.hx;e=o.length;for(var r=[],l=0;l<e;l++){var u=o[l],c=u.color;u={offset:u.offset,"stop-color":c},/^rgba\(/.test(c)&&(c=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(c),u["stop-color"]="rgb("+c[1]+","+c[2]+","+c[3]+")",u["stop-opacity"]=c[4]),r.push(u)}for(r.sort(function(p,m){return p.offset>m.offset?1:-1}),o=0;o<e;o++)i.appendChild(t.Ud("stop",r[o]));return t.svg.appendChild(i),"url(#"+n+")"}function mh(t,e,i,n,o,r,l){var u=new Ns;u.ha=[e,i,n,o,r,l],ol(t,"g",e={},u),u=t.addElement("g",e),t.nh.push(u)}function qu(t,e){var i={};return e&&(i.class=e),e=t.addElement("g",i),t.nh.push(e),e}function Oo(t){t.Il=!1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function er(t){t.Il=!0,t.shadowOffsetX=t.Ar,t.shadowOffsetY=t.Br,t.shadowBlur=t.Vg}function $u(t,e){null!==(e=e.getAttribute("fill"))&&1!==(e=e.split("#")).length&&null!==(e=t.svg.getElementById(e[1].slice(0,-1)))&&1===t.svg.innerHTML.match(new RegExp(e.id,"g")).length&&e.remove()}function On(t,e,i,n){this.ownerDocument=e=void 0===e?At.document:e,this.hs=null,(e=e.createElement("canvas")).tabIndex=0,this.Oa=e,this.context=new Fs(e,i,n),e.H=t}function Fs(t,e,i){this.Z=t.getContext?t.getContext("2d",e):null,null===this.Z&&it("Browser does not support HTML Canvas Element"),this.ct=this.et=this.dt="",this.Hm=!1,this.Vg=this.Br=this.Ar=0,this.Il=!1,this.El=new zt,this.isTemporary=!!i}vt.className="GraphObject",nl=new Tt,Tr("Button",function(){function t(i,n){return null!==i.diagram.jc(i.documentPoint,function(o){for(;null!==o.panel&&!o.isActionable;)o=o.panel;return o},function(o){return o===n})}var e=kn(nt,nt.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof nt){var o=i.fb("ButtonBorder");null!==o&&(o.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},kn(It,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new f(0,0,2.76142374915397,2.761423749153969),spot2:new f(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.If()&&n instanceof nt&&(i=n.fb("ButtonBorder"))instanceof It){var o=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=o,o=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=o}},e.mouseLeave=function(i,n){n.If()&&n instanceof nt&&(i=n.fb("ButtonBorder"))instanceof It&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal)},e.actionDown=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed&&0===i.button){var o=n.fb("ButtonBorder");if(o instanceof It){var r=(i=i.diagram).skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=o.fill,o.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=o.stroke,o.stroke=l,i.skipsUndoManager=r}}},e.actionUp=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed&&0===i.button){var o=n.fb("ButtonBorder");if(o instanceof It){var r=i.diagram,l=r.skipsUndoManager;r.skipsUndoManager=!0,t(i,n)?(o.fill=n._buttonFillOver,o.stroke=n._buttonStrokeOver):(o.fill=n._buttonFillNormal,o.stroke=n._buttonStrokeNormal),r.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed){var o=n.fb("ButtonBorder");if(o instanceof It){var r=i.diagram,l=r.skipsUndoManager;r.skipsUndoManager=!0,t(i,n)?(o.fill=n._buttonFillOver,o.stroke=n._buttonStrokeOver):(o.fill=n._buttonFillNormal,o.stroke=n._buttonStrokeNormal),r.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.If()&&n instanceof nt&&null!==n._buttonFillPressed){var o=i.diagram;if(0===o.firstInput.button&&(o.currentTool.standardMouseOver(),t(i,n)&&(i=n.fb("ButtonBorder"))instanceof It)){var r=o.skipsUndoManager;o.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),i.stroke!==(l=n._buttonStrokePressed)&&(i.stroke=l),o.skipsUndoManager=r}}},e}),Tr("TreeExpanderButton",function(){var t=kn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},kn(It,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:xr},new Ee("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).cp()),{visible:!1},new Ee("visible","isTreeLeaf",function(e){return!e}).cp());return t.click=function(e,i){if((i=i.part)instanceof Vt&&(i=i.adornedPart),i instanceof dt){var n=i.diagram;if(null!==n){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),Tr("SubGraphExpanderButton",function(){var t=kn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},kn(It,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:xr},new Ee("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).cp()));return t.click=function(e,i){if((i=i.part)instanceof Vt&&(i=i.adornedPart),i instanceof Nt){var n=i.diagram;if(null!==n){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Tr("ToolTip",function(){return kn(Vt,nt.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new B(0,3),shadowBlur:5},kn(It,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new f(0,0,4,6),spot2:new f(1,1,-4,-4)}))}),Tr("ContextMenu",function(){return kn(Vt,nt.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new B(0,3),shadowBlur:5},new Ee("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),Tr("ContextMenuButton",function(){var t=kn("Button");t.stretch=gi;var e=t.fb("ButtonBorder");return e instanceof It&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new f(0,0,2,3),e.spot2=new f(1,1,-2,-2)),t}),Tr("PanelExpanderButton",function(t){var e=Ju(t,"COLLAPSIBLE"),i=kn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},kn(It,{name:"ButtonIcon",strokeWidth:2},new Ee("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).cp(e)));return(t=i.fb("ButtonBorder"))instanceof It&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,o){var r=o.diagram;if(null!==r&&!r.isReadOnly){var l=o.ih();null===l&&(l=o.part),null!==l&&null!==(o=l.fb(e))&&(n.handled=!0,r.Ea("Collapse/Expand Panel"),o.visible=!o.visible,r.eb("Collapse/Expand Panel"))}},i}),Tr("CheckBoxButton",function(t){var e=Ju(t);return(t=kn("Button",{desiredSize:new Pt(14,14)},kn(It,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Oe,geometryStretch:xo,visible:!1},""!==e?new Ee("visible",e).Lx():[]))).click=function(i,n){if(n instanceof nt){var o=i.diagram;if(!(null===o||o.isReadOnly||""!==e&&o.model.isReadOnly)){i.handled=!0;var r=n.fb("ButtonIcon");o.Ea("checkbox"),r.visible=!r.visible,"function"==typeof n._doClick&&n._doClick(i,n),o.eb("checkbox")}}},t}),Tr("CheckBox",function(t){t=kn("CheckBoxButton",t=Ju(t),{name:"Button",isActionable:!1,margin:new R(0,1,0,0)});var e=kn(nt,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:new R(1),_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),vt.None=Ne=new ut(vt,"None",0),vt.Default=Zn=new ut(vt,"Default",0),vt.Vertical=xi=new ut(vt,"Vertical",4),vt.Horizontal=gi=new ut(vt,"Horizontal",5),vt.Fill=Oe=new ut(vt,"Fill",3),vt.Uniform=xo=new ut(vt,"Uniform",1),vt.UniformToFill=uh=new ut(vt,"UniformToFill",2),vt.FlipVertical=ch=new ut(vt,"FlipVertical",1),vt.FlipHorizontal=dh=new ut(vt,"FlipHorizontal",2),vt.FlipBoth=fh=new ut(vt,"FlipBoth",3),vt.make=kn,vt.getBuilders=function(){var e,t=new Tt;for(e in nl)if(e!==e.toLowerCase()){var i=nl.I(e);"function"==typeof i&&t.add(e,i)}return t.freeze(),t},vt.defineBuilder=Tr,vt.build=function(t,e,i){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];if("function"==typeof(o=nl.I(t))&&(n=o([t].concat(n)))instanceof vt)return e&&n.set(e),n;it('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},vt.takeBuilderArgument=Ju,sa.prototype.copy=function(){var t=new sa;return t.xa=this.xa,t.zp=this.zp,t.te=this.te,t.nb=this.nb,t.j=this.j,t.zh=this.zh,t.Fh=this.Fh,t.Bh=this.Bh,t.Mh=this.Mh,t.Ph=this.Ph,t.Qh=this.Qh,t.Oh=this.Oh,t.Nh=this.Nh,t.Of=this.Of,t.Xd=this.Xd,t.Lh=this.Lh,t.V=this.V,t.ia=this.ia,t.Ha=this.Ha,t.F=this.F,t.$h=this.$h,t.Ch=this.Ch,t.Ib=this.Ib,t.Di=this.Di,t.hb=this.hb,t.u=this.u.J(),t.o=this.o.J(),t.hg=this.hg,t.Bi=this.Bi,t.ob=this.ob,t.Pf=this.Pf,t.gd=this.gd,t.Ci=this.Ci,t.Pc=this.Pc,t.Oc=this.Oc,t},Qr.prototype.copy=function(){var t=new Qr;return t.u=this.u,t.o=this.o,t.F=this.F.J(),t.rr=this.rr,t.V=this.V,t.j=this.j,t},Qr.className="LinkElementSettings",gh.prototype.copy=function(){var t=new gh;return t.Xi=this.Xi.J(),t.yj=this.yj.J(),t.Vi=this.Vi,t.wj=this.wj,t.Wi=this.Wi,t.xj=this.xj,t.hq=this.hq,t.Tr=this.Tr,t.iq=this.iq,t.Ur=this.Ur,t},gh.className="LinkSettings",Ns.prototype.copy=function(){var t=new Ns;return t.ha[0]=this.ha[0],t.ha[1]=this.ha[1],t.ha[2]=this.ha[2],t.ha[3]=this.ha[3],t.ha[4]=this.ha[4],t.ha[5]=this.ha[5],t},Ns.prototype.translate=function(t,e){this.ha[4]+=this.ha[0]*t+this.ha[2]*e,this.ha[5]+=this.ha[1]*t+this.ha[3]*e},Ns.prototype.scale=function(t,e){this.ha[0]*=t,this.ha[1]*=t,this.ha[2]*=e,this.ha[3]*=e},Ns.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0!==t){if(this.translate(e,i),90===t){t=0;var n=1}else 180===t?(t=-1,n=0):270===t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var o=this.ha[1]*t+this.ha[3]*n,r=this.ha[0]*-n+this.ha[2]*t,l=this.ha[1]*-n+this.ha[3]*t;this.ha[0]=this.ha[0]*t+this.ha[2]*n,this.ha[1]=o,this.ha[2]=r,this.ha[3]=l,this.translate(-e,-i)}},Ns.className="STransform",aa.prototype.addColorStop=function(t,e){this.hx.push({offset:t,color:e})},aa.className="SGradient",wo.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.Oa.setAttributeNS(null,"width",i+"px"),this.Oa.setAttributeNS(null,"height",n+"px"),this.Oa.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.xw.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.xw.firstElementChild.setAttributeNS(null,"height",n+"px"),!0)},wo.prototype.Ud=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.dA,t),ue(e))for(var n in e)t.setAttributeNS("href"===n?"http://www.w3.org/1999/xlink":"",n,e[n]);return void 0!==i&&(t.textContent=i),t},wo.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},wo.prototype.focus=function(){this.Oa.focus()},wo.prototype.nx=function(){this.ownerDocument=null},Ot.Object.defineProperties(wo.prototype,{width:{get:function(){return this.Oa.width.baseVal.value},set:function(t){this.Oa.setAttribute("width",t+"px")}},height:{get:function(){return this.Oa.height.baseVal.value},set:function(t){this.Oa.setAttribute("height",t+"px")}},style:{get:function(){return this.Oa.style}}}),wo.className="SVGSurface",(v=$i.prototype).arc=function(t,e,i,n,o,r,l,u){var c=2*Math.PI,p=c-1e-6,m=i*Math.cos(n),x=i*Math.sin(n),b=t+m,M=e+x,A=r?0:1;n=r?n-o:o-n,(1e-6<Math.abs(l-b)||1e-6<Math.abs(u-M))&&this.path.push(["L",b,+M]),0>n&&(n=n%c+c),n>p?(this.path.push(["A",i,i,0,1,A,t-m,e-x]),this.path.push(["A",i,i,0,1,A,b,M])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),A,t+i*Math.cos(o),e+i*Math.sin(o)])},v.beginPath=function(){this.path=[],this.Yl={stroke:"none",fill:"none"}},v.Se=function(t){this.addPath(this.path,this.rb,t||0)},v.bezierCurveTo=function(t,e,i,n,o,r){this.path.push(["C",t,e,i,n,o,r])},v.clearRect=function(){},v.clip=function(){this.Yl.clipPath=!0},v.closePath=function(){this.path.push(["z"])},v.createLinearGradient=function(t,e,i,n){var o=new aa("linear");return o.x1=t,o.y1=e,o.x2=i,o.y2=n,o},v.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.fA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+mn++,o={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Ud("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"})).appendChild(this.Ud($a,o)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},v.createRadialGradient=function(t,e,i,n,o,r){var l=new aa("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=o,l.r2=r,l},v.drawImage=function(t,e,i,n,o,r,l,u,c){var p="";t instanceof HTMLCanvasElement&&(p=t.toDataURL()),t instanceof HTMLImageElement&&(p=t.getAttribute("src"));var m=t instanceof HTMLImageElement?t.naturalWidth:t.width;t=t instanceof HTMLImageElement?t.naturalHeight:t.height,void 0===n&&(r=e,l=i,u=n=m,c=o=t),qm(this,e,i,n=n||0,o=o||0,r||0,l||0,u=u||0,c=c||0),r={x:0,y:0,width:m||n,height:t||o,href:p},_.$(n,u)&&_.$(o,c)?-1===p.toLowerCase().indexOf(".svg")&&-1===p.toLowerCase().indexOf("data:image/svg")&&(r.preserveAspectRatio="xMidYMid slice"):r.preserveAspectRatio="none",(0!==e||0!==i||n!==m||o!==t)&&(r["clip-path"]="path('M "+e+","+i+" L "+(n+=e)+" "+i+" L "+n+" "+(o+=i)+" L "+e+" "+o+" z')"),ol(this,$a,r,this.rb),this.addElement($a,r)},v.fill=function(t){t&&(this.Yl["fill-rule"]="evenodd"),zf(this,this.Yl)},v.ng=function(t,e){this.clipInsteadOfFill?this.clip():this.fill(e)},v.fillRect=function(t,e,i,n){ol(this,"fill",t={x:(t=[t,e,i,n])[0],y:t[1],width:t[2],height:t[3]},this.rb),this.addElement("rect",t)},v.px=function(t,e,i,n){ol(this,"fill",t={x:t,y:e,width:i,height:n},this.rb),zf(this,t),this.svg.prepend(this.Ud("rect",t))},v.fillText=function(t,e,i){t=[t,e,i],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),ol(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.rb),this.addElement("text",e,t[0])},v.lineTo=function(t,e){this.path.push(["L",t,e])},v.moveTo=function(t,e){this.path.push(["M",t,e])},v.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},v.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},v.restore=function(){this.rb=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.ak=t.ak},v.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,ak:this.ak});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.rb.copy())},v.setTransform=function(t,e,i,n,o,r){1===t&&0===e&&0===i&&1===n&&0===o&&0===r||mh(this,t,e,i,n,o,r)},v.scale=function(t,e){this.rb.scale(t,e)},v.translate=function(t,e){this.rb.translate(t,e)},v.transform=function(){},v.yc=function(){},v.stroke=function(){t0(this,this.Yl)},v.ik=function(){this.clipInsteadOfFill||this.stroke()},v.Ud=function(t,e,i){return this.Hv.Ud(t,e,i)},v.addElement=function(t,e,i){return t=this.Ud(t,e,i),null!==this.yd?this.yd.appendChild(t):this.yd=t,this.ad=t},v.addPath=function(t,e,i){for(var n=[],o=0;o<t.length;o++){var r=Nn(t[o]),l=[r.shift()];if("A"===l[0])l.push(r.shift()+","+r.shift(),r.shift(),r.shift()+","+r.shift(),r.shift()+","+r.shift());else for(;r.length;)l.push(r.shift()+","+r.shift());n.push(l.join(" "))}if(n=n.join(" "),(t=this.Yl).clipPath)0<this.nh.length&&this.nh[this.nh.length-1].setAttributeNS(null,"clip-path",'path("'+n+'")');else if(t.d=n,ol(this,"",t,e),null!==this.Hl)if("g"!==(e=this.Hl).nodeName)for(var u in t)"transform"!==u&&e.setAttributeNS(null,u,t[u]);else for(var c in u=e.getElementsByTagName("path"),t)"transform"!==c&&u[i].setAttributeNS(null,c,t[c]);else this.addElement("path",t)},v.Fv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},v.js=function(t,e){this.Ct=!0,this.Yg=t,this.uj=e},v.fs=function(){this.Ct=!1},v.Vc=function(){},v.Xx=function(){},$i.prototype.rotate=function(t){this.rb.rotate(57.2958*t,0,0)},$i.prototype.getImageData=function(){return null},$i.prototype.measureText=function(){return null},$i.prototype.Hs=function(t){null!==t.svg&&t.svg.parentNode===this.Mj&&t.svg.remove()},$i.className="SVGContext",q.prototype.makeSvg=q.prototype.Cs=function(t){this.pj.contains("SVG")||this.bs("SVG",new wo(this,At.document));var e=new wo(this,At.document,!0);void 0===t&&(t=new Ht);var i=this;return Nm(this,function(n,o){return n=null!==(n=Fm(i,n,"SVG",e))?n.svg:null,"function"==typeof o?(o(n),null):n},t)},q.prototype.makeSVG=q.prototype.bv=function(t){return this.Cs(t)},On.prototype.resize=function(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0)},On.prototype.toDataURL=function(t,e){return this.Oa.toDataURL(t,e)},On.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},On.prototype.focus=function(){this.Oa.focus()},On.prototype.nx=function(){this.ownerDocument=this.Oa.H=null},Ot.Object.defineProperties(On.prototype,{width:{get:function(){return this.Oa.width},set:function(t){this.Oa.width=t}},height:{get:function(){return this.Oa.height},set:function(t){this.Oa.height=t}},style:{get:function(){return this.Oa.style}}}),On.className="CanvasSurface",(v=Fs.prototype).Xx=function(t){this.Z.imageSmoothingEnabled=t},v.arc=function(t,e,i,n,o,r){this.Z.arc(t,e,i,n,o,r)},v.beginPath=function(){this.Z.beginPath()},v.Se=function(){},v.bezierCurveTo=function(t,e,i,n,o,r){this.Z.bezierCurveTo(t,e,i,n,o,r)},v.clearRect=function(t,e,i,n){this.yc(),this.Z.clearRect(t,e,i,n)},v.clip=function(){this.Z.clip()},v.closePath=function(){this.Z.closePath()},v.createLinearGradient=function(t,e,i,n){return this.Z.createLinearGradient(t,e,i,n)},v.createPattern=function(t,e){return this.Z.createPattern(t,e)},v.createRadialGradient=function(t,e,i,n,o,r){return this.Z.createRadialGradient(t,e,i,n,o,r)},v.drawImage=function(t,e,i,n,o,r,l,u,c){void 0===n?this.Z.drawImage(t,e,i):this.Z.drawImage(t,e,i,n,o,r,l,u,c)},v.fill=function(t){this.Z.fill(t?"evenodd":"nonzero")},v.fillRect=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},v.px=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},v.fillText=function(t,e,i){this.Z.fillText(t,e,i)},v.getImageData=function(t,e,i,n){return this.Z.getImageData(t,e,i,n)},v.lineTo=function(t,e){this.Z.lineTo(t,e)},v.measureText=function(t){return this.Z.measureText(t)},v.moveTo=function(t,e){this.Z.moveTo(t,e)},v.quadraticCurveTo=function(t,e,i,n){this.Z.quadraticCurveTo(t,e,i,n)},v.rect=function(t,e,i,n){this.Z.rect(t,e,i,n)},v.restore=function(){this.Z.restore()},v.save=function(){this.yc(),this.Z.save()},Fs.prototype.rotate=function(t){this.El.rotate(57.2958*t,0,0)},(v=Fs.prototype).setTransform=function(t,e,i,n,o,r){this.El.setTransform(t,e,i,n,o,r)},v.scale=function(t,e){this.El.scale(t,e)},v.translate=function(t,e){this.El.translate(t,e)},v.stroke=function(){this.Z.stroke()},v.transform=function(t,e,i,n,o,r){if(1!==t||0!==e||0!==i||1!==n||0!==o||0!==r){var l=this.El,u=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*o+l.m21*r+l.dx,l.dy=l.m12*o+l.m22*r+l.dy,l.m11=u,l.m12=t,l.m21=e,l.m22=i}},v.yc=function(){var t=this.El;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},v.ng=function(t,e){if(t instanceof Kt&&t.type===Mn){var i=t.xk;(t=t.ft)>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.Hm?this.clip():this.fill(e),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.Hm?this.clip():this.fill(e)},v.ik=function(){this.Hm||this.stroke()},v.Fv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},v.js=function(t,e){var i=this.Z;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)},v.fs=function(){var t=this.Z;void 0!==t.setLineDash&&(t.setLineDash(Uv),t.lineDashOffset=0)},v.Vc=function(t){t&&(this.dt=""),this.ct=this.et=""},v.Hs=function(){},Ot.Object.defineProperties(Fs.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.ct!==t&&(this.ct=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.dt!==t&&(this.dt=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.et!==t&&(this.et=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},filter:{get:function(){return this.Z.filter},set:function(t){this.Z.filter=""===t?"none":t}},clipInsteadOfFill:{get:function(){return this.Hm},set:function(t){this.Hm=t}}});var Uv=Object.freeze([]);function yh(){this.F=this.o=this.u=this.j=0}function Kt(t,e){ll||(Wf(),ll=!0),ee(this),this._isFrozen=!1,void 0===t?(this.na=Lr,this.wk="black"):"string"==typeof t?(this.na=Lr,this.wk=t):(this.na=t,this.wk="black"),(t=this.na)===nr?(this.Qd=k,this.Kk=j):this.Kk=this.Qd=t===Mn?P:y,this.Gr=0,this.Xp=NaN,this.xe=this.cr=this.we=null,this.ft=this.xk=0,e&&Object.assign(this,e)}function e0(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?ul:i,ir(t),sl(e,i)}function i0(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?ul:i,ir(t),sl(-e,i)}function Yf(t,e,i){ir(t),t=ae.j;var n=ae.u,o=ae.o,r=ae.F;return ir(e),void 0===i&&(i=.5),"rgba("+Math.round((ae.j-t)*i+t)+", "+Math.round((ae.u-n)*i+n)+", "+Math.round((ae.o-o)*i+o)+", "+Math.round((ae.F-r)*i+r)+")"}function rl(t){return!!t&&(t instanceof Kt?t.Hx():(ir(t),128>(299*ae.j+587*ae.u+114*ae.o)/1e3))}function sl(t,e){switch(e){case ul:e=100*Hf(ae.j);var i=100*Hf(ae.u),n=100*Hf(ae.o);return Fi.j=.4124564*e+.3575761*i+.1804375*n,Fi.u=.2126729*e+.7151522*i+.072175*n,Fi.o=.0193339*e+.119192*i+.9503041*n,Fi.F=ae.F,e=Gf(Fi.j/al[0]),i=Gf(Fi.u/al[1]),n=Gf(Fi.o/al[2]),Eo.j=116*i-16,Eo.u=500*(e-i),Eo.o=200*(i-n),Eo.F=Fi.F,Eo.j=Math.min(100,Math.max(0,Eo.j+100*t)),e=(t=(Eo.j+16)/116)-Eo.o/200,Fi.j=al[0]*n0(Eo.u/500+t),Fi.u=al[1]*(Eo.j>Qu*Uf?Math.pow(t,3):Eo.j/Qu),Fi.o=al[2]*n0(e),Fi.F=Eo.F,t=-.969266*Fi.j+1.8760108*Fi.u+.041556*Fi.o,e=.0556434*Fi.j+-.2040259*Fi.u+1.0572252*Fi.o,ae.j=255*Vf((3.2404542*Fi.j+-1.5371385*Fi.u+-.4985314*Fi.o)/100),ae.u=255*Vf(t/100),ae.o=255*Vf(e/100),ae.F=Fi.F,ae.j=Math.round(ae.j),255<ae.j?ae.j=255:0>ae.j&&(ae.j=0),ae.u=Math.round(ae.u),255<ae.u?ae.u=255:0>ae.u&&(ae.u=0),ae.o=Math.round(ae.o),255<ae.o?ae.o=255:0>ae.o&&(ae.o=0),"rgba("+ae.j+", "+ae.u+", "+ae.o+", "+ae.F+")";case o0:return Xf(),cn.o=Math.min(100,Math.max(0,cn.o+100*t)),"hsla("+cn.j+", "+cn.u+"%, "+cn.o+"%, "+cn.F+")";default:it("Unknown color space: "+e)}}function ir(t){ll||(Wf(),ll=!0);var e=Zf;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,ae.j=t[0],ae.u=t[1],ae.o=t[2],ae.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,ae.j=0,ae.u=0,ae.o=0,ae.F=1)}}function Xf(){var t=ae.j/255,e=ae.u/255,i=ae.o/255,n=Math.max(t,e,i),o=Math.min(t,e,i),r=n-o;if(o=(n+o)/2,0===r)var l=t=0;else{switch(n){case t:l=(e-i)/r%6;break;case e:l=(i-t)/r+2;break;case i:l=(t-e)/r+4}0>(l*=60)&&(l+=360),t=r/(1-Math.abs(2*o-1))}cn.j=Math.round(l),cn.u=Math.round(100*t),cn.o=Math.round(100*o),cn.F=ae.F}function Hf(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Vf(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Gf(t){return t>Uf?Math.pow(t,1/3):(Qu*t+16)/116}function n0(t){var e=t*t*t;return e>Uf?e:(116*t-16)/Qu}function la(t,e){"string"!=typeof t&&(t instanceof Kt||it("Value for "+e+" must be a color string or a Brush, not "+t))}function Wf(){Zf=Un?new On(null,void 0,{willReadFrequently:!0}).context:null}Fs.className="CanvasSurfaceContext",yh.className="ColorNumbers",Kt.prototype.copy=function(){var t=new Kt;return t.na=this.na,t.wk=this.wk,t.Qd=this.Qd.J(),t.Kk=this.Kk.J(),t.Gr=this.Gr,t.Xp=this.Xp,null!==this.we&&(t.we=this.we.copy()),t.cr=this.cr,t},(v=Kt.prototype).freeze=function(){return this._isFrozen=!0,null!==this.we&&this.we.freeze(),this},v.ka=function(){return Object.isFrozen(this)&&it("cannot thaw constant: "+this),this._isFrozen=!1,null!==this.we&&this.we.ka(),this},v.qb=function(t){t.classType===Kt&&(this.type=t)},v.toString=function(){var t="Brush(";if(this.type===Lr)t+=this.color;else if(t=this.type===nr?t+"Linear ":this.type===Mn?t+"Radial ":this.type===hl?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},v.addColorStop=function(t,e){return this._isFrozen&&Rt(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&le(t,"0 <= loc <= 1",Kt,"addColorStop:loc"),null===this.we&&(this.we=new Tt),this.we.add(t,e),this.na===Lr&&(this.type=nr),this.xe=null,this},v.Wz=function(t,e){if(this._isFrozen&&Rt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?ul:e,this.type===Lr)ir(this.color),this.color=sl(t,e);else if((this.type===nr||this.type===Mn)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)ir(i.value),this.addColorStop(i.key,sl(t,e));return this},v.Xy=function(t,e){if(this._isFrozen&&Rt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?ul:e,this.type===Lr)ir(this.color),this.color=sl(-t,e);else if((this.type===nr||this.type===Mn)&&null!==this.colorStops)for(var i=this.colorStops.iterator;i.next();)ir(i.value),this.addColorStop(i.key,sl(-t,e));return this},v.Hx=function(){if(this.type===Lr)return rl(this.color);if((this.type===nr||this.type===Mn)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Mn)return rl(t.first().value);if(null!==t.get(.5))return rl(t.get(.5));if(2===t.count)return rl(Yf((t=t.Fa())[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,o=1,r=1;e.next();){var l=e.key,u=Math.abs(.5-e.key);o>r&&u<o?(i=l,o=u):r>=o&&u<r&&(n=l,r=u)}return i>n&&(r=i,i=n,n=r,r=o),o=n-i,rl(Yf(t.get(i),t.get(n),1-r/o))}return!1},Ot.Object.defineProperties(Kt.prototype,{type:{get:function(){return this.na},set:function(t){this._isFrozen&&Rt(this,t),this.na=t,this.start.Mc()&&(t===nr?this.start=k:t===Mn&&(this.start=P)),this.end.Mc()&&(t===nr?this.end=j:t===Mn&&(this.end=P)),this.xe=null}},color:{get:function(){return this.wk},set:function(t){this._isFrozen&&Rt(this,t),this.wk=t,this.xe=null}},start:{get:function(){return this.Qd},set:function(t){this._isFrozen&&Rt(this,t),this.Qd=t.J(),this.xe=null}},end:{get:function(){return this.Kk},set:function(t){this._isFrozen&&Rt(this,t),this.Kk=t.J(),this.xe=null}},startRadius:{get:function(){return this.Gr},set:function(t){this._isFrozen&&Rt(this,t),0>t&&le(t,">= zero",Kt,"startRadius"),this.Gr=t,this.xe=null}},endRadius:{get:function(){return this.Xp},set:function(t){this._isFrozen&&Rt(this,t),0>t&&le(t,">= zero",Kt,"endRadius"),this.Xp=t,this.xe=null}},colorStops:{get:function(){return this.we},set:function(t){this._isFrozen&&Rt(this,t),this.we=t,this.xe=null}},pattern:{get:function(){return this.cr},set:function(t){this._isFrozen&&Rt(this,t),this.cr=t,this.xe=null}}}),Kt.prototype.isDark=Kt.prototype.Hx,Kt.prototype.darkenBy=Kt.prototype.Xy,Kt.prototype.lightenBy=Kt.prototype.Wz,Kt.prototype.addColorStop=Kt.prototype.addColorStop;var Lr,nr,Mn,hl,ul,o0,Uf=216/24389,Qu=24389/27,al=[95.047,100,108.883],Zf=null,ae=new yh,cn=new yh,Fi=new yh,Eo=new yh,ll=!1;function We(){this.xa="Base"}function tc(){this.xa="Base"}function ec(){this.xa="Base"}function ic(){this.xa="Base"}function nc(){this.xa="Base"}function _f(t,e,i){var n=null;if(t instanceof nt&&""!==t.$e&&(n=t.fb(t.$e))===t&&(n=null),null!==n)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.pp(e),n=n.panel}function oc(){this.xa="Base"}function rc(){this.xa="Base",this.name="Table"}function sc(){this.xa="Base"}function ac(){this.xa="Base"}function lc(){this.xa="Base"}function vh(){this.xa="Base"}function hc(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var o=0;o<e;o++)if(t%n[o]===i)return!1;return!0}function uc(){this.xa="Base"}function r0(t,e,i,n){if(!1!==Pr(n)){var o=n.strokeWidth;0===o&&t instanceof Vt&&t.type===nt.Link&&t.adornedObject instanceof It&&(o=t.adornedObject.strokeWidth),o*=n.Ca,t instanceof st&&null!==t.ua?n.Ge((t=t.geometry.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):t instanceof Vt&&null!==t.adornedPart.ua?n.Ge((t=t.adornedPart.ua.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):n.Ge(-o/2,-o/2,e+o,i+o),(o=n.desiredSize).w()||null===n.ua?n.ec.h(0,0,o.width,o.height):n.ec.assign(n.ua.bounds),Sn(n,!1)}}function xh(){this.xa="Base"}function nt(t,e){if(vt.call(this),this.na=null,void 0===t)this.na=nt.Position;else if("string"==typeof t){var i=Kn.I(t);null!==i&&(this.na=i)}else t instanceof We?this.na=t:t&&(this.na=nt.Position,e=t);null===this.na&&it("Panel type not specified or PanelLayout not loaded: "+t),this.l=4194304|this.l|(this.na===nt.Grid?1048576:0),this.O=new ot,this.zb=h,this.Tm=Bt,this.Uf=Zn,this.$g=null,this.$e="",this.jg=new $(NaN,NaN,NaN,NaN),this.U=this.F=null,this.xo=xo,this.jn=xu,this.kn=no,this.ub=this.ra=null,this.zn=NaN,this.ge=this.Hh=null,e&&Object.assign(this,e)}function Kf(t,e){e.lineCap="butt";var i=0<t.rowCount?t.rowDefs:null,n=0<t.columnCount?t.colDefs:null;null!==i&&cc(t,e,!0,i,!0),null!==n&&cc(t,e,!1,n,!0),null!==i&&s0(t,e,!0,i),null!==n&&s0(t,e,!1,n),null!==i&&cc(t,e,!0,i,!1),null!==n&&cc(t,e,!1,n,!1)}function s0(t,e,i,n){for(var o=n.length,r=t.actualBounds,l=t.naturalBounds,u=!0,c=0;c<o;c++){var p=n[c];if(void 0!==p&&0!==p.actual)if(u)u=!1;else{if(i){if(p.position>l.height)continue}else if(p.position>l.width)continue;var m=p.separatorStrokeWidth;isNaN(m)&&(m=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var x=p.separatorStroke;if(null===x&&(x=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),0!==m&&null!==x){un(t,e,x,!1,!1,l,r),x=!1;var b=p.separatorDashArray;null===b&&(b=i?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),null!==b&&(x=!0,e.js(b,0)),e.beginPath(),b=p.position+m,i?b>l.height&&(m-=b-l.height):b>l.width&&(m-=b-l.width),p=p.position+m/2,e.lineWidth=m,m=t.zb,i?(b=l.width-m.right,e.moveTo(m.left,p+=m.top),e.lineTo(b,p)):(b=l.height-m.bottom,e.moveTo(p+=m.left,m.top),e.lineTo(p,b)),e.stroke(),e.Se(),x&&e.fs()}}}}function cc(t,e,i,n,o){for(var r=n.length,l=t.actualBounds,u=t.naturalBounds,c=a0(t,!0),p=a0(t,!1),m=0;m<r;m++){var x=n[m];if(void 0!==x&&null!==x.background&&x.coversSeparators!==o&&0!==x.actual){var b=i?l.height:l.width;if(!(x.position>b)){var M=x.Wc(),A=x.separatorStrokeWidth;isNaN(A)&&(A=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var L=x.separatorStroke;null===L&&(L=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(null===L||x.index===(i?c:p))&&(A=0),M-=A,(A=x.position+A)+(M+=x.actual)>b&&(M=b-A),0>=M||(b=t.zb,un(t,e,x.background,!0,!1,u,l),i?e.fillRect(b.left,A+b.top,l.width-(b.left+b.right),M):e.fillRect(A+b.left,b.top,M,l.height-(b.top+b.bottom)))}}}}function a0(t,e){for(var i=e?t.rowCount:t.columnCount,n=0;n<i;n++){var o=e?t.rowDefs[n]:t.colDefs[n];if(void 0!==o)return o.index}return 0}function Jf(t){return"LineV"===t||"BarV"===t}function or(t){return null!==t.part?t.part.locationObject:null}function Is(t,e){l0(t,t,e)}function l0(t,e,i){i(e);for(var n=(e=e.O.s).length,o=0;o<n;o++){var r=e[o];r instanceof nt&&l0(t,r,i)}}function Zv(t,e){h0(t,t,e)}function h0(t,e,i){if(i(e),e instanceof nt)for(var n=(e=e.O.s).length,o=0;o<n;o++)h0(t,e[o],i)}function u0(t,e,i){if(i(e))return e;if(e instanceof nt)for(var n=(e=e.O.s).length,o=0;o<n;o++){var r=u0(t,e[o],i);if(null!==r)return r}return null}function c0(t){for(var e=(t=t.O.s).length,i=0,n=0;n<e;n++){var o=t[n];o instanceof nt?i=Math.max(i,c0(o)):o instanceof It&&(i=Math.max(i,o.ig/2*o.strokeMiterLimit*o.Df()))}return i}function Nr(t){return t.type===nt.TableRow||t.type===nt.TableColumn}function qf(t,e,i,n){for(var o=t.O.s,r=o.length;r--;){var l=o[r];if(l.visible){var u=l.actualBounds,c=t.naturalBounds;u.x>c.width||u.y>c.height||0>u.x+u.width||0>u.y+u.height||(l instanceof nt&&qf(l,e,i,n),null!==e&&(l=e(l)),null===l||null!==i&&!i(l)||n.add(l))}}}function $f(t){var e=null;return t instanceof It&&((e=t.spot1)===Bt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=w),e}function Qf(t){var e=null;return t instanceof It&&((e=t.spot2)===Bt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=Y),e}function tp(t,e){t.l=e?16777216|t.l:-16777217&t.l}function d0(t,e,i){var n=t.rowDefs;if(!(0>e)){if(n[e]=i instanceof Re?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.v()}}function f0(t,e,i){var n=t.colDefs;if(!(0>e)){if(n[e]=i instanceof Re?i:void 0,!i)for(e=n.length-1;0<=e&&void 0===n[e--];)n.length--;t.v()}}function p0(t){return null!==(t=t.allBindings)&&t._isFrozen}function En(t){var e=t.allBindings;if(null===e)null!==t.data&&it("Template cannot have .data be non-null: "+t),t.allBindings=e=new ot;else if(e._isFrozen)return;var i=new ot;tp(t,!1),t.qm(t,function(p,m){m.th();var x=m.localBindings;if(null!==x)for(jf(m,!1),x=x.iterator;x.next();){var b=x.value;b.mode===Hh&&jf(m,!0);var M=b.sourceName;null!==M&&("/"===M&&tp(p,!0),null!==(M=Ly(b,p,m))&&(i.add(M),null===M.srcBindings&&(M.srcBindings=new ot),M.srcBindings.add(b))),e.add(b)}if(m instanceof nt&&m.type===nt.Table){if(0<m.rowCount)for(x=(p=m.rowDefs).length,b=0;b<x;b++)if(void 0!==(M=p[b])&&null!==M.be)for(var A=M.be.iterator;A.next();){var L=A.value;L.xd=M,L.to=2,L.wl=M.index,e.add(L)}if(0<m.columnCount)for(p=(m=m.colDefs).length,x=0;x<p;x++)if(void 0!==(b=m[x])&&null!==b.be)for(M=b.be.iterator;M.next();)(A=M.value).xd=b,A.to=1,A.wl=b.index,e.add(A)}});for(var n=i.iterator;n.next();){var o=n.value;if(null!==o.srcBindings){jf(o,!0);for(var r=o.srcBindings.iterator;r.next();){var l=r.value;null===o.localBindings&&(o.localBindings=new ot),o.localBindings.add(l)}}o.srcBindings=null}for(n=e.iterator;n.next();)if(null!==(r=(o=n.value).xd)){o.xd=null;var u=o.targetProperty,c=u.indexOf(".");0<c&&r instanceof nt&&(l=u.substring(0,c),u=u.substr(c+1),null!==(c=r.fb(l))?(r=c,o.targetProperty=u):Pi('Warning: unable to find GraphObject named "'+l+'" for Binding: '+o.toString())),r instanceof Re?(l=Ae(r.panel),o.Ai=void 0===l?-1:l,r.panel.bindingId=o.Ai):r instanceof vt?(l=Ae(r),o.Ai=void 0===l?-1:l,r.bindingId=o.Ai):it("Unknown type of binding target: "+r)}e.freeze(),t instanceof wt&&t.Zc()&&t.Va()}function wh(t){if(t.type===nt.Spot||t.type===nt.Auto)return Math.min(t.O.length,1);if(t.type===nt.Link){for(var e=(t=t.O).length,i=0;i<e;i++){var n=t.M(i);if(!(n instanceof It&&n.isPanelMain))break}return i}return t.type===nt.Table&&0<t.O.length&&(t=t.O.M(0)).isPanelMain&&t instanceof nt&&Nr(t)?1:0}function g0(t,e){var i=wh(t);if(null===e||0===e.length)for(;t.O.length>i;)t.qc(t.O.length-1,!1);else if(t.O.length<=i){i=e.length;for(var n=0;n<i;n++)dc(t,e[n],n,!0)}else{n=i;for(var o=0;o<e.length;o++,n++){var r=e[o],l=n<t.O.length?t.O.M(n):null;if(l instanceof nt){if(l.data!==r){var u=ip(t,l.data),c=ip(t,r),p=c!==u;p||(u=np(t,u),p=np(t,c)!==u),p?(t.qc(n,!1),dc(t,r,o,!1)):l.data=r}}else dc(t,r,o,!1)}for(;n<t.O.length;)t.qc(n,!1);t.$g=null,ep(t,i,0),Pr(t)||t.v(),t.graduatedIntervals=null,t.If()||fc(t,t,!1),null!==(e=t.part)&&(e.Rh=null,e.ag=NaN,t.Te&&e instanceof dt&&(e.Te=!0),e.Te&&e instanceof dt&&(e.wc=null))}}function dc(t,e,i,n){if(!(null==e||0>i)){var o=ip(t,e);if(null!==(o=np(t,o))){if(En(o),16777216&(o=o.copy()).l){var r=t.ih();null!==r&&tp(r,!0)}"object"==typeof e&&(null===t.ge&&(t.ge=new Tt),t.ge.add(e,o)),r=i+wh(t),t.Hb(r,o),n&&(o.ub=e,ep(t,r,i),o.ub=null),o.data=e}}}function ep(t,e,i){for(t=t.O;e<t.length;){var n=t.M(e);if(n instanceof nt){var o=e,r=i;n.type===nt.TableRow?n.row=o:n.type===nt.TableColumn&&(n.column=o),n.itemIndex=r}e++,i++}}function ip(t,e){if(null===e)return"";if("function"==typeof(t=t.itemCategoryProperty))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Fe(e,t)}return void 0===t?"":"string"==typeof t?t:void it("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function np(t,e){var i=t.itemTemplateMap,n=null;return null!==i&&(n=i.I(e)),null===n&&(null!==i&&(n=i.I("")),null===n&&(m0||(m0=!0,Pi('No item template Panel found for category "'+e+'" on '+t),Pi("  Using default item template."),t=new nt,(e=new re).bind(new Ee("text","",bi)),t.add(e),y0=t),n=y0)),n}function fc(t,e,i){var n=e.enabledChanged;if(null!==n&&n(e,i),e instanceof nt){n=(e=e.O.s).length;for(var o=0;o<n;o++){var r=e[o];i&&r instanceof nt&&!r.isEnabled||fc(t,r,i)}}}function bo(t,e){e.name=t,Kn.add(t,e)}Kt.className="Brush",Kt.Solid=Lr=new ut(Kt,"Solid",0),Kt.Linear=nr=new ut(Kt,"Linear",1),Kt.Radial=Mn=new ut(Kt,"Radial",2),Kt.Pattern=hl=new ut(Kt,"Pattern",4),Kt.Lab=ul=new ut(Kt,"Lab",5),Kt.HSL=o0=new ut(Kt,"HSL",6),Kt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Kt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;ll||(Wf(),ll=!0);var e=Zf;if(null===e)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i||(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Kt.lighten=function(t){return e0(t)},Kt.lightenBy=e0,Kt.darken=function(t){return i0(t)},Kt.darkenBy=i0,Kt.mix=Yf,Kt.isDark=rl,We.prototype.measure=function(){},We.prototype.Zz=function(t,e,i,n,o){t.measure(e,i,n,o)},We.prototype.arrange=function(){},We.prototype.My=function(t,e,i,n,o,r){t.arrange(e,i,n,o,r)},We.prototype.jA=function(t){t.Tj()},We.prototype.hc=function(){},Ot.Object.defineProperties(We.prototype,{name:{get:function(){return this.xa},set:function(t){this.xa=t}},classType:{get:function(){return nt}}}),We.prototype.remeasureObject=We.prototype.jA,We.prototype.arrangeElement=We.prototype.My,We.prototype.measureElement=We.prototype.Zz,We.className="PanelLayout",Ut(tc,We),tc.prototype.measure=function(t,e,i,n,o,r,l){var u=n.length;t=or(t);for(var c=0;c<u;c++){var p=n[c];if(p.visible||p===t){var m=p.margin,x=m.right+m.left;m=m.top+m.bottom,p.measure(e,i,r,l);var b=p.measuredBounds;x=Math.max(b.width+x,0),m=Math.max(b.height+m,0),b=p.position.x;var M=p.position.y;isFinite(b)||(b=0),isFinite(M)||(M=0),p instanceof It&&p.isGeometryPositioned&&(b-=p=p.strokeWidth/2,M-=p),ii(o,b,M,x,m)}}},tc.prototype.arrange=function(t,e,i){var n=e.length,o=t.padding;for(t=i.x-o.left,i=i.y-o.top,o=0;o<n;o++){var r=e[o],l=r.measuredBounds,u=r.margin,c=r.position.x,p=r.position.y;if(c=isNaN(c)?-t:c-t,p=isNaN(p)?-i:p-i,r instanceof It&&r.isGeometryPositioned){var m=r.strokeWidth/2;c-=m,p-=m}r.visible&&r.arrange(c+u.left,p+u.top,l.width,l.height)}},Ut(ec,We),ec.prototype.measure=function(t,e,i,n,o,r,l){var u=n.length;e=te(),r=or(t);for(var c=0;c<u;c++){var p=n[c];if(p.visible||p===r){var m=lo(p,!1);if(m!==Ne&&m!==gi)e.push(p);else{p.measure(1/0,i,0,l),m=p.margin,p=p.measuredBounds;var x=Math.max(p.height+m.top+m.bottom,0);o.width+=Math.max(p.width+m.right+m.left,0),o.height=Math.max(o.height,x)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):0!==o.height&&(i=Math.min(o.height,t.maxSize.height)),t=0;t<n;t++)((c=e[t]).visible||c===r)&&(u=(m=c.margin).right+m.left,m=m.top+m.bottom,c.measure(1/0,i,0,l),c=c.measuredBounds,m=Math.max(c.height+m,0),o.width+=Math.max(c.width+u,0),o.height=Math.max(o.height,m));$t(e)},ec.prototype.arrange=function(t,e,i){for(var n=e.length,o=t.padding,r=o.top,l=t.isOpposite,u=l?i.width:o.left,c=0;c<n;c++){var p=r,m=e[c];if(m.visible){var x=m.measuredBounds,b=m.margin,M=b.top+b.bottom,A=r+o.bottom,L=x.height,D=lo(m,!1);(isNaN(m.desiredSize.height)&&D===Oe||D===xi)&&(L=Math.max(i.height-M-A,0)),M=L+M+A,(A=m.alignment).Yb()&&(A=t.defaultAlignment),A.sb()||(A=P),l&&(u-=x.width+b.left+b.right),m.arrange(u+A.offsetX+b.left,p+A.offsetY+b.top+(i.height*A.y-M*A.y),x.width,L),l||(u+=x.width+b.left+b.right)}}},Ut(ic,We),ic.prototype.measure=function(t,e,i,n,o,r){var l=n.length;i=te();for(var u=or(t),c=0;c<l;c++){var p=n[c];if(p.visible||p===u){var m=lo(p,!1);if(m!==Ne&&m!==xi)i.push(p);else{var x=p.margin;m=x.right+x.left,x=x.top+x.bottom,p.measure(e,1/0,r,0),p=p.measuredBounds,Gn(o,Math.max(o.width,Math.max(p.width+m,0)),o.height+Math.max(p.height+x,0))}}}if(0!==(n=i.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==o.width&&(e=Math.min(o.width,t.maxSize.width)),t=0;t<n;t++)((c=i[t]).visible||c===u)&&(l=(p=c.margin).right+p.left,p=p.top+p.bottom,c.measure(e,1/0,r,0),c=c.measuredBounds,p=Math.max(c.height+p,0),o.width=Math.max(o.width,Math.max(c.width+l,0)),o.height+=p);$t(i)}},ic.prototype.arrange=function(t,e,i){for(var n=e.length,o=t.padding,r=o.left,l=t.isOpposite,u=l?i.height:o.top,c=0;c<n;c++){var p=r,m=e[c];if(m.visible){var x=m.measuredBounds,b=m.margin,M=b.left+b.right,A=r+o.right,L=x.width,D=lo(m,!1);(isNaN(m.desiredSize.width)&&D===Oe||D===gi)&&(L=Math.max(i.width-M-A,0)),M=L+M+A,(A=m.alignment).Yb()&&(A=t.defaultAlignment),A.sb()||(A=P),l&&(u-=x.height+b.bottom+b.top),m.arrange(p+A.offsetX+b.left+(i.width*A.x-M*A.x),u+A.offsetY+b.top,L,x.height),l||(u+=x.height+b.bottom+b.top)}}},Ut(nc,We),nc.prototype.measure=function(t,e,i,n,o,r,l){var u=n.length,c=t.Qb(),p=c.margin,m=p.right+p.left,x=p.top+p.bottom;c.measure(e,i,r,l);var b=c.measuredBounds;r=b.width,l=b.height;var M=Math.max(r+m,0),A=Math.max(l+x,0),L=t.isClipping,D=$.allocAt(-p.left,-p.top,M,A),I=$.allocAt(0,0,r,l);_f(c,I,!0),r=I.width,l=I.height;for(var z=!0,X=or(t),V=0;V<u;V++){var Z=n[V];b=e;var J=i;if(Z!==c&&(Z.visible||Z===X)){var ct=(p=Z.margin).left,mt=p.top;switch(M=p.right+p.left,A=p.top+p.bottom,p=lo(Z,!1)){case Oe:b=r,J=l,mt=ct=A=M=0;break;case gi:b=r,ct=M=0;break;case xi:J=l,mt=A=0}Z.measure(b,J,0,0),b=Z.measuredBounds,M=Math.max(b.width+M,0),A=Math.max(b.height+A,0),(p=Z.alignment).Yb()&&(p=t.defaultAlignment),p.sb()||(p=P);var ft=Z.alignmentFocus;if(ft.Yb()&&(ft=P),J=null,Z instanceof nt&&""!==Z.$e&&(J=Z.fb(Z.$e))===Z&&(J=null),ct=I.x-ct,mt=I.y-mt,null!==J){for(Z.arrange(0,0,b.width,b.height),b=B.allocAt((b=J.actualBounds).x+(ft.x*b.width-ft.offsetX),b.y+(ft.y*b.height-ft.offsetY)),J=J.panel;J!==Z;)J.transform.Ga(b),J=J.panel;ct+=p.x*r+p.offsetX-b.x,mt+=p.y*l+p.offsetY-b.y,B.free(b)}else ct+=p.x*r+p.offsetX-(ft.x*b.width+ft.offsetX),mt+=p.y*l+p.offsetY-(ft.y*b.height+ft.offsetY);z?(z=!1,o.h(ct,mt,M,A)):ii(o,ct,mt,M,A)}}switch(z?o.assign(D):L?o.Vu(I.x,I.y,I.width,I.height):ii(o,D.x,D.y,D.width,D.height),$.free(D),$.free(I),(p=c.stretch)===Zn&&(p=lo(c,!1)),p){case Ne:return;case Oe:if(!isFinite(e)&&!isFinite(i))return;break;case gi:if(!isFinite(e))return;break;case xi:if(!isFinite(i))return}for(r=(b=c.measuredBounds).width,l=b.height,M=Math.max(r+m,0),A=Math.max(l+x,0),_f(c,I=$.allocAt(-(p=c.margin).left,-p.top,M,A),!0),r=I.width,l=I.height,e=0;e<u;e++)(i=n[e])===c||!i.visible&&i!==X||(M=(p=i.margin).right+p.left,A=p.top+p.bottom,b=i.measuredBounds,M=Math.max(b.width+M,0),A=Math.max(b.height+A,0),(m=i.alignment).Yb()&&(m=t.defaultAlignment),m.sb()||(m=P),(i=i.alignmentFocus).Yb()&&(i=P),z?(z=!1,o.h(m.x*r+m.offsetX-(i.x*b.width+i.offsetX)-p.left,m.y*l+m.offsetY-(i.y*b.height+i.offsetY)-p.top,M,A)):ii(o,m.x*r+m.offsetX-(i.x*b.width+i.offsetX)-p.left,m.y*l+m.offsetY-(i.y*b.height+i.offsetY)-p.top,M,A));z?o.assign(D):L?o.Vu(I.x,I.y,I.width,I.height):ii(o,D.x,D.y,D.width,D.height),$.free(I)},nc.prototype.arrange=function(t,e,i){var n=e.length,o=t.Qb(),r=o.measuredBounds,l=r.width,u=r.height,c=t.padding,p=(r=c.left)-i.x,m=(c=c.top)-i.y;for(o.arrange(p,m,l,u),_f(o,l=$.allocAt(0,0,l,u),!1),u=0;u<n;u++){var x=e[u];if(x!==o){var b=(p=x.measuredBounds).width,M=p.height;(m=x.alignment).Yb()&&(m=t.defaultAlignment),m.sb()||(m=P);var A=x.alignmentFocus;if(A.Yb()&&(A=P),p=null,x instanceof nt&&""!==x.$e&&(p=x.fb(x.$e))===x&&(p=null),null!==p){var L=p.actualBounds;for(A=B.allocAt(L.x+(A.x*L.width-A.offsetX),L.y+(A.y*L.height-A.offsetY)),p=p.panel;p!==x;)p.transform.Ga(A),p=p.panel;p=m.x*l.width+m.offsetX-A.x,m=m.y*l.height+m.offsetY-A.y,B.free(A)}else p=m.x*l.width+m.offsetX-(A.x*b+A.offsetX),m=m.y*l.height+m.offsetY-(A.y*M+A.offsetY);p+=l.x-i.x,m+=l.y-i.y,x.visible&&x.arrange(r+p,c+m,b,M)}}$.free(l)},Ut(oc,We),oc.prototype.measure=function(t,e,i,n,o,r,l){var u=n.length,c=t.Qb(),p=c.margin,m=e,x=i,b=p.right+p.left,M=p.top+p.bottom;c.measure(e,i,r,l),p=c.measuredBounds;var A=0,L=null;c instanceof It&&(A=(L=c).strokeWidth*L.scale);var D=Math.max(p.width+b,0);p=Math.max(p.height+M,0);var I=$f(c),z=I.x*D+I.offsetX;I=I.y*p+I.offsetY;var X=Qf(c),V=X.x*D+X.offsetX;for(X=X.y*p+X.offsetY,isFinite(e)&&(m=Math.max(Math.abs(z-V)-A,0)),isFinite(i)&&(x=Math.max(Math.abs(I-X)-A,0)),(A=Pt.alloc()).h(0,0),t=or(t),X=0;X<u;X++)(I=n[X])===c||!I.visible&&I!==t||(D=(p=I.margin).right+p.left,z=p.top+p.bottom,I.measure(m,x,0,0),p=I.measuredBounds,D=Math.max(p.width+D,0),p=Math.max(p.height+z,0),A.h(Math.max(D,A.width),Math.max(p,A.height)));if(1===u)o.width=D,o.height=p,Pt.free(A);else{switch(I=$f(c),u=n=0,(X=Qf(c)).x!==I.x&&X.y!==I.y&&(n=A.width/Math.abs(X.x-I.x),u=A.height/Math.abs(X.y-I.y)),Pt.free(A),A=0,null!==L&&(A=L.strokeWidth*L.scale,rp(L)===xo&&(n=u=Math.max(n,u))),n+=Math.abs(I.offsetX)+Math.abs(X.offsetX)+A,u+=Math.abs(I.offsetY)+Math.abs(X.offsetY)+A,(L=c.stretch)===Zn&&(L=lo(c,!1)),L){case Ne:l=r=0;break;case Oe:isFinite(e)&&(n=e),isFinite(i)&&(u=i);break;case gi:isFinite(e)&&(n=e),l=0;break;case xi:r=0,isFinite(i)&&(u=i)}c.Tj(),c.measure(n,u,r,l),o.width=c.measuredBounds.width+b,o.height=c.measuredBounds.height+M}},oc.prototype.arrange=function(t,e){var i=e.length,n=t.Qb(),o=n.measuredBounds,r=$.alloc();r.h(0,0,1,1);var l=n.margin,u=l.left,c=t.padding,p=c.left;n.arrange(p+u,(c=c.top)+(l=l.top),o.width,o.height);var m=$f(n),x=Qf(n),b=m.y*o.height+m.offsetY,M=x.x*o.width+x.offsetX;for(x=x.y*o.height+x.offsetY,r.x=m.x*o.width+m.offsetX,r.y=b,ii(r,M,x,0,0),r.x+=u+p,r.y+=l+c,o=0;o<i;o++)(u=e[o])!==n&&(p=u.measuredBounds,l=u.margin,c=Math.max(p.width+l.right+l.left,0),m=Math.max(p.height+l.top+l.bottom,0),(b=u.alignment).Yb()&&(b=t.defaultAlignment),b.sb()||(b=P),c=r.width*b.x+b.offsetX-c*b.x+l.left+r.x,l=r.height*b.y+b.offsetY-m*b.y+l.top+r.y,u.visible&&(Fn(r.x,r.y,r.width,r.height,c,l,p.width,p.height)?u.arrange(c,l,p.width,p.height):u.arrange(c,l,p.width,p.height,new $(r.x,r.y,r.width,r.height))));$.free(r)},Ut(rc,We),rc.prototype.measure=function(t,e,i,n,o){for(var r=n.length,l=te(),u=te(),c=0;c<r;c++){var p=n[c],m=p instanceof nt?p:null;if(null!==m&&Nr(m)&&p.visible){u.push(m);for(var x=m.O.s,b=x.length,M=0;M<b;M++){var A=x[M];m.type===nt.TableRow?A.row=p.row:m.type===nt.TableColumn&&(A.column=p.column),l.push(A)}}else l.push(p)}0===(r=l.length)&&(t.Gb(0),t.Fb(0));for(var L=[],D=0;D<r;D++){var I=l[D];I.visible&&(Sn(I,!0),Ts(I,!0),L[I.row]||(L[I.row]=[]),L[I.row][I.column]||(L[I.row][I.column]=[]),L[I.row][I.column].push(I))}$t(l);var z=te(),X=te(),V=te(),Z={count:0},J={count:0},ct=e,mt=i,ft=t.rowDefs,at=t.colDefs,Q=null;r=ft.length;for(var Lt=0;Lt<r;Lt++)void 0!==(Q=ft[Lt])&&(Q.actual=0);r=at.length;for(var Ct=0;Ct<r;Ct++)void 0!==(Q=at[Ct])&&(Q.actual=0);for(var Wt=L.length,oe=0,qe=0;qe<Wt;qe++)L[qe]&&(oe=Math.max(oe,L[qe].length));var ei=Math.min(t.topIndex,Wt-1),Mi=Math.min(t.leftIndex,oe-1),$e=0;Wt=L.length;for(var Yr=or(t),De=0;De<Wt;De++)if(L[De]){oe=L[De].length;var po=t.Gb(De);po.actual=0;for(var Ci=po.pc=0;Ci<oe;Ci++)if(L[De][Ci]){var Xr=t.Fb(Ci);void 0===z[Ci]&&(Xr.actual=0,Xr.pc=0,z[Ci]=!0);for(var pn=L[De][Ci],Bn=pn.length,en=0;en<Bn;en++){var Zi=pn[en];if(Zi.visible||Zi===Yr){var Hr=1<Zi.rowSpan,go=1<Zi.columnSpan;(Hr||go)&&(De<ei||Ci<Mi||X.push(Zi));var fs=Zi.margin,nn=fs.right+fs.left,Td=fs.top+fs.bottom,Ai=ph(Zi,po,Xr,!1),Ys=Zi.desiredSize,ko=!isNaN(Ys.height),on=!isNaN(Ys.width)&&ko;if(Ai===Ne||on||De<ei||Ci<Mi||(go||void 0!==Z[Ci]||Ai!==Oe&&Ai!==gi||(Z[Ci]=-1,Z.count++),Hr||void 0!==J[De]||Ai!==Oe&&Ai!==xi||(J[De]=-1,J.count++),Hr&&go||V.push(Zi)),Zi.measure(1/0,1/0,0,0),!(De<ei||Ci<Mi)){var ps=Zi.measuredBounds,rn=Math.max(ps.width+nn,0),wa=Math.max(ps.height+Td,0);if(1===Zi.rowSpan&&(Ai===Ne||Ai===gi)){var Ol=(Q=t.Gb(De)).Wc();($e=Math.max(wa-Q.actual,0))+Ol>mt&&($e=Math.max(mt-Ol,0));var wg=0===Q.oa;Q.pc=Q.pc+$e,Q.actual=Q.oa+$e,mt=Math.max(mt-($e+(wg?Ol:0)),0)}if(1===Zi.columnSpan&&(Ai===Ne||Ai===xi)){var ou=(Q=t.Fb(Ci)).Wc();($e=Math.max(rn-Q.actual,0))+ou>ct&&($e=Math.max(ct-ou,0));var Ld=0===Q.oa;Q.pc=Q.pc+$e,Q.actual=Q.oa+$e,ct=Math.max(ct-($e+(Ld?ou:0)),0)}(Hr||go)&&Zi.Tj()}}}}}$t(z);var ar=0,Mo=0;r=t.columnCount;for(var El=0;El<r;El++){var gs=at[El];void 0!==gs&&(ar+=isNaN(gs.Hc)?gs.pc:gs.Hc,0!==gs.pc&&(ar+=gs.Wc()))}r=t.rowCount;for(var Dl=0;Dl<r;Dl++){var eo=ft[Dl];void 0!==eo&&(Mo+=isNaN(eo.Hc)?eo.pc:eo.Hc,0!==eo.pc&&(Mo+=eo.Wc()))}ct=Math.max(e-ar,0);var Vr=mt=Math.max(i-Mo,0),_i=ct;r=V.length;for(var jl=0;jl<r;jl++){var Co=V[jl],lr=t.Gb(Co.row),ru=t.Fb(Co.column),Vo=Co.measuredBounds,hr=Co.margin,su=hr.top+hr.bottom;Z[Co.column]=0===ru.pc&&void 0!==Z[Co.column]?Math.max(Vo.width+(hr.right+hr.left),Z[Co.column]):null,J[Co.row]=0===lr.pc&&void 0!==J[Co.row]?Math.max(Vo.height+su,J[Co.row]):null}var ms,Bl=0,Go=0;for(ms in J)"count"!==ms&&(Bl+=J[ms]);for(ms in Z)"count"!==ms&&(Go+=Z[ms]);for(var ui=Pt.alloc(),Xs=0;Xs<r;Xs++){var Ie=V[Xs];if(Ie.visible||Ie===Yr){var zi=t.Gb(Ie.row),sn=t.Fb(Ie.column),Gr=0;isFinite(sn.width)?Gr=sn.width:(Gr=isFinite(ct)&&null!==Z[Ie.column]?0===Go?sn.actual+ct:Z[Ie.column]/Go*_i:null!==Z[Ie.column]?ct:sn.actual||ct,Gr=Math.max(0,Gr-sn.Wc()));var Wo=0;switch(isFinite(zi.height)?Wo=zi.height:(Wo=isFinite(mt)&&null!==J[Ie.row]?0===Bl?zi.actual+mt:J[Ie.row]/Bl*Vr:null!==J[Ie.row]?mt:zi.actual||mt,Wo=Math.max(0,Wo-zi.Wc())),ui.h(Math.max(sn.minimum,Math.min(Gr,sn.maximum)),Math.max(zi.minimum,Math.min(Wo,zi.maximum))),Ai=ph(Ie,zi,sn,!1)){case gi:ui.height=Math.max(ui.height,zi.actual+mt);break;case xi:ui.width=Math.max(ui.width,sn.actual+ct)}var zl=Ie.margin,Nd=zl.right+zl.left,au=zl.top+zl.bottom;Ie.Tj(),Ie.measure(ui.width,ui.height,sn.minimum,zi.minimum);var Rl=Ie.measuredBounds,ba=Math.max(Rl.width+Nd,0),Ki=Math.max(Rl.height+au,0);isFinite(ct)&&(ba=Math.min(ba,ui.width)),isFinite(mt)&&(Ki=Math.min(Ki,ui.height));var ys=0;ys=zi.actual,zi.actual=Math.max(zi.actual,Ki),zi.pc=Math.max(zi.pc,Ki),$e=zi.actual-ys,mt=Math.max(mt-$e,0),null===J[Ie.row]&&(Vr=Math.max(Vr-$e,0)),ys=sn.actual,sn.actual=Math.max(sn.actual,ba),sn.pc=Math.max(sn.pc,ba),$e=sn.actual-ys,ct=Math.max(ct-$e,0),null===Z[Ie.column]&&(_i=Math.max(_i-$e,0))}}$t(V);var ur=Pt.alloc(),Ln=te(),cr=te();if(0!==(r=X.length))for(var Uo=0;Uo<Wt;Uo++)if(L[Uo]){oe=L[Uo].length;var lu=t.Gb(Uo);Ln[Uo]=lu.actual;for(var Hs=0;Hs<oe;Hs++)if(L[Uo][Hs]){var Fd=t.Fb(Hs);cr[Hs]=Fd.actual}}for(var Yl=0;Yl<r;Yl++){var Me=X[Yl];if(Me.visible||Me===Yr){var zn=t.Gb(Me.row),Zo=t.Fb(Me.column);switch(ui.h(Math.max(Zo.minimum,Math.min(e,Zo.maximum)),Math.max(zn.minimum,Math.min(i,zn.maximum))),Ai=ph(Me,zn,Zo,!1)){case Oe:0!==cr[Zo.index]&&(ui.width=Math.min(ui.width,cr[Zo.index])),0!==Ln[zn.index]&&(ui.height=Math.min(ui.height,Ln[zn.index]));break;case gi:0!==cr[Zo.index]&&(ui.width=Math.min(ui.width,cr[Zo.index]));break;case xi:0!==Ln[zn.index]&&(ui.height=Math.min(ui.height,Ln[zn.index]))}isFinite(Zo.width)&&(ui.width=Zo.width),isFinite(zn.height)&&(ui.height=zn.height),ur.h(0,0);for(var an=Zo.minimum,Xl=zn.minimum,Rn=1;Rn<Me.rowSpan&&!(Me.row+Rn>=t.rowCount);Rn++)Q=t.Gb(Me.row+Rn),$e=0,$e=Ai===Oe||Ai===xi?Math.max(Q.minimum,0===Ln[Me.row+Rn]?Q.maximum:Math.min(Ln[Me.row+Rn],Q.maximum)):Math.max(Q.minimum,isNaN(Q.Hc)?Q.maximum:Math.min(Q.Hc,Q.maximum)),ur.height+=$e,Xl+=Q.minimum;for(var Vs=1;Vs<Me.columnSpan&&!(Me.column+Vs>=t.columnCount);Vs++)Q=t.Fb(Me.column+Vs),$e=0,$e=Ai===Oe||Ai===gi?Math.max(Q.minimum,0===cr[Me.column+Vs]?Q.maximum:Math.min(cr[Me.column+Vs],Q.maximum)):Math.max(Q.minimum,isNaN(Q.Hc)?Q.maximum:Math.min(Q.Hc,Q.maximum)),ur.width+=$e,an+=Q.minimum;ui.width+=ur.width,ui.height+=ur.height;var _o=Me.margin,hu=_o.right+_o.left,uu=_o.top+_o.bottom;Me.measure(ui.width,ui.height,an,Xl);for(var Ko=Me.measuredBounds,Gs=Math.max(Ko.width+hu,0),Ws=Math.max(Ko.height+uu,0),Hl=0,vs=0;vs<Me.rowSpan&&!(Me.row+vs>=t.rowCount);vs++)Hl+=(Q=t.Gb(Me.row+vs)).total||0;if(Hl<Ws){var Yn=Ws-Hl,Wr=Ws-Hl;if(null!==Me.spanAllocation)for(var Us=Me.spanAllocation,dr=0;dr<Me.rowSpan&&!(0>=Yn)&&!(Me.row+dr>=t.rowCount);dr++){var Ur=(Q=t.Gb(Me.row+dr)).oa||0,fr=Us(Me,Q,Wr);Q.actual=Math.min(Q.maximum,Ur+fr),Q.oa!==Ur&&(Yn-=Q.oa-Ur)}for(;0<Yn;){var Sa=Q.oa||0;if(isNaN(Q.height)&&Q.maximum>Sa&&(Q.actual=Math.min(Q.maximum,Sa+Yn),Q.oa!==Sa&&(Yn-=Q.oa-Sa)),0===Q.index)break;Q=t.Gb(Q.index-1)}}for(var Zr=0,Vl=0;Vl<Me.columnSpan&&!(Me.column+Vl>=t.columnCount);Vl++)Zr+=(Q=t.Fb(Me.column+Vl)).total||0;if(Zr<Gs){var ka=Gs-Zr,pr=Gs-Zr;if(null!==Me.spanAllocation)for(var cu=Me.spanAllocation,Gl=0;Gl<Me.columnSpan&&!(0>=ka)&&!(Me.column+Gl>=t.columnCount);Gl++){var du=(Q=t.Fb(Me.column+Gl)).oa||0,Tx=cu(Me,Q,pr);Q.actual=Math.min(Q.maximum,du+Tx),Q.oa!==du&&(ka-=Q.oa-du)}for(;0<ka;){var Id=Q.oa||0;if(isNaN(Q.width)&&Q.maximum>Id&&(Q.actual=Math.min(Q.maximum,Id+ka),Q.oa!==Id&&(ka-=Q.oa-Id)),0===Q.index)break;Q=t.Fb(Q.index-1)}}}}$t(X),Pt.free(ur),Pt.free(ui),void 0!==Ln&&$t(Ln),void 0!==cr&&$t(cr);var Ma=0,Ca=0,Od=t.desiredSize,vv=t.maxSize;Ai=lo(t,!0);var fu=Mo=ar=0,pu=0;r=t.columnCount;for(var Ed=0;Ed<r;Ed++)void 0!==at[Ed]&&(Q=t.Fb(Ed),isFinite(Q.width)?(fu+=Q.width,fu+=Q.Wc()):gc(Q)===bh?(fu+=Q.oa,fu+=Q.Wc()):0!==Q.oa&&(ar+=Q.oa,ar+=Q.Wc()));Ma=isFinite(Od.width)?Math.min(Od.width,vv.width):Ai!==Ne&&isFinite(e)?e:ar,Ma=Math.max(Ma,t.minSize.width),Ma=Math.max(Ma-fu,0);for(var Lx=0===ar?1:Math.max(Ma/ar,1),Dd=0;Dd<r;Dd++)void 0!==at[Dd]&&(Q=t.Fb(Dd),isFinite(Q.width)||gc(Q)===bh||(Q.actual=Q.oa*Lx),Q.position=o.width,0!==Q.oa&&(o.width+=Q.oa,o.width+=Q.Wc()));r=t.rowCount;for(var jd=0;jd<r;jd++)void 0!==ft[jd]&&(Q=t.Gb(jd),isFinite(Q.height)?(pu+=Q.height,pu+=Q.Wc()):gc(Q)===bh?(pu+=Q.oa,pu+=Q.Wc()):0!==Q.oa&&(Mo+=Q.oa,Mo+=Q.Wc()));Ca=isFinite(Od.height)?Math.min(Od.height,vv.height):Ai!==Ne&&isFinite(i)?i:Mo,Ca=Math.max(Ca,t.minSize.height),Ca=Math.max(Ca-pu,0);for(var Nx=0===Mo?1:Math.max(Ca/Mo,1),Bd=0;Bd<r;Bd++)void 0!==ft[Bd]&&(Q=t.Gb(Bd),isFinite(Q.height)||gc(Q)===bh||(Q.actual=Q.oa*Nx),Q.position=o.height,0!==Q.oa&&(o.height+=Q.oa,o.height+=Q.Wc()));r=u.length;for(var bg=0;bg<r;bg++){var gu=u[bg],Sg=0,kg=0;gu.type===nt.TableRow?(Sg=o.width,kg=(Q=t.Gb(gu.row)).actual):(Sg=(Q=t.Fb(gu.column)).actual,kg=o.height),gu.measuredBounds.h(0,0,Sg,kg),Sn(gu,!1)}$t(u),t.inRowsCols=L},rc.prototype.arrange=function(t,e,i){var n=e.length,o=t.padding,r=o.left;o=o.top;var l=t.inRowsCols;if(null!==l){for(var u,c,p=l.length,m=0,x=0;x<p;x++)l[x]&&(m=Math.max(m,l[x].length));c=t.rowDefs,u=t.colDefs;var b=x=0,M=Math.min(t.topIndex,p-1);if(0<c.length){for(;M!==p&&(void 0===c[M]||0===c[M].oa);)M++;x=-c[M=Math.max(Math.min(M,p-1),0)].position}var A=Math.min(t.leftIndex,m-1);if(0<u.length){for(;A!==m&&(void 0===u[A]||0===u[A].oa);)A++;b=-u[A=Math.max(Math.min(A,m-1),0)].position}for(var L=0,D=0;L!==p&&void 0===c[L];)L++;for(;D!==p&&void 0===u[D];)D++;m=t.part,t.Gb(L),t.Fb(D);for(var I=0;I<e.length;I++){var z=e[I];if(z instanceof nt&&z.visible&&Nr(z)){if(z.type===nt.TableRow){u=t.Gb(z.row);var X=t.Fb(D)}else u=t.Gb(L),X=t.Fb(z.column);c=u.position+x+o,0!==u.oa&&(c+=u.Io(Math.max(L,M))),u=X.position+b+r,0!==X.oa&&(u+=X.Io(Math.max(D,A))),X=z.measuredBounds,z.Tk(),z.actualBounds.ka();var V=z.actualBounds,Z=$.allocAt(V.x,V.y,V.width,V.height);V.x=z.type===nt.TableRow?r:u,V.y=z.type===nt.TableColumn?o:c,V.width=X.width,V.height=X.height,z.actualBounds.freeze(),Ts(z,!1),Ea(Z,V)||null===m||(m.oh(),z.Pn(m)),$.free(Z)}}for(I=Pt.alloc(),z=0;z<p;z++)if(l[z])for(m=l[z].length,c=(X=t.Gb(z)).position+x+o,0!==X.oa&&(c+=X.Io(Math.max(L,M))),V=0;V<m;V++)if(l[z][V]){u=(Z=t.Fb(V)).position+b+r,0!==Z.oa&&(u+=Z.Io(Math.max(D,A)));for(var J=l[z][V],ct=J.length,mt=0;mt<ct;mt++){var ft=J[mt],at=ft.measuredBounds;I.h(0,0);for(var Q=1;Q<ft.rowSpan&&!(z+Q>=t.rowCount);Q++){var Lt=t.Gb(z+Q);0!==Lt.oa&&(I.height+=Lt.total)}for(Q=1;Q<ft.columnSpan&&!(V+Q>=t.columnCount);Q++)0!==(Lt=t.Fb(V+Q)).oa&&(I.width+=Lt.total);var Ct=Z.oa+I.width,Wt=X.oa+I.height;Q=u,Lt=c;var oe=Ct,qe=Wt,ei=u,Mi=c,$e=Ct,Yr=Wt;u+Ct>i.width&&($e=Math.max(i.width-u,0)),c+Wt>i.height&&(Yr=Math.max(i.height-c,0));var De=ft.alignment;if(De.Yb()){(De=t.defaultAlignment).sb()||(De=P);var po=De.x,Ci=De.y,Xr=De.offsetX;De=De.offsetY;var pn=Z.alignment,Bn=X.alignment;pn.sb()&&(po=pn.x,Xr=pn.offsetX),Bn.sb()&&(Ci=Bn.y,De=Bn.offsetY)}else po=De.x,Ci=De.y,Xr=De.offsetX,De=De.offsetY;(isNaN(po)||isNaN(Ci))&&(Ci=po=.5,De=Xr=0),pn=at.width,Bn=at.height;var en=ft.margin,Zi=en.left+en.right,Hr=en.top+en.bottom,go=ph(ft,X,Z,!1);!isNaN(ft.desiredSize.width)||go!==Oe&&go!==gi||(pn=Math.max(Ct-Zi,0)),!isNaN(ft.desiredSize.height)||go!==Oe&&go!==xi||(Bn=Math.max(Wt-Hr,0)),Ct=ft.maxSize,Wt=ft.minSize,pn=Math.min(Ct.width,pn),Bn=Math.min(Ct.height,Bn),pn=Math.max(Wt.width,pn),Bn=Math.max(Wt.height,Bn),Q+=oe*po-(pn+Zi)*po+Xr+en.left,Lt+=qe*Ci-(Ct=Bn+Hr)*Ci+De+en.top,ft.visible&&(Fn(ei,Mi,$e,Yr,Q,Lt,at.width,at.height)?ft.arrange(Q,Lt,pn,Bn):ft.arrange(Q,Lt,pn,Bn,new $(ei,Mi,$e,Yr)))}}for(Pt.free(I),t=0;t<n;t++)null!==(r=(i=e[t])instanceof nt?i:null)&&Nr(r)&&(r=i.actualBounds,i.naturalBounds.ka(),i.naturalBounds.h(0,0,r.width,r.height),i.naturalBounds.freeze())}},Ut(sc,We),sc.prototype.measure=function(){},sc.prototype.arrange=function(){},Ut(ac,We),ac.prototype.measure=function(){},ac.prototype.arrange=function(){},Ut(lc,We),lc.prototype.measure=function(t,e,i,n,o,r,l){1<n.length&&it("Viewbox Panel cannot contain more than one GraphObject."),(n=n[0]).Ca=1,n.Tj(),n.measure(1/0,1/0,r,l);var u=n.measuredBounds,c=n.margin,p=c.right+c.left;if(c=c.top+c.bottom,isFinite(e)||isFinite(i)){var m=n.scale,x=u.width;u=u.height;var b=Math.max(e-p,0),M=Math.max(i-c,0),A=1;t.viewboxStretch===xo?0!==x&&0!==u&&(A=Math.min(b/x,M/u)):0!==x&&0!==u&&(A=Math.max(b/x,M/u)),0===A&&(A=1e-4),n.Ca*=A,m!==n.scale&&(Sn(n,!0),n.measure(1/0,1/0,r,l))}u=n.measuredBounds,o.width=isFinite(e)?e:Math.max(u.width+p,0),o.height=isFinite(i)?i:Math.max(u.height+c,0)},lc.prototype.arrange=function(t,e,i){var n=(e=e[0]).measuredBounds,o=e.margin,r=Math.max(n.width+(o.right+o.left),0);o=Math.max(n.height+(o.top+o.bottom),0);var l=e.alignment;l.Yb()&&(l=t.defaultAlignment),l.sb()||(l=P),e.arrange(i.width*l.x-r*l.x+l.offsetX,i.height*l.y-o*l.y+l.offsetY,n.width,n.height)},Ut(vh,We),vh.prototype.measure=function(){},vh.prototype.arrange=function(){},vh.prototype.hc=function(t,e,i){0>=(i=t.Df()*i.scale)&&(i=1);var n=t.gridCellSize,o=n.width;n=n.height;var r=t.naturalBounds,l=t.actualBounds,u=r.width,c=r.height,p=Math.ceil(u/o),m=Math.ceil(c/n),x=t.gridOrigin,b=x.x;x=x.y,e.save(),e.beginPath(),e.rect(0,0,u,c),e.clip(),e.Se();for(var M=[],A=t.O.s,L=A.length,D=0;D<L;D++){var I=A[D],z=[];if(M.push(z),I.visible){var X=I.interval;if(!(0>X)){I=Jf(I.figure);for(var V=0;V<L;V++)if(V!==D){var Z=A[V];Z.visible&&Jf(Z.figure)===I&&(Z=Z.interval)>X&&z.push(Z)}}}}for(L=(A=t.O.s).length,D=0;D<L;D++){var J=A[D];if(J.visible&&(z=J.interval||1,!(2>o*(I=Math.abs(z))*i))){if(X=J.segmentIndex,(!isFinite(X)||isNaN(X))&&(X=0),0>X&&(X=I-Math.min(-X,I)),X=Math.round(X%I),V=1,1!==(I=J.opacity)){if(0===I)continue;e.globalAlpha=(V=e.globalAlpha)*I}Z=M[D];var ct=!1,mt=J.strokeDashArray;if(null!==mt&&(ct=!0,e.js(mt,J.strokeDashOffset)),"LineV"===J.figure&&null!==J.stroke&&0<J.strokeWidth){for(e.lineWidth=J.strokeWidth,un(t,e,J.stroke,!1,!1,r,l),e.beginPath(),mt=J=Math.floor((b-o)/o);mt<=J+p;mt++){var ft=mt*o+b;0<=ft&&ft<=u&&hc(mt,z,X,Z)&&(e.moveTo(ft,0),e.lineTo(ft,c))}e.stroke(),e.Se()}else if("LineH"===J.figure&&null!==J.stroke&&0<J.strokeWidth){for(e.lineWidth=J.strokeWidth,un(t,e,J.stroke,!1,!1,r,l),e.beginPath(),mt=J=Math.floor((x-n)/n);mt<=J+m;mt++)0<=(ft=mt*n+x)&&ft<=c&&hc(mt,z,X,Z)&&(e.moveTo(0,ft),e.lineTo(u,ft));e.stroke(),e.Se()}else if("BarV"===J.figure&&null!==J.fill)for(un(t,e,J.fill,!0,!1,r,l),J=J.width,isNaN(J)&&(J=o),ft=mt=Math.floor((b-o)/o);ft<=mt+p;ft++){var at=ft*o+b;0<=at+J&&at<=u&&hc(ft,z,X,Z)&&e.fillRect(at,0,J,c)}else if("BarH"===J.figure&&null!==J.fill)for(un(t,e,J.fill,!0,!1,r,l),J=J.height,isNaN(J)&&(J=n),ft=mt=Math.floor((x-n)/n);ft<=mt+m;ft++)0<=(at=ft*n+x)+J&&at<=c&&hc(ft,z,X,Z)&&e.fillRect(0,at,u,J);ct&&e.fs(),1!==I&&(e.globalAlpha=V)}}e.restore(),e.Vc(!1)},Ut(uc,We),uc.prototype.measure=function(t,e,i,n,o){var r=n.length;if(t instanceof Vt||t instanceof st){var l=null,u=null;if(t instanceof st&&(l=t),t instanceof Vt&&(l=(u=t).adornedPart,null===t.j&&(t.j=[])),l instanceof st){var c=l;if(0===r)Gn(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var p=t instanceof Vt?null:l.path;(i=t.jg).h(0,0,(e=l.routeBounds).width,e.height);var m=c.points,x=l.pointsCount;null!==u?u.Ul(!1):null!==l&&l.Ul(!1),u=e.width;var b=e.height,M=t.j;if(M.length=0,null!==p){r0(t,u,b,p);var A=p.measuredBounds;i.ed(A),M.push(A)}A=zt.alloc();for(var L=B.alloc(),D=B.alloc(),I=0;I<r;I++){var z=n[I];if(z!==p)if(z.isPanelMain&&z instanceof It){r0(t,u,b,z);var X=z.measuredBounds;i.ed(X),M.push(X)}else if(2>x)z.measure(1/0,1/0,0,0),i.ed(X=z.measuredBounds),M.push(X);else{var V=z.segmentIndex,Z=z.segmentFraction,J=z.alignmentFocus;J.Mc()&&(J=P);var ct=z.segmentOrientation,mt=z.segmentOffset;if(isNaN(V)){var ft=c.ua;X=te(),ft.Ru(Z,X);var at=B.allocAt(X[0],X[1]);if(at.add(c.i(0)),(ft.type===lt.j||null!==(ft=ft.figures.first()))&&at.offset(-ft.startX,-ft.startY),ft=X[2],ct!==Oi){var Q=c.computeAngle(z,ct,ft);z.Lb=Q}Q=at.x-e.x;var Lt=at.y-e.y;B.free(at),$t(X)}else if(V<-x||V>=x)X=B.alloc(),c.vg(),c.computeMidPoint(X),ft=c.midAngle,ct!==Oi&&(Q=c.computeAngle(z,ct,ft),z.Lb=Q),Q=X.x-e.x,Lt=X.y-e.y,B.free(X);else{if(Q=0,0<=V?(Lt=m.M(V),X=V<x-1?m.M(V+1):Lt):(Lt=m.M(Q=x+V),X=0<Q?m.M(Q-1):Lt),Lt.Xa(X)){0<=V?(ft=0<V?m.M(V-1):Lt,Q=V<x-2?m.M(V+2):X):(ft=Q<x-1?m.M(Q+1):Lt,Q=1<Q?m.M(Q-2):X),at=ft.Bf(Lt);var Ct=X.Bf(Q);ft=at>Ct+10?0<=V?ft.ab(Lt):Lt.ab(ft):Ct>at+10?0<=V?X.ab(Q):Q.ab(X):0<=V?ft.ab(Q):Q.ab(ft)}else ft=0<=V?Lt.ab(X):X.ab(Lt);ct!==Oi&&(Q=c.computeAngle(z,ct,ft),z.Lb=Q),Q=Lt.x+(X.x-Lt.x)*Z-e.x,Lt=Lt.y+(X.y-Lt.y)*Z-e.y}z.measure(1/0,1/0,0,0),X=z.measuredBounds;var Wt=0;z instanceof It&&(Wt=z.strokeWidth),Ct=(at=z.naturalBounds).width+Wt;var oe=at.height+Wt;A.reset(),A.translate(-X.x,-X.y),A.scale(z.scale,z.scale),A.rotate(ct===Oi?z.angle:ft,Ct/2,oe/2),ct!==Fh&&ct!==Oh||A.rotate(90,Ct/2,oe/2),ct!==Ih&&ct!==Eh||A.rotate(-90,Ct/2,oe/2),ct===Yc&&(45<ft&&135>ft||225<ft&&315>ft)&&A.rotate(-ft,Ct/2,oe/2),at=new $(0,0,Ct,oe),L.xi(at,J),A.Ga(L),J=Wt/2*z.scale-L.x,z=Wt/2*z.scale-L.y,D.assign(mt),Wt=isNaN(mt.x);var qe=isNaN(mt.y);if(Wt||qe){Ct=Ct/2+3,oe=oe/2+3;var ei=45<=ft&&135>=ft,Mi=225<=ft&&315>=ft;ct===Oi&&(ei||Mi)?(D.x=qe?Ct:mt.y,D.y=Wt?oe:mt.x,ei?0<=V||isNaN(V)&&.5>Z||!Wt||(D.y=-oe):Mi&&((0<=V||isNaN(V)&&.5>Z)&&Wt&&(D.y=-oe),qe&&(D.x=-Ct))):(Wt&&(D.x=0<=V||isNaN(V)&&.5>Z?Ct:-Ct),qe&&(D.y=-oe),D.rotate(ft))}else D.rotate(ft);Q+=D.x,Lt+=D.y,at.set(X),at.h(Q+J,Lt+z,X.width,X.height),M.push(at),i.ed(at)}}if(null!==l)for(n=l.labelNodes;n.next();)n.value.measure(1/0,1/0);t.jg=i,t.position.h(e.x+i.x,e.y+i.y),Gn(o,i.width||0,i.height||0),zt.free(A),B.free(L),B.free(D)}}}},uc.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Vt||t instanceof st){var n=t,o=null;t instanceof Vt&&(n=(o=t).adornedPart);var r=t instanceof Vt?null:n.path,l=t.j;if(0!==l.length){var u=0;if(null!==r&&u<l.length){var c=l[u];u++,r.arrange(c.x-t.jg.x,c.y-t.jg.y,c.width,c.height)}for(c=0;c<i;c++){var p=e[c];if(p!==r&&u<l.length){var m=l[u];u++,p.arrange(m.x-t.jg.x,m.y-t.jg.y,m.width,m.height)}}}if(2<=(i=(e=n.points).count)&&t instanceof st)for(r=t.labelNodes;r.next();){var x=t;u=(l=r.value).segmentIndex,c=l.segmentFraction;var b=l.alignmentFocus;if(p=l.segmentOrientation,m=l.segmentOffset,isNaN(u)){var M=x.ua,A=te();M.Ru(c,A);var L=B.allocAt(A[0],A[1]);L.add(x.i(0)),M.type===lt.j||(M=M.figures.first()),L.offset(-M.startX,-M.startY),M=A[2],p!==Oi&&(x=x.computeAngle(l,p,M),l.angle=x),x=L.x;var D=L.y;B.free(L),$t(A)}else if(u<-i||u>=i)D=A=B.alloc(),(M=x).vg(),M.computeMidPoint(D),M=x.midAngle,p!==Oi&&(x=x.computeAngle(l,p,M),l.angle=x),x=A.x,D=A.y,B.free(A);else{if(L=0,0<=u?(A=e.s[u],D=u<i-1?e.s[u+1]:A):(A=e.s[L=i+u],D=0<L?e.s[L-1]:A),A.Xa(D)){0<=u?(M=0<u?e.s[u-1]:A,L=u<i-2?e.s[u+2]:D):(M=L<i-1?e.s[L+1]:A,L=1<L?e.s[L-2]:D);var I=M.Bf(A),z=D.Bf(L);M=I>z+10?0<=u?M.ab(A):A.ab(M):z>I+10?0<=u?D.ab(L):L.ab(D):0<=u?M.ab(L):L.ab(M)}else M=0<=u?A.ab(D):D.ab(A);p!==Oi&&(x=x.computeAngle(l,p,M),l.angle=x),x=A.x+(D.x-A.x)*c,D=A.y+(D.y-A.y)*c}if(b.ys())l.location=new B(x,D);else{b.Mc()&&(b=P),(A=zt.alloc()).reset(),A.scale(l.scale,l.scale),A.rotate(l.angle,0,0);var X=l.naturalBounds;L=$.allocAt(0,0,X.width,X.height),(I=B.alloc()).xi(L,b),A.Ga(I),b=-I.x,z=-I.y;var V=X.width,Z=X.height;(X=B.alloc()).assign(m);var J=isNaN(m.x),ct=isNaN(m.y);if(J||ct){V=V/2+3,Z=Z/2+3;var mt=45<=M&&135>=M,ft=225<=M&&315>=M;p===Oi&&(mt||ft)?(X.x=ct?V:m.y,X.y=J?Z:m.x,mt?0<=u||isNaN(u)&&.5>c||!J||(X.y=-Z):ft&&((0<=u||isNaN(u)&&.5>c)&&J&&(X.y=-Z),ct&&(X.x=-V))):(J&&(X.x=0<=u||isNaN(u)&&.5>c?V:-V),ct&&(X.y=-Z),X.rotate(M))}else X.rotate(M);x+=X.x,D+=X.y,A.pp(L),u=B.allocAt(x+(b+=L.x),D+(z+=L.y)),l.move(u),B.free(u),B.free(X),B.free(I),$.free(L),zt.free(A)}}null!==o?o.Ul(!1):n.Ul(!1),n=E0(t),t.location.h(t.position.x+n.x,t.position.y+n.y),B.free(n)}},Ut(xh,We),xh.prototype.measure=function(t,e,i,n,o,r,l){var u=t.Qb();t.graduatedBounds=[];var c=u.margin,p=c.right+c.left,m=c.top+c.bottom;u.measure(e,i,r,l);var x=u.measuredBounds,b=new $(-c.left,-c.top,Math.max(x.width+p,0),Math.max(x.height+m,0));t.graduatedBounds.push(b),o.assign(b);for(var M=u.geometry,A=u.strokeWidth,L=M.flattenedSegments,D=M.flattenedLengths,I=M.flattenedTotalLength,z=L.length,X=0,V=0,Z=te(),J=0;J<z;J++){var ct=L[J],mt=[];V=X=0;for(var ft=ct.length,at=0;at<ft;at+=2){var Q=ct[at],Lt=ct[at+1];if(0!==at){var Ct=180*Math.atan2(Lt-V,Q-X)/Math.PI;0>Ct&&(Ct+=360),mt.push(Ct)}X=Q,V=Lt}Z.push(mt)}if(null===t.graduatedIntervals){for(var Wt=[],oe=t.O.s,qe=oe.length,ei=0;ei<qe;ei++){var Mi=oe[ei],$e=[];if(Wt.push($e),Mi.visible){var Yr=Mi.interval;if(!(0>Yr))for(var De=0;De<qe;De++)if(De!==ei){var po=oe[De];if(po.visible&&Mi.constructor===po.constructor){var Ci=po.interval;Ci>Yr&&$e.push(Ci)}}}}t.graduatedIntervals=Wt}var Xr=t.graduatedIntervals,pn=t.O.s,Bn=pn.length,en=0,Zi=0,Hr=I;t.graduatedMarks=[];for(var go,fs=0;fs<Bn;fs++){var nn=pn[fs];if(go=[],nn.visible&&nn!==u){var Td=Math.abs(nn.interval),Ai=t.graduatedTickUnit;if(!(2>Ai*Td*I/t.graduatedRange&&null===nn.graduatedSkip)){var Ys=D[0][0],ko=0,on=0;Zi=I*nn.graduatedStart-1e-4,Hr=I*nn.graduatedEnd+1e-4;var ps=Ai*Td,rn=t.graduatedTickBase;if(rn<t.graduatedMin){var wa=(t.graduatedMin-rn)/ps;rn+=(wa=wa%1==0?wa:Math.floor(wa+1))*ps}else rn>t.graduatedMin+ps&&(rn-=Math.floor((rn-t.graduatedMin)/ps)*ps);for(var Ol=Xr[fs],wg=rn,ou=1e-6*t.graduatedMax,Ld=1;rn<=t.graduatedMax+ou;Ld++){t:{for(var ar=Ol.length,Mo=0;Mo<ar;Mo++){var El=(rn-t.graduatedTickBase)%(Ol[Mo]*t.graduatedTickUnit),gs=1e-6*t.graduatedTickUnit;if(El<gs&&El>-gs){var Dl=!1;break t}}Dl=!0}if(Dl&&(rn>t.graduatedMax&&(rn=t.graduatedMax),null===nn.graduatedSkip||nn instanceof re&&!nn.graduatedSkip(rn,nn)||nn instanceof It&&!nn.graduatedSkip(rn,nn))&&((en=(rn-t.graduatedMin)*I/t.graduatedRange)>I&&(en=I),Zi<=en&&en<=Hr)){for(var eo=Z[ko][on],Vr=D[ko][on];ko<D.length;){for(;en>Ys&&on<D[ko].length-1;)on++,eo=Z[ko][on],Ys+=Vr=D[ko][on];if(en<=Ys)break;eo=Z[++ko][on=0],Ys+=Vr=D[ko][on]}var _i=L[ko],jl=_i[2*on],Co=_i[2*on+1],lr=(en-(Ys-Vr))/Vr,ru=new B(jl+(_i[2*on+2]-jl)*lr+A/2-M.bounds.x,Co+(_i[2*on+3]-Co)*lr+A/2-M.bounds.y);ru.scale(u.scale,u.scale);t:{var Vo=eo,hr=Z[ko];if(!(.5005>lr&&.4995<lr)){var Ao=Vo;if(.5>lr?0<on?Ao=hr[on-1]:_.$(_i[0],_i[_i.length-2])&&_.$(_i[1],_i[_i.length-1])&&(Ao=hr[hr.length-1]):.5<lr&&(on+1<hr.length?Ao=hr[on+1]:_.$(_i[0],_i[_i.length-2])&&_.$(_i[1],_i[_i.length-1])&&(Ao=hr[0])),Vo!==Ao){var su=Math.abs(Vo-Ao);if(180<su&&(Vo<Ao?Vo+=360:Ao+=360,su=Math.abs(Vo-Ao)),5e-4>lr||.9995<lr){eo=(Vo+Ao)/2%360;break t}if(10>su){var Bl=1-Math.abs(.5-lr);eo=(Vo*Bl+Ao*(1-Bl))%360;break t}}}eo=Vo}if(nn instanceof re){var Go="";""!==(Go=null!==nn.graduatedFunction?null!=(Go=nn.graduatedFunction(rn,nn))?Go.toString():"":(+rn.toFixed(2)).toString())&&go.push({$l:ru,angle:eo,text:Go})}else go.push({$l:ru,angle:eo})}rn=wg+Ld*ps}}}t.graduatedMarks.push(go)}$t(Z);var ms=t.graduatedMarks;if(null!==ms)for(var ui=n.length,Xs=0;Xs<ui;Xs++){var Ie=n[Xs],zi=ms[Xs];if(Ie.visible&&Ie!==u&&0!==zi.length){if(Ie instanceof It){var sn=t,Gr=o,Wo=Ie.alignmentFocus;Wo.Mc()&&(Wo=k);var zl=Ie.angle;Ie.Lb=0,Ie.measure(1/0,1/0,0,0),Ie.Lb=zl;var Nd=Ie.measuredBounds,au=Nd.width,Rl=Nd.height,ba=$.allocAt(0,0,au,Rl),Ki=B.alloc();Ki.xi(ba,Wo),$.free(ba);for(var ys=-Ki.x,ur=-Ki.y,Ln=new $,cr=zi.length,Uo=0;Uo<cr;Uo++)for(var lu=zi[Uo],Hs=lu.$l.x,Fd=lu.$l.y,Yl=lu.angle,Me=0;4>Me;Me++){switch(Me){case 0:Ki.h(ys,ur);break;case 1:Ki.h(ys+au,ur);break;case 2:Ki.h(ys,ur+Rl);break;case 3:Ki.h(ys+au,ur+Rl)}Ki.rotate(Yl+Ie.angle),Ki.offset(Hs,Fd),0===Uo&&0===Me?Ln.h(Ki.x,Ki.y,0,0):Ln.Ye(Ki),Ki.offset(-Hs,-Fd),Ki.rotate(-Yl-Ie.angle)}B.free(Ki),null!==sn.graduatedBounds&&sn.graduatedBounds.push(Ln),ii(Gr,Ln.x,Ln.y,Ln.width,Ln.height)}else if(Ie instanceof re){var zn=t,Zo=o;null===zn.temporaryTextBlock&&(zn.temporaryTextBlock=new re);var an=zn.temporaryTextBlock;w0(an,Ie);var Xl=Ie.alignmentFocus;Xl.Mc()&&(Xl=k);for(var Rn=Ie.segmentOrientation,Vs=Ie.segmentOffset,_o=new $,hu=0,uu=0,Ko=0,Gs=0,Ws=0,Hl=zi.length,vs=0;vs<Hl;vs++){var Yn=zi[vs];hu=Yn.$l.x,uu=Yn.$l.y,Ko=Yn.angle,Ws=Gs=Ie.angle,Rn!==Oi&&(Gs=st.computeAngle(Rn,Ws=Rn===Nh||Rn===Rc?Ko+Ie.angle:Ko)),an.Lb=Gs,an.text=Yn.text||"",an.measure(1/0,1/0,0,0);var Wr=an.measuredBounds,Us=an.naturalBounds,dr=Us.width,Ur=Us.height,fr=zt.alloc();fr.reset(),fr.translate(-Wr.x,-Wr.y),fr.scale(an.scale,an.scale),fr.rotate(Ws,dr/2,Ur/2),Rn!==Fh&&Rn!==Oh||fr.rotate(90,dr/2,Ur/2),Rn!==Ih&&Rn!==Eh||fr.rotate(-90,dr/2,Ur/2),Rn===Yc&&(45<Ko&&135>Ko||225<Ko&&315>Ko)&&fr.rotate(-Ko,dr/2,Ur/2);var Sa=$.allocAt(0,0,dr,Ur),Zr=B.alloc();Zr.xi(Sa,Xl),fr.Ga(Zr);var Vl=-Zr.x,ka=-Zr.y,pr=B.alloc();pr.assign(Vs),isNaN(pr.x)&&(pr.x=dr/2+3),isNaN(pr.y)&&(pr.y=-(Ur/2+3)),pr.rotate(Ko);var cu=new $(hu+=pr.x+Vl,uu+=pr.y+ka,Wr.width,Wr.height),Gl=new $(Wr.x,Wr.y,Wr.width,Wr.height),du=new $(Us.x,Us.y,Us.width,Us.height);Yn.Tz=Gs,Yn.lineCount=an.lineCount,Yn.lines=[an.Db,an.Ih,an.df,an.Le,an.Qc,an.Rb,an.ze],Yn.actualBounds=cu,Yn.measuredBounds=Gl,Yn.naturalBounds=du,0===vs?_o.assign(cu):_o.ed(cu),B.free(pr),B.free(Zr),$.free(Sa),zt.free(fr)}null!==zn.graduatedBounds&&zn.graduatedBounds.push(_o),ii(Zo,_o.x,_o.y,_o.width,_o.height)}Sn(Ie,!1)}}},xh.prototype.arrange=function(t,e,i){if(null!==t.graduatedBounds){var n=t.Qb(),o=t.graduatedMarks;if(null!==o){var r=t.graduatedBounds,l=0,u=r[l];l++,null!==n&&n.arrange(u.x-i.x,u.y-i.y,u.width,u.height);for(var c=e.length,p=0;p<c;p++){var m=e[p];u=o[p],m.visible&&m!==n&&0!==u.length&&(u=r[l],l++,m.arrange(u.x-i.x,u.y-i.y,u.width,u.height))}t.graduatedBounds=null}}},xh.prototype.hc=function(t,e,i){var n=i.$i;i.$i=!0;var o=t.naturalBounds,r=o.width,l=o.height;o=e instanceof $i,e.save(),e.beginPath(),e.rect(-1,-1,r+1,l+1),e.clip(),e.Se(),(r=t.Qb()).hc(e,i),0>=(l=t.Df()*i.scale)&&(l=1);for(var u=r.actualBounds,c=t.O.s,p=t.graduatedMarks,m=c.length,x=0;x<m;x++){var b=c[x],M=p[x],A=M.length;if(b.visible&&b!==r&&0!==M.length)if(b instanceof It){if(!(2>t.graduatedTickUnit*b.interval*r.geometry.flattenedTotalLength/t.graduatedRange*l&&null===b.graduatedSkip)){var L=b.measuredBounds,D=b.strokeWidth*b.scale,I=b.alignmentFocus;I.Mc()&&(I=k);for(var z=0;z<A;z++){var X=M[z].$l,V=M[z].angle,Z=I,J=b.Bb;J.reset(),J.translate(X.x+u.x,X.y+u.y),J.rotate(V+b.angle,0,0),J.translate(-L.width*Z.x+Z.offsetX+D/2,-L.height*Z.y+Z.offsetY+D/2),J.scale(b.scale,b.scale),il(b,!1),b.wh.set(b.Bb),b.Jk=b.scale,$r(b,!1),b.hc(e,i),o&&(t.svg.appendChild(b.svg),b.svg=null),b.Bb.reset()}}}else if(b instanceof re)for(null===t.temporaryTextBlock&&(t.temporaryTextBlock=new re),w0(L=t.temporaryTextBlock,b),D=0;D<A;D++)(I=M[D]).actualBounds&&I.measuredBounds&&I.naturalBounds&&(L.fc=I.text||"",L.Lb=I.Tz||0,L.Gc=I.lineCount||0,void 0!==(z=I.lines)&&(L.Db=z[0],L.Ih=z[1],L.df=z[2],L.Le=z[3],L.Qc=z[4],L.Rb=z[5],L.ze=z[6]),I.naturalBounds&&(L.ec=I.naturalBounds),I.actualBounds&&L.arrange((z=I.actualBounds).x,z.y,z.width,z.height),L.arrange((z=I.actualBounds).x,z.y,z.width,z.height),X=I.measuredBounds,I=I.naturalBounds,(V=L.Bb).reset(),V.translate(z.x+u.x,z.y+u.y),V.translate(-X.x,-X.y),L.no(V,I.x,I.y,I.width,I.height),il(L,!1),L.wh.set(L.Bb),L.Jk=L.scale,$r(L,!1),L.Ng=b.part,L.Me=b.panel,L.hc(e,i),L.Me=null,L.Ng=null,o&&(t.svg.appendChild(L.svg),L.svg=null))}i.$i=n,e.restore(),e.Vc(!0)},Ut(nt,vt),nt.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.na=this.na,t.zb=this.zb.J(),t.Tm=this.Tm.J(),t.Uf=this.Uf,t.$e=this.$e,t.jg.assign(this.jg),null!==this.U&&(t.U=this.U.copy(t)),t.xo=this.xo,t.jn=this.jn.J(),t.kn=this.kn.J(),null!==this.ra&&(t.ra=this.ra.copy()),t.ub=this.ub,t.zn=this.zn,t.Hh=this.Hh},nt.prototype.Af=function(t){vt.prototype.Af.call(this,t),t.O=this.O;for(var e=t.O.s,i=e.length,n=0;n<i;n++)e[n].Me=t;t.$g=null},nt.prototype.copy=function(){var t=vt.prototype.copy.call(this);if(null!==t){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n].copy();o.wi(t),o.Ng=null;var r=t.O,l=r.count;if(r.Hb(l,o),null!==(r=t.part)){r.Rh=null,null!==o.portId&&r instanceof dt&&(r.Te=!0);var u=t.diagram;null!==u&&u.undoManager.isUndoingRedoing||r.cb(Ke,"elements",t,null,o,null,l)}}return t}return null},(v=nt.prototype).toString=function(){return"Panel("+this.type.name+")#"+Ae(this)},v.Pn=function(t){vt.prototype.Pn.call(this,t);for(var e=this.O.s,i=e.length,n=0;n<i;n++)e[n].Pn(t)},v.hh=function(t,e){if(this.na===nt.Grid)t.yc(),this.na.hc(this,t,e);else if(this.na===nt.Graduated)t.yc(),this.na.hc(this,t,e);else{if(this.na===nt.Table)if(t.yc(),t instanceof $i){var i=t.yd;t.yd=qu(t,"gojs-ts"),Kf(this,t),t.nh.pop(),t.yd=i}else Kf(this,t);(i=this.isClipping&&this.na===nt.Spot)&&t.save();for(var n=this.Qb(),o=this.O.s,r=o.length,l=0;l<r;l++){var u=o[l];i&&u===n&&(t.clipInsteadOfFill=!0),u.hc(t,e),i&&u===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Vc(!0))}},v.mv=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].mv();this.Uc=!0},v.jk=function(t,e,i){if(!vt.prototype.jk.call(this,t,e,i))return!1;if(this.type===nt.Table)null!==(i=0!==(i=this.svg.getElementsByClassName("gojs-ts")).length?i[0]:null)&&(i.innerHTML=""),t.yd=i,Kf(this,t),t.yd=null;else if(this.na===nt.Grid||this.na===nt.Graduated)return this.svg.innerHTML="",this.svg.remove(),!1;for(var n=(i=this.O.s).length,o=0;o<n;o++)i[o].hc(t,e);return!0},v.mk=function(){return!0},v.$o=function(t,e,i,n){if(!this.isClipping)if(this.Dd()&&null!==t.ak){t=t.ak,e=this.O.s;for(var o=0,r=0,l=0;l<e.length;l++)if(e[l].Ed()){var u=e[l].actualBounds;o=0===l?u.x:Math.min(u.x,o),r=0===l?u.y:Math.min(u.y,r)}n.setAttributeNS(null,"clip-path","path('M "+(t.x-i.x-o)+","+(t.y-i.y-r)+" l "+t.width+" 0 l 0 "+t.height+" l -"+t.width+" 0 z')")}else vt.prototype.$o.call(this,t,e,i,n)},v.Rj=function(t,e,i,n,o){var r=this.se(),l=this.transform,u=1/(l.m11*l.m22-l.m12*l.m21),c=l.m22*u,p=-l.m12*u,m=-l.m21*u,x=l.m11*u,b=u*(l.m21*l.dy-l.m22*l.dx),M=u*(l.m12*l.dx-l.m11*l.dy);if(null!==this.areaBackground)return _.Ff((l=this.actualBounds).left,l.top,l.right,l.bottom,t,e,i,n,o);if(null!==this.background)return r=t*c+e*m+b,u=t*p+e*x+M,t=i*c+n*m+b,c=i*p+n*x+M,o.h(0,0),r=_.Ff(0,0,(i=this.naturalBounds).width,i.height,r,u,t,c,o),o.transform(l),r;r||(c=1,m=p=0,x=1,M=b=0),u=t*c+e*m+b,t=t*p+e*x+M,o.h(c=i*c+n*m+b,i=i*p+n*x+M),n=(c-u)*(c-u)+(i-t)*(i-t),p=!1,M=(x=this.O.s).length,m=B.alloc(),b=null,e=1/0;var A=null,L=this.isClipping&&this.na===nt.Spot;L&&(A=B.alloc(),(p=(b=this.Qb()).Rj(u,t,c,i,A))&&(e=(u-A.x)*(u-A.x)+(t-A.y)*(t-A.y)));for(var D=0;D<M;D++){var I=x[D];I.visible&&I!==b&&I.Rj(u,t,c,i,m)&&(p=!0,(I=(u-m.x)*(u-m.x)+(t-m.y)*(t-m.y))<n&&(n=I,o.set(m)))}return L&&(e>n&&o.set(A),B.free(A)),B.free(m),r&&o.transform(l),p},v.Fj=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Fj();vt.prototype.Fj.call(this)},v.v=function(t){if(!Pr(this)){vt.prototype.v.call(this,t),t=null,(this.na===nt.Auto||this.na===nt.Link)&&(t=this.Qb());for(var e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n];if((o===t||o.isPanelMain)&&o.v(!0),!o.desiredSize.w()){var r=lo(o,!1);(o instanceof Ii||o instanceof nt||o instanceof re||r!==Ne)&&o.v(!0)}}}},v.Tj=function(){if(!Pr(this)){Sn(this,!0),Ts(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Tj()}},v.Tk=function(){if(!(2048&this.l)){il(this,!0),$r(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Xu()}},v.Xu=function(){$r(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Xu()},v.Wl=function(t,e,i,n){var o=this.jg;o.h(0,0,0,0);var r=this.desiredSize,l=this.minSize;void 0===i&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var u=this.maxSize;isNaN(r.width)||(t=Math.min(r.width,u.width)),isNaN(r.height)||(e=Math.min(r.height,u.height)),t=Math.max(i,t),e=Math.max(n,e);var c=this.zb;t=Math.max(t-c.left-c.right,0),e=Math.max(e-c.top-c.bottom,0);var p=this.O.s;0!==p.length&&this.na.measure(this,t,e,p,o,i,n),t=o.width+c.left+c.right,c=o.height+c.top+c.bottom,isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(c=r.height),t=Math.min(u.width,t),c=Math.min(u.height,c),t=Math.max(l.width,t),c=Math.max(l.height,c),Gn(o,t=Math.max(i,t),c=Math.max(n,c)),Gn(this.naturalBounds,t,c),this.Ge(0,0,t,c)},v.Qb=function(){if(null===this.$g){var t=this.O.s,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.isPanelMain)return this.$g=n}this.$g=t[0]}return this.$g},v.eh=function(t,e,i,n){var o=this.O.s;if(this.actualBounds.h(t,e,i,n),0!==o.length){if(!this.desiredSize.w()){t=lo(this,!0);var r=this.measuredBounds;e=r.width,r=r.height;var l=this.Kg,u=l.left+l.right;switch(l=l.top+l.bottom,e===i&&r===n&&(t=Ne),t){case Ne:(e>i||r>n)&&(this.v(),this.measure(e>i?i:e,r>n?n:r,0,0));break;case Oe:this.v(!0),this.measure(i+u,n+l,0,0);break;case gi:this.v(!0),this.measure(i+u,r+l,0,0);break;case xi:this.v(!0),this.measure(e+u,n+l,0,0)}}this.na.arrange(this,o,this.jg)}},v.gh=function(t){var e=this.naturalBounds,i=or(this);if(Fn(0,0,e.width,e.height,t.x,t.y)){for(var n=(e=this.O.s).length,o=B.allocAt(0,0);n--;){var r=e[n];if((r.visible||r===i)&&(pi(o.set(t),r.transform),r.ca(o)))return B.free(o),!0}return B.free(o),!(null===this.Ma&&null===this.areaBackground)}return!1},v.ks=function(t){if(this.bindingId===t)return this;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n].ks(t);if(null!==o)return o}return null},v.qm=function(t,e){if(e(this,t),t instanceof nt)for(var i=(t=t.O.s).length,n=0;n<i;n++)this.qm(t[n],e)},v.Nl=function(t){return u0(this,this,t)},v.fb=function(t){if(this.name===t)return this;var e=this.O.s,i=e.length;null===this.Hh&&null===this.itemTemplateMap||(i=wh(this));for(var n=0;n<i;n++){var o=e[n];if(o instanceof nt){var r=o.fb(t);if(null!==r)return r}if(o.name===t)return o}return null},v.se=function(){return!(this.type===nt.TableRow||this.type===nt.TableColumn)},v.jc=function(t,e,i){if(!1===this.pickable||(void 0===e&&(e=null),void 0===i&&(i=null),_n(this)))return null;var n=this.naturalBounds,o=1/this.Df(),r=this.se(),l=r?t:pi(B.allocAt(t.x,t.y),this.transform),u=this.diagram,c=10,p=5;if(null!==u&&(p=(c=u.Ql("extraTouchArea"))/2),Fn(-p*o,-p*o,n.width+c*o,n.height+c*o,l.x,l.y)){if(!this.isAtomic){var m=(o=this.O.s).length;if(u=B.alloc(),p=(c=this.isClipping&&this.na===nt.Spot)?this.Qb():null,c&&(p.se()?pi(u.set(t),p.transform):u.set(t),!p.ca(u)))return B.free(u),r||B.free(l),null;for(var x=or(this);m--;){var b=o[m];if((b.visible||b===x)&&(b.se()?pi(u.set(t),b.transform):u.set(t),!c||b!==p)){var M=null;if(b instanceof nt?M=b.jc(u,e,i):!0===b.pickable&&b.ca(u)&&(M=b),null!==M&&(null!==e&&(M=e(M)),null!==M&&(null===i||i(M))))return B.free(u),r||B.free(l),M}}B.free(u)}return null===this.background&&null===this.areaBackground?(r||B.free(l),null):(t=Fn(0,0,n.width,n.height,l.x,l.y)?this:null,r||B.free(l),t)}return r||B.free(l),null},v.ji=function(t,e,i,n){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var o=this.naturalBounds,r=this.se(),l=r?t:pi(B.allocAt(t.x,t.y),this.transform);if(o=Fn(0,0,o.width,o.height,l.x,l.y),Nr(this)||o){if(!this.isAtomic){for(var u=this.O.s,c=u.length,p=B.alloc(),m=or(this);c--;){var x=u[c];if(x.visible||x===m){x.se()?pi(p.set(t),x.transform):p.set(t);var b=x;(null!==(x=x instanceof nt?x:null)?x.ji(p,e,i,n):b.ca(p))&&!1!==b.pickable&&(null!==e&&(b=e(b)),null===b||null!==i&&!i(b)||n.add(b))}}B.free(p)}return r||B.free(l),o&&(null!==this.background||null!==this.areaBackground)}return r||B.free(l),!1},v.Cf=function(t,e,i,n,o,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var l=r;if(void 0===r&&(l=zt.alloc()).reset(),l.multiply(this.transform),this.fh(t,l))return qf(this,e,i,o),void 0===r&&zt.free(l),!0;if(this.Yc(t,l)){if(!this.isAtomic)for(var u=or(this),c=this.O.s,p=c.length;p--;){var m=c[p];if(m.visible||m===u){var x=m.actualBounds,b=this.naturalBounds;x.x>b.width||x.y>b.height||0>x.x+x.width||0>x.y+x.height||(x=m,m=m instanceof nt?m:null,(b=zt.alloc()).set(l),(null!==m?m.Cf(t,e,i,n,o,b):Wm(x,t,n,b))&&(null!==e&&(x=e(x)),null===x||null!==i&&!i(x)||o.add(x)),zt.free(b))}}return void 0===r&&zt.free(l),n}return void 0===r&&zt.free(l),!1},v.og=function(t,e,i,n,o,r){if(!1===this.pickable)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var l=this.naturalBounds,u=this.se(),c=u?t:pi(B.allocAt(t.x,t.y),this.transform),p=u?e:pi(B.allocAt(e.x,e.y),this.transform),m=c.Bf(p),x=0<c.x&&c.x<l.width&&0<c.y&&c.y<l.height||yi(c.x,c.y,0,0,0,l.height)<=m||yi(c.x,c.y,0,l.height,l.width,l.height)<=m||yi(c.x,c.y,l.width,l.height,l.width,0)<=m||yi(c.x,c.y,l.width,0,0,0)<=m;if(l=c.zd(0,0)<=m&&c.zd(0,l.height)<=m&&c.zd(l.width,0)<=m&&c.zd(l.width,l.height)<=m,u||(B.free(c),B.free(p)),x){if(!this.isAtomic){c=B.alloc(),p=B.alloc(),m=or(this);for(var b=this.O.s,M=b.length;M--;){var A=b[M];if(A.visible||A===m){var L=A.actualBounds,D=this.naturalBounds;(!u||!(L.x>D.width||L.y>D.height||0>L.x+L.width||0>L.y+L.height))&&(A.se()?(L=A.transform,pi(c.set(t),L),pi(p.set(e),L)):(c.set(t),p.set(e)),L=A,(null!==(A=A instanceof nt?A:null)?A.og(c,p,i,n,o,r):L.ux(c,p,o))&&(null!==i&&(L=i(L)),null===L||null!==n&&!n(L)||r.add(L)))}}B.free(c),B.free(p)}return o?x:l}return!1},v.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.Hb(this.O.count,e[i]);return this},v.M=function(t){return this.O.M(t)},v.Hb=function(t,e){e instanceof wt&&it("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.rg(e))&&(this===e&&it("Cannot make a Panel contain itself: "+this.toString()),it("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(null!==i&&i!==this&&it("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==nt.Grid||e instanceof It||it("Can only add Shapes to a Grid Panel, not: "+e),this.na!==nt.Graduated||e instanceof It||e instanceof re||it("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.wi(this),e.Ng=null,null!==this.itemArray){var n=e.data;null!==n&&"object"==typeof n&&(null===this.ge&&(this.ge=new Tt),this.ge.add(n,e))}var o=this.O;if(n=-1,i===this){for(var r=-1,l=this.O.s,u=l.length,c=0;c<u;c++)if(l[c]===e){r=c;break}if(-1!==r){if(r===t||r+1>=o.count&&t>=o.count)return;o.mb(r),n=r}else it("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.Hb(t,e),(0===t||e.isPanelMain)&&(this.$g=null),Pr(this)||this.v(),e.v(!1),(null!==e.portId||e instanceof nt&&!0===e.Te)&&(this.Te=!0),this.graduatedIntervals=null,this.If()||fc(this,e,!1),null!==(i=this.part)&&(i.Rh=null,i.ag=NaN,this.Te&&i instanceof dt&&(i.Te=!0),i.Te&&i instanceof dt&&(i.wc=null),null!==(o=this.diagram)&&o.undoManager.isUndoingRedoing||(-1!==n&&i.cb(Qe,"elements",this,e,null,n,null),i.cb(Ke,"elements",this,null,e,null,t)))},v.remove=function(t){for(var e=this.O.s,i=e.length,n=-1,o=0;o<i;o++)if(e[o]===t){n=o;break}-1!==n&&this.qc(n,!0)},v.mb=function(t){0<=t&&this.qc(t,!0)},v.qc=function(t,e){var i=this.O,n=i.M(t);if(n.Ng=null,n.wi(null),null!==this.ge){var o=n.data;"object"==typeof o&&this.ge.remove(o)}i.mb(t),Sn(this,!1),this.v(),this.$g===n&&(this.$g=null),this.graduatedIntervals=null;var r=this.part;null!==r&&(r.Rh=null,r.ag=NaN,r.Xb(),r instanceof dt&&(n instanceof nt?n.qm(n,function(l,u){kp(r,u,e)}):kp(r,n,e)),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||r.cb(Qe,"elements",this,n,null,t,null))},v.Gb=function(t){0>t&&le(t,">= 0",nt,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(void 0===e[t]){var i=new Re;i.wi(this),i.isRow=!0,i.index=t,e[t]=i,this.cb(Ke,"rowdefs",this,null,i,null,t)}return e[t]},v.pA=function(t){if(0>t&&le(t,">= 0",nt,"removeRowDefinition:idx"),0!==this.rowCount){t=Math.round(t);var e=this.rowDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.cb(Qe,"rowdefs",this,i,null,t,null),this.v()}}},v.Fb=function(t){0>t&&le(t,">= 0",nt,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(void 0===e[t]){var i=new Re;i.wi(this),i.isRow=!1,i.index=t,e[t]=i,this.cb(Ke,"coldefs",this,null,i,null,t)}return e[t]},v.kA=function(t){if(0>t&&le(t,">= 0",nt,"removeColumnDefinition:idx"),0!==this.columnCount){t=Math.round(t);var e=this.colDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&void 0===e[n--];)e.length--;this.cb(Qe,"coldefs",this,i,null,t,null),this.v()}}},v.Hy=function(t){var e=null;return t.isRow?e=this.Gb(t.index):t.isRow||(e=this.Fb(t.index)),e&&pc(e,t),this},v.Iy=function(t,e){return(t=this.Gb(t))&&pc(t,new Re(e)),this},v.Cy=function(t,e){return(t=this.Fb(t))&&pc(t,new Re(e)),this},v.oz=function(t){if(0>t||this.type!==nt.Table||0===this.rowCount)return-1;for(var e=0,i=this.rowDefs,n=i.length,o=this.topIndex;o<n;o++){var r=i[o];if(void 0!==r&&t<(e+=r.total))break}return o},v.gz=function(t){if(0>t||this.type!==nt.Table||0===this.columnCount)return-1;for(var e=0,i=this.colDefs,n=i.length,o=this.leftIndex;o<n;o++){var r=i[o];if(void 0!==r&&t<(e+=r.total))break}return o},v.Gz=function(t,e){if(void 0===e&&(e=new B(NaN,NaN)),this.type!==nt.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.Qb();return i.geometry.Qu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Ga(e)},v.Hz=function(t){if(this.type!==nt.Graduated)return NaN;var e=this.Qb();return e.transform.Cd(t),e.geometry.yx(t)*this.graduatedRange+this.graduatedMin},v.Vy=function(t){void 0===t&&(t=!1);var e=this.copy();return Zv(e,function(i){i instanceof nt&&(i.allBindings=null,i.ub=null);var n=i.localBindings;null!==n&&(i.localBindings=null,n.each(function(o){i.bind(o.copy())})),null!==(n=i.animationTriggers)&&(i.animationTriggers=null,n.each(function(o){i.Kv(o.value.copy())}))}),t&&En(e),e},v.La=function(t){var e=this.allBindings;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((""===t||""===n||n===t)&&(n=i.targetProperty,null!==i.converter||""!==n)){n=this.data;var o=i.sourceName;if(null!==o){if(""===o)n=this;else if("/"===o)n=this;else if("."===o)n=this;else if(".."===o)n=this;else if(null===(n=this.fb(o)))continue}else if(i.isToModel){if(null===(n=this.diagram))continue;n=n.model.modelData}var r=this,l=i.Ai;if(-1!==l){if(null===(r=this.ks(l)))continue}else null!==i.xd&&(r=i.xd);if("/"===o?n=r.part:"."===o?n=r:".."===o&&(n=r.panel),0!==(o=i.to)){if(!(r instanceof nt))continue;1===o?r=r.Fb(i.wl):2===o&&(r=r.Gb(i.wl))}void 0!==r&&i.Nv(r,n)}}},v.tx=function(t){return null==t||null===this.ge?null:this.ge.I(t)},v.nv=function(){for(var t=wh(this);this.O.length>t;)this.qc(this.O.length-1,!1);g0(this,this.itemArray)},Ot.Object.defineProperties(nt.prototype,{type:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.isAtomic=this.na===nt.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.O.iterator}},naturalBounds:{get:function(){return this.ec}},padding:{get:function(){return this.zb},set:function(t){"number"==typeof t?(0>t&&le(t,">= 0",nt,"padding"),t=new R(t)):(0>t.left&&le(t.left,">= 0",nt,"padding:value.left"),0>t.right&&le(t.right,">= 0",nt,"padding:value.right"),0>t.top&&le(t.top,">= 0",nt,"padding:value.top"),0>t.bottom&&le(t.bottom,">= 0",nt,"padding:value.bottom"));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e.D(t)||(this.Tm=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return null!==this.U?this.U.Qp:h},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.defaultSeparatorPadding;e.D(t)||(t=t.J(),null===this.U&&(this.U=new Cn),this.U.Qp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return null!==this.U?this.U.ia:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Kt)&&(t instanceof Kt&&t.freeze(),null===this.U&&(this.U=new Cn),this.U.ia=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return null!==this.U?this.U.Ha:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.U&&(this.U=new Cn),this.U.Ha=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return null!==this.U?this.U.V:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||it("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}null===this.U&&(this.U=new Cn),this.U.V=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return null!==this.U?this.U.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Kt)&&(t instanceof Kt&&t.freeze(),null===this.U&&(this.U=new Cn),this.U.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return null!==this.U?this.U.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.U&&(this.U=new Cn),this.U.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return null!==this.U?this.U.o:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||it("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}null===this.U&&(this.U=new Cn),this.U.o=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return null!==this.U?this.U.nb:null},set:function(t){null===this.U&&(this.U=new Cn),this.U.nb=t}},viewboxStretch:{get:function(){return this.xo},set:function(t){var e=this.xo;e!==t&&(this.xo=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.jn},set:function(t){var e=this.jn;if(!e.D(t)){t.w()&&0!==t.width&&0!==t.height||it("Invalid Panel.gridCellSize: "+t),this.jn=t.J();var i=this.diagram;null!==i&&this===i.grid&&Cr(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.kn},set:function(t){var e=this.kn;if(!e.D(t)){t.w()||it("Invalid Panel.gridOrigin: "+t),this.kn=t.J();var i=this.diagram;null!==i&&this===i.grid&&Cr(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return null!==this.ra?this.ra.lq:0},set:function(t){var e=this.graduatedMin;e!==t&&(null===this.ra&&(this.ra=new rr),this.ra.lq=t,this.v(),this.g("graduatedMin",e,t),ra(this)&&null!==(t=this.part)&&Ps(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return null!==this.ra?this.ra.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(null===this.ra&&(this.ra=new rr),this.ra.F=t,this.v(),this.g("graduatedMax",e,t),ra(this)&&null!==(t=this.part)&&Ps(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return null!==this.ra?this.ra.ia:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(null===this.ra&&(this.ra=new rr),this.ra.ia=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return null!==this.ra?this.ra.V:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(null===this.ra&&(this.ra=new rr),this.ra.V=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return null!==this.ra?this.ra.u:null},set:function(t){null!==this.ra?this.ra.u=t:null!==t&&(this.ra=new rr,this.ra.u=t)}},graduatedBounds:{get:function(){return null!==this.ra?this.ra.j:null},set:function(t){null!==this.ra?this.ra.j=t:null!==t&&(this.ra=new rr,this.ra.j=t)}},graduatedIntervals:{get:function(){return null!==this.ra?this.ra.o:null},set:function(t){null!==this.ra?this.ra.o=t:null!==t&&(this.ra=new rr,this.ra.o=t)}},temporaryTextBlock:{get:function(){return null!==this.ra?this.ra.Zh:null},set:function(t){null!==this.ra?this.ra.Zh=t:null!==t&&(this.ra=new rr,this.ra.Zh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Te:{get:function(){return 0!=(8388608&this.l)},set:function(t){0!=(8388608&this.l)!==t&&(this.l^=8388608)}},rowDefs:{get:function(){return null===this.U&&(this.U=new Cn),this.U.Pc}},rowCount:{get:function(){return null===this.U?0:this.rowDefs.length}},colDefs:{get:function(){return null===this.U&&(this.U=new Cn),this.U.Oc}},columnCount:{get:function(){return null===this.U?0:this.colDefs.length}},rowSizing:{get:function(){return null!==this.U?this.U.ob:mc},set:function(t){var e=this.rowSizing;e!==t&&(null===this.U&&(this.U=new Cn),this.U.ob=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return null!==this.U?this.U.j:mc},set:function(t){var e=this.columnSizing;e!==t&&(null===this.U&&(this.U=new Cn),this.U.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return null!==this.U?this.U.Ib:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&it("Panel.topIndex must be greater than zero and a real number, not: "+t),null===this.U&&(this.U=new Cn),this.U.Ib=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return null!==this.U?this.U.hb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&it("Panel.leftIndex must be greater than zero and a real number, not: "+t),null===this.U&&(this.U=new Cn),this.U.hb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.ub},set:function(t){var e=this.ub;if(e!==t){var i=this instanceof wt&&!(this instanceof Vt);En(this),this.ub=t;var n=this.diagram;null!==n&&(i?(i=n.partManager,this instanceof st?(null!==e&&i.bf.remove(e),null!==t&&i.bf.add(t,this)):this instanceof wt&&(null!==e&&i.cf.remove(e),null!==t&&i.cf.add(t,this))):null!==(i=this.panel)&&null!==i.ge&&(null!==e&&i.ge.remove(e),null!==t&&i.ge.add(t,this))),this.g("data",e,t),null!==n&&n.undoManager.isUndoingRedoing||null!==t&&this.La()}}},itemIndex:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return null!==this.A?this.A.nb:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new sa),this.A.nb=t)}},itemArray:{get:function(){return this.Hh},set:function(t){var e=this.Hh;if(e!==t||null!==t&&function _v(t,e){for(var i=(t=t.O.s).length,n=e.length,o=0,r=null;o<i&&!((r=t[o])instanceof nt&&null!==r.data);)r=t[++o];if(i-o!==n)return!0;if(null===r)return 0<n;for(var l=0;o<i&&l<n;){if(!((r=t[o])instanceof nt)||r.data!==e[l])return!0;o++,l++}return!1}(this,t)){var i=this.diagram;e!==t&&(null!==i&&null!==e&&Hp(i.partManager,this,i),this.Hh=t,null!==i&&null!==t&&Xp(i.partManager,this)),this.g("itemArray",e,t),null!==i&&i.undoManager.isUndoingRedoing||g0(this,t)}}},itemTemplate:{get:function(){return null===this.itemTemplateMap?null:this.itemTemplateMap.I("")},set:function(t){if(null===this.itemTemplateMap){if(null===t)return;this.itemTemplateMap=new Tt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof wt||t.isPanelMain)&&it("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.nv())}},itemTemplateMap:{get:function(){return null!==this.A?this.A.Pc:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var i=t.iterator;i.next(););Je(this),this.A.Pc=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.nv()}}},itemCategoryProperty:{get:function(){return null!==this.A?this.A.Oc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(Je(this),this.A.Oc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.l)},set:function(t){var e=0!=(2097152&this.l);e!==t&&(this.l^=2097152,this instanceof Nt&&(this.tb=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.l)},set:function(t){var e=0!=(33554432&this.l);e!==t&&(this.l^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.l)},set:function(t){var e=0!=(4194304&this.l);if(e!==t){var i=null===this.panel||this.panel.If();this.l^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||i&&fc(this,this,t)}}},alignmentFocusName:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.v(),this.g("alignmentFocusName",e,t))}}}),Ot.Object.defineProperties(nt,{Position:{get:function(){return Kn.I("Position")}},Horizontal:{get:function(){return Kn.I("Horizontal")}},Vertical:{get:function(){return Kn.I("Vertical")}},Spot:{get:function(){return Kn.I("Spot")}},Auto:{get:function(){return Kn.I("Auto")}},Table:{get:function(){return Kn.I("Table")}},Viewbox:{get:function(){return Kn.I("Viewbox")}},TableRow:{get:function(){return Kn.I("TableRow")}},TableColumn:{get:function(){return Kn.I("TableColumn")}},Link:{get:function(){return Kn.I("Link")}},Grid:{get:function(){return Kn.I("Grid")}},Graduated:{get:function(){return Kn.I("Graduated")}}}),nt.prototype.rebuildItemElements=nt.prototype.nv,nt.prototype.findItemPanelForData=nt.prototype.tx,nt.prototype.updateTargetBindings=nt.prototype.La,nt.prototype.copyTemplate=nt.prototype.Vy,nt.prototype.graduatedValueForPoint=nt.prototype.Hz,nt.prototype.graduatedPointForValue=nt.prototype.Gz,nt.prototype.findColumnForLocalX=nt.prototype.gz,nt.prototype.findRowForLocalY=nt.prototype.oz,nt.prototype.addColumnDefinition=nt.prototype.Cy,nt.prototype.addRowDefinition=nt.prototype.Iy,nt.prototype.addRowColumnDefinition=nt.prototype.Hy,nt.prototype.removeColumnDefinition=nt.prototype.kA,nt.prototype.getColumnDefinition=nt.prototype.Fb,nt.prototype.removeRowDefinition=nt.prototype.pA,nt.prototype.getRowDefinition=nt.prototype.Gb,nt.prototype.removeAt=nt.prototype.mb,nt.prototype.remove=nt.prototype.remove,nt.prototype.insertAt=nt.prototype.Hb,nt.prototype.elt=nt.prototype.M,nt.prototype.add=nt.prototype.add,nt.prototype.findObject=nt.prototype.fb,nt.prototype.findInVisualTree=nt.prototype.Nl,nt.prototype.walkVisualTreeFrom=nt.prototype.qm,nt.prototype.findMainElement=nt.prototype.Qb;var m0=!1,y0=null,Kn=new Tt;function rr(){this.lq=0,this.F=100,this.ia=10,this.V=0,this.Zh=this.o=this.j=this.u=null}function Cn(){this.Pc=[],this.Oc=[],this.j=this.ob=mc,this.hb=this.Ib=0,this.Qp=h,this.Ha=1,this.V=this.ia=null,this.F=1,this.nb=this.o=this.u=null}function Re(t){ee(this),this.Me=null,this.uq=!0,this.Za=0,this.Hc=NaN,this.jj=0,this.hj=1/0,this.Kb=Bt,this.pa=this.pc=this.oa=0,this.be=null,this.oo=op,this.hg=Zn,this.lo=this.dg=null,this.mo=NaN,this.Ma=this.tj=null,this.Pm=!1,t&&(Object.assign(this,t),void 0!==t.column?(this.isRow=!1,this.index=t.column):void 0!==t.row&&(this.isRow=!0,this.index=t.row))}function pc(t,e){e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.dg=null===e.separatorPadding?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.tj=null,e.separatorDashArray&&(t.tj=Nn(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.be=e.be}function gc(t){if(t.sizing===op){var e=t.Me;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}nt.className="Panel",nt.definePanelLayout=bo,bo("Position",new tc),bo("Vertical",new ic),bo("Auto",new oc),bo("Link",new uc),rr.prototype.copy=function(){var t=new rr;return t.lq=this.lq,t.F=this.F,t.ia=this.ia,t.V=this.V,t.u=this.u,t.j=this.j,t.o=this.o,t.Zh=this.Zh,t},rr.className="GradPanelSettings",Cn.prototype.copy=function(t){for(var e=new Cn,i=this.Pc,n=i.length,o=e.Pc,r=0;r<n;r++)if(void 0!==i[r]){var l=i[r].copy();l.wi(t),o[r]=l}for(n=(i=this.Oc).length,o=e.Oc,r=0;r<n;r++)void 0!==i[r]&&((l=i[r].copy()).wi(t),o[r]=l);return e.ob=this.ob,e.j=this.j,e.Ib=this.Ib,e.hb=this.hb,e.Qp=this.Qp.J(),e.Ha=this.Ha,e.ia=this.ia,e.V=this.V,e.F=this.F,e.u=this.u,e.o=this.o,e.nb=this.nb,e},Cn.className="TablePanelSettings",Re.prototype.copy=function(){var t=new Re;return t.uq=this.uq,t.Za=this.Za,t.Hc=this.Hc,t.jj=this.jj,t.hj=this.hj,t.Kb=this.Kb,t.oa=this.oa,t.pc=this.pc,t.pa=this.pa,t.hg=this.hg,t.oo=this.oo,t.dg=null===this.dg?null:this.dg.J(),t.lo=this.lo,t.mo=this.mo,t.tj=null,null!==this.tj&&(t.separatorDashArray=Nn(this.separatorDashArray)),t.Ma=this.Ma,t.Pm=this.Pm,t.be=this.be,t},(v=Re.prototype).qb=function(t){t.classType===Re&&(this.sizing=t)},v.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Ae(this)},v.wi=function(t){this.Me=t},v.Io=function(t){var e=0,i=this.Me;if(this.index!==t&&(null===(t=this.separatorStroke)&&null!==i&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==i?this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:0))),null===(t=this.dg)){if(null===i)return e;t=i.defaultSeparatorPadding}return e+(this.isRow?t.top:t.left)},v.Wc=function(){var t=0,e=this.Me,i=0,n=this.isRow;if(null!==e&&e.type===nt.Table)for(var o=n?e.rowDefs.length:e.colDefs.length,r=0;r<o;r++){var l=n?e.rowDefs[r]:e.colDefs[r];if(void 0!==l&&0!==l.oa){i=l.index;break}}if(this.index!==i&&(null===(i=this.separatorStroke)&&null!==e&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==i&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(n=this.dg)){if(null===e)return t;n=e.defaultSeparatorPadding}return t+(this.isRow?n.top+n.bottom:n.left+n.right)},v.Pb=function(t,e,i){var n=this.Me;if(null!==n&&(n.cb(ve,t,this,e,i,void 0,void 0),null!==this.be&&null!==(e=n.diagram)&&!e.skipsModelSourceBindings&&null!==(n=n.ih())&&null!==(e=n.data)))for(i=this.be.iterator;i.next();)i.value.sp(this,e,t,n)},v.bind=function(t,e,i,n){var o=null;return(o="string"==typeof t?new Ee(t,e,i,n):t).xd=this,null!==(t=this.panel)&&null!==(e=t.ih())&&p0(e)&&it("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+o+" on "+t),null===this.be&&(this.be=new ot),this.be.add(o),this},Ot.Object.defineProperties(Re.prototype,{panel:{get:function(){return this.Me}},isRow:{get:function(){return this.uq},set:function(t){this.uq=t}},index:{get:function(){return this.Za},set:function(t){this.Za=t}},height:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(0>t&&le(t,">= 0",Re,"height"),this.Hc=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("height",e,t))}},width:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(0>t&&le(t,">= 0",Re,"width"),this.Hc=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("width",e,t))}},minimum:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&((0>t||!isFinite(t))&&le(t,">= 0",Re,"minimum"),this.jj=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("minimum",e,t))}},maximum:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(0>t&&le(t,">= 0",Re,"maximum"),this.hj=t,this.actual=this.oa,null!==this.panel&&this.panel.v(),this.Pb("maximum",e,t))}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(this.Kb=t.J(),null!==this.panel&&this.panel.v(),this.Pb("alignment",e,t))}},stretch:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,null!==this.panel&&this.panel.v(),this.Pb("stretch",e,t))}},separatorPadding:{get:function(){return this.dg},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.dg;null!==t&&null!==e&&e.D(t)||(null!==t&&(t=t.J()),this.dg=t,null!==this.panel&&this.panel.v(),this.Pb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(null!==t&&la(t,"RowColumnDefinition.separatorStroke"),t instanceof Kt&&t.freeze(),this.lo=t,null!==this.panel&&this.panel.v(),this.Pb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,null!==this.panel&&this.panel.v(),this.Pb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.tj},set:function(t){var e=this.tj;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||it("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.tj=t,null!==this.panel&&this.panel.N(),this.Pb("separatorDashArray",e,t)}}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(null!==t&&la(t,"RowColumnDefinition.background"),t instanceof Kt&&t.freeze(),this.Ma=t,null!==this.panel&&this.panel.N(),this.Pb("background",e,t))}},coversSeparators:{get:function(){return this.Pm},set:function(t){var e=this.Pm;e!==t&&(this.Pm=t,null!==this.panel&&this.panel.N(),this.Pb("coversSeparators",e,t))}},sizing:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,null!==this.panel&&this.panel.v(),this.Pb("sizing",e,t))}},actual:{get:function(){return this.oa},set:function(t){this.oa=isNaN(this.Hc)?Math.max(Math.min(this.hj,t),this.jj):Math.max(Math.min(this.hj,this.Hc),this.jj)}},measured:{get:function(){return this.pc},set:function(t){this.pc=t}},total:{get:function(){return this.oa+this.Wc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),Re.prototype.computeEffectiveSpacing=Re.prototype.Wc,Re.prototype.computeEffectiveSpacingTop=Re.prototype.Io;var op=new ut(Re,"Default",0),bh=new ut(Re,"None",1),mc=new ut(Re,"ProportionalExtra",2);function It(t,e){vt.call(this),this.Rd=this.ua=null,this.an="None",this.xc=this.Ui="black",this.ig=1,this.Na=this.Yg=null,this.Vn=this.Un=NaN,this.fa=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Os(t){null===t.Na?t.Na=new ap:t.Na.oc&&(t.Na=t.Na.copy())}function cl(t,e,i,n){var o=i.length;if(!(4>o)){var r=n.measuredBounds,l=Math.max(1,r.width);r=r.height;for(var p,m,x,b,M,A,u=i[0],c=i[1],L=0,D=te(),I=2;I<o;I+=2)0==(x=(p=i[I])-u)&&(x=.001),b=(u=(m=i[I+1])-c)/x,M=Math.atan2(u,x),A=Math.sqrt(x*x+u*u),D.push([x,M,b,A]),L+=A,u=p,c=m;u=i[0],c=i[1],x=n.measuredBounds.width,n instanceof It&&(x-=n.strokeWidth),1>x&&(x=1),o=i=x,m=0!=(p=l/2),x=(A=D[I=0])[0],M=A[1],b=A[2],A=A[3];for(var z=0;.1<=L;){if(0===z&&(m?(o=i,o-=p,L-=p,m=!1):o=i,0===o&&(o=1)),o>L)return void $t(D);o>A?(z=o-A,o=A):z=0;var X=Math.sqrt(o*o/(1+b*b));if(0>x&&(X=-X),t.translate(u+=X,c+=b*X),t.rotate(M),t.translate(-l/2,-r/2),0===z&&n.hh(t,e),t.translate(l/2,r/2),t.rotate(-M),t.translate(-u,-c),L-=o,A-=o,0!==z){if(++I===D.length)return void $t(D);x=(A=D[I])[0],M=A[1],b=A[2],A=A[3],o=z}}$t(D)}}function rp(t){var e=t.geometryStretch;return null!==t.Rd?e===Zn?Oe:e:e===Zn?sp[t.figure].defaultStretch:e}function yc(t,e,i,n,o){return(e=(t=i.x-t)*t+(e=i.y-e)*e)<n?(o.x=i.x,o.y=i.y,e):n}function vc(t,e,i,n,o,r,l,u,c){if(_.$(t,i)&&_.$(e,n)||_.$(o,l)&&_.$(r,u))return!1;var p=!1,m=(o-l)*(e-n)-(r-u)*(t-i);return 0!==m&&(c.x=((o*u-r*l)*(t-i)-(o-l)*(t*n-e*i))/m,c.y=((o*u-r*l)*(e-n)-(r-u)*(t*n-e*i))/m,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(c.y>t||_.$(c.y,t))&&(c.y<e||_.$(c.y,e))&&(p=!0)):(e=t<i?t:i,t=t<i?i:t,(c.x>e||_.$(c.x,e))&&(c.x<t||_.$(c.x,t))&&(p=!0)),p)}function Es(t,e,i,n){if(!t.rs(e,i,n))return!1;t=e.x,e=e.y;var o=i.x,r=i.y;return i=n.x,n=n.y,t===o?(e<r?(t=e,e=r):t=r,n>=t&&n<=e):(t<o?(n=t,t=o):n=o,i>=n&&i<=t)}function v0(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Nh,"None"!==t.toArrow?(t.segmentIndex=-1,t.alignmentFocus=Le):"None"!==t.fromArrow&&(t.segmentIndex=0,t.alignmentFocus=new f(1-Le.x,Le.y)))}function x0(t){var e=Do[t];if(void 0===e){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(e=Do[i])){var o,n=null;for(o in _.um)if(o.toLowerCase()===i){n=o;break}if(null!==n)return t=lt.parse(_.um[n],!1),Do[n]=t,i!==n&&(Do[i]=n),n}}return"string"==typeof e?e:e instanceof lt?t:null}Re.className="RowColumnDefinition",Re.Default=op,Re.None=bh,Re.ProportionalExtra=mc,Ut(It,vt),It.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.ua=this.ua,t.Rd=this.Rd,t.an=this.an,t.Ui=this.Ui,t.xc=this.xc,t.ig=this.ig,null!==this.Yg&&(t.Yg=Nn(this.Yg)),null!==this.Na&&(t.Na=this.Na.oc?this.Na:this.Na.copy()),t.Un=this.Un,t.Vn=this.Vn,null!==this.fa&&(t.fa=this.fa.copy())},(v=It.prototype).th=function(){vt.prototype.th.call(this),null!==this.Na&&(this.Na.oc=!0)},v.qb=function(t){t===Ne||t===xo||t===uh||t===Zn?this.geometryStretch=t:vt.prototype.qb.call(this,t)},v.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+Ae(this)},v.hh=function(t,e){var i=this.xc,n=this.Ui;if(null!==i||null!==n){var o=this.ua;if(null!==o){t.yc();var r=this.actualBounds,l=this.naturalBounds;null!==n&&un(this,t,n,!0,!1,l,r);var u=this.part,c=this.ig;if(null===i||0!==c||null===u||!this.isPanelMain&&u.Qb()!==this||(c=u.type===nt.Link&&u instanceof Vt&&"Selection"===u.category&&u.adornedObject instanceof It&&u.adornedPart.Qb()===u.adornedObject?u.adornedObject.strokeWidth:0),0===c&&(i=null),null!==i&&0!==c&&(un(this,t,i,!1,!1,l,r),t.lineWidth=c,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),r=!1,u&&e.Gf("drawShadows")&&(r=u.isShadowed),!1===t.Il&&(r=!1),u=!0,null===i||null!==n&&"transparent"!==n||(u=!1),l=!1,null!==(c=this.strokeDashArray)&&(l=!0,t.js(c,this.strokeDashOffset)),o.type===lt.j)t.beginPath(),t.moveTo(o.startX,o.startY),t.lineTo(o.endX,o.endY),null!==i&&t.ik(),t.Se();else if(o.type===lt.u){var p=o.startX;c=o.startY;var m=o.endX,x=o.endY;o=Math.min(p,m);var b=Math.min(c,x);p=Math.abs(m-p),c=Math.abs(x-c),t.beginPath(),t.rect(o,b,p,c),null!==n&&t.ng(n),null!==i&&(u&&r&&Oo(t),t.ik(),u&&r&&er(t)),t.Se()}else if(o.type===lt.F)p=o.startX,c=o.startY,m=o.endX,x=o.endY,o=Math.abs(m-p)/2,b=Math.abs(x-c)/2,p=Math.min(p,m)+o,c=Math.min(c,x)+b,t.beginPath(),t.moveTo(p,c-b),t.bezierCurveTo(p+_.wg*o,c-b,p+o,c-_.wg*b,p+o,c),t.bezierCurveTo(p+o,c+_.wg*b,p+_.wg*o,c+b,p,c+b),t.bezierCurveTo(p-_.wg*o,c+b,p-o,c+_.wg*b,p-o,c),t.bezierCurveTo(p-o,c-_.wg*b,p-_.wg*o,c-b,p,c-b),t.closePath(),null!==n&&t.ng(n),null!==i&&(u&&r&&Oo(t),t.ik(),u&&r&&er(t)),t.Se();else if(o.type===lt.o)for(c=(o=o.figures).length,b=0;b<c;b++){p=o.s[b],t.beginPath(),t.moveTo(p.startX,p.startY),x=(m=p.segments.s).length;for(var M=null,A=0;A<x;A++){var L=m[A];switch(L.type){case Wn:t.moveTo(L.endX,L.endY);break;case we:t.lineTo(L.endX,L.endY);break;case vn:t.bezierCurveTo(L.point1X,L.point1Y,L.point2X,L.point2Y,L.endX,L.endY);break;case vo:t.quadraticCurveTo(L.point1X,L.point1Y,L.endX,L.endY);break;case Ve:if(L.radiusX===L.radiusY){var D=Math.PI/180;t.arc(L.point1X,L.point1Y,L.radiusX,L.startAngle*D,(L.startAngle+L.sweepAngle)*D,0>L.sweepAngle,null!==M?M.endX:p.startX,null!==M?M.endY:p.startY)}else if(0===(D=(M=Qo(L,p)).length))t.lineTo(L.centerX,L.centerY);else for(var I=0;I<D;I++){var z=M[I];0===I&&t.lineTo(z[0],z[1]),t.bezierCurveTo(z[2],z[3],z[4],z[5],z[6],z[7])}break;case oo:if(I=D=0,null!==M&&M.type===Ve){if(0===(z=(M=Qo(M,p)).length)){t.lineTo(L.endX,L.endY);break}null!==(M=M[z-1]||null)&&(D=M[6],I=M[7])}else D=null!==M?M.endX:p.startX,I=null!==M?M.endY:p.startY;if(0===(D=(M=Ss(L,p,D,I)).length)){t.lineTo(L.endX,L.endY);break}for(I=0;I<D;I++)t.bezierCurveTo((z=M[I])[2],z[3],z[4],z[5],z[6],z[7]);break;default:it("Segment not of valid type: "+L.type)}L.isClosed&&t.closePath(),M=L}m=p.isFilled,r?p.isShadowed?(!0===m&&"transparent"!==n&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&(m&&u&&Oo(t),t.ik(),m&&u&&er(t))):(Oo(t),m&&"transparent"!==n&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&t.ik(),er(t)):(m&&null!==n&&t.ng(n,p.isEvenOdd),null!==i&&t.ik()),t.Se(b)}if(l&&t.fs(),null!==this.pathPattern){if((i=this.pathPattern).measure(1/0,1/0),i.arrange(0,0,(n=i.measuredBounds).width,n.height),r=this.geometry,t.save(),t.beginPath(),n=te(),r.type===lt.j)n.push(r.startX),n.push(r.startY),n.push(r.endX),n.push(r.endY),cl(t,e,n,i);else if(r.type===lt.o)for(r=r.figures.iterator;r.next();){for(u=r.value,n.length=0,n.push(u.startX),n.push(u.startY),c=l=u.startX,b=o=u.startY,m=(p=u.segments.s).length,x=0;x<m;x++){switch((A=p[x]).type){case Wn:cl(t,e,n,i),n.length=0,n.push(A.endX),n.push(A.endY),c=l=A.endX,b=o=A.endY;break;case we:n.push(A.endX),n.push(A.endY),l=A.endX,o=A.endY;break;case vn:_.Qe(l,o,A.point1X,A.point1Y,A.point2X,A.point2Y,A.endX,A.endY,.5,n),l=A.endX,o=A.endY;break;case vo:_.ep(l,o,A.point1X,A.point1Y,A.endX,A.endY,.5,n),l=A.endX,o=A.endY;break;case Ve:if(0===(M=(L=Qo(A,u)).length)){n.push(A.centerX),n.push(A.centerY),l=A.centerX,o=A.centerY;break}for(D=0;D<M;D++)_.Qe(l,o,(I=L[D])[2],I[3],I[4],I[5],I[6],I[7],.5,n),l=I[6],o=I[7];break;case oo:if(0===(M=(L=Ss(A,u,l,o)).length)){n.push(A.endX),n.push(A.endY),l=A.endX,o=A.endY;break}for(D=0;D<M;D++)_.Qe(l,o,(I=L[D])[2],I[3],I[4],I[5],I[6],I[7],.5,n),l=I[6],o=I[7];break;default:it("Segment not of valid type: "+A.type)}A.isClosed&&(n.push(c),n.push(b),cl(t,e,n,i))}cl(t,e,n,i)}else if(r.type===lt.u)n.push(r.startX),n.push(r.startY),n.push(r.endX),n.push(r.startY),n.push(r.endX),n.push(r.endY),n.push(r.startX),n.push(r.endY),n.push(r.startX),n.push(r.startY),cl(t,e,n,i);else if(r.type===lt.F){if((o=new oi).startX=r.endX,o.startY=(r.startY+r.endY)/2,(l=new _t(Ve)).startAngle=0,l.sweepAngle=360,l.centerX=(r.startX+r.endX)/2,l.centerY=(r.startY+r.endY)/2,l.radiusX=Math.abs(r.startX-r.endX)/2,l.radiusY=Math.abs(r.startY-r.endY)/2,o.add(l),0===(u=(r=Qo(l,o)).length))n.push(l.centerX),n.push(l.centerY);else for(l=o.startX,o=o.startY,c=0;c<u;c++)_.Qe(l,o,(b=r[c])[2],b[3],b[4],b[5],b[6],b[7],.5,n),l=b[6],o=b[7];cl(t,e,n,i)}$t(n),t.restore(),t.Vc(!1)}}}},v.jk=function(t,e,i){return!(!vt.prototype.jk.call(this,t,e,i)||null===this.xc&&null===this.Ui||null===this.ua||null!==this.pathPattern||this.geometry.figures.length!==this.svg.getElementsByTagName("path").length||(t.Hl=this.svg,this.hh(t,e),t.Hl=null,0))},v.mk=function(t){return null!==this.geometry&&1<this.geometry.figures.length||null!==this.pathPattern||vt.prototype.mk.call(this,t)},v.Ev=function(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("path");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},v.ga=function(t,e){if(void 0===e&&(e=new B),t instanceof f){t.Mc()&&it("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},v.mi=function(t){void 0===t&&(t=new $);var e=this.naturalBounds,i=this.oe;e=$.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Bc(n/2,n/2),n=B.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),ii(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),ii(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),ii(t,n.x,n.y,0,0),$.free(e),B.free(n),t},v.gh=function(t,e){var i=this.geometry;if(null===i||null===this.fill&&null===this.stroke)return!1;var n=i.bounds,o=this.strokeWidth/2;i.type!==lt.j||e||(o+=2);var r=$.alloc();if(r.assign(n),r.Bc(o+2,o+2),!r.ca(t))return $.free(r),!1;if(n=o+1e-4,i.type===lt.j)return!(null===this.stroke||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n))&&($.free(r),_.Zb(i.startX,i.startY,i.endX,i.endY,o,t.x,t.y));if(i.type===lt.u){e=i.startX;var l=i.startY,u=i.endX;if(i=i.endY,r.x=Math.min(e,u),r.y=Math.min(l,i),r.width=Math.abs(u-e),r.height=Math.abs(i-l),null===this.fill){if(r.Bc(-n,-n),r.ca(t))return $.free(r),!1;r.Bc(n,n)}return null!==this.stroke&&r.Bc(o,o),t=r.ca(t),$.free(r),t}if(i.type===lt.F){l=i.startX,o=i.startY,u=i.endX;var c=i.endY;if(i=Math.min(l,u),e=Math.min(o,c),l=Math.abs(u-l)/2,o=Math.abs(c-o)/2,i=t.x-(i+l),e=t.y-(e+o),null===this.fill){if(o-=n,0>=(l-=n)||0>=o||1>=i*i/(l*l)+e*e/(o*o))return $.free(r),!1;l+=n,o+=n}return null!==this.stroke&&(l+=n,o+=n),$.free(r),!(0>=l||0>=o)&&1>=i*i/(l*l)+e*e/(o*o)}if(i.type===lt.o)return $.free(r),null===this.fill?Lg(i,t.x,t.y,o):zd(i,t,o,1<this.strokeWidth,e);it("Unknown Geometry type: "+i.type)},v.Wl=function(t,e,i,n){var o=this.desiredSize,r=this.ig;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Rd)var l=this.geometry.bounds;else{var u=this.figure,c=sp[u];if(void 0===c){var p=_.Ze[u];"string"==typeof p&&(p=_.Ze[p]),"function"==typeof p?(c=p(null,100,100),sp[u]=c):it("Unsupported Figure: "+u)}l=c.bounds}u=l.width,c=l.height,p=l.width;var m=l.height;switch(lo(this,!0)){case Ne:n=i=0;break;case Oe:p=Math.max(t-r,0),m=Math.max(e-r,0);break;case gi:p=Math.max(t-r,0),n=0;break;case xi:i=0,m=Math.max(e-r,0)}isFinite(o.width)&&(p=o.width),isFinite(o.height)&&(m=o.height);var x=this.maxSize,b=this.minSize;switch(i=Math.max(i-r,b.width),n=Math.max(n-r,b.height),p=Math.min(x.width,p),m=Math.min(x.height,m),p=isFinite(p)?Math.max(i,p):Math.max(u,i),m=isFinite(m)?Math.max(n,m):Math.max(c,n),i=rp(this)){case Ne:break;case Oe:u=p,c=m;break;case xo:i=Math.min(p/u,m/c),isFinite(i)||(i=1),u*=i,c*=i;break;default:it(i+" is not a valid geometryStretch.")}null!==this.Rd?(0===u&&(u=.001),0===c&&(c=.001),n=u/(l=(i=null!==this.Rd?this.Rd:this.ua).bounds).width,l=c/l.height,isFinite(n)||(n=1),isFinite(l)||(l=1),this.ua=1===n&&1===l?i:i.copy().scale(n,l)):null!==this.ua&&_.$(this.ua.Rk,t-r)&&_.$(this.ua.Qk,e-r)||(this.ua=It.makeGeometry(this,u,c)),l=this.ua.bounds,t===1/0||e===1/0?this.Ge(l.x-r/2,l.y-r/2,0===t&&0===u?0:l.width+r,0===e&&0===c?0:l.height+r):this.Ge(-r/2,-r/2,p+r,m+r),o.w()?(p=o.width,m=o.height,p=Math.min(x.width,p),m=Math.min(x.height,m),p=Math.max(b.width,p),m=Math.max(b.height,m),this.ec.h(0,0,p,m)):this.ec.assign(l)},v.eh=function(t,e,i,n){Of(this,t,e,i,n)},v.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},v.Rj=function(t,e,i,n,o){var r=this.transform,l=1/(r.m11*r.m22-r.m12*r.m21),u=r.m22*l,c=-r.m12*l,p=-r.m21*l,m=r.m11*l,x=l*(r.m21*r.dy-r.m22*r.dx),b=l*(r.m12*r.dx-r.m11*r.dy);r=t*u+e*p+x,l=t*c+e*m+b,u=i*u+n*p+x,c=i*c+n*m+b,x=this.ig/2,null===(p=this.ua)&&(this.measure(1/0,1/0),p=this.ua);var M=p.bounds;if(m=!1,p.type===lt.j)if(1.5>=this.strokeWidth)m=_.Ve(p.startX,p.startY,p.endX,p.endY,r,l,u,c,o);else{if(p.startX===p.endX?(n=x,m=0):(e=(p.endY-p.startY)/(p.endX-p.startX),n=(m=x/Math.sqrt(1+e*e))*e),e=te(),t=new B,_.Ve(p.startX+n,p.startY+m,p.endX+n,p.endY+m,r,l,u,c,t)&&e.push(t),t=new B,_.Ve(p.startX-n,p.startY-m,p.endX-n,p.endY-m,r,l,u,c,t)&&e.push(t),t=new B,_.Ve(p.startX+n,p.startY+m,p.startX-n,p.startY-m,r,l,u,c,t)&&e.push(t),t=new B,_.Ve(p.endX+n,p.endY+m,p.endX-n,p.endY-m,r,l,u,c,t)&&e.push(t),0===(u=e.length))return $t(e),!1;for(m=!0,c=1/0,n=0;n<u;n++)(i=((t=e[n]).x-r)*(t.x-r)+(t.y-l)*(t.y-l))<c&&(c=i,o.x=t.x,o.y=t.y);$t(e)}else if(p.type===lt.u)m=_.Ff(M.x-x,M.y-x,M.x+M.width+x,M.y+M.height+x,r,l,u,c,o);else if(p.type===lt.F){t:if(0===(e=$.allocAt(M.x,M.y,M.width,M.height).Bc(x,x)).width)m=_.Ve(e.x,e.y,e.x,e.y+e.height,r,l,u,c,o);else if(0===e.height)m=_.Ve(e.x,e.y,e.x+e.width,e.y,r,l,u,c,o);else{if(n=e.x+(t=e.width/2),m=e.y+(p=e.height/2),i=9999,r!==u&&(i=(l-c)/(r-u)),9999>Math.abs(i)){if(0>t*t*i*i+p*p-(c=l-m-i*(r-n))*c){o.x=NaN,o.y=NaN,m=!1;break t}u=(-t*t*i*c+t*p*(x=Math.sqrt(t*t*i*i+p*p-c*c)))/(p*p+t*t*i*i)+n,t=(-t*t*i*c-t*p*x)/(p*p+t*t*i*i)+n,p=i*(u-n)+c+m,c=i*(t-n)+c+m,Math.abs((r-u)*(r-u))+Math.abs((l-p)*(l-p))<Math.abs((r-t)*(r-t))+Math.abs((l-c)*(l-c))?(o.x=u,o.y=p):(o.x=t,o.y=c)}else{if(u=p*p,0>(u-=u/(t*t)*(c=r-n)*c)){o.x=NaN,o.y=NaN,m=!1;break t}u=m+(c=Math.sqrt(u)),c=m-c,Math.abs(u-l)<Math.abs(c-l)?(o.x=r,o.y=u):(o.x=r,o.y=c)}m=!0}$.free(e)}else if(p.type===lt.o){b=B.alloc();var A=u-r,L=c-l,D=A*A+L*L,I=r,z=l;if(0<D&&M.contains(I,z)&&(b.x=I,b.y=z,this.ca(b)))for(0!==A&&.5>Math.abs(A)?(L*=.5/A,A=.5):0!==L&&.5>Math.abs(L)&&(A*=.5/L,L=.5),I-=A,z-=L;M.contains(I,z);)I-=A,z-=L;for(o.x=u,o.y=c,L=0;L<p.figures.count;L++)for(var X=p.figures.s[L],V=X.isFilled?I:r,Z=X.isFilled?z:l,J=X.segments,ct=M=X.startX,mt=A=X.startY,ft=0;ft<J.count;ft++){var at=J.s[ft],Q=at.type,Lt=at.endX,Ct=at.endY,Wt=!1;switch(Q){case Wn:ct=Lt,mt=Ct;break;case we:Wt=vc(M,A,Lt,Ct,V,Z,u,c,b);break;case vn:Wt=_.Eo(M,A,at.point1X,at.point1Y,at.point2X,at.point2Y,Lt,Ct,V,Z,u,c,.6,b);break;case vo:Wt=_.Eo(M,A,M+2/3*(at.point1X-M),A+2/3*(at.point1Y-A),Lt+2/3*(at.point1X-Lt),Ct+2/3*(at.point1Y-Ct),Lt,Ct,V,Z,u,c,.6,b);break;case Ve:case oo:var oe=(Q=at.type===Ve?Qo(at,X):Ss(at,X,M,A)).length;if(0===oe){Wt=vc(M,A,at.type===Ve?at.centerX:at.endX,at.type===Ve?at.centerY:at.endY,V,Z,u,c,b);break}for(Ct=null,Lt=0;Lt<oe;Lt++){if(Ct=Q[Lt],0===Lt&&vc(M,A,Ct[0],Ct[1],V,Z,u,c,b)){var qe=yc(V,Z,b,D,o);qe<D&&(D=qe,m=!0)}_.Eo(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5],Ct[6],Ct[7],V,Z,u,c,.6,b)&&(qe=yc(V,Z,b,D,o))<D&&(D=qe,m=!0)}Lt=Ct[6],Ct=Ct[7];break;default:it("Unknown Segment type: "+Q)}M=Lt,A=Ct,Wt&&(Wt=yc(V,Z,b,D,o))<D&&(D=Wt,m=!0),at.isClosed&&vc(M,A,Lt=ct,Ct=mt,V,Z,u,c,b)&&(at=yc(V,Z,b,D,o))<D&&(D=at,m=!0)}r=i-t,l=n-e,0!==(u=Math.sqrt(r*r+l*l))&&(r/=u,l/=u),o.x-=r*x,o.y-=l*x,B.free(b)}else it("Unknown Geometry type: "+p.type);return!!m&&(this.transform.Ga(o),!0)},v.fh=function(t,e){if(void 0===e)return t.Re(this.actualBounds);var i=this.ua;null===i&&(this.measure(1/0,1/0),i=this.ua),i=i.bounds;var n=this.strokeWidth/2,o=!1,r=B.alloc();return r.h(i.x-n,i.y-n),t.ca(e.Ga(r))&&(r.h(i.x-n,i.bottom+n),t.ca(e.Ga(r))&&(r.h(i.right+n,i.bottom+n),t.ca(e.Ga(r))&&(r.h(i.right+n,i.y-n),t.ca(e.Ga(r))&&(o=!0)))),B.free(r),o},v.Yc=function(t,e){if(this.fh(t,e)||void 0===e&&(e=this.transform,t.Re(this.actualBounds)))return!0;var i=zt.alloc();i.set(e),i.Uj();var n=t.left,o=t.right,r=t.top;t=t.bottom;var l=B.alloc();if(l.h(n,r),i.Ga(l),this.gh(l,!0)||(l.h(o,r),i.Ga(l),this.gh(l,!0))||(l.h(n,t),i.Ga(l),this.gh(l,!0))||(l.h(o,t),i.Ga(l),this.gh(l,!0)))return B.free(l),!0;var u=B.alloc(),c=B.alloc();return i.set(e),i.cv(this.transform),i.Uj(),u.x=o,u.y=r,u.transform(i),l.x=n,l.y=r,l.transform(i),e=!1,Es(this,l,u,c)?e=!0:(l.x=o,l.y=t,l.transform(i),Es(this,l,u,c)?e=!0:(u.x=n,u.y=t,u.transform(i),Es(this,l,u,c)?e=!0:(l.x=n,l.y=r,l.transform(i),Es(this,l,u,c)&&(e=!0)))),B.free(l),zt.free(i),B.free(u),B.free(c),e},v.ux=function(t,e,i){function n(D,I){for(var z=D.length,X=0;X<z;X+=2)if(I.zd(D[X],D[X+1])>o)return!0;return!1}if(i&&null!==this.fill&&this.gh(t,!0))return!0;var o=t.Bf(e),r=o;if(1.5<this.strokeWidth&&(o=this.strokeWidth/2+Math.sqrt(o),o*=o),null===(e=this.ua)&&(this.measure(1/0,1/0),null===(e=this.ua)))return!1;if(!i){var l=e.bounds,u=l.x,c=l.y,p=l.x+l.width;if(l=l.y+l.height,mo(t.x,t.y,u,c)<=o&&mo(t.x,t.y,p,c)<=o&&mo(t.x,t.y,u,l)<=o&&mo(t.x,t.y,p,l)<=o)return!0}if(u=e.startX,c=e.startY,p=e.endX,l=e.endY,e.type===lt.j){if(i=(u-p)*(t.x-p)+(c-l)*(t.y-l),yi(t.x,t.y,u,c,p,l)<=(0<=(p-u)*(t.x-u)+(l-c)*(t.y-c)&&0<=i?o:r))return!0}else{if(e.type===lt.u)return e=!1,i&&(e=yi(t.x,t.y,u,c,u,l)<=o||yi(t.x,t.y,u,c,p,c)<=o||yi(t.x,t.y,p,c,p,l)<=o||yi(t.x,t.y,u,l,p,l)<=o),e;if(e.type===lt.F){e=t.x-(u+p)/2,r=t.y-(c+l)/2;var m=Math.abs(p-u)/2,x=Math.abs(l-c)/2;if(0===m||0===x)return yi(t.x,t.y,u,c,p,l)<=o;if(!i)return!(mo(e,r,-m,0)>=o||mo(e,r,0,-x)>=o||mo(e,r,0,x)>=o||mo(e,r,m,0)>=o);if((t=_.az(m,x,e,r))*t<=o)return!0}else if(e.type===lt.o){if(r=(p=e.bounds).x,u=p.y,c=p.x+p.width,p=p.y+p.height,t.x>c&&t.x<r&&t.y>p&&t.y<u&&yi(t.x,t.y,r,u,r,p)>o&&yi(t.x,t.y,r,u,c,u)>o&&yi(t.x,t.y,c,p,r,p)>o&&yi(t.x,t.y,c,p,c,u)>o)return!1;if(r=Math.sqrt(o),!i){for(i=e.figures,e=0;e<i.count;e++){if(t.zd(l=(r=i.s[e]).startX,m=r.startY)>o)return!1;for(c=(u=r.segments.s).length,p=0;p<c;p++)switch(x=u[p],x.type){case Wn:case we:if(t.zd(l=x.endX,m=x.endY)>o)return!1;break;case vn:var b=te();if(_.Qe(l,m,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.8,b),l=n(b,t),$t(b),l||t.zd(l=x.endX,m=x.endY)>o)return!1;break;case vo:if(b=te(),_.ep(l,m,x.point1X,x.point1Y,x.endX,x.endY,.8,b),l=n(b,t),$t(b),l||t.zd(l=x.endX,m=x.endY)>o)return!1;break;case Ve:case oo:var M=(b=x.type===Ve?Qo(x,r):Ss(x,r,l,m)).length;if(0===M){if(t.zd(l=x.type===Ve?x.centerX:x.endX,m=x.type===Ve?x.centerY:x.endY)>o)return!1;break}x=null;for(var A=te(),L=0;L<M;L++)if(x=b[L],A.length=0,_.Qe(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],.8,A),n(A,t))return $t(A),!1;$t(A),null!==x&&(l=x[6],m=x[7]);break;default:it("Unknown Segment type: "+x.type)}}return!0}if(null===this.fill?Lg(e,t.x,t.y,r):zd(e,t,r,!0,!1))return!0}}return!1},v.rc=function(){this.ua=null},v.kq=function(){return this.ig},It.makeGeometry=function(t,e,i){if("None"!==t.toArrow)var n=Do[t.toArrow];else"None"!==t.fromArrow?n=Do[t.fromArrow]:("string"==typeof(n=_.Ze[t.figure])&&(n=_.Ze[n]),void 0===n&&it("Unknown Shape.figure: "+t.figure),(n=n(t,e,i)).Rk=e,n.Qk=i);if(null===n){var o=_.Ze.Rectangle;"function"==typeof o&&(n=o(t,e,i))}return n},Ot.Object.defineProperties(It.prototype,{geometry:{get:function(){return null!==this.ua?this.ua:this.Rd},set:function(t){var e=this.ua,i=this.Rd;if(e!==t){this.Rd=this.ua=null!==t?t.freeze():null;var n=this.part;null!==n&&(n.ag=NaN),this.v(),this.g("geometry",e||i,t),ra(this)&&null!==(t=this.part)&&Ps(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=lt.parse(t)).normalize();this.geometry=t,this.position=t=B.allocAt(-e.x,-e.y),B.free(t)}},isGeometryPositioned:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e!==t&&(null!==t&&la(t,"Shape.fill"),t instanceof Kt&&t.freeze(),this.Ui=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(null!==t&&la(t,"Shape.stroke"),t instanceof Kt&&t.freeze(),this.xc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ig},set:function(t){var e=this.ig;if(e!==t)if(0<=t){this.ig=t,this.v();var i=this.part;null!==i&&(i.ag=NaN),this.g("strokeWidth",e,t)}else le(t,"value >= 0",It,"strokeWidth:value")}},strokeCap:{get:function(){return null!==this.Na?this.Na.Hr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?le(t,'"butt", "round", or "square"',It,"strokeCap"):(Os(this),this.Na.Hr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return null!==this.Na?this.Na.Ir:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?le(t,'"miter", "bevel", or "round"',It,"strokeJoin"):(Os(this),this.Na.Ir=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return null!==this.Na?this.Na.Jr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){Os(this),this.Na.Jr=t,this.N();var i=this.part;null!==i&&(i.ag=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Yg},set:function(t){var e=this.Yg;if(e!==t){if(null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var r=t[o];0<=r&&isFinite(r)||it("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===e)return;t=null}}this.Yg=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return null!==this.Na?this.Na.uj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(Os(this),this.Na.uj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.an},set:function(t){var e=this.an;if(e!==t){var i=_.Ze[t];"function"==typeof i?i=t:(i=_.Ze[t.toLowerCase()])||it("Unknown Shape.figure: "+t),e!==i&&(null!==(t=this.part)&&(t.ag=NaN),this.an=i,this.Rd=null,this.rc(),this.v(),this.g("figure",e,i))}}},toArrow:{get:function(){return null!==this.Ua?this.Ua.V:"None"},set:function(t){var e=this.toArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=x0(t);null===i?it("Unknown Shape.toArrow: "+t):e!==i&&(null===this.Ua&&(this.Ua=new Qr),this.Ua.V=i,this.Rd=null,this.rc(),this.v(),v0(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return null!==this.Ua?this.Ua.j:"None"},set:function(t){var e=this.fromArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=x0(t);null===i?it("Unknown Shape.fromArrow: "+t):e!==i&&(null===this.Ua&&(this.Ua=new Qr),this.Ua.j=i,this.Rd=null,this.rc(),this.v(),v0(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return null!==this.Na?this.Na.fg:Bt},set:function(t){var e=this.spot1;e.D(t)||(t=t.J(),Os(this),this.Na.fg=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return null!==this.Na?this.Na.gg:Bt},set:function(t){var e=this.spot2;e.D(t)||(t=t.J(),Os(this),this.Na.gg=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Un},set:function(t){var e=this.Un;e!==t&&(this.Un=t,this.rc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Vn},set:function(t){var e=this.Vn;e!==t&&(this.Vn=t,this.rc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.ec}},pathPattern:{get:function(){return null!==this.Na?this.Na.br:null},set:function(t){var e=this.pathPattern;e!==t&&(Os(this),this.Na.br=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return null!==this.Na?this.Na.jq:Zn},set:function(t){var e=this.geometryStretch;e!==t&&(Os(this),this.Na.jq=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Sk:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new jo),this.fa.Sk=t;var i=this.diagram;null!==i&&this.panel===i.grid&&Cr(i),this.v(),null!==(i=this.panel)&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new jo),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new jo),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new jo),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}}}),It.prototype.intersectsRect=It.prototype.Yc,It.prototype.containedInRect=It.prototype.fh,It.prototype.getNearestIntersectionPoint=It.prototype.rs,It.prototype.getDocumentBounds=It.prototype.mi,It.prototype.getDocumentPoint=It.prototype.ga;var Do=new Ht,sp=new Ht;function ap(){this.oc=!1,this.Hr="butt",this.Ir="miter",this.Jr=10,this.uj=0,this.br=null,this.jq=Zn,this.gg=this.fg=Bt}function re(t,e){return vt.call(this),kc||(Yi=Un?new On(null).context:null,kc=!0),this.l|=2097152,this.fc="",this.xc="black",this.Ae="13px sans-serif",this.Lq=this.Db=this.Gc=0,this.da=this.fa=this.Gm=null,this.Ih=0,this.df=null,this.Le=0,this.ze=this.Rb=this.Qc=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function So(t){null===t.da?t.da=new pp:t.da.oc&&(t.da=t.da.copy())}function w0(t,e){t.l=6144|e.l,t.pb=e.opacity,t.Ma=e.background,t.areaBackground=e.areaBackground,t.jd=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),t.Mb=null!==e.Mb?e.Mb.copy():null,t.Ca=e.scale,t.Lb=e.angle,t.stretch=e.stretch,t.Kg=e.margin.J(),t.Kb=e.alignment.J(),t.rk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,null!==e.tb&&(t.tb=e.tb.copy()),t.shadowVisible=e.shadowVisible,t.fc=e.fc,t.xc=e.xc,t.Ae=e.Ae,null!==t.fa&&(t.fa=e.fa.copy()),null!==e.da&&(t.da=e.da.oc?e.da:e.da.copy()),t.Ih=e.Ih}function Sh(t,e,i){null===t.ze?(t.ze=e,t.Db=i):((null===t.Rb||null===t.Qc)&&(t.Rb=[],t.Qc=[],t.Rb.push(t.ze),t.Qc.push(t.Db)),t.Rb.push(e),t.Qc.push(i),t.Rb.length>t.maxLines&&(t.l|=16777216))}function lp(t,e,i,n){var o=t.formatting===Mh;o&&(e=e.trim());var r=0,l=t.Ae,u=t.spacingAbove+t.spacingBelow;u=Math.max(0,kh(t)+u);var c=t.overflow===bc?b0(l):0;if(t.Gc>=t.maxLines)null!==n&&n.h(0,u);else if(l=e,t.wrap===hp){t.Le=1;var p=Jn(e);if(0===c||p<=i)t.Db=Math.max(t.Db,p),Sh(t,e,t.Db),null!==n&&n.h(p,u);else{for(p=Jn((r=dl(t,l))+(e=dl(t,l=l.substr(r.length))));0<e.length&&p<=i;)p=(r+=e)+(e=dl(t,l=l.substr(e.length))),o&&(p=p.trim()),p=Jn(p);for(o&&(e=e.trim()),r+=e,i=Math.max(1,i-c);Jn(r)>i&&1<r.length;)r=r.substr(0,r.length-1);t.l|=16777216;var m=Jn(r+=Ch);t.Db=m,Sh(t,r,m),null!==n&&n.h(m,u)}}else{for(c=0,0===l.length&&(c=1,Sh(t,l,0));0<l.length;){for(e=dl(t,l),l=l.substr(e.length);Jn(e)>i;){var x=1;for(p=Jn(e.substr(0,x)),m=0;p<=i;)x++,m=p,p=Jn(e.substr(0,x));if(1===x){var b=p;r=Math.max(r,p)}else b=m,r=Math.max(r,m);if(1>--x&&(x=1),Sh(t,e.substr(0,x),b),c++,e=e.substr(x),t.Gc+c>t.maxLines)break}for(p=Jn(e+(m=dl(t,l)));0<m.length&&p<=i;)p=(e+=m)+(m=dl(t,l=l.substr(m.length))),o&&(p=p.trim()),p=Jn(p);if(o&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===m.length?(x=p,r=Math.max(r,p)):(x=m=Jn(e),r=Math.max(r,m)),Sh(t,e,x),c++,t.Gc+c>t.maxLines))break}t.Le=Math.min(t.maxLines,c),t.Db=Math.max(t.Db,r),null!==n&&n.h(t.Db,u*t.Le)}}function dl(t,e){if(t.wrap===M0)return e.substr(0,1);for(var i=e.length,n=0,o=Kv;n<i&&!o.test(e.charAt(n));)n++;for(t.formatting===C0&&(i=Math.min(i,n+1));n<i&&o.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function Jn(t){return null===Yi?8*t.length:Yi.measureText(t).width}function kh(t){if(null!==t.df)return t.df;var e=t.Ae;if(null===Yi){var i=16;return t.df=i}return void 0!==dp[e]&&5e3>A0?i=dp[e]:(i=1.3*Yi.measureText("M").width,dp[e]=i,A0++),t.df=i}function b0(t){if(null===Yi)return 6;if(void 0!==Sc[t]&&5e3>fp)var e=Sc[t];else e=Yi.measureText(Ch).width,Sc[t]=e,fp++;return e}function S0(t,e){var i=t.fc.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n=t.spacingAbove+t.spacingBelow;if(n=Math.max(0,kh(t)+n),0===i.length)return t.Db=0,t.Gc=1,n;if(!t.isMultiline){var o=i.indexOf("\n",0);0<=o&&(i=i.substr(0,o))}o=0;for(var l,r=t.Gc=0,u=!1;!u;){if(-1===(l=i.indexOf("\n",r))&&(l=i.length,u=!0),r<=l){if(r=i.substr(r,l-r),t.wrap!==hp){t.Le=0;var c=Pt.alloc();lp(t,r,e,c),o+=c.height,Pt.free(c),t.Gc+=t.Le}else lp(t,r,e,null),o+=n,t.Gc++;t.Gc===t.maxLines&&(u=!0)}r=l+1}return t.Lq=o}It.className="Shape",It.getFigureGenerators=function(){var e,t=new Tt;for(e in _.Ze)e!==e.toLowerCase()&&t.add(e,_.Ze[e]);return t.freeze(),t},It.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=_.Ze;n[t]=e,n[i]=t},It.getArrowheadGeometries=function(){var t=new Tt;for(n in _.um)if(void 0===Do[n]){var e=lt.parse(_.um[n],!1);Do[n]=e,(e=n.toLowerCase())!==n&&(Do[e]=n)}for(var i in Do)if(i!==i.toLowerCase()){var n=Do[i];n instanceof lt&&t.add(i,n)}return t.freeze(),t},It.defineArrowheadGeometry=function(t,e){var i;i="string"==typeof e?lt.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||it("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=Do;n[t]=i,n[e]=t},ap.prototype.copy=function(){var t=new ap;return t.Hr=this.Hr,t.Ir=this.Ir,t.Jr=this.Jr,t.uj=this.uj,t.br=this.br,t.jq=this.jq,t.fg=this.fg.J(),t.gg=this.gg.J(),t},Ut(re,vt),re.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.fc=this.fc,t.xc=this.xc,t.Ae=this.Ae,t.Gc=this.Gc,t.Db=this.Db,t.Lq=this.Lq,t.Gm=this.Gm,null!==this.fa&&(t.fa=this.fa.copy()),null!==this.da&&(t.da=this.da.oc?this.da:this.da.copy()),t.Ih=this.Ih,t.df=this.df,t.Le=this.Le,t.Qc=this.Qc,t.Rb=this.Rb,t.ze=this.ze},(v=re.prototype).th=function(){vt.prototype.th.call(this),null!==this.da&&(this.da.oc=!0)},v.qb=function(t){t.classType===re?this.wrap=t:vt.prototype.qb.call(this,t)},v.toString=function(){return 22<this.fc.length?'TextBlock("'+this.fc.substring(0,20)+'"...)':'TextBlock("'+this.fc+'")'},v.v=function(){vt.prototype.v.call(this)},v.hh=function(t,e){if(null!==this.xc&&0!==this.fc.length&&null!==this.Ae){var i=this.naturalBounds,n=this.actualBounds,o=i.width,r=i.height,l=kh(this),u=t.textAlign=this.textAlign,c=e.tn;"start"===u?u=c?"right":"left":"end"===u&&(u=c?"left":"right"),c=this.isUnderline;var p=this.isStrikethrough;un(this,t,this.xc,!0,!1,i,n),(c||p)&&un(this,t,this.xc,!1,!1,i,n),n=0,i=!1;var m=this.oe,x=m.dx-(l*m.m21+m.dx),b=e.scale;switch(8>(x*x+(m=m.dy-(l*m.m22+m.dy))*m)*b*b&&(i=!0),e.ib!==t&&(i=!1),e.ib instanceof $i&&(i=!1),!1===e.Gf("textGreeking")&&(i=!1),e=this.spacingAbove,x=this.spacingBelow,this.flip){case dh:t.translate(o,0),t.scale(-1,1);break;case ch:t.translate(0,r),t.scale(1,-1);break;case fh:t.translate(o,r),t.scale(-1,-1)}if(t.yc(),r>(b=(e+l+x)*(m=this.Gc))&&(n=(n=this.verticalAlignment).y*r-n.y*b+n.offsetY),1===m&&null!==this.ze)(x=this.Db)>o&&(x=o),this.Nj(this.ze,t,0,n+e,o,l,x,i,u,c,p);else if(null!==this.Qc&&null!==this.Rb)for(b=0;b<m;b++){var M=this.Qc[b];M>o&&(M=o),this.Nj(this.Rb[b],t,0,n+=e,o,l,M,i,u,c,p),n+=l+x}switch(this.flip){case dh:t.scale(-1,1),t.translate(-o,0);break;case ch:t.scale(1,-1),t.translate(0,-r);break;case fh:t.scale(-1,-1),t.translate(-o,-r)}}},v.Nj=function(t,e,i,n,o,r,l,u,c,p,m){var x=0;if(u)"left"===c?x=0:"right"===c?x=o-l:"center"===c&&(x=(o-l)/2),e.fillRect(i+x,n+.25*r,l,1);else{if("left"===c?x=0:"right"===c?x=o:"center"===c&&(x=o/2),o=null!==xc?xc(this,r):.75*r,e.fillText(t,i+x,n+o),0==(t=r/20|0)&&(t=1),"right"===c?x-=l:"center"===c&&(x-=l/2),p){c=i+x,p=n+(u=null!==wc?wc(this,r):.8*r),o=i+x+l,u=n+u;var b=t;e.beginPath(),e.lineWidth=b,e.moveTo(c,p),e.lineTo(o,u),e.stroke(),e.Se(),e instanceof $i&&e.ad.classList.add("gojs-td")}m&&(m=n+r-r/2.2|0,t%2!=0&&(m+=.5),n=i+x,r=m,i=i+x+l,l=m,x=t,e.beginPath(),e.lineWidth=x,e.moveTo(n,r),e.lineTo(i,l),e.stroke(),e.Se(),e instanceof $i&&e.ad.classList.add("gojs-td"))}},v.jk=function(t,e,i){if(!vt.prototype.jk.call(this,t,e,i))return!1;if(un(this,t,this.xc,!0,!1,this.naturalBounds,this.actualBounds),i){if(0===this.svg.getElementsByTagName("text").length)return!0;for(e=this.svg.getElementsByClassName("gojs-td"),i=0;i<e.length;i++)Qm(t,e[i],!1)}else(e=this.svg).innerHTML=this.text,Qm(t,e,!0);return!0},v.mk=function(t){return!!(1<this.lineCount||this.isUnderline||this.isStrikethrough)||vt.prototype.mk.call(this,t)},v.Ev=function(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("text");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},v.Wl=function(t,e,i,n){var o=this.Gc;this.Ih=t,this.l&=-16777217;var l,r=this.Ae;if(null!==Yi&&P0!==r&&(P0=Yi.font=r),this.Db=this.Le=0,this.ze=this.Rb=this.Qc=this.df=null,isNaN(this.desiredSize.width)){if(0===(r=this.fc.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)r=8;else if(this.isMultiline){for(var u=l=0,c=!1;!c;){var p=r.indexOf("\n",u);-1===p&&(p=r.length,c=!0),u=r.substr(u,p-u),this.formatting===Mh&&(u=u.trim()),l=Math.max(l,Jn(u)),u=p+1}r=l}else 0<=(l=r.indexOf("\n",0))&&(r=r.substr(0,l)),r=Jn(r);r=Math.min(r,t/this.scale)}else r=this.desiredSize.width;if(null!==this.panel&&(r=Math.min(r,this.panel.maxSize.width)),l=S0(this,r),c=l=isNaN(this.desiredSize.height)?Math.min(l,e/this.scale):this.desiredSize.height,0!==this.Db&&null!==this.Qc&&null!==this.Rb&&this.overflow===bc&&(e=this.Ae,e=this.overflow===bc?b0(e):0,p=this.spacingAbove+this.spacingBelow,p=Math.max(0,kh(this)+p),!((c=Math.min(this.maxLines-1,Math.max(Math.floor(c/p+.01)-1,0)))+1>=this.Rb.length))){for(this.l|=16777216,p=this.Rb[c],e=Math.max(1,t-e);Jn(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=Jn(p+=Ch),this.Rb[c]=p,this.Rb=this.Rb.slice(0,c+1),this.Qc[c]=e,this.Qc=this.Qc.slice(0,c+1),this.Le=this.Rb.length,this.Db=Math.max(this.Db,e),this.Gc=this.Le,1===this.Gc&&(this.ze=this.Rb[0])}(this.wrap===k0||isNaN(this.desiredSize.width))&&(r=isNaN(t)?this.Db:Math.min(t,this.Db)),r=Math.max(i,r),l=Math.max(n,l),Gn(this.ec,r,l),this.Ge(0,0,r,l),null!==this.svg&&o!==this.Gc&&(this.Uc=!0)},v.eh=function(t,e,i,n){Of(this,t,e,i,n)},Ot.Object.defineProperties(re.prototype,{font:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.df=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.fc},set:function(t){var e=this.fc;e!==(t=null!=t?t.toString():"")&&(this.fc=t,this.v(),this.g("text",e,t),this.Uc=!0)}},textAlign:{get:function(){return null!==this.da?this.da.Or:"start"},set:function(t){var e=this.textAlign;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(So(this),this.da.Or=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return null!==this.da?this.da.Xf:Ne},set:function(t){var e=this.flip;e!==t&&(So(this),this.da.Xf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return null!==this.da?this.da.Yr:fe},set:function(t){var e=this.verticalAlignment;e.D(t)||(t=t.J(),So(this),this.da.Yr=t,el(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.ec.w()){var t=Pt.alloc();lp(this,this.fc,999999,t);var e=t.width;Pt.free(t),t=S0(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),Gn(this.ec,e,t)}return this.ec}},isMultiline:{get:function(){return 0!=(2097152&this.l)},set:function(t){var e=0!=(2097152&this.l);e!==t&&(this.l^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return 0!=(4194304&this.l)},set:function(t){var e=0!=(4194304&this.l);e!==t&&(this.l^=4194304,this.Uc=!0,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return 0!=(8388608&this.l)},set:function(t){var e=0!=(8388608&this.l);e!==t&&(this.l^=8388608,this.Uc=!0,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return null!==this.da?this.da.$r:up},set:function(t){var e=this.wrap;e!==t&&(So(this),this.da.$r=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return null!==this.da?this.da.$q:cp},set:function(t){var e=this.overflow;e!==t&&(So(this),this.da.$q=t,this.v(),this.g("overflow",e,t))}},isOverflowed:{get:function(){return 0!=(16777216&this.l)}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(null!==t&&la(t,"TextBlock.stroke"),t instanceof Kt&&t.freeze(),this.xc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Gc}},lineHeight:{get:function(){return kh(this)}},editable:{get:function(){return 0!=(1048576&this.l)},set:function(t){var e=0!=(1048576&this.l);e!==t&&(this.l^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return null!==this.da?this.da.Qr:null},set:function(t){var e=this.textEditor;e!==t&&(So(this),this.da.Qr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return null!==this.da?this.da.Hd:null},set:function(t){var e=this.errorFunction;e!==t&&(So(this),this.da.Hd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Sk:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new jo),this.fa.Sk=t,this.v();var i=this.panel;null!==i&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new jo),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new jo),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return null!==this.fa?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(null===this.fa&&(this.fa=new jo),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new jo),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return null!==this.da?this.da.vj:null},set:function(t){var e=this.textValidation;e!==t&&(So(this),this.da.vj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return null!==this.da?this.da.Pr:null},set:function(t){var e=this.textEdited;e!==t&&(So(this),this.da.Pr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return null!==this.da?this.da.Dr:0},set:function(t){var e=this.spacingAbove;e!==t&&(So(this),this.da.Dr=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return null!==this.da?this.da.Er:0},set:function(t){var e=this.spacingBelow;e!==t&&(So(this),this.da.Er=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return null!==this.da?this.da.gq:Mh},set:function(t){var e=this.formatting;e!==t&&(So(this),this.da.gq=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return null!==this.da?this.da.Jq:1/0},set:function(t){var e=this.maxLines;e!==t&&(0>=(t=Math.floor(t))&&le(t,"> 0",re,"maxLines"),So(this),this.da.Jq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Qc?this.Qc:[this.Db],arrText:null!==this.Rb?this.Rb:[this.ze],maxLineWidth:this.Db,fontHeight:this.df}}},choices:{get:function(){return this.Gm},set:function(t){var e=this.Gm;e!==t&&(this.Gm=t,this.g("choices",e,t))}}});var fl,xc=null,wc=null,hp=new ut(re,"None",0),k0=new ut(re,"WrapFit",1),up=new ut(re,"WrapDesiredSize",2),M0=new ut(re,"WrapBreakAll",3),cp=new ut(re,"OverflowClip",0),bc=new ut(re,"OverflowEllipsis",1),Mh=new ut(re,"FormatTrim",0),C0=new ut(re,"FormatNone",0),Kv=/[ \u200b\u00ad]/,dp=new Ht,A0=0,Sc=new Ht,fp=0,Ch="...",P0="",Yi=null,kc=!1;function pp(){this.oc=!1,this.Hd=null,this.Xf=Ne,this.gq=Mh,this.Jq=1/0,this.$q=cp,this.Er=this.Dr=0,this.Or="start",this.vj=this.Qr=this.Pr=null,this.Yr=fe,this.$r=up}function jo(){this.Sk=1,this.u=0,this.j=1,this.o=this.F=null}function Xi(t,e){vt.call(this),this.Eg=null,this.qo="",this.Xg=ja,this.Mk=Oe,this.Zg=this.Hd=null,this.Lk=P,this.Xf=Ne,this.vl=null,this.qn=!1,this.en=!0,this.$k=!1,this.bt=this.rl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function pl(t){void 0===t&&(t=""),""!==t?fl[t]&&(delete fl[t],Mc--):(fl=new Ht,Mc=0)}function T0(t,e){e.sy||(e.Fq=function(i){e.sq=!0,e.ln=!1;var n=e.Bg.copy();if(null!=n){for(n=n.iterator;n.next();){var o=n.value;o.N();var r=e.getAttribute("src")||"",l=o.Og.I(r);if(null!==l)for(var u=l.length,c=0;c<u;c++)o.Xn.add(r=l[c]),r.Uc=!0,o.ac(),e.hn&&(void 0===e.eu&&(e.eu=i),null!==r.Zg&&r.Zg(r,i))}e.Bg.clear()}t.desiredSize.w()||(Sn(t,!1),t.v())},e.Yp=function(i){e.ln=i;var n=e.Bg.copy();if(null!=n){for(n=n.iterator;n.next();){var o=n.value,r=e.getAttribute("src")||"",l=o.Og.I(r);if(null!==l){o=l.length,r=te();for(var u=0;u<o;u++)r.push(l[u]);if(e.hn)for(u=0;u<o;u++)null!==(l=r[u]).Hd&&l.Hd(l,i);$t(r)}}e.Bg.clear()}},e.addEventListener("load",e.Fq),e.addEventListener("error",e.Yp),e.sy=!0)}re.className="TextBlock",pp.prototype.copy=function(){var t=new pp;return t.Hd=this.Hd,t.Xf=this.Xf,t.gq=this.gq,t.Jq=this.Jq,t.$q=this.$q,t.Dr=this.Dr,t.Er=this.Er,t.Or=this.Or,t.Pr=this.Pr,t.Qr=this.Qr,t.vj=this.vj,t.Yr=this.Yr,t.$r=this.$r,t},re.getEllipsis=function(){return Ch},re.setEllipsis=function(t){Ch=t,Sc=new Ht,fp=0},re.getBaseline=function(){return xc},re.setBaseline=function(t){xc=t},re.getUnderline=function(){return wc},re.setUnderline=function(t){wc=t},re.isValidFont=function(t){if(kc||(Yi=Un?new On(null).context:null,kc=!0),null===Yi)return!0;var e=Yi.font;if(t===e||"10px sans-serif"===t)return!0;Yi.font="10px sans-serif",Yi.font=t;var i=Yi.font;if("10px sans-serif"!==i)return Yi.font=e,!0;Yi.font="19px serif";var n=Yi.font;return Yi.font=t,i=Yi.font,Yi.font=e,i!==n},re.FormatNone=C0,re.FormatTrim=Mh,re.None=hp,re.OverflowClip=cp,re.OverflowEllipsis=bc,re.WrapBreakAll=M0,re.WrapDesiredSize=up,re.WrapFit=k0,jo.prototype.copy=function(){var t=new jo;return t.Sk=this.Sk,t.u=this.u,t.j=this.j,t.F=this.F,t.o=this.o,t},jo.className="GradElementSettings",Ut(Xi,vt),Xi.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.qo=this.qo,t.element=this.Eg,t.Xg=this.Xg.J(),t.Mk=this.Mk,t.Xf=this.Xf,t.Hd=this.Hd,t.Zg=this.Zg,t.Lk=this.Lk.J(),t.en=this.en,t.rl=this.rl},Xi.prototype.qb=function(t){t===Ne||t===xo||t===uh?this.imageStretch=t:vt.prototype.qb.call(this,t)},Xi.prototype.toString=function(){return"Picture("+this.source+")#"+Ae(this)},Xi.prototype.iA=function(){if(""!==this.source){pl(this.source);var t=this.source;this.source="",this.source=t}},Xi.prototype.redraw=function(){this.N(),this.Uc=!0},Xi.prototype.hh=function(t,e){var i=this.Eg;if(null!==i){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(null===n||""===n)||i.ln instanceof Event&&t instanceof Fs)){var o=t instanceof $i;n=this.naturalBounds;var r=0,l=0,u=this.qn,c=u?+i.width:i.naturalWidth;if(void 0===c&&i.videoWidth&&(c=i.videoWidth),void 0===(u=u?+i.height:i.naturalHeight)&&i.videoHeight&&(u=i.videoHeight),u=u||n.height,0!==(c=c||n.width)&&0!==u){var p=c,m=u;this.sourceRect.w()&&(r=this.Xg.x,l=this.Xg.y,c=this.Xg.width,u=this.Xg.height);var x=c,b=u,M=this.Mk,A=this.Lk;switch(M){case Ne:if(this.sourceRect.w())break;x>=n.width&&(r=r+A.offsetX+(x*A.x-n.width*A.x)),b>=n.height&&(l=l+A.offsetY+(b*A.y-n.height*A.y)),c=Math.min(n.width,x),u=Math.min(n.height,b);break;case Oe:x=n.width,b=n.height;break;case xo:case uh:M===xo?(x*=M=Math.min(n.height/b,n.width/x),b*=M):M===uh&&((x*=M=Math.max(n.height/b,n.width/x))>=n.width&&(r=(r+A.offsetX+(x*A.x-n.width*A.x)/x)*c),(b*=M)>=n.height&&(l=(l+A.offsetY+(b*A.y-n.height*A.y)/b)*u),c*=1/(x/n.width),u*=1/(b/n.height),x=n.width,b=n.height)}var L=x*(M=this.Df()*e.scale)*b*M,D=c*u/L,I=i.__goCache;if(M=null,!o){if(i.sq&&void 0!==I&&4<L&&D>Jv*Jv)for(null===I.gi&&(N0(I,4,p,m,i),N0(I,16,p,m,i)),p=(o=I.gi).length,m=0;m<p&&o[m].ratio*o[m].ratio<D;m++)M=o[m];if(!e.Xm){if(null===this.vl)if(null===this.Eg)this.vl=!1;else{o=new On(null).context;try{o.drawImage(this.Eg,0,0)}catch{this.en=!1}try{o.getImageData(0,0,1,1).data[3]&&(this.vl=!1),this.vl=!1}catch{this.vl=!0}}if(this.vl)return}}switch(o=x<n.width?A.offsetX+(n.width*A.x-x*A.x):0,A=b<n.height?A.offsetY+(n.height*A.y-b*A.y):0,this.flip){case dh:t.translate(Math.min(n.width,x),0),t.scale(-1,1);break;case ch:t.translate(0,Math.min(n.height,b)),t.scale(1,-1);break;case fh:t.translate(Math.min(n.width,x),Math.min(n.height,b)),t.scale(-1,-1)}if(t.yc(),e.Gf("pictureRatioOptimization")&&!e.$i&&void 0!==I&&null!==M&&1!==M.ratio){t.save(),e=M.ratio;try{t.drawImage(M.source,r/e,l/e,Math.min(M.source.width,c/e),Math.min(M.source.height,u/e),o,A,Math.min(n.width,x),Math.min(n.height,b)),t instanceof $i&&(this.bt=[r/e,l/e,Math.min(M.source.width,c/e),Math.min(M.source.height,u/e),o,A,Math.min(n.width,x),Math.min(n.height,b)])}catch{this.en=!1}t.restore()}else try{t.drawImage(i,r,l,c,u,o,A,Math.min(n.width,x),Math.min(n.height,b)),t instanceof $i&&(this.bt=[r,l,c,u,o,A,Math.min(n.width,x),Math.min(n.height,b)])}catch{this.en=!1}switch(this.flip){case dh:t.scale(-1,1),t.translate(-Math.min(n.width,x),0);break;case ch:t.scale(1,-1),t.translate(0,-Math.min(n.height,b));break;case fh:t.scale(-1,-1),t.translate(-Math.min(n.width,x),-Math.min(n.height,b))}}}}},Xi.prototype.Wl=function(t,e,i,n){var o=this.desiredSize,r=lo(this,!0),l=this.Eg,u=this.qn,c=0,p=0;(u||!this.$k&&l&&l.complete)&&(this.$k=!0),null===l?(isFinite(o.width)||(t=0),isFinite(o.height)||(e=0)):(c=u?+l.width:l.naturalWidth,p=u?+l.height:l.naturalHeight),isFinite(o.width)||r===Oe||r===gi?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:null!==l&&(t=c)),i=0):null!==l&&!1!==this.$k&&(t=this.sourceRect.w()?this.sourceRect.width:c),isFinite(o.height)||r===Oe||r===xi?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:null!==l&&(e=p)),n=0):null!==l&&!1!==this.$k&&(e=this.sourceRect.w()?this.sourceRect.height:p),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.maxSize,r=this.minSize,i=Math.max(i||0,r.width),n=Math.max(n||0,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),null===l||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Gn(this.ec,t,e),this.Ge(0,0,t,e)},Xi.prototype.eh=function(t,e,i,n){Of(this,t,e,i,n)},Ot.Object.defineProperties(Xi.prototype,{element:{get:function(){return this.Eg},set:function(t){var e=this.Eg;if(this.Uc=!0,e!==t){this.qn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;null===t||i||t instanceof HTMLVideoElement||this.qn||it("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;null!==n&&wf(n,this),this.Eg=t,null!==t&&i&&void 0===t.Bg&&(t.Bg=new rt),null!==n&&i&&xf(n,this),null!==t&&(this.qn||!0===t.complete?(t.hn&&(t.ln instanceof Event&&null!==this.Hd?this.Hd(this,t.ln):!0===t.sq&&!t.ln&&null!==this.Zg&&t.eu&&this.Zg(this,t.eu)),t.sq=!0,this.desiredSize.w()||(Sn(this,!1),this.v())):i&&T0(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.qo},set:function(t){var e=this.qo;if(e!==t){this.Uc=!0,this.qo=t;var i=fl;if(Un){var n=null;if(void 0!==i[t])n=i[t];else if(""!==t){30<Mc&&(pl(),i=fl),(n=kt("img")).hn=!0,T0(this,n);var o=this.rl;null!==o&&(n.crossOrigin=o(this)),n.src=t,i[t]=n,Mc++}this.element=n,null!==n&&void 0===n.__goCache&&(n.__goCache=new L0),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.rl},set:function(t){if(this.rl!==t&&(this.rl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e.D(t)||(this.Xg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Mk},set:function(t){var e=this.Mk;e!==t&&(this.Mk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Xf},set:function(t){var e=this.Xf;e!==t&&(this.Xf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Lk},set:function(t){var e=this.Lk;e.D(t)||(this.Lk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(this.Hd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.ec}}}),Xi.prototype.redraw=Xi.prototype.redraw,Xi.prototype.reloadSource=Xi.prototype.iA;var Mc=0,Jv=4;function L0(){this.gi=null}function N0(t,e,i,n,o){null===t.gi&&(t.gi=[]);var r=new On(null),l=r.context,u=1/e;r.width=i/e,r.height=n/e,0!==r.width&&0!==r.height&&(e=new F0(r.Oa,e),i=1,0<t.gi.length&&(o=(i=t.gi[t.gi.length-1]).source,i=i.ratio),l.setTransform(u*i,0,0,u*i,0,0),l.yc(),l.drawImage(o,0,0),t.gi.push(e))}function F0(t,e){this.source=t,this.ratio=e}function gl(){this.os=new lt,this.nc=null}function ml(t,e,i,n,o,r){t.nc=new oi,t.nc.startX=e,t.nc.startY=i,t.nc.isFilled=n,t.nc.isEvenOdd=r||!1,t.os.figures.add(t.nc),void 0!==o&&(t.nc.isShadowed=o)}function qv(t){var e=t.nc.segments.length;0<e&&t.nc.segments.M(e-1).close()}function Fr(t,e,i,n,o,r,l){var u;void 0===u&&(u=!1);var c=new _t(vn);c.point1X=e,c.point1Y=i,c.point2X=n,c.point2Y=o,c.endX=r,c.endY=l,u&&c.close(),t.nc.segments.add(c)}function Cc(t,e,i,n,o){var r;void 0===r&&(r=!1);var l=new _t(vo);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=o,r&&l.close(),t.nc.segments.add(l)}function $v(t,e,i,n,o,r,l,u){var c;void 0===c&&(c=!1),e=new _t(oo,l,u,e,i,n,o,r),c&&e.close(),t.nc.segments.add(e)}function I0(t){var e=Ac;return null!==e?(Ac=null,e.reset(t),e):((e=new gl).reset(t),e)}Xi.className="Picture",fl=new Ht,Xi.clearCache=pl,L0.className="PictureCacheArray",F0.className="PictureCacheInstance",gl.prototype.reset=function(t){null!==t?(t.ka(),this.os=t,t.figures.clear()):this.os=new lt,this.nc=null},gl.prototype.moveTo=function(t,e,i){void 0===i&&(i=!1);var n=new _t(Wn);n.endX=t,n.endY=e,i&&n.close(),this.nc.segments.add(n)},gl.prototype.lineTo=function(t,e,i){void 0===i&&(i=!1);var n=new _t(we);n.endX=t,n.endY=e,i&&n.close(),this.nc.segments.add(n)},gl.prototype.arcTo=function(t,e,i,n,o,r,l){void 0===r&&(r=0),void 0===l&&(l=!1);var u=new _t(Ve);u.startAngle=t,u.sweepAngle=e,u.centerX=i,u.centerY=n,u.radiusX=o,u.radiusY=0!==r?r:o,l&&u.close(),this.nc.segments.add(u)};var Ac=null;function wi(t,e){var i=t.toLowerCase(),n=_.Ze;n[t]=e,n[i]=t}function gp(){this.oc=!1,this.tr=this.Kp=this.zq=null,this.vr="",this.fr=this.oq=this.ur=null,this.hr="",this.gr=Na,this.ir=null,this.jr="",this.lr=Bt,this.Gq="",this.Hq=w,this.Pq=Wl,this.Kq=Aa,this.Up=null,this.Cq=127,this.zr=Ul,this.yr="gray",this.Vg=4}function wt(t,e){void 0===t||t instanceof We||"string"==typeof t?nt.call(this,t):(nt.call(this),t&&(e=t)),this.G=2408959,this.Tf="",this.P=null,this.Jg="",this.Qf=this.Ug=null,this.fc="",this.Ah=this.Ig=null,this.ke=new B(NaN,NaN).freeze(),this.nf=null,this.Ao=NaN,this.ww=-1,this.qy=new $,this.Rh=null,this.ag=NaN,e&&Object.assign(this,e)}function Hi(t){null===t.P?t.P=new gp:t.P.oc&&(t.P=t.P.copy())}function mp(t){16384&t.G&&(t.updateAdornments(),t.G&=-16385)}function Pc(t){if(!1===ts(t)){vp(t,!0),t.Tk();var e=t.diagram;null!==e&&(e.De.add(t),e.ac())}}function O0(t){if(t.G|=2097152,!1!==ts(t)){var e=t.position,i=t.location;i.w()&&e.w()||j0(t,e,i),i=t.Jb;var n=$.alloc().assign(i);i.ka(),i.x=e.x,i.y=e.y,i.freeze(),t.Xl(n,i),$.free(n),vp(t,!1)}}function Ir(t,e,i,n){void 0===n&&(n=new B),i=i.Mc()?P:i;var o=e.naturalBounds;if(n.h(o.width*i.x+i.offsetX,o.height*i.y+i.offsetY),null===e||e===t)return n;for(e.transform.Ga(n),e=e.panel;null!==e&&e!==t;)e.transform.Ga(n),e=e.panel;return null!==t.Mb&&t.Mb.Ga(n),n.offset(-t.uc.x,-t.uc.y),n}function E0(t){var e=B.alloc(),i=t.locationObject,n=i.naturalBounds,o=i instanceof It?i.strokeWidth:0;if(e.yi(0,0,n.width+o,n.height+o,t.locationSpot),i!==t)for(e.offset(-o/2,-o/2),i.transform.Ga(e),i=i.panel;null!==i&&i!==t;)i.transform.Ga(e),i=i.panel;return null!==t.Mb&&t.Mb.Ga(e),e.offset(-t.uc.x,-t.uc.y),e}function Ds(t,e){var i=t.qy;isNaN(t.ag)&&(t.ag=c0(t));var n=t.ag,o=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+o,e.height+2+o),i;n=e.x,o=e.y;var r=e.width;e=e.height;var l=t.shadowBlur;return r+=l,e+=l,n-=l/2,o-=l/2,0<(t=t.shadowOffset).x?r+=t.x:(n+=t.x,r-=t.x),0<t.y?e+=t.y:(o+=t.y,e-=t.y),i.h(n-1,o-1,r+2,e+2),i}function D0(t,e,i,n,o){null===e||t instanceof Vt||(e=e.animationManager).Ab&&$g(e,t,new B(n,o),i)}function j0(t,e,i){var n=E0(t),o=t.diagram,r=i.w(),l=e.w();r&&l?2097152&t.G?B0(t,e,i,o,n):z0(t,e,i,o,n):r?B0(t,e,i,o,n):l&&z0(t,e,i,o,n),t.G|=2097152,B.free(n),t.Tk()}function B0(t,e,i,n,o){var r=e.x,l=e.y;e.h(i.x-o.x,i.y-o.y),null!==n&&((n=(i=n.animationManager).defaultAnimation.isAnimating)||!i.Ab||t instanceof Vt||$g(i,t,new B(r,l),e),n||e.x===r&&e.y===l||t.g("position",new B(r,l),e.copy()))}function z0(t,e,i,n,o){var r=i.copy();i.h(e.x+o.x,e.y+o.y),i.D(r)||null===n||t.g("location",r,i.copy())}function R0(t,e,i){xp(t,!1),t instanceof dt&&Af(i,t),t.layer.isTemporary||e||i.Ya(),e=t.Jb;var n=i.viewportBounds;n.w()?es(t)?(ku(e,n)||t.Fd(!1),t.updateAdornments()):t.isVisible()&&e.Yc(n)?(t.Fd(!0),t.updateAdornments()):t.Xb():i.vd=!0}function yp(t,e,i,n){e.constructor===t.constructor||H0||(H0=!0,Pi('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),Pi("  Old class: "+io(t.constructor)+", new class: "+io(e.constructor)+", part: "+t.toString())),t.Dj();var o=t.data;i=t.layerName;var r=t.isSelected,l=t.isHighlighted,u=!0,c=!0,p=!1;t instanceof dt&&(u=t.isTreeLeaf,c=t.isTreeExpanded,p=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Tf=n,null!==t.svg&&(t.svg.remove(),t.svg=null,t.Uc=!0),t.v(),t.N(),n=!0,null!==(e=t.diagram)&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ub=o,t.G=r?4096|t.G:-4097&t.G,t.G=l?524288|t.G:-524289&t.G,t instanceof dt&&(t.R=u?4|t.R:-5&t.R,t.R=c?1|t.R:-2&t.R,t.R=p?2|t.R:-3&t.R),null!==o&&t.La(),(o=t.layerName)!==i&&(t.Jg=i,t.layerName=o),null!==e&&(e.skipsUndoManager=n),t.Zc()&&t.C(64)}function ts(t){return 0!=(32768&t.G)}function vp(t,e){t.G=e?32768|t.G:-32769&t.G}function xp(t,e){t.G=e?65536|t.G:-65537&t.G}function es(t){return 0!=(131072&t.G)}function Tc(t,e){t.G=e?1048576|t.G:-1048577&t.G}function wp(t,e){var i=e.containingGroup;return null!==i?1+wp(t,i):e instanceof dt&&null!==(e=e.labeledLink)?wp(t,e):0}function Y0(t,e){var i=e.containingGroup;return null!==i||e instanceof dt&&null!==(i=e.labeledLink)?Y0(t,i):e}function bp(t,e,i){if(e===i||null===i)return!1;var n=e.containingGroup;return!(null===n||n!==i&&!bp(t,n,i))||e instanceof dt&&null!==(e=e.labeledLink)&&bp(t,e,i)}function X0(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function is(t,e,i,n,o,r){if(void 0===r&&(r=null),!(t.contains(e)||null!==r&&!r(e)||e instanceof Vt))if(t.add(e),e instanceof dt){if(i&&e instanceof Nt)for(var l=e.memberParts;l.next();)is(t,l.value,i,n,o,r);if(!1!==o)for(l=e.linksConnected;l.next();){var u=l.value;if(!t.contains(u)){var c=u.fromNode,p=u.toNode;c=null===c||t.contains(c),p=null===p||t.contains(p),(o?c&&p:c||p)&&is(t,u,i,n,o,r)}}if(1<n)for(e=e.Pu();e.next();)is(t,e.value,i,n-1,o,r)}else if(e instanceof st)for(e=e.labelNodes;e.next();)is(t,e.value,i,n,o,r)}gl.className="StreamGeometryContext",wi("Rectangle",function(t,e,i){var n=_.Mf[t="r"+e+","+i];return void 0!==n||((n=new lt(lt.u)).endX=e,n.endY=i,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),wi("Square",function(t,e,i){var n=_.Mf[t="s"+e+","+i];return void 0!==n||((n=new lt(lt.u)).endX=e,n.endY=i,n.defaultStretch=xo,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),wi("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var n="rr"+e+","+i+","+(t=Math.min(t,i/3)),o=_.Mf[n];if(void 0!==o)return o;var r=t*_.wg;return o=(new lt).add(new oi(t,0,!0).add(new _t(we,e-t,0)).add(new _t(vn,e,t,e-r,0,e,r)).add(new _t(we,e,i-t)).add(new _t(vn,e-t,i,e,i-r,e-r,i)).add(new _t(we,t,i)).add(new _t(vn,0,i-t,r,i,0,i-r)).add(new _t(we,0,t)).add(new _t(vn,t,0,0,r,r,0).close())),1<r&&(o.spot1=new f(0,0,r,r),o.spot2=new f(1,1,-r,-r)),_.Nf<_.vm&&(_.Mf[n]=o,_.Nf++),o}),wi("Border","RoundedRectangle"),wi("Ellipse",function(t,e,i){var n=_.Mf[t="e"+e+","+i];return void 0!==n||((n=new lt(lt.F)).endX=e,n.endY=i,n.spot1=yo,n.spot2=Ri,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),wi("Circle",function(t,e,i){var n=_.Mf[t="c"+e+","+i];return void 0!==n||((n=new lt(lt.F)).endX=e,n.endY=i,n.spot1=yo,n.spot2=Ri,n.defaultStretch=xo,_.Nf<_.vm&&(_.Mf[t]=n,_.Nf++)),n}),wi("TriangleRight",function(t,e,i){return(new lt).add(new oi(0,0).add(new _t(we,e,.5*i)).add(new _t(we,0,i).close())).pm(0,.25,.5,.75)}),wi("TriangleDown",function(t,e,i){return(new lt).add(new oi(0,0).add(new _t(we,e,0)).add(new _t(we,.5*e,i).close())).pm(.25,0,.75,.5)}),wi("TriangleLeft",function(t,e,i){return(new lt).add(new oi(e,i).add(new _t(we,0,.5*i)).add(new _t(we,e,0).close())).pm(.5,.25,1,.75)}),wi("TriangleUp",function(t,e,i){return(new lt).add(new oi(e,i).add(new _t(we,0,i)).add(new _t(we,.5*e,0).close())).pm(.25,.5,.75,1)}),wi("Triangle","TriangleUp"),wi("Diamond",function(t,e,i){return(new lt).add(new oi(.5*e,0).add(new _t(we,0,.5*i)).add(new _t(we,.5*e,i)).add(new _t(we,e,.5*i).close())).pm(.25,.25,.75,.75)}),wi("LineH",function(t,e,i){return(t=new lt(lt.j)).startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),wi("LineV",function(t,e,i){return(t=new lt(lt.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),wi("None","Rectangle"),wi("BarH","Rectangle"),wi("BarV","Rectangle"),wi("MinusLine","LineH"),wi("PlusLine",function(t,e,i){return(new lt).add(new oi(0,i/2,!1).add(new _t(we,e,i/2)).add(new _t(Wn,e/2,0)).add(new _t(we,e/2,i)))}),wi("XLine",function(t,e,i){return(new lt).add(new oi(0,i,!1).add(new _t(we,e,0)).add(new _t(Wn,0,0)).add(new _t(we,e,i)))}),wi("LineRight",function(t,e,i){return(new lt).add(new oi(.25*e,0,!1).add(new _t(we,.75*e,.5*i)).add(new _t(we,.25*e,i)))}),wi("LineDown",function(t,e,i){return(new lt).add(new oi(0,.25*i,!1).add(new _t(we,.5*e,.75*i)).add(new _t(we,e,.25*i)))}),wi("LineLeft",function(t,e,i){return(new lt).add(new oi(.75*e,0,!1).add(new _t(we,.25*e,.5*i)).add(new _t(we,.75*e,i)))}),wi("LineUp",function(t,e,i){return(new lt).add(new oi(0,.75*i,!1).add(new _t(we,.5*e,.25*i)).add(new _t(we,e,.75*i)))}),_.um={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},gp.prototype.copy=function(){var t=new gp;return t.zq=this.zq,t.Kp=this.Kp,t.tr=this.tr,t.vr=this.vr,t.ur=this.ur,t.oq=this.oq,t.fr=this.fr,t.hr=this.hr,t.gr=this.gr.J(),t.ir=this.ir,t.jr=this.jr,t.lr=this.lr.J(),t.Gq=this.Gq,t.Hq=this.Hq.J(),t.Pq=this.Pq.J(),t.Kq=this.Kq.J(),t.Up=this.Up,t.Cq=this.Cq,t.zr=this.zr.J(),t.yr=this.yr,t.Vg=this.Vg,t},Ut(wt,nt),wt.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.G=-4097&this.G|49152,t.Tf=this.Tf,null!==this.P&&(t.P=this.P.oc?this.P:this.P.copy()),t.Jg=this.Jg,t.Qf=null,t.fc=this.fc,t.ke.assign(this.ke),t.Ao=this.Ao},(v=wt.prototype).Af=function(t){nt.prototype.Af.call(this,t),t.oh(),t.Ug=null,t.nf=null,t.Rh=null},v.toString=function(){var t=io(this.constructor)+"#"+Ae(this);return null!==this.data&&(t+="("+bi(this.data)+")"),t},v.th=function(){nt.prototype.th.call(this),null!==this.P&&(this.P.oc=!0)},v.fk=function(t,e,i,n,o,r,l){var u=this.diagram;null!==u&&(t===Ke&&"elements"===e?o instanceof nt?Is(o,function(c){Xp(u.partManager,c),km(u,c)}):xf(u,o):t===Qe&&"elements"===e&&(o instanceof nt?Is(o,function(c){Hp(u.partManager,c,u)}):wf(u,o)),u.cb(t,e,i,n,o,r,l))},v.La=function(t){if(nt.prototype.La.call(this,t),null!==this.data){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n];o instanceof nt&&Is(o,function(r){null!==r.data&&r.La()})}for(e=this.adornments;e.next();)e.value.La(t)}},wt.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},wt.prototype.Oj=function(t){var e=this.Qf;return null===e?null:e.I(t)},wt.prototype.bh=function(t,e){if(null!==e){var i=null,n=this.Qf;if(null!==n&&(i=n.I(t)),i!==e){if(null!==i){var o=i.diagram;null!==o&&o.remove(i)}null===n&&(this.Qf=n=new Tt),e.Tf!==t&&(e.category=t),n.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.ih())&&(e.data=t.data))}}},wt.prototype.Jf=function(t){var e=this.Qf;if(null!==e){var i=e.I(t);if(null!==i){var n=i.diagram;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.Qf=null)}},wt.prototype.Dj=function(){var t=this.Qf;if(null!==t){var e=te();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Jf(e[i]);$t(e)}},wt.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var i=e.value;i.v(),i.placeholder&&i.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.w()&&this.isVisible()&&e.Ed()&&e.actualBounds.w()){if(null===(i=this.Oj("Selection"))){if(null===(i=this.selectionAdornmentTemplate)&&(i=this.ph()?t.linkSelectionAdornmentTemplate:this instanceof Nt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Vt))break t;En(i),null!==(i=i.copy())&&(this.ph()&&this.selectionObject===this.path&&(i.type=nt.Link),i.adornedObject=e)}if(null!==i){i.type===nt.Link&&i.v(),this.bh("Selection",i);break t}}this.Jf("Selection")}for(function Qv(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.La()}},wt.prototype.Xb=function(){var t=this.diagram;null!==t&&(t.vd=!0,!(16384&this.G)&&(this.G|=16384))},wt.prototype.Ge=function(t,e,i,n){var o=this.uc;o.h(t,e,i,n),null===this.Mb&&(this.Mb=new zt);var r=this.Mb;r.reset(),this.no(r,t,e,i,n),this.Mb=r,r.ws()||r.pp(o)},wt.prototype.no=function(t,e,i,n,o){if(1!==this.Ca&&t.scale(this.Ca),0!==this.Lb){var r=P;this.locationSpot.sb()&&(r=this.locationSpot);var l=B.alloc();if(this.locationObject!==this)for(l.yi((i=(e=this.locationObject).naturalBounds).x,i.y,i.width,i.height,r),null!==e.Mb&&e.Mb.Ga(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),r=e.panel;null!==r&&r!==this;)null!==r.Mb&&r.Mb.Ga(l),l.offset(-r.measuredBounds.x,-r.measuredBounds.y),r=r.panel;else l.yi(e,i,n,o,r);t.rotate(this.Lb,l.x,l.y),B.free(l)}},wt.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},wt.prototype.moveTo=function(t,e,i){t=B.allocAt(t,e),this.move(t,i),B.free(t)},wt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.gv(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},wt.prototype.$b=function(t){var e=this.diagram;t?(this.C(4),this.Xb(),null!==e&&e.De.add(this)):(this.C(8),this.Dj()),this.oh(),null!==e&&(e.Ya(),e.N())},wt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Rh;if(null===e&&(this.Rh=e=new Tt),null!==e.I(t))return e.I(t);var i=nt.prototype.fb.call(this,t);return null!==i?(e.set(t,i),i):(e.set(t,null),null)},wt.prototype.mi=function(t){return void 0===t&&(t=new $),t.assign(this.actualBounds)},wt.prototype.Va=function(){this.measure(1/0,1/0),this.arrange()},wt.prototype.arrange=function(){if(!1===_n(this))O0(this);else{Ts(this,!1);var t=this.Jb,e=$.alloc();e.assign(t);var i=es(this);this.eh(0,0,this.uc.width,this.uc.height);var n=this.position;j0(this,n,this.location),t.ka(),t.x=n.x,t.y=n.y,t.freeze(),this.Xl(e,t),e.D(t)?this.Fd(i):!this.Zc()||_.B(e.width,t.width)&&_.B(e.height,t.height)||0<=this.ww&&this.C(16),$.free(e),vp(this,!1)}},(v=wt.prototype).Xl=function(t,e){var i=this.diagram;if(null!==i){var n=!1;if(!1===i.Zi&&t.w()){var o=$.alloc();o.assign(i.documentBounds),o.Gv(i.padding),t.x>o.x&&t.y>o.y&&t.right<o.right&&t.bottom<o.bottom&&e.x>o.x&&e.y>o.y&&e.right<o.right&&e.bottom<o.bottom&&(n=!0),$.free(o)}!(65536&this.G)&&t.D(e)||R0(this,n,i),i.N(),!t.w()&&!e.w()||Ea(t,e)||(this instanceof dt&&!i.undoManager.isUndoingRedoing&&this.Bd(),this.oh())}},v.Av=function(t,e,i){if(this.ph()||!t.w())return!1;var n=this.diagram;return null!==n&&D0(this,n,t,e,i),this.pa=t,this.G&=-2097153,!this.ke.w()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(this.ke=new B((n=this.ke).x+(t.x-e),n.y+(t.y-i)),this.g("location",n,this.ke.copy())),!1===ts(this)&&!1===_n(this)&&(Pc(this),O0(this)),!0},v.mm=function(t,e,i){var n=this.ke,o=this.pa;if(i){if(n.x===t&&n.y===e)return;ts(this)||_n(this)?o.h(NaN,NaN):o.h(o.x+t-n.x,o.y+e-n.y),n.h(t,e)}else{if(o.x===t&&o.y===e)return;n.h(n.x+t-o.x,n.y+e-o.y),o.h(t,e)}Pc(this)},v.Bv=function(){this.G&=-2097153,Pc(this)},v.si=function(){return!0},v.Zc=function(){return!0},v.ph=function(){return!1},v.Dd=function(){return!0},wt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},wt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},wt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},wt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},wt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},wt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},wt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},wt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},wt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(v=wt.prototype).Fd=function(t){this.G=t?131072|this.G:-131073&this.G},v.oh=function(){var t=this.containingGroup;null!==t&&(t.v(),null!==t.placeholder&&t.placeholder.v(),t.Bd())},v.N=function(){var t=this.diagram;null!==t&&!_n(this)&&!ts(this)&&this.isVisible()&&this.Jb.w()&&t.N(Ds(this,this.Jb))},v.v=function(){nt.prototype.v.call(this);var t=this.diagram;null!==t&&(t.De.add(this),this instanceof dt&&null!==this.labeledLink&&el(this.labeledLink),t.ac(!0))},v.Vo=function(t){t||null!==(t=this.Ah)&&Cp(t,this)},v.Wo=function(t){t||null!==(t=this.Ah)&&Ap(t,this)},v.Kj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.cm(t)}},v.pz=function(){return wp(this,this)},v.uz=function(){return Y0(this,this)},v.Td=function(t){return t instanceof Nt&&bp(this,this,t)},v.qx=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof Nt&&Tc(e,!0),e instanceof dt){var i=e.labeledLink;null!==i&&(e=i)}e=e.containingGroup}for(i=null,e=t;null!==e;){if(1048576&e.G){i=e;break}e instanceof dt&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof Nt&&Tc(e,!1),e instanceof dt&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return i},wt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof dt&&this.isLinkLabel)},wt.prototype.C=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&t&this.layoutConditions){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof dt&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.Ah)){var i=e.layout;null!==i?i.C():e.C(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.C()},Ot.Object.defineProperties(wt.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.wa(this.data)}},adornments:{get:function(){return null===this.Qf?Ft:this.Qf.iteratorValues}},layer:{get:function(){return this.Ig}},diagram:{get:function(){var t=this.Ig;return null==t?null:t.diagram}},layerName:{get:function(){return this.Jg},set:function(t){var e=this.Jg;if(e!==t){var i=this.diagram;if((null===i||null!==i.Pj(t)&&!i.partManager.addsToTemporaryLayer)&&(this.Jg=t,null!==i&&i.Ya(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(i=e.diagram)&&null!==(t=i.Pj(t))&&t!==e)){var n=e.qc(-1,this,!0);if(0<=n&&i.cb(Qe,"parts",e,this,null,n,!0),n=t.oi(99999999,this,!0),e.visible!==t.visible&&this.$b(t.visible),0<=n&&i.cb(Ke,"parts",t,null,this,!0,n),null!==(n=this.layerChanged)){var o=i.aa;i.aa=!0,n(this,e,t),i.aa=o}}}}},layerChanged:{get:function(){return null!==this.P?this.P.zq:null},set:function(t){var e=this.layerChanged;e!==t&&(Hi(this),this.P.zq=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Ao},set:function(t){var e=this.Ao;if(e!==t){this.Ao=t;var i=this.layer;null!==i&&ju(i,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.nf){var t=this.locationObjectName;""!==t?(t=this.fb(t),this.nf=null!==t?t:this):this.nf=this instanceof Vt&&this.type!==nt.Link&&null!==this.placeholder?this.placeholder:this}return this.nf.visible?this.nf:this}},minLocation:{get:function(){return null!==this.P?this.P.Pq:Wl},set:function(t){var e=this.minLocation;e.D(t)||(t=t.J(),Hi(this),this.P.Pq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return null!==this.P?this.P.Kq:Aa},set:function(t){var e=this.maxLocation;e.D(t)||(t=t.J(),Hi(this),this.P.Kq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return null!==this.P?this.P.Gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Hi(this),this.P.Gq=t,this.nf=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return null!==this.P?this.P.Hq:w},set:function(t){var e=this.locationSpot;e.D(t)||(t=t.J(),Hi(this),this.P.Hq=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ke},set:function(t){var e=t.x,i=t.y,n=this.ke;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(e=t=t.copy(),this.ph())e=!1;else{if(this.ke=e,this.G|=2097152,!1===_n(this)&&(Pc(this),(i=this.pa).w())){var o=this.diagram;if(null===o||o.animationManager.isTicking||!o.undoManager.isUndoingRedoing){var r=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),D0(this,o,i,r.x,r.y),this.g("position",r,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Tf},set:function(t){var e=this.Tf;if(e!==t){null!==this.svg&&(this.svg.remove(),this.Uc=!0);var i=this.diagram,n=this.data,o=null;if(null!==i&&null!==n&&!(this instanceof Vt)){var r=i.model.undoManager;r.isEnabled&&!r.isUndoingRedoing&&(o=this.clone()).O.addAll(this.O)}this.Tf=t,this.g("category",e,t),null===i||null===n||this instanceof Vt?this instanceof Vt&&null!==(o=this.adornedPart)&&(null!==(t=o.Qf)&&t.remove(e),o.bh(this.category,this)):(r=i.model).undoManager.isUndoingRedoing||(this.ph()?(i.partManager.setLinkCategoryForData(n,t),null!==(i=i.partManager.findLinkTemplateForCategory(t))&&(En(i),null!==(i=i.copy())&&yp(this,i,e,t))):(null!==r&&r.jm(n,t),null!==(i=py(i.partManager,n,t))&&(En(i),null===(i=i.copy())||i instanceof st||(n=this.location.copy(),yp(this,i,e,t),this.location.w()||(this.location=n)))),null!==o&&((e=this.clone()).O.addAll(this.O),this.g("self",o,e)))}}},self:{get:function(){return this},set:function(t){yp(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Xb())}},groupable:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Xb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);if(e!==t){this.G^=64;var i=this.diagram;null!==i&&i.Ya(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.G)},set:function(t){var e=0!=(256&this.G);e!==t&&(this.G^=256,this.g("selectable",e,t),this.Xb())}},reshapable:{get:function(){return 0!=(512&this.G)},set:function(t){var e=0!=(512&this.G);e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Xb())}},resizable:{get:function(){return 0!=(1024&this.G)},set:function(t){var e=0!=(1024&this.G);e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Xb())}},rotatable:{get:function(){return 0!=(2048&this.G)},set:function(t){var e=0!=(2048&this.G);e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Xb())}},isSelected:{get:function(){return 0!=(4096&this.G)},set:function(t){var e=0!=(4096&this.G);if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.maxSelectionCount)){this.G^=4096;var n=!1;if(null!==i){n=i.skipsUndoManager,i.skipsUndoManager=!0;var o=i.selection;o.ka(),t?o.add(this):o.remove(this),o.freeze()}this.g("isSelected",e,t),this.Xb(),null!==(t=this.selectionChanged)&&t(this),null!==i&&(i.ac(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return 0!=(524288&this.G)},set:function(t){var e=0!=(524288&this.G);if(e!==t){this.G^=524288;var i=this.diagram;null!==i&&((i=i.highlighteds).ka(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.G)},set:function(t){var e=0!=(8192&this.G);e!==t&&(this.G^=8192,this.Uc=!0,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.G)},set:function(t){var e=0!=(262144&this.G);e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return null!==this.P?this.P.oq:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Hi(this),this.P.oq=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return null!==this.P?this.P.vr:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Hi(this),this.P.vr=t,this.Ug=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return null!==this.P?this.P.tr:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Hi(this),this.P.tr=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.Ug){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.fb(t),this.Ug=null!==t?t:this):this.Ug=this instanceof st&&null!==(t=this.path)?t:this}return this.Ug}},selectionChanged:{get:function(){return null!==this.P?this.P.ur:null},set:function(t){var e=this.selectionChanged;e!==t&&(Hi(this),this.P.ur=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return null!==this.P?this.P.fr:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Hi(this),this.P.fr=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return null!==this.P?this.P.hr:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Hi(this),this.P.hr=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},resizeCellSize:{get:function(){return null!==this.P?this.P.gr:Na},set:function(t){var e=this.resizeCellSize;e.D(t)||(t=t.J(),Hi(this),this.P.gr=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return null!==this.P?this.P.ir:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Hi(this),this.P.ir=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return null!==this.P?this.P.jr:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Hi(this),this.P.jr=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},rotationSpot:{get:function(){return null!==this.P?this.P.lr:Bt},set:function(t){var e=this.rotationSpot;e.D(t)||(t=t.J(),Hi(this),this.P.lr=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.fc},set:function(t){var e=this.fc;e!==t&&(this.fc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Ah},set:function(t){if(this.Zc()){var e=this.Ah;if(e!==t){null===t||this!==t&&!t.Td(this)||(this===t&&it("Cannot make a Group a member of itself: "+this.toString()),it("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(null!==e?Ap(e,this):this instanceof Nt&&null!==i&&i.ai.remove(this),this.Ah=t,null!==t?Cp(t,this):this instanceof Nt&&null!==i&&i.ai.add(this),this.C(1),null!==i&&i.aa){var n=this.data,o=i.model;if(null!==n&&o.Wj()){var r=o.wa(null!==t?t.data:null);o.mp(n,r)}}if(null!==(n=this.containingGroupChanged)&&(o=!0,null!==i&&(o=i.aa,i.aa=!0),n(this,e,t),null!==i&&(i.aa=o)),this instanceof Nt)for(is(i=new rt,this,!0,0,!0),i=i.iterator;i.next();)if((n=i.value)instanceof dt)for(n=n.linksConnected;n.next();)yl(n.value);if(this instanceof dt){for(i=this.linksConnected;i.next();)yl(i.value);null!==(i=this.labeledLink)&&yl(i)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&ju(e,-1,t)}}else it("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return null!==this.P?this.P.Kp:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Hi(this),this.P.Kp=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof dt&&null!==this.labeledLink)}},layoutConditions:{get:function(){return null!==this.P?this.P.Cq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Hi(this),this.P.Cq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return null!==this.P?this.P.Up:null},set:function(t){var e=this.dragComputation;e!==t&&(Hi(this),this.P.Up=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return null!==this.P?this.P.zr:Ul},set:function(t){var e=this.shadowOffset;e.D(t)||(t=t.J(),Hi(this),this.P.zr=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return null!==this.P?this.P.yr:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Hi(this),this.P.yr=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return null!==this.P?this.P.Vg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Hi(this),this.P.Vg=t,this.N(),this.g("shadowBlur",e,t))}}}),wt.prototype.invalidateLayout=wt.prototype.C,wt.prototype.findCommonContainingGroup=wt.prototype.qx,wt.prototype.isMemberOf=wt.prototype.Td,wt.prototype.findTopLevelPart=wt.prototype.uz,wt.prototype.findSubGraphLevel=wt.prototype.pz,wt.prototype.ensureBounds=wt.prototype.Va,wt.prototype.getDocumentBounds=wt.prototype.mi,wt.prototype.findObject=wt.prototype.fb,wt.prototype.moveTo=wt.prototype.moveTo,wt.prototype.invalidateAdornments=wt.prototype.Xb,wt.prototype.clearAdornments=wt.prototype.Dj,wt.prototype.removeAdornment=wt.prototype.Jf,wt.prototype.addAdornment=wt.prototype.bh,wt.prototype.findAdornment=wt.prototype.Oj,wt.prototype.updateTargetBindings=wt.prototype.La;var H0=!1;function Vt(t,e){void 0===t||t instanceof We||"string"==typeof t?wt.call(this,t):(wt.call(this),t&&(e=t)),this.G&=-257,this.Jg="Adornment",this.ue=null,this.Bw=0,this.Vw=!1,this.j=this.$a=null,e&&Object.assign(this,e)}function Sp(){this.oc=!1,this.Vr=this.gj=this.Eq=this.Dq=null,this.yp=d,this.er=Fc,this.Kr=this.ij=this.Nq=this.Mq=null}function dt(t,e){void 0===t||t instanceof We||"string"==typeof t?wt.call(this,t):(wt.call(this),t&&(e=t)),this.R=13,this.Ba=null,this.jb=new ot,this.wc=this.af=this.Xk=null,this.ci=!1,e&&Object.assign(this,e)}function Or(t){null===t.Ba?t.Ba=new Sp:t.Ba.oc&&(t.Ba=t.Ba.copy())}function V0(t,e){null!==e&&(null===t.af&&(t.af=new rt),t.af.add(e))}function G0(t,e,i,n){if(null===e||null===t.af)return null;for(var o=t.af.iterator;o.next();){var r=o.value;if(r.Ds===t&&r.dv===e&&r.Px===i&&r.Qx===n||r.Ds===e&&r.dv===t&&r.Px===n&&r.Qx===i)return r}return null}function W0(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Qi(i.fromPort),Qi(i.toPort),i.bb())}}function Qi(t){if(null!==t){var e=t.Zn;null!==e&&e.Sl(),null===(e=(t=t.part).containingGroup)||t.isVisible()||Qi(e.port)}}function U0(t,e,i,n){if(null!==e&&!i.has(e)){i.add(e);var o=!0,r=t.diagram;null!==r&&(o=r.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(o?l.fromNode===e:l.toNode===e)&&U0(t,o?l.toNode:l.fromNode,i,n):n.add(l)})}}function Lc(t,e,i){Qi(i);var n=t.jb.contains(e);if(n||t.jb.add(e),!n||e.fromNode===e.toNode){var o=t.linkConnected;if(null!==o){var r=!0,l=t.diagram;null!==l&&(r=l.aa,l.aa=!0),o(t,e,i),null!==l&&(l.aa=r)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,null!==i&&null!==e&&i!==e&&(n=!0,null!==(t=t.diagram)&&(n=t.isTreePathToChildren),r=n?i:e,(o=n?e:i).ci||(o.ci=r),!r.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(n?i===r&&(r.isTreeLeaf=!1):e===r&&(r.isTreeLeaf=!1))))}function Nc(t,e,i){Qi(i);var n=t.jb.remove(e),o=null;if(n||e.toNode===e.fromNode){var r=t.linkDisconnected;if(o=t.diagram,null!==r){var l=!0;null!==o&&(l=o.aa,o.aa=!0),r(t,e,i),null!==o&&(o.aa=l)}}n&&e.isTreeLink&&(i=!0,null!==o&&(i=o.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,null!==t&&(t.ci=!1),null===e||e.isTreeLeaf||(0===e.jb.count?(e.ci=null,null!==o&&o.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Ah(e)))}function Ah(t){if(t.ci=!1,0!==t.jb.count){var e=!0,i=t.diagram;if(null===i||!i.undoManager.isUndoingRedoing){for(null!==i&&(e=i.isTreePathToChildren),i=t.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink)if(e){if(n.fromNode===t)return void(t.isTreeLeaf=!1)}else if(n.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Z0(t){null===t.wc?t.wc=new Tt:t.wc.clear(),t.qm(t,function(e,i){_0(e,i)}),0===t.wc.count&&t.wc.add("",t)}function _0(t,e){var i=e.portId;null!==i&&null!==t.wc&&t.wc.add(i,e)}function kp(t,e,i){var n=e.portId;if(null!==n&&(null!==t.wc&&t.wc.remove(n),null!==(e=t.diagram)&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,null===i&&(i=te()),i.push(n);if(null!==i){for(t=0;t<i.length;t++)e.remove(i[t]);$t(i)}}}function K0(t,e){return null===(e=e.pg())?0:1+K0(t,e)}function J0(t,e,i,n,o,r,l){if(1<n)for(var u=i?t.Mo():t.Sd();u.next();){var c=u.value;c.isTreeLink&&(null===(c=c.To(t))||c===t||e.contains(c)||(e.add(c),J0(c,e,i,n-1,o,r,l)))}else q0(t,e,i,o,r,l)}function q0(t,e,i,n,o,r){for(var l=o===t||t.isTreeExpanded,u=i?t.Mo():t.Sd(),c={};u.next();){var p=u.value;if(p.isTreeLink&&null!==(p=p.To(t))&&p!==t){var m=e.contains(p);if(m||e.add(p),l){var x=i?p.Oo():p.Po();c.vv=t,x.all(function(b){return function(M){return M===b.vv||!M.isTreeExpanded}}(c))&&n.Aj(p,o),p.oh(),p.$b(!1)}p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,m||q0(p,e,i,n,o,r))}c={vv:c.vv}}t.isTreeExpanded=!1}function $0(t,e,i,n,o,r,l){for(var u=r!==t&&t.isTreeExpanded,c=i?t.Mo():t.Sd(),p={};c.next();){var m=c.value;if(m.isTreeLink&&(u||m.fd||m.bb(),null!==(m=m.To(t))&&m!==t&&!e.contains(m))){if(e.add(m),!u){m.$b(!0),m.oh();var x=i?m.Oo():m.Po();p.wv=t,x.all(function(b){return function(M){return M===b.wv||!M.isTreeExpanded}}(p))&&o.Cj(m,r)}(2<n||m.wasTreeExpanded)&&(m.wasTreeExpanded=!1,$0(m,e,i,n-1,o,r,l))}p={wv:p.wv}}t.isTreeExpanded=!0}wt.className="Part",wt.LayoutNone=0,wt.LayoutAdded=1,wt.LayoutRemoved=2,wt.LayoutShown=4,wt.LayoutHidden=8,wt.LayoutNodeSized=16,wt.LayoutGroupLayout=32,wt.LayoutNodeReplaced=64,wt.LayoutStandard=127,wt.LayoutAll=16777215,Ut(Vt,wt),Vt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Vt.prototype.updateRelationshipsFromData=function(){},Vt.prototype.Ul=function(t){var e=this.adornedObject,i=e?.part;if(i instanceof st&&e instanceof It){e=i.path,i.Ul(t),t=e.geometry,e=(i=this.O.s).length;for(var n=0;n<e;n++){var o=i[n];o.isPanelMain&&o instanceof It&&(o.ua=t)}}},Vt.prototype.si=function(){var t=this.ue;return null===t||null===(t=t.part)||!_n(t)},Vt.prototype.Zc=function(){return!1},Vt.prototype.fk=function(t,e,i,n,o,r,l){if(t===Ke&&"elements"===e){if(o instanceof Ii)null===this.$a&&(this.$a=o);else if(o instanceof nt){var u=o.Nl(function(c){return c instanceof Ii});u instanceof Ii&&null===this.$a&&(this.$a=u)}}else t===Qe&&"elements"===e&&null!==this.$a&&(n===this.$a||n instanceof nt&&this.$a.rg(n))&&(this.$a=null);wt.prototype.fk.call(this,t,e,i,n,o,r,l)},Vt.prototype.updateAdornments=function(){},Vt.prototype.Kj=function(){},Ot.Object.defineProperties(Vt.prototype,{placeholder:{get:function(){return this.$a}},adornedObject:{get:function(){return this.ue},set:function(t){var e=this.adornedPart,i=null;null!==t&&(i=t.part),null===e||null!==t&&e===i||e.Jf(this.category),this.ue=t,null!==i&&i.bh(this.category,this)}},adornedPart:{get:function(){var t=this.ue;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),Vt.className="Adornment",Sp.prototype.copy=function(){var t=new Sp;return t.Dq=this.Dq,t.Eq=this.Eq,t.gj=this.gj,t.Vr=this.Vr,t.yp=this.yp.J(),t.er=this.er,t.Mq=this.Mq,t.Nq=this.Nq,t.ij=this.ij,t.Kr=this.Kr,t},Ut(dt,wt),dt.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.R=this.R,null!==this.Ba&&(t.Ba=this.Ba.oc?this.Ba:this.Ba.copy())},(v=dt.prototype).Af=function(t){wt.prototype.Af.call(this,t),t.Bd(),t.af=this.af,t.wc=null},v.th=function(){wt.prototype.th.call(this),null!==this.Ba&&(this.Ba.oc=!0)},v.Mz=function(t,e,i){null==e&&(e=""),null==i&&(i=""),null!==(t=G0(this,t,e,i))&&t.Sl()},v.fk=function(t,e,i,n,o,r,l){(t===Ke&&"elements"===e||t===Qe&&"elements"===e)&&(this.wc=null),wt.prototype.fk.call(this,t,e,i,n,o,r,l)},v.Bd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;void 0!==t&&t.contains(i)||(Qi(i.fromPort),Qi(i.toPort),i.bb())}},v.si=function(){return!0},dt.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Co(this.avoidableMargin),t},dt.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},dt.prototype.isVisible=function(){if(!wt.prototype.isVisible.call(this))return!1;var t=!0,e=ia,i=this.diagram;if(null!==i&&(t=i.isTreePathToChildren,e=i.treeCollapsePolicy),e===ia){if(null!==(t=this.pg())&&!t.isTreeExpanded)return!1}else if(e===Lf){if(0<(t=t?this.Oo():this.Po()).count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===Nf&&0<(t=t?this.Oo():this.Po()).count&&t.any(function(n){return!n.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},dt.prototype.$b=function(t){wt.prototype.$b.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&null!==this.containingGroup){var n=i.To(this);null===n||n.Td(this.containingGroup)||i.bb()}i.$b(t)}},dt.prototype.sx=function(){var t=new rt,e=new rt;return U0(this,this,t,e),e.iterator},dt.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.jb.iterator;var e=new Pe(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},(v=dt.prototype).Mo=function(t){void 0===t&&(t=null);var e=new Pe(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&(null===t||n.fromPortId===t)},e},v.Sd=function(t){void 0===t&&(t=null);var e=new Pe(this.jb),i=this;return e.predicate=function(n){return n.toNode===i&&(null===t||n.toPortId===t)},e},v.Nu=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var o=n.value;o.fromNode===this?(null===t||o.fromPortId===t)&&(o=o.toNode,null!==e?e.add(o):null!==i&&i!==o?((e=new rt).add(i),e.add(o)):i=o):o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==i&&i!==o?((e=new rt).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new ce(i):Ft},v.Po=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var o=n.value;o.fromNode!==this||null!==t&&o.fromPortId!==t||(o=o.toNode,null!==e?e.add(o):null!==i&&i!==o?((e=new rt).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new ce(i):Ft},v.Oo=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var o=n.value;o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==i&&i!==o?((e=new rt).add(i),e.add(o)):i=o)}return null!==e?e.iterator:null!==i?new ce(i):Ft},v.kz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Pe(this.jb),o=this;return n.predicate=function(r){return!((r.fromNode!==o||r.toNode!==t||null!==e&&r.fromPortId!==e||null!==i&&r.toPortId!==i)&&(r.fromNode!==t||r.toNode!==o||null!==i&&r.fromPortId!==i||null!==e&&r.toPortId!==e))},n},v.lz=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Pe(this.jb),o=this;return n.predicate=function(r){return!(r.fromNode!==o||r.toNode!==t||null!==e&&r.fromPortId!==e||null!==i&&r.toPortId!==i)},n},dt.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(v=dt.prototype).Vo=function(t){wt.prototype.Vo.call(this,t),t||(Ah(this),null!==(t=this.Xk)&&ey(t,this))},v.Wo=function(t){wt.prototype.Wo.call(this,t),t||null!==(t=this.Xk)&&null!==t.wd&&(t.wd.remove(this),t.v())},v.Kj=function(){if(0<this.jb.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,i=this.jb.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,wt.prototype.Kj.call(this)},v.ns=function(t){if(null===this.wc){if(""===t&&!1===this.Te)return this;Z0(this)}var e=this.wc.I(t);return null!==e||""!==t&&null!==(e=this.wc.I(""))?e:this},v.Oz=function(t){if(null===t||t===this)return!1;var e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.jb.iterator;n.next();){var o=n.value;if(o.isTreeLink&&(e=o.fromNode)!==i&&e!==this)break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.jb.iterator;n.next()&&(!(o=n.value).isTreeLink||(e=o.toNode)===i||e===this););if(e===this||null===e||e===i)return!1;i=e}return!0},v.yz=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.jb.iterator;i.next()&&(!(n=i.value).isTreeLink||(t=n.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},v.hz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Tc(e,!0),e=e.pg();var i=null;for(e=t;null!==e;){if(1048576&e.G){i=e;break}e=e.pg()}for(e=this;null!==e;)Tc(e,!1),e=e.pg();return i},v.kh=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},v.pg=function(){var t=this.ci;if(null===t)return null;if(t instanceof dt)return t;t=null===(t=this.diagram)||t.isTreePathToChildren;for(var e=this.jb.iterator;e.next();){var i=e.value;if(i.isTreeLink&&(i=t?i.fromNode:i.toNode)!==this)return this.ci=i}return this.ci=null},v.wz=function(){var e=new rt;return function t(i,n){n.add(i);var o=i.kh();null!==o&&(n.add(o),null!==(i=i.pg())&&t(i,n))}(this,e),e},v.vz=function(){return K0(this,this)},v.Qo=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new Pe(this.jb);var i=this;return e.predicate=t?function(n){return!(!n.isTreeLink||n.fromNode!==i)}:function(n){return!(!n.isTreeLink||n.toNode!==i)},e},v.Pu=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var i=e=null,n=this.jb.iterator;if(t)for(;n.next();)(t=n.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==i&&i!==t?((e=new ot).add(i),e.add(t)):i=t);else for(;n.next();)(t=n.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==i&&i!==t?((e=new ot).add(i),e.add(t)):i=t);return null!==e?e.iterator:null!==i?new ce(i):Ft},v.xz=function(t){void 0===t&&(t=1/0);var e=new rt;return is(e,this,!1,t,!0),e},dt.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ue){e.Ue=!0;var i=new rt;i.add(this),J0(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ia),e.Ue=!1}},dt.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ue){e.Ue=!0;var i=new rt;i.add(this),$0(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ia),e.Ue=!1}},Ot.Object.defineProperties(dt.prototype,{portSpreading:{get:function(){return null!==this.Ba?this.Ba.er:Fc},set:function(t){var e=this.portSpreading;e!==t&&(Or(this),this.Ba.er=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Bd())}},avoidable:{get:function(){return 0!=(8&this.R)},set:function(t){var e=0!=(8&this.R);if(e!==t){this.R^=8;var i=this.diagram;null!==i&&Af(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return null!==this.Ba?this.Ba.yp:d},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.avoidableMargin;if(!e.D(t)){t=t.J(),Or(this),this.Ba.yp=t;var i=this.diagram;null!==i&&Af(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return null!==this.Ba?this.Ba.Dq:null},set:function(t){var e=this.linkConnected;e!==t&&(Or(this),this.Ba.Dq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return null!==this.Ba?this.Ba.Eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(Or(this),this.Ba.Eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return null!==this.Ba?this.Ba.gj:null},set:function(t){var e=this.linkValidation;e!==t&&(Or(this),this.Ba.gj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Xk}},labeledLink:{get:function(){return this.Xk},set:function(t){var e=this.Xk;if(e!==t){var i=this.diagram,n=this.data;if(null!==e){if(null!==e.wd&&(e.wd.remove(this),e.v()),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){var o=e.data,r=i.model;if(null!==o&&r.ri()){var l=r.wa(n);void 0!==l&&r.Rx(o,l)}}this.containingGroup=null}this.Xk=t,null!==t&&(ey(t,this),null===i||null===n||i.undoManager.isUndoingRedoing||(i=i.model,null!==(o=t.data)&&i.ri()&&void 0!==(n=i.wa(n))&&i.Bu(o,n)),this.containingGroup=t.containingGroup),el(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.ns("")}},ports:{get:function(){return null===this.wc&&Z0(this),this.wc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.R)},set:function(t){var e=0!=(1&this.R);if(e!==t){this.R^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var n=!0;null!==i&&(n=i.aa,i.aa=!0),e(this),null!==i&&(i.aa=n)}null!==i&&i.undoManager.isUndoingRedoing?this.$b(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.R)},set:function(t){var e=0!=(2&this.R);e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return null!==this.Ba?this.Ba.Vr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(Or(this),this.Ba.Vr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.R)},set:function(t){var e=0!=(4&this.R);e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),dt.prototype.expandTree=dt.prototype.expandTree,dt.prototype.collapseTree=dt.prototype.collapseTree,dt.prototype.findTreeParts=dt.prototype.xz,dt.prototype.findTreeChildrenNodes=dt.prototype.Pu,dt.prototype.findTreeChildrenLinks=dt.prototype.Qo,dt.prototype.findTreeLevel=dt.prototype.vz,dt.prototype.findTreeParentChain=dt.prototype.wz,dt.prototype.findTreeParentNode=dt.prototype.pg,dt.prototype.findTreeParentLink=dt.prototype.kh,dt.prototype.findCommonTreeParent=dt.prototype.hz,dt.prototype.findTreeRoot=dt.prototype.yz,dt.prototype.isInTreeOf=dt.prototype.Oz,dt.prototype.findPort=dt.prototype.ns,dt.prototype.findLinksTo=dt.prototype.lz,dt.prototype.findLinksBetween=dt.prototype.kz,dt.prototype.findNodesInto=dt.prototype.Oo,dt.prototype.findNodesOutOf=dt.prototype.Po,dt.prototype.findNodesConnected=dt.prototype.Nu,dt.prototype.findLinksInto=dt.prototype.Sd,dt.prototype.findLinksOutOf=dt.prototype.Mo,dt.prototype.findExternalTreeLinksConnected=dt.prototype.sx,dt.prototype.invalidateConnectedLinks=dt.prototype.Bd,dt.prototype.invalidateLinkBundle=dt.prototype.Mz;var tx=new ut(dt,"SpreadingNone",10),Fc=new ut(dt,"SpreadingEvenly",11),Mp=new ut(dt,"SpreadingPacked",12);function Nt(t,e){void 0===t||t instanceof We||"string"==typeof t?dt.call(this,t):(dt.call(this),t&&(e=t)),this.R|=4608,this.Gn=new rt,this.$a=null,this.Sc=new pe,this.Sc.group=this,this.fl=new rt,this.tb=this.$p=null,e&&Object.assign(this,e)}function Cp(t,e){if(t.Gn.add(e)){e instanceof Nt&&t.fl.add(e);var i=t.memberAdded;if(null!==i){var n=!0,o=t.diagram;null!==o&&(n=o.aa,o.aa=!0),i(t,e),null!==o&&(o.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.$b(!1)}e instanceof st&&!t.computesBoundsIncludingLinks||(null===(e=t.$a)&&(e=t),e.v())}function Ap(t,e){if(t.Gn.remove(e)){e instanceof Nt&&t.fl.remove(e);var i=t.memberRemoved;if(null!==i){var n=!0,o=t.diagram;null!==o&&(n=o.aa,o.aa=!0),i(t,e),null!==o&&(o.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.$b(!0)}e instanceof st&&!t.computesBoundsIncludingLinks||(null===(e=t.$a)&&(e=t),e.v())}function Q0(t,e,i,n){for(var o=t.memberParts;o.next();){var r=o.value;if(r.$b(!1),r instanceof Nt&&r.isSubGraphExpanded&&(r.wasSubGraphExpanded=r.isSubGraphExpanded,Q0(r,e,i,n)),r instanceof dt)r.Bd(e),i.Aj(r,n);else if(r instanceof st)for(r=r.labelNodes;r.next();)r.value.Bd(e)}t.isSubGraphExpanded=!1}function ty(t,e,i,n){for(var o=t.memberParts;o.next();){var r=o.value;if(r.$b(!0),r instanceof Nt&&r.wasSubGraphExpanded&&(r.wasSubGraphExpanded=!1,ty(r,e,i,n)),r instanceof dt)r.Bd(e),i.Cj(r,n);else if(r instanceof st)for(r=r.labelNodes;r.next();)r.value.Bd(e)}t.isSubGraphExpanded=!0}function Ii(t){vt.call(this),this.zb=h,this.ko=new $(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function st(t){wt.call(this,nt.Link),this.Qa=8,this.ef=null,this.ff="",this.uf=this.gn=null,this.vf="",this.uo=null,this.pk=Oi,this.Om=0,this.Qm=Oi,this.Rm=NaN,this.qj=Np,this.po=.5,this.wd=null,this.Ob=(new ot).freeze(),this.Tg=this.Mg=null,this.ml=new $,this.ua=new lt,this.u=this.o=this.Sf=this.Wf=null,this.su=new B,this.cq=this.Nw=this.Mw=null,this.vt=NaN,this.ba=null,this.j=[],t&&Object.assign(this,t)}function yl(t){var n,e=t.fromNode,i=t.toNode;if(n=null!==e?null!==i?e.qx(i):e.containingGroup:null!==i?i.containingGroup:null,(i=t.Ah)!==(e=n)){null!==i&&Ap(i,t),t.Ah=e,null!==e&&Cp(e,t);var o=t.containingGroupChanged;if(null!==o){var r=!0,l=t.diagram;null!==l&&(r=l.aa,l.aa=!0),o(t,i,e),null!==l&&(l.aa=r)}!t.fd||t.Mw!==i&&t.Nw!==i||t.bb()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}function ey(t,e){null===t.wd&&(t.wd=new rt),t.wd.add(e),t.v()}function Er(t,e,i){if(0!==e||0!==i)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.fd,o=new ot,r=t.Ob.iterator;r.next();){var l=r.value;o.add(new B(l.x+e,l.y+i).freeze())}o.freeze(),r=t.Ob,t.Ob=o,l=t.diagram,isNaN(e)||isNaN(i)||null!==l&&l.animationManager.Ab?t.v():(t.ke.h(t.ke.x+e,t.ke.y+i),t.pa.h(t.pa.x+e,t.pa.y+i),el(t)),n?Ic(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==l&&l.animationManager.Ab&&nf(l.animationManager,t,o),t.g("points",r,o)}}function Ic(t){0===t.Ob.count?t.fd=!1:(t.fd=!0,t.cq=null,t.vt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),jc(t,!1))}function Pp(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Oc(t,e){var i=e.Zn;return null===i&&((i=new fa).port=e,i.node=e.part,e.Zn=i),uy(i,t)}function vl(t){return t===y||.5===t.x&&.5===t.y}function Ec(t){return.5===t.x&&.5===t.y?t:P}function iy(t){if(null===t.diagram||!t.isAvoiding||!Pm(t.diagram))return!1;var e=t.points.s,i=e.length;if(4>i)return!1;t=Mf(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var o=e[n],r=e[n+1];if(!t.Xj(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function Tp(t,e,i,n,o,r,l){var u=e.Ho,c=e.Go,p=Bo(e,i,n),m=i,x=n;for(0===o?m+=u:90===o?x+=c:180===o?m-=u:x-=c,o!==l&&p>Bs&&Bo(e,m,x)!==p-1&&(Bo(e,i-u,n)===p-1?(o=180,m=i-u,x=n):Bo(e,i+u,n)===p-1?(o=0,m=i+u,x=n):Bo(e,i,n-c)===p-1?(o=270,m=i,x=n-c):Bo(e,i,n+c)===p-1&&(o=90,m=i,x=n+c));p>Bs&&Bo(e,m,x)===p-1;)i=m,n=x,0===o?m+=u:90===o?x+=c:180===o?m-=u:x-=c,--p;r?p>Bs&&(180===o||0===o?i=Math.floor(i/u)*u+u/2:(90===o||270===o)&&(n=Math.floor(n/c)*c+c/2)):(i=Math.floor(i/u)*u+u/2,n=Math.floor(n/c)*c+c/2),p>Bs&&(r=o,l=i,m=n,0===o?(r=90,m+=c):90===o?(r=180,l-=u):180===o?(r=270,m-=c):270===o&&(r=0,l+=u),Bo(e,l,m)===p-1?Tp(t,e,l,m,r,!1,r):(l=i,m=n,0===o?(r=270,m-=c):90===o?(r=0,l+=u):180===o?(r=90,m+=c):270===o&&(r=180,l-=u),Bo(e,l,m)===p-1&&Tp(t,e,l,m,r,!1,r))),t.yf(i,n)}function Dc(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),_.$(t,0)?e:_.$(e,0)?t:Math.sqrt(t*t+e*e)))}function ha(t,e,i,n){var o=t.pointsCount;if(2>o)return e;if(i){var r=t.i(1);if(0===(n=Dc(e.x,e.y,i=r.x-n.x,r=r.y-n.y)))return e;o=2===o?.5*n:n,(t=t.computeShortLength(!0))>o&&(t=o),o=t*(r-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=o}else{if(r=t.i(o-2),0===(n=Dc(e.x,e.y,i=r.x-n.x,r=r.y-n.y)))return e;o=2===o?.5*n:n,(t=t.computeShortLength(!1))>o&&(t=o),o=t*(e.y-r)/n,e.x-=t*(e.x-i)/n,e.y-=o}return e}function Lp(t,e,i,n){for(var o=t.pointsCount,r=e;_.$(e.x,r.x)&&_.$(e.y,r.y);){if(i>=o)return o-1;r=t.i(i++)}if(!_.$(e.x,r.x)&&!_.$(e.y,r.y))return i-1;for(var l=r;_.$(e.x,r.x)&&_.$(r.x,l.x)&&(!n||(e.y>=r.y?r.y>=l.y:r.y<=l.y))||_.$(e.y,r.y)&&_.$(r.y,l.y)&&(!n||(e.x>=r.x?r.x>=l.x:r.x<=l.x));){if(i>=o)return o-1;l=t.i(i++)}return i-2}function ua(t,e,i,n,o,r,l){if(!l&&js(t)){var u=(l=t.computeJumpLength())/2,c=[],p=0;if(t.isVisible()&&(p=function ex(t,e,i,n){var o=t.diagram;if(null===o||e.D(i))return 0;for(o=o.layers;o.next();){var r=o.value;if(null!==r&&r.visible)for(var l=(r=r.Pa.s).length,u=0;u<l;u++){var c=r[u];if(c instanceof st){if(c===t)return 0<n.length&&n.sort(function(m,x){return m-x}),n.length;if(c.isVisible()&&js(c)){var p=c.routeBounds;p.w()&&t.routeBounds.Yc(p)&&!t.usesSamePort(c)&&null!==(p=c.path)&&p.Ed()&&ix(e,i,n,c)}}}}return 0<n.length&&n.sort(function(m,x){return m-x}),n.length}(t,o,r,c)),0<p)if(_.B(o.y,r.y))if(o.x<r.x)for(var m=0;m<p;){var x=Math.max(o.x,Math.min(c[m++]-u,r.x-l));e.lineTo(x+i,r.y+n);for(var b=x+i,M=Math.min(x+l,r.x);m<p&&(x=c[m])<M+l;)m++,M=Math.min(x+u,r.x);x=r.y-l+n,M+=i;var A=r.y+n;t.curve===Dr?ml(e,M,A,!1):Fr(e,b,x,M,x,M,A)}else for(--p;0<=p;){for(m=Math.min(o.x,Math.max(c[p--]+u,r.x+l)),e.lineTo(m+i,r.y+n),b=m+i,x=Math.max(m-l,r.x);0<=p&&(m=c[p])>x-l;)p--,x=Math.max(m-u,r.x);m=r.y-l+n,x+=i,M=r.y+n,t.curve===Dr?ml(e,x,M,!1):Fr(e,b,m,x,m,x,M)}else if(_.B(o.x,r.x))if(o.y<r.y)for(m=0;m<p;){for(x=Math.max(o.y,Math.min(c[m++]-u,r.y-l)),e.lineTo(r.x+i,x+n),b=x+n,x=Math.min(x+l,r.y);m<p&&(M=c[m])<x+l;)m++,x=Math.min(M+u,r.y);M=r.x-l+i,A=r.x+i,x+=n,t.curve===Dr?ml(e,A,x,!1):Fr(e,M,b,M,x,A,x)}else for(--p;0<=p;){for(m=Math.min(o.y,Math.max(c[p--]+u,r.y+l)),e.lineTo(r.x+i,m+n),b=m+n,m=Math.max(m-l,r.y);0<=p&&(x=c[p])>m-l;)p--,m=Math.max(x-u,r.y);x=r.x-l+i,M=r.x+i,m+=n,t.curve===Dr?ml(e,M,m,!1):Fr(e,x,b,x,m,M,m)}}e.lineTo(r.x+i,r.y+n)}function ix(t,e,i,n){for(var o=_.B(t.y,e.y),r=n.pointsCount,l=n.i(0),u=B.alloc(),c=1;c<r;c++){var p=n.i(c);if(c<r-1){var m=n.i(c+1);if(l.y===p.y&&p.y===m.y){if(p.x>l.x&&m.x>=p.x||p.x<l.x&&m.x<=p.x)continue}else if(l.x===p.x&&p.x===m.x&&(p.y>l.y&&m.y>=p.y||p.y<l.y&&m.y<=p.y))continue}t:{var x=t.y,b=e.x,M=e.y,A=l.x;l=l.y;var L=p.x,D=p.y;if(_.B(m=t.x,b)){if(!_.B(x,M)&&_.B(l,D)&&Math.min(x,M)<l&&Math.max(x,M)>l&&Math.min(A,L)<m&&Math.max(A,L)>m&&!_.B(A,L)){u.x=m,u.y=l,m=!0;break t}}else if(_.B(x,M)&&_.B(A,L)&&Math.min(m,b)<A&&Math.max(m,b)>A&&Math.min(l,D)<x&&Math.max(l,D)>x&&!_.B(l,D)){u.x=A,u.y=x,m=!0;break t}u.x=0,u.y=0,m=!1}m&&i.push(o?u.x:u.y),l=p}B.free(u)}function js(t){return(t=t.curve)===xl||t===Dr}function jc(t,e){(e||js(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Eh.contains(t)||0===t.ml.width&&0===t.ml.height||e.Eh.add(t,t.ml.copy()))}function ny(t,e,i){if(null!==e&&e.kk&&e.fd&&js(e)){var n=e.routeBounds;n.w()&&(t.routeBounds.Yc(n)||i.Yc(n))&&(t.usesSamePort(e)||e.rc())}}function Ph(t){var e=t.ef;if(null!==e){var i=t.uf;if(null!==i&&isNaN(t.curviness)){for(var n=t.ff,o=t.vf,r=t=null,l=e.jb.s,u=l.length,c=0;c<u;c++){var p=l[c];(p.ef===e&&p.ff===n&&p.uf===i&&p.vf===o||p.ef===i&&p.ff===o&&p.uf===e&&p.vf===n)&&(null===r?r=p:(null===t&&(t=[]).push(r),t.push(p)))}if(null!==t){for(null===(r=G0(e,i,n,o))&&(V0(e,r=new Xc(e,n,i,o)),V0(i,r)),r.links=t,e=0;e<t.length;e++)t[e].Sf=r;r.Sl()}}}}function Th(t){var e=t.Sf;null!==e&&isNaN(t.curviness)&&(t.Sf=null,0<=(t=e.links.indexOf(t))&&(ai(e.links,t),e.Sl()))}dt.className="Node",dt.SpreadingNone=tx,dt.SpreadingEvenly=Fc,dt.SpreadingPacked=Mp,Ut(Nt,dt),Nt.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),this.R=-32769&this.R;var e=t.Nl(function(i){return i instanceof Ii});t.$a=e instanceof Ii?e:null,null!==this.Sc?(t.Sc=this.Sc.copy(),t.Sc.group=t):(null!==t.Sc&&(t.Sc.group=null),t.Sc=null),null!==this.tb&&(t.tb=this.tb.copy())},(v=Nt.prototype).Af=function(t){dt.prototype.Af.call(this,t);var e=t.Qj();for(t=t.memberParts;t.next();){var i=t.value;if(i.v(),i.C(8),i.Dj(),i instanceof dt)i.Bd(e);else if(i instanceof st)for(i=i.labelNodes;i.next();)i.value.Bd(e)}},v.fk=function(t,e,i,n,o,r,l){if(t===Ke&&"elements"===e){if(o instanceof Ii)null===this.$a?this.$a=o:this.$a!==o&&it("Cannot insert a second Placeholder into the visual tree of a Group.");else if(o instanceof nt){var u=o.Nl(function(c){return c instanceof Ii});u instanceof Ii&&(null===this.$a?this.$a=u:this.$a!==u&&it("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Qe&&"elements"===e&&null!==this.$a&&(n===this.$a||n instanceof nt&&this.$a.rg(n))&&(this.$a=null);dt.prototype.fk.call(this,t,e,i,n,o,r,l)},v.Xl=function(t,e){dt.prototype.Xl.call(this,t,e),this.isClipping&&this.type!==nt.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof nt&&(t=t.Qb()),null===this.tb&&(this.tb=new $),t.mi(this.tb),t instanceof It&&this.tb.Bc(-t.strokeWidth,-t.strokeWidth))},v.eh=function(t,e,i,n){this.nf=this.$a,dt.prototype.eh.call(this,t,e,i,n)},v.Va=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof st||e.Va()}),dt.prototype.Va.call(this)},v.si=function(){if(!dt.prototype.si.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof dt){if(e.isVisible()&&_n(e))return!1}else if(e instanceof st&&e.isVisible()&&_n(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},v.Kj=function(){if(0<this.Gn.count){var t=this.diagram;if(null!==t)for(var e=this.Gn.copy().iterator;e.next();)t.remove(e.value)}dt.prototype.Kj.call(this)},Nt.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=If(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},Nt.prototype.addMembers=function(t,e){var i=this.diagram;if(null===i)return!1;i=i.commandHandler;var n=!0;for(t=If(t).iterator;t.next();){var o=t.value;!e||i.isValidMember(this,o)?o.containingGroup=this:n=!1}return n},Nt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null===t||!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(v=Nt.prototype).Bd=function(t){var e=0!=(65536&this.R);if(dt.prototype.Bd.call(this,t),!e)for(!(65536&this.R)&&(this.R=65536^this.R),e=this.Mu();e.next();){var i=e.value;if(void 0===t||!t.contains(i)){var n=i.fromNode;(null!==n&&n!==this&&n.Td(this)&&!n.isVisible()||null!==(n=i.toNode)&&n!==this&&n.Td(this)&&!n.isVisible())&&(Qi(i.fromPort),Qi(i.toPort),i.bb())}}},v.Mu=function(){var t=null!==this.diagram&&this.diagram.Qw;if(t&&null!==this.$p)return this.$p.iterator;var e=this.Qj();e.add(this);for(var i=new rt,n=e.iterator;n.next();){var o=n.value;if(o instanceof dt)for(o=o.linksConnected;o.next();){var r=o.value;e.contains(r)||i.add(r)}}return t&&(this.$p=i),i.iterator},v.jz=function(){var t=this.Qj();t.add(this);for(var e=new rt,i=t.iterator;i.next();){var n=i.value;if(n instanceof dt)for(n=n.linksConnected;n.next();){var o=n.value,r=o.fromNode;null===r||t.contains(r)&&r!==this||e.add(r),null===(o=o.toNode)||t.contains(o)&&o!==this||e.add(o)}}return e.iterator},v.iz=function(){var e=new rt;return function t(i,n){null!==i&&(n.add(i),t(i.containingGroup,n))}(this,e),e},v.Qj=function(){var t=new rt;return is(t,this,!0,0,!0),t.remove(this),t},v.$b=function(t){dt.prototype.$b.call(this,t);for(var e=this.memberParts;e.next();)e.value.$b(t)},Nt.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ue||(t.Ue=!0,Q0(this,this.Qj(),t,this),t.Ue=!1)},Nt.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ue||(t.Ue=!0,ty(this,this.Qj(),t,this),t.Ue=!1)},Nt.prototype.move=function(t,e){void 0===e&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var o=t.x,r=t.y;if(!(n===o||isNaN(n)&&isNaN(o))||!(i===r||isNaN(i)&&isNaN(r))){for(n=o-(isNaN(n)?0:n),i=r-(isNaN(i)?0:i),r=B.alloc(),dt.prototype.move.call(this,t,e),t=new rt,e=this.Qj().iterator;e.next();)(o=e.value)instanceof st&&(o.suspendsRouting&&t.add(o),o.fd||o.fromNode!==this&&o.toNode!==this)&&(o.suspendsRouting=!0);for(e.reset();e.next();)if(!((o=e.value).ph()||o instanceof dt&&o.isLinkLabel)){var l=o.position,u=o.location;l.w()?(r.x=l.x+n,r.y=l.y+i,o.position=r):u.w()&&(r.x=u.x+n,r.y=u.y+i,o.location=r)}for(e.reset();e.next();)(o=e.value)instanceof st&&(o.suspendsRouting=t.contains(o),o.fd||o.fromNode!==this&&o.toNode!==this)&&(r.x=(l=o.position).x+n,r.y=l.y+i,r.w()?o.move(r):o.bb());B.free(r)}},Ot.Object.defineProperties(Nt.prototype,{placeholder:{get:function(){return this.$a}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.R)},set:function(t){var e=0!=(2048&this.R);e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.R)},set:function(t){var e=0!=(4096&this.R);e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.R)},set:function(t){var e=0!=(8192&this.R);e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.R)},set:function(t){var e=0!=(16384&this.R);e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},avoidableMembers:{get:function(){return 0!=(131072&this.R)},set:function(t){var e=0!=(131072&this.R);e!==t&&(this.R^=131072,this.g("avoidableMembers",e,t))}},memberParts:{get:function(){return this.Gn.iterator}},layout:{get:function(){return this.Sc},set:function(t){var e=this.Sc;if(e!==t){null!==t&&null!==t.diagram&&t.diagram.layout===t&&it("A layout cannot be both the Diagram.layout and a Group.layout: "+t),null!==e&&(e.diagram=null,e.group=null),this.Sc=t;var i=this.diagram;null!==t&&(t.diagram=i,t.group=this),null!==i&&(i.xh=!0),this.g("layout",e,t),null!==i&&i.ac()}}},memberAdded:{get:function(){return null!==this.Ba?this.Ba.Mq:null},set:function(t){var e=this.memberAdded;e!==t&&(Or(this),this.Ba.Mq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return null!==this.Ba?this.Ba.Nq:null},set:function(t){var e=this.memberRemoved;e!==t&&(Or(this),this.Ba.Nq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return null!==this.Ba?this.Ba.ij:null},set:function(t){var e=this.memberValidation;e!==t&&(Or(this),this.Ba.ij=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.R)},set:function(t){var e=0!=(256&this.R);e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.R)},set:function(t){var e=0!=(512&this.R);if(e!==t){this.R^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var n=!0;null!==i&&(n=i.aa,i.aa=!0),e(this),null!==i&&(i.aa=n)}null!==i&&i.undoManager.isUndoingRedoing?(null!==this.$a&&this.$a.v(),this.memberParts.each(function(o){o.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.R)},set:function(t){var e=0!=(1024&this.R);e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return null!==this.Ba?this.Ba.Kr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(Or(this),this.Ba.Kr=t,this.g("subGraphExpandedChanged",e,t))}},rh:{get:function(){return 0!=(32768&this.R)},set:function(t){0!=(32768&this.R)!==t&&(this.R^=32768)}}}),Nt.prototype.expandSubGraph=Nt.prototype.expandSubGraph,Nt.prototype.collapseSubGraph=Nt.prototype.collapseSubGraph,Nt.prototype.findSubGraphParts=Nt.prototype.Qj,Nt.prototype.findContainingGroupChain=Nt.prototype.iz,Nt.prototype.findExternalNodesConnected=Nt.prototype.jz,Nt.prototype.findExternalLinksConnected=Nt.prototype.Mu,Nt.prototype.ensureBounds=Nt.prototype.Va,Nt.className="Group",Ut(Ii,vt),Ii.prototype.cloneProtected=function(t){vt.prototype.cloneProtected.call(this,t),t.zb=this.zb.J(),t.ko=this.ko.copy()},Ii.prototype.gh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Fn(0,0,e.width,e.height,t.x,t.y)},Ii.prototype.Wl=function(){var t=this.part;if(null!==t&&(t instanceof Nt||t instanceof Vt)||it("Placeholder is not inside a Group or Adornment."),t instanceof Nt){var e=this.computeBorder(this.ko),i=this.minSize,n=this.ec;for(Gn(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.Ge(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||null===n||n.animationManager.Yu(t)||isNaN(e.x)||isNaN(e.y)||((i=B.alloc()).xi(e,t.locationSpot),i.D(t.location)||(t.location=i),B.free(i))}else{e=this.ec,n=(i=this.zb).left+i.right;var o=i.top+i.bottom,r=t.adornedObject;t.angle=r.li();var l=0;r instanceof It&&(l=r.strokeWidth);var u=r.Df(),c=r.naturalBounds,p=(c.width+l)*u;l=(c.height+l)*u,t.type!==nt.Link&&(u=r.ga("Selection"===t.category?w:t.locationSpot,B.alloc()),t.location=u,B.free(u)),isNaN(p)||isNaN(l)?(t=r.ga(w,B.alloc()),(p=$.allocAt(t.x,t.y,0,0)).Ye(r.ga(Y,t)),p.Ye(r.ga(C,t)),p.Ye(r.ga(O,t)),Gn(e,p.width+n||0,p.height+o||0),this.Ge(-i.left,-i.top,e.width,e.height),B.free(t),$.free(p)):(Gn(e,p+n||0,l+o||0),this.Ge(-i.left,-i.top,e.width,e.height))}},Ii.prototype.eh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},Ii.prototype.computeBorder=function(t){var e=this.part,i=e.diagram,n=null===i||!i.animationManager.isAnimating;if(null!==i&&e instanceof Nt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.ko.w()){var o=i.toolManager.findTool("Dragging");if(o===i.currentTool&&null!==(i=o.computeBorder(e,this.ko,t)))return i}i=$.alloc(),o=this.computeMemberBounds(i);var r=this.zb;return e instanceof Nt&&!e.isSubGraphExpanded?t.h(o.x-r.left,o.y-r.top,0,0):t.h(o.x-r.left,o.y-r.top,Math.max(o.width+r.left+r.right,0),Math.max(o.height+r.top+r.bottom,0)),$.free(i),n&&e instanceof Nt&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ye(e.location),t},Ii.prototype.computeMemberBounds=function(t){if(!(this.part instanceof Nt))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,o=-1/0,r=-1/0,l=e.memberParts;l.next();){var u=l.value;if(u.isVisible()){if(u instanceof st&&(!e.computesBoundsIncludingLinks||Pr(u)||u.fromNode===e||u.toNode===e))continue;(u=u.actualBounds).left<i&&(i=u.left),u.top<n&&(n=u.top),u.right>o&&(o=u.right),u.bottom>r&&(r=u.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,o-i,r-n):t.h((e=e.location).x,e.y,0,0),t},Ot.Object.defineProperties(Ii.prototype,{padding:{get:function(){return this.zb},set:function(t){"number"==typeof t&&(t=new R(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.g("padding",e,t),this.v())}}}),Ii.className="Placeholder",Ut(st,wt),st.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Qa=-113&this.Qa,t.ff=this.ff,t.gn=this.gn,t.vf=this.vf,t.uo=this.uo,t.pk=this.pk,t.Om=this.Om,t.Qm=this.Qm,t.Rm=this.Rm,t.qj=this.qj,t.po=this.po,null!==this.ba&&(t.ba=this.ba.copy())},(v=st.prototype).Af=function(t){wt.prototype.Af.call(this,t),this.ff=t.ff,this.vf=t.vf,t.Mg=null,t.bb(),t.Sf=this.Sf;var e=t.fromPort;null!==e&&Qi(e),null!==(t=t.toPort)&&Qi(t)},v.qb=function(t){t.classType===st?2==(2&t.value)?this.routing=t:t===dn||t===Dr||t===xl?this.curve=t:t===Lh||t===Bc||t===zc?this.adjusting=t:t!==Np&&t!==Oi&&it("Unknown Link enum value for a Link property: "+t):wt.prototype.qb.call(this,t)},v.Xc=function(){null===this.ba&&(this.ba=new gh)},v.si=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),_n(t)||ts(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),_n(t)||ts(t)))},v.Av=function(){return!1},v.Bv=function(){},v.Zc=function(){return!1},st.prototype.computeAngle=function(t,e,i){return st.computeAngle(e,i)},st.computeAngle=function(t,e){switch(t){default:case Oi:t=0;break;case Nh:t=e;break;case Fh:t=e+90;break;case Ih:t=e-90;break;case Fp:t=e+180;break;case Rc:90<(t=_.bp(e))&&270>t&&(t-=180);break;case Oh:90<(t=_.bp(e+90))&&270>t&&(t-=180);break;case Eh:90<(t=_.bp(e-90))&&270>t&&(t-=180);break;case Yc:if(45<(t=_.bp(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return _.bp(t)},(v=st.prototype).oh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&wt.prototype.oh.call(this)},v.To=function(t){var e=this.fromNode;return t===e?this.toNode:e},v.Dz=function(t){var e=this.fromPort;return t===e?this.toPort:e},v.Vo=function(t){if(wt.prototype.Vo.call(this,t),js(this)&&this.Xo(this.actualBounds),!t){var e=null;null!==(t=this.ef)&&Lc(t,this,e=this.fromPort);var i=this.uf;if(null!==i){var n=this.toPort;i===t&&n===e||Lc(i,this,n)}Ph(this)}},v.Wo=function(t){if(wt.prototype.Wo.call(this,t),js(this)&&this.Xo(this.actualBounds),!t){var e=null;null!==(t=this.ef)&&Nc(t,this,e=this.fromPort);var i=this.uf;if(null!==i){var n=this.toPort;i===t&&n===e||Nc(i,this,n)}Th(this)}},v.Kj=function(){if(this.fd=!0,null!==this.wd){var t=this.diagram;if(null!==t)for(var e=this.wd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},st.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},st.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var o=i.y;for(isNaN(o)&&(o=0),n=t.x-n,o=t.y-o,!0===e?wt.prototype.move.call(this,t,!1):(t=B.allocAt(i.x+n,i.y+o),wt.prototype.move.call(this,t,!1),B.free(t)),Er(this,n,o),t=this.labelNodes;t.next();)(e=t.value).moveTo((i=e.position).x+n,i.y+o)},st.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},st.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},st.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Ks),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===dn))return this.ua.Qu(.5,t),t.add(this.i(0)),i=this.ua.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===dn){if(3===e){i=this.i(0),n=this.i(1);var o=this.i(2);return _.bx(i.x,i.y,n.x,n.y,n.x,n.y,o.x,o.y,t),t}if(i=3*((n=(e-1)/3|0)/2|0),n%2==1){n=this.i(i),o=this.i(i+1);var r=this.i(i+2);i=this.i(i+3),_.bx(n.x,n.y,o.x,o.y,r.x,r.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,o=r=n=0;n<i/2&&r<e&&!(n+(o=l[r])>i/2);)n+=o,r++;return e=this.i(r),r=this.i(r+1),1>Math.abs(e.x-r.x)?t.h(e.x,e.y>r.y?e.y-(i/2-n):e.y+(i/2-n)):1>Math.abs(e.y-r.y)?t.h(e.x>r.x?e.x-(i/2-n):e.x+(i/2-n),e.y):t.h(e.x+(i=(i/2-n)/o)*(r.x-e.x),e.y+i*(r.y-e.y)),t},st.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).ab(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===dn))return this.ua.xx(.5);if(this.computeCurve()===dn&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2==1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),_.Ny(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).ab(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r,o=0;for(i=0;o<n/2&&i<t&&!(o+(r=e[i])>n/2);)o+=r,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).ab(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.ab(n)},(v=st.prototype).i=function(t){return this.Ob.s[t]},v.dd=function(t,e){this.Ob.cd(t,e)},v.L=function(t,e,i){this.Ob.cd(t,new B(e,i))},v.Lz=function(t,e){this.Ob.Hb(t,e)},v.m=function(t,e,i){this.Ob.Hb(t,new B(e,i))},v.ne=function(t){this.Ob.add(t)},v.yf=function(t,e){this.Ob.add(new B(t,e))},v.qv=function(t){this.Ob.mb(t)},v.Ej=function(){this.Ob.clear()},v.uh=function(){null===this.Mg&&(this.Mg=this.Ob,this.Ob=this.Ob.copy())},v.zf=function(){if(null!==this.Mg){for(var t=this.Mg,e=this.Ob,i=1/0,n=1/0,o=t.s,r=o.length,l=0;l<r;l++){var u=o[l];i=Math.min(u.x,i),n=Math.min(u.y,n)}u=l=1/0;for(var c=e.s,p=c.length,m=0;m<p;m++){var x=c[m];l=Math.min(x.x,l),u=Math.min(x.y,u),x.freeze()}if(e.freeze(),p===r){for(r=0;r<p;r++)if((m=o[r]).x-i!=(x=c[r]).x-l||m.y-n!=x.y-u){this.rc();break}}else this.rc();this.Mg=null,null!==(i=this.diagram)&&i.animationManager.Ab&&nf(i.animationManager,this,e),Ic(this),this.g("points",t,e)}},v.sv=function(){null!==this.Mg&&(this.Ob=this.Mg,this.Mg=null)},v.bb=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.As.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null===this.Tg||t.isTicking||(this.Tg=null)}null!==(t=this.path)&&(this.fd=!1,this.v(),t.v())}},v.vg=function(){if(!this.fd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.uh(),t=this.computePoints()}catch{this.computingPoints=!1,this.sv()}finally{this.computingPoints=!1,t?this.zf():this.sv()}}},st.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(ca||((ca=new dt).desiredSize=vr,ca.Va()),this.defaultFromPoint&&(ca.location=this.defaultFromPoint,ca.Va(),e=t=ca)):e=this.fromPort,null!==e&&!t.isVisible()){var i=t.findVisibleNode();null!==i&&i!==t?(t=i,e=i.port):t=i}if(this.Mw=t,null===t||!t.location.w())return!1;for(;!(null===e||e.actualBounds.w()&&e.Ed());)e=e.panel;if(null===e)return!1;var n=this.toNode,o=null;if(null===n?(da||((da=new dt).desiredSize=vr,da.Va()),this.defaultToPoint&&(da.location=this.defaultToPoint,da.Va(),o=n=da)):o=this.toPort,null===o||n.isVisible()||(null!==(i=n.findVisibleNode())&&i!==n?(n=i,o=i.port):n=i),this.Nw=n,null===n||!n.location.w())return!1;for(;!(null===o||o.actualBounds.w()&&o.Ed());)o=o.panel;if(null===o)return!1;var r=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,o);var u=vl(l),c=vl(i),p=e===o&&null!==e,m=this.isOrthogonal,x=this.curve===dn;this.Wf=!(!p||m)&&(x=!0);var b=this.computeAdjusting()===Oi||p;if(!m&&!p&&u&&c){if(u=!1,!b&&3<=r&&(b=this.getLinkPoint(t,e,l,!0,!1,n,o),c=this.getLinkPoint(n,o,i,!1,!1,t,e),u=this.adjustPoints(0,b,r-1,c))&&(b=this.getLinkPoint(t,e,l,!0,!1,n,o),c=this.getLinkPoint(n,o,i,!1,!1,t,e),this.adjustPoints(0,b,r-1,c)),!u)if(this.Ej(),x){r=this.getLinkPoint(t,e,l,!0,!1,n,o),u=(b=this.getLinkPoint(n,o,i,!1,!1,t,e)).x-r.x,c=b.y-r.y,p=this.computeCurviness(),x=m=0;var M=r.x+u/3,A=r.y+c/3,L=M,D=A;_.B(c,0)?D=0<u?D-p:D+p:(m=-u/c,x=Math.sqrt(p*p/(m*m+1)),0>p&&(x=-x),D=m*((L=(0>c?-1:1)*x+M)-M)+A);var I=M=r.x+2*u/3,z=A=r.y+2*c/3;z=_.B(c,0)?0<u?z-p:z+p:m*((I=(0>c?-1:1)*x+M)-M)+A,this.Ej(),this.ne(r),this.yf(L,D),this.yf(I,z),this.ne(b),this.dd(0,this.getLinkPoint(t,e,l,!0,!1,n,o)),this.dd(3,this.getLinkPoint(n,o,i,!1,!1,t,e))}else n=this.getLinkPoint(t,e,l,!0,!1,r=n,b=o),o=this.getLinkPoint(r,b,i,!1,!1,t,e),this.hasCurviness()?(b=o.x-n.x,i=o.y-n.y,l=this.computeCurviness(),r=t=n.x+b/2,u=e=n.y+i/2,_.B(i,0)?u=0<b?u-l:u+l:(b=-b/i,r=Math.sqrt(l*l/(b*b+1)),0>l&&(r=-r),u=b*((r=(0>i?-1:1)*r+t)-t)+e),this.ne(n),this.yf(r,u),this.ne(o)):(this.ne(n),this.ne(o),u=$.alloc(),e.mi(u),c=u.ca(o),b.mi(u),p=u.ca(n),(c||p)&&(l=e.ga(Ec(l),new B),this.dd(0,this.getLinkPointFromPoint(t,e,l,o,!0,l)),i=b.ga(Ec(i),new B),this.dd(1,this.getLinkPointFromPoint(r,b,i,n,!1,i))),$.free(u))}else{x=this.isAvoiding,b&&(m&&x||p)&&this.Ej();var X=p?this.computeCurviness():0;x=this.getLinkPoint(t,e,l,!0,m,n,o),M=L=A=0,(m||!u||p)&&(D=this.computeEndSegmentLength(t,e,l,!0),M=this.getLinkDirection(t,e,x,l,!0,m,n,o),p&&(u||l.D(i)||!m&&l.x+i.x===1&&l.y+i.y===1)&&(M-=m?90:30,0>X&&(M-=180)),0>M?M+=360:360<=M&&(M-=360),p&&(D+=Math.abs(X)*(m?1:2)),0===M?A=D:90===M?L=D:180===M?A=-D:270===M?L=-D:(A=D*Math.cos(M*Math.PI/180),L=D*Math.sin(M*Math.PI/180)),l.Mc()&&p&&(D=e.ga(P,B.alloc()),I=B.allocAt(D.x+1e3*A,D.y+1e3*L),this.getLinkPointFromPoint(t,e,D,I,!0,x),B.free(D),B.free(I))),D=this.getLinkPoint(n,o,i,!1,m,t,e);var V=z=I=0;if(m||!c||p){var Z=this.computeEndSegmentLength(n,o,i,!1);V=this.getLinkDirection(n,o,D,i,!1,m,t,e),p&&(c||l.D(i)||!m&&l.x+i.x===1&&l.y+i.y===1)&&(V+=m?0:30,0>X&&(V+=180)),0>V?V+=360:360<=V&&(V-=360),p&&(Z+=Math.abs(X)*(m?1:2)),0===V?I=Z:90===V?z=Z:180===V?I=-Z:270===V?z=-Z:(I=Z*Math.cos(V*Math.PI/180),z=Z*Math.sin(V*Math.PI/180)),i.Mc()&&p&&(i=o.ga(P,B.alloc()),l=B.allocAt(i.x+1e3*I,i.y+1e3*z),this.getLinkPointFromPoint(n,o,i,l,!1,D),B.free(i),B.free(l))}i=x,(m||!u||p)&&(i=new B(x.x+A,x.y+L)),l=D,(m||!c||p)&&(l=new B(D.x+I,D.y+z)),!b&&!m&&u&&3<r&&this.adjustPoints(0,x,r-2,l)?this.dd(r-1,D):!b&&!m&&c&&3<r&&this.adjustPoints(1,i,r-1,D)?this.dd(0,x):!b&&(m?6<=r:4<r)&&this.adjustPoints(1,i,r-2,l)?(this.dd(0,x),this.dd(r-1,D)):(this.Ej(),this.ne(x),(m||!u||p)&&this.ne(i),m&&this.addOrthoPoints(i,M,l,V,t,n),(m||!c||p)&&this.ne(l),this.ne(D))}return!0},st.prototype.getLinkPointFromPoint=function(t,e,i,n,o,r){if(void 0===r&&(r=new B),null===t||null===e)return r.assign(i),r;if(t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(e=o.port),t=null,null===(o=e.panel)||o.se()||(o=o.panel),null===o){o=n.x,n=n.y;var l=i.x;i=i.y}else{var u=-(t=o.oe).m12*(o=1/(t.m11*t.m22-t.m12*t.m21)),c=-t.m21*o,p=t.m11*o,m=o*(t.m21*t.dy-t.m22*t.dx),x=o*(t.m12*t.dx-t.m11*t.dy);o=n.x*(l=t.m22*o)+n.y*c+m,n=n.x*u+n.y*p+x,l=i.x*l+i.y*c+m,i=i.x*u+i.y*p+x}return e.Rj(o,n,l,i,r),null!==t&&r.transform(t),r},st.prototype.getLinkPoint=function(t,e,i,n,o,r,l,u){if(void 0===u&&(u=new B),i.sb()&&!vl(i))return e.ga(i,u),u;if(i.$c()){var c=Oc(this,e);if(null!==c){if(u.assign(c.Zo),o&&this.routing===oy){var p=Oc(this,l);if(null!==p&&c.Gl<p.Gl){c=B.alloc(),p=B.alloc();var m=new $(e.ga(w,c),e.ga(Y,p)),x=this.computeSpot(!n,l);t=this.getLinkPoint(r,l,x,!n,o,t,e,p),(i.Hf(U)||i.Hf(S))&&t.y>=m.y&&t.y<=m.y+m.height?u.y=t.y:(i.Hf(G)||i.Hf(N))&&t.x>=m.x&&t.x<=m.x+m.width&&(u.x=t.x),B.free(c),B.free(p)}}return u}}return i=e.ga(Ec(i),B.alloc()),this.pointsCount>(o?6:2)?(l=this.i(n?1:this.pointsCount-2),o&&(l=Pp(i,l.copy()))):(c=this.computeSpot(!n,l),r=B.alloc(),l=l.ga(Ec(c),r),o&&(l=Pp(i,l)),B.free(r)),this.getLinkPointFromPoint(t,e,i,l,n,u),B.free(i),u},st.prototype.getLinkDirection=function(t,e,i,n,o,r,l,u){t:if(n.sb())var c=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.$c()&&null!==(c=Oc(this,e)))switch(c.Nc){case 1:c=270;break t;case 2:c=180;break t;default:case 4:c=0;break t;case 8:c=90;break t}c=e.ga(P,B.alloc()),this.pointsCount>(r?6:2)?(u=this.i(o?1:this.pointsCount-2),u=r?Pp(c,u.copy()):i):(i=B.alloc(),u=u.ga(P,i),B.free(i)),i=Math.abs(u.x-c.x)>Math.abs(u.y-c.y)?u.x>=c.x?0:180:u.y>=c.y?90:270,B.free(c),c=i}return l&&n.Mc()&&l.Td(t)&&360<=(c+=180)&&(c-=360),vl(n)||0===(t=e.li())||(45<=t&&135>t?c+=90:135<=t&&225>t?c+=180:225<=t&&315>t&&(c+=270),360<=c&&(c-=360)),c},st.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.$c()&&null!==(t=Oc(this,e))?t.Ku:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},st.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=P:((e=this.fromSpot).Yb()&&(e=t.fromSpot),t=e===Bt?y:e):null===(t=e||this.toPort)?t=P:((e=this.toSpot).Yb()&&(e=t.toSpot),t=e===Bt?y:e),t},st.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Oi&&4<this.pointsCount?this.computeMidPoint(new B):null!==(t=null!==(t=e.Zn)?uy(t,this):null)?t.Zo:e.ga(P)},st.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},st.prototype.Cf=function(t,e,i,n,o,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var l=r;if(void 0===r&&(l=zt.alloc()).reset(),l.multiply(this.transform),this.fh(t,l))return qf(this,e,i,o),void 0===r&&zt.free(l),!0;if(this.Yc(t,l)){var u=!1;if(!this.isAtomic)for(var c=this.O.s,p=c.length;p--;){var m=c[p];if(m.visible||m===this.locationObject){var x=m.actualBounds,b=this.naturalBounds;if(!(x.x>b.width||x.y>b.height||0>x.x+x.width||0>x.y+x.height)){if((x=zt.alloc()).set(l),m instanceof nt)u=m.Cf(t,e,i,n,o,x);else if(this.path===m){if(m instanceof It)if(u=t,b=n,!1===m.pickable)u=!1;else if(x.multiply(m.transform),b)t:{var M=u,A=x;if(m.fh(M,A))u=!0;else{if(void 0===A&&(A=m.transform,M.Re(m.actualBounds))){u=!0;break t}u=M.left,b=M.right;var L=M.top;M=M.bottom;var D=B.alloc(),I=B.alloc(),z=B.alloc(),X=zt.alloc();X.set(A),X.cv(m.transform),X.Uj(),I.x=b,I.y=L,I.transform(X),D.x=u,D.y=L,D.transform(X),A=!1,Es(m,D,I,z)?A=!0:(D.x=b,D.y=M,D.transform(X),Es(m,D,I,z)?A=!0:(I.x=u,I.y=M,I.transform(X),Es(m,D,I,z)?A=!0:(D.x=u,D.y=L,D.transform(X),Es(m,D,I,z)&&(A=!0)))),zt.free(X),B.free(D),B.free(I),B.free(z),u=A}}else u=m.fh(u,x)}else u=Wm(m,t,n,x);u&&(b=m,null!==e&&(b=e(m)),b&&(null===i||i(b))&&o.add(b)),zt.free(x)}}}return void 0===r&&zt.free(l),u||null!==this.background||null!==this.areaBackground}return void 0===r&&zt.free(l),!1},st.prototype.computeCurve=function(){if(null===this.Wf){var t=this.fromPort;this.Wf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Wf?dn:this.curve},st.prototype.computeCorner=function(){if(this.curve===dn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},st.prototype.findMidLabel=function(){for(var t=this.path,e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n];if(o!==t&&!o.isPanelMain&&(o.segmentIndex===-1/0||isNaN(o.segmentIndex)))return o}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},st.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=sy;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(null!==e&&null!==i){var n=this.findMidLabel();if(null!==n){var o=n.naturalBounds,r=n.margin,l=isNaN(o.width)?30:o.width*n.scale+r.left+r.right;o=isNaN(o.height)?14:o.height*n.scale+r.top+r.bottom,(n=n.segmentOrientation)===Nh||n===Rc||n===Fp?t=Math.max(t,o):n===Ih||n===Eh||n===Fh||n===Oh?t=Math.max(t,l):(e=e.ga(P).ab(i.ga(P))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*o)+1)),this.curve===dn&&(t*=1.333)}}return t},st.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Oi&&i.bb()}},st.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=ry;var e=this.Sf;if(null!==e){for(var i=te(),n=0,o=e.links,r=0;r<o.length;r++){var l=o[r].computeSpacing();i.push(l),n+=l}for(n=-n/2,r=0;r<o.length;r++){if(o[r]===this){t=n+i[r]/2;break}n+=i[r]}e.Ds===this.fromNode&&(t=-t),$t(i)}}return t},st.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},st.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Sf},st.prototype.adjustPoints=function(t,e,i,n){var o=this.computeAdjusting();if(this.isOrthogonal){if(o===Bc)return!1;o===zc&&(o=Lh)}switch(o){case Bc:var r=this.i(t),l=this.i(i);if(!r.Xa(e)||!l.Xa(n)){var u=l.x-(o=r.x),c=l.y-(r=r.y),p=Math.sqrt(u*u+c*c);if(!_.$(p,0)){if(_.$(u,0))var m=0>c?-Math.PI/2:Math.PI/2;else m=Math.atan(c/Math.abs(u)),0>u&&(m=Math.PI-m);var x=e.y;u=n.x-(l=e.x);var b=n.y-x;for(c=Math.sqrt(u*u+b*b),_.$(u,0)?b=0>b?-Math.PI/2:Math.PI/2:(b=Math.atan(b/Math.abs(u)),0>u&&(b=Math.PI-b)),p=c/p,m=b-m,this.dd(t,e),t+=1;t<i;t++)u=(e=this.i(t)).x-o,c=e.y-r,e=Math.sqrt(u*u+c*c),_.$(e,0)||(_.$(u,0)?c=0>c?-Math.PI/2:Math.PI/2:(c=Math.atan(c/Math.abs(u)),0>u&&(c=Math.PI-c)),u=c+m,this.L(t,l+(e*=p)*Math.cos(u),x+e*Math.sin(u)));this.dd(i,n)}}return!0;case zc:if(r=this.i(t),x=this.i(i),!r.Xa(e)||!x.Xa(n)){p=((l=x.x)-(o=r.x))*(l-o)+((x=x.y)-(r=r.y))*(x-r),m=e.y,b=n.y;var M=1;if((c=n.x)-(u=e.x)!=0){var A=(b-m)/(c-u);M=Math.sqrt(1+1/(A*A))}else A=9e9;for(this.dd(t,e),t+=1;t<i;t++){var L=(e=this.i(t)).x,D=e.y,I=.5;0!==p&&(I=((o-L)*(o-l)+(r-D)*(r-x))/p);var z=o+I*(l-o),X=r+I*(x-r);e=Math.sqrt((L-z)*(L-z)+(D-X)*(D-X)),D<A*(L-z)+X&&(e=-e),0<A&&(e=-e),L=u+I*(c-u),I=m+I*(b-m),0!==A?this.L(t,e=L+e/M,I-(e-L)/A):this.L(t,L,I+e)}this.dd(i,n)}return!0;case Lh:return this.isOrthogonal&&(o=this.i(t),r=this.i(t+1),l=this.i(t+2),x=u=r.x,p=m=r.y,_.B(o.y,r.y)?_.B(r.x,l.x)?m=e.y:_.B(r.y,l.y)&&(u=e.x):_.B(o.x,r.x)&&(_.B(r.y,l.y)?u=e.x:_.B(r.x,l.x)&&(m=e.y)),this.L(t+1,u,m),o=this.i(i),r=this.i(i-1),l=this.i(i-2),c=u=r.x,b=m=r.y,_.B(o.y,r.y)?_.B(r.x,l.x)?m=n.y:_.B(r.y,l.y)&&(u=n.x):_.B(o.x,r.x)&&(_.B(r.y,l.y)?u=n.x:_.B(r.x,l.x)&&(m=n.y)),this.L(i-1,u,m),iy(this))?(this.L(t+1,x,p),this.L(i-1,c,b),i=!1):(this.dd(t,e),this.dd(i,n),i=!0),i;default:return!1}},st.prototype.addOrthoPoints=function(t,e,i,n,o,r){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var u=o.actualBounds.copy(),c=r.actualBounds.copy();if(u.w()&&c.w()){u.Bc(Dh,Dh),c.Bc(Dh,Dh),u.Ye(t),c.Ye(i);var p=B.alloc(),m=B.alloc();0===e?i.x>t.x||270===n&&i.y<t.y&&c.right>t.x||90===n&&i.y>t.y&&c.right>t.x?(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),180===n?(p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),m.x=p.x,m.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(p.x=t.x<c.left?this.computeMidOrthoPosition(t.x,t.y,c.left,i.y,!1):t.x<c.right&&(270===n&&t.y<c.top||90===n&&t.y>c.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):c.right,m.x=p.x,m.y=i.y):0===n&&t.x<c.left&&t.y>c.top&&t.y<c.bottom&&(p.x=t.x,p.y=t.y<i.y?Math.min(i.y,c.top):Math.max(i.y,c.bottom),m.y=p.y)):(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<u.top||270===n&&i.y>u.bottom)&&(180===n&&(c.ca(t)||u.ca(i))?p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(180===n||90===n)?p.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,c.bottom),!0):i.y>t.y&&(180===n||270===n)&&(p.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,c.top),!0)),m.x=i.x,m.y=p.y),p.y>u.top&&p.y<u.bottom&&(i.x>=u.left&&i.x<=t.x||t.x<=c.right&&t.x>=i.x?(90===n||270===n)&&(p.h(Math.max((t.x+i.x)/2,t.x),t.y),m.h(p.x,i.y)):(p.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?u.top:Math.min(u.top,c.top)):Math.max(i.y,0===n?u.bottom:Math.max(u.bottom,c.bottom)),m.x=i.x,m.y=p.y))):180===e?i.x<t.x||270===n&&i.y<t.y&&c.left<t.x||90===n&&i.y>t.y&&c.left<t.x?(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),0===n?(p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),m.x=p.x,m.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(p.x=t.x>c.right?this.computeMidOrthoPosition(t.x,t.y,c.right,i.y,!1):t.x>c.left&&(270===n&&t.y<c.top||90===n&&t.y>c.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):c.left,m.x=p.x,m.y=i.y):180===n&&t.x>c.right&&t.y>c.top&&t.y<c.bottom&&(p.x=t.x,p.y=t.y<i.y?Math.min(i.y,c.top):Math.max(i.y,c.bottom),m.y=p.y)):(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<u.top||270===n&&i.y>u.bottom)&&(0===n&&(c.ca(t)||u.ca(i))?p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(0===n||90===n)?p.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,c.bottom),!0):i.y>t.y&&(0===n||270===n)&&(p.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,c.top),!0)),m.x=i.x,m.y=p.y),p.y>u.top&&p.y<u.bottom&&(i.x<=u.right&&i.x>=t.x||t.x>=c.left&&t.x<=i.x?(90===n||270===n)&&(p.h(Math.min((t.x+i.x)/2,t.x),t.y),m.h(p.x,i.y)):(p.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?u.top:Math.min(u.top,c.top)):Math.max(i.y,180===n?u.bottom:Math.max(u.bottom,c.bottom)),m.x=i.x,m.y=p.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&c.bottom>t.y||0===n&&i.x>t.x&&c.bottom>t.y?(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),270===n?(p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),m.x=i.x,m.y=p.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(p.y=t.y<c.top?this.computeMidOrthoPosition(t.x,t.y,i.x,c.top,!0):t.y<c.bottom&&(180===n&&t.x<c.left||0===n&&t.x>c.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):c.bottom,m.x=i.x,m.y=p.y):90===n&&t.y<c.top&&t.x>c.left&&t.x<c.right&&(p.x=t.x<i.x?Math.min(i.x,c.left):Math.max(i.x,c.right),p.y=t.y,m.x=p.x)):(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<u.left||180===n&&i.x>u.right)&&(270===n&&(c.ca(t)||u.ca(i))?p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(270===n||0===n)?p.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,c.right),i.y,!1):i.x>t.x&&(270===n||180===n)&&(p.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,c.left),i.y,!1)),m.x=p.x,m.y=i.y),p.x>u.left&&p.x<u.right&&(i.y>=u.top&&i.y<=t.y||t.y<=c.bottom&&t.y>=i.y?(0===n||180===n)&&(p.h(t.x,Math.max((t.y+i.y)/2,t.y)),m.h(i.x,p.y)):(p.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?u.left:Math.min(u.left,c.left)):Math.max(i.x,90===n?u.right:Math.max(u.right,c.right)),m.x=p.x,m.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&c.top<t.y||0===n&&i.x>t.x&&c.top<t.y?(p.h(t.x,i.y),m.h((t.x+i.x)/2,i.y),90===n?(p.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),m.x=i.x,m.y=p.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(p.y=t.y>c.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,c.bottom,!0):t.y>c.top&&(180===n&&t.x<c.left||0===n&&t.x>c.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):c.top,m.x=i.x,m.y=p.y):270===n&&t.y>c.bottom&&t.x>c.left&&t.x<c.right&&(p.x=t.x<i.x?Math.min(i.x,c.left):Math.max(i.x,c.right),p.y=t.y,m.x=p.x)):(p.h(i.x,t.y),m.h(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<u.left||180===n&&i.x>u.right)&&(90===n&&(c.ca(t)||u.ca(i))?p.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(90===n||0===n)?p.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,c.right),i.y,!1):i.x>t.x&&(90===n||180===n)&&(p.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,c.left),i.y,!1)),m.x=p.x,m.y=i.y),p.x>u.left&&p.x<u.right&&(i.y<=u.bottom&&i.y>=t.y||t.y>=c.top&&t.y<=i.y?(0===n||180===n)&&(p.h(t.x,Math.min((t.y+i.y)/2,t.y)),m.h(i.x,p.y)):(p.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?u.left:Math.min(u.left,c.left)):Math.max(i.x,270===n?u.right:Math.max(u.right,c.right)),m.x=p.x,m.y=i.y)));var x=i;if(this.isAvoiding){var b=this.diagram;if(null===b||o===r||this.layer.isTemporary||!Pm(b)||u.ca(x)&&!r.Td(o)||c.ca(t)&&!o.Td(r))e=!1;else{var M=Mf(b,!0,this.containingGroup,null);if(17!==this.segmentIndex&&M.Xj(Math.min(t.x,p.x),Math.min(t.y,p.y),Math.abs(t.x-p.x),Math.abs(t.y-p.y))&&M.Xj(Math.min(p.x,m.x),Math.min(p.y,m.y),Math.abs(p.x-m.x),Math.abs(p.y-m.y))&&M.Xj(Math.min(m.x,x.x),Math.min(m.y,x.y),Math.abs(m.x-x.x),Math.abs(m.y-x.y)))e=!1;else{o=t,r=x;var A=i=null;if(b.isVirtualized){(b=M.bounds.copy()).Bc(-M.Ho,-M.Go);var L=B.alloc();wl(M,t.x,t.y)||(_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,t.x,t.y,p.x,p.y,L)?(i=t=L.copy(),e=L.ab(p)):_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,p.x,p.y,m.x,m.y,L)?(i=t=L.copy(),e=L.ab(m)):_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,m.x,m.y,x.x,x.y,L)&&(i=t=L.copy(),e=L.ab(x))),wl(M,x.x,x.y)||(_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,x.x,x.y,m.x,m.y,L)?(A=x=L.copy(),n=m.ab(L)):_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,m.x,m.y,p.x,p.y,L)?(A=x=L.copy(),n=p.ab(L)):_.Ff(b.x,b.y,b.x+b.width,b.y+b.height,p.x,p.y,t.x,t.y,L)&&(A=x=L.copy(),n=t.ab(L))),B.free(L)}(u=u.copy().ed(c)).Bc(M.Ho*M.Os,M.Go*M.Os),ly(M,t,e,x,n,u,!0),c=Bo(M,x.x,x.y),!M.abort&&c>=bl&&(ay(M),u.Bc(M.Ho*M.Ix,M.Go*M.Jx),ly(M,t,e,x,n,u,!1),c=Bo(M,x.x,x.y)),!M.abort&&c<bl&&Bo(M,x.x,x.y)!==jr?(Tp(this,M,x.x,x.y,n,!0,l),u=this.i(2),4>this.pointsCount?(0===e||180===e?(u.x=t.x,u.y=x.y):(u.x=x.x,u.y=t.y),this.L(2,u.x,u.y),this.m(3,u.x,u.y)):(l=this.i(3),0===e||180===e?_.B(u.x,l.x)?(u=0===e?Math.max(u.x,t.x):Math.min(u.x,t.x),this.L(2,u,t.y),this.L(3,u,l.y)):_.B(u.y,l.y)?(Math.abs(t.y-u.y)<=M.Go/2&&(this.L(2,u.x,t.y),this.L(3,l.x,t.y)),this.m(2,u.x,t.y)):this.L(2,t.x,u.y):(90===e||270===e)&&(_.B(u.y,l.y)?(u=90===e?Math.max(u.y,t.y):Math.min(u.y,t.y),this.L(2,t.x,u),this.L(3,l.x,u)):_.B(u.x,l.x)?(Math.abs(t.x-u.x)<=M.Ho/2&&(this.L(2,t.x,u.y),this.L(3,t.x,l.y)),this.m(2,t.x,u.y)):this.L(2,u.x,t.y))),null!==i&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?0===e||180===e?this.m(2,t.x,l.y):this.m(2,l.x,t.y):0===e||180===e?this.m(2,o.x,i.y):this.m(2,i.x,o.y)),null!==A&&(0===n||180===n?this.yf(r.x,A.y):this.yf(A.x,r.y)),e=!0):e=!1}}}else e=!1;e||(this.ne(p.copy()),this.ne(m.copy())),B.free(p),B.free(m)}},st.prototype.computeMidOrthoPosition=function(t,e,i,n,o){var r=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).$c()||this.computeSpot(!1,this.toPort).$c()||(r=this.computeCurviness()),o?(e+n)/2+r:(t+i)/2+r},st.prototype.fz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),o=yi(e,t,i.x,i.y,n.x,n.y),r=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var u=yi(e,t,n.x,n.y,i.x,i.y);n=i,u<o&&(r=l,o=u)}return r},st.prototype.rc=function(){this.kk=!1,this.v()},st.prototype.Ul=function(t){if((t||!1!==this.fd&&(t=this.Qb(),!this.kk||null!==t&&null===t.geometry))&&(2>this.pointsCount?this.kk=!0:this.ua=this.makeGeometry(),null!==(t=this.path))){t.ua=this.ua;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var o=e[n];o!==t&&o.isPanelMain&&o instanceof It&&(o.ua=this.ua)}}},st.prototype.makeGeometry=function(){var t=this.ua,e=this.pointsCount,i=!1,n=this.diagram;null!==n&&js(this)&&n.Eh.contains(this)&&(0!==this.ml.width||0!==this.ml.height)&&(n.animationManager.isAnimating||n.currentTool!==n.toolManager)&&(i=!0);var o=this.i(0).copy(),r=o.copy();n=this.Ob.s;var l=this.computeCurve();if(l===dn&&3<=e&&!_.$(this.smoothness,0))if(3===e){var u=this.i(1);n=Math.min(o.x,u.x);var c=Math.min(o.y,u.y);u=this.i(2),n=Math.min(n,u.x),c=Math.min(c,u.y)}else{if(this.isOrthogonal)for(c=0;c<e;c++)u=n[c],r.x=Math.min(u.x,r.x),r.y=Math.min(u.y,r.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),c=this.i(n),r.x=Math.min(c.x,r.x),r.y=Math.min(c.y,r.y);n=r.x,c=r.y}else{for(c=0;c<e;c++)u=n[c],r.x=Math.min(u.x,r.x),r.y=Math.min(u.y,r.y);n=r.x,c=r.y}if(c-=this.su.y,o.x-=n-=this.su.x,o.y-=c,2!==e||js(this)){if(t.type=lt.o,u=I0(t),0!==this.computeShortLength(!0)&&(o=ha(this,o,!0,r)),ml(u,o.x,o.y,!1),l===dn&&3<=e&&!_.$(this.smoothness,0))if(3===e)e=(i=this.i(1)).x-n,i=i.y-c,(o=this.i(2).copy()).x-=n,o.y-=c,0!==this.computeShortLength(!1)&&(o=ha(this,o,!1,r)),Fr(u,e,i,e,i,o.x,o.y);else if(this.isOrthogonal){e=B.allocAt(n,c),(i=B.alloc()).assign(this.i(1)),r=B.allocAt(n,c),o=B.allocAt(n,c),l=this.i(0);for(var p,m=this.smoothness/3,x=1;x<this.pointsCount-1;x++){var b=l,M=p=this.i(x),A=this.i(Lp(this,p,x,!1));if(!(_.$(b.x,M.x)&&_.$(M.x,A.x)||_.$(b.y,M.y)&&_.$(M.y,A.y))){var L=m;isNaN(L)&&(L=this.smoothness/3);var D=b.x,I=M.x,z=A.x;A=A.y;var X=L*Dc(D,b=b.y,I,M=M.y);L*=Dc(I,M,z,A),_.$(b,M)&&_.$(I,z)&&(I>D?A>M?(r.x=I-X,r.y=M-X,o.x=I+L,o.y=M+L):(r.x=I-X,r.y=M+X,o.x=I+L,o.y=M-L):A>M?(r.x=I+X,r.y=M-X,o.x=I-L,o.y=M+L):(r.x=I+X,r.y=M+X,o.x=I-L,o.y=M-L)),_.$(D,I)&&_.$(M,A)&&(M>b?(z>I?(r.x=I-X,r.y=M-X,o.x=I+L):(r.x=I+X,r.y=M-X,o.x=I-L),o.y=M+L):(z>I?(r.x=I-X,r.y=M+X,o.x=I+L):(r.x=I+X,r.y=M+X,o.x=I-L),o.y=M-L)),(_.$(D,I)&&_.$(I,z)||_.$(b,M)&&_.$(M,A))&&(b=.5*(b+A),r.x=D=.5*(D+z),r.y=b,o.x=D,o.y=b),(1===x||2===x&&_.$(l.x,this.i(0).x)&&_.$(l.y,this.i(0).y))&&(i.x=.5*(l.x+p.x),i.y=.5*(l.y+p.y)),Fr(u,i.x-n,i.y-c,r.x-n,r.y-c,p.x-n,p.y-c),e.set(r),i.set(o),l=p}}p=l.x,l=l.y,m=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(m=ha(this,m.copy(),!1,no)),Fr(u,o.x-n,o.y-c,(p=.5*(p+m.x))-n,(l=.5*(l+m.y))-c,m.x-n,m.y-c),B.free(e),B.free(i),B.free(r),B.free(o)}else for(i=3;i<e;i+=3)r=this.i(i-2),i+3>=e&&(i=e-1),o=this.i(i-1),l=this.i(i),i===e-1&&0!==this.computeShortLength(!1)&&(l=ha(this,l.copy(),!1,no)),Fr(u,r.x-n,r.y-c,o.x-n,o.y-c,l.x-n,l.y-c);else{for((r=B.alloc()).assign(this.i(0)),(o=B.alloc()).assign(r),l=this.computeCorner(),x=1,p=0;x<e;){if(x=Lp(this,r,x,1<x),m=this.i(x),x>=e-1){if(r.D(m)){if(0===p)for(x=1;x<e;)o.assign(r),ua(this,u,-n,-c,r,m=this.i(x++),i),r.assign(m)}else 0!==this.computeShortLength(!1)&&(m=ha(this,m.copy(),!1,no)),ua(this,u,-n,-c,r,m,i);break}if(p=Lp(this,m,x+1,x<e-3),x=-n,D=-c,b=m,I=this.i(p),L=i,_.B(r.y,b.y)&&_.B(b.x,I.x))if(A=Math.min(l,Math.abs(b.x-o.x)/2),A=X=Math.min(A,Math.abs(I.y-b.y)/2),_.B(A,0))ua(this,u,x,D,r,b,L),r.assign(b);else{var V=b.x,Z=b.y;M=V,z=Z,z=I.y>b.y?b.y+X:b.y-X,ua(this,u,x,D,r,I=B.allocAt(V=b.x>r.x?b.x-A:b.x+A,Z),L),B.free(I),Cc(u,b.x+x,b.y+D,M+x,z+D),r.h(M,z)}else _.B(r.x,b.x)&&_.B(b.y,I.y)?(A=Math.min(l,Math.abs(b.y-o.y)/2),A=X=Math.min(A,Math.abs(I.x-b.x)/2),_.B(X,0)?(ua(this,u,x,D,r,b,L),r.assign(b)):(M=V=b.x,z=Z=b.y,M=I.x>b.x?b.x+X:b.x-X,ua(this,u,x,D,r,I=B.allocAt(V,Z=b.y>r.y?b.y-A:b.y+A),L),B.free(I),Cc(u,b.x+x,b.y+D,M+x,z+D),r.h(M,z))):(ua(this,u,x,D,r,b,L),r.assign(b));o.assign(m),x=p}B.free(r)}Ac=u}else(u=this.i(1).copy()).x-=n,u.y-=c,0!==this.computeShortLength(!0)&&(o=ha(this,o,!0,r)),0!==this.computeShortLength(!1)&&(u=ha(this,u,!1,r)),t.type=lt.j,t.startX=o.x,t.startY=o.y,t.endX=u.x,t.endY=u.y;return this.kk=!0,t},st.prototype.computeJumpLength=function(){return 10},st.prototype.Xo=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var i=e.diagram;if(null!==i&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var o=i.value;if(o.visible)if(o===e){n=!0;for(var r=!1,l=(o=o.Pa.s).length,u=0;u<l;u++){var c=o[u];c instanceof st&&(c===this?r=!0:r&&ny(this,c,t))}}else if(n)for(o=(r=o.Pa.s).length,l=0;l<o;l++)(u=r[l])instanceof st&&ny(this,u,t)}}}},st.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),o=t.i(0);if(n.Xa(o)||(e=this.i(e-1),t=t.i(i-1),e.Xa(t)||n.Xa(t)||e.Xa(o)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},st.prototype.isVisible=function(){if(!wt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(null!==i&&(e=i.isTreePathToChildren),null!==(i=this.fromNode)){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;null!==n;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(null===(i=i.findVisibleNode())||i===t)return!1}if(null!==(i=this.toNode)){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=i.findVisibleNode())||e===t)return!1}return!0},st.prototype.$b=function(t){if(wt.prototype.$b.call(this,t),t&&jc(this,!1),null!==this.Sf&&this.Sf.Sl(),null!==this.wd)for(var e=this.wd.iterator;e.next();)e.value.$b(t)},st.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Lh:this.pk},st.prototype.ph=function(){return!0},Ot.Object.defineProperties(st.prototype,{fromNode:{get:function(){return this.ef},set:function(t){var e=this.ef;if(e!==t){var i=this.fromPort;null!==e&&(this.uf!==e&&Nc(e,this,i),Th(this),this.C(2)),this.ef=t,null!==t&&this.$b(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;null!==n&&n.aa&&n.partManager.setFromNodeForLink(this,t,e);var o=this.fromPort,r=this.fromPortChanged;if(null!==r){var l=!0;null!==n&&(l=n.aa,n.aa=!0),r(this,i,o),null!==n&&(n.aa=l)}null!==t&&(this.uf!==t&&Lc(t,this,o),Ph(this),this.C(1)),this.g("fromNode",e,t),yl(this)}}},fromPortId:{get:function(){return this.ff},set:function(t){var e=this.ff;if(e!==t){var i=this.fromPort;null!==i&&Qi(i),Th(this),this.ff=t;var n=this.fromPort;null!==n&&Qi(n);var o=this.diagram;if(null!==o){var r=this.data,l=o.model;null!==r&&l.ri()&&l.yv(r,t)}i!==n&&(this.Wf=null,this.bb(),null!==(r=this.fromPortChanged)&&(l=!0,null!==o&&(l=o.aa,o.aa=!0),r(this,i,n),null!==o&&(o.aa=l))),Ph(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.ef;return null===t?null:t.ns(this.ff)}},fromPortChanged:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var i=this.toPort;null!==e&&(this.ef!==e&&Nc(e,this,i),Th(this),this.C(2)),this.uf=t,null!==t&&this.$b(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;null!==n&&n.aa&&n.partManager.setToNodeForLink(this,t,e);var o=this.toPort,r=this.toPortChanged;if(null!==r){var l=!0;null!==n&&(l=n.aa,n.aa=!0),r(this,i,o),null!==n&&(n.aa=l)}null!==t&&(this.ef!==t&&Lc(t,this,o),Ph(this),this.C(1)),this.g("toNode",e,t),yl(this)}}},toPortId:{get:function(){return this.vf},set:function(t){var e=this.vf;if(e!==t){var i=this.toPort;null!==i&&Qi(i),Th(this),this.vf=t;var n=this.toPort;null!==n&&Qi(n);var o=this.diagram;if(null!==o){var r=this.data,l=o.model;null!==r&&l.ri()&&l.Dv(r,t)}i!==n&&(this.Wf=null,this.bb(),null!==(r=this.toPortChanged)&&(l=!0,null!==o&&(l=o.aa,o.aa=!0),r(this,i,n),null!==o&&(o.aa=l))),Ph(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.uf;return null===t?null:t.ns(this.vf)}},toPortChanged:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.ba?this.ba.Xi:Bt},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Xi=t,this.g("fromSpot",e,t),(e.$c()||t.$c())&&null!==this.fromNode&&Qi(this.fromPort),this.bb())}},fromEndSegmentLength:{get:function(){return null!==this.ba?this.ba.Vi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",st,"fromEndSegmentLength"),this.Xc(),this.ba.Vi=t,this.g("fromEndSegmentLength",e,t),this.bb())}},fromShortLength:{get:function(){return null!==this.ba?this.ba.Wi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Wi=t,this.rc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.ba?this.ba.yj:Bt},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.yj=t,this.g("toSpot",e,t),(e.$c()||t.$c())&&null!==this.toNode&&Qi(this.toPort),this.bb())}},toEndSegmentLength:{get:function(){return null!==this.ba?this.ba.wj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",st,"toEndSegmentLength"),this.Xc(),this.ba.wj=t,this.g("toEndSegmentLength",e,t),this.bb())}},toShortLength:{get:function(){return null!==this.ba?this.ba.xj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.xj=t,this.rc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.wd&&0<this.wd.count}},labelNodes:{get:function(){return null===this.wd?Ft:this.wd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Qa)},set:function(t){var e=0!=(1&this.Qa);e!==t&&(this.Qa^=1,this.g("relinkableFrom",e,t),this.Xb())}},relinkableTo:{get:function(){return 0!=(2&this.Qa)},set:function(t){var e=0!=(2&this.Qa);e!==t&&(this.Qa^=2,this.g("relinkableTo",e,t),this.Xb())}},resegmentable:{get:function(){return 0!=(4&this.Qa)},set:function(t){var e=0!=(4&this.Qa);e!==t&&(this.Qa^=4,this.g("resegmentable",e,t),this.Xb())}},isTreeLink:{get:function(){return 0!=(8&this.Qa)},set:function(t){var e=0!=(8&this.Qa);e!==t&&(this.Qa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&Ah(this.fromNode),null!==this.toNode&&Ah(this.toNode))}},path:{get:function(){var t=this.Qb();return t instanceof It?t:null}},routeBounds:{get:function(){this.vg();var t=this.ml,e=1/0,i=1/0,n=this.pointsCount;if(0===n)t.h(NaN,NaN,0,0);else{if(1===n)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(2===n){n=this.i(0);var o=this.i(1);e=Math.min(n.x,o.x),i=Math.min(n.y,o.y),t.h(n.x,n.y,0,0),t.Ye(o)}else if(this.computeCurve()===dn&&3<=n&&!this.isOrthogonal)if(o=this.i(0),t.h(e=o.x,i=o.y,0,0),3===n){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var r=this.i(2);e=Math.min(r.x,e),i=Math.min(r.y,i),_.Dl(o.x,o.y,n.x,n.y,n.x,n.y,r.x,r.y,.5,t)}else for(r=3;r<n;r+=3){var l=this.i(r-2);r+3>=n&&(r=n-1);var u=this.i(r-1),c=this.i(r);_.Dl(o.x,o.y,l.x,l.y,u.x,u.y,c.x,c.y,.5,t),e=Math.min(c.x,e),i=Math.min(c.y,i),o=c}else for(o=this.i(0),r=this.i(1),e=Math.min(o.x,r.x),i=Math.min(o.y,r.y),t.h(o.x,o.y,0,0),t.Ye(r),o=2;o<n;o++)r=this.i(o),e=Math.min(r.x,e),i=Math.min(r.y,i),t.Ye(r);this.su.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.vg(),this.computeMidPoint(new B)}},midAngle:{get:function(){return this.vg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.cq){this.fd||Ic(this);for(var t=this.cq=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),o=this.i(i+1);_.$(n.x,o.x)?0>(n=o.y-n.y)&&(n=-n):_.$(n.y,o.y)?0>(n=o.x-n.x)&&(n=-n):n=Math.sqrt(n.Bf(o)),t.push(n)}}return this.cq}},flattenedTotalLength:{get:function(){var t=this.vt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.vt=t}return t}},points:{get:function(){return this.Ob},set:function(t){var e=this.Ob;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2==0;if(n)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){n=!1;break}if(n)for(i=new ot,n=0;n<t.length/2;n++)o=new B(t[2*n],t[2*n+1]).freeze(),i.add(o);else{for(n=!0,o=0;o<t.length;o++){var r=t[o];if(!ue(r)||"number"!=typeof r.x||isNaN(r.x)||"number"!=typeof r.y||isNaN(r.y)){n=!1;break}}if(n)for(i=new ot,n=0;n<t.length;n++)i.add(new B((o=t[n]).x,o.y).freeze())}}else if(t instanceof ot)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else it("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Ob=i,this.rc(),Ic(this),null!==(t=this.diagram)&&(t.pi||t.undoManager.isUndoingRedoing||t.As.add(this),t.animationManager.Ab&&nf(t.animationManager,this,i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Ob.count}},fd:{get:function(){return 0!=(16&this.Qa)},set:function(t){0!=(16&this.Qa)!==t&&(this.Qa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Qa)},set:function(t){0!=(32&this.Qa)!==t&&(this.Qa^=32)}},computingPoints:{get:function(){return 0!=(64&this.Qa)},set:function(t){0!=(64&this.Qa)!==t&&(this.Qa^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.qj.value)}},isAvoiding:{get:function(){return 4==(4&this.qj.value)}},kk:{get:function(){return 0!=(128&this.Qa)},set:function(t){0!=(128&this.Qa)!==t&&(this.Qa^=128)}},geometry:{get:function(){if(!this.kk){if(this.vg(),2>this.pointsCount)return this.kk=!0,this.ua;this.ua=this.makeGeometry()}return this.ua}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!vl(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!vl(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.rc(),this.g("corner",e,t))}},curve:{get:function(){return this.Qm},set:function(t){var e=this.Qm;e!==t&&(this.Qm=t,this.bb(),this.rc(),jc(this,e===Dr||e===xl||t===Dr||t===xl),this.g("curve",e,t))}},curviness:{get:function(){return this.Rm},set:function(t){var e=this.Rm;e!==t&&(this.Rm=t,this.bb(),this.rc(),this.g("curviness",e,t))}},routing:{get:function(){return this.qj},set:function(t){var e=this.qj;e!==t&&(this.qj=t,this.Wf=null,this.bb(),jc(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.rc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.ri())return t.model.Ac(this.data)}}}),st.prototype.invalidateOtherJumpOvers=st.prototype.Xo,st.prototype.findClosestSegment=st.prototype.fz,st.prototype.updateRoute=st.prototype.vg,st.prototype.invalidateRoute=st.prototype.bb,st.prototype.rollbackRoute=st.prototype.sv,st.prototype.commitRoute=st.prototype.zf,st.prototype.startRoute=st.prototype.uh,st.prototype.clearPoints=st.prototype.Ej,st.prototype.removePoint=st.prototype.qv,st.prototype.addPointAt=st.prototype.yf,st.prototype.addPoint=st.prototype.ne,st.prototype.insertPointAt=st.prototype.m,st.prototype.insertPoint=st.prototype.Lz,st.prototype.setPointAt=st.prototype.L,st.prototype.setPoint=st.prototype.dd,st.prototype.getPoint=st.prototype.i,st.prototype.getOtherPort=st.prototype.Dz,st.prototype.getOtherNode=st.prototype.To;var ca=null,da=null,Np=new ut(st,"Normal",1),nx=new ut(st,"Orthogonal",2),ox=new ut(st,"AvoidsNodes",6),oy=new ut(st,"AvoidsNodesStraight",7),Oi=new ut(st,"None",0),dn=new ut(st,"Bezier",9),Dr=new ut(st,"JumpGap",10),xl=new ut(st,"JumpOver",11),Lh=new ut(st,"End",17),Bc=new ut(st,"Scale",18),zc=new ut(st,"Stretch",19),Nh=new ut(st,"OrientAlong",21),Fh=new ut(st,"OrientPlus90",22),Ih=new ut(st,"OrientMinus90",23),Fp=new ut(st,"OrientOpposite",24),Rc=new ut(st,"OrientUpright",25),Oh=new ut(st,"OrientPlus90Upright",26),Eh=new ut(st,"OrientMinus90Upright",27),Yc=new ut(st,"OrientUpright45",28),ry=16,sy=14,Dh=8;function Xc(t,e,i,n){ee(this),this.Fe=this.qq=!1,this.Ds=t,this.Px=e,this.dv=i,this.Qx=n,this.links=[]}function jh(t){ee(this),this.Zx=this.group=null,this.vs=!0,this.abort=!1,this.Od=this.Nd=1,this.Fn=this.En=-1,this.sc=t.width,this.tc=t.height,this.bc=null,this.ei=this.di=0,this.Os=11,this.Jx=this.Ix=22}function wl(t,e,i){return t.Nd<=e&&e<=t.En&&t.Od<=i&&i<=t.Fn}function Bo(t,e,i){return wl(t,e,i)?(e-=t.Nd,i-=t.Od,t.bc[0|(e/=t.sc)][0|(i/=t.tc)]):Ip}function ay(t){if(null!==t.bc)for(var e=0;e<=t.di;e++)for(var i=t.bc[e],n=0;n<=t.ei;n++)i[n]>=Bs&&(i[n]=Ip)}function zo(t,e,i,n,o,r,l,u,c){if(!(e<r||e>l||i<u||i>c)){var p=0|e,m=0|i,x=t.bc[p][m];if(x>=Bs&&x<bl)for(o?m+=n:p+=n,x+=1;r<=p&&p<=l&&u<=m&&m<=c&&!(x>=t.bc[p][m]);)t.bc[p][m]=x,x+=1,o?m+=n:p+=n;if(p=o?m:p,o)if(0<n)for(i+=n;i<p;i+=n)zo(t,e,i,1,!o,r,l,u,c),zo(t,e,i,-1,!o,r,l,u,c);else for(i+=n;i>p;i+=n)zo(t,e,i,1,!o,r,l,u,c),zo(t,e,i,-1,!o,r,l,u,c);else if(0<n)for(e+=n;e<p;e+=n)zo(t,e,i,1,!o,r,l,u,c),zo(t,e,i,-1,!o,r,l,u,c);else for(e+=n;e>p;e+=n)zo(t,e,i,1,!o,r,l,u,c),zo(t,e,i,-1,!o,r,l,u,c)}}function Hc(t,e,i,n,o,r,l,u,c){var p=jr,m=Bs;for(t.bc[e|=0][i|=0]=m;p===jr&&e>r&&e<l&&i>u&&i<c;)t.bc[e][i]=m+=1,o?i+=n:e+=n,p=t.bc[e][i]}function Vc(t,e,i,n,o,r,l,u,c){var p=jr,m=bl;for(t.bc[e|=0][i|=0]=m;p===jr&&e>r&&e<l&&i>u&&i<c;)t.bc[e][i]=m,o?i+=n:e+=n,p=t.bc[e][i]}function ly(t,e,i,n,o,r,l){if(null!==t.bc){t.abort=!1;var u=e.x,c=e.y;if(wl(t,u,c)){u-=t.Nd,u/=t.sc,c-=t.Od,c/=t.tc;var p=n.x,m=n.y;if(wl(t,p,m))if(p-=t.Nd,p/=t.sc,m-=t.Od,m/=t.tc,1>=Math.abs(u-p)&&1>=Math.abs(c-m))t.abort=!0;else{var x=r.x;n=r.y,e=r.x+r.width;var b=r.y+r.height;x-=t.Nd,x/=t.sc,n-=t.Od,n/=t.tc,e-=t.Nd,e/=t.sc,b-=t.Od,b/=t.tc,r=Math.max(0,Math.min(t.di,0|x)),e=Math.min(t.di,Math.max(0,0|e)),x=Math.max(0,Math.min(t.ei,0|n)),b=Math.min(t.ei,Math.max(0,0|b)),p|=0,m|=0;var M=0===i||90===i?1:-1;if(i=90===i||270===i,(n=t.bc)[u|=0][c|=0]===jr?(Hc(t,u,c,M,i,r,e,x,b),Hc(t,u,c,1,!i,r,e,x,b),Hc(t,u,c,-1,!i,r,e,x,b)):Hc(t,u,c,M,i,u,c,u,c),n[p][m]===jr?(Vc(t,p,m,0===o||90===o?1:-1,90===o||270===o,r,e,x,b),Vc(t,p,m,1,!(90===o||270===o),r,e,x,b),Vc(t,p,m,-1,!(90===o||270===o),r,e,x,b)):Vc(t,p,m,M,i,p,m,p,m),i=te(),l&&hy(t,p,m,o,u,c,i))for((i[0]!==p||i[1]!==m)&&(i.unshift(m),i.unshift(p)),(i[i.length-2]!==u||i[i.length-1]!==c)&&(i.push(u),i.push(c)),t=Bs,n[o=i[i.length-2]][l=i[i.length-1]]=t++,r=i.length-4;0<=r;r-=2)for(o=i[r+2],l=i[r+3],e=i[r],p=i[r+1];e>o?o++:e<o?o--:p>l?l++:p<l&&l--,n[o][l]=t++,o!==e||l!==p;);else zo(t,u,c,1,!1,r,e,x,b),zo(t,u,c,-1,!1,r,e,x,b),zo(t,u,c,1,!0,r,e,x,b),zo(t,u,c,-1,!0,r,e,x,b);$t(i)}}}}function hy(t,e,i,n,o,r,l){for(var u=t.bc,c=e,p=i;;){if(c===o&&p===r)return!0;var m=c,x=p;if(0===n){if(!(m<o))break;m++}else if(90===n){if(!(x<r))break;x++}else if(180===n){if(!(m>o))break;m--}else{if(!(x>r))break;x--}var b=u[m][x];if(0===b||b===Op)break;c=m,p=x}for(;;){if(m=n,x=c,b=p,0===n?b<r?(m=90,b++):b>r&&(m=270,b--):90===n?x<o?(m=0,x++):x>o&&(m=180,x--):180===n?b<r?(m=90,b++):b>r&&(m=270,b--):x<o?(m=0,x++):x>o&&(m=180,x--),x=u[x][b],m!==n&&0!==x&&x!==Op){if(l.push(c),l.push(p),hy(t,c,p,m,o,r,l))return!0;l.pop(),l.pop()}if(u[c][p]=Op,0===n){if(c===e)return!1;c--}else if(90===n){if(p===i)return!1;p--}else if(180===n){if(c===e)return!1;c++}else{if(p===i)return!1;p++}}}st.className="Link",st.Normal=Np,st.Orthogonal=nx,st.AvoidsNodes=ox,st.AvoidsNodesStraight=oy,st.None=Oi,st.Bezier=dn,st.JumpGap=Dr,st.JumpOver=xl,st.End=Lh,st.Scale=Bc,st.Stretch=zc,st.OrientAlong=Nh,st.OrientPlus90=Fh,st.OrientMinus90=Ih,st.OrientOpposite=Fp,st.OrientUpright=Rc,st.OrientPlus90Upright=Oh,st.OrientMinus90Upright=Eh,st.OrientUpright45=Yc,st.EndSegmentStep=8,st.CurvinessStart=ry,st.SpacingMin=sy,st.OrthoShortCut=Dh,Xc.prototype.Sl=function(){if(!this.qq){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.pw.add(this),this.Fe=t.undoManager.isUndoingRedoing)}this.qq=!0},Xc.prototype.Ov=function(){if(this.qq){this.qq=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=null===i||i.pi&&!this.Fe,this.Fe=!1,e.arrangeBundledLinks(t,i),1===t.length&&(e.Sf=null,t.length=0)}0===t.length&&(t=this.Ds,null!==this&&null!==t.af&&t.af.remove(this),t=this.dv,null!==this&&null!==t.af&&t.af.remove(this))}},Xc.className="LinkBundle",jh.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Nd=Math.floor((t.x-this.sc)/this.sc)*this.sc,this.Od=Math.floor((e-this.tc)/this.tc)*this.tc,this.En=Math.ceil((i+2*this.sc)/this.sc)*this.sc,this.Fn=Math.ceil((n+2*this.tc)/this.tc)*this.tc,t=1+(0|Math.ceil((this.En-this.Nd)/this.sc)),e=1+(0|Math.ceil((this.Fn-this.Od)/this.tc)),null===this.bc||this.di<t-1||this.ei<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.bc=i,this.di=t-1,this.ei=e-1}if(t=Ip,null!==this.bc)for(e=0;e<=this.di;e++)if((i=this.bc[e]).fill)i.fill(t);else for(n=0;n<=this.ei;n++)i[n]=t}},jh.prototype.Xj=function(t,e,i,n){if(t>this.En||t+i<this.Nd||e>this.Fn||e+n<this.Od)return!0;t=(t-this.Nd)/this.sc|0,e=(e-this.Od)/this.tc|0,i=Math.max(0,i)/this.sc+1|0;var o=Math.max(0,n)/this.tc+1|0;if(0>t&&(i+=t,t=0),0>e&&(o+=e,e=0),0>i||0>o)return!0;for(n=0|Math.min(t+i-1,this.di),i=0|Math.min(e+o-1,this.ei);t<=n;t++){o=this.bc[t];for(var r=e;r<=i;r++)if(o[r]===jr)return!1}return!0},Ot.Object.defineProperties(jh.prototype,{bounds:{get:function(){return new $(this.Nd,this.Od,this.En-this.Nd,this.Fn-this.Od)}},Ho:{get:function(){return this.sc},set:function(t){0<t&&t!==this.sc&&(this.sc=t,this.initialize(this.bounds))}},Go:{get:function(){return this.tc},set:function(t){0<t&&t!==this.tc&&(this.tc=t,this.initialize(this.bounds))}}});var jr=0,Bs=1,bl=999999,Ip=bl+1,Op=bl+2;function fa(){ee(this),this.port=this.node=null,this.pe=[],this.ap=!1}function rx(t,e,i,n){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&15!==e&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function uy(t,e){var i=t.pe;if(0===i.length){t:if(!t.ap){i=t.ap,t.ap=!0;var n=null,o=t.node,r=o instanceof Nt?o:null;if(null===r||r.isSubGraphExpanded)var l=o.isTreeExpanded?o.findLinksConnected(t.port.portId):o.sx();else{if(!r.actualBounds.w()){t.ap=i;break t}l=(n=r).Mu()}r=t.pe.length=0;var u=t.port.ga(w,B.alloc()),c=t.port.ga(Y,B.alloc());for((o=$.allocAt(u.x,u.y,0,0)).Ye(c),B.free(u),B.free(c),u=B.allocAt(o.x+o.width/2,o.y+o.height/2),c=t.port.li(),l=l.iterator;l.next();){var p=l.value;if(p.isVisible()&&p.fromPort!==p.toPort){var m=p.fromPort===t.port||null!==p.fromNode&&p.fromNode.Td(n),x=p.computeSpot(m,t.port);if(x.$c()&&null!==(m=m?p.toPort:p.fromPort)){var b=m.part;if(null!==b){var M=b.findVisibleNode();null!==M&&M!==b&&(m=(b=M).port),m=p.computeOtherPoint(b,m),b=u.ab(m),0>(b-=c)?b+=360:360<=b&&(b-=360),0===(x=rx(o,x,b,p.isOrthogonal))?(x=4,180<b&&(b-=360)):90===x?(x=8,270<b&&(b-=360)):180===x?x=2:(x=1,90>b&&(b+=360)),void 0===(M=t.pe[r])?(M=new Ep(p,b,x),t.pe[r]=M):(M.link=p,M.angle=b,M.Nc=x),M.iv.set(m),r++}}}}for(B.free(u),t.pe.sort(fa.prototype.j),c=t.pe.length,n=-1,r=u=0;r<c;r++)void 0!==(l=t.pe[r])&&(l.Nc!==n&&(n=l.Nc,u=0),l.Uo=u,u++);for(n=-1,u=0,r=c-1;0<=r;r--)void 0!==(c=t.pe[r])&&(c.Nc!==n&&(n=c.Nc,u=c.Uo+1),c.Gl=u);if(r=t.pe,x=t.port,n=t.node.portSpreading,u=B.alloc(),c=B.alloc(),l=B.alloc(),p=B.alloc(),x.ga(w,u),x.ga(C,c),x.ga(Y,l),x.ga(O,p),M=b=m=x=0,n===Mp)for(var A=0;A<r.length;A++){var L=r[A];if(null!==L){var D=L.link.computeThickness();switch(L.Nc){case 8:b+=D;break;case 2:M+=D;break;case 1:x+=D;break;default:m+=D}}}var I=A=0,z=1,X=L=0;for(D=0;D<r.length;D++){var V=r[D];if(null!==V){if(A!==V.Nc){switch(A=V.Nc){case 8:var Z=l;I=p;break;case 2:Z=p,I=u;break;case 1:Z=u,I=c;break;default:Z=c,I=l}switch(L=I.x-Z.x,X=I.y-Z.y,A){case 8:b>Math.abs(L)?(z=Math.abs(L)/b,b=Math.abs(L)):z=1;break;case 2:M>Math.abs(X)?(z=Math.abs(X)/M,M=Math.abs(X)):z=1;break;case 1:x>Math.abs(L)?(z=Math.abs(L)/x,x=Math.abs(L)):z=1;break;default:m>Math.abs(X)?(z=Math.abs(X)/m,m=Math.abs(X)):z=1}I=0}var J=V.Zo;if(n===Mp){switch(V=V.link.computeThickness(),V*=z,J.set(Z),A){case 8:J.x=Z.x+L/2+b/2-I-V/2;break;case 2:J.y=Z.y+X/2+M/2-I-V/2;break;case 1:J.x=Z.x+L/2-x/2+I+V/2;break;default:J.y=Z.y+X/2-m/2+I+V/2}I+=V}else{var ct=.5;n===Fc&&(ct=(V.Uo+1)/(V.Gl+1)),J.x=Z.x+L*ct,J.y=Z.y+X*ct}}}for(B.free(u),B.free(c),B.free(l),B.free(p),Z=t.pe,r=0;r<Z.length;r++)null!==(n=Z[r])&&(n.Ku=t.computeEndSegmentLength(n));t.ap=i,$.free(o)}i=t.pe}for(t=0;t<i.length;t++)if(null!==(o=i[t])&&o.link===e)return o;return null}function Ep(t,e,i){this.link=t,this.angle=e,this.Nc=i,this.iv=new B,this.Gl=this.Uo=0,this.Zo=new B,this.Ku=0}function pe(t){ee(this),this.o=this.H=null,this.Gh=this.sn=!0,this.yn=!1,this.Am=new B(0,0).freeze(),this.vn=!0,this.Em=this.un=null,this.xn=!1,this.j=null,t&&Object.assign(this,t)}function ns(t,e,i,n,o,r,l,u){for(i=i.iterator;i.next();){var c=i.value;n&&!c.isTopLevel||null!==o&&!o(c)||!c.canLayout()||(r&&c instanceof dt?c.isLinkLabel||(c instanceof Nt&&null===c.layout?ns(t,e,c.memberParts,!1,o,r,l,u):(Bh(c),e.add(c))):l&&c instanceof st?e.add(c):!u||!c.Zc()||c instanceof dt||(Bh(c),e.add(c)))}}function Bh(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Va()}function se(t){ee(this),this.Sc=t,this.wf=new rt,this.ye=new rt,this.Es=new Tt,this.zs=new Tt}function cy(t,e){if(null===e)return!1;var i=t.wf.remove(e);return i&&null!==(e=e.node)&&t.Es.remove(e),i}function Dp(t,e){if(null!==e){t.ye.add(e);var i=e.link;null!==i&&null===t.Lo(i)&&t.zs.add(i,e),e.network=t}}function jp(t,e){null!==e&&t.ye.remove(e)&&null!==(e=e.link)&&t.zs.remove(e)}function Bp(t,e,i){if(null!==i&&i.network!==e){cy(t,i),e.dh(i);for(var n=i.sourceEdges;n.next();){var o=n.value;o.network!==e&&(jp(t,o),Dp(e,o),Bp(t,e,o.fromVertex))}for(n=i.destinationEdges;n.next();)(i=n.value).network!==e&&(jp(t,i),Dp(e,i),Bp(t,e,i.toVertex))}}function Ue(t){ee(this),this.ob=t,this.j=new $(0,0,10,10).freeze(),this.o=new B(5,5).freeze(),this.Sh=this.ub=null,this.tg=new ot,this.mg=new ot}function zp(t,e){return e=e.Sh,(t=t.Sh)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function tn(t){ee(this),this.nb=t,this.qd=this.kd=this.Zk=this.ub=null}function ri(t){pe.call(this),this.isViewportSized=!0,this.yo=this.zo=NaN,this.yg=new Pt(NaN,NaN).freeze(),this.tf=new Pt(10,10).freeze(),this.Kb=zh,this.Sb=Wc,this.nd=Rh,this.hd=dy,t&&Object.assign(this,t)}function dy(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}jh.className="PositionArray",fa.prototype.toString=function(){for(var t=this.pe,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+="\n  "+n.toString())}return e},fa.prototype.Sl=function(){this.pe.length=0},fa.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Nc<e.Nc?-1:t.Nc>e.Nc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},fa.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,y,e.fromPort===this.port),n=t.Uo;if(0>n)return i;var o=t.Gl;if(1>=o||!e.isOrthogonal)return i;e=t.iv;var r=t.Zo;return(2===t.Nc||8===t.Nc)&&(n=o-1-n),((t=2===t.Nc||4===t.Nc)?e.y<r.y:e.x<r.x)?i+8*n:(t?e.y===r.y:e.x===r.x)?i:i+8*(o-1-n)},fa.className="Knot",Ep.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Nc.toString()+":"+this.Uo.toString()+"/"+this.Gl.toString()+" "+this.Zo.toString()+" "+this.Ku.toString()+" "+this.iv.toString()},Ep.className="LinkInfo",pe.prototype.cloneProtected=function(t){t.sn=this.sn,t.Gh=this.Gh,t.yn=this.yn,t.Am.assign(this.Am),t.vn=this.vn,t.un=this.un,t.Em=this.Em,t.xn=!0},pe.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},pe.prototype.qb=function(){},pe.prototype.toString=function(){var t=io(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},pe.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Cc(),this.isOngoing&&t.pi||this.isInitial&&!t.pi)&&(this.isValidLayout=!1,t.ac())}}},pe.prototype.createNetwork=function(){return new se(this)},pe.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof q?(e.lg(t.nodes,!0),e.lg(t.links,!0)):e.lg(t instanceof Nt?t.memberParts:t.iterator),e},pe.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(null!==i&&null!==(t=i.diagram))break}try{null!==t&&t.Ea("Layout"),this.commitLayout()}finally{null!==t&&t.eb("Layout")}},pe.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},pe.prototype.doLayout=function(t){var e=new rt;t instanceof q?(ns(this,e,t.nodes,!0,this.rh,!0,!1,!0),ns(this,e,t.parts,!0,this.rh,!0,!1,!0)):t instanceof Nt?ns(this,e,t.memberParts,!1,this.rh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.Ea("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.eb("Layout")),this.isValidLayout=!0},pe.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,o=this.arrangementOrigin.y,r=0,l=0;for(t=t.iterator;t.next();){var u=t.value;Bh(u);var c=u.measuredBounds,p=c.width;c=c.height,u.moveTo(n,o),u instanceof Nt&&(u.rh=!1),n+=Math.max(p,50)+20,l=Math.max(l,Math.max(c,50)),r>=e-1?(r=0,n=i,o+=l+20,l=0):r++}},pe.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,o=0,r=0,l=this.network.vertexes.iterator;l.next();){var u=l.value.node;if(!(null===u||u instanceof st)&&(Bh(u),this.rh(u))){var c=u.measuredBounds,p=c.width;c=c.height,u.moveTo(i,n),u instanceof Nt&&(u.rh=!1),i+=Math.max(p,50)+20,r=Math.max(r,Math.max(c,50)),o>=t-1?(o=0,i=e,n+=r+20,r=0):o++}}},pe.prototype.rh=function(t){return!(t.location.w()&&!(t instanceof Nt&&t.rh))},pe.prototype.ni=function(t,e){var i=this.boundsComputation;return null!==i?(e||(e=new $),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},pe.prototype.gx=function(t){var e=new rt;return t instanceof q?(ns(this,e,t.nodes,!0,null,!0,!0,!0),ns(this,e,t.links,!0,null,!0,!0,!0),ns(this,e,t.parts,!0,null,!0,!0,!0)):ns(this,e,t instanceof Nt?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},pe.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),null!==(e=e.placeholder)&&(i=e.ga(w),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=(t=e.padding).left,i.y+=t.top),i}return t},Ot.Object.defineProperties(pe.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,null!==t&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.sn},set:function(t){this.sn!==t&&(this.sn=t)}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t,t||(this.xn=!0)}},isViewportSized:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t)&&this.C()}},isRouting:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t)}},isRealtime:{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t)}},isValidLayout:{get:function(){return this.xn},set:function(t){this.xn!==t&&(this.xn=t,t||null!==(t=this.diagram)&&(t.xh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.Em},set:function(t){this.Em!==t&&(this.Em=t,this.C())}},arrangementOrigin:{get:function(){return this.Am},set:function(t){this.Am.D(t)||(this.Am.assign(t),this.C())}}}),pe.prototype.collectParts=pe.prototype.gx,pe.prototype.getLayoutBounds=pe.prototype.ni,pe.prototype.invalidateLayout=pe.prototype.C,pe.className="Layout",se.prototype.clear=function(){if(this.wf)for(var t=this.wf.iterator;t.next();)t.value.clear();if(this.ye)for(t=this.ye.iterator;t.next();)t.value.clear();this.wf=new rt,this.ye=new rt,this.Es=new Tt,this.zs=new Tt},se.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.wf.count+" edges: "+this.ye.count,1<t){for(var i=this.wf.iterator;i.next();)e+="\n    "+i.value.toString(t-1);for(i=this.ye.iterator;i.next();)e+="\n    "+i.value.toString(t-1)}return e},se.prototype.createVertex=function(){return new Ue(this)},se.prototype.createEdge=function(){return new tn(this)},se.prototype.lg=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),void 0===i&&(i=null),null===i&&(i=function(l){if(l instanceof dt)return!l.isLinkLabel;if(l instanceof st){var u=l.fromNode;return null!==u&&!u.isLinkLabel&&!(null===(l=l.toNode)||l.isLinkLabel)}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof dt&&(!e||n.isTopLevel)&&n.canLayout()&&i(n))if(n instanceof Nt&&null===n.layout)this.lg(n.memberParts,!1);else if(null===this.ki(n)){var o=this.createVertex();o.node=n,this.dh(o)}}for(t.reset();t.next();)if((n=t.value)instanceof st&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&null===this.Lo(n)){var r=n.fromNode;o=n.toNode,null!==r&&null!==o&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),null!==r&&null!==o&&this.Yj(r,o,n))}}},se.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.ki(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.ki(e)))return t;e=e.containingGroup}return null},(v=se.prototype).dh=function(t){if(null!==t){this.wf.add(t);var e=t.node;null!==e&&this.Es.add(e,t),t.network=this}},v.Bl=function(t){if(null===t)return null;var e=this.ki(t);return null===e&&((e=this.createVertex()).node=t,this.dh(e)),e},v.Ju=function(t){if(null!==t&&cy(this,t)){for(var e=t.tg,i=e.count-1;0<=i;i--){var n=e.M(i);this.Lj(n)}for(t=(e=t.mg).count-1;0<=t;t--)i=e.M(t),this.Lj(i)}},v.$y=function(t){null!==t&&null!==(t=this.ki(t))&&this.Ju(t)},v.ki=function(t){return null===t?null:this.Es.I(t)},v.Bo=function(t){if(null!==t){Dp(this,t);var e=t.toVertex;null!==e&&e.Cl(t),null!==(e=t.fromVertex)&&e.zl(t)}},v.Ey=function(t){if(null===t)return null;var e=t.fromNode,i=t.toNode,n=this.Lo(t);return null===n?((n=this.createEdge()).link=t,null!==e&&(n.fromVertex=this.Bl(e)),null!==i&&(n.toVertex=this.Bl(i)),this.Bo(n)):(n.fromVertex=null!==e?this.Bl(e):null,n.toVertex=null!==i?this.Bl(i):null),n},v.Lj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Kl(t),null!==(e=t.fromVertex)&&e.Jl(t),jp(this,t)}},v.Zy=function(t){null!==t&&null!==(t=this.Lo(t))&&this.Lj(t)},v.Lo=function(t){return null===t?null:this.zs.I(t)},v.Yj=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Bo(n),n}return null},v.gm=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.Jl(t),i.Kl(t),t.gm(),e.Cl(t),i.zl(t))}},v.Ko=function(){for(var t=te(),e=this.ye.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Lj(t[i]);$t(t)},se.prototype.deleteArtificialVertexes=function(){for(var t=te(),e=this.wf.iterator;e.next();){var i=e.value;null===i.node&&null===i.data&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Ju(t[e]);for(e=te(),i=this.ye.iterator;i.next();){var n=i.value;null===n.link&&null===n.data&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Lj(e[n]);$t(t),$t(e)},se.prototype.$x=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function sx(t){for(var e=te(),i=t.ye.iterator;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Lj(e[n]);$t(e)}(this),this.Ko()),t=new ot;for(var e=!0;e;){e=!1;for(var i=this.wf.iterator;i.next();){var n=i.value;if(0<n.tg.count||0<n.mg.count){e=this.layout.createNetwork(),t.add(e),Bp(this,e,n),e=!0;break}}}return t.sort(function(o,r){return null===o||null===r||o===r?0:r.vertexes.count-o.vertexes.count}),t},se.prototype.ez=function(){for(var t=new rt,e=this.wf.iterator;e.next();)t.add(e.value.node);for(e=this.ye.iterator;e.next();)t.add(e.value.link);return t},Ot.Object.defineProperties(se.prototype,{layout:{get:function(){return this.Sc},set:function(t){null!==t&&(this.Sc=t)}},vertexes:{get:function(){return this.wf}},edges:{get:function(){return this.ye}}}),se.prototype.findAllParts=se.prototype.ez,se.prototype.splitIntoSubNetworks=se.prototype.$x,se.prototype.deleteSelfEdges=se.prototype.Ko,se.prototype.reverseEdge=se.prototype.gm,se.prototype.linkVertexes=se.prototype.Yj,se.prototype.findEdge=se.prototype.Lo,se.prototype.deleteLink=se.prototype.Zy,se.prototype.deleteEdge=se.prototype.Lj,se.prototype.addLink=se.prototype.Ey,se.prototype.addEdge=se.prototype.Bo,se.prototype.findVertex=se.prototype.ki,se.prototype.deleteNode=se.prototype.$y,se.prototype.deleteVertex=se.prototype.Ju,se.prototype.addNode=se.prototype.Bl,se.prototype.addVertex=se.prototype.dh,se.prototype.addParts=se.prototype.lg,se.className="LayoutNetwork",Ue.prototype.clear=function(){this.Sh=this.ub=null,this.tg=new ot,this.mg=new ot},Ue.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+Ae(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.tg.iterator;n.next();){var o=n.value;i?i=!1:t+=",",t+=o.toString(0)}for(o="",i=!0,n=this.mg.iterator;n.next();)i?i=!1:o+=",",o+=n.value.toString(0);e+=" sources: "+t+" destinations: "+o}return e},Ue.prototype.commit=function(){var t=this.ub;if(null!==t){var e=this.bounds,i=t.bounds;ue(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof Nt)){i=$.alloc(),t.Va();var n=this.network.layout.ni(t,i),o=t.locationObject.ga(P);if(n.w()&&o.w())return t.moveTo(e.x+this.focusX-(o.x-n.x),e.y+this.focusY-(o.y-n.y)),void $.free(i);$.free(i)}t.moveTo(e.x,e.y)}},Ue.prototype.Cl=function(t){null!==t&&(this.tg.contains(t)||this.tg.add(t))},Ue.prototype.Kl=function(t){null!==t&&this.tg.remove(t)},Ue.prototype.zl=function(t){null!==t&&(this.mg.contains(t)||this.mg.add(t))},Ue.prototype.Jl=function(t){null!==t&&this.mg.remove(t)},Ot.Object.defineProperties(Ue.prototype,{sourceEdgesArrayAccess:{get:function(){return this.tg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.mg._dataArray}},data:{get:function(){return this.ub},set:function(t){if(this.ub=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;this.o.h(n/2,(e=e.height)/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.Sh},set:function(t){if(this.Sh!==t){this.Sh=t,t.Va();var e=this.network.layout,i=$.alloc(),n=e.ni(t,i);e=n.x;var o=n.y,r=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(o)&&(o=0),this.j.h(e,o,r,n),$.free(i),!(t instanceof Nt)&&(t=t.locationObject.ga(P)).w())return void this.o.h(t.x-e,t.y-o);this.o.h(r/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.D(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.D(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ka(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ka(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ka(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ka(),e.height=t,e.freeze())}},network:{get:function(){return this.ob},set:function(t){this.ob=t}},sourceVertexes:{get:function(){for(var t=new rt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new rt,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new rt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.tg.iterator}},destinationEdges:{get:function(){return this.mg.iterator}},edges:{get:function(){for(var t=new ot,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.tg.count+this.mg.count}}}),Ue.prototype.deleteDestinationEdge=Ue.prototype.Jl,Ue.prototype.addDestinationEdge=Ue.prototype.zl,Ue.prototype.deleteSourceEdge=Ue.prototype.Kl,Ue.prototype.addSourceEdge=Ue.prototype.Cl,Ue.className="LayoutVertex",Ue.standardComparer=zp,Ue.smartComparer=function(t,e){if(null!==t){if(null!==e){var i=e.Sh;if(null!==(t=t.Sh)){if(null!==i){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(""!==t[i]&&void 0!==t[i]){var n=parseFloat(e[i]),o=parseFloat(t[i]);if(isNaN(n)){if(!isNaN(o))return 1;if(0!==e[i].localeCompare(t[i]))return e[i].localeCompare(t[i])}else{if(isNaN(o))return-1;if(n-o!=0)return n-o}}else if(""!==e[i])return 1;return""!==t[i]&&void 0!==t[i]?-1:0}return 1}return null!==i?-1:0}return 1}return null!==e?-1:0},tn.prototype.clear=function(){this.qd=this.kd=this.Zk=this.ub=null},tn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+Ae(this);return 0<t&&(e+=null!==this.Zk?"("+this.Zk.toString()+")":"",1<t&&(e+=" "+(this.kd?this.kd.toString():"null")+" --\x3e "+(this.qd?this.qd.toString():"null"))),e},tn.prototype.gm=function(){var t=this.kd;this.kd=this.qd,this.qd=t},tn.prototype.commit=function(){},tn.prototype.Bx=function(t){return this.qd===t?this.kd:this.kd===t?this.qd:null},Ot.Object.defineProperties(tn.prototype,{network:{get:function(){return this.nb},set:function(t){this.nb=t}},data:{get:function(){return this.ub},set:function(t){this.ub!==t&&(this.ub=t)}},link:{get:function(){return this.Zk},set:function(t){this.Zk!==t&&(this.Zk=t)}},fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}}}),tn.prototype.getOtherVertex=tn.prototype.Bx,tn.className="LayoutEdge",Ut(ri,pe),ri.prototype.cloneProtected=function(t){pe.prototype.cloneProtected.call(this,t),t.zo=this.zo,t.yo=this.yo,t.yg.assign(this.yg),t.tf.assign(this.tf),t.Kb=this.Kb,t.Sb=this.Sb,t.nd=this.nd,t.hd=this.hd},ri.prototype.qb=function(t){t.classType===ri?t===Rh||t===Zc||t===Rp||t===Uc?this.sorting=t:t===Wc||t===ho?this.arrangement=t:t===zh||t===Gc?this.alignment=t:it("Unknown enum value: "+t):pe.prototype.qb.call(this,t)},ri.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.gx(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.ph()||null===n.fromNode&&null===n.toNode){if(n.Va(),n instanceof Nt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var o=e.Fa();if(0!==o.length){switch(this.sorting){case Uc:o.reverse();break;case Rh:o.sort(this.comparer);break;case Zc:o.sort(this.comparer),o.reverse()}var r=this.wrappingColumn;isNaN(r)&&(r=0);var l=this.wrappingWidth;switch(isNaN(l)&&null!==t?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=r&&0>=l&&(r=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),null!==t&&t.Ea("Layout"),n=[],this.alignment){case Gc:var u=e,c=i,p=$.alloc(),m=Math.max(this.cellSize.width,1);if(!isFinite(m))for(var x=m=0;x<o.length;x++){var b=this.ni(o[x],p);m=Math.max(m,b.width)}if(m=Math.max(m+u,1),x=Math.max(this.cellSize.height,1),!isFinite(x))for(b=x=0;b<o.length;b++){var M=this.ni(o[b],p);x=Math.max(x,M.height)}x=Math.max(x+c,1),b=this.arrangement;for(var A=M=this.arrangementOrigin.x,L=this.arrangementOrigin.y,D=0,I=0,z=0;z<o.length;z++){var X=o[z],V=this.ni(X,p),Z=Math.ceil((V.width+u)/m)*m,J=Math.ceil((V.height+c)/x)*x;if(b===ho)var ct=Math.abs(A-V.width);else ct=A+V.width;(0<r&&D>r-1||0<l&&0<D&&ct-M>l)&&(n.push(new $(0,L,l+u,I)),D=0,A=M,L+=I,I=0),I=Math.max(I,J),X.moveTo(A+(V=b===ho?-V.width:0),L),b===ho?A-=Z:A+=Z,D++}n.push(new $(0,L,l+u,I)),$.free(p);break;case zh:for(c=l,m=r,x=e,b=i,l=$.alloc(),M=Math.max(this.cellSize.width,1),r=L=p=0,u=B.alloc(),A=0;A<o.length;A++)D=this.ni(I=o[A],l),I=Ir(I,I.locationObject,I.locationSpot,u),p=Math.max(p,I.x),L=Math.max(L,D.width-I.x),r=Math.max(r,I.y);(A=this.arrangement)===ho?p+=x:L+=x,M=isFinite(M)?Math.max(M+x,1):Math.max(p+L,1);var mt=I=this.arrangementOrigin.x;for(z=this.arrangementOrigin.y,L=0,c>=p&&(c-=p),p=X=0,Z=Math.max(this.cellSize.height,1),V=r=0,J=!0,D=B.alloc(),ct=0;ct<o.length;ct++){var ft=o[ct],at=this.ni(ft,l),Q=Ir(ft,ft.locationObject,ft.locationSpot,u);if(0<L?A===ho?(mt=(mt-I-(at.width-Q.x))/M,mt=(mt=_.$(Math.round(mt),mt)?Math.round(mt):Math.floor(mt))*M+I):(mt=(mt-I+Q.x)/M,mt=(mt=_.$(Math.round(mt),mt)?Math.round(mt):Math.ceil(mt))*M+I):X=A===ho?mt+Q.x+at.width:mt-Q.x,A===ho)var Lt=-(mt+Q.x)+X;else Lt=mt+at.width-Q.x-X;if(0<m&&L>m-1||0<c&&0<L&&Lt>c){for(n.push(new $(0,J?z-r:z,c+x,V+r+b)),mt=0;mt<L&&ct!==L;mt++){var Ct=Ir(Lt=o[ct-L+mt],Lt.locationObject,Lt.locationSpot,D);Lt.moveTo(Lt.position.x,Lt.position.y+r-Ct.y)}V+=b,z=J?z+V:z+(V+r),L=V=r=0,mt=I,J=!1}mt===I&&(p=A===ho?Math.max(p,at.width-Q.x):Math.min(p,-Q.x)),r=Math.max(r,Q.y),V=Math.max(V,at.height-Q.y),isFinite(Z)&&(V=Math.max(V,Math.max(at.height,Z)-Q.y)),ft.moveTo(mt-Q.x,J?z-Q.y:z),A===ho?mt-=Q.x+x:mt+=at.width-Q.x+x,L++}if(n.push(new $(0,z,c+x,(J?V:V+r)+b)),o.length!==L)for(c=0;c<L;c++)x=Ir(m=o[o.length-L+c],m.locationObject,m.locationSpot,u),m.moveTo(m.position.x,m.position.y+r-x.y);if(B.free(u),B.free(D),A===ho)for(o=0;o<n.length;o++)(r=n[o]).width+=p,r.x-=p;else for(o=0;o<n.length;o++)(r=n[o]).x>p&&(r.width+=r.x-p,r.x=p);$.free(l)}for(u=r=l=o=0;u<n.length;u++)c=n[u],o=Math.min(o,c.x),l=Math.min(l,c.y),r=Math.max(r,c.x+c.width);this.commitLayers(n,new B(this.arrangement===ho?o+e/2-(r+o):o-e/2,l-i/2)),null!==t&&t.eb("Layout"),this.isValidLayout=!0}},ri.prototype.commitLayers=function(){},Ot.Object.defineProperties(ri.prototype,{wrappingWidth:{get:function(){return this.zo},set:function(t){this.zo!==t&&(0<t||isNaN(t))&&(this.zo=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.yo},set:function(t){this.yo!==t&&(0<t||isNaN(t))&&(this.yo=t,this.C())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||(this.yg.assign(t),this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf.D(t)||(this.tf.assign(t),this.C())}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb===t||t!==zh&&t!==Gc||(this.Kb=t,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==Wc&&t!==ho||(this.Sb=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==Rp&&t!==Uc&&t!==Rh&&t!==Zc||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}}});var Gc=new ut(ri,"Position",0),zh=new ut(ri,"Location",1),Wc=new ut(ri,"LeftToRight",2),ho=new ut(ri,"RightToLeft",3),Rp=new ut(ri,"Forward",4),Uc=new ut(ri,"Reverse",5),Rh=new ut(ri,"Ascending",6),Zc=new ut(ri,"Descending",7);function Jt(){this.On=new rt,this.Dn=new rt,this.Pa=new rt,this.cf=new Tt,this.bf=new Tt,this.aj=new Tt,this.H=null,this.tp=!1}function fy(t,e,i){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.cf.contains(e)){void 0===i&&(i=!0);t:{if(null!=e&&!t.H.undoManager.isUndoingRedoing&&!t.cf.contains(e)){var n=t.Ro(e),o=py(t,e,n);if(null!==o&&(En(o),null!==(o=o.copy()))){var r=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,o.Tf=n,o.ub=e,t.tp&&(o.Jg="Tool"),t.diagram.add(o),o.ub=null,o.data=e,t.diagram.skipsModelSourceBindings=r,n=o;break t}}n=null}null!==n&&i&&t.resolveReferencesForData(e)}}function py(t,e,i){var n=(t=t.H).model;return n.Wj()&&n.Zu(e)?null===(e=t.groupTemplateMap.I(i))&&null===(e=t.groupTemplateMap.I(""))&&(yy||(yy=!0,Pi('No Group template found for category "'+i+'"'),Pi("  Using default group template")),e=t.my):null===(e=t.nodeTemplateMap.I(i))&&null===(e=t.nodeTemplateMap.I(""))&&(my||(my=!0,Pi('No Node template found for category "'+i+'"'),Pi("  Using default node template")),e=t.oy),e}function Yp(t,e,i){for(var n in i){var o=e[n],r=i[n];if(Xe(r)){if(!Xe(o)||o.length<r.length)return!1;for(var l=0;l<o.length;l++){var u=r[l];if(void 0!==u&&!gy(t,o[l],u))return!1}}else if(!gy(t,o,r))return!1}return!0}function gy(t,e,i){if("function"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(ue(e)&&ue(i)){if(!Yp(t,e,i))return!1}else if(e!==i)return!1;return!0}function Xp(t,e){var i=e.Hh;if(Xe(i)){var n=t.aj.I(i);if(null===n)(n=[]).push(e),t.aj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function Hp(t,e,i){Is(e,function(l){for(var u=(l=l.O.s).length,c=0;c<u;c++)wf(i,l[c])});var n=e.Hh;if(Xe(n)){var o=t.aj.I(n);if(null!==o)for(var r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1),0===o.length&&t.aj.remove(n);break}}}function _c(t,e,i,n,o){if(null===e||o&&!e.canCopy())return null;if(n.contains(e))return n.I(e);var r=t.copyPartData(e,i);if(!(r instanceof wt))return null;if(r.isSelected=!1,r.isHighlighted=!1,n.add(e,r),e instanceof dt){for(var l=e.linksConnected;l.next();){var u=l.value;if(u.fromNode===e){var c=n.I(u);null!==c&&(c.fromNode=r)}u.toNode===e&&null!==(u=n.I(u))&&(u.toNode=r)}if(e instanceof Nt&&r instanceof Nt)for(e=e.memberParts;e.next();)(l=_c(t,e.value,i,n,o))instanceof st||null===l||(l.containingGroup=r)}else if(e instanceof st&&r instanceof st)for(null!==(l=e.fromNode)&&null!==(l=n.I(l))&&(r.fromNode=l),null!==(l=e.toNode)&&null!==(l=n.I(l))&&(r.toNode=l),e=e.labelNodes;e.next();)null!==(l=_c(t,e.value,i,n,o))&&l instanceof dt&&(l.labeledLink=r);return r}ri.className="GridLayout",ri.standardComparer=dy,ri.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(""!==e[i]&&void 0!==e[i]){var n=parseFloat(t[i]),o=parseFloat(e[i]);if(isNaN(n)){if(!isNaN(o))return 1;if(0!==t[i].localeCompare(e[i]))return t[i].localeCompare(e[i])}else{if(isNaN(o))return-1;if(n-o!=0)return n-o}}else if(""!==t[i])return 1;return""!==e[i]&&void 0!==e[i]?-1:0}return 1}return null!==e?-1:0},ri.Position=Gc,ri.Location=zh,ri.LeftToRight=Wc,ri.RightToLeft=ho,ri.Forward=Rp,ri.Reverse=Uc,ri.Ascending=Rh,ri.Descending=Zc,(v=Jt.prototype).clear=function(){this.On.clear(),this.Dn.clear(),this.Pa.clear(),this.cf.clear(),this.bf.clear(),this.aj.clear()},v.Xe=function(t){this.H=t},v.oi=function(t){if(t instanceof dt){if(this.On.add(t),t instanceof Nt){var e=t.containingGroup;null===e?this.H.ai.add(t):e.fl.add(t),null!==(e=t.layout)&&(e.diagram=this.H)}}else t instanceof st?this.Dn.add(t):t instanceof Vt||this.Pa.add(t);null===(e=t.data)||t instanceof Vt||(t instanceof st?this.bf.add(e,t):this.cf.add(e,t))},v.qc=function(t){if(t.Dj(),t instanceof dt){if(this.On.remove(t),t instanceof Nt){var e=t.containingGroup;null===e?this.H.ai.remove(t):e.fl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof st?this.Dn.remove(t):t instanceof Vt||this.Pa.remove(t);null===(e=t.data)||t instanceof Vt||(t instanceof st?this.bf.remove(e):this.cf.remove(e))},v.Wd=function(){var t=this.H;if(null!==t){for(var e=t.nodeTemplateMap.iterator;e.next();){var i=e.value,n=e.key;(!i.Zc()||i instanceof Nt)&&it('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(e=t.groupTemplateMap.iterator;e.next();)n=e.key,(i=e.value)instanceof Nt||it('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(e=t.linkTemplateMap.iterator;e.next();)n=e.key,(i=e.value)instanceof st||it('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(e=te(),i=t.selection.iterator;i.next();)(n=i.value.data)&&e.push(n);for(i=te(),t=t.highlighteds.iterator;t.next();)(n=t.value.data)&&i.push(n);for(t=te(),n=this.nodes.iterator;n.next();){var o=n.value;null!==o.data&&(t.push(o.data),t.push(o.location))}for(n=this.links.iterator;n.next();)null!==(o=n.value).data&&(t.push(o.data),t.push(o.location));for(n=this.parts.iterator;n.next();)null!==(o=n.value).data&&(t.push(o.data),t.push(o.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<e.length;n++)null!==(o=this.Lc(e[n]))&&(o.isSelected=!0);for(n=0;n<i.length;n++)null!==(o=this.Lc(i[n]))&&(o.isHighlighted=!0);for(n=0;n<t.length;n+=2)null!==(o=this.Lc(t[n]))&&(o.location=t[n+1]);$t(e),$t(i),$t(t)}},Jt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Jt.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(o){n.lb(o)&&fy(i,o,!1)}),t.forEach(function(o){n.lb(o)&&i.resolveReferencesForData(o)}),!1!==e&&Hu(this.diagram,!1)},Jt.prototype.insertLink=function(){return null},Jt.prototype.resolveReferencesForData=function(){},Jt.prototype.Ro=function(t){return this.H.model.Ro(t)},Jt.prototype.getLinkCategoryForData=function(){return""},Jt.prototype.setLinkCategoryForData=function(){},Jt.prototype.setFromNodeForLink=function(){},Jt.prototype.setToNodeForLink=function(){},Jt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,i=e.linkTemplateMap.I(t);return null===i&&null===(i=e.linkTemplateMap.I(""))&&(vy||(vy=!0,Pi('No Link template found for category "'+t+'"'),Pi("  Using default link template")),i=e.ny),i},Jt.prototype.removeAllModeledParts=function(){this.Gs(this.diagram.model.nodeDataArray)},Jt.prototype.Gs=function(t){var e=this;t.forEach(function(i){e.ip(i)})},Jt.prototype.ip=function(t){null!==(t=this.Lc(t))&&(pf(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Jt.prototype.unresolveReferencesForPart=function(){},Jt.prototype.removeDataForLink=function(){},Jt.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.H.model.ic(t))?this.cf.I(t):null},Jt.prototype.Wb=function(t){return null==t||null===(t=this.H.model.ic(t))?null:(t=this.cf.I(t))instanceof dt?t:null},Jt.prototype.findLinkForKey=function(){return null},(v=Jt.prototype).Lc=function(t){if(null===t)return null;var e=this.cf.I(t);return null!==e?e:e=this.bf.I(t)},v.ii=function(t){return null===t?null:(t=this.cf.I(t))instanceof dt?t:null},v.Kc=function(t){return null===t?null:this.bf.I(t)},v.ms=function(t){for(var e=0;e<arguments.length;++e);e=new rt;for(var i=this.On.iterator;i.next();){var n=i.value,o=n.data;if(null!==o)for(var r=0;r<arguments.length;r++){var l=arguments[r];if(ue(l)&&Yp(this,o,l)){e.add(n);break}}}return e.iterator},v.ls=function(t){for(var e=0;e<arguments.length;++e);e=new rt;for(var i=this.Dn.iterator;i.next();){var n=i.value,o=n.data;if(null!==o)for(var r=0;r<arguments.length;r++){var l=arguments[r];if(ue(l)&&Yp(this,o,l)){e.add(n);break}}}return e.iterator},Jt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.aa){e.aa=!1;try{var n=t.modelChange;if(""!==n)if(i===ve){if("nodeCategory"===n){var o=this.Lc(t.object),r=t.newValue;null!==o&&"string"==typeof r&&(o.category=r)}else"nodeDataArray"===n&&(this.Gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===Ke){var l=t.newValue;"nodeDataArray"===n&&ue(l)&&fy(this,l),e.isModified=!0}else if(i===Qe){var u=t.oldValue;"nodeDataArray"===n&&ue(u)&&this.ip(u),e.isModified=!0}else i===ro&&("SourceChanged"===n?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.rp(),this.updateAllTargetBindings()):"ModelDisplaced"===n&&this.Wd());else if(i===ve){var c=t.propertyName,p=t.object;p===e.model?("nodeKeyProperty"===c||"nodeCategoryProperty"===c)&&(e.undoManager.isUndoingRedoing||this.Wd()):this.updateDataBindings(p,c),e.isModified=!0}else if(i===Ke||i===Qe){var m=t.change===Ke,x=m?t.newParam:t.oldParam,b=m?t.newValue:t.oldValue,M=this.aj.I(t.object);if(Array.isArray(M))for(t=0;t<M.length;t++){var A=M[t];if(m)dc(A,b,x,!0);else if(!(0>x)){var L=x+wh(A);A.qc(L,!0),ep(A,L,x)}}e.isModified=!0}}finally{e.aa=!0}}}}},Jt.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.La(t);for(e=this.nodes.iterator;e.next();)e.value.La(t);for(e=this.links.iterator;e.next();)e.value.La(t)},Jt.prototype.rp=function(){for(var t=this.H.model,e=new rt,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var o=[];for(this.nodes.each(function(l){null===l.data||e.contains(l.data)||o.push(l.data)}),this.parts.each(function(l){null===l.data||e.contains(l.data)||o.push(l.data)}),o.forEach(function(l){Py(t,l,!1)}),n=0;n<i.length;n++){var r=i[n];null===this.Lc(r)&&Ay(t,r,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Jt.prototype.refreshDataBoundLinks=function(){},Jt.prototype.updateRelationshipsFromData=function(){},Jt.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var i=this.Lc(t);if(null!==i)i.La(e);else{i=null;for(var n=this.aj.iterator;n.next();){for(var o=n.value,r=0;r<o.length;r++){var l=o[r].tx(t);null!==l&&(null===i&&(i=te()),i.push(l))}if(null!==i)break}if(null!==i){for(n=0;n<i.length;n++)i[n].La(e);$t(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Jt.prototype.Jj=function(t,e,i){void 0===i&&(i=!1);var n=new Tt;if(Xe(t))for(var o=0;o<t.length;o++)_c(this,t[o],e,n,i);else for(t=t.iterator;t.next();)_c(this,t.value,e,n,i);if(null!==e){i=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Wm.dragsLink,o=new rt;for(var r=new Tt,l=n.iterator;l.next();){var u=l.value;if(u instanceof st)t||null!==u.fromNode&&null!==u.toNode||o.add(u);else if(u instanceof dt&&null!==u.data&&i.Tl()){var c=u,p=(u=l.key).pg();null!==p&&(null!==(p=n.I(p))?(i.qe(c.data,i.wa(p.data)),c=e.Kc(c.data),null!==(u=u.kh())&&null!==c&&r.add(u,c)):i.qe(c.data,void 0))}}if(0<o.count&&e.Is(o,!1),0<r.count)for(i=r.iterator;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.H&&null!==(i=(e=e.model).afterCopyFunction)){var m=new Tt;n.each(function(x){null!==x.key.data&&m.add(x.key.data,x.value.data)}),i(m,e,this.H.model)}for(e=n.iterator;e.next();)e.value.La();return n},Jt.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(null!==n&&null!==e){var o=e.model;t instanceof st||ue(n=o.copyNodeData(n))&&(o.xf(n),i=e.Lc(n))}else En(t),null!==(i=t.copy())&&(o=this.H,null!==e?e.add(i):null!==n&&null!==o&&null!==o.commandHandler&&o.commandHandler.copiesClipboardData&&(e=o.model,o=null,i instanceof st||(o=e.copyNodeData(n)),ue(o)&&(i.data=o)));return i},Ot.Object.defineProperties(Jt.prototype,{nodes:{get:function(){return this.On}},links:{get:function(){return this.Dn}},parts:{get:function(){return this.Pa}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.tp},set:function(t){this.tp=t}}}),Jt.prototype.updateAllRelationshipsFromData=Jt.prototype.rp,Jt.prototype.findLinksByExample=Jt.prototype.ls,Jt.prototype.findNodesByExample=Jt.prototype.ms,Jt.prototype.findLinkForData=Jt.prototype.Kc,Jt.prototype.findNodeForData=Jt.prototype.ii,Jt.prototype.findPartForData=Jt.prototype.Lc,Jt.prototype.findNodeForKey=Jt.prototype.Wb,Jt.prototype.removeModeledPart=Jt.prototype.ip,Jt.prototype.removeModeledParts=Jt.prototype.Gs,Jt.prototype.rebuildParts=Jt.prototype.Wd;var my=!1,yy=!1,vy=!1;function ti(t){Jt.apply(this,arguments)}function xy(t,e){e.forEach(function(i){wy(t,i)}),Hu(t.diagram,!1)}function wy(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.bf.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(null!==n){En(n);var o=n.copy();if(null!==o){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,o.Tf=i,o.ub=e;var r=$c(i=t.diagram.model,e,!0);""!==r&&(o.fromPortId=r),void 0!==(r=fn(i,e,!0))&&(r=t.Wb(r))instanceof dt&&(o.fromNode=r),""!==(r=$c(i,e,!1))&&(o.toPortId=r),void 0!==(r=fn(i,e,!1))&&(r=t.Wb(r))instanceof dt&&(o.toNode=r),i=i.Ef(e),Array.isArray(i)&&i.forEach(function(l){null!==(l=t.Wb(l))&&(l.labeledLink=o)}),t.tp&&(o.Jg="Tool"),t.diagram.add(o),o.ub=null,o.data=e,t.diagram.skipsModelSourceBindings=n}}}}function by(t,e){e.forEach(function(i){t.ip(i)})}function An(){Jt.apply(this,arguments),this.Sg=null}function Kc(t,e,i){if(null!==e&&null!==i&&null===i.kh()){var n=t.diagram.toolManager.findTool("Linking"),o=e,r=i;if(t.diagram.isTreePathToChildren||(o=i,r=e),(null===n||!ql(n,o,r,null,!0))&&(e=t.getLinkCategoryForData(i.data),null!==(n=t.findLinkTemplateForCategory(e))&&(En(n),null!==(n=n.copy())))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,n.Tf=e,n.ub=i.data,n.fromNode=o,n.toNode=r,t.diagram.add(n),n.ub=null,n.data=i.data,t.diagram.skipsModelSourceBindings=l}}}function yt(t,e){this.jl=new rt,this.hl=new rt,this.Xv=',\n  "insertedNodeKeys": ',this.ky=',\n  "modifiedNodeData": ',this.Zv=',\n  "removedNodeKeys": ',this.vh=null,ee(this),this.Sm=this.xa="",this.Gg=!1,this.j={},this.Tc=[],this.kb=new Tt,this.Th="key",this.Ak=this.al=null,this.Jm=this.Km=!1,this.Mm=!0,this.xm=null,this.lj="category",this.Vf=new Tt,this.Lt=new ot,this.Wg=!1,this.o=null,this.undoManager=new Ce,void 0!==t&&(Xe(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}function Sl(t,e,i,n,o,r){function l(x,b){u?(void 0===x.__gohashid&&r.push(x),n.set(x,b)):(x=mn++,n.set(x,b),o.set(x,e))}if(!ue(e))return e;r||(r=[]);var u=Object.isExtensible(e);if(n||(n=new Tt),u){var c=n.get(e);if(c)return c}else for(o||(o=new Tt),c=o.iterator;c.next();){var p=c.key;if(c.value===e&&(p=n.get(p)))return p}if(Array.isArray(e)){l(e,c=[]);for(var m=0;m<e.length;m++)c.push(Sl(t,e[m],!1,n,o,r))}else if(e instanceof B||e instanceof Pt||e instanceof $||e instanceof R||e instanceof f)c=e.copy(),l(e,c);else{if(e instanceof Kt||e instanceof lt||e instanceof ut)return e;if(e instanceof ot)c=(new ot).addAll(Sl(t,e.Fa(),!1,n,o,r)),l(e,c);else if(e instanceof rt)c=(new rt).addAll(Sl(t,e.Fa(),!1,n,o,r)),l(e,c);else if(e instanceof Tt)c=(new Tt).addAll(Sl(t,e.Fa(),!1,n,o,r)),l(e,c);else if(e instanceof Date)c=new Date(e.getTime()),l(e,c);else if(e instanceof RegExp)c=new RegExp(e),l(e,c),c.lastIndex=e.lastIndex;else if("function"==typeof e.copy)c=e.copy(),l(e,c);else for(m in l(e,c={}),e)"__gohashid"!==m&&(c[m]=Sl(t,e[m],!1,n,o,r))}return i&&r.forEach(function(x){delete x.__gohashid}),c}function Sy(t,e){ue(e=e.modelData)&&(t.dm(e),t.modelData=e)}function ky(t,e){function i(o,r){if((r=r.part)&&o!==(r=r.data)){var l=n.get(o);null===l?((l=new rt).add(r),n.add(o,l)):l.add(r)}}var n=t.vh;null===n&&(n=new Tt,e.changes.each(function(o){if(null!==o.diagram){var r=o.change;r===ve?(o=o.object.panel)&&(r=o.data)&&i(r,o):(r===Ke||r===Qe)&&(r=(o=o.object).itemArray)&&i(r,o)}}),t.vh=n)}function My(t,e){for(var i=new rt,n=0;n<t.nodeDataArray.length;n++){var o=t.nodeDataArray[n];Jc(t,e,o,o,i)}return i}function Jc(t,e,i,n,o){if(Array.isArray(i))for(var r=0;r<i.length;r++){var l=i[r];if(l===e)return o.add(n),!0;if(Jc(t,e,l,n,o))return!0}else if(ue(i)&&Object.getPrototypeOf(i)===Object.prototype)for(r in i){if((l=i[r])===e)return o.add(n),!0;if(Jc(t,e,l,n,o))return!0}return!1}function os(t,e,i){void 0===i&&(i=!1);var n=e.length;if(0>=n)return"[]";var o=new Dt;o.add("["),i&&1<n&&o.add("\n");for(var r=0;r<n;r++){var l=e[r];void 0!==l&&(0<r&&(o.add(","),i&&o.add("\n")),o.add(t.sm(l)))}return i&&1<n&&o.add("\n"),o.add("]"),o.toString()}function Cy(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function Ei(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Vp(t,e){var i=e;if(i instanceof B)e={class:"go.Point",x:Ei(i.x),y:Ei(i.y)};else if(i instanceof Pt)e={class:"go.Size",width:Ei(i.width),height:Ei(i.height)};else if(i instanceof $)e={class:"go.Rect",x:Ei(i.x),y:Ei(i.y),width:Ei(i.width),height:Ei(i.height)};else if(i instanceof R)e={class:"go.Margin",top:Ei(i.top),right:Ei(i.right),bottom:Ei(i.bottom),left:Ei(i.left)};else if(i instanceof f)e=i.sb()?{class:"go.Spot",x:Ei(i.x),y:Ei(i.y),offsetX:Ei(i.offsetX),offsetY:Ei(i.offsetY)}:{class:"go.Spot",enum:i.toString()};else if(i instanceof Kt){if(e={class:"go.Brush",type:i.type.name},i.type===Lr?e.color=i.color:(i.type===nr||i.type===Mn)&&(e.start=i.start,e.end=i.end,i.type===Mn&&(0!==i.startRadius&&(e.startRadius=Ei(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=Ei(i.endRadius)))),null!==i.colorStops){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof lt?(e={class:"go.Geometry",type:i.type.name},0!==i.startX&&(e.startX=Ei(i.startX)),0!==i.startY&&(e.startY=Ei(i.startY)),0!==i.endX&&(e.endX=Ei(i.endX)),0!==i.endY&&(e.endY=Ei(i.endY)),i.spot1.D(w)||(e.spot1=i.spot1),i.spot2.D(Y)||(e.spot2=i.spot2),i.type===lt.o&&(e.path=lt.ia(i))):i instanceof ut&&(e={class:"go.EnumValue",classType:Xh(t,i.classType),name:i.name});for(var o in n="{",i=!0,e){var r=Fe(e,o);if(!Cy(o,r))if(i?i=!1:n+=",",n+=t.quote(o)+":","points"===o&&r instanceof ot){var l="[";for(r=r.iterator;r.next();){var u=r.value;1<l.length&&(l+=","),l+=t.sm(u.x),l+=",",l+=t.sm(u.y)}n+=l+="]"}else n+=t.sm(r)}return n+"}"}function Di(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Ye(t,e,i,n,o,r,l,u,c){void 0===u&&(u=null),void 0===c&&(c=null);var p=new be;p.model=t,p.change=i,p.modelChange=e,p.propertyName=n,p.object=o,p.oldValue=r,p.oldParam=u,p.newValue=l,p.newParam=c,t.ds(p)}function rs(t){return"number"==typeof t||"string"==typeof t}function Ay(t,e,i){var n=t.wa(e);(void 0===n||t.kb.I(n)!==e)&&(t.av(e),void 0===(n=t.wa(e))&&it("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(n,e),n=null,i&&Gi(t.Tc,n=t.Tc.length,e),Ye(t,"nodeDataArray",Ke,"nodeDataArray",t,null,e,null,n),t.fm(e),t.em(e))}function Py(t,e,i){var n=t.wa(e);if(void 0!==n&&t.kb.remove(n),n=null,i){t:if(i=t.Tc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var o=0;o<n;o++)if(i[o]===e){n=o;break t}n=-1}if(0>n)return;ai(t.Tc,n)}Ye(t,"nodeDataArray",Qe,"nodeDataArray",t,e,null,n,null),t.qp(e)}function uo(t,e,i){if(void 0!==e){var n=t.Vf.I(e);null===n&&(n=new rt,t.Vf.add(e,n)),n.add(i)}}function co(t,e,i){if(void 0!==e){var n=t.Vf.I(e);n instanceof rt&&(null==i?t.Vf.remove(e):(n.remove(i),0===n.count&&t.Vf.remove(e)))}}function Yh(t,e){return void 0===e?null:(t=t.Vf.I(e))instanceof rt?t:null}function qc(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var o=qc(t,e[i],t.copiesArrayObjects);n.push(o)}return ee(n),n}if(i&&ue(e)){for(n in i=(i=e.constructor)?new i:{},o=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===n)i.__gohashid=void 0;else if(n===o)i[o]=void 0;else{var r=Fe(e,n),l=Xh(t,r);"GraphObject"===l||"Diagram"===l||"Layer"===l||"RowColumnDefinition"===l||"AnimationManager"===l||"Tool"===l||"CommandHandler"===l||"Layout"===l||"InputEvent"===l||"DiagramEvent"===l||r instanceof yt||r instanceof Ce||r instanceof hi||r instanceof be||(r=qc(t,r,!1)),de(i,n,r)}return ee(i),i}return e instanceof B||e instanceof Pt||e instanceof $||e instanceof f||e instanceof R?e.copy():e}function Gp(){return new yt}function Xh(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Xh(t,e.constructor);return typeof e}function Wp(t){return qn[t]?qn[t]:void 0!==At.go&&At.go[t]?At.go[t]:null}function Fe(t,e){if(!t||!e)return null;try{if("function"==typeof e)var i=e(t);else"function"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch{}return i}function de(t,e,i){if(t&&e)try{"function"==typeof e?e(t,i):"function"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch{}}Jt.className="PartManager",Ut(ti,Jt),ti.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),xy(this,t.linkDataArray)},ti.prototype.addModeledParts=function(t){for(Jt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)yl(t.value);Hu(this.diagram,!1)},ti.prototype.removeAllModeledParts=function(){var t=this.diagram.model;by(this,t.linkDataArray),this.Gs(t.nodeDataArray)},ti.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ps(t)},ti.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.lp(t,e)},ti.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.xv(t.data,i.wa(null!==e?e.data:null))},ti.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Cv(t.data,i.wa(null!==e?e.data:null))},ti.prototype.removeDataForLink=function(t){this.diagram.model.bm(t.data)},ti.prototype.findPartForKey=function(t){var e=Jt.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.jh(t))?this.bf.I(t):e},ti.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.jh(t))?this.bf.I(t):null},ti.prototype.doModelChanged=function(t){var e=this;if(Jt.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.aa){i.aa=!1;try{var o=t.modelChange;if(""!==o){if(n===ve){if("linkFromKey"===o){var r=this.Kc(t.object);if(null!==r){var l=this.Wb(t.newValue);r.fromNode=l}}else if("linkToKey"===o){var u=this.Kc(t.object);if(null!==u){var c=this.Wb(t.newValue);u.toNode=c}}else if("linkFromPortId"===o){var p=this.Kc(t.object);if(null!==p){var m=t.newValue;"string"==typeof m&&(p.fromPortId=m)}}else if("linkToPortId"===o){var x=this.Kc(t.object);if(null!==x){var b=t.newValue;"string"==typeof b&&(x.toPortId=b)}}else if("nodeGroupKey"===o){var M=this.Lc(t.object);if(null!==M){var A=t.newValue;if(void 0!==A){var L=this.Wb(A);M.containingGroup=L instanceof Nt?L:null}else M.containingGroup=null}}else if("linkLabelKeys"===o){var D=this.Kc(t.object);if(null!==D){var I=t.oldValue,z=t.newValue;Array.isArray(I)&&I.forEach(function(Q){0<=z.indexOf(Q)||null!==(Q=e.Wb(Q))&&(Q.labeledLink=null)}),Array.isArray(z)&&z.forEach(function(Q){null!==(Q=e.Wb(Q))&&(Q.labeledLink=D)})}}else if("linkCategory"===o){var X=this.Kc(t.object),V=t.newValue;null!==X&&"string"==typeof V&&(X.category=V)}else"linkDataArray"===o&&(by(this,t.oldValue),xy(this,t.newValue));i.isModified=!0}else if(n===Ke){var Z=t.newValue;if("linkDataArray"===o&&"object"==typeof Z&&null!==Z)wy(this,Z);else if("linkLabelKeys"===o&&rs(Z)){var J=this.Kc(t.object),ct=this.Wb(Z);null!==J&&null!==ct&&(ct.labeledLink=J)}i.isModified=!0}else if(n===Qe){var mt=t.oldValue;if("linkDataArray"===o&&"object"==typeof mt&&null!==mt)this.ip(mt);else if("linkLabelKeys"===o&&rs(mt)){var ft=this.Wb(mt);null!==ft&&(ft.labeledLink=null)}i.isModified=!0}}else if(n===ve){var at=t.propertyName;t.object!==i.model||"linkFromKeyProperty"!==at&&"linkToKeyProperty"!==at&&"linkFromPortIdProperty"!==at&&"linkToPortIdProperty"!==at&&"linkLabelKeysProperty"!==at&&"nodeIsGroupProperty"!==at&&"nodeGroupKeyProperty"!==at&&"linkCategoryProperty"!==at||i.undoManager.isUndoingRedoing||this.Wd(),i.isModified=!0}}finally{i.aa=!0}}}}},ti.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new rt,n=e.linkDataArray;n.forEach(function(r){i.add(r)});var o=[];this.links.each(function(r){null===r.data||i.contains(r.data)||o.push(r.data)}),o.forEach(function(r){Oy(e,r,!1)}),n.forEach(function(r){null===t.Kc(r)&&Iy(e,r,!1)})},ti.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;if(t instanceof st){var o=fn(n,e,!0);if(o=i.Wb(o),t.fromNode=o,o=fn(n,e,!1),o=i.Wb(o),t.toNode=o,0<(e=n.Ef(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){o=e[0];var r=t.labelNodes.first();if(n.wa(r.data)===o)return}o=(new rt).addAll(e);var l=new rt;t.labelNodes.each(function(u){null!==u.data&&void 0!==(u=n.wa(u.data))&&l.add(u)}),(e=l.copy()).hp(o),(o=o.copy()).hp(l),(0<e.count||0<o.count)&&(e.each(function(u){null!==(u=i.Wb(u))&&u.labeledLink===t&&(u.labeledLink=null)}),o.each(function(u){null!==(u=i.Wb(u))&&u.labeledLink!==t&&(u.labeledLink=t)}))}}else!(t instanceof Vt)&&(e=n.lh(e),null===(e=i.findPartForKey(e))||e instanceof Nt)&&(t.containingGroup=e)}}},ti.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(void 0!==i){var n=Yh(e,i),o=this.Lc(t);if(null!==n&&null!==o){n=n.iterator;for(var r={};n.next();){var l=n.value;e.lb(l)?o instanceof Nt&&e.lh(l)===i&&null!==(l=this.Lc(l))&&(l.containingGroup=o):(r.link=this.Kc(l),null!==r.link&&o instanceof dt&&(fn(e,l,!0)===i&&(r.link.fromNode=o),fn(e,l,!1)===i&&(r.link.toNode=o),l=e.Ef(l),Array.isArray(l)&&l.some(function(u){return function(c){return c===i&&(o.labeledLink=u.link,!0)}}(r)))),r={link:r.link}}co(e,i)}void 0!==(t=e.lh(t))&&(t=this.Wb(t))instanceof Nt&&(o.containingGroup=t)}},ti.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof dt){var i=e.wa(t.data);if(void 0!==i){for(var n=t.linksConnected;n.next();)uo(e,i,n.value.data);if(t.isLinkLabel&&null!==(n=t.labeledLink)&&uo(e,i,n.data),t instanceof Nt)for(t=t.memberParts;t.next();)e.lb(n=t.value.data)&&uo(e,i,n)}}},ti.prototype.copyPartData=function(t,e){var i=Jt.prototype.copyPartData.call(this,t,e);if(t instanceof st)if(null!==(t=t.data)&&null!==e){var n=e.model;"object"==typeof(t=n.Jo(t))&&null!==t&&(n.fi(t),i=e.Kc(t))}else null!==i&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.Jo(t))&&null!==e&&(i.data=e));return i},ti.prototype.insertLink=function(t,e,i,n){var o=this.diagram,r=o.model,l=o.toolManager.findTool("Linking"),u="";if(null!==t&&(null===e&&(e=t),null===(u=e.portId)&&(u="")),e="",null!==i&&(null===n&&(n=i),null===(e=n.portId)&&(e="")),(n=l.archetypeLinkData)instanceof st){if(En(n),null!==(r=n.copy()))return r.fromNode=t,r.fromPortId=u,r.toNode=i,r.toPortId=e,o.add(r),(t=l.archetypeLabelNodeData)instanceof dt&&(En(t),null!==(t=t.copy())&&(t.labeledLink=r,o.add(t))),r}else if(null!==n&&"object"==typeof(n=r.Jo(n))&&null!==n)return null!==t&&kl(r,n,r.wa(t.data),!0),Ml(r,n,u,!0),null!==i&&kl(r,n,r.wa(i.data),!1),Ml(r,n,e,!1),r.fi(n),null===(t=l.archetypeLabelNodeData)||t instanceof dt||"object"==typeof(t=r.copyNodeData(t))&&null!==t&&(r.xf(t),void 0!==(t=r.wa(t))&&r.Bu(n,t)),o.Kc(n);return null},ti.prototype.findLinkForKey=ti.prototype.findLinkForKey,ti.prototype.findPartForKey=ti.prototype.findPartForKey,ti.prototype.removeAllModeledParts=ti.prototype.removeAllModeledParts,ti.prototype.addModeledParts=ti.prototype.addModeledParts,ti.prototype.addAllModeledParts=ti.prototype.addAllModeledParts,ti.className="GraphLinksPartManager",Ut(An,Jt),An.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ss(t)},An.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ms(t,e)},An.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)n.qe(t.data,n.wa(e));else{var o=this.Sg;this.Sg=t,null!==i&&n.qe(i.data,void 0),n.qe(e,n.wa(null!==t.toNode?t.toNode.data:null)),this.Sg=o}},An.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(void 0===i&&(i=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var o=this.Sg;this.Sg=t,null!==i&&n.qe(i.data,void 0),n.qe(e,n.wa(null!==t.fromNode?t.fromNode.data:null)),this.Sg=o}else n.qe(t.data,n.wa(e))},An.prototype.removeDataForLink=function(t){this.diagram.model.qe(t.data,void 0)},An.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.ic(t))?this.bf.I(t):null},An.prototype.doModelChanged=function(t){if(Jt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.aa){e.aa=!1;try{var n=t.modelChange;if(""!==n){if(i===ve){if("nodeParentKey"===n){var o=t.object,r=this.Wb(t.newValue),l=this.ii(o);if(null!==this.Sg)null!==r&&(this.Sg.data=o,this.Sg.category=this.getLinkCategoryForData(o));else if(null!==l){var u=l.kh();null!==u?null===r?e.remove(u):e.isTreePathToChildren?u.fromNode=r:u.toNode=r:Kc(this,r,l)}}else if("parentLinkCategory"===n){var c=this.ii(t.object),p=t.newValue;if(null!==c&&"string"==typeof p){var m=c.kh();null!==m&&(m.category=p)}}e.isModified=!0}}else i===ve&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Wd()),e.isModified=!0)}finally{e.aa=!0}}}}},An.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var i=t.diagram;if(null!==i){var n=i.model;t instanceof dt&&(e=n.mh(e),(e=i.Wb(e))!==(n=t.pg())&&(n=t.kh(),null!==e?null!==n?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:Kc(this,e,t):null!==n&&pf(i,n,!1)))}}},An.prototype.updateDataBindings=function(t,e){Jt.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.Lc(t)&&null!==(t=this.Kc(t))&&t.La(e)},An.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(void 0!==i){var n=Yh(e,i),o=this.Lc(t);if(null!==n&&null!==o){for(n=n.iterator;n.next();){var r=n.value;e.lb(r)&&o instanceof dt&&e.mh(r)===i&&Kc(this,o,this.ii(r))}co(e,i)}void 0!==(t=e.mh(t))&&o instanceof dt&&Kc(this,t=this.Wb(t),o)}},An.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof dt){var i=e.wa(t.data),n=this.Kc(t.data);if(null!==n){n.isSelected=!1,n.isHighlighted=!1;var o=n.layer;if(null!==o){var r=o.qc(-1,n,!1);0<=r&&this.diagram.cb(Qe,"parts",o,n,null,r,null),null!==(r=n.layerChanged)&&r(n,o,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)o=t.value,e.lb(o=(n?o.toNode:o.fromNode).data)&&uo(e,i,o)}},An.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,o=i;return this.diagram.isTreePathToChildren||(n=i,o=t),null!==n&&null!==o?(e.qe(o.data,e.wa(n.data)),o.kh()):null},An.prototype.findLinkForKey=An.prototype.findLinkForKey,An.className="TreePartManager",yt.prototype.cloneProtected=function(t){t.xa=this.xa,t.Sm=this.Sm,t.Gg=this.Gg,t.Th=this.Th,t.al=this.al,t.Ak=this.Ak,t.Km=this.Km,t.Jm=this.Jm,t.Mm=this.Mm,t.xm=this.xm,t.lj=this.lj},yt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},yt.prototype.clear=function(){this.Tc=[],this.kb.clear(),this.Vf.clear(),this.undoManager.clear()},yt.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.np();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var o=t[n];e+=" "+this.wa(o)+":"+bi(o)}}return e},yt.prototype.yA=function(t){t.change!==ro&&it("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof hi?(ky(this,e),t=this.Rv(e,"FinishedUndo"===t.propertyName),this.vh=null,t):null},yt.prototype.Rv=function(t,e){var i=this,n=!1,o=new rt,r=new rt,l=new rt,u=this.vh;t.changes.each(function(x){x.model===i&&("nodeDataArray"===x.modelChange?x.change===Ke?o.add(x.newValue):x.change===Qe&&l.add(x.oldValue):i.lb(x.object)?r.add(x.object):x.change!==ve||i.modelData!==x.object&&"modelData"!==x.propertyName?null!==x.object&&(u&&u.contains(x.object)?u.get(x.object).each(function(b){i.lb(b)&&r.add(b)}):x.object instanceof yt||i.ri()&&i.Jc(x.object)||My(i,x.object).each(function(b){r.add(b)})):n=!0)});var c=this.hl;c.clear(),o.each(function(x){c.add(i.wa(x)),e||r.add(x)});var p=this.jl;p.clear(),l.each(function(x){p.add(i.wa(x)),e&&r.add(x)}),t=i.cloneDeep(r.Fa());var m=null;return n&&(null===m&&(m={}),m.modelData=this.cloneDeep(this.modelData)),0<c.count&&(null===m&&(m={}),e?m.removedNodeKeys=c.Fa():m.insertedNodeKeys=c.Fa()),0<t.length&&(null===m&&(m={}),m.modifiedNodeData=t),0<p.count&&(null===m&&(m={}),e?m.insertedNodeKeys=p.Fa():m.removedNodeKeys=p.Fa()),p.clear(),c.clear(),m},yt.prototype.cloneDeep=function(t){return Sl(this,t,!0)},(v=yt.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},v.rm=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},v.gp=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},v.Sv=function(){var i,t=this.modelData,e=!1;for(i in t)if(!Cy(i,t[i])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+Vp(this,this.modelData)),t+',\n  "nodeDataArray": '+os(this,this.nodeDataArray,!0)},v.lv=function(t){Sy(this,t),Xe(t=t.nodeDataArray)&&(this.dm(t),this.nodeDataArray=t)},v.Qv=function(t,e){var i=this,n=!1,o=new rt,r=new rt,l=new rt,u=this.vh;t.changes.each(function(m){m.model===i&&("nodeDataArray"===m.modelChange?m.change===Ke?o.add(m.newValue):m.change===Qe&&l.add(m.oldValue):i.lb(m.object)?r.add(m.object):m.change!==ve||i.modelData!==m.object&&"modelData"!==m.propertyName?null!==m.object&&(u&&u.contains(m.object)?u.get(m.object).each(function(x){i.lb(x)&&r.add(x)}):m.object instanceof yt||i.ri()&&i.Jc(m.object)||My(i,m.object).each(function(x){r.add(x)})):n=!0)});var c=this.hl;c.clear(),o.each(function(m){c.add(i.wa(m)),e||r.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(i.wa(m)),e&&r.add(m)}),t="",n&&(t+=',\n  "modelData": '+Vp(this,this.modelData)),0<c.count&&(t+=(e?this.Zv:this.Xv)+os(this,c.Fa(),!0)),0<r.count&&(t+=this.ky+os(this,r.Fa(),!0)),0<p.count&&(t+=(e?this.Xv:this.Zv)+os(this,p.Fa(),!0)),p.clear(),c.clear(),t},v.fp=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&it("applyIncrementalJson cannot change Model properties"),Sy(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new Tt;if(Array.isArray(i))for(var o=0;o<i.length;o++){var r=i[o],l=this.wa(r);null!=l&&n.set(l,r)}if(Array.isArray(e))for(o=e.length,r=0;r<o;r++){var u=this.ic(l=e[r]);null===u&&(u=(u=n.get(l))?u:this.copyNodeData({}),this.km(u,l),this.xf(u))}if(Array.isArray(i))for(e=i.length,n=0;n<e;n++)if(r=this.wa(o=i[n]),null!==(r=this.ic(r))){for(var c in o)"__gohashid"===c||c===this.nodeKeyProperty||this.Vj()&&c===this.nodeIsGroupProperty||this.setDataProperty(r,c,o[c]);this.lm(o,r)}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,c=0;c<i;c++)null!==(e=this.ic(t[c]))&&this.cm(e)},v.ay=function(t,e){t.change!==ro&&it("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof hi?(void 0===e&&(e=Xh(this,this)),ky(this,i),t=this.Qv(i,"FinishedUndo"===t.propertyName),this.vh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.rm()+t+"}"):'{ "incremental": 0 }'},v.zA=function(t,e){return this.ay(t,e)},v.np=function(t){return void 0===t&&(t=Xh(this,this)),'{ "class": '+this.quote(t)+this.rm()+this.Sv()+"}"},v.toJSON=function(t){return this.np(t)},v.$w=function(t){var e=null;if("string"==typeof t)try{e=At.JSON.parse(t)}catch{}else"object"==typeof t?e=t:it("Unable to modify a Model from: "+t);var i=e.incremental;"number"!=typeof i&&it("Unable to apply non-incremental changes to Model: "+t),0!==i&&(this.Ea("applyIncrementalJson"),this.fp(e),this.eb("applyIncrementalJson"))},v.Ly=function(t){return this.$w(t)},yt.constructGraphLinksModel=function(){return new yt},(v=yt.prototype).dm=function(t){if(Xe(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(ue(n)){var o=i;n=this.dm(n),Array.isArray(t)?t[o]=n:it("Cannot replace an object in an HTMLCollection or NodeList at "+o)}}else if(ue(t)){for(e in t)if(ue(i=t[e])&&(i=this.dm(i),t[e]=i,"points"===e&&Array.isArray(i))){for(o=i.length%2==0,n=0;n<i.length;n++)if("number"!=typeof i[n]){o=!1;break}if(o){for(o=new ot,n=0;n<i.length/2;n++)o.add(new B(i[2*n],i[2*n+1]));o.freeze(),t[e]=o}}return function ax(t){if("object"!=typeof t)return t;var e=t.class||"";if("string"!=typeof e||!e)return t;if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var i=t;if("Point"===(e=e.substr(3)))i=new B(Di(t.x),Di(t.y));else if("Size"===e)i=new Pt(Di(t.width),Di(t.height));else if("Rect"===e)i=new $(Di(t.x),Di(t.y),Di(t.width),Di(t.height));else if("Margin"===e)i=new R(Di(t.top),Di(t.right),Di(t.bottom),Di(t.left));else if("Spot"===e)i="string"==typeof t.enum?Ba(t.enum):new f(Di(t.x),Di(t.y),Di(t.offsetX),Di(t.offsetY));else if("Brush"===e){if((i=new Kt).type=Ti(Kt,t.type),"string"==typeof t.color&&(i.color=t.color),t.start instanceof f&&(i.start=t.start),t.end instanceof f&&(i.end=t.end),"number"==typeof t.startRadius&&(i.startRadius=Di(t.startRadius)),"number"==typeof t.endRadius&&(i.endRadius=Di(t.endRadius)),ue(t=t.colorStops))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else"Geometry"===e?(i=null,(i="string"==typeof t.path?lt.parse(t.path):new lt).type=Ti(lt,t.type),"number"==typeof t.startX&&(i.startX=Di(t.startX)),"number"==typeof t.startY&&(i.startY=Di(t.startY)),"number"==typeof t.endX&&(i.endX=Di(t.endX)),"number"==typeof t.endY&&(i.endY=Di(t.endY)),t.spot1 instanceof f&&(i.spot1=t.spot1),t.spot2 instanceof f&&(i.spot2=t.spot2)):"EnumValue"===e&&(0===(n=t.classType).indexOf("go.")&&(n=n.substr(3)),"function"==typeof(n=Wp(n))&&(i=Ti(n,t.name)));return i}(t)}return t},v.sm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.sm(t.valueOf()):Xe(t)?os(this,t):ue(t)?Vp(this,t):"function"==typeof t?"null":t.toString()},v.Pe=function(t){return this.Lt.add(t),this},v.hk=function(t){this.Lt.remove(t)},v.ds=function(t){this.skipsUndoManager||this.undoManager.Uu(t);for(var e=this.Lt,i=e.length,n=0;n<i;n++)e.M(n)(t)},v.cb=function(t,e,i,n,o,r,l){Ye(this,"",t,e,i,n,o,r,l)},v.g=function(t,e,i,n,o){Ye(this,"",ve,t,this,e,i,n,o)},v.Fs=function(t,e,i,n,o,r){Ye(this,"",ve,e,t,i,n,o,r)},yt.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===ve){var i=t.object,n=t.propertyName,o=t.I(e);n===this.nodeKeyProperty&&this.lb(i)&&(void 0!==(e=t.I(!e))&&this.kb.remove(e),void 0!==o&&this.kb.add(o,i)),de(i,n,o)}else t.change===Ke?(i=t.newParam,"nodeDataArray"===t.modelChange?ue(t=t.newValue)&&"number"==typeof i&&(n=this.wa(t),e?(this.Tc[i]===t&&ai(this.Tc,i),void 0!==n&&this.kb.remove(n)):(this.Tc[i]!==t&&Gi(this.Tc,i,t),void 0!==n&&this.kb.add(n,t))):""===t.modelChange?((n=t.object)&&!Xe(n)&&t.propertyName&&(n=Fe(t.object,t.propertyName)),Xe(n)&&"number"==typeof i&&(t=t.newValue,e?ai(n,i):Gi(n,i,t))):it("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Qe?(i=t.oldParam,"nodeDataArray"===t.modelChange?ue(t=t.oldValue)&&"number"==typeof i&&(n=this.wa(t),e?(this.Tc[i]!==t&&Gi(this.Tc,i,t),void 0!==n&&this.kb.add(n,t)):(this.Tc[i]===t&&ai(this.Tc,i),void 0!==n&&this.kb.remove(n))):""===t.modelChange?((n=t.object)&&!Xe(n)&&t.propertyName&&(n=Fe(t.object,t.propertyName)),Xe(n)&&"number"==typeof i&&(t=t.oldValue,e?Gi(n,i,t):ai(n,i))):it("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==ro&&it("unknown ChangedEvent: "+t.toString())},yt.prototype.Ea=function(t){return this.undoManager.Ea(t)},yt.prototype.eb=function(t){return this.undoManager.eb(t)},yt.prototype.Kf=function(){return this.undoManager.Kf()},yt.prototype.commit=function(t,e){void 0===e&&(e="");var i=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},(v=yt.prototype).La=function(t,e){void 0===e&&(e=""),Ye(this,"SourceChanged",ro,e,t,null,null)},v.wa=function(t){if(null!==t){var e=this.Th;if(""!==e&&void 0!==(e=Fe(t,e))){if(rs(e))return e;it("Key value for node data "+t+" is not a number or a string: "+e)}}},v.km=function(t,e){if(null!==t){var i=this.Th;if(""!==i)if(this.lb(t)){var n=Fe(t,i);n!==e&&null===this.ic(e)&&(de(t,i,e),void 0!==n&&this.kb.remove(n),this.kb.add(e,t),Ye(this,"nodeKey",ve,i,t,n,e),"string"==typeof i&&this.La(t,i),this.jp(n,e))}else de(t,i,e)}},v.lb=function(t){var e=this.wa(t);return void 0!==e&&this.kb.I(e)===t},v.ic=function(t){return null===t&&it("Model.findNodeDataForKey:key must not be null"),void 0!==t&&rs(t)?this.kb.I(t):null},v.av=function(t){if(null!==t){var e=this.Th;if(""!==e){var i=this.wa(t);if(void 0===i||this.kb.contains(i)){var n=this.al;if(null!==n&&null!=(i=n(this,t))&&!this.kb.contains(i))return void de(t,e,i);if("string"==typeof i){for(n=2;this.kb.contains(i+n);)n++;de(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.kb.count-1;this.kb.contains(i);)i--;de(t,e,i)}}}}},v.xf=function(t){null!==t&&(fi(t),this.lb(t)||Ay(this,t,!0))},v.Gy=function(t){if(Xe(t))for(var e=t.length,i=0;i<e;i++)this.xf(t[i]);else for(t=t.iterator;t.next();)this.xf(t.value)},v.cm=function(t){null!==t&&Py(this,t,!0)},v.oA=function(t){if(Xe(t))for(var e=t.length,i=0;i<e;i++)this.cm(t[i]);else for(t=t.iterator;t.next();)this.cm(t.value)},v.aA=function(t){if(t!==this.nodeDataArray&&Xe(t)){var e=this.jl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,o=0;o<n;o++){var r=t[o],l=this.wa(r);if(void 0!==l){i.add(l);var u=this.ic(l);u!==r&&(null!==u?(this.Do(u,r),this.lm(r,u)):(r=this.cloneDeep(r),this.km(r,l),this.xf(r)))}else l=this.cloneDeep(r),this.xf(l),i.add(this.wa(l))}for(t=e.iterator;t.next();)i.contains(n=t.value)||(n=this.ic(n))&&this.cm(n);e.clear(),i.clear()}},v.jp=function(t,e){void 0!==e&&(t=Yh(this,t))instanceof rt&&this.Vf.add(e,t)},v.Mv=function(){},v.fm=function(){},v.em=function(){},v.qp=function(){},v.Ry=function(t){void 0===t?this.Vf.clear():this.Vf.remove(t)},yt.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Ak;return ue(t=null!==e?e(t,this):qc(this,t,!0))&&ee(t),t},yt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i)}else!Ty&&t instanceof vt&&(Ty=!0,Pi('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Pi("  Is that really your intent?"));var n=Fe(t,e);n!==i&&(de(t,e,i),this.Fs(t,e,n,i))},(v=yt.prototype).set=function(t,e,i){this.setDataProperty(t,e,i)},v.Do=function(t,e){if(e){var n,i=this.lb(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},v.By=function(t,e){this.ts(t,-1,e)},v.ts=function(t,e,i){0>e&&(e=t.length),Gi(t,e,i),Ye(this,"",Ke,"",t,null,i,null,e)},v.pv=function(t,e){void 0===e&&(e=-1),t===this.Tc&&it("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var i=t[e];ai(t,e),Ye(this,"",Qe,"",t,i,null,e,null)},v.Ro=function(t){if(null===t)return"";var e=this.lj;return""===e||void 0===(e=Fe(t,e))?"":"string"==typeof e?e:void it("getCategoryForNodeData found a non-string category for "+t+": "+e)},v.jm=function(t,e){if(null!==t){var i=this.lj;if(""!==i)if(this.lb(t)){var n=Fe(t,i);void 0===n&&(n=""),n!==e&&(de(t,i,e),Ye(this,"nodeCategory",ve,i,t,n,e))}else de(t,i,e)}},v.lm=function(t,e){this.jm(e,this.Ro(t))},v.Tl=function(){return!1},v.Vj=function(){return!1},v.ri=function(){return!1},v.xs=function(){return!1},v.Wj=function(){return!1},Ot.Object.defineProperties(yt.prototype,{name:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(this.xa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.La(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(null!==e&&e.Sx(this),this.o=t,null!==t&&t.Yw(this))}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t}},nodeKeyProperty:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(""===t&&it("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&it("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Th=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.al},set:function(t){var e=this.al;e!==t&&(this.al=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Tc},set:function(t){var e=this.Tc;if(e!==t){this.kb.clear(),this.Mv();for(var i=t.length,n=0;n<i;n++){var o=t[n];ue(o)||it("Model.nodeDataArray must only contain Objects, not: "+o),fi(o)}for(this.Tc=t,n=new ot,o=0;o<i;o++){var r=t[o],l=this.wa(r);void 0===l||null!==this.kb.I(l)?n.add(r):this.kb.add(l,r)}for(n=n.iterator;n.next();)this.av(o=n.value),void 0!==(r=this.wa(o))&&this.kb.add(r,o);for(Ye(this,"nodeDataArray",ve,"nodeDataArray",this,e,t),e=0;e<i;e++)this.fm(n=t[e]),this.em(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(this.Ak=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Km},set:function(t){var e=this.Km;e!==t&&(this.Km=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Jm},set:function(t){var e=this.Jm;e!==t&&(this.Jm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Mm},set:function(t){var e=this.Mm;e!==t&&(this.Mm=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),yt.prototype.setCategoryForNodeData=yt.prototype.jm,yt.prototype.getCategoryForNodeData=yt.prototype.Ro,yt.prototype.removeArrayItem=yt.prototype.pv,yt.prototype.insertArrayItem=yt.prototype.ts,yt.prototype.addArrayItem=yt.prototype.By,yt.prototype.assignAllDataProperties=yt.prototype.Do,yt.prototype.set=yt.prototype.set,yt.prototype.clearUnresolvedReferences=yt.prototype.Ry,yt.prototype.mergeNodeDataArray=yt.prototype.aA,yt.prototype.removeNodeDataCollection=yt.prototype.oA,yt.prototype.removeNodeData=yt.prototype.cm,yt.prototype.addNodeDataCollection=yt.prototype.Gy,yt.prototype.addNodeData=yt.prototype.xf,yt.prototype.makeNodeDataKeyUnique=yt.prototype.av,yt.prototype.findNodeDataForKey=yt.prototype.ic,yt.prototype.containsNodeData=yt.prototype.lb,yt.prototype.setKeyForNodeData=yt.prototype.km,yt.prototype.getKeyForNodeData=yt.prototype.wa,yt.prototype.updateTargetBindings=yt.prototype.La,yt.prototype.commit=yt.prototype.commit,yt.prototype.rollbackTransaction=yt.prototype.Kf,yt.prototype.commitTransaction=yt.prototype.eb,yt.prototype.startTransaction=yt.prototype.Ea,yt.prototype.raiseDataChanged=yt.prototype.Fs,yt.prototype.raiseChanged=yt.prototype.g,yt.prototype.raiseChangedEvent=yt.prototype.cb,yt.prototype.removeChangedListener=yt.prototype.hk,yt.prototype.addChangedListener=yt.prototype.Pe,yt.prototype.writeJsonValue=yt.prototype.sm,yt.prototype.replaceJsonObjects=yt.prototype.dm,yt.prototype.applyIncrementalJSON=yt.prototype.Ly,yt.prototype.applyIncrementalJson=yt.prototype.$w,yt.prototype.toJSON=yt.prototype.toJSON,yt.prototype.toJson=yt.prototype.np,yt.prototype.toIncrementalJSON=yt.prototype.zA,yt.prototype.toIncrementalJson=yt.prototype.ay,yt.prototype.toIncrementalData=yt.prototype.yA,yt.prototype.clear=yt.prototype.clear;var Ty=!1,qn={};function Ee(t,e,i,n){ee(this),this._isFrozen=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===i&&(i=null),this.j=-1,this.xd=null,this.xl=t,this.wl=this.to=0,this.Cr=null,this.wn=!1,this.sl=e,this.Im=i,void 0===n?(this.dl=Ny,this.vk=null):(this.dl=Hh,this.vk=n),this.st=new rt}function Ly(t,e,i){return null===(t=t.sourceName)||""===t?e:"/"===t?i.part:"."===t?i:".."===t?i.panel:e.fb(t)}yt.className="Model",yt.fromJSON=yt.fromJson=function(t,e){void 0===e&&(e=null);var i=null;if("string"==typeof t)try{i=At.JSON.parse(t)}catch{}else"object"==typeof t?i=t:it("Unable to construct a Model from: "+t);if(null===e){t=null;var n=i.class;if("string"==typeof n)try{var o=null;0===n.indexOf("go.")?o=Wp(n=n.substr(3)):null===(o=Wp(n))&&(o=At[n]),"function"==typeof o&&(t=new o)}catch{}null===t||t instanceof yt?e=t:it("Unable to construct a Model of declared class: "+i.class)}return null===e&&(e=yt.constructGraphLinksModel()),e.gp(i),e.lv(i),e},yt.safePropertyValue=Fe,yt.safePropertySet=de,qn.Brush=Kt,qn.ChangedEvent=be,qn.Geometry=lt,qn.Margin=R,qn.Panel=nt,qn.Point=B,qn.Rect=$,qn.Size=Pt,qn.Spot=f,qn.Transaction=hi,qn.UndoManager=Ce,Ee.prototype.copy=function(){var t=new Ee;return t.xl=this.xl,t.to=this.to,t.wl=this.wl,t.Cr=this.Cr,t.wn=this.wn,t.sl=this.sl,t.Im=this.Im,t.dl=this.dl,t.vk=this.vk,t},(v=Ee.prototype).qb=function(t){t.classType===Ee&&(this.mode=t)},v.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.Ai?" "+this.Ai:"")+" "+this.mode.name+")"},v.freeze=function(){return this._isFrozen=!0,this},v.ka=function(){return this._isFrozen=!1,this},v.Lx=function(t){return void 0===t&&(t=null),this.mode=Hh,this.backConverter=t,this},v.cp=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},v.eA=function(){return this.sourceName=null,this.isToModel=!0,this},v.Nv=function(t,e,i){var n=this.sl;if(void 0===i||""===n||n===i){i=this.xl;var o=this.Im;if(null===o&&""===i)Pi("Binding error: target property is the empty string: "+this.toString());else{var r=e;if(""!==n&&(r=Fe(e,n)),void 0!==r)if(null===o)""!==i&&de(t,i,r);else try{""!==i?de(t,i,o(r,t)):o(r,t)}catch{}}}},v.sp=function(t,e,i,n){if(this.dl===Hh){var o=this.xl;if(void 0===i||o===i){i=this.sl;var r=this.vk,l=t;if(""!==o&&(l=Fe(t,o)),void 0!==l&&!this.st.contains(t))try{this.st.add(t);var u=null!==n?n.diagram:null,c=null!==u?u.model:null;if(null===r){if(""!==i)null!==c?c.setDataProperty(e,i,l):de(e,i,l);else if(null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var p=n.itemIndex,m=n.panel.itemArray;c.pv(m,p),c.ts(m,p,l)}}else try{if(""!==i){var x=r(l,e,c);null!==c?c.setDataProperty(e,i,x):de(e,i,x)}else{var b=r(l,e,c);if(void 0!==b&&null!==c&&null!==n&&0<=n.itemIndex&&null!==n.panel&&Array.isArray(n.panel.itemArray)){var M=n.itemIndex,A=n.panel.itemArray;c.pv(A,M),c.ts(A,M,b)}}}catch{}}finally{this.st.remove(t)}}}},Ot.Object.defineProperties(Ee.prototype,{Ai:{get:function(){return this.j},set:function(t){this._isFrozen&&Rt(this),this.j=t}},targetProperty:{get:function(){return this.xl},set:function(t){this._isFrozen&&Rt(this),this.xl=t}},sourceName:{get:function(){return this.Cr},set:function(t){this._isFrozen&&Rt(this),this.Cr=t,null!==t&&(this.wn=!1)}},isToModel:{get:function(){return this.wn},set:function(t){this._isFrozen&&Rt(this),this.wn=t}},sourceProperty:{get:function(){return this.sl},set:function(t){this._isFrozen&&Rt(this),this.sl=t}},converter:{get:function(){return this.Im},set:function(t){this._isFrozen&&Rt(this),this.Im=t}},backConverter:{get:function(){return this.vk},set:function(t){this._isFrozen&&Rt(this),this.vk=t}},mode:{get:function(){return this.dl},set:function(t){this._isFrozen&&Rt(this),this.dl=t}}}),Ee.prototype.updateSource=Ee.prototype.sp,Ee.prototype.updateTarget=Ee.prototype.Nv,Ee.prototype.ofModel=Ee.prototype.eA,Ee.prototype.ofObject=Ee.prototype.cp,Ee.prototype.makeTwoWay=Ee.prototype.Lx;var lx="Binding",Ny=new ut(Ee,"OneWay",1),Hh=new ut(Ee,"TwoWay",2);function Xt(t,e,i){yt.call(this),this.Wv=',\n  "insertedLinkKeys": ',this.jy=',\n  "modifiedLinkData": ',this.Yv=',\n  "removedLinkKeys": ',this.md=[],this.$f=new rt,this.xb=new Tt,this.Jh="",this.Ri=this.zk=this.bl=null,this.lf="from",this.mf="to",this.fj=this.ej="",this.dj="category",this.je="",this.il="isGroup",this.Je="group",this.Lm=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(Xe(t)?this.nodeDataArray=t:i=t),i&&(Object.assign(this,i),t=i.Changed)&&(delete this.Changed,this.Pe(t))}function Fy(t,e){for(var i=new rt,n=0;n<t.linkDataArray.length;n++){var o=t.linkDataArray[n];Jc(t,e,o,o,i)}return i}function fn(t,e,i){if(null!==e&&""!==(t=i?t.lf:t.mf)&&void 0!==(t=Fe(e,t))){if(rs(t))return t;it((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function kl(t,e,i,n){if(null===i&&(i=void 0),null!==e){var o=n?t.lf:t.mf;if(""!==o)if(i=t.Vl(i),t.Jc(e)){var r=Fe(e,o);r!==i&&(co(t,r,e),de(e,o,i),null===t.ic(i)&&uo(t,i,e),Ye(t,n?"linkFromKey":"linkToKey",ve,o,e,r,i),"string"==typeof o&&t.La(e,o))}else de(e,o,i)}}function $c(t,e,i){return null===e||""===(t=i?t.ej:t.fj)||void 0===(e=Fe(e,t))?"":e}function Ml(t,e,i,n){if(null!==e){var o=n?t.ej:t.fj;if(""!==o)if(t.Jc(e)){var r=Fe(e,o);void 0===r&&(r=""),r!==i&&(de(e,o,i),Ye(t,n?"linkFromPortId":"linkToPortId",ve,o,e,r,i),"string"==typeof o&&t.La(e,o))}else de(e,o,i)}}function Iy(t,e,i){if(""!==t.linkKeyProperty){var n=t.Ac(e);if(void 0!==n&&t.xb.I(n)===e)return;t.Bs(e),void 0===(n=t.Ac(e))&&it("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.xb.add(n,e)}t.$f.add(e),n=null,i&&t.md.splice(n=t.md.length,0,e),Ye(t,"linkDataArray",Ke,"linkDataArray",t,null,e,null,n),Up(t,e)}function Oy(t,e,i){t.$f.remove(e);var n=t.Ac(e);if(void 0!==n&&t.xb.remove(n),n=null,i){if(0>(n=t.md.indexOf(e)))return;t.md.splice(n,1)}if(Ye(t,"linkDataArray",Qe,"linkDataArray",t,e,null,n,null),co(t,i=fn(t,e,!0),e),co(t,i=fn(t,e,!1),e),n=t.Ef(e),Array.isArray(n))for(var o=n.length,r=0;r<o;r++)co(t,i=n[r],e)}function Up(t,e){var i=fn(t,e,!0);i=t.Vl(i),null===t.ic(i)&&uo(t,i,e),i=fn(t,e,!1),i=t.Vl(i),null===t.ic(i)&&uo(t,i,e);var n=t.Ef(e);if(Array.isArray(n))for(var o=n.length,r=0;r<o;r++)null===t.ic(i=n[r])&&uo(t,i,e)}function Ey(t,e,i){t.lp(i,t.ps(e)),t.xv(i,t.zx(e)),t.Cv(i,t.Cx(e)),t.Ls(i,t.Ef(e)),t.yv(i,t.Ax(e)),t.Dv(i,t.Ex(e))}Ee.className="Binding",Ee.parseEnum=function(t,e){return function(i){return null===(i=Ti(t,i))?e:i}},Ee.toString=bi,Ee.OneWay=Ny,Ee.TwoWay=Hh,Ut(Xt,yt),Xt.constructGraphLinksModel=yt.constructGraphLinksModel,Xt.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.Jh=this.Jh,t.bl=this.bl,t.zk=this.zk,t.lf=this.lf,t.mf=this.mf,t.ej=this.ej,t.fj=this.fj,t.dj=this.dj,t.je=this.je,t.il=this.il,t.Je=this.Je,t.Lm=this.Lm},(v=Xt.prototype).clear=function(){yt.prototype.clear.call(this),this.md=[],this.xb.clear(),this.$f.clear()},v.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.np();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var n,i=(t=this.nodeDataArray).length;for(n=0;n<i;n++){var o=t[n];e+=" "+this.wa(o)+":"+bi(o)}for(e+="\n link data:",i=(t=this.linkDataArray).length,n=0;n<i;n++)e+=" "+fn(this,o=t[n],!0)+"--\x3e"+fn(this,o,!1)}return e},v.Rv=function(t,e){""===this.linkKeyProperty&&it("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=yt.prototype.Rv.call(this,t,e),n=this,o=new rt,r=new rt,l=new rt,u=this.vh;t.changes.each(function(m){m.model===n&&("linkDataArray"===m.modelChange?m.change===Ke?o.add(m.newValue):m.change===Qe&&l.add(m.oldValue):n.Jc(m.object)?r.add(m.object):null!==m.object&&(null!==m.object&&u&&u.contains(m.object)?u.get(m.object).each(function(x){n.Jc(x)&&r.add(x)}):m.object instanceof yt||n.lb(m.object)||Fy(n,m.object).each(function(x){r.add(x)})))});var c=this.hl;c.clear(),o.each(function(m){c.add(n.Ac(m)),e||r.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(n.Ac(m)),e&&r.add(m)}),t=n.cloneDeep(r.Fa()),0<c.count&&(null===i&&(i={}),e?i.removedLinkKeys=c.Fa():i.insertedLinkKeys=c.Fa()),0<t.length&&(null===i&&(i={}),i.modifiedLinkData=t),0<p.count&&(null===i&&(i={}),e?i.insertedLinkKeys=p.Fa():i.removedLinkKeys=p.Fa()),p.clear(),c.clear(),i},v.rm=function(){var t=yt.prototype.rm.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},v.gp=function(t){yt.prototype.gp.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},v.Sv=function(){return yt.prototype.Sv.call(this)+',\n  "linkDataArray": '+os(this,this.linkDataArray,!0)},v.lv=function(t){yt.prototype.lv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.dm(t),this.linkDataArray=t)},v.Qv=function(t,e){""===this.linkKeyProperty&&it("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=yt.prototype.Qv.call(this,t,e),n=this,o=new rt,r=new rt,l=new rt,u=this.vh;t.changes.each(function(m){m.model===n&&("linkDataArray"===m.modelChange?m.change===Ke?o.add(m.newValue):m.change===Qe&&l.add(m.oldValue):n.Jc(m.object)?r.add(m.object):null!==m.object&&(null!==m.object&&u&&u.contains(m.object)?u.get(m.object).each(function(x){n.Jc(x)&&r.add(x)}):m.object instanceof yt||n.lb(m.object)||Fy(n,m.object).each(function(x){r.add(x)})))});var c=this.hl;c.clear(),o.each(function(m){c.add(n.Ac(m)),e||r.add(m)});var p=this.jl;return p.clear(),l.each(function(m){p.add(n.Ac(m)),e&&r.add(m)}),t=i,0<c.count&&(t+=(e?this.Yv:this.Wv)+os(this,c.Fa(),!0)),0<r.count&&(t+=this.jy+os(this,r.Fa(),!0)),0<p.count&&(t+=(e?this.Wv:this.Yv)+os(this,p.Fa(),!0)),p.clear(),c.clear(),t},v.fp=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&it("applyIncrementalJson cannot change Model properties"),yt.prototype.fp.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var o=e[n],r=this.jh(o);null===r&&(r=this.Jo({}),this.Ks(r,o),this.fi(r))}if(e=t.modifiedLinkData,Array.isArray(e))for(i=e.length,n=0;n<i;n++)if(r=this.Ac(o=e[n]),null!==(r=this.jh(r))){for(var l in o)"__gohashid"!==l&&l!==this.linkKeyProperty&&this.setDataProperty(r,l,o[l]);Ey(this,o,r)}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)null!==(i=this.jh(t[e]))&&this.bm(i)},Xt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===ve){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.Jc(i)){var o=t.I(e);return void 0!==(e=t.I(!e))&&this.xb.remove(e),void 0!==o&&this.xb.add(o,i),void de(i,n,o)}}else if(t.change===Ke){if(i=t.newParam,"linkDataArray"===t.modelChange)return void(ue(t=t.newValue)&&"number"==typeof i&&(n=this.Ac(t),e?(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),void 0!==n&&this.xb.remove(n)):(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),void 0!==n&&this.xb.add(n,t))));if("linkLabelKeys"===t.modelChange)return n=this.Ef(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue)))}else if(t.change===Qe){if(i=t.oldParam,"linkDataArray"===t.modelChange)return void(ue(t=t.oldValue)&&"number"==typeof i&&(n=this.Ac(t),e?(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),void 0!==n&&this.xb.add(n,t)):(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),void 0!==n&&this.xb.remove(n))));if("linkLabelKeys"===t.modelChange)return n=this.Ef(t.object),void(Array.isArray(n)&&"number"==typeof i&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1))))}yt.prototype.changeState.call(this,t,e)}},(v=Xt.prototype).Vl=function(t){if(void 0!==t){var e=this.Ri;if(null!==e){var i=this.ic(t);null===i&&(de(i=this.copyNodeData(e),this.nodeKeyProperty,t),this.xf(i))}return t}},v.zx=function(t){return fn(this,t,!0)},v.xv=function(t,e){kl(this,t,e,!0)},v.Cx=function(t){return fn(this,t,!1)},v.Cv=function(t,e){kl(this,t,e,!1)},v.Ax=function(t){return $c(this,t,!0)},v.yv=function(t,e){Ml(this,t,e,!0)},v.Ex=function(t){return $c(this,t,!1)},v.Dv=function(t,e){Ml(this,t,e,!1)},v.Ef=function(t){if(null===t)return Qc;var e=this.je;return""===e||void 0===(t=Fe(t,e))?Qc:t},v.Ls=function(t,e){if(null!==t){var i=this.je;if(""!==i)if(this.Jc(t)){var n=Fe(t,i);if(void 0===n&&(n=Qc),n!==e){if(Array.isArray(n))for(var o=n.length,r=0;r<o;r++)co(this,n[r],t);for(de(t,i,e),o=e.length,r=0;r<o;r++){var l=e[r];null===this.ic(l)&&uo(this,l,t)}Ye(this,"linkLabelKeys",ve,i,t,n,e),"string"==typeof i&&this.La(t,i)}}else de(t,i,e)}},v.Bu=function(t,e){if(null!=e&&null!==t){var i=this.je;if(""!==i){var n=Fe(t,i);if(void 0===n)(i=[]).push(e),this.Ls(t,i);else if(Array.isArray(n)){var o=n.indexOf(e);0<=o||(o=n.length,n.push(e),this.Jc(t)&&(null===this.ic(e)&&uo(this,e,t),Ye(this,"linkLabelKeys",Ke,i,t,null,e,null,o)))}else it(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},v.Rx=function(t,e){if(null!=e&&null!==t){var i=this.je;if(""!==i){var n=Fe(t,i);if(Array.isArray(n)){var o=n.indexOf(e);0>o||(n.splice(o,1),this.Jc(t)&&(co(this,e,t),Ye(this,"linkLabelKeys",Qe,i,t,e,null,o,null)))}else void 0!==n&&it(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},v.Ac=function(t){if(null!==t){var e=this.Jh;if(""!==e&&void 0!==(e=Fe(t,e))){if(rs(e))return e;it("Key value for link data "+t+" is not a number or a string: "+e)}}},v.Ks=function(t,e){if(null!==t){var i=this.Jh;if(""!==i)if(this.Jc(t)){var n=Fe(t,i);n!==e&&null===this.jh(e)&&(de(t,i,e),void 0!==n&&this.xb.remove(n),this.xb.add(e,t),Ye(this,"linkKey",ve,i,t,n,e),"string"==typeof i&&this.La(t,i))}else de(t,i,e)}},v.jh=function(t){return null===t&&it("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&rs(t)?this.xb.I(t):null},v.Bs=function(t){if(null!==t){var e=this.Jh;if(""!==e){var i=this.Ac(t);if(void 0===i||this.xb.contains(i)){var n=this.bl;if(null!==n&&null!=(i=n(this,t))&&!this.xb.contains(i))return void de(t,e,i);if("string"==typeof i){for(n=2;this.xb.contains(i+n);)n++;de(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(i=-this.xb.count-1;this.xb.contains(i);)i--;de(t,e,i)}}}}},v.Jc=function(t){return null!==t&&this.$f.contains(t)},v.fi=function(t){null!==t&&(fi(t),this.Jc(t)||Iy(this,t,!0))},v.Fy=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.fi(t[i]);else for(t=t.iterator;t.next();)this.fi(t.value)},v.bm=function(t){null!==t&&Oy(this,t,!0)},v.mA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.bm(t[i]);else for(t=t.iterator;t.next();)this.bm(t.value)},v.$z=function(t){if(""===this.linkKeyProperty&&it("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Xe(t)){var e=this.jl;e.clear(),e.addAll(this.xb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,o=0;o<n;o++){var r=t[o],l=this.Ac(r);if(void 0!==l){i.add(l);var u=this.jh(l);u!==r&&(null!==u?(this.Do(u,r),Ey(this,r,u)):(r=this.cloneDeep(r),this.Ks(r,l),this.fi(r)))}else l=this.cloneDeep(r),this.fi(l),i.add(this.Ac(l))}for(t=e.iterator;t.next();)i.contains(n=t.value)||(n=this.jh(n))&&this.bm(n);e.clear(),i.clear()}},v.Jo=function(t){if(null===t)return null;var e=this.zk;return ue(t=null!==e?e(t,this):qc(this,t,!0))&&(ee(t),""!==this.lf&&de(t,this.lf,void 0),""!==this.mf&&de(t,this.mf,void 0),""!==this.je&&de(t,this.je,[])),t},v.Zu=function(t){if(null===t)return!1;var e=this.il;return""!==e&&!!Fe(t,e)},v.lh=function(t){if(null!==t){var e=this.Je;if(""!==e&&void 0!==(e=Fe(t,e))){if(rs(e))return e;it("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},v.mp=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Je;if(""!==i)if(this.lb(t)){var n=Fe(t,i);n!==e&&(co(this,n,t),de(t,i,e),null===this.ic(e)&&uo(this,e,t),Ye(this,"nodeGroupKey",ve,i,t,n,e),"string"==typeof i&&this.La(t,i))}else de(t,i,e)}},Xt.prototype.copyNodeData=function(t){return null===t?null:(t=yt.prototype.copyNodeData.call(this,t),this.Hj||""===this.Je||void 0===Fe(t,this.Je)||de(t,this.Je,void 0),t)},Xt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i);if(e===this.nodeGroupKeyProperty)return void this.mp(t,i)}else if(this.Jc(t)){if(e===this.linkFromKeyProperty)return void kl(this,t,i,!0);if(e===this.linkToKeyProperty)return void kl(this,t,i,!1);if(e===this.linkFromPortIdProperty)return void Ml(this,t,i,!0);if(e===this.linkToPortIdProperty)return void Ml(this,t,i,!1);if(e===this.linkKeyProperty)return void this.Ks(t,i);if(e===this.linkCategoryProperty)return void this.lp(t,i);if(e===this.linkLabelKeysProperty)return void this.Ls(t,i)}var n=Fe(t,e);n!==i&&(de(t,e,i),this.Fs(t,e,n,i))},(v=Xt.prototype).Do=function(t,e){if(e){var o,i=this.lb(t),n=this.Jc(t);for(o in e)"__gohashid"===o||i&&o===this.nodeKeyProperty||i&&o===this.nodeIsGroupProperty&&Fe(t,o)===e[o]||n&&o===this.linkKeyProperty||this.setDataProperty(t,o,e[o])}},v.jp=function(t,e){yt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.rv(i.value,t,e);for(i=this.$f.iterator;i.next();){var n=i.value,o=t,r=e;if(fn(this,n,!0)===o){var l=this.lf;de(n,l,r),Ye(this,"linkFromKey",ve,l,n,o,r),"string"==typeof l&&this.La(n,l)}if(fn(this,n,!1)===o&&(de(n,l=this.mf,r),Ye(this,"linkToKey",ve,l,n,o,r),"string"==typeof l&&this.La(n,l)),l=this.Ef(n),Array.isArray(l))for(var u=l.length,c=this.je,p=0;p<u;p++)l[p]===o&&(l[p]=r,Ye(this,"linkLabelKeys",Ke,c,n,o,r,p,p))}},v.rv=function(t,e,i){if(this.lh(t)===e){var n=this.Je;de(t,n,i),Ye(this,"nodeGroupKey",ve,n,t,e,i),"string"==typeof n&&this.La(t,n)}},v.Mv=function(){yt.prototype.Mv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Up(this,t[i])},v.fm=function(t){yt.prototype.fm.call(this,t);var e=Yh(this,t=this.wa(t));if(null!==e){var i=te();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)){if(this.lh(n)===t){var o=this.Je;Ye(this,"nodeGroupKey",ve,o,n,t,t),"string"==typeof o&&this.La(n,o),i.push(n)}}else if(fn(this,n,!0)===t&&(Ye(this,"linkFromKey",ve,o=this.lf,n,t,t),"string"==typeof o&&this.La(n,o),i.push(n)),fn(this,n,!1)===t&&(Ye(this,"linkToKey",ve,o=this.mf,n,t,t),"string"==typeof o&&this.La(n,o),i.push(n)),o=this.Ef(n),Array.isArray(o))for(var r=o.length,l=this.je,u=0;u<r;u++)o[u]===t&&(Ye(this,"linkLabelKeys",Ke,l,n,t,t,u,u),i.push(n))}for(e=0;e<i.length;e++)co(this,t,i[e]);$t(i)}},v.em=function(t){yt.prototype.em.call(this,t);var e=this.lh(t);null===this.ic(e)&&uo(this,e,t)},v.qp=function(t){yt.prototype.qp.call(this,t),co(this,this.lh(t),t)},v.ps=function(t){if(null===t)return"";var e=this.dj;return""===e||void 0===(e=Fe(t,e))?"":"string"==typeof e?e:void it("getCategoryForLinkData found a non-string category for "+t+": "+e)},Xt.prototype.getLinkCategoryForData=function(t){return this.ps(t)},Xt.prototype.lp=function(t,e){if(null!==t){var i=this.dj;if(""!==i)if(this.Jc(t)){var n=Fe(t,i);void 0===n&&(n=""),n!==e&&(de(t,i,e),Ye(this,"linkCategory",ve,i,t,n,e),"string"==typeof i&&this.La(t,i))}else de(t,i,e)}},Xt.prototype.setLinkCategoryForData=function(t,e){this.lp(t,e)},(v=Xt.prototype).lm=function(t,e){yt.prototype.lm.call(this,t,e),this.mp(e,this.lh(t))},v.Vj=function(){return!0},v.ri=function(){return!0},v.xs=function(){return!0},v.Wj=function(){return!0},Ot.Object.defineProperties(Xt.prototype,{archetypeNodeData:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.md},set:function(t){var e=this.md;if(e!==t){this.xb.clear();for(var i=t.length,n=0;n<i;n++){var o=t[n];ue(o)||it("GraphLinksModel.linkDataArray must only contain Objects, not: "+o),fi(o)}if(this.md=t,""!==this.linkKeyProperty){for(n=new ot,o=0;o<i;o++){var r=t[o],l=this.Ac(r);void 0===l||null!==this.xb.I(l)?n.add(r):this.xb.add(l,r)}for(n=n.iterator;n.next();)this.Bs(o=n.value),void 0!==(r=this.Ac(o))&&this.xb.add(r,o)}for(n=new rt,o=0;o<i;o++)n.add(t[o]);for(this.$f=n,Ye(this,"linkDataArray",ve,"linkDataArray",this,e,t),e=0;e<i;e++)Up(this,t[e])}}},linkKeyProperty:{get:function(){return this.Jh},set:function(t){var e=this.Jh;if(e!==t){this.Jh=t,this.xb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var o=this.linkDataArray[n],r=this.Ac(o);void 0===r&&(this.Bs(o),r=this.Ac(o)),void 0!==r&&this.xb.add(r,o)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.zk},set:function(t){var e=this.zk;e!==t&&(this.zk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.il},set:function(t){var e=this.il;e!==t&&(this.il=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Je},set:function(t){var e=this.Je;e!==t&&(this.Je=t,this.g("nodeGroupKeyProperty",e,t))}},Hj:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},linkCategoryProperty:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Xt.prototype.setCategoryForLinkData=Xt.prototype.lp,Xt.prototype.getCategoryForLinkData=Xt.prototype.ps,Xt.prototype.assignAllDataProperties=Xt.prototype.Do,Xt.prototype.setGroupKeyForNodeData=Xt.prototype.mp,Xt.prototype.getGroupKeyForNodeData=Xt.prototype.lh,Xt.prototype.isGroupForNodeData=Xt.prototype.Zu,Xt.prototype.copyLinkData=Xt.prototype.Jo,Xt.prototype.mergeLinkDataArray=Xt.prototype.$z,Xt.prototype.removeLinkDataCollection=Xt.prototype.mA,Xt.prototype.removeLinkData=Xt.prototype.bm,Xt.prototype.addLinkDataCollection=Xt.prototype.Fy,Xt.prototype.addLinkData=Xt.prototype.fi,Xt.prototype.containsLinkData=Xt.prototype.Jc,Xt.prototype.makeLinkDataKeyUnique=Xt.prototype.Bs,Xt.prototype.findLinkDataForKey=Xt.prototype.jh,Xt.prototype.setKeyForLinkData=Xt.prototype.Ks,Xt.prototype.getKeyForLinkData=Xt.prototype.Ac,Xt.prototype.removeLabelKeyForLinkData=Xt.prototype.Rx,Xt.prototype.addLabelKeyForLinkData=Xt.prototype.Bu,Xt.prototype.setLabelKeysForLinkData=Xt.prototype.Ls,Xt.prototype.getLabelKeysForLinkData=Xt.prototype.Ef,Xt.prototype.setToPortIdForLinkData=Xt.prototype.Dv,Xt.prototype.getToPortIdForLinkData=Xt.prototype.Ex,Xt.prototype.setFromPortIdForLinkData=Xt.prototype.yv,Xt.prototype.getFromPortIdForLinkData=Xt.prototype.Ax,Xt.prototype.setToKeyForLinkData=Xt.prototype.Cv,Xt.prototype.getToKeyForLinkData=Xt.prototype.Cx,Xt.prototype.setFromKeyForLinkData=Xt.prototype.xv,Xt.prototype.getFromKeyForLinkData=Xt.prototype.zx,Xt.prototype.clear=Xt.prototype.clear;var Qc=Object.freeze([]);function ji(t,e){yt.call(this),this.Ke="parent",this.Nm=!1,this.nj="parentLinkCategory",void 0!==t&&(Xe(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}function xe(t){pe.call(this),this.mw=this.Zm=this.mc=0,this.Wp=360,this.lw=$n,this.Ti=0,this.$v=new B,this.Jp=this.me=0,this.Xr=new Uh,this.gt=this.mj=0,this.uy=600,this.eo=NaN,this.Cm=1,this.ro=0,this.ul=360,this.Sb=$n,this.K=Bi,this.nd=Al,this.hd=zp,this.tf=6,this.Nn=sd,t&&Object.assign(this,t)}function Vh(t,e,i,n,o){var r=t.Wp,l=t.mc;t=t.me,n=n*Math.PI/180,i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=n+(o===Bi?c*i/(360<=r?u:u-1):-c*i/u),m=e.M(c),x=l*Math.tan(p)/t;x=Math.sqrt((l*l+t*t*x*x)/(1+x*x)),m.centerX=x*Math.cos(p),m.centerY=x*Math.sin(p),m.actualAngle=180*p/Math.PI}}function Gh(t,e,i,n){var o=t.mc,r=t.me,l=t.Ti;i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=e.M(c),m=e.M(c===u-1?0:c+1),x=r*Math.sin(i);p.centerX=o*Math.cos(i),p.centerY=x,p.actualAngle=180*i/Math.PI,isNaN(p.diameter)&&ls(p,0),isNaN(m.diameter)&&ls(m,0),p=ed(t,o,r,n===Bi?i:-i,(p.diameter+m.diameter)/2+l),i+=n===Bi?p:-p}}function Wh(t,e,i,n){var o=t.mc,r=t.me,l=t.Jp;i=i*Math.PI/180;for(var u=e.length,c=0;c<u;c++){var p=e.M(c);p.centerX=o*Math.cos(i),p.centerY=r*Math.sin(i),p.actualAngle=180*i/Math.PI,p=ed(t,o,r,n===Bi?i:-i,l),i+=n===Bi?p:-p}}function Dy(t,e,i,n,o){var r=t.Wp;if(t.mj=0,t.Xr=new Uh,360>i){for(r=n+(o===Bi?r:-r);0>r;)r+=360;180<(r%=360)&&(r-=360),r*=Math.PI/180,t.gt=r,By(t,e,i,n,o)}else jy(t,e,i,n,o);t.Xr.commit(e)}function jy(t,e,i,n,o){var r=t.mc,l=t.Ti,u=t.Zm,c=r*Math.cos(n*Math.PI/180),p=t.me*Math.sin(n*Math.PI/180),m=e.Fa();if(3===m.length)m[0].centerX=r,m[0].centerY=0,m[1].centerX=m[0].centerX-m[0].width/2-m[1].width/2-l,m[1].y=m[0].y,m[2].centerX=(m[0].centerX+m[1].centerX)/2,m[2].y=m[0].y-m[2].height-l;else if(4===m.length)m[0].centerX=r,m[0].centerY=0,m[2].centerX=-m[0].centerX,m[2].centerY=m[0].centerY,m[1].centerX=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-l,m[3].centerX=0,m[3].y=Math.max(m[0].y+m[0].height+l,m[2].y+m[2].height+l);else{r=B.alloc();for(var x=0;x<m.length&&(m[x].centerX=c,m[x].centerY=p,!(x>=m.length-1));x++)zy(t,c,p,m,x,o,r)||Ry(t,c,p,m,x,o,r),c=r.x,p=r.y;if(B.free(r),t.mj++,!(23<t.mj)){c=m[0].centerX,p=m[0].centerY,r=m[m.length-1].centerX,x=m[m.length-1].centerY;var b=Math.abs(c-r)-((m[0].width+m[m.length-1].width)/2+l),M=Math.abs(p-x)-((m[0].height+m[m.length-1].height)/2+l);l=0,1>Math.abs(M)?Math.abs(c-r)<(m[0].width+m[m.length-1].width)/2&&(l=0):l=0<M?M:1>Math.abs(b)?0:b,c=Math.abs(r)>Math.abs(x)?0<r!=p>x:0<x!=c<r,(c=o===Bi?c:!c)&&(l=-Math.abs(l),l=Math.min(l,-m[m.length-1].width),l=Math.min(l,-m[m.length-1].height)),t.Xr.compare(l,m),1<Math.abs(l)&&(t.mc=8>t.mj?t.mc-l/(2*Math.PI):5>m.length&&10<l?t.mc/2:t.mc-(0<l?1.7:-2.3),t.me=t.mc*u,jy(t,e,i,n,o))}}}function By(t,e,i,n,o){for(var r=t.mc,l=t.me,u=t.Zm,c=r*Math.cos(n*Math.PI/180),p=l*Math.sin(n*Math.PI/180),m=B.alloc(),x=e.Fa(),b=0;b<x.length&&(x[b].centerX=c,x[b].centerY=p,!(b>=x.length-1));b++)zy(t,c,p,x,b,o,m)||Ry(t,c,p,x,b,o,m),c=m.x,p=m.y;if(B.free(m),t.mj++,!(23<t.mj)){if(c=Math.atan2(p,c),c=o===Bi?t.gt-c:c-t.gt,r=(c=Math.abs(c)<Math.abs(c-2*Math.PI)?c:c-2*Math.PI)*(r+l)/2,l=t.Xr,Math.abs(r)<Math.abs(l.Pl))for(l.Pl=r,l.lk=[],l.tm=[],c=0;c<x.length;c++)l.lk[c]=x[c].bounds.x,l.tm[c]=x[c].bounds.y;1<Math.abs(r)&&(t.mc=8>t.mj?t.mc-r/(2*Math.PI):t.mc-(0<r?1.7:-2.3),t.me=t.mc*u,By(t,e,i,n,o))}}function zy(t,e,i,n,o,r,l){var u=t.mc,c=t.me,p=0;t=(n[o].width+n[o+1].width)/2+t.Ti;var m=!1;if(0<=i!=(r===Bi)){if((r=e+t)>u){if((r=e-t)<-u)return l.x=r,l.y=p,!1;m=!0}}else if((r=e-t)<-u){if((r=e+t)>u)return l.x=r,l.y=p,!1;m=!0}return p=Math.sqrt(1-Math.min(1,r*r/(u*u)))*c,0>i!==m&&(p=-p),Math.abs(i-p)>(n[o].height+n[o+1].height)/2?(l.x=r,l.y=p,!1):(l.x=r,l.y=p,!0)}function Ry(t,e,i,n,o,r,l){var u=t.mc,c=t.me,p=0;if(t=(n[o].height+n[o+1].height)/2+t.Ti,n=!1,0<=e!=(r===Bi)){if((r=i-t)<-c){if((r=i+t)>c)return l.x=p,void(l.y=r);n=!0}}else if((r=i+t)>c){if((r=i-t)<-c)return l.x=p,void(l.y=r);n=!0}p=Math.sqrt(1-Math.min(1,r*r/(c*c)))*u,0>e!==n&&(p=-p),l.x=p,l.y=r}function Zp(t,e,i,n,o){var r=t.uy;if(.001>Math.abs(t.Zm-1))return void 0!==n&&void 0!==o?o*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,u=void 0!==n&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),c=0,p=0;p<=r;p++){c=void 0!==n&&void 0!==o?n+p*o/r:p*Math.PI/(2*r);var m=Math.sin(c);l+=Math.sqrt(1-t*t*m*m)*u}return void 0!==n&&void 0!==o?(e>i?e:i)*l:4*(e>i?e:i)*l}function td(t,e,i,n,o){return e/(void 0!==n&&void 0!==o?Zp(t,1,i,n,o):Zp(t,1,i))}function ed(t,e,i,n,o){if(.001>Math.abs(t.Zm-1))return o/e;var r=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var u=0;;u++){var c=Math.sin(n+u*t);if((l+=(e>i?e:i)*Math.sqrt(1-r*r*c*c)*t)>=o)return u*t}}Xt.className="GraphLinksModel",qn.GraphLinksModel=Xt,yt.constructGraphLinksModel=yt.constructGraphLinksModel=function(){return new Xt},yt.initDiagramModel=Gp=function(){return new Xt},Ut(ji,yt),ji.constructGraphLinksModel=yt.constructGraphLinksModel,ji.prototype.cloneProtected=function(t){yt.prototype.cloneProtected.call(this,t),t.Ke=this.Ke,t.Nm=this.Nm,t.nj=this.nj},(v=ji.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.np();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var i=(t=this.nodeDataArray).length,n=0;n<i;n++){var o=t[n];e+=" "+this.wa(o)+":"+bi(o)}}return e},v.rm=function(){var t=yt.prototype.rm.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},v.gp=function(t){yt.prototype.gp.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},v.fp=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&it("applyIncrementalJson cannot change Model properties"),yt.prototype.fp.call(this,t)},v.Vl=function(t){return t},v.mh=function(t){if(null!==t){var e=this.Ke;if(""!==e&&void 0!==(e=Fe(t,e))){if(rs(e))return e;it("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},v.qe=function(t,e){if(null===e&&(e=void 0),null!==t){var i=this.Ke;if(""!==i)if(e=this.Vl(e),this.lb(t)){var n=Fe(t,i);n!==e&&(co(this,n,t),de(t,i,e),null===this.ic(e)&&uo(this,e,t),Ye(this,"nodeParentKey",ve,i,t,n,e),"string"==typeof i&&this.La(t,i))}else de(t,i,e)}},v.ss=function(t){if(null===t)return"";var e=this.nj;return""===e||void 0===(e=Fe(t,e))?"":"string"==typeof e?e:(it("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},ji.prototype.getLinkCategoryForData=function(t){return this.ss(t)},ji.prototype.Ms=function(t,e){if(null!==t){var i=this.nj;if(""!==i)if(this.lb(t)){var n=Fe(t,i);void 0===n&&(n=""),n!==e&&(de(t,i,e),Ye(this,"parentLinkCategory",ve,i,t,n,e),"string"==typeof i&&this.La(t,i))}else de(t,i,e)}},ji.prototype.setLinkCategoryForData=function(t,e){this.Ms(t,e)},ji.prototype.copyNodeData=function(t){return null===t?null:(t=yt.prototype.copyNodeData.call(this,t),this.Ij||""===this.Ke||void 0===Fe(t,this.Ke)||de(t,this.Ke,void 0),t)},ji.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.km(t,i);if(e===this.nodeCategoryProperty)return void this.jm(t,i);if(e===this.nodeParentKeyProperty)return void this.qe(t,i)}var n=Fe(t,e);n!==i&&(de(t,e,i),this.Fs(t,e,n,i))},(v=ji.prototype).jp=function(t,e){yt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.rv(i.value,t,e)},v.rv=function(t,e,i){if(this.mh(t)===e){var n=this.Ke;de(t,n,i),Ye(this,"nodeParentKey",ve,n,t,e,i),"string"==typeof n&&this.La(t,n)}},v.fm=function(t){yt.prototype.fm.call(this,t);var e=Yh(this,t=this.wa(t));if(null!==e){var i=te();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)&&this.mh(n)===t){var o=this.Ke;Ye(this,"nodeParentKey",ve,o,n,t,t),"string"==typeof o&&this.La(n,o),i.push(n)}}for(e=0;e<i.length;e++)co(this,t,i[e]);$t(i)}},v.em=function(t){yt.prototype.em.call(this,t);var e=this.mh(t);e=this.Vl(e),null===this.ic(e)&&uo(this,e,t)},v.qp=function(t){yt.prototype.qp.call(this,t),co(this,this.mh(t),t)},v.lm=function(t,e){yt.prototype.lm.call(this,t,e),this.Ms(e,this.ss(t)),this.qe(e,this.mh(t))},v.Tl=function(){return!0},v.xs=function(){return!0},Ot.Object.defineProperties(ji.prototype,{nodeParentKeyProperty:{get:function(){return this.Ke},set:function(t){var e=this.Ke;e!==t&&(this.Ke=t,this.g("nodeParentKeyProperty",e,t))}},Ij:{get:function(){return this.Nm},set:function(t){this.Nm!==t&&(this.Nm=t)}},parentLinkCategoryProperty:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),ji.prototype.setParentLinkCategoryForNodeData=ji.prototype.Ms,ji.prototype.getParentLinkCategoryForNodeData=ji.prototype.ss,ji.prototype.setParentKeyForNodeData=ji.prototype.qe,ji.prototype.getParentKeyForNodeData=ji.prototype.mh,ji.className="TreeModel",qn.TreeModel=ji,Ut(xe,pe),xe.prototype.cloneProtected=function(t){pe.prototype.cloneProtected.call(this,t),t.eo=this.eo,t.Cm=this.Cm,t.ro=this.ro,t.ul=this.ul,t.Sb=this.Sb,t.K=this.K,t.nd=this.nd,t.hd=this.hd,t.tf=this.tf,t.Nn=this.Nn},xe.prototype.qb=function(t){t.classType===xe?t===od||t===rd||t===id||t===nd||t===Al?this.sorting=t:t===zs||t===Cl||t===Bi||t===as?this.direction=t:t===Br||t===ss||t===$n||t===Qn?this.arrangement=t:(t===pa||t===sd)&&(this.nodeDiameterFormula=t):pe.prototype.qb.call(this,t)},xe.prototype.createNetwork=function(){return new Pl(this)},xe.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new ot;e.addAll(t.iterator),t=new ot;var o,r,i=new ot,n=this.sort(e),l=this.Jp,u=this.arrangement,c=this.nodeDiameterFormula,p=this.radius;(!isFinite(p)||0>=p)&&(p=NaN);var m=this.aspectRatio;(!isFinite(m)||0>=m)&&(m=1);var x=this.startAngle;isFinite(x)||(x=0);var b=this.sweepAngle;if((!isFinite(b)||360<b||1>b)&&(b=360),e=this.spacing,isFinite(e)||(e=NaN),u===Qn&&c===pa?u=$n:u===Qn&&c!==pa&&(u=this.arrangement),(this.direction===zs||this.direction===Cl)&&this.sorting!==Al){for(c=0;!(c>=n.length||(t.add(n.M(c)),c+1>=n.length));c+=2)i.add(n.M(c+1));this.direction===zs?(this.arrangement===Qn&&t.reverse(),(n=new ot).addAll(t),n.addAll(i)):(this.arrangement===Qn&&i.reverse(),(n=new ot).addAll(i),n.addAll(t))}c=n.length;for(var M=r=o=0;M<n.length;M++){var A=x+b*r*(this.direction===Bi?1:-1)/c,L=n.M(M).diameter;isNaN(L)&&(L=ls(n.M(M),A)),360>b&&(0===M||M===n.length-1)&&(L/=2),o+=L,r++}if(isNaN(p)||u===Qn){if(isNaN(e)&&(e=6),u!==$n&&u!==Qn){for(r=-1/0,l=0;l<c;l++)M=n.M(l),o=n.M(l===c-1?0:l+1),isNaN(M.diameter)&&ls(M,0),isNaN(o.diameter)&&ls(o,0),r=Math.max(r,(M.diameter+o.diameter)/2);l=r+e,p=u===Br?(r+e)/(2*Math.PI/c):td(this,l*(360<=b?c:c-1),m,x*Math.PI/180,b*Math.PI/180)}else p=td(this,o+(360<=b?c:c-1)*(u!==Qn?e:1.6*e),m,x*Math.PI/180,b*Math.PI/180);r=p*m}else if(M=Zp(this,p,r=p*m,x*Math.PI/180,b*Math.PI/180),isNaN(e))(u===$n||u===Qn)&&(e=(M-o)/(360<=b?c:c-1));else if(u===$n||u===Qn)(M=(M-o)/(360<=b?c:c-1))<e?r=(p=td(this,o+e*(360<=b?c:c-1),m,x*Math.PI/180,b*Math.PI/180))*m:e=M;else{for(l=-1/0,o=0;o<c;o++)A=n.M(o),L=n.M(o===c-1?0:o+1),isNaN(A.diameter)&&ls(A,0),isNaN(L.diameter)&&ls(L,0),l=Math.max(l,(A.diameter+L.diameter)/2);(o=td(this,(l+=e)*(360<=b?c:c-1),m,x*Math.PI/180,b*Math.PI/180))>p?r=(p=o)*m:l=M/(360<=b?c:c-1)}if(this.lw=u,this.mc=p,this.Zm=m,this.mw=x,this.Wp=b,this.Ti=e,this.me=r,this.Jp=l,e=n,n=this.lw,u=this.mc,p=this.mw,m=this.Wp,x=this.Ti,b=this.me,c=this.Jp,this.direction!==zs&&this.direction!==Cl||n!==Qn)if(this.direction===zs||this.direction===Cl){switch(l=0,n){case ss:l=180*ed(this,u,b,p,c)/Math.PI;break;case $n:c=e=0,null!==(l=t.first())&&(e=ls(l,Math.PI/2)),null!==(l=i.first())&&(c=ls(l,Math.PI/2)),l=180*ed(this,u,b,p,x+(e+c)/2)/Math.PI;break;case Br:l=m/e.length}if(this.direction===zs){switch(n){case ss:Wh(this,t,p,as);break;case $n:Gh(this,t,p,as);break;case Br:Vh(this,t,m/2,p,as)}switch(n){case ss:Wh(this,i,p+l,Bi);break;case $n:Gh(this,i,p+l,Bi);break;case Br:Vh(this,i,m/2,p+l,Bi)}}else{switch(n){case ss:Wh(this,i,p,as);break;case $n:Gh(this,i,p,as);break;case Br:Vh(this,i,m/2,p,as)}switch(n){case ss:Wh(this,t,p+l,Bi);break;case $n:Gh(this,t,p+l,Bi);break;case Br:Vh(this,t,m/2,p+l,Bi)}}}else switch(n){case ss:Wh(this,e,p,this.direction);break;case $n:Gh(this,e,p,this.direction);break;case Br:Vh(this,e,m,p,this.direction);break;case Qn:Dy(this,e,m,p,this.direction)}else Dy(this,e,m,p-m/2,Bi)}this.updateParts(),this.network=null,this.isValidLayout=!0},xe.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},xe.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new B(0,0):(i.x=this.arrangementOrigin.x+this.mc,i.y=this.arrangementOrigin.y+this.me);for(var n=this.network.vertexes.iterator;n.next();){var o=n.value;o.x+=i.x,o.y+=i.y,o.commit()}t&&(this.group.Va(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.re(i.re(t)),this.group.move(e),this.$v=e.re(t))},xe.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},xe.prototype.sort=function(t){switch(this.sorting){case id:break;case nd:t.reverse();break;case od:t.sort(this.comparer);break;case rd:t.sort(this.comparer),t.reverse();break;case Al:return this.$j(function hx(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new ot;for(var n=0;n<t.length;n++){var o=-1,r=-1;if(0===n)for(var l=0;l<t.length;l++){var u=t.M(l).edgesCount;u>o&&(o=u,r=l)}else for(l=0;l<t.length;l++)(u=e[l])>o&&(o=u,r=l);for(i.add(t.M(r)),e[r]=-1,l=(r=t.M(r)).sourceEdges;l.next();)0>(o=t.indexOf(l.value.fromVertex))||0<=e[o]&&e[o]++;for(r=r.destinationEdges;r.next();)0>(o=t.indexOf(r.value.toVertex))||0<=e[o]&&e[o]++}return i}(t));default:it("Invalid sorting type.")}return t},xe.prototype.$j=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.M(i);e[i]=[];for(var o,r=n.destinationEdges;r.next();)(o=t.indexOf(r.value.toVertex))!==i&&0>e[i].indexOf(o)&&e[i].push(o);for(n=n.sourceEdges;n.next();)(o=t.indexOf(n.value.fromVertex))!==i&&0>e[i].indexOf(o)&&e[i].push(o)}for(r=[],i=0;i<e.length;i++)r[i]=0;i=[];var l=[],u=[];n=[],o=new ot;for(var c=0,p=0;p<e.length;p++){var m=e[p].length;if(1===m)n.push(p);else if(0===m)o.add(t.M(p));else{if(0===c)i.push(p);else{for(var x=m=1/0,b=-1,M=[],A=0;A<i.length;A++)0>e[i[A]].indexOf(i[A===i.length-1?0:A+1])&&M.push(A===i.length-1?0:A+1);if(0===M.length)for(A=0;A<i.length;A++)M.push(A);for(A=0;A<M.length;A++){for(var L=M[A],D=e[p],I=0,z=0;z<l.length;z++){var X=r[l[z]],V=r[u[z]];if(X<V){var Z=X;X=V}else Z=V;if(Z<L&&L<=X)for(V=0;V<D.length;V++){var J=D[V];0>i.indexOf(J)||Z<r[J]&&r[J]<X||Z===r[J]||X===r[J]||I++}else for(V=0;V<D.length;V++)0>i.indexOf(J=D[V])||Z<r[J]&&r[J]<X&&Z!==r[J]&&X!==r[J]&&I++}for(D=I,z=I=0;z<e[p].length;z++)0<=(Z=i.indexOf(e[p][z]))&&(I+=(Z=Math.abs(L-(Z>=L?Z+1:Z)))<i.length+1-Z?Z:i.length+1-Z);for(z=0;z<l.length;z++)(Z=r[l[z]])>=L&&Z++,(X=r[u[z]])>=L&&X++,Z>X&&(V=X,X=Z,Z=V),X-Z<(i.length+2)/2==(Z<L&&L<=X)&&I++;(D<m||D===m&&I<x)&&(m=D,x=I,b=L)}for(i.splice(b,0,p),m=0;m<i.length;m++)r[i[m]]=m;for(m=0;m<e[p].length;m++)0<=i.indexOf(x=e[p][m])&&(l.push(p),u.push(x))}c++}}for(l=i.length;;){for(r=!0,u=0;u<n.length;u++)if(0<=(m=i.indexOf(p=e[c=n[u]][0]))){for(b=x=0;b<e[p].length;b++)0>(M=i.indexOf(e[p][b]))||M===m||(x+=M<m!=(A=M>m?M-m:m-M)>l-A?1:-1);i.splice(0>x?m:m+1,0,c),n.splice(u,1),u--}else r=!1;if(r)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)o.add(t.M(i[e]));return o},Ot.Object.defineProperties(xe.prototype,{radius:{get:function(){return this.eo},set:function(t){this.eo!==t&&(0<t||isNaN(t))&&(this.eo=t,this.C())}},aspectRatio:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&0<t&&(this.Cm=t,this.C())}},startAngle:{get:function(){return this.ro},set:function(t){this.ro!==t&&(this.ro=t,this.C())}},sweepAngle:{get:function(){return this.ul},set:function(t){this.ul!==t&&(this.ul=0<t&&360>=t?t:360,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==Qn&&t!==$n&&t!==ss&&t!==Br||(this.Sb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Bi&&t!==as&&t!==zs&&t!==Cl||(this.K=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==id&&t!==nd&&t!==od&&!rd&&t!==Al||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf!==t&&(this.tf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.Nn},set:function(t){this.Nn===t||t!==sd&&t!==pa||(this.Nn=t,this.C())}},actualXRadius:{get:function(){return this.mc}},actualYRadius:{get:function(){return this.me}},actualSpacing:{get:function(){return this.Ti}},actualCenter:{get:function(){return this.$v}}});var $n=new ut(xe,"ConstantSpacing",0),ss=new ut(xe,"ConstantDistance",1),Br=new ut(xe,"ConstantAngle",2),Qn=new ut(xe,"Packed",3),Bi=new ut(xe,"Clockwise",4),as=new ut(xe,"Counterclockwise",5),zs=new ut(xe,"BidirectionalLeft",6),Cl=new ut(xe,"BidirectionalRight",7),id=new ut(xe,"Forwards",8),nd=new ut(xe,"Reverse",9),od=new ut(xe,"Ascending",10),rd=new ut(xe,"Descending",11),Al=new ut(xe,"Optimized",12),sd=new ut(xe,"Pythagorean",13),pa=new ut(xe,"Circular",14);function Uh(){this.Pl=-1/0,this.tm=this.lk=null}function Pl(t){se.call(this,t)}function Zh(t){Ue.call(this,t),this.u=this.Si=NaN}function ls(t,e){var i=t.network;if(null===i)return NaN;if(null===(i=i.layout))return NaN;if(i.arrangement===Qn)if(i.nodeDiameterFormula===pa)t.Si=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===i)return t.width;if(0===e)return t.height;t.Si=Math.min(t.height/i,t.width/e)}else t.Si=i.nodeDiameterFormula===pa?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Si}function ad(t){tn.call(this,t)}function di(t){pe.call(this),this.ah=null,this.An=0,this.$d=new Pt(100,100).freeze(),this.Bm=!1,this.sf=!0,this.td=!1,this.cl=100,this.$m=1,this.Zf=1e3,this.In=10,this.fo=Math,this.Gk=.05,this.Fk=50,this.Dk=150,this.Ek=0,this.Vm=10,this.Um=5,t&&Object.assign(this,t)}function Yy(t,e,i){if(function ux(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.ah=t.network.vertexes.Fa(),(t=t.ah).sort(function(i,n){return null===i||null===n||i===n?0:n.Vd-i.Vd}),e=t.length-1;0<=e&&1>=t[e].Vd;)e--;return 1<t.length-e}(t,e)){var n=t.Zf;t.Zf*=1+1/(e+1);var o=function cx(t,e){for(var i=t.network,n=new ga(t),o=0;o<t.ah.length;o++){var r=t.ah[o];if(!(1<r.Vd))break;n.dh(r);var l=new Gy;l.Rs=r.Vd,l.Ss=r.width,l.Qs=r.height,l.Tv=r.focus.x,l.Uv=r.focus.y,null===r.We&&(r.We=new ot),r.We.add(l),r.tv=r.We.count-1}for(r=i.edges.iterator;r.next();){var u=r.value;l=u.toVertex,(o=u.fromVertex).network===n&&l.network===n?n.Bo(u):o.network===n?(null===(u=o.Gj)&&(u=new ot,o.Gj=u),u.add(l),o.Vd--,o.sh+=l.sh):l.network===n&&(null===(u=l.Gj)&&(u=new ot,l.Gj=u),u.add(o),l.Vd--,l.sh+=o.sh)}for(o=n.edges.iterator;o.next();)(r=o.value).length*=Math.max(1,_.sqrt((r.fromVertex.sh+r.toVertex.sh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){var c=(o=e.value).Gj;if(null!==c&&0<c.count&&!(0>=(l=o.We.M(o.We.count-1).Rs-o.Vd))){for(var p=u=0,m=c.count-l;m<c.count;m++){var x=c.M(m),b=null;for(r=x.edges.iterator;r.next();){var M=r.value;if(M.Bx(x)===o){b=M;break}}null!==b&&(p+=b.length,u+=x.width*x.height)}r=o.centerX,c=o.centerY,b=o.focus,1>(M=(m=o.width)*(x=o.height))&&(M=1),u=_.sqrt((u+M+p*p*4/(l*l))/M),o.bounds=new $(r-b.x-(l=(u-1)*m/2),c-b.y-(u=(u-1)*x/2),m+2*l,x+2*u),o.focus=new B(b.x+l,b.y+u)}}return t.network=n,i}(t,e),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=r,Yy(t,e+1,i),Vy(t,r),function dx(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,null!==n.We){var o=n.We.M(n.tv);n.Vd=o.Rs;var r=o.Tv,l=o.Uv;n.bounds=new $(n.centerX-r,n.centerY-l,o.Ss,o.Qs),n.focus=new B(r,l),n.tv--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}(t,o),(e=o.vertexes.Fa()).sort(function(l,u){return null===l||null===u||l===u?0:u.Vd-l.Vd}),i=0;i<e.length;i++)fx(t,e[i]);t.Zf=n}}function fx(t,e){var i=e.Gj;if(null!==i&&0!==i.count){var n=e.centerX,o=e.centerY,r=e.width,l=e.height;null!==e.We&&0<e.We.count&&(r=(l=e.We.M(0)).Ss,l=l.Qs),r=_.sqrt(r*r+l*l)/2;for(var u=!1,c=l=0,p=0,m=e.vertexes.iterator;m.next();){var x=m.value;1>=x.Vd?c++:(u=!0,p++,l+=Math.atan2(e.centerY-x.centerY,e.centerX-x.centerX))}if(0!==c)for(0<p&&(l/=p),p=e=0,e=u?2*Math.PI/(c+1):2*Math.PI/c,c%2==0&&(p=e/2),1<i.count&&i.sort(function(M,A){return null===M||null===A||M===A?0:A.width*A.height-M.width*M.height}),u=c%2==0?0:1,i=i.iterator;i.next();)if(!(1<(c=i.value).Vd||t.isFixed(c))){for(m=null,x=c.edges.iterator;x.next();){m=x.value;break}var b=c.height;x=_.sqrt((x=c.width)*x+b*b)/2,m=r+m.length+x,x=l+(e*(u/2>>1)+p)*(u%2==0?1:-1),c.centerX=n+m*Math.cos(x),c.centerY=o+m*Math.sin(x),u++}}}function Xy(t,e,i,n,o,r,l){var u=9e19,c=-1,p=0;t:for(;p<e;p++){var m=t[p],x=m.x-i,b=m.y-n;if((x=x*x+b*b)<u){for(b=p-1;0<=b;b--)if(t[b].y>m.y&&t[b].x-m.x<o+l.width)continue t;for(b=p+1;b<e;b++)if(t[b].x>m.x&&t[b].y-m.y<r+l.height)continue t;c=p,u=x}}return c}function Hy(t,e){var i=t.bounds,n=i.x;t=i.y;var o=i.width;i=i.height;var r=e.bounds,l=r.x;e=r.y;var u=r.width;return r=r.height,n+o<l?t>e+r?_.sqrt((i=n+o-l)*i+(t=t-e-r)*t):t+i<e?_.sqrt((n=n+o-l)*n+(t=t+i-e)*t):l-(n+o):n>l+u?t>e+r?_.sqrt((i=n-l-u)*i+(t=t-e-r)*t):t+i<e?_.sqrt((n=n-l-u)*n+(t=t+i-e)*t):n-(l+u):t>e+r?t-(e+r):t+i<e?e-(t+i):.1}function Vy(t,e){for(t.ah=null,e=t.An+e;t.An<e&&(t.An++,px(t)););t.ah=null}function px(t){null===t.ah&&(t.ah=t.network.vertexes.Fa());var e=t.ah;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,o=n,r=i=i.centerY,l=1;l<e.length;l++){var u=e[l];u.forceX=0,u.forceY=0;var c=u.centerX;u=u.centerY,n=Math.min(n,c),o=Math.max(o,c),i=Math.min(i,u),r=Math.max(r,u)}(o=o-n>r-i)?e.sort(function(L,D){return null===L||null===D||L===D?0:L.centerX-D.centerX}):e.sort(function(L,D){return null===L||null===D||L===D?0:L.centerY-D.centerY}),i=t.Zf;var p=n=u=0;for(r=0;r<e.length;r++){var m=(n=(l=e[r]).bounds).y+(u=l.focus).y;n=l.charge*t.electricalFieldX(c=n.x+u.x,m),p=l.charge*t.electricalFieldY(c,m),n+=l.mass*t.gravitationalFieldX(c,m),p+=l.mass*t.gravitationalFieldY(c,m),l.forceX+=n,l.forceY+=p;for(var x=r+1;x<e.length;x++){var b=e[x];if(b!==l){var M=(n=b.bounds).y+(u=b.focus).y;if(c-(p=n.x+u.x)>i||p-c>i){if(o)break}else if(m-M>i||M-m>i){if(!o)break}else{var A=Hy(l,b);1>A?(null===(n=t.randomNumberGenerator)&&(t.randomNumberGenerator=n=new ld),A=n.random(),u=n.random(),n=c>p?(1+(n=Math.abs(b.bounds.right-l.bounds.x)))*A:c<p?-(1+(n=Math.abs(b.bounds.x-l.bounds.right)))*A:(1+(n=Math.max(b.width,l.width)))*A-n/2,p=m>M?(1+(p=Math.abs(b.bounds.bottom-l.bounds.y)))*u:c<p?-(1+(p=Math.abs(b.bounds.y-l.bounds.bottom)))*u:(1+(p=Math.max(b.height,l.height)))*u-p/2):(n=(p-c)/A*(u=-l.charge*b.charge/(A*A)),p=(M-m)/A*u),l.forceX+=n,l.forceY+=p,b.forceX-=n,b.forceY-=p}}}}for(o=t.network.edges.iterator;o.next();)n=(l=(i=(u=o.value).fromVertex).bounds).x+(c=i.focus).x,l=l.y+c.y,c=(m=(r=u.toVertex).bounds).x+(x=r.focus).x,m=m.y+x.y,1>(x=Hy(i,r))?(null===(x=t.randomNumberGenerator)&&(t.randomNumberGenerator=x=new ld),u=x.random(),x=x.random(),n=(n>c?1:-1)*(1+(r.width>i.width?r.width:i.width))*u,p=(l>m?1:-1)*(1+(r.height>i.height?r.height:i.height))*x):(n=(c-n)/x*(u=u.stiffness*(x-u.length)),p=(m-l)/x*u),i.forceX+=n,i.forceY+=p,r.forceX-=n,r.forceY-=p;for(o=n=0;o<e.length;o++)t.isFixed(i=e[o])?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}function Gy(){this.Uv=this.Tv=this.Qs=this.Ss=this.Rs=0}function ga(t){se.call(this,t)}function _h(t){Ue.call(this,t),this.ia=!1,this.Ha=this.u=NaN,this.sh=this.Vd=this.V=this.F=0,this.We=this.Gj=null,this.tv=0}function Kh(t){tn.call(this,t),this.j=this.o=NaN}function ld(){var t=0;void 0===t&&(t=42),this.seed=t,this.by=48271,this.gy=2147483647,this.Q=44488.07041494893,this.hy=3399,this.ey=1/2147483647,this.random()}function qt(t){pe.call(this),this.lc=this.ie=25,this.K=0,this.Ck=fd,this.Yk=pd,this.Pk=gd,this.bj=4,this.qk=md,this.bg=15,this.kl=10,this.sf=!0,this.Cn=4,this.Ra=this.Iq=this.Ia=-1,this.Md=this.Hn=0,this.Ta=this.Kd=this.Ld=this.he=this.vb=null,this.Kn=0,this.Jn=this.kj=null,this.le=0,this.el=null,this.Rf=new B,this.He=[],this.He.length=100,this.yw=this.ve=0,t&&Object.assign(this,t)}function _p(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Vi(t){null===t.kj&&(t.kj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.kj[e]=n.layer,e++,t.kj[e]=n.column,e++,t.kj[e]=n.index,e++}return t.kj}function Pn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function Wy(t,e,i){var n=hs(t,e),o=t.vb[e];(null===t.Jn||t.Jn.length<o*o)&&(t.Jn=[]);for(var r=t.Jn,l=0;l<o;l++){var m,u=0,c=n[l],p=c.near;if(null!==p&&p!==c&&p.layer===c.layer&&(u+=Math.max(0,Math.abs(p.index-c.index)-1)),0<=i){var x=n[l].sourceEdgesArrayAccess;for(c=0;c<x.length;c++){var b=x[c];if(b.valid&&b.fromVertex.layer!==e){p=b.fromVertex.index;var M=b.portToPos;for(b=b.portFromPos,m=c+1;m<x.length;m++){var A=x[m];if(A.valid&&A.fromVertex.layer!==e){var L=A.fromVertex.index,D=A.portToPos;A=A.portFromPos,M<D&&(p>L||p===L&&b>A)&&u++,D<M&&(L>p||L===p&&A>b)&&u++}}}}}if(0>=i)for(x=n[l].destinationEdgesArrayAccess,c=0;c<x.length;c++)if((b=x[c]).valid&&b.toVertex.layer!==e)for(p=b.toVertex.index,M=b.portToPos,b=b.portFromPos,m=c+1;m<x.length;m++)(A=x[m]).valid&&A.toVertex.layer!==e&&(L=A.toVertex.index,D=A.portToPos,b<(A=A.portFromPos)&&(p>L||p===L&&M>D)&&u++,A<b&&(L>p||L===p&&D>M)&&u++);for(r[l*o+l]=u,u=l+1;u<o;u++){var I=0,z=0;if(0<=i){x=n[l].sourceEdgesArrayAccess;var X=n[u].sourceEdgesArrayAccess;for(c=0;c<x.length;c++)if((b=x[c]).valid&&b.fromVertex.layer!==e)for(p=b.fromVertex.index,b=b.portFromPos,m=0;m<X.length;m++)(A=X[m]).valid&&A.fromVertex.layer!==e&&(L=A.fromVertex.index,A=A.portFromPos,(p<L||p===L&&b<A)&&z++,(L<p||L===p&&A<b)&&I++)}if(0>=i)for(x=n[l].destinationEdgesArrayAccess,X=n[u].destinationEdgesArrayAccess,c=0;c<x.length;c++)if((b=x[c]).valid&&b.toVertex.layer!==e)for(p=b.toVertex.index,M=b.portToPos,m=0;m<X.length;m++)(A=X[m]).valid&&A.toVertex.layer!==e&&(D=A.portToPos,(p<(L=A.toVertex.index)||p===L&&M<D)&&z++,(L<p||L===p&&D<M)&&I++);r[l*o+u]=I,r[u*o+l]=z}}return us(t,e,n),r}function hd(t){for(var e=0,i=0;i<=t.Ia;i++){for(var n=t,o=i,r=hs(n,o),l=n.vb[o],u=0,c=0;c<l;c++){var p=r[c].destinationEdgesArrayAccess;if(null!==p)for(var m=0;m<p.length;m++){var x=p[m];x.valid&&x.toVertex.layer!==o&&(u+=(Math.abs(x.fromVertex.column+x.portFromColOffset-(x.toVertex.column+x.portToColOffset))+1)*_p(x))}}us(n,o,r),e+=u}return e}function Kp(t,e,i){for(var n=hs(t,e),o=t.vb[e],r=[],l=0;l<o;l++){var u=n[l],c=null;0>=i&&(c=u.sourceEdgesArrayAccess);var p=null;0<=i&&(p=u.destinationEdgesArrayAccess);var m=0,x=0,b=u.near;if(null!==b&&b.layer===u.layer&&(m+=b.column-1,x++),null!==c)for(b=0;b<c.length;b++){var M=(u=c[b]).fromVertex;u.valid&&!u.rev&&M.layer!==e&&(m+=M.column,x++)}if(null!==p)for(c=0;c<p.length;c++)b=(u=p[c]).toVertex,u.valid&&!u.rev&&b.layer!==e&&(m+=b.column,x++);r[l]=0===x?-1:m/x}return us(t,e,n),r}function Uy(t,e,i){for(var n=hs(t,e),o=t.vb[e],r=[],l=0;l<o;l++){var u=n[l],c=null;0>=i&&(c=u.sourceEdgesArrayAccess);var p=null;0<=i&&(p=u.destinationEdgesArrayAccess);var m=0,x=[],b=u.near;if(null!==b&&b.layer===u.layer&&(x[m]=b.column-1,m++),u=void 0,null!==c)for(b=0;b<c.length;b++){var M=(u=c[b]).fromVertex;u.valid&&!u.rev&&M.layer!==e&&(x[m]=M.column+u.portFromColOffset,m++)}if(null!==p)for(c=0;c<p.length;c++)b=(u=p[c]).toVertex,u.valid&&!u.rev&&b.layer!==e&&(x[m]=b.column+u.portToColOffset,m++);0===m?r[l]=-1:(x.sort(function(A,L){return A-L}),p=m>>1,r[l]=1&m?x[p]:x[p-1]+x[p]>>1)}return us(t,e,n),r}function Jh(t,e,i,n,o,r){if(e.component===n){if(e.component=i,o)for(var l=e.destinationEdges;l.next();){var u=l.value,c=u.toVertex,p=e.layer-c.layer;p===(u=t.linkMinLength(u))&&Jh(t,c,i,n,o,r)}if(r)for(l=e.sourceEdges;l.next();)(p=(c=(u=l.value).fromVertex).layer-e.layer)===(u=t.linkMinLength(u))&&Jh(t,c,i,n,o,r)}}function Jp(t,e,i,n,o,r){if(e.component===n){if(e.component=i,o)for(var l=e.destinationEdges;l.next();)Jp(t,l.value.toVertex,i,n,o,r);if(r)for(e=e.sourceEdges;e.next();)Jp(t,e.value.fromVertex,i,n,o,r)}}function gx(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Zy(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function _y(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function qp(t,e){e.Ll=t.Kn,t.Kn++;for(var i=e.destinationEdges;i.next();){var n=i.value,o=n.toVertex;-1===o.Ll&&(n.forest=!0,qp(t,o))}e.finish=t.Kn,t.Kn++}function Ky(t){for(var e=t.network.vertexes.iterator;e.next();){var i=Jy(t,e.value);t.Ia=Math.max(i,t.Ia)}}function Jy(t,e){var i=0;if(-1===e.layer){for(var n=e.destinationEdges;n.next();){var o=n.value,r=o.toVertex;o=t.linkMinLength(o),i=Math.max(i,Jy(t,r)+o)}e.layer=i}else i=e.layer;return i}function qy(t,e){var i=0;if(-1===e.layer){for(var n=e.sourceEdges;n.next();){var o=n.value,r=o.fromVertex;o=t.linkMinLength(o),i=Math.max(i,qy(t,r)+o)}e.layer=i}else i=e.layer;return i}function $y(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)$y(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,o=n.length,r=0;r<o;r++){var l=n[r],u=l.fromVertex,c=l.toVertex;l=t.linkMinLength(l),u.layer-c.layer>l&&Jh(t,u,0,-1,!0,!1)}for(Jh(t,e,1,-1,!0,!0);0!==e.component;){for(r=0,n=1/0,u=0,c=null,l=t.network.vertexes.iterator;l.next();){var p=l.value;if(1===p.component){var m=0,x=!1,b=p.sourceEdgesArrayAccess;o=b.length;for(var M=0;M<o;M++){var A=b[M],L=A.fromVertex;m+=1,1!==L.component&&(r+=1,L=L.layer-p.layer,A=t.linkMinLength(A),n=Math.min(n,L-A))}for(o=(b=p.destinationEdgesArrayAccess).length,M=0;M<o;M++)--m,1!==(A=b[M].toVertex).component?--r:x=!0;(null===c||m<u)&&!x&&(c=p,u=m)}}if(0<r){for(i.reset();i.next();)1===(o=i.value).component&&(o.layer+=n);e.component=0}else c.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(Jh(t,e,1,-1,!0,!1);0!==e.component;){for(n=0,o=1/0,r=0,u=null,c=t.network.vertexes.iterator;c.next();)if(1===(l=c.value).component){for(p=0,m=!1,x=(b=l.sourceEdgesArrayAccess).length,M=0;M<x;M++)p+=1,1!==(A=b[M].fromVertex).component?n+=1:m=!0;for(x=(b=l.destinationEdgesArrayAccess).length,M=0;M<x;M++)--p,1!==(L=(A=b[M]).toVertex).component&&(--n,L=l.layer-L.layer,A=t.linkMinLength(A),o=Math.min(o,L-A));(null===u||p>r)&&!m&&(u=l,r=p)}if(0>n){for(i.reset();i.next();)1===(n=i.value).component&&(n.layer-=o);e.component=0}else u.component=0}}}function Qy(t,e,i){return 90===t.K?i&&!e.rev||!i&&e.rev?270:90:180===t.K?i&&!e.rev||!i&&e.rev?0:180:270===t.K?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function tv(t,e,i){for(var n=i[i.length-1].sourceEdges.iterator;n.next();){var o=n.value;if(!o.rev&&o.valid){if(i.push(o=o.fromVertex),o===e||tv(t,e,i))return!0;i.pop()}}return!1}function ev(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var o=i.get(e);Array.isArray(o)&&o.forEach(function(c){c.index=t.vb[n],t.vb[n]++})}for(e=e.destinationEdgesArrayAccess,o=!0;o;){o=!1;for(var r=0;r<e.length-1;r++){var l=e[r],u=e[r+1];l.portFromColOffset>u.portFromColOffset&&(o=!0,e[r]=u,e[r+1]=l)}}for(o=0;o<e.length;o++)(r=e[o]).valid&&-1===(r=r.toVertex).index&&ev(t,r,i)}}function iv(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var o=i.get(e);Array.isArray(o)&&o.forEach(function(c){c.index=t.vb[n],t.vb[n]++})}e=e.sourceEdgesArrayAccess;var r=!0;for(o=0;r;)for(r=!1,o=0;o<e.length-1;o++){var l=e[o],u=e[o+1];l.portToColOffset>u.portToColOffset&&(r=!0,e[o]=u,e[o+1]=l)}for(o=0;o<e.length;o++)(r=e[o]).valid&&-1===(r=r.fromVertex).index&&iv(t,r,i)}}function ud(t,e,i){var n=hs(t,e),o=t.vb[e],r=Uy(t,e,i),l=Kp(t,e,i);for(i=0;i<o;i++)-1===l[i]&&(l[i]=n[i].column),-1===r[i]&&(r[i]=n[i].column);for(var c,u=!0;u;)for(u=!1,i=0;i<o-1;i++)(r[i+1]<r[i]||r[i+1]===r[i]&&l[i+1]<l[i])&&(u=!0,c=r[i],r[i]=r[i+1],r[i+1]=c,c=l[i],l[i]=l[i+1],l[i+1]=c,c=n[i],n[i]=n[i+1],n[i+1]=c);for(i=r=0;i<o;i++)(c=n[i]).index=i,r+=t.nodeMinColumnSpace(c,!0),c.column=r,r+=1,r+=t.nodeMinColumnSpace(c,!1);us(t,e,n)}function Dn(t,e,i){var n=hs(t,e),o=t.vb[e];i=Wy(t,e,i);var r,l=[];for(r=0;r<o;r++)l[r]=-1;var u=[];for(r=0;r<o;r++)u[r]=-1;for(var c=!1,p=!0;p;)for(p=!1,r=0;r<o-1;r++){var m=i[n[r].index*o+n[r+1].index],x=i[n[r+1].index*o+n[r].index],b=0,M=0,A=n[r].column,L=n[r+1].column,D=t.nodeMinColumnSpace(n[r],!0),I=t.nodeMinColumnSpace(n[r],!1),z=t.nodeMinColumnSpace(n[r+1],!0),X=t.nodeMinColumnSpace(n[r+1],!1);D=A-D+z,I=L-I+X;var V=n[r].sourceEdges.iterator;for(V.reset();V.next();)if(X=(z=V.value).fromVertex,z.valid&&X.layer===e){for(z=0;z<n.length&&n[z]!==X;)z++;z<r&&(b+=2*(r-z),M+=2*(r+1-z)),z===r+1&&(b+=1),z>r+1&&(b+=4*(z-r),M+=4*(z-(r+1)))}for((V=n[r].destinationEdges.iterator).reset();V.next();)if(X=(z=V.value).toVertex,z.valid&&X.layer===e){for(z=0;z<n.length&&n[z]!==X;)z++;z===r+1&&(M+=1)}for((V=n[r+1].sourceEdges.iterator).reset();V.next();)if(X=(z=V.value).fromVertex,z.valid&&X.layer===e){for(z=0;z<n.length&&n[z]!==X;)z++;z<r&&(b+=2*(r+1-z),M+=2*(r-z)),z===r&&(M+=1),z>r+1&&(b+=4*(z-(r+1)),M+=4*(z-r))}for((V=n[r+1].destinationEdges.iterator).reset();V.next();)if(X=(z=V.value).toVertex,z.valid&&X.layer===e){for(z=0;z<n.length&&n[z]!==X;)z++;z===r&&(b+=1)}z=X=0;var Z=u[n[r].index],J=l[n[r+1].index],ct=u[n[r+1].index];-1!==(V=l[n[r].index])&&(X+=Math.abs(V-A),z+=Math.abs(V-I)),-1!==Z&&(X+=Math.abs(Z-A),z+=Math.abs(Z-I)),-1!==J&&(X+=Math.abs(J-L),z+=Math.abs(J-D)),-1!==ct&&(X+=Math.abs(ct-L),z+=Math.abs(ct-D)),(M<b-.5||M===b&&x<m-.5||M===b&&x===m&&z<X-.5)&&(p=c=!0,n[r].column=I,n[r+1].column=D,m=n[r],n[r]=n[r+1],n[r+1]=m)}for(r=0;r<o;r++)n[r].index=r;return us(t,e,n),c}function Tl(t,e,i){for(var n=!1;yx(t,e,i);)n=!0;return n}function yx(t,e,i){var n,o=hs(t,e),r=t.vb[e],l=Kp(t,e,-1);if(0<i)for(n=0;n<r;n++)l[n]=-1;var u=Kp(t,e,1);if(0>i)for(n=0;n<r;n++)u[n]=-1;for(var c=!1,p=!0;p;)for(p=!1,n=0;n<r;n++){var M,m=o[n].column,x=t.nodeMinColumnSpace(o[n],!0),b=t.nodeMinColumnSpace(o[n],!1);M=0>n-1||m-o[n-1].column-1>x+t.nodeMinColumnSpace(o[n-1],!1)?m-1:m,x=n+1>=r||o[n+1].column-m-1>b+t.nodeMinColumnSpace(o[n+1],!0)?m+1:m;var A=b=0,L=0;if(0>=i)for(var D=o[n].sourceEdges.iterator;D.next();){var I=D.value,z=I.fromVertex;if(I.valid&&z.layer!==e){var X=_p(I),V=I.portFromColOffset;I=I.portToColOffset,z=z.column,b+=(Math.abs(m+I-(z+V))+1)*X,A+=(Math.abs(M+I-(z+V))+1)*X,L+=(Math.abs(x+I-(z+V))+1)*X}}if(0<=i)for(D=o[n].destinationEdges.iterator;D.next();)z=(I=D.value).toVertex,I.valid&&z.layer!==e&&(X=_p(I),V=I.portFromColOffset,I=I.portToColOffset,z=z.column,b+=(Math.abs(m+V-(z+I))+1)*X,A+=(Math.abs(M+V-(z+I))+1)*X,L+=(Math.abs(x+V-(z+I))+1)*X);I=V=X=0,z=u[o[n].index],-1!==(D=l[o[n].index])&&(X+=Math.abs(D-m),V+=Math.abs(D-M),I+=Math.abs(D-x)),-1!==z&&(X+=Math.abs(z-m),V+=Math.abs(z-M),I+=Math.abs(z-x)),A<b||A===b&&V<X?(p=c=!0,o[n].column=M):(L<b||L===b&&I<X)&&(p=c=!0,o[n].column=x)}return us(t,e,o),t.normalize(),c}function $p(t,e,i){var n=hs(t,e),o=t.vb[e],r=Uy(t,e,i),l=[];for(i=0;i<o;i++)l[i]=r[i];for(r=!0;r;)for(r=!1,i=0;i<o;i++){var u=n[i].column,c=t.nodeMinColumnSpace(n[i],!0),p=t.nodeMinColumnSpace(n[i],!1),m=0;if(-1===l[i])if(0===i&&i===o-1)m=u;else if(0===i){var x=n[i+1].column;m=x-u===p+t.nodeMinColumnSpace(n[i+1],!0)?u-1:u}else m=i===o-1?u-(x=n[i-1].column)===c+t.nodeMinColumnSpace(n[i-1],!1)?u+1:u:((c=(x=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1)+(p=(x=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1))/2|0;else 0===i&&i===o-1?m=l[i]:0===i?(p=(x=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1,m=Math.min(l[i],p)):i===o-1?(c=(x=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,m=Math.max(l[i],c)):(c=(x=n[i-1].column)+t.nodeMinColumnSpace(n[i-1],!1)+c+1,p=(x=n[i+1].column)-t.nodeMinColumnSpace(n[i+1],!0)-p-1,c<l[i]&&l[i]<p?m=l[i]:c>=l[i]?m=c:p<=l[i]&&(m=p));m!==u&&(r=!0,n[i].column=m)}us(t,e,n),t.normalize()}function vx(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var o=n.value,r=t.nodeMinColumnSpace(o,!0),l=t.nodeMinColumnSpace(o,!1);if(o.column-r<=e&&o.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)(i=n.value).column>e&&(--i.column,t=!0);return t}function xx(t,e){var n,i=e+1,o=[],r=[];for(n=0;n<=t.Ia;n++)o[n]=!1,r[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){var u=(n=l.value).column-t.nodeMinColumnSpace(n,!0),c=n.column+t.nodeMinColumnSpace(n,!1);u<=e&&c>=e&&(o[n.layer]=!0),u<=i&&c>=i&&(r[n.layer]=!0)}for(u=!0,i=!1,n=0;n<=t.Ia;n++)u=u&&!(o[n]&&r[n]);if(u)for(l.reset();l.next();)(t=l.value).column>e&&(--t.column,i=!0);return i}function nv(t,e){for(var i=0;i<=t.Ra;i++)for(;vx(t,i););for(t.normalize(),i=0;i<t.Ra;i++)for(;xx(t,i););var n;if(t.normalize(),0<e)for(i=0;i<=t.Ra;i++){var o=Vi(t),r=hd(t);for(n=r+1;r<n;){n=r,ov(t,i,1);var l=hd(t);l>r?Pn(t,o):l<r&&(r=l,o=Vi(t))}}if(0>e)for(i=t.Ra;0<=i;i--)for(o=Vi(t),n=(r=hd(t))+1;r<n;)n=r,ov(t,i,-1),(l=hd(t))>r?Pn(t,o):l<r&&(r=l,o=Vi(t));t.normalize()}function ov(t,e,i){t.le=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var o=n.value;o.column-t.nodeMinColumnSpace(o,!0)<=e&&(o.component=t.le)}if(0>i)for(n.reset();n.next();)(o=n.value).column+t.nodeMinColumnSpace(o,!1)>=e&&(o.component=t.le);for(t.le++,n.reset();n.next();)-1===(e=n.value).component&&(Jp(t,e,t.le,-1,!0,!0),t.le++);var r;for(e=[],r=0;r<t.le*t.le;r++)e[r]=!1;for(o=[],r=0;r<(t.Ia+1)*(t.Ra+1);r++)o[r]=-1;for(n.reset();n.next();)for(var l=(r=n.value).layer,u=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),c=Math.min(t.Ra,r.column+t.nodeMinColumnSpace(r,!1));u<=c;u++)o[l*(t.Ra+1)+u]=r.component;for(r=0;r<=t.Ia;r++){if(0<i)for(l=0;l<t.Ra;l++)-1!==o[r*(t.Ra+1)+l]&&-1!==o[r*(t.Ra+1)+l+1]&&o[r*(t.Ra+1)+l]!==o[r*(t.Ra+1)+l+1]&&(e[o[r*(t.Ra+1)+l]*t.le+o[r*(t.Ra+1)+l+1]]=!0);if(0>i)for(l=t.Ra;0<l;l--)-1!==o[r*(t.Ra+1)+l]&&-1!==o[r*(t.Ra+1)+l-1]&&o[r*(t.Ra+1)+l]!==o[r*(t.Ra+1)+l-1]&&(e[o[r*(t.Ra+1)+l]*t.le+o[r*(t.Ra+1)+l-1]]=!0)}for(o=[],r=0;r<t.le;r++)o[r]=!0;for((l=[]).push(0);0!==l.length;)if(c=l[l.length-1],l.pop(),o[c])for(o[c]=!1,r=0;r<t.le;r++)e[c*t.le+r]&&l.splice(0,0,r);if(0<i)for(n.reset();n.next();)o[(t=n.value).component]&&--t.column;if(0>i)for(n.reset();n.next();)o[(i=n.value).component]&&(i.column+=1)}function cd(t,e,i,n){for(var o=90===t.K||270===t.K,r=xt(e),l=r.next();!l.done;l=r.next()){var u=xt(l.value);for(l=u.next();!l.done;l=u.next())(l=l.value).sd=l,l.shift=1/0,l.zc=NaN,l.qg=0}for(l=90===t.K||270===t.K,u=(r=xt(e)).next();!u.done;u=r.next())for(var c=(u=xt(u.value)).next();!c.done;c=u.next())if((c=c.value).root===c){for(var p=0,m=c;m.align!==c;){var x=m.align,b=l?m.width:m.height,M=l?x.width:x.height;if(i){var A=yd(m,x),L=A.portFromPos,D=A.portToPos;null!==A.link&&(m.node&&m.node!==A.link.fromNode&&(L=l?m.focusX:m.focusY),x.node&&x.node!==A.link.toNode&&(D=l?x.focusX:x.focusY))}else L=(A=yd(x,m)).portToPos,D=A.portFromPos,null!==A.link&&(m.node&&m.node!==A.link.toNode&&(L=l?m.focusX:m.focusY),x.node&&x.node!==A.link.fromNode&&(D=l?x.focusX:x.focusY));x.qg=b=n?m.qg+(b-L)-(M-D):m.qg+L-D,p=Math.min(p,b),m=m.align}m=c;do{m.qg=m.qg-p,m=m.align}while(m!==c)}for(l=(i=xt(e)).next();!l.done;l=i.next())for(l=(r=xt(l.value)).next();!l.done;l=r.next())(l=l.value).root===l&&rv(t,l,e);for(i=0;i<e.length;i++)if(!(0>=e[i].length)&&(l=e[i][0]).sd===l){l.sd.shift===1/0&&(l.sd.shift=0),l=i,u=0;do{for(r=e[l][u];r.align!==r.root;)l++,0<(r=r.align).vi&&((u=sv(r,e)).sd.shift=Math.min(u.sd.shift,r.sd.shift+r.zc+r.qg-(u.zc+u.qg+(o?u.width:u.height)+t.columnSpacing)));u=r.vi+1}while(l<e.length&&u<e[l].length&&r.sd===e[l][u].sd)}for(t=new Tt,l=(e=xt(e)).next();!l.done;l=e.next())for(l=(i=xt(l.value)).next();!l.done;l=i.next())(l=l.value).zc=l.zc+l.sd.shift+l.qg,r=o?l.width:l.height,t.add(l,n?-l.zc-r:l.zc);return t}function rv(t,e,i){if(isNaN(e.zc)){e.zc=0;var n=e;do{if(0<n.vi){var o=sv(n,i),r=o.root;rv(t,r,i),e.sd===e&&(e.sd=r.sd),e.sd===r.sd&&(e.zc=Math.max(e.zc,r.zc+o.qg+(90===t.K||270===t.K?o.width:o.height)-n.qg+t.columnSpacing))}n=n.align}while(n!==e);for(;n.align!==e;)(n=n.align).zc=e.zc,n.sd=e.sd}}function sv(t,e){var i=t.Uz;return 1>(t=t.vi)&&it("Could not determine previous vertex in layer"),e[i][t-1]}function kx(t,e,i,n,o){if(!e||0===e.count)return i[o]=0,n[o]=0,1/0;var r=1/0,l=-1/0;return e.each(function(u){var c=u.key;(u=u.value)<r&&(r=u),u+(c=90===t.K||270===t.K?c.width:c.height)>l&&(l=u+c)}),i[o]=r,n[o]=l,l-r}function dd(t,e){return 270===t.K?e?ye:ni:90===t.K?e?ni:ye:180===t.K?e?_e:Le:e?Le:_e}function hs(t,e){var i=t.vb[e];if(i>=t.He.length){for(var n=[],o=0;o<t.He.length;o++)n[o]=t.He[o];t.He=n}for(null==t.He[i]?n=[]:(n=t.He[i],t.He[i]=null),t=t.el[e],e=0;e<t.length;e++)n[(i=t[e]).index]=i;return n}function us(t,e,i){t.He[t.vb[e]]=i}xe.className="CircularLayout",xe.ConstantSpacing=$n,xe.ConstantDistance=ss,xe.ConstantAngle=Br,xe.Packed=Qn,xe.Clockwise=Bi,xe.Counterclockwise=as,xe.BidirectionalLeft=zs,xe.BidirectionalRight=Cl,xe.Forwards=id,xe.Reverse=nd,xe.Ascending=od,xe.Descending=rd,xe.Optimized=Al,xe.Pythagorean=sd,xe.Circular=pa,Uh.prototype.compare=function(t,e){if(0<t&&0>this.Pl||Math.abs(t)<Math.abs(this.Pl)&&!(0>t&&0<this.Pl))for(this.Pl=t,this.lk=[],this.tm=[],t=0;t<e.length;t++)this.lk[t]=e[t].bounds.x,this.tm[t]=e[t].bounds.y},Uh.prototype.commit=function(t){if(null!==this.lk&&null!==this.tm)for(var e=0;e<this.lk.length;e++){var i=t.M(e);i.x=this.lk[e],i.y=this.tm[e]}},Uh.className="VertexArrangement",Ut(Pl,se),Pl.prototype.createVertex=function(){return new Zh(this)},Pl.prototype.createEdge=function(){return new ad(this)},Pl.className="CircularNetwork",Ut(Zh,Ue),Ot.Object.defineProperties(Zh.prototype,{diameter:{get:function(){return this.Si},set:function(t){this.Si!==t&&(this.Si=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),Zh.className="CircularVertex",Ut(ad,tn),ad.className="CircularEdge",Ut(di,pe),di.prototype.cloneProtected=function(t){pe.prototype.cloneProtected.call(this,t),t.$d.assign(this.$d),t.Bm=this.Bm,t.sf=this.sf,t.td=this.td,t.cl=this.cl,t.$m=this.$m,t.Zf=this.Zf,t.In=this.In,t.fo=this.fo,t.Gk=this.Gk,t.Fk=this.Fk,t.Dk=this.Dk,t.Ek=this.Ek,t.Vm=this.Vm,t.Um=this.Um},di.prototype.createNetwork=function(){return new ga(this)},di.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Ko();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)(i=e.value).stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Cu(),this.An=0,this.needsClusterLayout()){for(var n=(i=(e=this.network).$x()).iterator;n.next();){this.network=n.value;for(var o=this.network.vertexes.iterator;o.next();){var r=o.value;r.Vd=r.vertexes.count,r.sh=1,r.Gj=null,r.We=null}Yy(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var u=l.count,c=!0;r=o=0;for(var p=te(),m=0;m<u+e.vertexes.count+2;m++)p[m]=null;u=0,l.reset();for(var x=$.alloc();l.next();)if(this.computeBounds(m=l.value,x),c)c=!1,o=x.x+x.width/2,r=x.y+x.height/2,p[0]=new B(x.x+x.width+n.width,x.y),p[1]=new B(x.x,x.y+x.height+n.height),u=2;else{var b=Xy(p,u,o,r,x.width,x.height,n),M=p[b],A=new B(M.x+x.width+n.width,M.y),L=new B(M.x,M.y+x.height+n.height);for(b+1<u&&p.splice(b+1,0,null),p[b]=A,p[b+1]=L,u++,b=M.x-x.x,M=M.y-x.y,m=m.vertexes.iterator;m.next();)(A=m.value).centerX+=b,A.centerY+=M}for($.free(x),m=e.vertexes.iterator;m.next();)b=(l=m.value).bounds,2>u?(o=b.x+b.width/2,r=b.y+b.height/2,p[0]=new B(b.x+b.width+n.width,b.y),p[1]=new B(b.x,b.y+b.height+n.height),u=2):(M=new B((x=p[c=Xy(p,u,o,r,b.width,b.height,n)]).x+b.width+n.width,x.y),b=new B(x.x,x.y+b.height+n.height),c+1<u&&p.splice(c+1,0,null),p[c]=M,p[c+1]=b,u++,l.centerX=x.x+l.width/2,l.centerY=x.y+l.height/2);for($t(p),n=i.iterator;n.next();){for(o=(i=n.value).vertexes.iterator;o.next();)e.dh(o.value);for(i=i.edges.iterator;i.next();)e.Bo(i.value)}}Vy(this,t),this.updateParts()}this.cl=t,this.network=null,this.isValidLayout=!0},di.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Yc(i)&&2<++t)return!0;if(10<e)break;e++}return!1},di.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.ed(n.bounds)}return e},di.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},di.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Nu();e.next();){var i=e.value;if("Comment"===i.category&&i.isVisible()){var n=this.network.ki(i);null===n&&(n=this.network.Bl(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var o=n.destinationEdges;o.next();){var r=o.value;if(r.toVertex===t){i=r;break}}if(null===i)for(o=n.sourceEdges;o.next();)if((r=o.value).fromVertex===t){i=r;break}null===i&&(i=this.network.Yj(t,n,null)),i.length=this.defaultCommentSpringLength}}},di.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},di.prototype.moveFixedVertex=function(){},di.prototype.commitLayout=function(){this.zv(),this.commitNodes(),this.isRouting&&this.commitLinks()},di.prototype.zv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Bt,e.toSpot=Bt)}},di.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=$.alloc();this.computeBounds(this.network,i),t=(e=this.arrangementOrigin).x-i.x,e=e.y-i.y,$.free(i)}i=$.alloc();for(var n=this.network.vertexes.iterator;n.next();){var o=n.value;(0!==t||0!==e)&&(i.assign(o.bounds),i.x+=t,i.y+=e,o.bounds=i),o.commit()}$.free(i)},di.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},di.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Gk:t},di.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Fk:t},di.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Dk:t},di.prototype.electricalFieldX=function(){return 0},di.prototype.electricalFieldY=function(){return 0},di.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Ek:t},di.prototype.gravitationalFieldX=function(){return 0},di.prototype.gravitationalFieldY=function(){return 0},di.prototype.isFixed=function(t){return t.isFixed},Ot.Object.defineProperties(di.prototype,{currentIteration:{get:function(){return this.An}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.Bm},set:function(t){this.Bm!==t&&(this.Bm=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},maxIterations:{get:function(){return this.cl},set:function(t){this.cl!==t&&0<=t&&(this.cl=t,this.C())}},epsilonDistance:{get:function(){return this.$m},set:function(t){this.$m!==t&&0<t&&(this.$m=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.In},set:function(t){this.In!==t&&1<t&&(this.In=t,this.C())}},randomNumberGenerator:{get:function(){return this.fo},set:function(t){this.fo!==t&&(null!==t&&"function"!=typeof t.random&&it('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.fo=t)}},defaultSpringStiffness:{get:function(){return this.Gk},set:function(t){this.Gk!==t&&(this.Gk=t,this.C())}},defaultSpringLength:{get:function(){return this.Fk},set:function(t){this.Fk!==t&&(this.Fk=t,this.C())}},defaultElectricalCharge:{get:function(){return this.Dk},set:function(t){this.Dk!==t&&(this.Dk=t,this.C())}},defaultGravitationalMass:{get:function(){return this.Ek},set:function(t){this.Ek!==t&&(this.Ek=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,this.C())}}}),di.className="ForceDirectedLayout",Gy.className="ForceDirectedSubnet",Ut(ga,se),ga.prototype.createVertex=function(){return new _h(this)},ga.prototype.createEdge=function(){return new Kh(this)},ga.className="ForceDirectedNetwork",Ut(_h,Ue),Ot.Object.defineProperties(_h.prototype,{isFixed:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}}}),_h.className="ForceDirectedVertex",Ut(Kh,tn),Ot.Object.defineProperties(Kh.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Kh.className="ForceDirectedEdge",ld.prototype.random=function(){var t=this.seed%this.Q*this.by-this.seed/this.Q*this.hy;return this.seed=0<t?t:t+this.gy,this.seed*this.ey},ld.className="RandomNumberGenerator",Ut(qt,pe),qt.prototype.cloneProtected=function(t){pe.prototype.cloneProtected.call(this,t),t.ie=this.ie,t.lc=this.lc,t.K=this.K,t.Ck=this.Ck,t.Yk=this.Yk,t.Pk=this.Pk,t.bj=this.bj,t.qk=this.qk,t.bg=this.bg,t.kl=this.kl,t.sf=this.sf,t.Cn=this.Cn,t.ve=this.ve},qt.prototype.qb=function(t){t.classType===qt?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:it("Unknown enum value: "+t):pe.prototype.qb.call(this,t)},qt.prototype.createNetwork=function(){return new Ll(this)},qt.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Iq=-1,this.Md=this.Hn=0,this.el=this.Jn=this.kj=null,t=0;t<this.He.length;t++)this.He[t]=null;if(0<this.network.vertexes.count){for(this.network.Ko(),this.cycleRemoveOption!==qh&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ia=-1,this.assignLayers(),t.reset();t.next();)this.Ia=Math.max(this.Ia,t.value.layer);this.cycleRemoveOption===qh&&this.removeCycles();for(var e=[],i=(t=this.network).edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){var o=(n=e[i]).fromVertex,r=n.toVertex;if(!(n.valid||(null===o.node&&null===o.data||null===r.node&&null===r.data)&&o.layer===r.layer)){var l=0,u=0,c=0,p=0;if(null!==n.link){if(null===(u=n.link))continue;var m=o.node;if(l=r.node,null===m||null===l)continue;var x=u.fromNode;c=u.toNode;for(var b=u.fromPort;null!==b&&!b.Ed();)b=b.panel;for(u=u.toPort;null!==u&&!u.Ed();)u=u.panel;if(n.rev){p=x;var M=b;x=c,b=u,c=p,u=M}var A=o.focus;p=r.focus;var L=n.rev?r.bounds:o.bounds;M=B.alloc(),m!==x?L.w()&&x.isVisible()?x.actualBounds.w()?(Ir(x,b,P,M),M.x+=x.actualBounds.x-L.x,M.y+=x.actualBounds.y-L.y):(Ir(x,b,P,M),M.w()||M.assign(A)):M.assign(A):L.w()?(Ir(x,b,P,M),M.w()||M.assign(A)):M.assign(A),x=n.rev?o.bounds:r.bounds,m=B.alloc(),l!==c?x.w()&&c.isVisible()?c.actualBounds.w()?(Ir(c,u,P,m),m.x+=c.actualBounds.x-x.x,m.y+=c.actualBounds.y-x.y):(Ir(c,u,P,m),m.w()||m.assign(p)):m.assign(p):x.w()?(Ir(c,u,P,m),m.w()||m.assign(p)):m.assign(p),90===this.K||270===this.K?(l=Math.round((M.x-A.x)/this.lc),c=M.x,u=Math.round((m.x-p.x)/this.lc),p=m.x):(l=Math.round((M.y-A.y)/this.lc),c=M.y,u=Math.round((m.y-p.y)/this.lc),p=m.y),B.free(M),B.free(m),n.portFromColOffset=l,n.portFromPos=c,n.portToColOffset=u,n.portToPos=p}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(M=o.layer,m=r.layer,x=0,null!==(L=n.link)){var D=L.fromPort,I=L.toPort;if(null!==D&&null!==I){var z=L.fromNode;if(b=L.toNode,null!==z&&null!==b){var X=dd(this,!0),V=dd(this,!1),Z=this.setsPortSpots?X:L.computeSpot(!0,D);A=this.setsPortSpots?V:L.computeSpot(!1,I);var J=L.isOrthogonal;Z.$c()&&Z.Hf(V)&&A.$c()&&A.Hf(X)?x=0:(X=L.getLinkPoint(z,D,Z,!0,J,b,I,B.alloc()),V=L.getLinkDirection(z,D,X,Z,!0,J,b,I),B.free(X),Z.ys()||V!==Qy(this,n,!0)?this.setsPortSpots&&null!==z&&1===z.ports.count&&n.rev&&(x+=1):x+=1,Z=L.getLinkPoint(b,I,A,!1,J,z,D,B.alloc()),L=L.getLinkDirection(b,I,Z,A,!1,J,z,D),B.free(Z),A.ys()||L!==Qy(this,n,!1)?this.setsPortSpots&&null!==b&&1===b.ports.count&&n.rev&&(x+=2):x+=2)}}}if(x=1===(b=x)||3===b,L=null,D=void 0,(b=2===b||3===b)&&(this._experimental&&(A=o,(L=[]).push(r),L=tv(this,A,L)?L.reverse():[],D=1),(A=t.createVertex()).node=null,A.Du=1,A.layer=M,A.near=o,t.dh(A),(o=t.Yj(o,A,n.link)).valid=!1,o.rev=n.rev,o.portFromColOffset=l,o.portToColOffset=0,o.portFromPos=c,o.portToPos=0,o=A),I=1,x&&I--,M-m>I&&0<M){for(n.valid=!1,(A=t.createVertex()).node=null,A.Du=2,A.layer=M-1,L&&D<L.length&&A.layer===L[D].layer&&(A.near=L[D++]),t.dh(A),(o=t.Yj(o,A,n.link)).valid=!0,o.rev=n.rev,o.portFromColOffset=b?0:l,o.portToColOffset=0,o.portFromPos=b?0:c,o.portToPos=0,o=A,M--;M-m>I&&0<M;)(A=t.createVertex()).node=null,A.Du=3,A.layer=M-1,L&&D<L.length&&A.layer===L[D].layer&&(A.near=L[D++]),t.dh(A),(o=t.Yj(o,A,n.link)).valid=!0,o.rev=n.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=A,M--;(o=t.Yj(A,r,n.link)).valid=!x,x&&(A.near=r),o.rev=n.rev,o.portFromColOffset=0,o.portToColOffset=u,o.portFromPos=0,o.portToPos=p}else n.valid=!0}}for(t=this.vb=[],e=0;e<=this.Ia;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Iq=-1,i=this.Md=this.Hn=0;i<=this.Ia;i++)t[i]>t[this.Md]&&(this.Iq=t[i]-1,this.Md=i),t[i]<t[this.Hn]&&(this.Hn=i);for(this.el=[],i=0;i<t.length;i++)this.el[i]=[];for(e.reset();e.next();)this.el[(t=e.value).layer][t.index]=t;for(this.Ra=-1,t=0;t<=this.Ia;t++){for(e=hs(this,t),i=0,n=this.vb[t],r=0;r<n;r++)i+=this.nodeMinColumnSpace(o=e[r],!0),o.column=i,i+=1,i+=this.nodeMinColumnSpace(o,!1);this.Ra=Math.max(this.Ra,i-1),us(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},qt.prototype.linkMinLength=function(){return 1},qt.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},qt.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var i=e?t.fv:t.ev;return null!==i?i:90===(i=this.K)||270===i?e?t.fv=t.focus.x/this.lc+1|0:t.ev=(t.bounds.width-t.focus.x)/this.lc+1|0:e?t.fv=t.focus.y/this.lc+1|0:t.ev=(t.bounds.height-t.focus.y)/this.lc+1|0},qt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ia;e++)for(var i=Wy(this,e,1),n=this.vb[e],o=0;o<n;o++)for(var r=o;r<n;r++)t+=i[o*n+r];return t},qt.prototype.normalize=function(){var t=1/0;this.Ra=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ra=Math.max(this.Ra,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ra-=t},qt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Ck){default:case Qp:var e=0,i=(t=this.network).vertexes.count-1,n=[];n.length=i+1;for(var o=t.vertexes.iterator;o.next();)o.value.valid=!0;for(;null!==gx(t);){for(o=Zy(t);null!==o;)n[i]=o,i--,o.valid=!1,o=Zy(t);for(o=_y(t);null!==o;)n[e]=o,e++,o.valid=!1,o=_y(t);o=null;for(var r=0,l=this.network.vertexes.iterator;l.next();){var u=l.value;if(u.valid){for(var c=0,p=u.destinationEdges;p.next();)p.value.toVertex.valid&&c++;p=0;for(var m=u.sourceEdges;m.next();)m.value.fromVertex.valid&&p++;(null===o||r<c-p)&&(o=u,r=c-p)}}null!==o&&(n[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.index>e.toVertex.index&&(t.gm(e),e.rev=!0);break;case fd:for(n=this.network.vertexes.iterator;n.next();)(t=n.value).Ll=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Kn=0,n.reset();n.next();)0===(e=n.value).sourceEdges.count&&qp(this,e);for(n.reset();n.next();)-1===(e=n.value).Ll&&qp(this,e);for(t.reset();t.next();)(n=t.value).forest||(i=(e=n.fromVertex).finish,r=(o=n.toVertex).finish,o.Ll<e.Ll&&i<r&&(this.network.gm(n),n.rev=!0));break;case qh:for(e=(t=this.network).vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)void 0===(o=n[(i=e.value).layer])?n[i.layer]=[i]:o.push(i);for(i=e=0;i<n.length;i++)if((o=n[i])&&0!==o.length){if(0<i)for(r=0;r<o.length;r++)o[r].layer-=e}else e++;for(n=t.edges.iterator;n.next();)(e=n.value).fromVertex.layer<e.toVertex.layer&&(t.gm(e),e.rev=!0)}}},qt.prototype.assignLayers=function(){switch(this.Yk){case tg:Ky(this);break;case eg:for(var t,e=this.network.vertexes.iterator;e.next();)t=qy(this,e.value),this.Ia=Math.max(t,this.Ia);for(e.reset();e.next();)(t=e.value).layer=this.Ia-t.layer;break;default:for(Ky(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&$y(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ia=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.Ia=Math.max(this.Ia,i.layer)}}},qt.prototype.initializeIndices=function(){switch(this.Pk){default:case ng:!function mx(t){var e=null,i=t.network.vertexes.iterator;if(t._experimental){for(;i.next();){var n=i.value;if(n.near&&(null===e&&(e=new Tt),n.layer===n.near.layer)){var o=e.get(n.near)||[];o.push(n),e.set(n.near,o)}}i.reset()}for(n={};i.next();)o=i.value,e&&o.near||(n.layer=o.layer,o.index=t.vb[n.layer],t.vb[n.layer]++,e&&(o=e.get(o),Array.isArray(o)&&o.forEach(function(r){return function(l){l.index=t.vb[r.layer],t.vb[r.layer]++}}(n)))),n={layer:n.layer}}(this);break;case gd:var t=null,e=this.network.vertexes.iterator;if(this._experimental)for(;e.next();){var i=e.value;if(i.near&&(null===t&&(t=new Tt),i.layer===i.near.layer)){var n=t.get(i.near)||[];n.push(i),t.set(i.near,n)}}for(i=this.Ia;0<=i;i--)for(e.reset();e.next();)(n=e.value).layer===i&&-1===n.index&&ev(this,n,t);break;case ig:if(t=null,e=this.network.vertexes.iterator,this._experimental)for(;e.next();)(i=e.value).near&&(null===t&&(t=new Tt),i.layer===i.near.layer&&((n=t.get(i.near)||[]).push(i),t.set(i.near,n)));for(i=0;i<=this.Ia;i++)for(e.reset();e.next();)(n=e.value).layer===i&&-1===n.index&&iv(this,n,t)}},qt.prototype.reduceCrossings=function(){var i,n,r,l,u,t=this.countCrossings(),e=Vi(this);for(i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)ud(this,n,1),Dn(this,n,1);var o=this.countCrossings();for(o<t&&(t=o,e=Vi(this)),n=this.Ia;0<=n;n--)ud(this,n,-1),Dn(this,n,-1);(o=this.countCrossings())<t&&(t=o,e=Vi(this))}for(Pn(this,e),i=0;i<this.bj;i++){for(n=0;n<=this.Ia;n++)ud(this,n,0),Dn(this,n,0);for((o=this.countCrossings())<t&&(t=o,e=Vi(this)),n=this.Ia;0<=n;n--)ud(this,n,0),Dn(this,n,0);(o=this.countCrossings())<t&&(t=o,e=Vi(this))}switch(Pn(this,e),this.qk){case og:break;case rg:for(u=t+1;(n=this.countCrossings())<u;)for(u=n,i=this.Ia;0<=i;i--)for(l=0;l<=i;l++){for(r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,-1)||r;for((o=this.countCrossings())>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,1)||r;for((o=this.countCrossings())>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,1)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,-1)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,0)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,0)||r;o>=t?Pn(this,e):(t=o,e=Vi(this))}break;default:for(i=this.Ia,l=0,u=t+1;(n=this.countCrossings())<u;){for(u=n,r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,-1)||r;for((o=this.countCrossings())>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,1)||r;for((o=this.countCrossings())>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,1)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,-1)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=i;n>=l;n--)r=Dn(this,n,0)||r;for(o>=t?Pn(this,e):(t=o,e=Vi(this)),r=!0;r;)for(r=!1,n=l;n<=i;n++)r=Dn(this,n,0)||r;o>=t?Pn(this,e):(t=o,e=Vi(this))}}Pn(this,e)},qt.prototype.straightenAndPack=function(){if(0===this.ve){var t=0!=(1&this.bg),e=0!=(this.bg&Mx);if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.Ia;e++)i[e]=0;for(var n,o=this.network.vertexes.iterator;o.next();){var r=o.value;e=r.layer,n=r.column,r=this.nodeMinColumnSpace(r,!1),i[e]=Math.max(i[e],n+r)}for(o.reset();o.next();)(r=o.value).column=(8*(this.Ra-i[e=r.layer])>>1)+8*(n=r.column);this.Ra*=8}if(2&this.bg)for(i=!0,n=0;i&&n<this.kl;){for(i=!1,e=this.Md+1;e<=this.Ia;e++)i=Tl(this,e,1)||i;for(e=this.Md-1;0<=e;e--)i=Tl(this,e,-1)||i;i=Tl(this,this.Md,0)||i,n++}if(4&this.bg){for(e=this.Md+1;e<=this.Ia;e++)$p(this,e,1);for(e=this.Md-1;0<=e;e--)$p(this,e,-1);$p(this,this.Md,0)}if(t&&(nv(this,-1),nv(this,1)),2&this.bg)for(i=!0,t=0;i&&t<this.kl;){for(i=!1,i=Tl(this,this.Md,0)||i,e=this.Md+1;e<=this.Ia;e++)i=Tl(this,e,0)||i;for(e=this.Md-1;0<=e;e--)i=Tl(this,e,0)||i;t++}}else!function wx(t){for(var e=te(),i=t.el.length,n=0;n<=i;n++)e[n]=[];for(n=t.network.vertexes.iterator;n.next();){var o=n.value;e[i-o.layer][o.index]=o}(function bx(t,e){for(var i=t.length,n=1;n<i-1;n++)for(var o=0,r=0,l=t[n],u=t[n+1],c=0;r<u.length;c++){var p=u[c];t:{if(null===p.node){var m=sg(p);if(0<m.length){m=null===m[0].node;break t}}m=!1}var x=m;if(c===u.length-1||x){for(m=l.length-1,x&&(m=sg(p)[0].index);r<=c;){if(!(p=u[r]).bo){x=[];for(var b=xt(p.sourceEdgesArrayAccess),M=b.next();!M.done;M=b.next())(M=M.value).valid&&x.push(M);p.bo=x}for(x=(p=xt(p.bo)).next();!x.done;x=p.next())((b=(x=x.value).fromVertex.index)<o||b>m)&&e.add(x);r++}o=m}}})(e,i=new rt);var r=null,l=null,u=null,c=null,p=0!=(1&t.ve),m=0!=(2&t.ve),x=0!=(4&t.ve),b=0!=(8&t.ve);for(p&&(t.verticalAlignment(e,i,!0),r=cd(t,e,!0,!1)),e.reverse(),x&&(t.verticalAlignment(e,i,!1),u=cd(t,e,!1,!1)),o=(n=xt(e)).next();!o.done;o=n.next())o.value.reverse();b&&(t.verticalAlignment(e,i,!1),c=cd(t,e,!1,!0)),e.reverse(),m&&(t.verticalAlignment(e,i,!0),l=cd(t,e,!0,!0)),$t(e),t.u(r,l,u,c),t.network.vertexes.each(function(M){var A=te();p&&A.push(r.get(M)),m&&A.push(l.get(M)),x&&A.push(u.get(M)),b&&A.push(c.get(M)),A.sort(function(D,I){return D-I});var L=A.length;L=(A[Math.floor((L-1)/2)]+A[Math.ceil((L-1)/2)])/2,$t(A),M.zc=L})}(this)},qt.prototype.verticalAlignment=function(t,e,i){!function Sx(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++){var o=i[n];o.root=o,o.align=o,o.Uz=e,o.vi=n}}(t);for(var n=(t=xt(t)).next();!n.done;n=t.next())for(var o=-1,r=(n=xt(n.value)).next();!r.done;r=n.next()){r=r.value;var l=i?sg(r):Cx(r),u=l.length;if(0<u){l.sort(function(x,b){return x.vi-b.vi});var c=(u-1)/2;for(u=Math.floor(c),c=Math.ceil(c);u<=c;u++)if(r.align===r){var m,p=l[u];m=i?yd(p,r):yd(r,p),!e.contains(m)&&o<p.vi&&(p.align=r,r.root=p.root,r.align=p.root,o=p.vi)}}}},qt.prototype.u=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];i=-1;for(var n=te(),o=te(),r=1/0,l=0;4>l;l++)if(e[l]){var u=kx(this,e[l],n,o,l);u<r&&(i=l,r=u)}for(r={},l=0;4>l;r={delta:r.delta},l++)e[l]&&(r.delta=0===l||2===l?n[i]-n[l]:o[i]-o[l],0!==r.delta&&e[l].each(function(c){return function(p){p.value+=c.delta}}(r)));$t(n),$t(o)},qt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=dd(this,!0),e=dd(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;null!==n&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Hu(),this.isRouting&&this.commitLinks()},qt.prototype.commitNodes=function(){this.he=[],this.Ld=[],this.Kd=[],this.Ta=[];for(var t=0;t<=this.Ia;t++)this.he[t]=0,this.Ld[t]=0,this.Kd[t]=0,this.Ta[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.he[i]=Math.max(this.he[i],this.nodeMinLayerSpace(e,!0)),this.Ld[i]=Math.max(this.Ld[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.ie;for(var n=0;n<=this.Ia;n++){var o=i;0>=this.he[n]+this.Ld[n]&&(o=0),0<n&&(e+=o/2),90===this.K||0===this.K?(this.Kd[n]=e+=this.Ld[n],e+=this.he[n]):(this.Kd[n]=e+=this.he[n],e+=this.Ld[n]),n<this.Ia&&(e+=o/2),this.Ta[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.Ia;n++)270===this.K?this.Kd[n]=e.y+this.Kd[n]:90===this.K?(this.Kd[n]=e.y+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]):180===this.K?this.Kd[n]=e.x+this.Kd[n]:(this.Kd[n]=e.x+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]);i=0!==this.ve,t.reset(),n=270===this.K||90===this.K;for(var r=1/0,l=o=1/0,u=-1/0;t.next();){var c=t.value,p=c.layer,m=0|c.column;n?(l=e.x+this.lc*m,p=this.Kd[p]):(l=this.Kd[p],p=e.y+this.lc*m),c.centerX=l,c.centerY=p,i&&isFinite(c.zc)&&(n?c.node?c.x=e.x+c.zc:c.centerX=e.x+c.zc:c.node?c.y=e.y+c.zc:c.centerY=e.y+c.zc),r=Math.min(c.x,r),o=Math.min(c.y,o),n?(l=r,u=Math.max(u,c.bounds.right)):(l=o,u=Math.max(u,c.bounds.bottom))}for(this.yw=u-l,r=e.x-r,e=e.y-o,this.Rf=new B(i&&n?0:r,i&&!n?0:e),t.reset();t.next();)(i=t.value).x+=r,i.y+=e,i.commit()},qt.prototype.Hu=function(){for(var t=0,e=this.ie,i=0;i<=this.Ia;i++)t+=this.he[i],t+=this.Ld[i];t+=this.Ia*e,e=[],i=0!==this.ve?this.yw:this.lc*this.Ra;for(var n=this.maxLayer;0<=n;n--)e.push(270===this.K?0===n?new $(0,0,i,Math.abs(this.Ta[0])):new $(0,this.Ta[n-1],i,Math.abs(this.Ta[n-1]-this.Ta[n])):90===this.K?0===n?new $(0,this.Ta[0],i,Math.abs(this.Ta[0]-t)):new $(0,this.Ta[n],i,Math.abs(this.Ta[n-1]-this.Ta[n])):180===this.K?0===n?new $(0,0,Math.abs(this.Ta[0]),i):new $(this.Ta[n-1],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i):0===n?new $(this.Ta[0],0,Math.abs(this.Ta[0]-t),i):new $(this.Ta[n],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i));this.commitLayers(e,this.Rf)},qt.prototype.commitLayers=function(){},qt.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.uh(),e.Ej(),e.zf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.vg();for(t.reset();t.next();){var i=t.value;if(null!==(e=i.link)){e.uh();var n=e,o=n.fromNode,r=n.toNode,l=n.fromPort,u=n.toPort;if(null!==o){var c=o.findVisibleNode();null!==c&&c!==o&&(o=c,l=c.port)}null!==r&&null!==(c=r.findVisibleNode())&&c!==r&&(r=c,u=c.port);var p=e.computeSpot(!0,l);c=e.computeSpot(!1,u);var m=i.fromVertex,x=i.toVertex;if(i.valid)e.curve===dn&&4===e.pointsCount&&(m.column===x.column&&0===this.alignOption?(i=e.getLinkPoint(o,l,p,!0,!1,r,u),u=e.getLinkPoint(r,u,c,!1,!1,o,l),i.w()||i.set(o.actualBounds.center),u.w()||u.set(r.actualBounds.center),e.Ej(),e.yf(i.x,i.y),e.yf((2*i.x+u.x)/3,(2*i.y+u.y)/3),e.yf((i.x+2*u.x)/3,(i.y+2*u.y)/3),e.yf(u.x,u.y)):(i=n=!1,null!==l&&p===y&&(n=!0),null!==u&&c===y&&(i=!0),(n||i)&&(c=null,n&&((c=e.getLinkPointFromPoint(o,l,l.ga(P),e.i(3),!0)).w()||c.set(o.actualBounds.center),e.L(0,c.x,c.y)),o=null,i&&((o=e.getLinkPointFromPoint(r,u,u.ga(P),e.i(0),!1)).w()||o.set(r.actualBounds.center),e.L(3,o.x,o.y)),c&&(r=e.i(2),e.L(1,(2*c.x+r.x)/3,(2*c.y+r.y)/3)),o&&(r=e.i(1),e.L(2,(2*o.x+r.x)/3,(2*o.y+r.y)/3))))),e.zf();else if(m.layer===x.layer)e.zf();else{var b=!1,M=!1,A=this.ie,L=e.firstPickIndex+1;if(e.isOrthogonal){M=!0;var D=e.pointsCount;4<D&&e.points.removeRange(2,D-3)}else if(e.curve===dn)b=!0,4<(D=e.pointsCount)&&e.points.removeRange(2,D-3),4===D&&(L=2);else{var I=p===y,z=c===y;2<(D=e.pointsCount)&&I&&z?e.points.removeRange(1,D-2):3<D&&I&&!z?e.points.removeRange(1,D-3):3<D&&!I&&z?e.points.removeRange(2,D-2):4<D&&!I&&!z&&e.points.removeRange(2,D-3)}if(i.rev){for(;null!==x&&m!==x;){var X=D=null;for(I=x.sourceEdges.iterator;I.next()&&((z=I.value).link!==i.link||(X=z.toVertex,null!==(D=z.fromVertex).node)););if(null===D)break;if(D!==m){I=e.i(L-1).x,z=e.i(L-1).y;var V=D.centerX,Z=D.centerY;if(M)180===this.K||0===this.K?L===e.firstPickIndex+1?(e.m(L++,I,z),e.m(L++,I,Z)):(null!==X?X.centerY:z)!==Z&&(e.m(L++,X=this.Ta[D.layer-1]+this.Rf.x,z),e.m(L++,X,Z)):L===e.firstPickIndex+1?(e.m(L++,I,z),e.m(L++,V,z)):(null!==X?X.centerX:I)!==V&&(e.m(L++,I,X=this.Ta[D.layer-1]+this.Rf.y),e.m(L++,V,X));else if(L===e.firstPickIndex+1){X=Math.max(10,this.he[x.layer]);var J=Math.max(10,this.Ld[x.layer]);if(b)180===this.K?V<=x.bounds.x?(e.m(L++,(x=x.bounds.x)-X,Z),e.m(L++,x,Z),e.m(L++,x+J,Z)):(e.m(L++,V-X,Z),e.m(L++,V,Z),e.m(L++,V+J,Z)):90===this.K?Z>=x.bounds.bottom?(e.m(L++,V,(x=x.bounds.y+x.bounds.height)+J),e.m(L++,V,x),e.m(L++,V,x-X)):(e.m(L++,V,Z+J),e.m(L++,V,Z),e.m(L++,V,Z-X)):270===this.K?Z<=x.bounds.y?(e.m(L++,V,(x=x.bounds.y)-X),e.m(L++,V,x),e.m(L++,V,x+J)):(e.m(L++,V,Z-X),e.m(L++,V,Z),e.m(L++,V,Z+J)):0===this.K&&(V>=x.bounds.right?(e.m(L++,(x=x.bounds.x+x.bounds.width)+J,Z),e.m(L++,x,Z),e.m(L++,x-X,Z)):(e.m(L++,V+J,Z),e.m(L++,V,Z),e.m(L++,V-X,Z)));else{e.m(L++,I,z);var ct=0;180===this.K||0===this.K?((180===this.K?V>=x.bounds.right:V<=x.bounds.x)&&(ct=(0===this.K?-X:J)/2),e.m(L++,I+ct,Z)):((270===this.K?Z>=x.bounds.bottom:Z<=x.bounds.y)&&(ct=(90===this.K?-X:J)/2),e.m(L++,V,z+ct)),e.m(L++,V,Z)}}else X=Math.max(10,this.he[D.layer]),J=Math.max(10,this.Ld[D.layer]),b?180===this.K?(e.m(L++,V-X-A,Z),e.m(L++,Math.min(V-X+A/2,V),Z),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,Math.max(V+J-A/2,V),Z),e.m(L++,V+J+A,Z)):90===this.K?(e.m(L++,V,Z+J+A),e.m(L++,V,Math.max(Z+J-A/2,Z)),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,V,Math.min(Z-X+A/2,Z)),e.m(L++,V,Z-X-A)):270===this.K?(e.m(L++,V,Z-X-A),e.m(L++,V,Math.min(Z-X+A/2,Z)),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,V,Math.max(Z+J-A/2,Z)),e.m(L++,V,Z+J+A)):(e.m(L++,V+J+A,Z),e.m(L++,Math.max(V+J-A/2,V),Z),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,Math.min(V-X+A/2,V),Z),e.m(L++,V-X-A,Z)):e.m(L++,V,Z)}x=D}(null===u||p!==y||M)&&(I=e.i(L-1).x,z=e.i(L-1).y,V=e.i(L).x,Z=e.i(L).y,M?(A=this.Ld[m.layer],180===this.K||0===this.K?((M=z)>=m.bounds.y&&M<=m.bounds.bottom&&(180===this.K?V>=m.bounds.x:V<=m.bounds.right)&&(M=M<m.bounds.y+m.bounds.height/2?m.bounds.y-this.lc/2:m.bounds.bottom+this.lc/2,e.m(L++,x=m.centerX+(180===this.K?-A:A),z),e.m(L++,x,M)),e.m(L++,V,M)):((M=I)>=m.bounds.x&&M<=m.bounds.right&&(270===this.K?Z>=m.bounds.y:Z<=m.bounds.bottom)&&(M=M<m.bounds.x+m.bounds.width/2?m.bounds.x-this.lc/2:m.bounds.right+this.lc/2,e.m(L++,I,x=m.centerY+(270===this.K?-A:A)),e.m(L++,M,x)),e.m(L++,M,Z)),e.m(L++,V,Z)):b?(X=Math.max(10,this.he[m.layer]),J=Math.max(10,this.Ld[m.layer]),180===this.K&&V>=m.bounds.x?(e.L(L-2,x=m.bounds.x+m.bounds.width,z),e.L(L-1,x+J,z)):90===this.K&&Z<=m.bounds.bottom?(e.L(L-2,I,x=m.bounds.y),e.L(L-1,I,x-X)):270===this.K&&Z>=m.bounds.y?(e.L(L-2,I,x=m.bounds.y+m.bounds.height),e.L(L-1,I,x+J)):0===this.K&&V<=m.bounds.right&&(e.L(L-2,x=m.bounds.x,z),e.L(L-1,x-X,z))):(X=Math.max(10,this.he[m.layer]),J=Math.max(10,this.Ld[m.layer]),M=0,180===this.K||0===this.K?((180===this.K?V<=m.bounds.x:V>=m.bounds.right)&&(M=(0===this.K?J:-X)/2),e.m(L++,V+M,z)):((270===this.K?Z<=m.bounds.y:Z>=m.bounds.bottom)&&(M=(90===this.K?J:-X)/2),e.m(L++,I,Z+M)),e.m(L++,V,Z)))}else{for(;null!==m&&m!==x;){for(X=D=null,m=m.destinationEdges.iterator;m.next()&&((I=m.value).link!==i.link||(null!==(X=I.fromVertex).node&&(X=null),null!==(D=I.toVertex).node)););if(null===D)break;D!==x&&(I=e.i(L-1).x,z=e.i(L-1).y,V=D.centerX,Z=D.centerY,M?180===this.K||0===this.K?(null!==X?X.centerY:z)!==Z&&(X=this.Ta[D.layer]+this.Rf.x,L===e.firstPickIndex+1&&(X=0===this.K?Math.max(X,I):Math.min(X,I)),e.m(L++,X,z),e.m(L++,X,Z)):(null!==X?X.centerX:I)!==V&&(X=this.Ta[D.layer]+this.Rf.y,L===e.firstPickIndex+1&&(X=90===this.K?Math.max(X,z):Math.min(X,z)),e.m(L++,I,X),e.m(L++,V,X)):(X=Math.max(10,this.he[D.layer]),J=Math.max(10,this.Ld[D.layer]),b?180===this.K?(e.m(L++,V+J+A,Z),e.m(L++,Math.max(V+J-A/2,V),Z),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,Math.min(V-X+A/2,V),Z),e.m(L++,V-X-A,Z)):90===this.K?(e.m(L++,V,Z-X-A),e.m(L++,V,Math.min(Z-X+A/2,Z)),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,V,Math.max(Z+J-A/2,Z)),e.m(L++,V,Z+J+A)):270===this.K?(e.m(L++,V,Z+J+A),e.m(L++,V,Math.max(Z+J-A/2,Z)),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,V,Math.min(Z-X+A/2,Z)),e.m(L++,V,Z-X-A)):(e.m(L++,V-X-A,Z),e.m(L++,Math.min(V-X+A/2,V),Z),e.m(L++,V,Z),e.m(L++,V,Z),e.m(L++,Math.max(V+J-A/2,V),Z),e.m(L++,V+J+A,Z)):180===this.K?(e.m(L++,V+J,Z),e.m(L++,V-X,Z)):90===this.K?(e.m(L++,V,Z-X),e.m(L++,V,Z+J)):270===this.K?(e.m(L++,V,Z+J),e.m(L++,V,Z-X)):(e.m(L++,V-X,Z),e.m(L++,V+J,Z)))),m=D}M&&(I=e.i(L-1).x,z=e.i(L-1).y,V=e.i(L).x,Z=e.i(L).y,180===this.K||0===this.K?z!==Z&&(X=0===this.K?Math.min(Math.max((V+I)/2,this.Ta[x.layer]+this.Rf.x),V):Math.max(Math.min((V+I)/2,this.Ta[x.layer]+this.Rf.x),V),e.m(L++,X,z),e.m(L++,X,Z)):I!==V&&(X=90===this.K?Math.min(Math.max((Z+z)/2,this.Ta[x.layer]+this.Rf.y),Z):Math.max(Math.min((Z+z)/2,this.Ta[x.layer]+this.Rf.y),Z),e.m(L++,I,X),e.m(L++,V,X)))}null!==n&&b&&4<=e.pointsCount&&(null!==l&&(l=p===y?e.getLinkPointFromPoint(o,l,l.ga(P),e.i(3),!0):e.i(0),p===y&&(p=e.i(2),n=e.i(3),90===this.direction||270===this.direction?(e.L(1,(l.x+p.x)/2,p.y),e.L(2,n.x,(p.y+n.y)/2)):(e.L(1,p.x,(l.y+p.y)/2),e.L(2,(p.x+n.x)/2,n.y))),l.w()||l.set(o.actualBounds.center),e.L(0,l.x,l.y)),null!==u&&(o=c===y?e.getLinkPointFromPoint(r,u,u.ga(P),e.i(e.pointsCount-4),!1):e.i(e.pointsCount-1),c===y&&(u=e.i(e.pointsCount-3),c=e.i(e.pointsCount-4),90===this.direction||270===this.direction?(e.L(e.pointsCount-2,(o.x+u.x)/2,u.y),e.L(e.pointsCount-2,c.x,(u.y+c.y)/2)):(e.L(e.pointsCount-2,u.x,(o.y+u.y)/2),e.L(e.pointsCount-3,(u.x+c.x)/2,c.y))),o.w()||o.set(r.actualBounds.center),e.L(e.pointsCount-1,o.x,o.y))),e.zf(),i.commit()}}}this.avoidOrthogonalOverlaps()},qt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new ot,e=this.network.edges.iterator;e.next();){var i=e.value.link;null!==i&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(null!==n&&n.isOrthogonal)for(var o=2;o<n.pointsCount-3;o++){var r=n.i(o),l=n.i(o+1);if(this.B(r.y,l.y)&&!this.B(r.x,l.x)){var u=new cs;u.layer=Math.floor(r.y/2);var c=n.i(0),p=n.i(n.pointsCount-1);if(u.first=c.x*c.x+c.y,u.kc=p.x*p.x+p.y,u.rd=Math.min(r.x,l.x),u.Ic=Math.max(r.x,l.x),u.index=o,u.link=n,o+2<n.pointsCount){c=n.i(o-1),p=n.i(o+2);var m=0;c.y<r.y?m=p.y<r.y?3:r.x<l.x?2:1:c.y>r.y&&(m=p.y>r.y?0:l.x<r.x?2:1),u.j=m}i.push(u)}}}if(1<i.length)for(i.sort(this.Wx),t=0;t<i.length;){for(r=i[t].layer,n=t+1;n<i.length&&i[n].layer===r;)n++;if(1<n-t)for(r=t;r<n;){for(l=i[r].Ic,o=t+1;o<n&&i[o].rd<l;)l=Math.max(l,i[o].Ic),o++;if(1<(l=o-r)){for(this.zi(i,this.Js,r,r+l),m=1,u=i[r].kc,c=r;c<o;c++)(p=i[c]).kc!==u&&(m++,u=p.kc);this.zi(i,this.Vx,r,r+l);var x=1;for(u=i[r].first,c=r;c<o;c++)(p=i[c]).first!==u&&(x++,u=p.first);for(c=!0,p=x,m<x?(c=!1,p=m,u=i[r].kc,this.zi(i,this.Js,r,r+l)):u=i[r].first,m=0,x=r;x<o;x++){var b=i[x];(c?b.first:b.kc)!==u&&(m++,u=c?b.first:b.kc);var M=b.link;r=M.i(b.index),l=M.i(b.index+1);var A=this.linkSpacing*(m-(p-1)/2);e++,M.uh(),M.L(b.index,r.x,r.y+A),M.L(b.index+1,l.x,l.y+A),M.zf()}}r=o}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(null!==(n=t.value)&&n.isOrthogonal)for(o=2;o<n.pointsCount-3;o++)r=n.i(o),l=n.i(o+1),this.B(r.x,l.x)&&!this.B(r.y,l.y)&&((u=new cs).layer=Math.floor(r.x/2),c=n.i(0),p=n.i(n.pointsCount-1),u.first=c.x+c.y*c.y,u.kc=p.x+p.y*p.y,u.rd=Math.min(r.y,l.y),u.Ic=Math.max(r.y,l.y),u.index=o,u.link=n,o+2<n.pointsCount&&(c=n.i(o-1),p=n.i(o+2),m=0,c.x<r.x?m=p.x<r.x?3:r.y<l.y?2:1:c.x>r.x&&(m=p.x>r.x?0:l.y<r.y?2:1),u.j=m),i.push(u));if(1<i.length)for(i.sort(this.Wx),t=0;t<i.length;){for(r=i[t].layer,n=t+1;n<i.length&&i[n].layer===r;)n++;if(1<n-t)for(r=t;r<n;){for(l=i[r].Ic,o=t+1;o<n&&i[o].rd<l;)l=Math.max(l,i[o].Ic),o++;if(1<(l=o-r)){for(this.zi(i,this.Js,r,r+l),m=1,u=i[r].kc,c=r;c<o;c++)(p=i[c]).kc!==u&&(m++,u=p.kc);for(this.zi(i,this.Vx,r,r+l),x=1,u=i[r].first,c=r;c<o;c++)(p=i[c]).first!==u&&(x++,u=p.first);for(c=!0,p=x,m<x?(c=!1,p=m,u=i[r].kc,this.zi(i,this.Js,r,r+l)):u=i[r].first,m=0,x=r;x<o;x++)b=i[x],(c?b.first:b.kc)!==u&&(m++,u=c?b.first:b.kc),r=(M=b.link).i(b.index),l=M.i(b.index+1),A=this.linkSpacing*(m-(p-1)/2),e++,M.uh(),M.L(b.index,r.x+A,r.y),M.L(b.index+1,l.x+A,l.y),M.zf()}r=o}t=n}}}},(v=qt.prototype).Wx=function(t,e){return t instanceof cs&&e instanceof cs&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},v.Vx=function(t,e){return t instanceof cs&&e instanceof cs&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},v.Js=function(t,e){return t instanceof cs&&e instanceof cs&&t!==e?t.kc<e.kc?-1:t.kc>e.kc||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Ic<e.Ic?-1:t.Ic>e.Ic?1:0:0},v.B=function(t,e){return-1<(t-=e)&&1>t},v.zi=function(t,e,i,n){var o=t.length,r=n-i;if(!(1>=r))if((0>i||i>=o-1)&&it("not in range 0 <= from < length: "+i),2===r)0<e(n=t[i],o=t[i+1])&&(t[i]=o,t[i+1]=n);else if(0===i)if(n>=o)t.sort(e);else for((i=t.slice(0,n)).sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=o)for((n=t.slice(i)).sort(e),e=i;e<o;e++)t[e]=n[e-i];else for((o=t.slice(i,n)).sort(e),e=i;e<n;e++)t[e]=o[e-i]},Ot.Object.defineProperties(qt.prototype,{layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&0<=t&&(this.ie=t,this.C())}},columnSpacing:{get:function(){return this.lc},set:function(t){this.lc!==t&&0<t&&(this.lc=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.C()):it("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Ck},set:function(t){this.Ck===t||t!==Qp&&t!==fd&&t!==qh||(this.Ck=t,this.C())}},layeringOption:{get:function(){return this.Yk},set:function(t){this.Yk===t||t!==pd&&t!==tg&&t!==eg||(this.Yk=t,this.C())}},initializeOption:{get:function(){return this.Pk},set:function(t){this.Pk===t||t!==gd&&t!==ig&&t!==ng||(this.Pk=t,this.C())}},iterations:{get:function(){return this.bj},set:function(t){this.bj!==t&&0<=t&&(this.bj=t,this.C())}},aggressiveOption:{get:function(){return this.qk},set:function(t){this.qk===t||t!==og&&t!==md&&t!==rg||(this.qk=t,this.C())}},packOption:{get:function(){return this.bg},set:function(t){this.bg!==t&&0<=t&&8>t&&(this.bg=t,this.C())}},packIterations:{get:function(){return this.kl},set:function(t){this.kl=t}},alignOption:{get:function(){return this.ve},set:function(t){this.ve!==t&&0<=t&&16>t&&(this.ve=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},linkSpacing:{get:function(){return this.Cn},set:function(t){this.Cn!==t&&0<=t&&(this.Cn=t,this.C())}},maxLayer:{get:function(){return this.Ia}},maxIndex:{get:function(){return this.Iq}},maxColumn:{get:function(){return this.Ra}},minIndexLayer:{get:function(){return this.Hn}},maxIndexLayer:{get:function(){return this.Md}}});var fd=new ut(qt,"CycleDepthFirst",0),Qp=new ut(qt,"CycleGreedy",1),qh=new ut(qt,"CycleFromLayers",2),pd=new ut(qt,"LayerOptimalLinkLength",0),tg=new ut(qt,"LayerLongestPathSink",1),eg=new ut(qt,"LayerLongestPathSource",2),gd=new ut(qt,"InitDepthFirstOut",0),ig=new ut(qt,"InitDepthFirstIn",1),ng=new ut(qt,"InitNaive",2),og=new ut(qt,"AggressiveNone",0),md=new ut(qt,"AggressiveLess",1),rg=new ut(qt,"AggressiveMore",2),Mx=8;function cs(){this.index=this.Ic=this.rd=this.kc=this.first=this.layer=0,this.link=null,this.j=0}function Ll(t){se.call(this,t)}function Tn(t){Ue.call(this,t),this.$n=this.bo=this.ao=this.co=null,this.Za=this.Ag=this.Ig=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.Ll=NaN,this.Du=0,this.ev=this.fv=null}function av(t,e){return t.index-e.index}function yd(t,e){if(!t.$n){for(var i=[],n=xt(t.destinationEdgesArrayAccess),o=n.next();!o.done;o=n.next())(o=o.value).valid&&i.push(o);t.$n=i}for(i=(t=xt(t.$n)).next();!i.done;i=t.next())if((i=i.value).toVertex===e)return i;it("Unable to find destination edge to given vertex")}function sg(t){if(!t.co){for(var e=[],i=xt(t.sourceEdgesArrayAccess),n=i.next();!n.done;n=i.next())!(n=n.value).valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.fromVertex);e.sort(av),t.co=e}return t.co}function Cx(t){if(!t.ao){for(var e=[],i=xt(t.destinationEdgesArrayAccess),n=i.next();!n.done;n=i.next())!(n=n.value).valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.toVertex);e.sort(av),t.ao=e}return t.ao}function $h(t){tn.call(this,t),this.j=this.ia=this.Ha=!1,this.V=this.u=NaN,this.F=this.o=0}function jt(t){pe.call(this),this.Vb=new rt,this.Wn=bd,this.ud=Ro,this.vo=kd,this.Bq=yg,this.aw=[],this.td=!0,this.Sb=Md,this.$d=new Pt(10,10).freeze();var e=new xa(this);this.W=new jn(e),this.Y=new jn(e),this.ru=[],t&&Object.assign(this,t)}function Ax(t){var e=new rt;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function lv(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var o=e.value;switch(t.ud){case Ro:o.sourceEdges.count<i&&(i=o.sourceEdges.count,n=o);break;case ya:o.destinationEdges.count<i&&(i=o.destinationEdges.count,n=o);break;default:it("Unhandled path value "+t.ud.toString())}}return n}function ag(t,e){if(null!==e){switch(t.ud){case Ro:if(0<e.destinationEdges.count){for(var i=new ot,n=e.destinationVertexes;n.next();){var o=n.value;hv(t,e,o)&&i.add(o)}0<i.count&&(e.children=i.Fa())}break;case ya:if(0<e.sourceEdges.count){for(i=new ot,n=e.sourceVertexes;n.next();)hv(t,e,o=n.value)&&i.add(o);0<i.count&&(e.children=i.Fa())}break;default:it("Unhandled path value"+t.ud.toString())}for(n=(i=e.children).length,o=0;o<n;o++){var r=i[o];r.initialized=!0,r.level=e.level+1,r.parent=e,t.Vb.remove(r)}for(e=0;e<n;e++)ag(t,i[e])}}function hv(t,e,i){if(i.initialized){if(null===e)var n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function uv(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===Ho&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,o=0,r=e.children,l=r.length,u=0;u<l;u++){var c=r[u];uv(t,c),i+=c.descendantCount+1,n=Math.max(n,c.maxChildrenCount),o=Math.max(o,c.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?o+1:0}}function cv(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=(e=e.children).length,n=0;n<i;n++)cv(t,e[n])}}function dv(t,e){if(null!==e){e.alignment!==Ho&&t.sortTreeVertexChildren(e);for(var i=(e=e.children).length,n=0;n<i;n++)dv(t,e[n])}}function ds(t){return t===zr||t===Ho||t===Rr||t===sr}function Qh(t){return t===zr||t===Ho}function lg(t){var e=t.parent;if(null!==e){var i=e.alignment;if(ds(i)){if(Qh(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2==0}if(i===Rr)return!0}}return!1}function fv(t,e){if(0===e.childrenCount){var i=!1,n=0;null!==e.parent&&(n=e.parent.angle,i=ds(i=e.parent.alignment));var o=lg(e);e.T.h(0,0),e.Da.h(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!o?e.la.h(0,0):180===n&&!i||(90===n||270===n)&&o?e.la.h(e.width-2*e.focus.x,0):e.la.h(0,e.height-2*e.focus.y)}else{i=90===(n=to(e))||270===n;for(var r=0,l=(o=e.children).length,u=0;u<l;u++){var c=o[u];r=Math.max(r,i?c.Da.width:c.Da.height)}var p=e.alignment,m=p===Yo,x=p===Xo;u=ds(p);var b=Math.max(0,e.breadthLimit);c=t.computeLayerSpacing(e);var M=e.nodeSpacing,A=t.computeNodeIndent(e),L=m||x?0:A/2,D=e.rowSpacing,I=0;(m||x||e.hm||e.im&&1===e.maxGenerationCount)&&(I=Math.max(0,e.rowIndent)),m=e.width;var z=e.height,X=0,V=0,Z=0,J=0,ct=0,mt=0,ft=0,at=0,Q=0,Lt=0;if(u&&!Qh(p)&&135<n&&o.reverse(),Qh(p))if(1<l)for(var Ct=0;Ct<l;Ct++){var Wt=o[Ct],oe=Wt.Da;Ct%2==0&&Ct!==l-1?Q=Math.max(Q,(i?oe.width:oe.height)+t.computeBusNodeSpacing(Wt)-M):Ct%2!=0&&(Lt=Math.max(Lt,(i?oe.width:oe.height)+t.computeBusNodeSpacing(Wt)-M))}else 1===l&&(Q=i?o[0].Da.width:o[0].Da.height);if(u)switch(p){case zr:case Ho:Q=(V=135>n?pv(t,e,o,Q,X,V):gv(t,e,o,Q,X,V)).x,X=V.width,V=V.height;break;case Rr:for(b=0;b<l;b++)Z=(L=o[b]).Da,Lt=0===ft?0:D,i?(L.T.h(r-Z.width,ct+Lt),X=Math.max(X,Z.width),V=Math.max(V,ct+Lt+Z.height),ct+=Lt+Z.height):(L.T.h(J+Lt,r-Z.height),X=Math.max(X,J+Lt+Z.width),V=Math.max(V,Z.height),J+=Lt+Z.width),ft++;break;case sr:for(r=0;r<l;r++)L=(b=o[r]).Da,Z=0===ft?0:D,i?(b.T.h(M/2+e.focus.x,ct+Z),X=Math.max(X,L.width),V=Math.max(V,ct+Z+L.height),ct+=Z+L.height):(b.T.h(J+Z,M/2+e.focus.y),X=Math.max(X,J+Z+L.width),V=Math.max(V,L.height),J+=Z+L.width),ft++}else for(Lt=0;Lt<l;Lt++)Wt=(Ct=o[Lt]).Da,i?(0<b&&0<ft&&J+M+Wt.width>b&&(J<r&&Rs(e,p,r-J,0,at,Lt-1),mt++,ft=0,at=Lt,Z=V,J=0,ct=135<n?-V-D:V+D),oe=0===ft?L:M,xd(t,Ct,0,ct),Ct.T.h(J+oe,ct),X=Math.max(X,J+oe+Wt.width),V=Math.max(V,Z+(0===mt?0:D)+Wt.height),J+=oe+Wt.width):(0<b&&0<ft&&ct+M+Wt.height>b&&(ct<r&&Rs(e,p,0,r-ct,at,Lt-1),mt++,ft=0,at=Lt,Z=X,ct=0,J=135<n?-X-D:X+D),oe=0===ft?L:M,xd(t,Ct,J,0),Ct.T.h(J,ct+oe),V=Math.max(V,ct+oe+Wt.height),X=Math.max(X,Z+(0===mt?0:D)+Wt.width),ct+=oe+Wt.height),ft++;switch(0<mt&&(i?(V+=Math.max(0,c),J<X&&Rs(e,p,X-J,0,at,l-1),0<I&&(x||ma(e,I,0,0,l-1),X+=I)):(X+=Math.max(0,c),ct<V&&Rs(e,p,0,V-ct,at,l-1),0<I&&(x||ma(e,0,I,0,l-1),V+=I))),I=x=0,p){case Fl:i?x+=X/2-e.focus.x-A/2:I+=V/2-e.focus.y-A/2;break;case va:0<mt?i?x+=X/2-e.focus.x-A/2:I+=V/2-e.focus.y-A/2:i?x+=(t=o[0].T.x+o[0].la.x)+(o[l-1].T.x+o[l-1].la.x+2*o[l-1].focus.x-t)/2-e.focus.x-A/2:I+=(t=o[0].T.y+o[0].la.y)+(o[l-1].T.y+o[l-1].la.y+2*o[l-1].focus.y-t)/2-e.focus.y-A/2;break;case Yo:i?(x-=A,X+=A):(I-=A,V+=A);break;case Xo:i?(x+=X-e.width+A,X+=A):(I+=V-e.height+A,V+=A);break;case zr:case Ho:i?x+=1<l?Q+M/2-e.focus.x:o[0].focus.x-e.focus.x+o[0].la.x:I+=1<l?Q+M/2-e.focus.y:o[0].focus.y-e.focus.y+o[0].la.y;break;case Rr:i?x+=X+M/2-e.focus.x:I+=V+M/2-e.focus.y;break;case sr:break;default:x=(t=t.customAlignment(e,x,I,X,V))[0],I=t[1],X=t[2],V=t[3]}for(t=0;t<l;t++)A=o[t],i?A.T.h(A.T.x+A.la.x-x,A.T.y+(135<n?(u?-V:-A.Da.height)+A.la.y-c:z+c+A.la.y)):A.T.h(A.T.x+(135<n?(u?-X:-A.Da.width)+A.la.x-c:m+c+A.la.x),A.T.y+A.la.y-I);i?(X=hg(e,X,x),0>x&&(x=0),135<n&&(I+=V+c),V=Math.max(Math.max(V,z),V+z+c)):(135<n&&(x+=X+c),X=Math.max(Math.max(X,m),X+m+c),V=ug(e,V,I),0>I&&(I=0)),e.la.h(x,I),e.Da.h(X,V)}}function pv(t,e,i,n,o,r){var l=i.length;if(0===l)return new $(n,0,o,r);if(1===l)return new $(n,0,o=(e=i[0]).Da.width,r=e.Da.height);for(var u=e.nodeSpacing,c=e.rowSpacing,p=90===to(e),m=0,x=0,b=0,M=0;M<l;M++)if(!(M%2!=0||1<l&&M===l-1)){var A=i[M],L=A.Da,D=0===m?0:c;if(p){var I=t.computeBusNodeSpacing(A)-u;A.T.h(n-(L.width+I),b+D),o=Math.max(o,L.width+I),r=Math.max(r,b+D+L.height),b+=D+L.height}else I=t.computeBusNodeSpacing(A)-u,A.T.h(x+D,n-(L.height+I)),r=Math.max(r,L.height+I),o=Math.max(o,x+D+L.width),x+=D+L.width;m++}for(m=0,A=x,M=b,p?(x=n+u,b=0):(x=0,b=n+u),L=0;L<l;L++)if(L%2!=0){I=(D=i[L]).Da;var z=0===m?0:c;if(p){var X=t.computeBusNodeSpacing(D)-u;D.T.h(x+X,b+z),o=Math.max(o,x+I.width+X),r=Math.max(r,b+z+I.height),b+=z+I.height}else X=t.computeBusNodeSpacing(D)-u,D.T.h(x+z,b+X),o=Math.max(o,x+z+I.width),r=Math.max(r,b+I.height+X),x+=z+I.width;m++}return 1<l&&l%2==1&&(l=(i=i[l-1]).Da,t=t.computeBusLastRowSpacing(i,p?Math.max(Math.abs(M),Math.abs(b)):Math.max(Math.abs(A),Math.abs(x))),p?(i.T.h(n+u/2-i.focus.x-i.la.x,r+t),p=n+u/2-i.focus.x-i.la.x,o=Math.max(o,p+l.width),0>p&&(o-=p),r=Math.max(r,Math.max(M,b)+t+l.height),0>i.T.x&&(n=vd(e,i.T.x,!1,n,u))):(i.T.h(o+t,n+u/2-i.focus.y-i.la.y),o=Math.max(o,Math.max(A,x)+t+l.width),b=n+u/2-i.focus.y-i.la.y,r=Math.max(r,b+l.height),0>b&&(r-=b),0>i.T.y&&(n=vd(e,i.T.y,!0,n,u)))),new $(n,0,o,r)}function gv(t,e,i,n,o,r){var l=i.length;if(0===l)return new $(n,0,o,r);if(1===l)return new $(n,0,o=(i=i[0]).Da.width,r=i.Da.height);for(var u=e.nodeSpacing,c=e.rowSpacing,p=270===to(e),m=0,x=0,b=0,M=0;M<l;M++)if(!(M%2!=0||1<l&&M===l-1)){var A=i[M],L=A.Da,D=0===m?0:c;if(p){var I=t.computeBusNodeSpacing(A)-u;A.T.h(n-(L.width+I),b-=D+L.height),o=Math.max(o,L.width+I),r=Math.max(r,Math.abs(b))}else I=t.computeBusNodeSpacing(A)-u,A.T.h(x-=D+L.width,n-(L.height+I)),r=Math.max(r,L.height+I),o=Math.max(o,Math.abs(x));m++}for(m=0,A=x,M=b,p?(x=n+u,b=0):(x=0,b=n+u),L=0;L<l;L++)if(L%2!=0){I=(D=i[L]).Da;var z=0===m?0:c;if(p){var X=t.computeBusNodeSpacing(D)-u;D.T.h(x+X,b-=z+I.height),o=Math.max(o,x+I.width+X),r=Math.max(r,Math.abs(b))}else X=t.computeBusNodeSpacing(D)-u,D.T.h(x-=z+I.width,b+X),r=Math.max(r,b+I.height+X),o=Math.max(o,Math.abs(x));m++}for(1<l&&l%2==1&&(m=(c=i[l-1]).Da,t=t.computeBusLastRowSpacing(c,p?Math.max(Math.abs(M),Math.abs(b)):Math.max(Math.abs(A),Math.abs(x))),p?(c.T.h(n+u/2-c.focus.x-c.la.x,-r-m.height-t),x=n+u/2-c.focus.x-c.la.x,o=Math.max(o,x+m.width),0>x&&(o-=x),r=Math.max(r,Math.abs(Math.min(M,b))+t+m.height),0>c.T.x&&(n=vd(e,c.T.x,!1,n,u))):(c.T.h(-o-m.width-t,n+u/2-c.focus.y-c.la.y),o=Math.max(o,Math.abs(Math.min(A,x))+t+m.width),b=n+u/2-c.focus.y-c.la.y,r=Math.max(r,b+m.height),0>b&&(r-=b),0>c.T.y&&(n=vd(e,c.T.y,!0,n,u)))),e=0;e<l;e++)u=i[e],p?u.T.h(u.T.x,u.T.y+r):u.T.h(u.T.x+o,u.T.y);return new $(n,0,o,r)}function vd(t,e,i,n,o){for(var r=(t=t.children).length,l=0;l<r;l++)i?t[l].T.h(t[l].T.x,t[l].T.y-e):t[l].T.h(t[l].T.x-e,t[l].T.y);return e=t[r-1],Math.max(n,i?e.la.y+e.focus.y-o/2:e.la.x+e.focus.x-o/2)}function hg(t,e,i){switch(t.alignment){case va:case Fl:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Yo:return t.width>e?t.width:e;case Xo:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case zr:case Ho:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case Rr:return t.width-t.focus.x+t.nodeSpacing/2+e;case sr:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function ug(t,e,i){switch(t.alignment){case va:case Fl:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Yo:return t.height>e?t.height:e;case Xo:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case zr:case Ho:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case Rr:return t.height-t.focus.y+t.nodeSpacing/2+e;case sr:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function cg(t,e,i){switch(t){case Fl:case va:e/=2,i/=2;break;case Yo:i=e=0;break;case Xo:break;default:it("Unhandled alignment value "+t.toString())}return new B(e,i)}function Rs(t,e,i,n,o,r){ma(t,(e=cg(e,i,n)).x,e.y,o,r)}function ma(t,e,i,n,o){if(0!==e||0!==i)for(t=t.children;n<=o;n++){var r=t[n].T;r.x+=e,r.y+=i}}function xd(t,e,i,n){var o=e.parent;switch(t.ud){case Ro:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===o&&e.relativePoint.h(i,n);break;case ya:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===o&&e.relativePoint.h(i,n);break;default:it("Unhandled path value "+t.ud.toString())}}function wd(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];o.x+=e,o.y+=i}}function mv(t,e,i,n,o,r,l,u){var c=to(e),p=90===c||270===c,m=e.nodeSpacing;e=n;var x=o;n=r;var b=l,M=i.Yo,A=i.kp;l=i.Da;var L=p?Math.max(b,l.height):Math.max(n,l.width);if((null===M||c!==to(i))&&(M=Ui(t,2),A=Ui(t,2),p?(M[0].h(0,0),M[1].h(0,l.height),A[0].h(l.width,0),A[1].h(A[0].x,M[1].y)):(M[0].h(0,0),M[1].h(l.width,0),A[0].h(0,l.height),A[1].h(M[1].x,A[0].y))),p){if(b=9999999,!(null===x||2>x.length||null===M||2>M.length))for(o=i=0;i<x.length&&o<M.length;){var D=M[o];c=D.x,p=D.y,c+=n;var I=r=x[i];i+1<x.length&&(I=x[i+1]);var z=D;D=z.x,z=z.y,o+1<M.length&&(D=(z=M[o+1]).x,z=z.y,D+=n);var X=b;r.y===p?X=c-r.x:r.y>p&&r.y<z?X=c+(r.y-p)/(z-p)*(D-c)-r.x:p>r.y&&p<I.y&&(X=c-(r.x+(p-r.y)/(I.y-r.y)*(I.x-r.x))),X<b&&(b=X),I.y<=r.y?i++:z<=p?o++:(I.y<=z&&i++,z<=I.y&&o++)}if(b=n-b,i=M,o=b+=m,null===e||2>e.length||null===i||2>i.length)n=null;else{for(m=Ui(t,e.length+i.length),n=r=c=0;r<i.length&&i[r].y<e[0].y;)p=i[r++],m[n++].h(p.x+o,p.y);for(;c<e.length;)p=e[c++],m[n++].h(p.x,p.y);for(c=e[e.length-1].y;r<i.length&&i[r].y<=c;)r++;for(;r<i.length&&i[r].y>c;)p=i[r++],m[n++].h(p.x+o,p.y);for(i=Ui(t,n),c=0;c<n;c++)i[c].assign(m[c]);fo(t,m),n=i}if(r=A,c=b,null===x||2>x.length||null===r||2>r.length)o=null;else{for(m=Ui(t,x.length+r.length),o=p=i=0;i<x.length&&x[i].y<r[0].y;)I=x[i++],m[o++].h(I.x,I.y);for(;p<r.length;)I=r[p++],m[o++].h(I.x+c,I.y);for(r=r[r.length-1].y;i<x.length&&x[i].y<=r;)i++;for(;i<x.length&&x[i].y>r;)c=x[i++],m[o++].h(c.x,c.y);for(r=Ui(t,o),i=0;i<o;i++)r[i].assign(m[i]);fo(t,m),o=r}return r=Math.max(0,b)+l.width,l=L,fo(t,e),fo(t,M),fo(t,x),fo(t,A),u[0]=n,u[1]=o,new $(b,0,r,l)}if(n=9999999,!(null===x||2>x.length||null===M||2>M.length))for(o=i=0;i<x.length&&o<M.length;)c=(D=M[o]).x,p=D.y,p+=b,I=r=x[i],i+1<x.length&&(I=x[i+1]),D=(z=D).x,z=z.y,o+1<M.length&&(D=(z=M[o+1]).x,z=z.y,z+=b),X=n,r.x===c?X=p-r.y:r.x>c&&r.x<D?X=p+(r.x-c)/(D-c)*(z-p)-r.y:c>r.x&&c<I.x&&(X=p-(r.y+(c-r.x)/(I.x-r.x)*(I.y-r.y))),X<n&&(n=X),I.x<=r.x?i++:D<=c?o++:(I.x<=D&&i++,D<=I.x&&o++);if(b-=n,i=M,o=b+=m,null===e||2>e.length||null===i||2>i.length)n=null;else{for(m=Ui(t,e.length+i.length),n=r=c=0;r<i.length&&i[r].x<e[0].x;)p=i[r++],m[n++].h(p.x,p.y+o);for(;c<e.length;)p=e[c++],m[n++].h(p.x,p.y);for(c=e[e.length-1].x;r<i.length&&i[r].x<=c;)r++;for(;r<i.length&&i[r].x>c;)p=i[r++],m[n++].h(p.x,p.y+o);for(i=Ui(t,n),c=0;c<n;c++)i[c].assign(m[c]);fo(t,m),n=i}if(r=A,c=b,null===x||2>x.length||null===r||2>r.length)o=null;else{for(m=Ui(t,x.length+r.length),o=p=i=0;i<x.length&&x[i].x<r[0].x;)I=x[i++],m[o++].h(I.x,I.y);for(;p<r.length;)I=r[p++],m[o++].h(I.x,I.y+c);for(r=r[r.length-1].x;i<x.length&&x[i].x<=r;)i++;for(;i<x.length&&x[i].x>r;)c=x[i++],m[o++].h(c.x,c.y);for(r=Ui(t,o),i=0;i<o;i++)r[i].assign(m[i]);fo(t,m),o=r}return r=L,l=Math.max(0,b)+l.height,fo(t,e),fo(t,M),fo(t,x),fo(t,A),u[0]=n,u[1]=o,new $(b,0,r,l)}function Ui(t,e){if(void 0!==(t=t.ru[e])&&void 0!==(t=t.pop()))return t;t=[];for(var i=0;i<e;i++)t[i]=new B;return t}function fo(t,e){var i=e.length,n=t.ru[i];void 0===n&&(t.ru[i]=n=[]),n.push(e)}function dg(t,e,i,n){if(null!==e){e.x=i,e.y=n;for(var o=(e=e.children).length,r=0;r<o;r++){var l=e[r];dg(t,l,i+l.T.x,n+l.T.y)}}}function yv(t,e){if(null!==e){t.setPortSpots(e);for(var i=(e=e.children).length,n=0;n<i;n++)yv(t,e[n])}}function to(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}qt.className="LayeredDigraphLayout",qt.CycleDepthFirst=fd,qt.CycleGreedy=Qp,qt.CycleFromLayers=qh,qt.LayerOptimalLinkLength=pd,qt.LayerLongestPathSink=tg,qt.LayerLongestPathSource=eg,qt.InitDepthFirstOut=gd,qt.InitDepthFirstIn=ig,qt.InitNaive=ng,qt.AggressiveNone=og,qt.AggressiveLess=md,qt.AggressiveMore=rg,qt.PackNone=0,qt.PackExpand=1,qt.PackStraighten=2,qt.PackMedian=4,qt.PackAll=15,qt.AlignNone=0,qt.AlignUpperLeft=1,qt.AlignUpperRight=2,qt.AlignLowerLeft=4,qt.AlignLowerRight=8,qt.AlignAll=15,cs.className="SegInfo",Ut(Ll,se),Ll.prototype.createVertex=function(){return new Tn(this)},Ll.prototype.createEdge=function(){return new $h(this)},Ll.className="LayeredDigraphNetwork",Ut(Tn,Ue),Tn.prototype.Cl=function(t){Ue.prototype.Cl.call(this,t),this.bo=this.co=null},Tn.prototype.Kl=function(t){Ue.prototype.Kl.call(this,t),this.bo=this.co=null},Tn.prototype.zl=function(t){Ue.prototype.zl.call(this,t),this.$n=this.ao=null},Tn.prototype.Jl=function(t){Ue.prototype.Jl.call(this,t),this.$n=this.ao=null},Ot.Object.defineProperties(Tn.prototype,{layer:{get:function(){return this.Ig},set:function(t){this.Ig!==t&&(this.Ig=t)}},column:{get:function(){return this.Ag},set:function(t){this.Ag!==t&&(this.Ag=t)}},index:{get:function(){return this.Za},set:function(t){this.Za!==t&&(this.Za=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Tn.prototype.deleteDestinationEdge=Tn.prototype.Jl,Tn.prototype.addDestinationEdge=Tn.prototype.zl,Tn.prototype.deleteSourceEdge=Tn.prototype.Kl,Tn.prototype.addSourceEdge=Tn.prototype.Cl,Tn.className="LayeredDigraphVertex",Ut($h,tn),Ot.Object.defineProperties($h.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},valid:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},rev:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),$h.className="LayeredDigraphEdge",Ut(jt,pe),jt.prototype.cloneProtected=function(t){pe.prototype.cloneProtected.call(this,t),t.Wn=this.Wn,t.vo=this.vo,t.Bq=this.Bq,t.td=this.td,t.Sb=this.Sb,t.$d.assign(this.$d),t.W.copyInheritedPropertiesFrom(this.W),t.Y.copyInheritedPropertiesFrom(this.Y)},jt.prototype.qb=function(t){t.classType===jt?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:it("Unknown enum value: "+t):pe.prototype.qb.call(this,t)},jt.prototype.createNetwork=function(){return new xa(this)},jt.prototype.makeNetwork=function(t){function e(n){if(n instanceof dt)return!n.isLinkLabel&&"Comment"!==n.category;if(n instanceof st){var o=n.fromNode;return null!==o&&!o.isLinkLabel&&"Comment"!==o.category&&!(null===(n=n.toNode)||n.isLinkLabel||"Comment"===n.category)}return!1}var i=this.createNetwork();return t instanceof q?(i.lg(t.nodes,!0,e),i.lg(t.links,!0,e)):i.lg(t instanceof Nt?t.memberParts:t.iterator,!1,e),i},jt.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Cd&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof q&&(e=t),this.ud=this.path===bd&&null!==e?e.isTreePathToChildren?Ro:ya:this.path===bd?Ro:this.path,0<this.network.vertexes.count){for(this.network.Ko(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Vb.count){for(t=new rt,e=this.Vb.iterator;e.next();){var i=e.value;i instanceof dt?null!==(i=this.network.ki(i))&&t.add(i):i instanceof jn&&t.add(i)}this.Vb=t}for(0===this.Vb.count&&this.findRoots(),t=this.Vb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,ag(this,e));for(e=this.network.vertexes,t=null;0<(t=Ax(e)).count;)null!==(e=lv(this,t))&&this.Vb.add(e),e.initialized=!0,ag(this,e),e=t;for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof jn&&uv(this,e);for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof jn&&cv(this,e);for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof jn&&dv(this,e);if(this.Cu(),this.layerStyle===Ad){for(t=[],e=this.network.vertexes.iterator;e.next();){var n=(i=e.value).parent;null===n&&(n=i),n=0===n.angle||180===n.angle;var o=t[i.level];void 0===o&&(o=0),t[i.level]=Math.max(o,n?i.width:i.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.aw=t,e=this.network.vertexes.iterator;e.next();)null===(n=(i=e.value).parent)&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(270===n.angle&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===vg)for(t=this.network.vertexes.iterator;t.next();){for(i=0===(e=t.value).angle||180===e.angle,n=-1,o=0;o<e.children.length;o++){var r=e.children[o];n=Math.max(n,i?r.width:r.height)}if(0<=n)for(o=0;o<e.children.length;o++)r=e.children[o],i?(180===e.angle&&(r.focusX+=n-r.width),r.width=n):(270===e.angle&&(r.focusY+=n-r.height),r.height=n)}for(t=this.Vb.iterator;t.next();)(e=t.value)instanceof jn&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Vb=new rt,this.isValidLayout=!0},jt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ud){case Ro:0===i.sourceEdges.count&&this.Vb.add(i);break;case ya:0===i.destinationEdges.count&&this.Vb.add(i);break;default:it("Unhandled path value "+this.ud.toString())}}0===this.Vb.count&&null!==(t=lv(this,t))&&this.Vb.add(t)},jt.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,o=0;o<i.length;o++)i[o]===e&&n++;if(0<n){n=Array(i.length-n);for(var r=o=0;r<i.length;r++)i[r]!==e&&(n[o++]=i[r]);t.children=n}}},jt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function Px(t,e){switch(t.vo){default:case kd:return null!==e.parent?e.parent:t.W;case gg:return null===e.parent?t.W:null===e.parent.parent?t.Y:e.parent;case pg:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.Y:t.W;case fg:var i=!0;if(0===e.childrenCount)i=!1;else for(var n=e.children,o=n.length,r=0;r<o;r++)if(0<n[r].childrenCount){i=!1;break}return i&&null!==e.parent?t.Y:null!==e.parent?e.parent:t.W}}(this,t)),null!==t.parent&&t.parent.alignment===Ho){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2==0?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},jt.prototype.assignTreeVertexValues=function(){},jt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Nl:break;case tu:t.children.reverse();break;case eu:t.children.sort(t.comparer);break;case iu:t.children.sort(t.comparer),t.children.reverse();break;default:it("Unhandled sorting value "+t.sorting.toString())}},jt.prototype.Cu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},jt.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,o=!1;null!==i&&(n=i.angle,o=ds(o=i.alignment)),e=90===e||270===e,n=90===n||270===n,i=0===t.childrenCount;var r=0,l=0,u=0,c=t.commentSpacing;if(null!==t.node)for(var p=t.node.Nu();p.next();){var m=p.value;"Comment"===m.category&&m.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(m),m.Va(),m=m.measuredBounds,e&&!i||!o&&!n&&i||o&&n&&i?(r=Math.max(r,m.width),l+=m.height+Math.abs(u)):(r+=m.width+Math.abs(u),l=Math.max(l,m.height)),u=c)}null!==t.comments&&(e&&!i||!o&&!n&&i||o&&n&&i?(r+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=$.allocAt(0,0,t.bounds.width+r,t.bounds.height+l),t.bounds=o,$.free(o))},jt.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,i=t.parent,n=t.angle,o=0,r=!1;null!==i&&(o=i.angle,r=ds(r=i.alignment)),n=90===n||270===n,i=90===o||270===o;for(var l=0===t.childrenCount,u=lg(t),c=0,p=t.comments,m=p.length,x=B.alloc(),b=0;b<m;b++){var M=p[b],A=M.measuredBounds;if(n&&!l||!r&&!i&&l||r&&i&&l){if(135<o&&!r||i&&u)if(0<=t.commentMargin)for(x.h(t.bounds.x-t.commentMargin-A.width,t.bounds.y+c),M.move(x),M=M.Sd();M.next();){var L=M.value;L.fromSpot=_e,L.toSpot=Le}else for(x.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+c),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=Le,L.toSpot=_e;else if(0<=t.commentMargin)for(x.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+c),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=Le,L.toSpot=_e;else for(x.h(t.bounds.x+t.commentMargin-A.width,t.bounds.y+c),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=_e,L.toSpot=Le;c=0<=t.commentSpacing?c+(A.height+t.commentSpacing):c+(t.commentSpacing-A.height)}else{if(135<o&&!r||!i&&u)if(0<=t.commentMargin)for(x.h(t.bounds.x+c,t.bounds.y-t.commentMargin-A.height),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=ye,L.toSpot=ni;else for(x.h(t.bounds.x+c,t.bounds.y+2*t.focus.y-t.commentMargin),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=ni,L.toSpot=ye;else if(0<=t.commentMargin)for(x.h(t.bounds.x+c,t.bounds.y+2*t.focus.y+t.commentMargin),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=ni,L.toSpot=ye;else for(x.h(t.bounds.x+c,t.bounds.y+t.commentMargin-A.height),M.move(x),M=M.Sd();M.next();)(L=M.value).fromSpot=ye,L.toSpot=ni;c=0<=t.commentSpacing?c+(A.width+t.commentSpacing):c+(t.commentSpacing-A.width)}}if(B.free(x),e=c-t.commentSpacing-(n?e.height:e.width),this.ud===Ro)for(t=t.destinationEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.toEndSegmentLength=0<e?e:NaN)}},jt.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case Sd:fv(this,t);break;case nu:if(t.alignment===Ho)fv(this,t);else if(0===t.childrenCount)i=!1,e=0,null!==(n=t.parent)&&(e=n.angle,i=ds(i=n.alignment)),n=lg(t),t.T.h(0,0),t.Da.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||i)&&!n?t.la.h(0,0):180===e&&!i||(90===e||270===e)&&n?t.la.h(t.width-2*t.focus.x,0):t.la.h(0,t.height-2*t.focus.y),t.Yo=null,t.kp=null;else{var o=to(t);e=90===o||270===o;var r=0,l=t.children,u=l.length;for(i=0;i<u;i++)n=l[i],r=Math.max(r,e?n.Da.width:n.Da.height);var c=t.alignment;n=c===Yo;var p=c===Xo,m=ds(c),x=Math.max(0,t.breadthLimit);i=this.computeLayerSpacing(t);var b=t.nodeSpacing,M=this.computeNodeIndent(t),A=t.rowSpacing,L=0;(n||p||t.hm||t.im&&1===t.maxGenerationCount)&&(L=Math.max(0,t.rowIndent)),n=t.width;var D=t.height,I=0,z=0,X=0,V=null,Z=null,J=0,ct=0,mt=0,ft=0,at=0,Q=0,Lt=0,Ct=0;if(m&&!Qh(c)&&135<o&&l.reverse(),Qh(c))if(1<u)for(var Wt=0;Wt<u;Wt++)Wt%2==0&&Wt!==u-1&&(Ct=Math.max(Ct,e?l[Wt].Da.width:l[Wt].Da.height));else 1===u&&(Ct=e?l[0].Da.width:l[0].Da.height);if(m){switch(c){case zr:Ct=(z=135>o?pv(this,t,l,Ct,I,z):gv(this,t,l,Ct,I,z)).x,I=z.width,z=z.height;break;case Rr:for(V=0;V<u;V++)x=(Z=l[V]).Da,X=0===Q?0:A,e?(Z.T.h(r-x.width,ft+X),I=Math.max(I,x.width),z=Math.max(z,ft+X+x.height),ft+=X+x.height):(Z.T.h(mt+X,r-x.height),I=Math.max(I,mt+X+x.width),z=Math.max(z,x.height),mt+=X+x.width),Q++;break;case sr:for(V=0;V<u;V++)r=(Z=l[V]).Da,x=0===Q?0:A,e?(Z.T.h(b/2+t.focus.x,ft+x),I=Math.max(I,r.width),z=Math.max(z,ft+x+r.height),ft+=x+r.height):(Z.T.h(mt+x,b/2+t.focus.y),I=Math.max(I,mt+x+r.width),z=Math.max(z,r.height),mt+=x+r.width),Q++}V=Ui(this,2),Z=Ui(this,2),e?(V[0].h(0,0),V[1].h(0,z),Z[0].h(I,0)):(V[0].h(0,0),V[1].h(I,0),Z[0].h(0,z)),Z[1].h(I,z)}else for(Wt=0;Wt<u;Wt++){var oe=l[Wt],qe=oe.Da;if(e){0<x&&0<Q&&mt+b+qe.width>x&&(mt<r&&Rs(t,c,r-mt,0,Lt,Wt-1),at++,Q=0,Lt=Wt,X=z,mt=0,ft=135<o?-z-A:z+A),xd(this,oe,0,ft);var ei=0;if(0===Q)Z=oe.kp,J=qe.width,ct=qe.height,(null===(V=oe.Yo)||null===Z||o!==to(oe))&&(V=Ui(this,2),Z=Ui(this,2),V[0].h(0,0),V[1].h(0,ct),Z[0].h(J,0),Z[1].h(J,ct));else{var Mi=te();ei=(ct=mv(this,t,oe,V,Z,J,ct,Mi)).x,V=Mi[0],Z=Mi[1],J=ct.width,ct=ct.height,$t(Mi),mt<qe.width&&0>ei&&(ma(t,-ei,0,Lt,Wt-1),wd(V,-ei,0),wd(Z,-ei,0),ei=0)}oe.T.h(ei,ft),I=Math.max(I,J),z=Math.max(z,X+(0===at?0:A)+qe.height),mt=J}else 0<x&&0<Q&&ft+b+qe.height>x&&(ft<r&&Rs(t,c,0,r-ft,Lt,Wt-1),at++,Q=0,Lt=Wt,X=I,ft=0,mt=135<o?-I-A:I+A),xd(this,oe,mt,0),ei=0,0===Q?(Z=oe.kp,J=qe.width,ct=qe.height,(null===(V=oe.Yo)||null===Z||o!==to(oe))&&(V=Ui(this,2),Z=Ui(this,2),V[0].h(0,0),V[1].h(J,0),Z[0].h(0,ct),Z[1].h(J,ct))):(ei=(ct=mv(this,t,oe,V,Z,J,ct,Mi=te())).x,V=Mi[0],Z=Mi[1],J=ct.width,ct=ct.height,$t(Mi),ft<qe.height&&0>ei&&(ma(t,0,-ei,Lt,Wt-1),wd(V,0,-ei),wd(Z,0,-ei),ei=0)),oe.T.h(mt,ei),z=Math.max(z,ct),I=Math.max(I,X+(0===at?0:A)+qe.width),ft=ct;Q++}switch(0<at&&(e?(z+=Math.max(0,i),mt<I&&Rs(t,c,I-mt,0,Lt,u-1),0<L&&(p||ma(t,L,0,0,u-1),I+=L)):(I+=Math.max(0,i),ft<z&&Rs(t,c,0,z-ft,Lt,u-1),0<L&&(p||ma(t,0,L,0,u-1),z+=L))),L=p=0,c){case Fl:e?p+=I/2-t.focus.x-M/2:L+=z/2-t.focus.y-M/2;break;case va:0<at?e?p+=I/2-t.focus.x-M/2:L+=z/2-t.focus.y-M/2:e?p+=(Ct=l[0].T.x+l[0].la.x)+(l[u-1].T.x+l[u-1].la.x+2*l[u-1].focus.x-Ct)/2-t.focus.x-M/2:L+=(Ct=l[0].T.y+l[0].la.y)+(l[u-1].T.y+l[u-1].la.y+2*l[u-1].focus.y-Ct)/2-t.focus.y-M/2;break;case Yo:e?(p-=M,I+=M):(L-=M,z+=M);break;case Xo:e?(p+=I-t.width+M,I+=M):(L+=z-t.height+M,z+=M);break;case zr:e?p+=1<u?Ct+b/2-t.focus.x:l[0].focus.x-t.focus.x+l[0].la.x:L+=1<u?Ct+b/2-t.focus.y:l[0].focus.y-t.focus.y+l[0].la.y;break;case Rr:e?p+=I+b/2-t.focus.x:L+=z+b/2-t.focus.y;break;case sr:break;default:p=(z=this.customAlignment(t,p,L,I,z))[0],L=z[1],I=z[2],z=z[3]}for(M=0;M<u;M++)Ct=l[M],e?Ct.T.h(Ct.T.x+Ct.la.x-p,Ct.T.y+(135<o?(m?-z:-Ct.Da.height)+Ct.la.y-i:D+i+Ct.la.y)):Ct.T.h(Ct.T.x+(135<o?(m?-I:-Ct.Da.width)+Ct.la.x-i:n+i+Ct.la.x),Ct.T.y+Ct.la.y-L);if(u=l=0,m?e?(I=hg(t,I,p),0>p&&(p=0),135<o&&(L+=z+i),z+=D+i,c===sr&&(l+=b/2+t.focus.x),u+=D+i):(135<o&&(p+=I+i),I+=n+i,z=ug(t,z,L),0>L&&(L=0),c===sr&&(u+=b/2+t.focus.y),l+=n+i):e?(null===t.comments?n>I&&(l=(I=cg(c,n-I,0)).x,u=I.y,I=n,p=0):I=hg(t,I,p),0>p&&(l-=p,p=0),135<o&&(L+=z+i),z=Math.max(Math.max(z,D),z+D+i),u+=D+i):(135<o&&(p+=I+i),I=Math.max(Math.max(I,n),I+n+i),null===t.comments?D>z&&(l=(z=cg(c,0,D-z)).x,u=z.y,z=D,L=0):z=ug(t,z,L),0>L&&(u-=L,L=0),l+=n+i),0<at)o=Ui(this,4),at=Ui(this,4),e?(o[2].h(0,D+i),o[3].h(o[2].x,z),at[2].h(I,o[2].y),at[3].h(at[2].x,o[3].y)):(o[2].h(n+i,0),o[3].h(I,o[2].y),at[2].h(o[2].x,z),at[3].h(o[3].x,at[2].y));else{for(o=Ui(this,V.length+2),at=Ui(this,Z.length+2),c=0;c<V.length;c++)o[c+2].h((m=V[c]).x+l,m.y+u);for(c=0;c<Z.length;c++)at[c+2].h((m=Z[c]).x+l,m.y+u)}e?(o[0].h(p,0),o[1].h(o[0].x,D),o[2].y<o[1].y&&(o[2].x>o[0].x?o[2].assign(o[1]):o[1].assign(o[2])),o[3].y<o[2].y&&(o[3].x>o[0].x?o[3].assign(o[2]):o[2].assign(o[3])),at[0].h(p+n,0),at[1].h(at[0].x,D),at[2].y<at[1].y&&(at[2].x<at[0].x?at[2].assign(at[1]):at[1].assign(at[2])),at[3].y<at[2].y&&(at[3].x<at[0].x?at[3].assign(at[2]):at[2].assign(at[3])),o[2].y-=i/2,at[2].y-=i/2):(o[0].h(0,L),o[1].h(n,o[0].y),o[2].x<o[1].x&&(o[2].y>o[0].y?o[2].assign(o[1]):o[1].assign(o[2])),o[3].x<o[2].x&&(o[3].y>o[0].y?o[3].assign(o[2]):o[2].assign(o[3])),at[0].h(0,L+D),at[1].h(n,at[0].y),at[2].x<at[1].x&&(at[2].y<at[0].y?at[2].assign(at[1]):at[1].assign(at[2])),at[3].x<at[2].x&&(at[3].y<at[0].y?at[3].assign(at[2]):at[2].assign(at[3])),o[2].x-=i/2,at[2].x-=i/2),fo(this,V),fo(this,Z),t.Yo=o,t.kp=at,t.la.h(p,L),t.Da.h(I,z)}break;default:it("Unhandled compaction value "+t.compaction.toString())}}},jt.prototype.customAlignment=function(t,e,i,n,o){return[e,i,n,o]},jt.prototype.computeBusNodeSpacing=function(t){return null===t.parent?0:t.parent.nodeSpacing},jt.prototype.computeBusLastRowSpacing=function(t){return null===t.parent?0:t.parent.rowSpacing},jt.prototype.arrangeTrees=function(){if(this.Sb===Cd)for(var t=this.Vb.iterator;t.next();){var e=t.value;if(e instanceof jn){var i=e.node;if(null!==i){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),dg(this,e,i,n)}}}else{for(t=[],e=this.Vb.iterator;e.next();)(i=e.value)instanceof jn&&t.push(i);switch(this.sorting){case Nl:break;case tu:t.reverse();break;case eu:t.sort(this.comparer);break;case iu:t.sort(this.comparer),t.reverse();break;default:it("Unhandled sorting value "+this.sorting.toString())}for(e=(i=this.arrangementOrigin).x,i=i.y,n=0;n<t.length;n++){var o=t[n];switch(dg(this,o,e+o.la.x,i+o.la.y),this.Sb){case Md:i+=o.Da.height+this.$d.height;break;case mg:e+=o.Da.width+this.$d.width;break;default:it("Unhandled arrangement value "+this.Sb.toString())}}}},jt.prototype.commitLayout=function(){this.zv(),this.commitNodes(),this.Hu(),this.isRouting&&this.commitLinks()},jt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},jt.prototype.Hu=function(){if(this.layerStyle===Ad){for(var t=this.aw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var o=n.value;null===i?i=o.bounds.copy():i.ed(o.bounds);var r=e[o.level];r=void 0===r?this.computeLayerSpacing(o):Math.max(r,this.computeLayerSpacing(o)),e[o.level]=r}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);if(90===this.angle||270===this.angle?(i.Bc(this.nodeSpacing/2,this.layerSpacing),n=new B(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Bc(this.layerSpacing,this.nodeSpacing/2),n=new B(-this.layerSpacing/2,-this.nodeSpacing/2)),o=[],i=90===this.angle||270===this.angle?i.width:i.height,r=0,180===this.angle||270===this.angle)for(var l=0;l<t.length;l++)r+=t[l]+e[l];for(l=0;l<t.length;l++){var u=t[l]+e[l];270===this.angle?o.push(new $(0,r-=u,i,u)):90===this.angle?(o.push(new $(0,r,i,u)),r+=u):180===this.angle?o.push(new $(r-=u,0,u,i)):(o.push(new $(r,0,u,i)),r+=u)}this.commitLayers(o,n)}},jt.prototype.commitLayers=function(){},jt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},jt.prototype.zv=function(){for(var t=this.Vb.iterator;t.next();){var e=t.value;e instanceof jn&&yv(this,e)}},jt.prototype.setPortSpots=function(t){var e=t.alignment;if(ds(e)){var i=this.ud===Ro,n=to(t);switch(n){case 0:var o=Le;break;case 90:o=ni;break;case 180:o=_e;break;default:o=ye}var r=t.children,l=r.length;switch(e){case zr:case Ho:for(e=0;e<l;e++){var u=r[e];if(null!==(u=(i?u.sourceEdges:u.destinationEdges).first())&&null!==(u=u.link)){var c=90===n||270===n?_e:ye;if(1===l||e===l-1&&l%2==1)switch(n){case 0:c=_e;break;case 90:c=ye;break;case 180:c=Le;break;default:c=ni}else e%2==0&&(c=90===n||270===n?Le:ni);i?(t.setsPortSpot&&(u.fromSpot=o),t.setsChildPortSpot&&(u.toSpot=c)):(t.setsPortSpot&&(u.fromSpot=c),t.setsChildPortSpot&&(u.toSpot=o))}}break;case Rr:for(n=90===n||270===n?Le:ni,r=i?t.destinationEdges:t.sourceEdges;r.next();)null!==(l=r.value.link)&&(i?(t.setsPortSpot&&(l.fromSpot=o),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=o)));break;case sr:for(n=90===n||270===n?_e:ye,r=i?t.destinationEdges:t.sourceEdges;r.next();)null!==(l=r.value.link)&&(i?(t.setsPortSpot&&(l.fromSpot=o),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=o)))}}else if(i=to(t),this.ud===Ro){for(o=t.destinationEdges;o.next();)if(null!==(n=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Yb())switch(i){case 0:n.fromSpot=Le;break;case 90:n.fromSpot=ni;break;case 180:n.fromSpot=_e;break;default:n.fromSpot=ye}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Yb())switch(i){case 0:n.toSpot=_e;break;case 90:n.toSpot=ye;break;case 180:n.toSpot=Le;break;default:n.toSpot=ni}else n.toSpot=t.childPortSpot}}else for(o=t.sourceEdges;o.next();)if(null!==(n=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Yb())switch(i){case 0:n.toSpot=Le;break;case 90:n.toSpot=ni;break;case 180:n.toSpot=_e;break;default:n.toSpot=ye}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Yb())switch(i){case 0:n.fromSpot=_e;break;case 90:n.fromSpot=ye;break;case 180:n.fromSpot=Le;break;default:n.fromSpot=ni}else n.fromSpot=t.childPortSpot}},jt.prototype.computeLayerSpacing=function(t){var e=to(t);e=90===e||270===e;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i},jt.prototype.computeNodeIndent=function(t){var e=to(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=90===e||270===e?t.width*n:t.height*n}return Math.max(0,i)},Ot.Object.defineProperties(jt.prototype,{roots:{get:function(){return this.Vb},set:function(t){this.Vb!==t&&(this.Vb=t,this.C())}},path:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t,this.C())}},treeStyle:{get:function(){return this.vo},set:function(t){this.Sb===t||t!==kd&&t!==pg&&t!==fg&&t!==gg||(this.vo=t,this.C())}},layerStyle:{get:function(){return this.Bq},set:function(t){this.Sb===t||t!==yg&&t!==vg&&t!==Ad||(this.Bq=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},arrangement:{get:function(){return this.Sb},set:function(t){this.Sb===t||t!==Md&&t!==mg&&t!==Cd||(this.Sb=t,this.C())}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},rootDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.C())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.C())}},sorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==Nl&&t!==tu&&t!==eu&&!iu||(this.W.sorting=t,this.C())}},comparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.C())}},angle:{get:function(){return this.W.angle},set:function(t){this.W.angle!==t&&(0===t||90===t||180===t||270===t?(this.W.angle=t,this.C()):it("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.C())}},nodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==Sd&&t!==nu||(this.W.compaction=t,this.C())}},breadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.D(t)||(this.W.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.D(t)||(this.W.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==Nl&&t!==tu&&t!==eu&&!iu||(this.Y.sorting=t,this.C())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.C())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.Y.angle=t,this.C())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==Sd&&t!==nu||(this.Y.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.D(t)||(this.Y.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.D(t)||(this.Y.childPortSpot=t,this.C())}}});var bd=new ut(jt,"PathDefault",-1),Ro=new ut(jt,"PathDestination",0),ya=new ut(jt,"PathSource",1),Nl=new ut(jt,"SortingForwards",10),tu=new ut(jt,"SortingReverse",11),eu=new ut(jt,"SortingAscending",12),iu=new ut(jt,"SortingDescending",13),Fl=new ut(jt,"AlignmentCenterSubtrees",20),va=new ut(jt,"AlignmentCenterChildren",21),Yo=new ut(jt,"AlignmentStart",22),Xo=new ut(jt,"AlignmentEnd",23),zr=new ut(jt,"AlignmentBus",24),Ho=new ut(jt,"AlignmentBusBranching",25),Rr=new ut(jt,"AlignmentTopLeftBus",26),sr=new ut(jt,"AlignmentBottomRightBus",27),Sd=new ut(jt,"CompactionNone",30),nu=new ut(jt,"CompactionBlock",31),kd=new ut(jt,"StyleLayered",40),fg=new ut(jt,"StyleLastParents",41),pg=new ut(jt,"StyleAlternating",42),gg=new ut(jt,"StyleRootOnly",43),Md=new ut(jt,"ArrangementVertical",50),mg=new ut(jt,"ArrangementHorizontal",51),Cd=new ut(jt,"ArrangementFixedRoots",52),yg=new ut(jt,"LayerIndividual",60),vg=new ut(jt,"LayerSiblings",61),Ad=new ut(jt,"LayerUniform",62);function xa(t){se.call(this,t)}function jn(t){Ue.call(this,t),this.V=!1,this.hb=null,this.u=[],this.nb=this.Ha=this.F=this.ia=0,this.td=null,this.T=new B(0,0),this.Da=new Pt(0,0),this.la=new B(0,0),this.im=this.hm=this.rA=!1,this.kp=this.Yo=null,this.nd=Nl,this.hd=zp,this.Lb=0,this.Kb=va,this.Vq=this.Uq=0,this.Wq=20,this.ie=50,this.Aq=0,this.Hp=nu,this.Ap=0,this.nr=25,this.Gp=this.mr=10,this.Fp=20,this.xr=!0,this.dr=Bt,this.wr=!0,this.Dp=Bt}function Il(t){tn.call(this,t),this.$t=new B(0,0)}jt.className="TreeLayout",jt.PathDefault=bd,jt.PathDestination=Ro,jt.PathSource=ya,jt.SortingForwards=Nl,jt.SortingReverse=tu,jt.SortingAscending=eu,jt.SortingDescending=iu,jt.AlignmentCenterSubtrees=Fl,jt.AlignmentCenterChildren=va,jt.AlignmentStart=Yo,jt.AlignmentEnd=Xo,jt.AlignmentBus=zr,jt.AlignmentBusBranching=Ho,jt.AlignmentTopLeftBus=Rr,jt.AlignmentBottomRightBus=sr,jt.CompactionNone=Sd,jt.CompactionBlock=nu,jt.StyleLayered=kd,jt.StyleLastParents=fg,jt.StyleAlternating=pg,jt.StyleRootOnly=gg,jt.ArrangementVertical=Md,jt.ArrangementHorizontal=mg,jt.ArrangementFixedRoots=Cd,jt.LayerIndividual=yg,jt.LayerSiblings=vg,jt.LayerUniform=Ad,Ut(xa,se),xa.prototype.createVertex=function(){return new jn(this)},xa.prototype.createEdge=function(){return new Il(this)},xa.className="TreeNetwork",Ut(jn,Ue),jn.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.nd=t.sorting,this.hd=t.comparer,this.Lb=t.angle,this.Kb=t.alignment,this.Uq=t.nodeIndent,this.Vq=t.nodeIndentPastParent,this.Wq=t.nodeSpacing,this.ie=t.layerSpacing,this.Aq=t.layerSpacingParentOverlap,this.Hp=t.compaction,this.Ap=t.breadthLimit,this.nr=t.rowSpacing,this.mr=t.rowIndent,this.Gp=t.commentSpacing,this.Fp=t.commentMargin,this.xr=t.setsPortSpot,this.dr=t.portSpot,this.wr=t.setsChildPortSpot,this.Dp=t.childPortSpot)},Ot.Object.defineProperties(jn.prototype,{initialized:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},parent:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.u=t}}},level:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},maxGenerationCount:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},comments:{get:function(){return this.td},set:function(t){if(this.td!==t){if(null!==t)for(var e=t.length,i=0;i<e;i++);this.td=t}}},sorting:{get:function(){return this.nd},set:function(t){this.nd!==t&&(this.nd=t)}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t)}},angle:{get:function(){return this.Lb},set:function(t){this.Lb!==t&&(this.Lb=t)}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t)}},nodeIndent:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},nodeIndentPastParent:{get:function(){return this.Vq},set:function(t){this.Vq!==t&&(this.Vq=t)}},nodeSpacing:{get:function(){return this.Wq},set:function(t){this.Wq!==t&&(this.Wq=t)}},layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&(this.ie=t)}},layerSpacingParentOverlap:{get:function(){return this.Aq},set:function(t){this.Aq!==t&&(this.Aq=t)}},compaction:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}},breadthLimit:{get:function(){return this.Ap},set:function(t){this.Ap!==t&&(this.Ap=t)}},rowSpacing:{get:function(){return this.nr},set:function(t){this.nr!==t&&(this.nr=t)}},rowIndent:{get:function(){return this.mr},set:function(t){this.mr!==t&&(this.mr=t)}},commentSpacing:{get:function(){return this.Gp},set:function(t){this.Gp!==t&&(this.Gp=t)}},commentMargin:{get:function(){return this.Fp},set:function(t){this.Fp!==t&&(this.Fp=t)}},setsPortSpot:{get:function(){return this.xr},set:function(t){this.xr!==t&&(this.xr=t)}},portSpot:{get:function(){return this.dr},set:function(t){this.dr.D(t)||(this.dr=t)}},setsChildPortSpot:{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t)}},childPortSpot:{get:function(){return this.Dp},set:function(t){this.Dp.D(t)||(this.Dp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.T},set:function(t){this.T.set(t)}},subtreeSize:{get:function(){return this.Da},set:function(t){this.Da.set(t)}},subtreeOffset:{get:function(){return this.la},set:function(t){this.la.set(t)}}}),jn.className="TreeVertex",Ut(Il,tn),Il.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ud){case Ro:i=this.fromVertex,n=this.toVertex;break;case ya:i=this.toVertex,n=this.fromVertex;break;default:it("Unhandled path value "+e.ud.toString())}if(null!==i&&null!==n){var o=this.$t;if(0!==o.x||0!==o.y||i.rA){n=i.bounds;var r=to(i),l=e.computeLayerSpacing(i),u=i.rowSpacing;t.vg();var m,c=t.curve===dn,p=t.isOrthogonal;if(t.uh(),p||c){for(m=2;4<t.pointsCount;)t.qv(2);var x=t.i(1),b=t.i(2)}else{for(m=1;3<t.pointsCount;)t.qv(1);x=t.i(0),b=t.i(t.pointsCount-1)}var M=t.i(t.pointsCount-1);0===r?(i.alignment===Xo?(r=n.bottom+o.y,0===o.y&&x.y>M.y+i.rowIndent&&(r=Math.min(r,Math.max(x.y,r-e.computeNodeIndent(i))))):i.alignment===Yo?(r=n.top+o.y,0===o.y&&x.y<M.y-i.rowIndent&&(r=Math.max(r,Math.min(x.y,r+e.computeNodeIndent(i))))):r=i.hm||i.im&&1===i.maxGenerationCount?n.top-i.la.y+o.y:n.y+n.height/2+o.y,c?(t.m(m,x.x,r),m++,t.m(m,n.right+l,r),m++,t.m(m,n.right+l+(o.x-u)/3,r),m++,t.m(m,n.right+l+2*(o.x-u)/3,r),m++,t.m(m,n.right+l+(o.x-u),r),m++,t.m(m,b.x,r)):(p&&(t.m(m,n.right+l/2,x.y),m++),t.m(m,n.right+l/2,r),m++,t.m(m,n.right+l+o.x-(p?u/2:u),r),m++,p&&t.m(m,t.i(m-1).x,b.y))):90===r?(i.alignment===Xo?(r=n.right+o.x,0===o.x&&x.x>M.x+i.rowIndent&&(r=Math.min(r,Math.max(x.x,r-e.computeNodeIndent(i))))):i.alignment===Yo?(r=n.left+o.x,0===o.x&&x.x<M.x-i.rowIndent&&(r=Math.max(r,Math.min(x.x,r+e.computeNodeIndent(i))))):r=i.hm||i.im&&1===i.maxGenerationCount?n.left-i.la.x+o.x:n.x+n.width/2+o.x,c?(t.m(m,r,x.y),m++,t.m(m,r,n.bottom+l),m++,t.m(m,r,n.bottom+l+(o.y-u)/3),m++,t.m(m,r,n.bottom+l+2*(o.y-u)/3),m++,t.m(m,r,n.bottom+l+(o.y-u)),m++,t.m(m,r,b.y)):(p&&(t.m(m,x.x,n.bottom+l/2),m++),t.m(m,r,n.bottom+l/2),m++,t.m(m,r,n.bottom+l+o.y-(p?u/2:u)),m++,p&&t.m(m,b.x,t.i(m-1).y))):180===r?(i.alignment===Xo?(r=n.bottom+o.y,0===o.y&&x.y>M.y+i.rowIndent&&(r=Math.min(r,Math.max(x.y,r-e.computeNodeIndent(i))))):i.alignment===Yo?(r=n.top+o.y,0===o.y&&x.y<M.y-i.rowIndent&&(r=Math.max(r,Math.min(x.y,r+e.computeNodeIndent(i))))):r=i.hm||i.im&&1===i.maxGenerationCount?n.top-i.la.y+o.y:n.y+n.height/2+o.y,c?(t.m(m,x.x,r),m++,t.m(m,n.left-l,r),m++,t.m(m,n.left-l+(o.x+u)/3,r),m++,t.m(m,n.left-l+2*(o.x+u)/3,r),m++,t.m(m,n.left-l+(o.x+u),r),m++,t.m(m,b.x,r)):(p&&(t.m(m,n.left-l/2,x.y),m++),t.m(m,n.left-l/2,r),m++,t.m(m,n.left-l+o.x+(p?u/2:u),r),m++,p&&t.m(m,t.i(m-1).x,b.y))):270===r?(i.alignment===Xo?(r=n.right+o.x,0===o.x&&x.x>M.x+i.rowIndent&&(r=Math.min(r,Math.max(x.x,r-e.computeNodeIndent(i))))):i.alignment===Yo?(r=n.left+o.x,0===o.x&&x.x<M.x-i.rowIndent&&(r=Math.max(r,Math.min(x.x,r+e.computeNodeIndent(i))))):r=i.hm||i.im&&1===i.maxGenerationCount?n.left-i.la.x+o.x:n.x+n.width/2+o.x,c?(t.m(m,r,x.y),m++,t.m(m,r,n.top-l),m++,t.m(m,r,n.top-l+(o.y+u)/3),m++,t.m(m,r,n.top-l+2*(o.y+u)/3),m++,t.m(m,r,n.top-l+(o.y+u)),m++,t.m(m,r,b.y)):(p&&(t.m(m,x.x,n.top-l/2),m++),t.m(m,r,n.top-l/2),m++,t.m(m,r,n.top-l+o.y+(p?u/2:u)),m++,p&&t.m(m,b.x,t.i(m-1).y))):it("Invalid angle "+r),t.zf()}else o=n,t=this.link,n=this.network.layout,(e=to(i))!==to(o)&&(l=n.computeLayerSpacing(i),u=i.bounds,i=o.bounds,0===e&&i.left-u.right<l+1||90===e&&i.top-u.bottom<l+1||180===e&&u.left-i.right<l+1||270===e&&u.top-i.bottom<l+1||(t.vg(),i=t.curve===dn,o=t.isOrthogonal,n=ds(this.fromVertex.alignment),t.uh(),0===e?(e=u.right+l/2,i?4===t.pointsCount&&(i=t.i(3).y,t.L(1,e-20,t.i(1).y),t.m(2,e-20,i),t.m(3,e,i),t.m(4,e+20,i),t.L(5,t.i(5).x,i)):o?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):4===t.pointsCount?t.m(2,e,t.i(2).y):3===t.pointsCount?t.L(1,e,t.i(2).y):2===t.pointsCount&&t.m(1,e,t.i(1).y)):90===e?(e=u.bottom+l/2,i?4===t.pointsCount&&(i=t.i(3).x,t.L(1,t.i(1).x,e-20),t.m(2,i,e-20),t.m(3,i,e),t.m(4,i,e+20),t.L(5,i,t.i(5).y)):o?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):4===t.pointsCount?t.m(2,t.i(2).x,e):3===t.pointsCount?t.L(1,t.i(2).x,e):2===t.pointsCount&&t.m(1,t.i(1).x,e)):180===e?(e=u.left-l/2,i?4===t.pointsCount&&(i=t.i(3).y,t.L(1,e+20,t.i(1).y),t.m(2,e+20,i),t.m(3,e,i),t.m(4,e-20,i),t.L(5,t.i(5).x,i)):o?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):4===t.pointsCount?t.m(2,e,t.i(2).y):3===t.pointsCount?t.L(1,e,t.i(2).y):2===t.pointsCount&&t.m(1,e,t.i(1).y)):270===e&&(e=u.top-l/2,i?4===t.pointsCount&&(i=t.i(3).x,t.L(1,t.i(1).x,e+20),t.m(2,i,e+20),t.m(3,i,e),t.m(4,i,e-20),t.L(5,i,t.i(5).y)):o?n?t.L(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):4===t.pointsCount?t.m(2,t.i(2).x,e):3===t.pointsCount?t.L(1,t.i(2).x,e):2===t.pointsCount&&t.m(1,t.i(1).x,e)),t.zf()))}}},Ot.Object.defineProperties(Il.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},relativePoint:{get:function(){return this.$t},set:function(t){this.$t.set(t)}}}),Il.className="TreeEdge",Se.prototype.initializeStandardTools=function(){this.gb("Action",new wr,this.mouseDownTools),this.gb("Relinking",new In,this.mouseDownTools),this.gb("LinkReshaping",new Ge,this.mouseDownTools),this.gb("Rotating",new hn,this.mouseDownTools),this.gb("Resizing",new Li,this.mouseDownTools),this.gb("Linking",new Wi,this.mouseMoveTools),this.gb("Dragging",new ke,this.mouseMoveTools),this.gb("DragSelecting",new Lo,this.mouseMoveTools),this.gb("Panning",new No,this.mouseMoveTools),this.gb("ContextMenu",new qi,this.mouseUpTools),this.gb("TextEditing",new ge,this.mouseUpTools),this.gb("ClickCreating",new Ms,this.mouseUpTools),this.gb("ClickSelecting",new Ha,this.mouseUpTools)},bo("Horizontal",new ec),bo("Spot",new nc),bo("Table",new rc),bo("Viewbox",new lc),bo("TableRow",new sc),bo("TableColumn",new ac),bo("Graduated",new xh),bo("Grid",new vh),Vu.add("GraphLinksModel",ti),Vu.add("TreeModel",An);var Pd=At.go,xg={get licenseKey(){return q.licenseKey},set licenseKey(t){q.licenseKey=t},get version(){return q.version},Group:Nt,EnumValue:ut,List:ot,Set:rt,Map:Tt,Point:B,Size:Pt,Rect:$,Margin:R,Spot:f,Geometry:lt,PathFigure:oi,PathSegment:_t,InputEvent:xn,DiagramEvent:qs,ChangedEvent:be,Model:yt,GraphLinksModel:Xt,TreeModel:ji,Binding:Ee,Transaction:hi,UndoManager:Ce,CommandHandler:ne,Tool:Zt,DraggingTool:ke,DraggingInfo:qr,DraggingOptions:tl,LinkingBaseTool:vi,LinkingTool:Wi,RelinkingTool:In,LinkReshapingTool:Ge,ResizingTool:Li,RotatingTool:hn,ClickSelectingTool:Ha,ActionTool:wr,ClickCreatingTool:Ms,HTMLInfo:br,ContextMenuTool:qi,DragSelectingTool:Lo,PanningTool:No,TextEditingTool:ge,ToolManager:Se,Animation:Si,AnimationManager:wn,AnimationTrigger:Fo,Layer:ki,Diagram:q,Palette:Wu,Overview:Io,Brush:Kt,GraphObject:vt,Panel:nt,RowColumnDefinition:Re,Shape:It,TextBlock:re,Picture:Xi,Part:wt,Adornment:Vt,Node:dt,Link:st,Placeholder:Ii,Layout:pe,LayoutNetwork:se,LayoutVertex:Ue,LayoutEdge:tn,GridLayout:ri,PanelLayout:We,CircularLayout:xe,CircularNetwork:Pl,CircularVertex:Zh,CircularEdge:ad,ForceDirectedLayout:di,ForceDirectedNetwork:ga,ForceDirectedVertex:_h,ForceDirectedEdge:Kh,LayeredDigraphLayout:qt,LayeredDigraphNetwork:Ll,LayeredDigraphVertex:Tn,LayeredDigraphEdge:$h,TreeLayout:jt,TreeNetwork:xa,TreeVertex:jn,TreeEdge:Il};"object"==typeof Pd&&Pd.version&&Pi("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Pd?"debug ":"")+"version: "+Pd.version+", replaced with version: "+xg.version),q.prototype.go=xg,At.go=xg,"object"==typeof _r.exports&&(_r.exports=typeof global<"u"?global.go:self.go)})(),void 0!==(Kr="function"==typeof(Po=typeof global<"u"?global.go:self.go)?Po.call(xs,Xn,xs,_r):Po)&&(_r.exports=Kr)}}]);